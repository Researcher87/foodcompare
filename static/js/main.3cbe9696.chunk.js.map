{"version":3,"sources":["static/image/carousel sync /^/.*$","static/image/carousel/Img-de-1.png","static/image/carousel/Img-de-2.png","static/image/carousel/Img-de-3.png","static/image/carousel/Img-de-4.png","static/image/carousel/Img-de-5.png","static/image/carousel/Img-de-6.png","static/image/carousel/Img-de-7.png","static/image/carousel/Img-en-1.png","static/image/carousel/Img-en-2.png","static/image/carousel/Img-en-3.png","static/image/carousel/Img-en-4.png","static/image/carousel/Img-en-5.png","static/image/carousel/Img-en-6.png","static/image/carousel/Img-en-7.png","service/NutrientDataImportService.ts","config/Constants.ts","config/ApplicationSetting.ts","service/LanguageService.ts","service/nutrientdata/NameTypeService.ts","service/uri/BaseUriService.ts","contexts/ApplicationDataContext.tsx","contexts/LangContext.tsx","config/ApplicationKeys.ts","static/image/logo.png","static/image/text.png","static/labels.ts","service/WindowDimension.ts","components/Header.tsx","service/GA_EventService.ts","config/GA_Events.ts","components/Home.tsx","service/nutrientdata/CategoryService.ts","service/nutrientdata/FoodItemsService.ts","service/nutrientdata/FoodClassService.ts","service/nutrientdata/PortionDataService.ts","service/nutrientdata/NutrientDataRetriever.ts","config/UI_Config.ts","components/foodselector/FoodSelector.tsx","components/foodselector/CompositeFoodList.tsx","service/calculation/FoodDataAggregationService.ts","components/HelpModal.tsx","service/HelpService.ts","components/foodselector/FoodSelectorModal.tsx","components/ConfirmationDialog.tsx","config/ChartConfig.ts","service/ChartConfigurationService.ts","components/charthelper/PieChartConfigurationForm.tsx","components/charthelper/CustomLegend.tsx","service/nutrientdata/ChartSizeCalculation.tsx","service/calculation/MathService.ts","service/chartdata/BaseChartDataService.ts","components/fooddatapanel/charts/BaseDataChart.tsx","config/EnergyConstants.ts","service/calculation/EnergyService.ts","components/fooddatapanel/charts/EnergyDataChart.tsx","components/charthelper/BarChartConfigurationForm.tsx","service/calculation/DietaryRequirementService.ts","components/fooddatapanel/charts/MineralVitaminChart.tsx","service/chartdata/VitaminsMineralsDataService.ts","service/calculation/CarotenoidCalculationService.ts","service/chartdata/LipidsChartDataService.ts","components/fooddatapanel/charts/LipidsDataChart.tsx","components/fooddatapanel/charts/ProteinDataChart.tsx","service/chartdata/ProteinChartDataService.ts","service/chartdata/CarbsChartDataService.ts","components/fooddatapanel/charts/CarbsDataChart.tsx","components/fooddatapanel/ChartPanel.tsx","components/fooddatapanel/FoodDataTable.tsx","components/fooddatapanel/charts/InfoData.tsx","components/fooddatapanel/FoodDataPageBody.tsx","components/fooddatapanel/ChartMenuPanel.tsx","components/fooddatapanel/FoodDataPageHeader.tsx","service/TableService.ts","components/fooddatapanel/FoodDataPage.tsx","service/FoodDataPanelService.tsx","components/fooddatapanel/FoodAnalyzerContainer.tsx","components/fooddatapanel/TabContainer.tsx","service/uri/ChartConfigConverter.ts","service/uri/FoodDataPanelUriService.ts","service/uri/FoodDataPanelAggregatedUriService.ts","service/UserDataService.ts","components/fooddatapanel/FoodDataPanelContainer.tsx","components/foodselector/DirectCompareSelector.tsx","service/calculation/NutrientCalculationService.ts","components/directcompare/VerticalLabel.tsx","components/directcompare/DcMineralVitaminChart.tsx","components/directcompare/DcPieChart.tsx","components/directcompare/DcProteinDataChart.tsx","components/directcompare/DcEnergyChart.tsx","components/directcompare/DirectCompareDataPanel.tsx","service/uri/DirectCompareUriService.ts","components/directcompare/DirectCompareContainer.tsx","components/UserSettings.tsx","config/ErrorMessageCodes.ts","service/MailService.ts","components/contact/ContactForm.tsx","components/contact/Sources.tsx","components/contact/Versions.tsx","static/image/impressum-german.png","static/image/impressum-english.png","components/contact/Impressum.tsx","components/contact/ContactContainer.tsx","components/ranking/RankingSelector.tsx","service/uri/RankingPanelUriService.ts","service/RankingService.ts","components/ranking/RankingChart.tsx","components/ranking/RankingContainer.tsx","components/WebPageContainer.tsx","components/MobileDeviceCheck.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","loadFoodDataCorpus","categories","nutrientdata","conditions","portionTypes","sources","foodNames","foodClasses","foodItems","dietaryRequirements","AMOUNT_PORTION","GRAM","CHART_TYPE_PIE","CHART_TYPE_BAR","CHART_VITAMINS","CHART_MINERALS","CATEGORY_BEVERAGE","DATA_ASH","DATA_ENERGY","DATA_WATER","DATA_CARBS","DATA_LIPIDS","DATA_PROTEINS","DATA_MINERAL_CALCIUM","DATA_MINERAL_IRON","DATA_MINERAL_MAGNESIUM","DATA_MINERAL_PHOSPHORUS","DATA_MINERAL_POTASSIUM","DATA_MINERAL_SODIUM","DATA_MINERAL_ZINC","DATA_MINERAL_SELENIUM","DATA_MINERAL_MANGANESE","DATA_MINERAL_COPPER","DATA_VITAMINS_A","DATA_VITAMINS_B1","DATA_VITAMINS_B2","DATA_VITAMINS_B3","DATA_VITAMINS_B5","DATA_VITAMINS_B6","DATA_VITAMINS_B9","DATA_VITAMINS_B12","DATA_VITAMINS_C","DATA_VITAMINS_D","DATA_VITAMINS_E","DATA_VITAMINS_K","DATA_LIPIDS_SATURATED","DATA_LIPIDS_MONO_UNSATURATED","DATA_LIPIDS_POLY_UNSATURATED","DATA_LIPIDS_TRANSFATTY_ACIDS","DATA_CARBS_DIETARY_FIBERS","DATA_CARBS_SUGAR","DATA_CARBS_GLUCOSE","DATA_CARBS_FRUCTOSE","DATA_CARBS_GALACTOSE","DATA_CARBS_SUCROSE","DATA_CARBS_LACTOSE","DATA_CARBS_MALTOSE","DATA_CARBS_STARCH","DATA_PROTEIN_TRYPTOPHAN","DATA_PROTEIN_THREONINE","DATA_PROTEIN_ISOLEUCINE","DATA_PROTEIN_LEUCINE","DATA_PROTEIN_LYSINE","DATA_PROTEIN_METHIONINE","DATA_PROTEIN_CYSTINE","DATA_PROTEIN_PHENYLALANINE","DATA_PROTEIN_TYROSINE","DATA_PROTEIN_VALINE","DATA_PROTEIN_ARGININE","DATA_PROTEIN_HISTIDINE","DATA_PROTEIN_ALANINE","DATA_PROTEIN_ASPARTIC_ACID","DATA_PROTEIN_GLUTAMIC_ACID","DATA_PROTEIN_GLYCINE","DATA_PROTEIN_PROLINE","DATA_PROTEIN_SERINE","DISPLAYMODE_TABLE","DISPLAYMODE_CHART","CARBS_DATA_BASE","CARBS_DATA_DETAIL","LIPIDS_DATA_BASE","LIPIDS_DATA_OMEGA","PATH_DIRECT_COMPARE","PATH_FOODCOMPARE","PATH_FOODDATA_PANEL","PATH_HOME","PATH_CONTACT","PATH_USERSETTINGS","PATH_RANKING","PORTION_KEY_INDIVIDUAL","PORTION_KEY_100","LANGUAGE_DE","LANGUAGE_EN","SEX_MALE","SEX_FEMALE","SOURCE_SRLEGACY","SOURCE_FNDDS","TAB_BASE_DATA","TAB_ENERGY_DATA","TAB_VITAMIN_DATA","TAB_MINERAL_DATA","TAB_LIPIDS_DATA","TAB_CARBS_DATA","TAB_PROTEINS_DATA","TAB_INFO","QUERYKEY_DATAPANEL_ADD","QUERYKEY_DATAPANEL_ADD_COMPOSITE","QUERYKEY_DATAPANEL_ITEM","QUERYKEY_DATAPANEL_RANKING","QUERYKEY_DATAPANEL_AGGREGATED","release","buildDate","maxMessageCharacters","maxElementsInRankingChart","initialFoodClassId","initialComparisonFoodClassId","minimalOmegaRatio","smallFormsScreenSize","width","height","initialUserDataAge","initialUserDataSize","initialUserDataWeight","initialUserDataSex","initialUserDataPregnant","initialUserDataBreastfeeding","initialUserDataLeisureSports","initialChartConfigData","baseChartConfig","chartType","showLegend","showDetails","vitaminChartConfig","portionType","expand100","mineralChartConfig","lipidsChartConfig","hideRemainders","subChart","carbsChartConfig","proteinChartConfig","initialDirectCompareConfigData","synchronize","subChart1","subChart2","getName","nameType","language","verbose","arguments","length","undefined","name","germanName","englishName","includes","index","indexOf","substring","trim","removeAuxiliaryInformationFromFoodName","getNameFromFoodNameList","foodNameList","find","shortenName","maxLength","indexOfBrace","parseFoodCompareUri","queryString","window","location","search","equalOperator","key","value","ApplicationDataContextStore","createContext","ApplicationDataContextProvider","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","args","Array","_key","call","apply","concat","setDebugState","debug","setState","prevState","applicationData","_objectSpread","setSelectedFoodDataPanelTab","selectedTab","foodDataPanel","selectedFoodItemIndex","setSelectedDisplayMode","displayMode","setSelectedFoodDataPanelPage","selectedPage","selectedDataPage","addItemToFoodDataPanel","foodItem","newItems","assign","state","selectedFoodItems","push","removeItemFromFoodDataPanel","foodItemId","filter","selectedFoodItem","newIndex","currentIndex","removeAllItemsFromFoodDataPanel","updateAllFoodItemNames","newLanguage","newFoodItems","foodName","nameId","tab","updateFoodDataPanelChartConfig","chartConfig","chartConfigData","setSelectedDirectCompareItems","selectedFoodItem1","selectedFoodItem2","directCompareDataPanel","setSelectedDirectCompareDataPage","updateDirectCompareChartConfig","directCompareConfigChart","setUserData","userData","setPreferredSource","source","preferredSource","setFoodSelectorConfig","selectedCategory","sourceSupplement","sourceCombine","foodSelector","setDirectCompareFoodSelectorConfig1","foodSelector1","setDirectCompareFoodSelectorConfig2","foodSelector2","setRankingPanelData","rankingPanelData","foodDataCorpus","selectedFoodCategory","selectedGroup","selectedElement","use100gram","showDietaryRequirements","age","size","weight","sex","pregnant","breastFeeding","palValue","leisureSports","initialValues","isDebugMode","ready","useAsMobile","_createClass","uriData","NutrientDataImportService","this","_this2","setMobileUsage","usage","setFoodDataPanelData","setSelectedFoodTab","setSelectedDataPage","setDirectCompareData","setDirectCompareFoodSelector1","setDirectCompareFoodSelector2","_jsx","Provider","children","props","Component","LanguageContext","userLanguageChange","selectedLanguage","LanguageProvider","_ref","userLanguage","navigator","preferredLanguage","_useState","useState","_useState2","_slicedToArray","setLanguage","provider","selectedLanaguage","ANALYTICS_MESS_ID","RECAPTCHA_KEY","SERVICE_ID","TEMPLATE_ID","USER_ID","applicationStrings","button_add","de","en","button_cancel","button_change_to_chart_mode","button_close","button_getstarted_1","button_getstarted_2","button_getstarted_3","button_getstarted_4","button_no","button_select","button_show","button_send","button_submit","button_update","button_yes","checkbox_chartoption_hideRemainders","checkbox_chartoption_showLegend","checkbox_chartoption_showLegend_m","checkbox_chartoption_showDetails","checkbox_chartoption_showDetails_m","checkbox_english","checkbox_english_m","checkbox_expand100g","checkbox_german","checkbox_german_m","checkbox_synchronize","confirm_close_all_tabs","device_detection_hint","direct_compare_text","home_carousel_0","home_carousel_1","home_carousel_2","home_carousel_3","home_carousel_4","home_carousel_5","home_carousel_6","home_text_1","home_text_2","home_text_3","home_foodcompare_overview","input_compositelist_title","label_amount","label_amount_short","label_category","label_charttype","label_charttype_pie","label_charttype_bar","label_charttype_carbs_base","label_charttype_carbs_detail","label_charttype_energy","label_charttype_lipids_base","label_charttype_lipids_base_title","label_charttype_lipids_omega","label_charttype_lipids_omega_title","label_charttype_minerals","label_charttype_proteins","label_charttype_vitamins","label_chart_bmr","label_chart_energyExpenditure","label_chart_proteins","label_chart_nutrientComposition","label_chart_totalComposition","label_chart_view","label_datatype","label_food","label_foodclass","label_fooditem","label_foodselector","label_foodselector_composite","label_group","label_getStarted","label_info","label_info_composite","label_info_category","label_info_foodClass","label_info_foodId","label_info_foodName","label_info_portion","label_info_portionType","label_info_preparation","label_info_source","label_language","label_mail_name","label_mail_address","label_mail_message","label_mail_characters_left","label_mail_too_long","label_mail_error_name","label_mail_error_mailaddress","label_mail_error_nocontent","label_mail_error_content_too_long","label_mail_error_verification","label_noData","label_nutrient_alcohol","label_nutrient_ash","label_nutrient_carbohydrates","label_nutrient_carbohydrates_short","label_nutrient_carbohydrates_fructose","label_nutrient_carbohydrates_galactose","label_nutrient_carbohydrates_glucose","label_nutrient_carbohydrates_lactose","label_nutrient_carbohydrates_maltose","label_nutrient_carbohydrates_starch","label_nutrient_carbohydrates_sucrose","label_nutrient_dietaryFibers","label_nutrient_dietaryFibers_short","label_nutrient_energy","label_nutrient_lipids","label_nutrient_lipids_long","label_nutrient_lipids_saturated","label_nutrient_lipids_saturated_short","label_nutrient_lipids_unsaturated","label_nutrient_lipids_unsaturated_mono","label_nutrient_lipids_unsaturated_mono_short","label_nutrient_lipids_unsaturated_poly","label_nutrient_lipids_unsaturated_poly_short","label_nutrient_lipids_transfattyAcids","label_nutrient_lipids_omega3","label_nutrient_lipids_omega6","label_nutrient_lipids_cholesterol","label_nutrient_min","label_nutrient_min_calcium","label_nutrient_min_copper","label_nutrient_min_iron","label_nutrient_min_magnesium","label_nutrient_min_manganese","label_nutrient_min_phosphorus","label_nutrient_min_potassimum","label_nutrient_min_selenium","label_nutrient_min_sodium","label_nutrient_min_zinc","label_nutrient_omega3","label_nutrient_omega6","label_nutrient_proteins","label_nutrient_proteins_alanine","label_nutrient_proteins_arginine","label_nutrient_proteins_asparticAcid","label_nutrient_proteins_cystine","label_nutrient_proteins_glysine","label_nutrient_proteins_glutamicAcid","label_nutrient_proteins_histidine","label_nutrient_proteins_isoleucine","label_nutrient_proteins_leucine","label_nutrient_proteins_lysine","label_nutrient_proteins_methionine","label_nutrient_proteins_phenylalanine","label_nutrient_proteins_proline","label_nutrient_proteins_serine","label_nutrient_proteins_threonine","label_nutrient_proteins_tryptophan","label_nutrient_proteins_tyrosine","label_nutrient_proteins_valine","label_nutrient_remainder","label_nutrient_sugar","label_nutrient_vit","label_nutrient_vit_a","label_nutrient_vit_b1","label_nutrient_vit_b2","label_nutrient_vit_b3","label_nutrient_vit_b5","label_nutrient_vit_b6","label_nutrient_vit_b9","label_nutrient_vit_b12","label_nutrient_vit_c","label_nutrient_vit_d","label_nutrient_vit_e","label_nutrient_vit_k","label_nutrient_vit_carotenoid","label_nutrient_vit_carotenoid_alpha","label_nutrient_vit_carotenoid_beta","label_nutrient_vit_scientific_a","label_nutrient_vit_scientific_b1","label_nutrient_vit_scientific_b2","label_nutrient_vit_scientific_b3","label_nutrient_vit_scientific_b5","label_nutrient_vit_scientific_b9","label_nutrient_vit_scientific_b12","label_nutrient_vit_scientific_c","label_nutrient_vit_scientific_d","label_nutrient_vit_scientific_e","label_nutrient_vit_scientific_k","label_nutrient_water","label_overview","label_per_100g","label_per_portion","label_portion","label_portion_selected","label_portion_common","label_prefix_hereof","label_reference","label_preferred_source","label_ranking_dietaryRequirements","label_source","label_source_supplement","label_source_supplement_tooltip","label_source_combine","label_source_combine_tooltip","label_title","label_unknown","label_usda_reference","label_userSettings_age","label_userSettings_breastfeeding","label_userSettings_intro","label_userSettings_leisureSports","label_userSettings_leisureSports_tooltip","label_userSettings_palValue","label_userSettings_pregnant","label_userSettings_sex","label_userSettings_sex_male","label_userSettings_sex_female","label_userSettings_size","label_userSettings_weight","label_value","menu_food_data_panel","menu_food_data_panel_m","menu_direct_compare","menu_direct_compare_m","menu_home","menu_ranking","menu_ranking_m","menu_settings","menu_settings_m","menu_contact","menu_contact_sources","menu_contact_versions","menu_contact_impressum","message_email_success","message_email_error","message_error_existing_element","message_error_incomplete_form","message_error_invalid_portion","message_userdata_success","message_userdata_error_title","message_userdata_error_age","message_userdata_error_size","message_userdata_error_weight","palcat_name_1","palcat_desc_1","palcat_name_2","palcat_desc_2","palcat_name_3","palcat_desc_3","palcat_name_4","palcat_desc_4","palcat_name_5","palcat_desc_5","palcat_name_6","palcat_desc_6","palcat_name_7","palcat_desc_7","portion_100g","portion_individual","text_contact_disclaimer1","text_contact_disclaimer2","text_contact_disclaimer3","text_contact_form","text_contact_source1","text_contact_source2","text_contact_source3","text_contact_source4","text_empty_fooddatapanel","text_empty_fooddatapanel_mobileInfo","text_ranking","text_setUserdata_p1","text_setUserdata_p2","text_setUserdata_p3","tooltip_icon_charts","tooltip_icon_close","tooltip_icon_newFoodItem","tooltip_icon_newFoodItemStack","tooltip_icon_removeAll","tooltip_icon_table","tooltip_source","getCurrentWindowDimension","innerWidth","innerHeight","useWindowDimension","windowDimension","setWindowDimension","useEffect","addEventListener","removeEventListener","isSmallScreen","isMobileDevice","isMobile","Header","applicationContext","useContext","_useContext","useLocation","handleLanguageButtonClick","event","target","handleSourceButtonClick","activePath","pathname","endsWith","console","log","renderMenus","menuNameAnalyze","menuNameDirectCompare","menuNameRanking","menuNameSettings","buttonContainerClass","menuClass","_jsxs","className","Link","to","Button","variant","active","language_en","language_de","renderLanguageButtons","type","defaultChecked","onClick","renderSourceButtons","style","paddingLeft","checked","onChange","overflowX","paddingTop","minWidth","maxWidth","src","logo","alt","text","marginTop","callEvent","debugMode","action","category","label","ReactGA","GA_CATEGORY_HOME","GA_CATEGORY_FOOD_ANALYZER","GA_CATEGORY_DIRECT_COMPARE","GA_CATEGORY_RANKING","GA_CATEGORY_USER_SETTINGS","GA_CATEGORY_CONTACT","GA_CATEGORY_DATAPANEL","GA_ACTION_SELECT_FOOD_ITEM","GA_ACTION_SELECTION_DIRECT_COMPARE","GA_ACTION_SELECTION_RANKING_CAT","GA_ACTION_SELECTION_RANKING_ELEMENT","GA_ACTION_RANKING_CONFIG","GA_ACTION_HOME_CLICK_START_BUTTON","GA_ACTION_USER_SETTINGS","GA_ACTION_CONTACT_SUBMENU","GA_ACTION_DATAPANEL_SWITCH_PAGE","GA_ACTION_DATAPANEL_BASEDATA_CONFIG","GA_ACTION_DATAPANEL_VITAMINS_CONFIG","GA_ACTION_DATAPANEL_MINERALS_CONFIG","GA_ACTION_DATAPANEL_PROTEINS_CONFIG","GA_ACTION_DATAPANEL_LIPIDS_CONFIG","GA_ACTION_DATAPANEL_CARBS_CONFIG","GA_ACTION_DATAPANEL_GENERAL_ACTION","images","require","Home","displayedImage","setDisplayedImage","imageChanged","image","renderCarousel","pic1","default","pic2","pic3","pic4","pic5","pic6","pic7","captionAttribute","imageCaption","paddingBottom","Carousel","showArrows","infiniteLoop","autoPlay","interval","transitionTime","selectedItem","showThumbs","showStatus","textAlign","fontStyle","buttonBgColor","buttonTextColor","onStartButtonClick","renderStartButtons","buttonClass","backgroundColor","color","renderHomeText","textElements","textElement","renderTextElement","FaAngleDoubleRight","paddingRight","margin","homeText1","homeText2","marginBottom","homeText3","getCategorySelectList","nameTypeList","sort","names","forEach","reactSelectOptions","getReactSelectOptionsList","getFoodItemsSelectList","foodClass","filteredFoodItems","getFoodItemsOfFoodclass","_foodName","getFoodItemName","condition","conditionId","conditionName","foodClassId","foodClassLabelSeparator","getFoodClassSelectList","filteredFoodClasses","getFoodClassesOfCategory","nameKey","foodItemNames","element","join","obj1","obj2","localeCompare","getPortionReactSelectList","portionData","portionElement","portionTypeIndex","findIndex","portionName","amount","getDefaultPortionData","portionDataList","defaultPortionIndex","defaultPortionId","getSourceName","sourceId","getNutrientData","getNutrientDataForFoodItem","selectedSource","supplementData","combineData","sourceToUse","nutrientDataList","nutrientData","nutrientDataObject","complement","selectedNutrientData","complementeNutrientData","supplementedBaseData","supplementCategory","baseData","supplementedVitaminData","vitaminData","supplementedMineralData","mineralData","supplementedCarbsData","carbohydrateData","supplementedProteinData","proteinData","supplementedOmegaData","lipidData","omegaData","supplementedLipidData","sourceItemId","supplementNutrientData","combinedBaseData","combineCategory","combinedVitaminData","combinedMineralData","combinedCarbsData","combinedProteinData","combinedOmegaData","combinedLipidData","combineNutrientData","nutrientCategory1","nutrientCategory2","objectHasChildren","keys1","keys2","allKeys","_toConsumableArray","Set","finalObject","finalValue","value1","value2","fontsize","selectHeight","customSelectStyles","control","base","minHeight","fontSize","valueContainer","provided","padding","dropdownIndicator","styles","clearIndicator","getCustomSelectStyle","correspondingSelectElementStyle","COLOR_SELECTOR_CATEGORY","COLOR_SELECTOR_FOODCLASS","COLOR_SELECTOR_FOODITEM","FoodSelector","initialCategory","foodSelectorConfig","directCompareSelectorConfig1","directCompareSelectorConfig2","initialSupplementValue","directCompareSelectorNumber","initialCombineValue","setSelectedCategory","_useState3","_useState4","selectdFoodClass","setSelectedFoodClass","_useState5","_useState6","setSelectedFoodItem","_useState7","_useState8","selectedPortion","setSelectedPortion","_useState9","_useState10","portionAmount","setPortionAmount","_useState11","_useState12","title","setTitle","_useState13","_useState14","setSelectedSource","_useState15","_useState16","setSupplementData","_useState17","_useState18","setCombineData","_useState19","_useState20","initialized","setInitialized","_useState21","_useState22","categoriesList","setCategoriesList","_useState23","_useState24","foodClassesList","setFoodClassesList","_useState25","_useState26","foodClassesTypeaheadList","setFoodClassesTypeaheadList","_useState27","_useState28","foodItemsList","setFoodItemsList","_useState29","_useState30","portionsList","setPortionsList","_useState31","_useState32","sourcesList","setSourcesList","windowSize","getInitialFoodClassNumber","foodClassOptions","initialFoodClassToSet","defaultFoodClass","foodClassOption","categoryItems","initialFoodClass","foodItemsOfFoodClass","updateSourcesList","defaultPortion","makeSelectedFoodItemObject","newFoodItem","updateSelectedFoodItem","updateFoodSelectorConfig","_props$selectedFoodIt","portion","handleSourceChange","updateFoodClasses","foodClassItems","updateFoodItem","_applicationContext$f","updatePortionsList","sourceNames","getSourceNames","matchingSource","sourceObject","onCheckSupplementCheckbox","onCheckCombineCheckbox","predefinedFoodObject","_applicationContext$f2","selected","sourceElement","_props$selectedFoodIt2","portionObject","setInitialFoodElement","amount_label","compositeSelector","selectClass","inputClass","formClass","stylesCategory","directCompareSelector","stylesFoodClass","stylesFoodItem","updateCompositeTitle","Select","options","onInputChange","resultList","dictionary","toLowerCase","entry","startsWith","formatOptionLabel","option","pos","disabled","parseInt","isNaN","sourceSelectBox","isDisabled","checkboxes","ReactTooltip","Form","Check","inline","renderSourceLine","CompositeFoodList","languageContext","renderLine","borderBottom","deleteItem","onDeleteItem","FaTrash","maxHeight","overflowY","combineFoodItems","compositeList","portionSize","energy","carbohydrates","lipids","proteins","water","dietaryFibers","alcohol","ash","portionFactor","createFinalValue","buildBaseDataObject","a","b1","b2","b3","b5","b6","b7","b9","b12","c","d","k","carotenoidData","buildCarotenoidDataObject","buildVitaminDataObject","calcium","iron","magnesium","phosphorus","potassium","sodium","zinc","copper","manganese","selenium","buildMineralDataObject","glucose","fructose","galactose","sucrose","maltose","lactose","starch","sugar","buildCarbohydrateData","unsaturatedMono","unsaturatedPoly","saturated","omega3","omega6","omegaUncertain","cholesterol","transFattyAcids","_lipidData$omegaData","_lipidData$omegaData2","_lipidData$omegaData3","uncertain","omegaRatio","uncertainRatio","buildLipidData","tryptophan","threonine","isoleucine","leucine","lysine","methionine","cystine","phenylalanine","tyrosine","valine","arginine","histidine","alanine","asparticAcid","glutamicAcid","glycine","proline","serine","buildProteinData","nutrientObject","url","i","threshold","removeNutrientObjectsWithNullValues","buildAggregatedNutrientDataList","Date","getTime","aggregated","compositeSubElements","alpha","beta","cryptoxanthin","lycopene","lutein","caroteneAlpha","caroteneBeta","totalPortionAmount","HelpModal","helpText","display","role","closeHelpModal","dangerouslySetInnerHTML","__html","content","getHelpText","helpModalId","languageId","entries","languageSection","contentArray","FoodSelectorModal","compositeTitle","setCompositeTitle","setCompositeList","showHelpModal","setShowHelpModal","onSubmit","onSubmitComposite","onSubmitSingleItem","NotificationManager","error","selectedFoodItemCallback","onHide","aggregatedSelectedFoodItem","titleToShow","currentSelectorSetting","Modal","show","Body","newList","splice","Footer","FaQuestionCircle","ConfirmationDialog","_React$Component","_this$props","okLabel","cancelLabel","confirmation","proceed","_this$props$enableEsc","enableEscape","backdrop","keyboard","fullscreen","Title","React","confirmAction","small","createConfirmation","confirmable","color_yellow","color_green","color_red","color_purple","color_gray","color_line_blue","color_line_red","color_chart_green_2","color_chart_green_3","color_chart_yellow_4","color_chart_yellow_green_1","color_chart_yellow_green_2","color_chart_misc","default_chart_height","default_chart_height_m","basedata_piechart_width","basedata_piechart_width_m","basedata_barchart_width","datapanel_container_min_width","datapanel_container_min_width_m","color_water","color_lipids","color_carbs","color_carbs_sugar","color_carbs_dietaryFibers","color_carbs_mono_glucose","color_carbs_mono_fructose","color_carbs_mono_galactose","color_carbs_di_sucrose","color_carbs_di_lactose","color_carbs_di_maltose","color_carbs_starch","color_alcohol","color_proteins","color_lipids_saturated","color_lipids_unsaturated_mono","color_lipids_unsaturated_poly","color_lipids_omega3","color_lipids_omega6","color_lipids_misc","color_ash","direct_compare_color1","direct_compare_color2","getBarChartOptions","unit","maxYValue","yAxis","min","max","getOptions","y","getBarChartOptionsForRanking","scales","scaleLabel","labelString","axesObj","yAxes","xAxes","ticks","autoSkip","callback","values","getScalesForRankingChart","getPieChartOptions","scalesObject","maintainAspectRatio","responsive","plugins","tooltip","getToolTips","legend","enabled","callbacks","tooltipItem","formattedValue","PieChartConfigurationForm","legendLabel","detailsLabel","Label","handleRadioButtonClick","handleLegendCheckboxClick","detailsCheckboxAvailable","handleDetailsCheckboxClick","CustomLegend","borderLeft","mobile","legendData","indent","verticalSpace","separateNextElement","legendItemLabelClass","legendClassName","marginLeft","background","item","renderLegend","calculateChartHeight","currentDimension","directCompare","dataPage","calculateChartContainerHeight","autoRound","round","digits","roundFactor","Math","pow","roundToNextValue","number","ordinaryValue","numberOfDigits","ceil","log10","standardValue","nextNumberFive","getNumberOfFixedLength","numberString","convertBooleanToDigit","convertStringToBoolean","getBaseChartLegendData","lang","ChartConfig","BaseDataChart","_props$selectedFoodIt3","directCompareConfig","showDetailsProp","setChartType","setShowLegend","setShowDetails","directCompareUse","chartHeight","setChartHeight","updateChartConfig","currentConfig","newChartConfig","legendAllowed","renderSubChart","chartData","Pie","data","Bar","totalChartData","chartDisplayData","alcoholValuePerc","labels","colors","getTotalChartData","datasets","borderWidth","borderColor","createTotalChartData","nutrientChartData","_nutrientData$carbohy","totalValue","carbValue","carbValuePerc","sugarValuePerc","dietaryFibersPerc","lipidValuePerc","proteinsValuePerc","getNutrientChartData","createNutrientChartData","totalChartDataTitle","nutrientChartDataTitle","containerHeight","justifyContent","eventValue","PAL_CATEGORY_1","PAL_CATEGORY_2","PAL_CATEGORY_3","PAL_CATEGORY_4","PAL_CATEGORY_5","PAL_CATEGORY_6","PAL_CATEGORY_7","getPalCategory","EnergyConstants","createPalCategoryName","languageLabel","energyLabel","EnergyDataChart","energy100g","averagePortion","energyPortion","createEnergyLevelChart","_applicationContext$u","bmr","calculateBMR","totalEnergy","calculateTotalEnergyConsumption","annotation1","drawTime","mode","scaleID","yMin","yMax","annotation2","annotation","annotations","line1","line2","showInfotext","renderUserDataInfoPage","BarChartConfigurationForm","handleExpandCheckboxClick","handleSynchronize","determineDailyRequirement","dailyRequirementObject","ageGroupRequirements","senior","preSenior","midLifeAdult","youngAdult","youth","male","femalePregnant","female","femaleBreastFeeding","determineFoodRequirementRatio","amountInFood","dailyRequirement","determineProteinRequirementRatio","requirement","convertAbsoluteValueToDailyRequirement","dailyRequirements","Constants","vitaminRequirementData","mineralRequirementData","MineralVitaminChart","chartConfigVitamins","chartConfigMinerals","portionType_vitamins","setPortionType_vitamins","expand100_vitamins","setExpand100_vitamins","portionType_minerals","setPortionType_minerals","expand100_minerals","setExpand100_minerals","setShowBookModal","setSelectedColumnLabel","config","selectedSubChart","anyValueChanged","handleExpandCheckbox","precalculatedData","requirementData","amountA","factorOtherCarotenoids","calculateVitaminAEquivalent","getVitaminChartData","chartColor","barChartColor","createVitaminChartData","getMineralsChartData","createMineralChartData","maxValue","overallMaxValue","barChartOptions","context","scientificName","vitamin","labelName","getScientificVitaminName","clickedColumnIndex","columnLabel","barChartProps","renderChartConfigurationForm","getLipidsOmegaChartLegend","LipidsDataChart","initialExpand100","initialHideRemainders","setShowHideRemainders","setExpand100","setSubChart","totalLipidsAmount","handleChartSelectionChange","eventLabel","handleSubchartChange","handleExpand100Change","handleHideRemaindersCheckbox","totalAmount","lipidsData","valueSaturated","valueUnsaturatedMono","valueUnsaturatedPoly","valueRemainder","getTotalLipidsChartData","createOmegaChartData","valueOmega3","valueOmega6","valueUncertain","getOmegaChartData","omegaDataAvailabe","chartColType","renderChart","lipidsType","ProteinDataChart","setPortionType","currentSetting","proteinRequirementData","getProteinChartData","createProteinChartData","dataExists","getCarbsBaseLegend","getCarbsDetailsLegend","CarbsDataChart","currentSettings","chartIndex","detailChartData","_getNutrientData","valueGlucose","valueFructose","valueGalactose","valueSucrose","valueLactose","valueMaltose","valueStarch","valueDietaryFibers","valueMisc","getCarbDetailsChartData","createDetailChartData","basicChartData","totalCarbsAmount","valueSugar","getCarbBaseChartData","createBasicChartData","ChartPanel","selectedDataTab","chart","FoodDataTable","tableData","formatDataCell","cell","row","firstLineStype","indentStyle","split","labelPortion","tableClass","BootstrapTable","trClassName","striped","hover","TableHeaderColumn","isKey","dataField","dataFormat","InfoData","setContainerHeight","createRow","renderSubTable","bordered","isCompositeFoodElement","foodNameId","foodClassNameId","sourceName","sourceLine2","foodClassName","categoryId","categoryName","tableDataGeneral","getGeneralTableData","foodPortion","portionValue","tableDataPortion","getTableDataPortion","usdaLink","link","open","focus","href","_loop","makeTableDataCombinedFood","FoodDataPageBody","_applicationContext$a","ChartMenuPanel","handlePageButtonClick","verticalArrangement","setDataPage","makeButtonLabel","buttonText","classNameSpan","rowClass","ButtonGroup","vertical","FoodDataPageHeader","history","useHistory","setHelpModalId","fullName","setDisplayMode","enabledDisplayButtonClasses","disabledDisplayButtonClasses","chartButtonClasses","tablesButtonClasses","foodNamesList","sourceString","sourceToolTip","headerLabel","FaChartBar","FaThList","remainingItems","pathName","FaTimes","createBaseDataTable","_selectedFoodItem$foo","_getNutrientData$base","createTableObject","carbObject","makeCarbsTableObject","value_100g","valuePortion","calculatePortionData","value_portion","valueVolume100gram","MathService","createTableObjectAlcohol","appendTableDataObject","object","appendedObject","extension","FoodDataPage","setTableData","updatePage","tableDataList","createEnergyTable","totalCarotenoid","getTotalAmountOfCarotenoids","carotenoidTableObject","createVitaminTable","firstNutrientData","createMineralTable","createLipidsTable","_firstNutrientData$ba","createCarbsTable","createProteinTable","newMode","datapage","makeFoodDataPanelComponent","_selectedFoodItem$tit","component","FoodAnalyzerContainer","showFoodSelectorInitialState","openSelectorModal","showCompositeFoodSelectorInitialState","openCompositeSelectorModal","showFoodSelector","setShowFoodSelector","showFoodAggregatedFoodSelector","setShowAggregatedFoodSelector","rebuild","onSelectFoodItemSubmit","selectedFoodItemWithComponent","_selectedFoodItem$com","_selectedFoodItem$com2","foodClassNameKey","nameEntity","onNewFoodItemSelected","onCloseAllTabs","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","sent","stop","deleteIconEnabled","FaPlusSquare","FaLayerGroup","TabContainer","CloseableTabs","tabPanelClass","tabContentClass","buttonTab","border","verticalAlign","alignItems","cursor","onTabClick","onTabChange","activeIndex","makeChartConfigUriString","chartObject","generalizedChartConfig","generalizedChartObject","makeGeneralizedChartConfig","chartTypeKey","portionTypeKey","expand100Key","showLegendKey","showDetailsKey","subChartKey","getSubChartKey","subChartKey2","synchronizeKey","convertGeneralizedChartConfigToString","getUpdatedChartConfig","chartConfigUriString","chartConfigFromUri","convertGeneralizedChartConfigStringToObject","barChartConfig","uriString","stringToParse","chartTypeNumber","portionTypeNumber","subChartNumber","subChartNumber2","getSubChartFromKey","makeFoodItemDefaultUri","foodItemData","portionString","supplementValue","combineValue","getFoodItemUriData","fragments","portionDataString","convertPortionDataStringToObject","booleanData","convertUserDataObjectToString","convertUserDataStringToObject","userDataString","palValueInt","palCategory","getPalValue","prepareUriForParsing","uri","replace","separator","replacements","short","convertAggregatedUriStringToObject","replacementArray","replacement","JSON","parse","convertUriStringToSelectedFoodItem","newChartConfigData","USERDATA_ERROR_AGE","USERDATA_ERROR_WEIGHT","USERDATA_ERROR_SIZE","USERDATA_OK","checkUserDataValidity","FoodDataPanelContainer","buildDataPanelPageFromURI","updateUriQuery","createDataFromUriQuery","_applicationContext$a2","query","objectToParse","selectedFoodItemString","stringify","chartConfigString","convertAggregatedDataJsonToUriString","selectedDisplayMode","foodItemDataString","makeFoodDataPanelDefaultUri","_applicationContext$s","uriDataObject","foodItemUriData","parseFoodDataPanelDefaultUri","selectedTabIndex","newTabIndex","indexToSet","foodId","FaExclamationTriangle","STATUS_FIRST_TIME","STATUS_NOT_UPDATED","STATUS_UPDATED","DirectCompareSelector","supplementData1","setSupplementData1","combineData1","setCombineData1","supplementData2","setSupplementData2","combineData2","setCombineData2","initialItem1","initialItem2","setSelectedFoodItem1","setSelectedFoodItem2","displayStatus","setDisplayStatus","updateSelectedFoodItem1","updateSelectedFoodItem2","updateFoodSelectorConfig1","updateFoodSelectorConfig2","renderFoodSelectorCard","foodSelectorNumber","styleClass","Card","CardDeck","buttonName","updateSelectedFoodItems","currentSelectorSetting1","currentSelectorSetting2","getMaximumValue","dataSet","dataSetKey","ratioValue","getOverlappingValues","dataSet1","dataSet2","overlapping","nullifyNonOverlappingValues","overlappingAttributes","newDataset","VerticalLabel","_Fragment","resolvedName","DcMineralVitaminChart","synchronizeVitamins","setSynchronizeVitamins","synchronizeMinerals","setSynchronizeMinerals","nutrientData1","nutrientData2","portion1","portion2","maxValue1","maxValue2","maxY","preconfigVitamins","preconfigMinerals","preconfig","preconfigFoodItem1","preconfigFoodItem2","DcPieChart","initialConfig","setSubChart1","setSubChart2","configObject","pieChartConfig","getEventActionName","handleShowLegendCheckbox","handleShowDetailsCheckbox","handleSubchart1Change","handleSubchart2Change","getConfigurationProps","chartProps","getChartComponent","DcProteinDataChart","setSynchronize","DcEnergyChart","DirectCompareDataPanel","nameId1","nameId2","name1","name2","renderCharts","makeFoodItemUriData","parseDirectComparetUri","foodItemUriData1","foodItemUriData2","slice","getUpdatedDirectCompareChartConfig","DirectCompareContainer","initialFoodItem1","initialFoodItem2","buildDataObjectsFromURI","foodItem1DataUri","foodItem2DataUri","userDataUri","chartConfigUri","makeDirectCompareDataUri","foodItem1","foodItem2","foodClass1","foodClass2","_selectedFoodItem1$fo","_selectedFoodItem2$fo","foodClassNameKey1","nameEntity1","foodClassName1","foodClassNameKey2","nameEntity2","foodClassName2","UserSettings","setAge","setSize","setWeight","setSex","setPregnant","setBreastFeeding","setPalValue","leisureSport","setLeisureSport","changePregnant","changeBreastFeeding","changeAdditionalPalPorts","checkInputValidity","validationResult","showMessage","message","renderTextField","classRow","FormControl","value_age","value_size","value_weight","FaLightbulb","FormGroup","controlId","renderSexRadioButtons","palCategories","userDataPalValue","palObject","descriptionCode","description","changePalValue","renderPalList","success","submitUserData","MAIL_INVALID_NAME","MAIL_NO_CONTENT","MAIL_CONTENT_TO_LONG","MAIL_INVALID_ADDRESS","mailRegex","checkMailValidity","mail","errors","address","match","checkLength","ContactForm","setName","mailAddress","setMailAdress","setMessage","characters","setCharacters","userVerified","setUserVerified","sendMail","reply_to","from_name","emailjs","send","then","result","info","charactersLeft","charactersMessage","preventDefault","mailData","validationErrors","errorMessage","rows","Recaptcha","sitekey","render","verifyCallback","response","Sources","Versions","Impressum","impressumPath","impressum_de","impressum_en","columnClass","ContactContainer","selectedMenu","setSelectedMenu","buttonStyle","onChangeSubmenu","ToggleButtonGroup","defaultValue","ToggleButton","renderSubMenu","BASE_DATA_INDEX","VITAMIN_INDEX","MINERAL_INDEX","LIPIDS_INDEX","CARBS_INDEX","PROTEIN_INDEX","RankingSelector","initializeState","elementsList","setElementsList","newElements","buildElementsList","openChart","buildRankingPanelPageFromURI","foodCategories","groups","getRankingGroups","elements","getElementsOfRankingGroup","selectedFoodCategoryOption","foodCategory","selectedGroupOption","group","selectedElementOption","use100g","parseRankingPanelDataUri","_rankingPanelData$sel","_rankingPanelData$sel2","_rankingPanelData$sel3","showDailyRequirements","makeRankingPanelDataUri","handlePortionAmountChange","newRankingData","handleDietaryRequirementsCheckbox","rankingCategory","transformToDietaryRequirements","rankingList","containerClass","useHorizontalLayout","selectorClass","selectedOption","renderPortionForm","rankingGroup","getBaseCategoryValues","getVitaminCategoryValues","getMineralCategoryValues","getLipidCategoryValues","getCarbohydrateCategoryValues","getProteinCategoryValues","getOrderedFoodList","foodList","selectedValue","chartItems","carbsData","getValueOfFoodItem","_foodItem$portionData","getPortionValue","chartItem","RankingChart","createChartData","position","dataAvailable","containerStyle","RankingContainer","setChartItems","setUnit","setSelectedValue","orderedChartItems","getUnit","renderHelpText","WebPageContainer","Chart","register","annotationPlugin","ArcElement","Router","Switch","Route","path","exact","MobileDeviceCheck","status","App","initialize","NotificationContainer","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","rootElement","document","getElementById","hasChildNodes","hydrate"],"mappings":"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","file":"static/js/main.3cbe9696.chunk.js","sourcesContent":["var map = {\n\t\"./Img-de-1.png\": 180,\n\t\"./Img-de-2.png\": 181,\n\t\"./Img-de-3.png\": 182,\n\t\"./Img-de-4.png\": 183,\n\t\"./Img-de-5.png\": 184,\n\t\"./Img-de-6.png\": 185,\n\t\"./Img-de-7.png\": 186,\n\t\"./Img-en-1.png\": 187,\n\t\"./Img-en-2.png\": 188,\n\t\"./Img-en-3.png\": 189,\n\t\"./Img-en-4.png\": 190,\n\t\"./Img-en-5.png\": 191,\n\t\"./Img-en-6.png\": 192,\n\t\"./Img-en-7.png\": 193\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 179;","export default __webpack_public_path__ + \"static/media/Img-de-1.fe6e2bdd.png\";","export default __webpack_public_path__ + \"static/media/Img-de-2.21ae70e3.png\";","export default __webpack_public_path__ + \"static/media/Img-de-3.9e1d1685.png\";","export default __webpack_public_path__ + \"static/media/Img-de-4.bd08575b.png\";","export default __webpack_public_path__ + \"static/media/Img-de-5.0ca87bcd.png\";","export default __webpack_public_path__ + \"static/media/Img-de-6.e2bd37af.png\";","export default __webpack_public_path__ + \"static/media/Img-de-7.eba7128a.png\";","export default __webpack_public_path__ + \"static/media/Img-en-1.5e9bd479.png\";","export default __webpack_public_path__ + \"static/media/Img-en-2.fa2f1ec7.png\";","export default __webpack_public_path__ + \"static/media/Img-en-3.ef4052ad.png\";","export default __webpack_public_path__ + \"static/media/Img-en-4.ef10584a.png\";","export default __webpack_public_path__ + \"static/media/Img-en-5.7459e0f8.png\";","export default __webpack_public_path__ + \"static/media/Img-en-6.5767bb06.png\";","export default __webpack_public_path__ + \"static/media/Img-en-7.f0e051bb.png\";","import NameType from '../types/nutrientdata/NameType'\r\nimport Source from '../types/nutrientdata/Source'\r\nimport FoodItem from '../types/nutrientdata/FoodItem'\r\nimport DietaryRequirement from '../types/nutrientdata/DietaryRequirement'\r\n\r\nimport nutrientdata from \"../static/data/nutrientdata_foodcompare.json\";\r\nimport FoodDataCorpus from \"../types/nutrientdata/FoodDataCorpus\"\r\nimport FoodClass from \"../types/nutrientdata/FoodClass\";\r\n\r\nexport function loadFoodDataCorpus(): FoodDataCorpus {\r\n\tconst categories = loadCategories()\r\n\tconst conditions = loadConditions()\r\n\tconst portionTypes = loadPortionTypes()\r\n\tconst sources = loadSources()\r\n\tconst foodNames = loadFoodNames()\r\n\tconst foodClasses = loadFoodClasses()\r\n\tconst nutrientData = loadFoodItems()\r\n\tconst dietaryRequirements = loadDietaryRequirements()\r\n\r\n\treturn {\r\n\t\tcategories: categories,\r\n\t\tconditions: conditions,\r\n\t\tportionTypes: portionTypes,\r\n\t\tsources: sources,\r\n\t\tfoodNames: foodNames,\r\n\t\tfoodClasses: foodClasses,\r\n\t\tfoodItems: nutrientData,\r\n\t\tdietaryRequirements: dietaryRequirements\r\n\t}\r\n}\r\n\r\nexport function loadConditions(): Array<NameType> {\r\n\treturn nutrientdata.conditions;\r\n}\r\n\r\nexport function loadPortionTypes(): Array<NameType> {\r\n\treturn nutrientdata.portionTypes;\r\n}\r\n\r\nexport function loadFoodNames(): Array<NameType> {\r\n\treturn nutrientdata.foodNames;\r\n}\r\n\r\nexport function loadSources(): Array<Source> {\r\n\treturn nutrientdata.sources;\r\n}\r\n\r\nexport function loadCategories(): Array<NameType> {\r\n\treturn nutrientdata.categories;\r\n}\r\n\r\nexport function loadFoodClasses(): Array<FoodClass> {\r\n\treturn nutrientdata.foodClasses;\r\n}\r\n\r\nexport function loadFoodItems(): Array<FoodItem> {\r\n\treturn nutrientdata.foodItems;\r\n}\r\n\r\nexport function loadDietaryRequirements(): DietaryRequirement {\r\n\treturn nutrientdata.dietaryRequirements;\r\n}","export const AMOUNT_PORTION = \"amount portion\"\r\nexport const GRAM = \"100 gram\"\r\n\r\nexport const CHART_TYPE_PIE = \"pie chart\"\r\nexport const CHART_TYPE_BAR = \"bar chart\"\r\n\r\nexport const CHART_VITAMINS = \"chart vitamins\"\r\nexport const CHART_MINERALS = \"chart minerals\"\r\n\r\nexport const CATEGORY_BEVERAGE = 10\r\n\r\nexport const DATA_ASH = \"d_ash\";\r\nexport const DATA_ENERGY = \"d_energy\";\r\nexport const DATA_WATER = \"d_water\";\r\nexport const DATA_CARBS = \"d_carbs\";\r\nexport const DATA_LIPIDS = \"d_lipids\";\r\nexport const DATA_PROTEINS = \"d_proteins\";\r\n\r\nexport const DATA_MINERAL_CALCIUM = \"d_calcium\";\r\nexport const DATA_MINERAL_IRON = \"d_iron\";\r\nexport const DATA_MINERAL_MAGNESIUM = \"d_magnesium\";\r\nexport const DATA_MINERAL_PHOSPHORUS = \"d_phosphorous\";\r\nexport const DATA_MINERAL_POTASSIUM = \"d_potassium\";\r\nexport const DATA_MINERAL_SODIUM = \"d_sodium\";\r\nexport const DATA_MINERAL_ZINC = \"d_zinc\";\r\nexport const DATA_MINERAL_SELENIUM = \"d_selenium\";\r\nexport const DATA_MINERAL_MANGANESE = \"d_manganese\";\r\nexport const DATA_MINERAL_COPPER = \"d_copper\";\r\n\r\nexport const DATA_VITAMINS_A = \"d_a\";\r\nexport const DATA_VITAMINS_B1 = \"d_b1\";\r\nexport const DATA_VITAMINS_B2 = \"d_b2\";\r\nexport const DATA_VITAMINS_B3 = \"d_b3\";\r\nexport const DATA_VITAMINS_B5 = \"d_b5\";\r\nexport const DATA_VITAMINS_B6 = \"d_b6\";\r\nexport const DATA_VITAMINS_B9 = \"d_b9\";\r\nexport const DATA_VITAMINS_B12 = \"d_b12\";\r\nexport const DATA_VITAMINS_C = \"d_c\";\r\nexport const DATA_VITAMINS_D = \"d_d\";\r\nexport const DATA_VITAMINS_E = \"d_e\";\r\nexport const DATA_VITAMINS_K = \"d_k\";\r\n\r\nexport const DATA_LIPIDS_SATURATED = \"d_saturated\";\r\nexport const DATA_LIPIDS_MONO_UNSATURATED = \"d_mono_unsaturated\";\r\nexport const DATA_LIPIDS_POLY_UNSATURATED = \"d_poly_unsaturate\";\r\nexport const DATA_LIPIDS_TRANSFATTY_ACIDS = \"d_transfatty_acids\";\r\n\r\nexport const DATA_CARBS_DIETARY_FIBERS = \"d_dietary fibers\";\r\nexport const DATA_CARBS_SUGAR = \"d_sugar\";\r\nexport const DATA_CARBS_GLUCOSE = \"d_glucose\";\r\nexport const DATA_CARBS_FRUCTOSE = \"d_fructose\";\r\nexport const DATA_CARBS_GALACTOSE = \"d_galactose\";\r\nexport const DATA_CARBS_SUCROSE = \"d_sucrose\";\r\nexport const DATA_CARBS_LACTOSE = \"d_lactose\";\r\nexport const DATA_CARBS_MALTOSE = \"d_maltose\";\r\nexport const DATA_CARBS_STARCH = \"d_starch\";\r\n\r\nexport const DATA_PROTEIN_TRYPTOPHAN = \"tryptophan\";\r\nexport const DATA_PROTEIN_THREONINE = \"threonine\";\r\nexport const DATA_PROTEIN_ISOLEUCINE = \"isoleucine\";\r\nexport const DATA_PROTEIN_LEUCINE = \"leucine\";\r\nexport const DATA_PROTEIN_LYSINE = \"lysine\";\r\nexport const DATA_PROTEIN_METHIONINE = \"methionine\";\r\nexport const DATA_PROTEIN_CYSTINE = \"cystine\";\r\nexport const DATA_PROTEIN_PHENYLALANINE = \"phenylalanine\";\r\nexport const DATA_PROTEIN_TYROSINE = \"tyrosine\";\r\nexport const DATA_PROTEIN_VALINE = \"valine\";\r\nexport const DATA_PROTEIN_ARGININE = \"arginine\";\r\nexport const DATA_PROTEIN_HISTIDINE = \"histidine\";\r\nexport const DATA_PROTEIN_ALANINE = \"alanine\";\r\nexport const DATA_PROTEIN_ASPARTIC_ACID = \"asparticAcid\";\r\nexport const DATA_PROTEIN_GLUTAMIC_ACID= \"glutamicAcid\";\r\nexport const DATA_PROTEIN_GLYCINE = \"glycine\";\r\nexport const DATA_PROTEIN_PROLINE = \"proline\";\r\nexport const DATA_PROTEIN_SERINE = \"serine\";\r\n\r\nexport const DISPLAYMODE_TABLE = \"dtb\"\r\nexport const DISPLAYMODE_CHART = \"dct\"\r\n\r\nexport const CARBS_DATA_BASE = \"carbs data base chart\";\r\nexport const CARBS_DATA_DETAIL = \"carbs data detail chart\"\r\n\r\nexport const LIPIDS_DATA_BASE = \"lipids data base chart\";\r\nexport const LIPIDS_DATA_OMEGA = \"lipids data omega chart\"\r\n\r\nexport const PATH_DIRECT_COMPARE = \"/directcompare\";\r\nexport const PATH_FOODCOMPARE = \"/foodcompare\"\r\nexport const PATH_FOODDATA_PANEL = \"/datapanel\";\r\nexport const PATH_HOME = \"/home\";\r\nexport const PATH_CONTACT = \"/contact\";\r\nexport const PATH_USERSETTINGS = \"/usersettings\";\r\n\r\nexport const PATH_RANKING = \"/ranking\";\r\n\r\nexport const PORTION_KEY_INDIVIDUAL = 0\r\nexport const PORTION_KEY_100 = 1\r\n\r\nexport const LANGUAGE_DE = \"de\";\r\nexport const LANGUAGE_EN = \"en\";\r\n\r\nexport const SEX_MALE = \"sex male\"\r\nexport const SEX_FEMALE = \"sex female\"\r\n\r\nexport const SOURCE_SRLEGACY = \"srlegacy\"\r\nexport const SOURCE_FNDDS = \"fndds\"\r\n\r\nexport const TAB_BASE_DATA = \"basedata\"\r\nexport const TAB_ENERGY_DATA = \"energydata\"\r\nexport const TAB_VITAMIN_DATA = \"vitamindata\"\r\nexport const TAB_MINERAL_DATA = \"mineraldata\"\r\nexport const TAB_LIPIDS_DATA = \"lipidsdata\"\r\nexport const TAB_CARBS_DATA = \"carbsdata\"\r\nexport const TAB_PROTEINS_DATA = \"proteinsdata\"\r\nexport const TAB_INFO = \"infodata\"\r\n\r\nexport const QUERYKEY_DATAPANEL_ADD = \"add\"\r\nexport const QUERYKEY_DATAPANEL_ADD_COMPOSITE = \"composite\"\r\nexport const QUERYKEY_DATAPANEL_ITEM = \"item\"\r\nexport const QUERYKEY_DATAPANEL_RANKING = \"ranking\"\r\nexport const QUERYKEY_DATAPANEL_AGGREGATED = \"aggregated\"\r\n\r\nexport const TAB_LIST = [TAB_BASE_DATA, TAB_ENERGY_DATA, TAB_VITAMIN_DATA, TAB_MINERAL_DATA, TAB_LIPIDS_DATA, TAB_CARBS_DATA, TAB_PROTEINS_DATA, TAB_INFO]","import {AMOUNT_PORTION, CARBS_DATA_BASE, CHART_TYPE_PIE, LIPIDS_DATA_BASE, SEX_MALE} from \"./Constants\";\r\nimport {ChartConfigData, DirectCompareChartConfigData} from \"../types/livedata/ChartConfigData\";\r\nimport {WindowDimension} from \"../service/WindowDimension\";\r\n\r\nexport const release = \"1.6.1\"\r\nexport const buildDate = \"2023-04-01\"\r\n\r\nexport const maxMessageCharacters = 5000\r\nexport const maxElementsInRankingChart = 50\r\n\r\n// The food class to be initially displayed in the food selector\r\nexport const initialFoodClassId = 1\r\n\r\n// The food class to be initially displayed as the comparator in the direct comparison menu (second element)\r\nexport const initialComparisonFoodClassId = 7\r\n\r\nexport const minimalOmegaRatio = 0.3\r\nexport const maximalPortionSize = 5000\r\nexport const defaultPanelHeight = '468px'\r\n\r\nexport const smallFormsScreenSize: WindowDimension = {\r\n    width: 1200,\r\n    height: 800\r\n}\r\n\r\nexport const initialUserDataAge = 35\r\nexport const initialUserDataSize = 175\r\nexport const initialUserDataWeight = 75\r\nexport const initialUserDataSex = SEX_MALE\r\nexport const initialUserDataPregnant = false\r\nexport const initialUserDataBreastfeeding = false\r\nexport const initialUserDataPalValue = 1.6\r\nexport const initialUserDataLeisureSports = false\r\n\r\nexport const initialChartConfigData: ChartConfigData = {\r\n    baseChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        showDetails: false\r\n    },\r\n    vitaminChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    },\r\n    mineralChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    },\r\n    lipidsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        hideRemainders: false,\r\n        subChart: LIPIDS_DATA_BASE,\r\n        expand100: false\r\n    },\r\n    carbsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        subChart: CARBS_DATA_BASE,\r\n        hideRemainders: false,\r\n        expand100: false\r\n    },\r\n    proteinChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    }\r\n}\r\n\r\nexport const initialDirectCompareConfigData: DirectCompareChartConfigData = {\r\n    baseChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        showDetails: false\r\n    },\r\n    vitaminChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    },\r\n    mineralChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    },\r\n    lipidsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        hideRemainders: false,\r\n        expand100: false,\r\n        subChart1: LIPIDS_DATA_BASE,\r\n        subChart2: LIPIDS_DATA_BASE\r\n    },\r\n    carbsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        hideRemainders: false,\r\n        expand100: false,\r\n        subChart1: CARBS_DATA_BASE,\r\n        subChart2: CARBS_DATA_BASE\r\n    },\r\n    proteinChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    }\r\n}","import NameType from \"../types/nutrientdata/NameType\";\r\n\r\n/**\r\n * Retrieves the name of a name type object in the given language\r\n * @param nameType The name type object\r\n * @param language The given language\r\n * @param verbose Optionally set this value to true to obtain the full name (including auxiliary information set in brackets)\r\n */\r\nexport default function getName(nameType: NameType, language: string, verbose = false): string {\r\n    const name = language === 'de' ?  nameType.germanName : nameType.englishName\r\n    if(!verbose) {\r\n        return removeAuxiliaryInformationFromFoodName(name)\r\n    } else {\r\n        return name\r\n    }\r\n}\r\n\r\n/**\r\n * Strips of auxiliary information of the food item, which is set in brackets and may not be intended to display\r\n * @param name The full food name as set in the nutrient json file.\r\n */\r\nexport function removeAuxiliaryInformationFromFoodName(name: string): string {\r\n    if(name.includes(\"[\")) {\r\n        const index = name.indexOf(\"[\")\r\n        return name.substring(0, index).trim()\r\n    } else {\r\n        return name\r\n    }\r\n}\r\n\r\n","import NameType from \"../../types/nutrientdata/NameType\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport getName from \"../LanguageService\";\r\n\r\nexport function getReactSelectOptionsList(nameTypeList: Array<NameType>, language: string, sort?: boolean): Array<ReactSelectOption> {\r\n    const names: Array<string> = []\r\n\r\n    if(nameTypeList && nameTypeList.length > 0) {\r\n        nameTypeList.forEach(nameType => names.push(getName(nameType, language)))\r\n    }\r\n\r\n    if(sort) {\r\n        names.sort()\r\n    }\r\n\r\n    const reactSelectOptions: Array<ReactSelectOption> = []\r\n    names.forEach((name, index) => {\r\n        reactSelectOptions.push({\r\n            value: index,\r\n            label: name\r\n        })\r\n    })\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getNameFromFoodNameList(foodNameList: Array<NameType>, id: number, language: string, verbose = false): string | null {\r\n    const nameType = foodNameList.find(nameType => nameType.id === id)\r\n\r\n    if(nameType) {\r\n        return getName(nameType, language, verbose)\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\n/*\r\n * General method to shorten the name of long food name.\r\n * name: The food name, e.g. \"Linen oil (at least 60 % lineul acid)\"\r\n * maxLength: The maximum length of the food name.\r\n */\r\nexport function shortenName(name, maxLength) {\r\n    if(name.length <= maxLength) {\r\n        return name;\r\n    }\r\n\r\n    if(name.includes(\"(\")) {\r\n        const indexOfBrace = name.indexOf(\"(\");\r\n        if(indexOfBrace >= maxLength-6) {\r\n            return name.substring(0, indexOfBrace-1).trim() + \"...\";\r\n        }\r\n    }\r\n\r\n    return name.substring(0, maxLength-3).trim() + \"...\";\r\n}","export function parseFoodCompareUri(): string | null {\r\n    const queryString = window.location.search.substring(1)\r\n\r\n    const equalOperator = queryString.indexOf(\"=\")\r\n    if(equalOperator === -1) {\r\n        return null\r\n    }\r\n    const key = queryString.substring(0, equalOperator)\r\n    const value = queryString.substring(equalOperator + 1)\r\n\r\n    if(key === \"mode\") {\r\n        return value\r\n    }\r\n\r\n    return null\r\n}","import {Component, createContext, ReactElement} from \"react\";\r\nimport * as NutrientDataImportService from \"../service/NutrientDataImportService\";\r\nimport FoodDataCorpus from \"../types/nutrientdata/FoodDataCorpus\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationData, RankingPanelData} from \"../types/livedata/ApplicationData\";\r\nimport {DISPLAYMODE_CHART, PATH_FOODDATA_PANEL, SOURCE_SRLEGACY, TAB_BASE_DATA} from \"../config/Constants\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    initialChartConfigData,\r\n    initialDirectCompareConfigData,\r\n    initialUserDataAge,\r\n    initialUserDataBreastfeeding,\r\n    initialUserDataLeisureSports,\r\n    initialUserDataPalValue,\r\n    initialUserDataPregnant,\r\n    initialUserDataSex,\r\n    initialUserDataSize,\r\n    initialUserDataWeight\r\n} from \"../config/ApplicationSetting\";\r\nimport {getNameFromFoodNameList} from \"../service/nutrientdata/NameTypeService\";\r\nimport NameType from \"../types/nutrientdata/NameType\";\r\nimport {ChartConfigData, DirectCompareChartConfigData} from \"../types/livedata/ChartConfigData\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\nimport {parseFoodCompareUri} from \"../service/uri/BaseUriService\";\r\n\r\nexport interface ApplicationDataContext {\r\n    foodDataCorpus: FoodDataCorpus\r\n    applicationData: ApplicationData\r\n    userData: UserData\r\n    debug: boolean\r\n    ready: boolean\r\n    useAsMobile: Boolean | null\r\n}\r\n\r\nexport interface ApplicationContext extends ApplicationDataContext {\r\n    setUserData: (userData: UserData) => void\r\n    setPreferredSource: (string) => void\r\n    setMobileUsage: (boolean) => void\r\n    setFoodSelectorConfig: (selectedCategory: ReactSelectOption | null, sourceSupplement: boolean, sourceCombine: boolean) => void\r\n    setDirectCompareFoodSelector1: (sourceSupplement: boolean, sourceCombine: boolean) => void\r\n    setDirectCompareFoodSelector2: (sourceSupplement: boolean, sourceCombine: boolean) => void\r\n    setFoodDataPanelData: {\r\n        setSelectedFoodTab: (number) => void\r\n        setSelectedDataPage: (string) => void\r\n        setSelectedDisplayMode: (string) => void\r\n        addItemToFoodDataPanel: (selectedFoodItem: SelectedFoodItem) => void\r\n        removeItemFromFoodDataPanel: (number) => void\r\n        removeAllItemsFromFoodDataPanel: () => void\r\n        updateAllFoodItemNames: (foodNames: Array<NameType>, newLanguage: string) => void\r\n        updateFoodDataPanelChartConfig: (chartConfig: ChartConfigData) => void\r\n    }\r\n    setDirectCompareData: {\r\n        updateDirectCompareChartConfig: (chartConfig: DirectCompareChartConfigData) => void\r\n        setSelectedDirectCompareItems: (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => void\r\n        setSelectedDirectCompareDataPage: (selectedPage: string) => void\r\n    }\r\n    setRankingPanelData: (RankingPanelData) => void\r\n\r\n}\r\n\r\nexport const ApplicationDataContextStore = createContext<ApplicationContext | null>(null)\r\n\r\nexport default class ApplicationDataContextProvider extends Component<any, ApplicationDataContext> {\r\n    setDebugState = (debug: boolean) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                    debug: debug\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedFoodDataPanelTab = (selectedTab: number) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItemIndex: selectedTab}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedDisplayMode = (displayMode: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, displayMode: displayMode}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedFoodDataPanelPage = (selectedPage: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedDataPage: selectedPage}\r\n            }\r\n        }))\r\n    }\r\n\r\n    addItemToFoodDataPanel = (foodItem: SelectedFoodItem) => {\r\n        const newItems = Object.assign(this.state.applicationData.foodDataPanel.selectedFoodItems)\r\n        newItems.push(foodItem)\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItems: newItems}\r\n            }\r\n        }))\r\n    }\r\n\r\n    removeItemFromFoodDataPanel = (foodItemId: number) => {\r\n        const newItems = this.state.applicationData.foodDataPanel.selectedFoodItems.filter(\r\n            selectedFoodItem => selectedFoodItem.foodItem.id !== foodItemId\r\n        )\r\n\r\n        let newIndex = 0\r\n        let currentIndex = this.state.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n        if (newItems.length > 0) {\r\n            if (currentIndex < newItems.length) {\r\n                newIndex = currentIndex\r\n            } else {\r\n                newIndex = newItems.length - 1\r\n            }\r\n        }\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: newItems,\r\n                    selectedFoodItemIndex: newIndex\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    removeAllItemsFromFoodDataPanel = () => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: [],\r\n                    selectedFoodItemIndex: 0\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateAllFoodItemNames = (foodNames: Array<NameType>, newLanguage: string) => {\r\n        const selectedFoodItems = this.state.applicationData.foodDataPanel.selectedFoodItems\r\n        const newFoodItems = selectedFoodItems.map(selectedFoodItem => {\r\n            const foodName = selectedFoodItem.foodItem.nameId\r\n                ? getNameFromFoodNameList(foodNames, selectedFoodItem.foodItem.nameId, newLanguage)\r\n                : \"Individual\"\r\n            if (foodName) {\r\n                selectedFoodItem = {...selectedFoodItem, tab: foodName}\r\n            }\r\n            return selectedFoodItem\r\n        })\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: newFoodItems,\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateFoodDataPanelChartConfig = (chartConfig: ChartConfigData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    chartConfigData: chartConfig\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n\r\n    setSelectedDirectCompareItems = (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...prevState.applicationData.directCompareDataPanel,\r\n                    selectedFoodItem1: selectedFoodItem1,\r\n                    selectedFoodItem2: selectedFoodItem2\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedDirectCompareDataPage = (selectedPage: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...prevState.applicationData.directCompareDataPanel,\r\n                    selectedDataPage: selectedPage\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateDirectCompareChartConfig = (chartConfig: DirectCompareChartConfigData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...this.state.applicationData.directCompareDataPanel,\r\n                    directCompareConfigChart: chartConfig\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    setUserData = (userData: UserData) => {\r\n        this.setState(() => ({\r\n            userData: {\r\n                ...userData\r\n            }\r\n        }))\r\n    }\r\n\r\n    setPreferredSource = (source: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData, preferredSource: source\r\n            }\r\n        }))\r\n    }\r\n\r\n    setFoodSelectorConfig = (selectedCategory: ReactSelectOption | null, sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, foodSelector: {\r\n                        ...prevState.applicationData.foodSelector,\r\n                        selectedCategory: selectedCategory,\r\n                        sourceSupplement: sourceSupplement,\r\n                        sourceCombine: sourceCombine\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n    setDirectCompareFoodSelectorConfig1 = (sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, directCompareDataPanel: {\r\n                        ...prevState.applicationData.directCompareDataPanel,\r\n                        foodSelector1: {\r\n                            sourceSupplement: sourceSupplement,\r\n                            sourceCombine: sourceCombine\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n    setDirectCompareFoodSelectorConfig2 = (sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, directCompareDataPanel: {\r\n                        ...prevState.applicationData.directCompareDataPanel,\r\n                        foodSelector2: {\r\n                            sourceSupplement: sourceSupplement,\r\n                            sourceCombine: sourceCombine\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n    setRankingPanelData = (rankingPanelData: RankingPanelData): void => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, rankingPanelData: rankingPanelData\r\n                }\r\n            })\r\n        )\r\n    }\r\n\r\n    isDebugMode(): boolean {\r\n        const uriData: string | null = parseFoodCompareUri()\r\n        return uriData !== \"test\" && uriData !== \"debug\" ? false : true\r\n    }\r\n\r\n    state: ApplicationDataContext = {\r\n        foodDataCorpus: {\r\n            categories: [],\r\n            conditions: [],\r\n            portionTypes: [],\r\n            sources: [],\r\n            foodNames: [],\r\n            foodClasses: [],\r\n            foodItems: [],\r\n            dietaryRequirements: null,\r\n        },\r\n        applicationData: {\r\n            foodDataPanel: {\r\n                selectedFoodItems: [],\r\n                selectedDataPage: TAB_BASE_DATA,\r\n                displayMode: DISPLAYMODE_CHART,\r\n                selectedFoodItemIndex: 0,\r\n                chartConfigData: initialChartConfigData,\r\n            },\r\n            directCompareDataPanel: {\r\n                selectedFoodItem1: null,\r\n                selectedFoodItem2: null,\r\n                selectedDataPage: TAB_BASE_DATA,\r\n                directCompareConfigChart: initialDirectCompareConfigData,\r\n                foodSelector1: {\r\n                    sourceSupplement: true,\r\n                    sourceCombine: false\r\n                },\r\n                foodSelector2: {\r\n                    sourceSupplement: true,\r\n                    sourceCombine: false\r\n                }\r\n            },\r\n            rankingPanelData: {\r\n                selectedFoodCategory: null,\r\n                selectedGroup: null,\r\n                selectedElement: null,\r\n                use100gram: true,\r\n                showDietaryRequirements: false\r\n            },\r\n            foodSelector: {\r\n                selectedCategory: null,\r\n                sourceSupplement: true,\r\n                sourceCombine: false,\r\n            },\r\n            preferredSource: SOURCE_SRLEGACY,\r\n        },\r\n        userData: {\r\n            age: initialUserDataAge,\r\n            size: initialUserDataSize,\r\n            weight: initialUserDataWeight,\r\n            sex: initialUserDataSex,\r\n            pregnant: initialUserDataPregnant,\r\n            breastFeeding: initialUserDataBreastfeeding,\r\n            palValue: initialUserDataPalValue,\r\n            leisureSports: initialUserDataLeisureSports,\r\n            initialValues: true\r\n        },\r\n        debug: this.isDebugMode(),\r\n        ready: false,\r\n        useAsMobile: null\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        const foodDataCorpus = NutrientDataImportService.loadFoodDataCorpus()\r\n        this.setState({\r\n            foodDataCorpus: foodDataCorpus,\r\n            ready: true\r\n        })\r\n    }\r\n\r\n    render(): ReactElement {\r\n        const value = {\r\n            applicationData: this.state.applicationData,\r\n            foodDataCorpus: this.state.foodDataCorpus,\r\n            userData: this.state.userData,\r\n            debug: this.state.debug,\r\n            ready: this.state.ready,\r\n            useAsMobile: this.state.useAsMobile,\r\n            setUserData: this.setUserData,\r\n            setPreferredSource: this.setPreferredSource,\r\n            setMobileUsage: (usage: boolean) => {\r\n                this.setState({...this.state, useAsMobile: usage})\r\n            },\r\n            setFoodDataPanelData: {\r\n                setSelectedFoodTab: this.setSelectedFoodDataPanelTab,\r\n                setSelectedDataPage: this.setSelectedFoodDataPanelPage,\r\n                setSelectedDisplayMode: this.setSelectedDisplayMode,\r\n                addItemToFoodDataPanel: this.addItemToFoodDataPanel,\r\n                removeItemFromFoodDataPanel: this.removeItemFromFoodDataPanel,\r\n                removeAllItemsFromFoodDataPanel: this.removeAllItemsFromFoodDataPanel,\r\n                updateAllFoodItemNames: this.updateAllFoodItemNames,\r\n                updateFoodDataPanelChartConfig: this.updateFoodDataPanelChartConfig\r\n            },\r\n            setDirectCompareData: {\r\n                updateDirectCompareChartConfig: this.updateDirectCompareChartConfig,\r\n                setSelectedDirectCompareDataPage: this.setSelectedDirectCompareDataPage,\r\n                setSelectedDirectCompareItems: this.setSelectedDirectCompareItems\r\n            },\r\n            setFoodSelectorConfig: this.setFoodSelectorConfig,\r\n            setRankingPanelData: this.setRankingPanelData,\r\n            setDirectCompareFoodSelector1: this.setDirectCompareFoodSelectorConfig1,\r\n            setDirectCompareFoodSelector2: this.setDirectCompareFoodSelectorConfig2\r\n        }\r\n\r\n        return (\r\n            <ApplicationDataContextStore.Provider value={value}>\r\n                {this.props.children}\r\n            </ApplicationDataContextStore.Provider>\r\n        )\r\n    }\r\n\r\n}\r\n","import {createContext, useState} from \"react\";\r\nimport {LANGUAGE_DE, LANGUAGE_EN} from \"../config/Constants\";\r\n\r\nexport interface LanguageProviderProps {\r\n    language: string\r\n    userLanguageChange: (selectedLanguage: string) => void\r\n}\r\n\r\nexport const LanguageContext = createContext<LanguageProviderProps>({\r\n    language: 'en',\r\n    userLanguageChange: (selectedLanguage) => {return 'en'}\r\n});\r\n\r\nexport function LanguageProvider({ children }) {\r\n    const userLanguage = navigator.language;\r\n    const preferredLanguage = userLanguage === 'de' || userLanguage === 'de-DE' ? LANGUAGE_DE : LANGUAGE_EN\r\n    const [language, setLanguage] = useState(preferredLanguage);\r\n\r\n    const userLanguageChange = (selectedLanaguage: string): void => {\r\n        const newLanguage = selectedLanaguage ? selectedLanaguage : LANGUAGE_EN\r\n        setLanguage(newLanguage);\r\n    }\r\n\r\n    const provider: LanguageProviderProps = {\r\n        language,\r\n        userLanguageChange\r\n    };\r\n\r\n    return (\r\n        <LanguageContext.Provider value={provider}>\r\n            {children}\r\n        </LanguageContext.Provider>\r\n    );\r\n};\r\n\r\n\r\n\r\n","// Google:\r\nexport const ANALYTICS_MESS_ID = 'G-DXHX3Y13KZ'\r\nexport const ADSENSE_TRACKING_ID = 'ca-pub-2335013571820161'\r\nexport const RECAPTCHA_KEY = '6LdVyyMcAAAAACXul89K-Epl2dQu3XOvOo1bTIg3'\r\n\r\n// Emailjs:\r\nexport const SERVICE_ID = 'service_608vcxh'\r\nexport const TEMPLATE_ID = 'template_nledi86'\r\nexport const USER_ID = 'user_8TjzzLK0ZdfUQd7h7cieX'\r\n\r\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export const applicationStrings = {\r\n    button_add: {\r\n        de: 'Hinzufgen',\r\n        en: 'Add'\r\n    },\r\n    button_cancel: {\r\n        de: 'Abbrechen',\r\n        en: 'Cancel'\r\n    },\r\n    button_change_to_chart_mode: {\r\n        de: 'Daten als Diagramm anzeigen',\r\n        en: 'Display data as chart'\r\n    },\r\n    button_close: {\r\n        de: 'Schlieen',\r\n        en: 'Close'\r\n    },\r\n    button_getstarted_1: {\r\n        de: 'Verschiedene Lebensmittel analysieren',\r\n        en: 'Analyze different food items'\r\n    },\r\n    button_getstarted_2: {\r\n        de: 'Komplexe Lebensmittel zusammenstellen',\r\n        en: 'Create a composite food list'\r\n    },\r\n    button_getstarted_3: {\r\n        de: 'Zwei Lebensmittel gegenberstellen',\r\n        en: 'Compare two food items with each other'\r\n    },\r\n    button_getstarted_4: {\r\n        de: 'Lebensmittel nach Werten sortieren',\r\n        en: 'Rank food items by a nutrient value'\r\n    },\r\n    button_no: {\r\n        de: 'Nein',\r\n        en: 'No'\r\n    },\r\n    button_select: {\r\n        de: 'Auswhlen',\r\n        en: 'Show'\r\n    },\r\n    button_show: {\r\n        de: 'Anzeigen',\r\n        en: 'Show'\r\n    },\r\n    button_send: {\r\n        de: \"Senden\",\r\n        en: \"Send\"\r\n    },\r\n    button_submit: {\r\n        de: 'bernehmen',\r\n        en: 'Submit'\r\n    },\r\n    button_update: {\r\n        de: \"Aktualisieren\",\r\n        en: \"Update\"\r\n    },\r\n    button_yes: {\r\n        de: 'Ja',\r\n        en: 'Yes'\r\n    },\r\n    checkbox_chartoption_hideRemainders: {\r\n        de: 'Rest ausblenden',\r\n        en: 'Hide remainders'\r\n    },\r\n    checkbox_chartoption_showLegend: {\r\n        de: 'Legende anzeigen',\r\n        en: 'Show legend'\r\n    },\r\n    checkbox_chartoption_showLegend_m: {\r\n        de: 'Legende',\r\n        en: 'Legend'\r\n    },\r\n    checkbox_chartoption_showDetails: {\r\n        de: 'Details anzeigen',\r\n        en: 'Show details'\r\n    },\r\n    checkbox_chartoption_showDetails_m: {\r\n        de: 'Details',\r\n        en: 'Show'\r\n    },\r\n    checkbox_english: {\r\n        de: 'Englisch',\r\n        en: 'English'\r\n    },\r\n    checkbox_english_m: {\r\n        de: 'EN',\r\n        en: 'EN'\r\n    },\r\n    checkbox_expand100g: {\r\n        de: 'Auf 100 % erweitern',\r\n        en: 'Expand to 100 %'\r\n    },\r\n    checkbox_german: {\r\n        de: 'Deutsch',\r\n        en: 'German'\r\n    },\r\n    checkbox_german_m: {\r\n        de: 'DE',\r\n        en: 'DE'\r\n    },\r\n    checkbox_synchronize: {\r\n        de: 'Synchronisieren',\r\n        en: 'Synchronize'\r\n    },\r\n    confirm_close_all_tabs: {\r\n        de: 'Sollen wirklich alle Lebensmittel-Tabs geschlossen werden?',\r\n        en: 'Really close all food tabs?'\r\n    },\r\n    device_detection_hint: {\r\n        de: 'Auf Mobilgerten und sehr kleinen Gerten stehen einige Funktionen von Food Compare aktuell nur eingeschrnkt zur Verfgung. Wir bitten um Verstndnis.',\r\n        en: 'Please understand that on mobile devices and very small screens some functionality of Food Compare is currently limited or unavailable.',\r\n    },\r\n    direct_compare_text: {\r\n        de: 'Whlen Sie zwei Lebensmittel aus den beiden Auswahlboxen, die miteinander verglichen werden sollen, und klicken Sie dann den Anzeigen-Button.',\r\n        en: 'Pick two food elements from the two selectors that should be compared with each other. Then click the Show button.'\r\n    },\r\n    home_carousel_0: {\r\n        de: 'Vitamine in Lebensmitteln im Vergleich zum Tagesbedarf',\r\n        en: 'Vitamins in food compared to daily requirements'\r\n    },\r\n    home_carousel_1: {\r\n        de: 'Mineralstoffe in Lebensmitteln im Vergleich zum Tagesbedarf',\r\n        en: 'Minerals in food compared to daily requirements'\r\n    },\r\n    home_carousel_2: {\r\n        de: 'Nhrstoffzusammensetzung in einem Lebensmittel',\r\n        en: 'Food composition of nutrients'\r\n    },\r\n    home_carousel_3: {\r\n        de: 'Verteilung der Fettsuren (gesttigt / ungesttigt)',\r\n        en: 'Distribution of fatty acids (saturated / unsaturated)'\r\n    },\r\n    home_carousel_4: {\r\n        de: 'In Nahrungsmitteln enthaltene Aminosuren',\r\n        en: 'Amino acids conainted in foods'\r\n    },\r\n    home_carousel_5: {\r\n        de: 'Gegenberstellung zweier Lebensmittel',\r\n        en: 'Comparing two food items'\r\n    },\r\n    home_carousel_6: {\r\n        de: 'Nach Nhrstoffwert sortierte Lebensmittel',\r\n        en: 'Food items ranked by a specific nutrient value'\r\n    },\r\n    home_text_1: {\r\n        de: 'Food Compare ist ein Webprojekt zur grafischen Darstellung der Zusammensetzung von Lebensmitteln. Whrend klassische Quellen die enthaltenen Inhaltsstoffe meist nur in tabellarischer Form angeben, verwendet Food Compare Grafiken und Diagramme, um den Gehalt an Vitaminen und Mineralstoffen, Kohlenhydraten, Fettsuren und Eiweien (Proteinen) leichter und bersichtlich darzustellen.',\r\n        en: 'Food Compare is a web project to visually display information about food composition. While conventional resources commonly display nutrient data in tables, Food Compare provides charts and graphics to allow users a better understanding of the containing nutrients (carbohydrates, lipids, proteins) as well as vitamins and minerals.'\r\n    },\r\n    home_text_2: {\r\n        de: 'Das Hauptaugenmerk von Food Compare gilt jedoch nicht nur der Veranschaulichung einzelner Nahrungsmittel, sondern der Vergleichbarkeit von Nhrstoffen, Vitaminen und Mineralen in Lebensmittels. Dazu knnen beliebig viele Tabs geffnet und Lebensmittel damit leicht miteinander verglichen werden. So lassen sich bspw. auf einfache Weise der Vitamingehalt von einzelnen Obstsorten vergleichen, oder die Aufteilung von Kohlenhydraten, Fetten und Eiweien zwischen Grundnahrungsmitteln. Dabei erlaubt die Anwendung auch das Zusammenstellen von komplexen Mens, deren Gesamtgehalt an Nhrstoffen, Vitaminen und Mineralstoffen dann berechnet wird.',\r\n        en: 'The primary focus of Food Compare is to visually compare the composition and contents of different food items, though. Food items can be opened in different tabs so that nutrients, vitamins or minerals can be easily compare. As an example, users can compare the containing vitamins between different fruits or the nutrient composition between staple foods. In addition, the application allows to aggregate foods to more complex menus and will then calculate the overall amount of nutrients, vitamins and minerals in that menu.'\r\n    },\r\n    home_text_3: {\r\n        de: 'Um die Nhrstoffdiagramme zweier Lebensmittel auf einen Blick miteinander vergleichen zu knnen, gibt es seit der Version 1.2 nun auch einen zustzlichen Bereich, in denen die Diagramme entsprechend nebeneinander angeordnet sind. Einige Datenseiten wie Vitamine und Mineralstoffe lassen sich dabei auch synchronisieren, so dass eine einheitliche Skalierung der Diagramme stattfindet und nur die Daten angezeigt werden, welche fr beide Lebensmittel vorliegen.',\r\n        en: 'In order to compare nutrient charts of two food items at a glance, an additional page was added in version 1.2 where nutrient charts are placed next to each other. Some data pages like vitamins and minerals can also be synchronized, which means that the charts use a unique scaling and only display data that is available in both food elements.'\r\n    },\r\n    home_foodcompare_overview: {\r\n        de: 'Food Compare im berblick',\r\n        en: 'Food Compare at a Glance'\r\n    },\r\n    input_compositelist_title: {\r\n        de: 'Individuelle Liste',\r\n        en: 'Individual list'\r\n    },\r\n    label_amount: {\r\n        de: 'Menge (g)',\r\n        en: 'Amount (g)'\r\n    },\r\n    label_amount_short: {\r\n        de: 'Gramm',\r\n        en: 'Gram'\r\n    },\r\n    label_category: {\r\n        de: 'Kategorie',\r\n        en: 'Category'\r\n    },\r\n    label_charttype: {\r\n        de: 'Diagrammart',\r\n        en: 'Chart type'\r\n    },\r\n    label_charttype_pie: {\r\n        de: 'Tortendiagramm',\r\n        en: 'Pie chart'\r\n    },\r\n    label_charttype_bar: {\r\n        de: 'Balkendiagramm',\r\n        en: 'Bar chart'\r\n    },\r\n    label_charttype_carbs_base: {\r\n        de: 'Allgemeine Werte',\r\n        en: 'Basic data'\r\n    },\r\n    label_charttype_carbs_detail: {\r\n        de: 'Detailwerte',\r\n        en: 'Detailed data'\r\n    },\r\n    label_charttype_energy: {\r\n        de: 'Grundumsatz und Gesamtumsatz (Energie)',\r\n        en: 'BMR and Energy Expenditure'\r\n    },\r\n    label_charttype_lipids_base: {\r\n        de: 'Allgemeine Werte',\r\n        en: 'Basic data'\r\n    },\r\n    label_charttype_lipids_base_title: {\r\n        de: 'Allgemeine Verteilung der Fettsuren',\r\n        en: 'Basic distributions of fatty acids'\r\n    },\r\n    label_charttype_lipids_omega: {\r\n        de: 'Omega-Werte',\r\n        en: 'Omega data'\r\n    },\r\n    label_charttype_lipids_omega_title: {\r\n        de: 'Allgemeine Verteilung der Omega-3/6-Fettsuren',\r\n        en: 'Basic distributions of Omega 3/6 acids'\r\n    },\r\n    label_charttype_minerals: {\r\n        de: 'Minerale (im Vgl. zum Tagesbedarf)',\r\n        en: 'Minerals (related to daily requirements)'\r\n    },\r\n    label_charttype_proteins: {\r\n        de: 'Proteine (im Vgl. zum Tagesbedarf)',\r\n        en: 'Proteins  (related to daily requirements)'\r\n    },\r\n    label_charttype_vitamins: {\r\n        de: 'Vitamine (im Vgl. zum Tagesbedarf)',\r\n        en: 'Vitamins (related to daily requirements)'\r\n    },\r\n    label_chart_bmr: {\r\n        de: 'Grundumsatz',\r\n        en: 'Basal Metabolic Rate (BMR)'\r\n    },\r\n    label_chart_energyExpenditure: {\r\n        de: 'Gesamtumsatz',\r\n        en: 'Energy Expenditure'\r\n    },\r\n    label_chart_proteins: {\r\n        de: 'Proteine',\r\n        en: 'Proteins'\r\n    },\r\n    label_chart_nutrientComposition: {\r\n        de: 'Nhrstoffzusammensetzung',\r\n        en: 'Nutrient Composition'\r\n    },\r\n    label_chart_totalComposition: {\r\n        de: 'Gesamtzusammensetzung',\r\n        en: 'Total Composition'\r\n    },\r\n    label_chart_view: {\r\n        de: 'Zur Diagrammansicht wechseln',\r\n        en: 'Switch to chart view'\r\n    },\r\n    label_datatype: {\r\n        de: 'Datentyp',\r\n        en: 'Data type'\r\n    },\r\n    label_food: {\r\n        de: \"Lebensmittel\",\r\n        en: \"Food\"\r\n    },\r\n    label_foodclass: {\r\n        de: 'Lebensmittel',\r\n        en: 'Food class'\r\n    },\r\n    label_fooditem: {\r\n        de: 'Typ',\r\n        en: 'Food type'\r\n    },\r\n    label_foodselector: {\r\n        de: 'Lebensmittelauswahl',\r\n        en: 'Food Selector'\r\n    },\r\n    label_foodselector_composite: {\r\n        de: 'Zusammenstellung eines Lebensmittels',\r\n        en: 'Composite food generation'\r\n    },\r\n    label_group: {\r\n        de: 'Gruppe',\r\n        en: 'Group'\r\n    },\r\n    label_getStarted: {\r\n        de: \"Jetzt beginnen...\",\r\n        en: \"Get started...\"\r\n    },\r\n    label_info: {\r\n        de: 'Info',\r\n        en: 'Info'\r\n    },\r\n    label_info_composite: {\r\n        de: 'Enthaltene Lebensmittel',\r\n        en: 'Contained food items'\r\n    },\r\n    label_info_category: {\r\n        de: 'Kategorie',\r\n        en: 'Category'\r\n    },\r\n    label_info_foodClass: {\r\n        de: 'Lebensmittel-Klasse',\r\n        en: 'Food Class'\r\n    },\r\n    label_info_foodId: {\r\n        de: 'Lebensmittel ID',\r\n        en: 'Food Id'\r\n    },\r\n    label_info_foodName: {\r\n        de: 'Lebensmittel',\r\n        en: 'Food'\r\n    },\r\n    label_info_portion: {\r\n        de: 'Portionsdaten',\r\n        en: 'Portion data'\r\n    },\r\n    label_info_portionType: {\r\n        de: 'Portionstyp',\r\n        en: 'Portion type'\r\n    },\r\n    label_info_preparation: {\r\n        de: 'Zubereitungsart',\r\n        en: 'Preparation type'\r\n    },\r\n    label_info_source: {\r\n        de: 'Quelle',\r\n        en: 'Source'\r\n    },\r\n    label_language: {\r\n        de: 'Sprache:',\r\n        en: 'Language:'\r\n    },\r\n    label_mail_name: {\r\n        de: \"Name\",\r\n        en: \"Name\"\r\n    },\r\n    label_mail_address: {\r\n        de: \"Mail-Adresse\",\r\n        en: \"Mail address\"\r\n    },\r\n    label_mail_message: {\r\n        de: \"Ihre Nachricht\",\r\n        en: \"Your message\"\r\n    },\r\n    label_mail_characters_left: {\r\n        de: \"Noch /xx/ Zeichen verbleibend\",\r\n        en: \"/xx/ characters left\"\r\n    },\r\n    label_mail_too_long: {\r\n        de: \"Nachricht ist zu lang\",\r\n        en: \"Message too long\"\r\n    },\r\n    label_mail_error_name: {\r\n        de: \"Geben Sie bitte einen gltigen Namen ein.\",\r\n        en: \"Please enter a valid name.\"\r\n    },\r\n    label_mail_error_mailaddress: {\r\n        de: \"Geben Sie bitte eine gltige Mail-Adresse ein.\",\r\n        en: \"Please enter a valid mail address.\"\r\n    },\r\n    label_mail_error_nocontent: {\r\n        de: \"Geben Sie bitte eine Nachricht ein.\",\r\n        en: \"Please specify a message.\"\r\n    },\r\n    label_mail_error_content_too_long: {\r\n        de: \"Die eingegebene Nachricht ist zu lang.\",\r\n        en: \"The specified message is too long.\"\r\n    },\r\n    label_mail_error_verification: {\r\n        de: \"Bitte verifizieren, dass Sie kein Roboter sind.\",\r\n        en: \"Please verify that you are not a robot.\"\r\n    },\r\n    label_noData: {\r\n        de: 'Keine Daten vorhanden',\r\n        en: 'No data available'\r\n    },\r\n    label_nutrient_alcohol: {\r\n        de: 'Alkohol',\r\n        en: 'Alcohol'\r\n    },\r\n    label_nutrient_ash: {\r\n        de: 'Reststoffe',\r\n        en: 'Ash'\r\n    },\r\n    label_nutrient_carbohydrates: {\r\n        de: 'Kohlenhydrate',\r\n        en: 'Carbohydrates'\r\n    },\r\n    label_nutrient_carbohydrates_short: {\r\n        de: 'Kohlenhyd.',\r\n        en: 'Carbs'\r\n    },\r\n    label_nutrient_carbohydrates_fructose: {\r\n        de: 'Fruktose',\r\n        en: 'Fructose'\r\n    },\r\n    label_nutrient_carbohydrates_galactose: {\r\n        de: 'Galaktose',\r\n        en: 'Galactose'\r\n    },\r\n    label_nutrient_carbohydrates_glucose: {\r\n        de: 'Glukose (Traubenzucker)',\r\n        en: 'Glucose'\r\n    },\r\n    label_nutrient_carbohydrates_lactose: {\r\n        de: 'Laktose',\r\n        en: 'Lactose'\r\n    },\r\n    label_nutrient_carbohydrates_maltose: {\r\n        de: 'Maltose',\r\n        en: 'Maltose'\r\n    },\r\n    label_nutrient_carbohydrates_starch: {\r\n        de: 'Strke',\r\n        en: 'Starch'\r\n    },\r\n    label_nutrient_carbohydrates_sucrose: {\r\n        de: 'Sukrose',\r\n        en: 'Sucrose'\r\n    },\r\n    label_nutrient_dietaryFibers: {\r\n        de: 'Ballaststoffe',\r\n        en: 'Dietary fibers'\r\n    },\r\n    label_nutrient_dietaryFibers_short: {\r\n        de: 'Ballastst.',\r\n        en: 'Dietary fib.'\r\n    },\r\n    label_nutrient_energy: {\r\n        de: 'Energie',\r\n        en: 'Energy'\r\n    },\r\n    label_nutrient_lipids: {\r\n        de: 'Fett',\r\n        en: 'Fats'\r\n    },\r\n    label_nutrient_lipids_long: {\r\n        de: 'Fettsuren',\r\n        en: 'Fatty acids'\r\n    },\r\n    label_nutrient_lipids_saturated: {\r\n        de: 'Gesttigte Fettsuren',\r\n        en: 'Saturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_saturated_short: {\r\n        de: 'Gesttigt',\r\n        en: 'Saturated'\r\n    },\r\n    label_nutrient_lipids_unsaturated: {\r\n        de: 'Ungesttigte Fettsuren',\r\n        en: 'Unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_mono: {\r\n        de: 'Einfach ungesttigte Fettsuren',\r\n        en: 'Mono-unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_mono_short: {\r\n        de: 'Einfach ungesttigt',\r\n        en: 'Mono-unsaturated'\r\n    },\r\n    label_nutrient_lipids_unsaturated_poly: {\r\n        de: 'Mehrfach ungesttigte Fettsuren',\r\n        en: 'Poly-unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_poly_short: {\r\n        de: 'Mehrfach unges.',\r\n        en: 'Poly-unsaturated'\r\n    },\r\n    label_nutrient_lipids_transfattyAcids: {\r\n        de: 'Transfettsuren',\r\n        en: 'Transfatty acids'\r\n    },\r\n    label_nutrient_lipids_omega3: {\r\n        de: 'Omega-3-Fettsuren',\r\n        en: 'Omega-3 fatty acids'\r\n    },\r\n    label_nutrient_lipids_omega6: {\r\n        de: 'Omega-6-Fettsuren',\r\n        en: 'Omega-6 fatty acids'\r\n    },\r\n    label_nutrient_lipids_cholesterol: {\r\n        de: 'Cholesterin',\r\n        en: 'Cholesterol'\r\n    },\r\n    label_nutrient_min: {\r\n        de: 'Mineralstoffe',\r\n        en: 'Minerals'\r\n    },\r\n    label_nutrient_min_calcium: {\r\n        de: 'Kalzium',\r\n        en: 'Calcium'\r\n    },\r\n    label_nutrient_min_copper: {\r\n        de: 'Kupfer',\r\n        en: 'Copper'\r\n    },\r\n    label_nutrient_min_iron: {\r\n        de: 'Eisen',\r\n        en: 'Iron'\r\n    },\r\n    label_nutrient_min_magnesium: {\r\n        de: 'Magnesium',\r\n        en: 'Magnesium'\r\n    },\r\n    label_nutrient_min_manganese: {\r\n        de: 'Mangan',\r\n        en: 'Manganese'\r\n    },\r\n    label_nutrient_min_phosphorus: {\r\n        de: 'Phosphor',\r\n        en: 'Phosphorus'\r\n    },\r\n    label_nutrient_min_potassimum: {\r\n        de: 'Kalium',\r\n        en: 'Potassimum'\r\n    },\r\n    label_nutrient_min_selenium: {\r\n        de: 'Selen',\r\n        en: 'Selenium'\r\n    },\r\n    label_nutrient_min_sodium: {\r\n        de: 'Natrium',\r\n        en: 'Sodium'\r\n    },\r\n    label_nutrient_min_zinc: {\r\n        de: 'Zink',\r\n        en: 'Zinc'\r\n    },\r\n    label_nutrient_omega3: {\r\n        de: 'Omega-3-Fettsuren',\r\n        en: 'Omega-3 Fatty acids'\r\n    },\r\n    label_nutrient_omega6: {\r\n        de: 'Omega-6-Fettsuren',\r\n        en: 'Omega-6 Fatty acids'\r\n    },\r\n    label_nutrient_proteins: {\r\n        de: 'Eiwei',\r\n        en: 'Proteins'\r\n    },\r\n    label_nutrient_proteins_alanine: {\r\n        de: 'Alanin',\r\n        en: 'Alanine'\r\n    },\r\n    label_nutrient_proteins_arginine: {\r\n        de: 'Arginin',\r\n        en: 'Arginine'\r\n    },\r\n    label_nutrient_proteins_asparticAcid: {\r\n        de: 'Asparaginsure',\r\n        en: 'Aspartic acid'\r\n    },\r\n    label_nutrient_proteins_cystine: {\r\n        de: 'Cystein',\r\n        en: 'Cysteine'\r\n    },\r\n    label_nutrient_proteins_glysine: {\r\n        de: 'Glysin',\r\n        en: 'Glysine'\r\n    },\r\n    label_nutrient_proteins_glutamicAcid: {\r\n        de: 'Glutamin',\r\n        en: 'Glutamic acid'\r\n    },\r\n    label_nutrient_proteins_histidine: {\r\n        de: 'Histidin',\r\n        en: 'Histidine'\r\n    },\r\n    label_nutrient_proteins_isoleucine: {\r\n        de: 'Isoleucine',\r\n        en: 'Isoleucine'\r\n    },\r\n    label_nutrient_proteins_leucine: {\r\n        de: 'Leucin',\r\n        en: 'Leucine'\r\n    },\r\n    label_nutrient_proteins_lysine: {\r\n        de: 'Lysin',\r\n        en: 'Lysine'\r\n    },\r\n    label_nutrient_proteins_methionine: {\r\n        de: 'Methionin',\r\n        en: 'Methionine'\r\n    },\r\n    label_nutrient_proteins_phenylalanine: {\r\n        de: 'Phenylalanin',\r\n        en: 'Phenylalanine'\r\n    },\r\n    label_nutrient_proteins_proline: {\r\n        de: 'Prolin',\r\n        en: 'Proline'\r\n    },\r\n    label_nutrient_proteins_serine: {\r\n        de: 'Serin',\r\n        en: 'Serine'\r\n    },\r\n    label_nutrient_proteins_threonine: {\r\n        de: 'Threonin',\r\n        en: 'Threonine'\r\n    },\r\n    label_nutrient_proteins_tryptophan: {\r\n        de: 'Tryptophan',\r\n        en: 'Tryptophan'\r\n    },\r\n    label_nutrient_proteins_tyrosine: {\r\n        de: 'Tyrosin',\r\n        en: 'Tyrosine'\r\n    },\r\n    label_nutrient_proteins_valine: {\r\n        de: 'Valin',\r\n        en: 'Valine'\r\n    },\r\n    label_nutrient_remainder: {\r\n        de: 'Rest',\r\n        en: 'Remainder'\r\n    },\r\n    label_nutrient_sugar: {\r\n        de: 'Zucker',\r\n        en: 'Sugar'\r\n    },\r\n    label_nutrient_vit: {\r\n        de: 'Vitamine',\r\n        en: 'Vitamins'\r\n    },\r\n    label_nutrient_vit_a: {\r\n        de: 'Vitamin A (Retinol / Retinal)',\r\n        en: 'Vitamin A (Retinol / Retinal)'\r\n    },\r\n    label_nutrient_vit_b1: {\r\n        de: 'Vitamin B1 (Thiamin)',\r\n        en: 'Vitamin B1 (Thiamine)'\r\n    },\r\n    label_nutrient_vit_b2: {\r\n        de: 'Vitamin B2 (Riboflavin)',\r\n        en: 'Vitamin B2 (Riboflavin)'\r\n    },\r\n    label_nutrient_vit_b3: {\r\n        de: 'Vitamin B3 (Niacin)',\r\n        en: 'Vitamin B3 (Niacin)'\r\n    },\r\n    label_nutrient_vit_b5: {\r\n        de: 'Vitamin B5 (Pantothensure)',\r\n        en: 'Vitamin B5 (Pantothenic acid)'\r\n    },\r\n    label_nutrient_vit_b6: {\r\n        de: 'Vitamin B6',\r\n        en: 'Vitamin B6'\r\n    },\r\n    label_nutrient_vit_b9: {\r\n        de: 'Vitamin B9 (Folsure)',\r\n        en: 'Vitamin B9 (Folate)'\r\n    },\r\n    label_nutrient_vit_b12: {\r\n        de: 'Vitamin B12',\r\n        en: 'Vitamin B12'\r\n    },\r\n    label_nutrient_vit_c: {\r\n        de: 'Vitamin C',\r\n        en: 'Vitamin C'\r\n    },\r\n    label_nutrient_vit_d: {\r\n        de: 'Vitamin D',\r\n        en: 'Vitamin D'\r\n    },\r\n    label_nutrient_vit_e: {\r\n        de: 'Vitamin E',\r\n        en: 'Vitamin E'\r\n    },\r\n    label_nutrient_vit_k: {\r\n        de: 'Vitamin K',\r\n        en: 'Vitamin K'\r\n    },\r\n    label_nutrient_vit_carotenoid: {\r\n        de: 'Provitamin A (Carotine)',\r\n        en: 'Carotene (total)'\r\n    },\r\n    label_nutrient_vit_carotenoid_alpha: {\r\n        de: 'Alpha-Carotin',\r\n        en: 'Alpha-Carotene'\r\n    },\r\n    label_nutrient_vit_carotenoid_beta: {\r\n        de: 'Beta-Carotin',\r\n        en: 'Beta-Carotene'\r\n    },\r\n    label_nutrient_vit_scientific_a: {\r\n        de: 'inkl. Provitamin A / Carotine',\r\n        en: 'incl. caraotene'\r\n    },\r\n    label_nutrient_vit_scientific_b1: {\r\n        de: 'Thiamine',\r\n        en: 'Thiamine'\r\n    },\r\n    label_nutrient_vit_scientific_b2: {\r\n        de: 'Riboflavin',\r\n        en: 'Riboflavin'\r\n    },\r\n    label_nutrient_vit_scientific_b3: {\r\n        de: 'Niacin',\r\n        en: 'Niacin'\r\n    },\r\n    label_nutrient_vit_scientific_b5: {\r\n        de: 'Pantothensure',\r\n        en: 'Pantothenic acid'\r\n    },\r\n    label_nutrient_vit_scientific_b9: {\r\n        de: 'Folsure',\r\n        en: 'Folate'\r\n    },\r\n    label_nutrient_vit_scientific_b12: {\r\n        de: 'Cobalamin',\r\n        en: 'Cobalamin '\r\n    },\r\n    label_nutrient_vit_scientific_c: {\r\n        de: 'Ascorbinsure',\r\n        en: 'Ascorbic acid'\r\n    },\r\n    label_nutrient_vit_scientific_d: {\r\n        de: 'Vitamin D',\r\n        en: 'Vitamin D'\r\n    },\r\n    label_nutrient_vit_scientific_e: {\r\n        de: 'Tocopherol',\r\n        en: 'Tocopherol'\r\n    },\r\n    label_nutrient_vit_scientific_k: {\r\n        de: 'Vitamin K',\r\n        en: 'Vitamin K'\r\n    },\r\n    label_nutrient_water: {\r\n        de: 'Wasser',\r\n        en: 'Water'\r\n    },\r\n    label_overview: {\r\n        de: 'bersicht',\r\n        en: 'Overview'\r\n    },\r\n    label_per_100g: {\r\n        de: 'je 100 g',\r\n        en: 'per 100 g'\r\n    },\r\n    label_per_portion: {\r\n        de: 'je Portion',\r\n        en: 'per portion'\r\n    },\r\n    label_portion: {\r\n        de: 'Portion',\r\n        en: 'Portion'\r\n    },\r\n    label_portion_selected: {\r\n        de: 'Ausgewhlte Portion',\r\n        en: 'Selected portion'\r\n    },\r\n    label_portion_common: {\r\n        de: 'Typische Portion',\r\n        en: 'Typical portion'\r\n    },\r\n    label_prefix_hereof: {\r\n        de: 'davon',\r\n        en: 'hereof'\r\n    },\r\n    label_reference: {\r\n        de: 'Bezug',\r\n        en: 'Reference'\r\n    },\r\n    label_preferred_source: {\r\n        de: 'Bevorzugte Datenquelle',\r\n        en: 'Preferred data source'\r\n    },\r\n    label_ranking_dietaryRequirements: {\r\n        de: 'Zeige Tagesbedarf',\r\n        en: 'Show dietary requirements'\r\n    },\r\n    label_source: {\r\n        de: 'Datenquelle',\r\n        en: 'Data source'\r\n    },\r\n    label_source_supplement: {\r\n        de: \"Unvollstndige Daten ergnzen\",\r\n        en: \"Supplement incomplete data\"\r\n    },\r\n    label_source_supplement_tooltip: {\r\n        de: \"Ergnzt fehlende Daten aus einer anderen Quelle, sofern diese die entsprechenden Daten enthlt\",\r\n        en: \"Supplements missing data from another source in case that source contains the relevant data\"\r\n    },\r\n    label_source_combine: {\r\n        de: \"Datenquellen kombinieren\",\r\n        en: \"Combine data sources\"\r\n    },\r\n    label_source_combine_tooltip: {\r\n        de: \"Bildet den Daten-Mittelwert aus allen Datenquellen zu dem Lebensmittel\",\r\n        en: \"Create the average data out of all available data sources to this food\"\r\n    },\r\n    label_title: {\r\n        de: 'Titel',\r\n        en: 'Title'\r\n    },\r\n    label_unknown: {\r\n        de: 'Unbekannt',\r\n        en: 'Unknown'\r\n    },\r\n    label_usda_reference: {\r\n        de: 'Daten auf Food Data Central ansehen',\r\n        en: 'See the nutrient data at Food Data Central'\r\n    },\r\n    label_userSettings_age: {\r\n        de: 'Alter (Jahre)',\r\n        en: 'Age (years)'\r\n    },\r\n    label_userSettings_breastfeeding: {\r\n        de: 'stillend',\r\n        en: 'breast-feeding'\r\n    },\r\n    label_userSettings_intro: {\r\n        de: 'Die User-Einstellungen (Krpergre, Gewicht, Geschlecht etc.) werden zur Berechnung bestimmter Werte verwendet, z.B. Grundumsatz oder Tagesbedarf an Vitaminen.',\r\n        en: 'User settings such as size, weight and sex are used for different nutrient calculations, e.g., basal metabolic rate or daily requirements of vitamins and the like.'\r\n    },\r\n    label_userSettings_leisureSports: {\r\n        de: 'Freizeitsport',\r\n        en: 'Leisure sports'\r\n    },\r\n    label_userSettings_leisureSports_tooltip: {\r\n        de: 'Angabe, ob Sie an dem betreffenden Tag zustzlich zu Ihrer Ttigkeit nennenswert Sport ausgebt haben, z.B. 30-45 min joggen oder 45-60 min Rad fahren (erhht PAL-Wert um 0.3)',\r\n        en: 'Specifies whether you did some notable (leisure) sports or activity that day, like 30-45 minutes jogging or 45-60 minutes biking (increases PAL-value by 0.3)'\r\n    },\r\n    label_userSettings_palValue: {\r\n        de: 'PAL-Value',\r\n        en: 'Pal Value'\r\n    },\r\n    label_userSettings_pregnant: {\r\n        de: 'schwanger',\r\n        en: 'pregnant'\r\n    },\r\n    label_userSettings_sex: {\r\n        de: 'Geschlecht:',\r\n        en: 'Sex:'\r\n    },\r\n    label_userSettings_sex_male: {\r\n        de: 'mnnlich',\r\n        en: 'male'\r\n    },\r\n    label_userSettings_sex_female: {\r\n        de: 'weiblich',\r\n        en: 'female'\r\n    },\r\n    label_userSettings_size: {\r\n        de: 'Krpergre (cm)',\r\n        en: 'Size (cm)'\r\n    },\r\n    label_userSettings_weight: {\r\n        de: 'Gewicht (kg)',\r\n        en: 'Weight (kg)'\r\n    },\r\n    label_value: {\r\n        de: 'Wert',\r\n        en: 'Value'\r\n    },\r\n    menu_food_data_panel: {\r\n        de: 'Lebensmittel analysieren',\r\n        en: 'Food analyzer'\r\n    },\r\n    menu_food_data_panel_m: {\r\n        de: 'Analyse',\r\n        en: 'Analyze'\r\n    },\r\n    menu_direct_compare: {\r\n        de: 'Direktvergleich',\r\n        en: 'Direct comparison'\r\n    },\r\n    menu_direct_compare_m: {\r\n        de: 'Vergleich',\r\n        en: 'Compare'\r\n    },\r\n    menu_home: {\r\n        de: 'Home',\r\n        en: 'Home'\r\n    },\r\n    menu_ranking: {\r\n        de: 'Ranking',\r\n        en: 'Food ranking'\r\n    },\r\n    menu_ranking_m: {\r\n        de: 'Ranking',\r\n        en: 'Ranking'\r\n    },\r\n    menu_settings: {\r\n        de: 'User Einstellungen',\r\n        en: 'User settings'\r\n    },\r\n    menu_settings_m: {\r\n        de: 'Optionen',\r\n        en: 'Settings'\r\n    },\r\n    menu_contact: {\r\n        de: 'Kontakt',\r\n        en: 'Contact'\r\n    },\r\n    menu_contact_sources: {\r\n        de: 'Quellen',\r\n        en: 'Sources'\r\n    },\r\n    menu_contact_versions: {\r\n        de: 'Versionen',\r\n        en: 'Versions'\r\n    },\r\n    menu_contact_impressum: {\r\n        de: 'Impressum',\r\n        en: 'Impressum'\r\n    },\r\n    message_email_success: {\r\n        de: 'Ihre Nachricht wurde versendet.',\r\n        en: 'Your message has been sent.'\r\n    },\r\n    message_email_error: {\r\n        de: 'Beim Versenden der Nachricht trat ein Fehler auf.',\r\n        en: 'Error while trying to send message.'\r\n    },\r\n    message_error_existing_element: {\r\n        de: 'Das ausgewhlte Element befindet sich bereits im Datenbereich. Ein Lebensmittel darf nur einmal hinzugefgt werden.',\r\n        en: 'The selected food item already exists in your list. A food item can be added only once.'\r\n    },\r\n    message_error_incomplete_form: {\r\n        de: 'Das Formular ist unvollstndig ausgefllt.',\r\n        en: 'The form is incomplete.'\r\n    },\r\n    message_error_invalid_portion: {\r\n        de: 'Geben Sie bitte eine Portion zwischen 1 und 5000 Gramm an.',\r\n        en: 'Please specify a portion amount between 1 and 5000 gram.'\r\n    },\r\n    message_userdata_success: {\r\n        de: 'nderungen wurden gespeichert.',\r\n        en: 'Saved changes.'\r\n    },\r\n    message_userdata_error_title: {\r\n        de: 'Fehlerhafte Eingabe',\r\n        en: 'Invalid input'\r\n    },\r\n    message_userdata_error_age: {\r\n        de: 'Geben Sie bitte ein Alter zwischen 15 und 100 Jahren ein.',\r\n        en: 'Please enter an age between 15 and 100 years.'\r\n    },\r\n    message_userdata_error_size: {\r\n        de: 'Geben Sie bitte eine Krpergre zwischen 80 und 225 cm ein.',\r\n        en: 'Please enter a body height between 80 and 225 cm.'\r\n    },\r\n    message_userdata_error_weight: {\r\n        de: 'Geben Sie bitte ein Gewicht zwischen 30 und 250 kg ein.',\r\n        en: 'Please enter a body weight between 30 and 250 kg.'\r\n    },\r\n    palcat_name_1: {\r\n        de: 'Extrem niedrige Aktivitt',\r\n        en: 'Extremely light activity.'\r\n    },\r\n    palcat_desc_1: {\r\n        de: 'Bspw. ans Bett gebundene Menschen.',\r\n        en: 'Such as bed-ridden people.'\r\n    },\r\n    palcat_name_2: {\r\n        de: 'Sehr nierdige Aktivitt',\r\n        en: 'Very light activity'\r\n    },\r\n    palcat_desc_2: {\r\n        de: 'Bspw. sehr einfache Broarbeit in permanent sitzender Haltung, Reisende in einem Flugzeug oder Zug (sitzend).',\r\n        en: 'Such as very light office work (permanently seated), passengers sitting in a train or airplane.'\r\n    },\r\n    palcat_name_3: {\r\n        de: 'Niedrige Aktivitt',\r\n        en: 'Light activity'\r\n    },\r\n    palcat_desc_3: {\r\n        de: 'berwiegend sitzende Ttigkeit, mit Phasen im stehenden Zustand (z.B. Berufsfahrer, rzte, Lehrer, Schler) oder dem Ausfhren zustzlicher leichter Ttigkeiten (z.B. einfache Haushaltsttigkeiten).',\r\n        en: 'Mostly seated activity, with phases of standing activity (e.g., drivers, doctors, students, teachers...) or additional tasks like simple household chores.'\r\n    },\r\n    palcat_name_4: {\r\n        de: 'Mige Aktivitt',\r\n        en: 'Mediocre Activity'\r\n    },\r\n    palcat_desc_4: {\r\n        de: 'berwiegende Stehende Ttigkeit (z.B. Handwerker, Verkufer, Kellner, Krankenschwester).',\r\n        en: 'Mostly standing activity (e.g. shop assistants, waiters, craftsmen, nurses).'\r\n    },\r\n    palcat_name_5: {\r\n        de: 'Hohe Aktivitt',\r\n        en: 'High activity'\r\n    },\r\n    palcat_desc_5: {\r\n        de: 'Krperlich schwere Arbeit, z.B. Bauarbeiter, Mbelpacker, Sportlehrer.',\r\n        en: 'Hard work, such as construction workers, movers, gym teachers etc.'\r\n    },\r\n    palcat_name_6: {\r\n        de: 'Sehr hohe Aktivitt',\r\n        en: 'Very high activity'\r\n    },\r\n    palcat_desc_6: {\r\n        de: 'Krperlich sehr schwere Arbeit, z.B. Bauarbeiter, Mbelpacker, Fitnesstrainer, Bergarbeiter.',\r\n        en: 'Very hard work, such as construction workers, movers, fitness trainers, miners etc.'\r\n    },\r\n    palcat_name_7: {\r\n        de: 'Extrem hohe Aktivitt',\r\n        en: 'Extremely high activity'\r\n    },\r\n    palcat_desc_7: {\r\n        de: 'Bspw. (Hoch-) Leistungssportler.',\r\n        en: 'Such as professional athletes.'\r\n    },\r\n    portion_100g: {\r\n        de: '100 Gramm',\r\n        en: '100 Gram'\r\n    },\r\n    portion_individual: {\r\n        de: 'Individuell',\r\n        en: 'Individual'\r\n    },\r\n    text_contact_disclaimer1: {\r\n        de: 'Alle Rechte vorbehalten.',\r\n        en: 'All rights reserved.'\r\n    },\r\n    text_contact_disclaimer2: {\r\n        de: 'Food Compare basiert auf freien Datenquellen, die im Quellen-Tab nher beschrieben sind. Die Lebensmitteldaten stammen von Food Data Central, einem Teilprojekt des United States Department of Agriculture. Im Info-Tab des Daten-Panels existiert fr jedes Lebensmittel ein Link zu den abgegriffenen Daten.',\r\n        en: 'Food Compare is based upon free data sources specified in the sources tab. Food data used in the project originates from Food Data Central as part of the United States Department of Agriculture. There is a direct link to the original source data of each food element in the info data page of the food data panel.'\r\n    },\r\n    text_contact_disclaimer3: {\r\n        de: 'Die fr die Berechnung des Tagesbedarfs verwendeten Einstellungen entstammen der Deutschen Gesellschaft fr Ernhrung (DGE).',\r\n        en: 'For the computation of daily dietary requirements, data from the German Nutrition Society (DGE) is used.'\r\n    },\r\n    text_contact_form: {\r\n        de: 'Bitte benutzen Sie das Kontaktformular, wenn Sie Frage oder Feedback zu Food Compare haben.',\r\n        en: 'Please use the contact form below if you have questions of feedback about Food Compare.'\r\n    },\r\n    text_contact_source1: {\r\n        de: 'Quellen:',\r\n        en: 'Sources:',\r\n    },\r\n    text_contact_source2: {\r\n        de: 'Nhrwert-Daten:',\r\n        en: 'Nutrient Data:',\r\n    },\r\n    text_contact_source3: {\r\n        de: 'Daten fr Tagesbedarf von Vitaminen/Mineralstoffen:',\r\n        en: 'Source for Dietary Requirement of Minerals and Vitamins',\r\n    },\r\n    text_contact_source4: {\r\n        de: 'Berechnung von Grundumsatz und PAL:',\r\n        en: 'Calculation of BMR and PAL:',\r\n    },\r\n    text_empty_fooddatapanel: {\r\n        de: 'Klicken Sie links auf den Plus-Button, um Lebensmittel zum Analysebereich hinzufgen. Es knnen beliebig viele Lebensmittel hinzugefgt werden. Klicken Sie den Stapel-Button, um ein komplexes Lebensmittel bzw. ein Men zusammenzustellen, dessen Gesamtwerte dann angezeigt werden.',\r\n        en: 'Click the plus button on the left to add food elements to the analysis panel. You can add as many food elements as you like. Click the stack button if you want to create complex meals to show their total nutrient data.'\r\n    },\r\n    text_empty_fooddatapanel_mobileInfo: {\r\n        de: 'Das Erstellen komplexer Lebensmittel wird auf Mobilgerten aktuell nicht untersttzt.',\r\n        en: 'Presently, complex menus cannot be created on mobile devices.'\r\n    },\r\n    text_ranking: {\r\n        de: \"Sie knnen in diesem Bereich Nahrungsmittel nach einem bestimmten Nhrstoff, Vitamin oder Mineralstoff sortiert anzeigen lassen. Whlen Sie dazu eine Kategorie aus, eine Gruppe und eine bestimmte Nhrstoffangabe (Wert).\",\r\n        en: \"In this section you may display food items sorted by a specific nutrient, vitamin or mineral. Please select a food category, nutrient group and value to display the corresponding ranking chart.\"\r\n    },\r\n    text_setUserdata_p1: {\r\n        de: 'Es werden aktuell Referenzwerte fr einen durchschnittlichen Erwachsenen (mnnlich, 35 Jahre) angezeigt.',\r\n        en: 'You are currently seeing the reference data for an average adult (male, 35 years).'\r\n    },\r\n    text_setUserdata_p2: {\r\n        de: 'Geben Sie, bei Bedarf, in den Einstellungen Ihre eigenen Krperdaten fr ein genaueres Ergebnis ein.',\r\n        en: 'For more accurate data, if necessary, please enter your personal body data in the settings menu.'\r\n    },\r\n    text_setUserdata_p3: {\r\n        de: 'Die Referenzwerte beziehen sich auf die eingestellten Nutzerdaten.',\r\n        en: 'The reference data refer to your entered body data.'\r\n    },\r\n    tooltip_icon_charts: {\r\n        de: 'Diagramm-Modus',\r\n        en: 'Chart mode'\r\n    },\r\n    tooltip_icon_close: {\r\n        de: 'Tab schlieen',\r\n        en: 'Close tab'\r\n    },\r\n    tooltip_icon_newFoodItem: {\r\n        de: 'Lebensmittel hinzufgen',\r\n        en: 'Add food item'\r\n    },\r\n    tooltip_icon_newFoodItemStack: {\r\n        de: 'Kombinierte Liste an Lebensmitteln hinzufgen (aggregierte Daten)',\r\n        en: 'Add composite list of food items (aggregated data)'\r\n    },\r\n    tooltip_icon_removeAll: {\r\n        de: 'Alle Tabs schlieen',\r\n        en: 'Close all data tabs'\r\n    },\r\n    tooltip_icon_table: {\r\n        de: 'Tabellen-Modus',\r\n        en: 'Table mode'\r\n    },\r\n    tooltip_source: {\r\n        de: 'Verwendete Quelle: ',\r\n        en: 'Used source: '\r\n    }\r\n}","import {useEffect, useState} from \"react\";\r\nimport {smallFormsScreenSize} from \"../config/ApplicationSetting\";\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\nexport interface WindowDimension {\r\n    width: number\r\n    height: number\r\n}\r\n\r\nfunction getCurrentWindowDimension() {\r\n    return {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight\r\n    }\r\n}\r\n\r\nexport function useWindowDimension() {\r\n    const [windowDimension, setWindowDimension] = useState(getCurrentWindowDimension())\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", () => setWindowDimension(getCurrentWindowDimension))\r\n        return () => window.removeEventListener(\"resize\", () => setWindowDimension(getCurrentWindowDimension))\r\n    }, [])\r\n\r\n    return windowDimension\r\n}\r\n\r\n\r\nexport function isSmallScreen(windowDimension: WindowDimension) {\r\n    return windowDimension.width < smallFormsScreenSize.width || windowDimension.height < smallFormsScreenSize.height\r\n}\r\n\r\nexport function isNarrowScreen(windowDimension: WindowDimension) {\r\n    return windowDimension.width < smallFormsScreenSize.width\r\n}\r\n\r\nexport function isMobileDevice() {\r\n    return isMobile\r\n}","import logo from '../static/image/logo.png'\r\nimport text from '../static/image/text.png'\r\nimport {Button} from \"react-bootstrap\";\r\nimport {\r\n    LANGUAGE_DE,\r\n    LANGUAGE_EN,\r\n    PATH_FOODDATA_PANEL,\r\n    PATH_HOME,\r\n    PATH_CONTACT,\r\n    PATH_USERSETTINGS,\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODCOMPARE,\r\n    SOURCE_SRLEGACY,\r\n    PATH_RANKING,\r\n    SOURCE_FNDDS\r\n} from \"../config/Constants\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {Link} from 'react-router-dom';\r\nimport {useLocation} from 'react-router-dom';\r\nimport {isMobileDevice} from \"../service/WindowDimension\";\r\n\r\n\r\nexport default function Header() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language, userLanguageChange} = useContext(LanguageContext)\r\n    const location = useLocation();\r\n\r\n    if (applicationContext === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleLanguageButtonClick = (event: any): void => {\r\n        userLanguageChange(event.target.value)\r\n        applicationContext.setFoodDataPanelData.updateAllFoodItemNames(applicationContext.foodDataCorpus.foodNames, event.target.value)\r\n    }\r\n\r\n    const handleSourceButtonClick = (event: any): void => {\r\n        applicationContext.setPreferredSource(event.target.value)\r\n    }\r\n\r\n    let activePath = location.pathname && location.pathname !== \"/\" ? location.pathname : PATH_HOME\r\n    if (activePath.endsWith(\"/\") && activePath.length > 1) {\r\n        activePath = activePath.substring(0, activePath.length - 1)\r\n    }\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('Path:', activePath)\r\n    }\r\n\r\n    const renderMenus = () => {\r\n        const menuNameAnalyze = isMobileDevice() ? applicationStrings.menu_food_data_panel_m[language] : applicationStrings.menu_food_data_panel[language]\r\n        const menuNameDirectCompare = isMobileDevice() ? applicationStrings.menu_direct_compare_m[language] : applicationStrings.menu_direct_compare[language]\r\n        const menuNameRanking = isMobileDevice() ? applicationStrings.menu_ranking_m[language] : applicationStrings.menu_ranking[language]\r\n        const menuNameSettings = isMobileDevice() ? applicationStrings.menu_settings_m[language] : applicationStrings.menu_settings[language]\r\n\r\n        const buttonContainerClass = isMobileDevice() ? \"link header-link-mobile\" : \"link header-link\"\r\n\r\n        const menuClass = isMobileDevice() ? \"btn-group\" : \"btn-group flex flex-wrap\"\r\n\r\n        return (\r\n            <div className={menuClass}>\r\n                <Link to={PATH_HOME}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_HOME}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_HOME || activePath === PATH_FOODCOMPARE}>\r\n                        {applicationStrings.menu_home[language]}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_FOODDATA_PANEL}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_FOODDATA_PANEL}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_FOODDATA_PANEL}>\r\n                        {menuNameAnalyze}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_DIRECT_COMPARE}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_DIRECT_COMPARE}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_DIRECT_COMPARE}>\r\n                        {menuNameDirectCompare}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_RANKING}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_RANKING}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_RANKING}>\r\n                        {menuNameRanking}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_USERSETTINGS}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_USERSETTINGS}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_USERSETTINGS}>\r\n                        {menuNameSettings}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_CONTACT}>\r\n                    <Button className={buttonContainerClass}\r\n                            variant={'link'}\r\n                            value={PATH_CONTACT}\r\n                            active={activePath === PATH_CONTACT}>\r\n                        {applicationStrings.menu_contact[language]}\r\n                    </Button>\r\n                </Link>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const language_en = isMobileDevice() ? applicationStrings.checkbox_english_m[language] : applicationStrings.checkbox_english[language]\r\n    const language_de = isMobileDevice() ? applicationStrings.checkbox_german_m[language] : applicationStrings.checkbox_german[language]\r\n\r\n    const renderLanguageButtons = () => {\r\n        return (\r\n            <div className=\"form-small text-right\">\r\n                <form>\r\n                    <label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_language[language]}</b>\r\n                    </label>\r\n                    <label className=\"form-elements\">\r\n                        <input className=\"form-radiobutton\"\r\n                               name={\"user language\"}\r\n                               type=\"radio\"\r\n                               value={LANGUAGE_EN}\r\n                               defaultChecked={language === LANGUAGE_EN}\r\n                               onClick={handleLanguageButtonClick}\r\n                        />\r\n                        {language_en}\r\n                    </label>\r\n                    <label className=\"form-elements-largespace\">\r\n                        <input className=\"form-radiobutton\"\r\n                               name={\"user language\"}\r\n                               type=\"radio\"\r\n                               value={LANGUAGE_DE}\r\n                               defaultChecked={language === LANGUAGE_DE}\r\n                               onClick={handleLanguageButtonClick}\r\n                        />\r\n                        {language_de}\r\n                    </label>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderSourceButtons = () => {\r\n        const preferredSource = applicationContext.applicationData.preferredSource\r\n\r\n        return (\r\n            <div className=\"form-small text-right\" style={{paddingLeft: \"25px\"}}>\r\n                <form className=\"form-group\">\r\n                    <label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_preferred_source[language]}</b>\r\n                    </label>\r\n                    <label className=\"form-elements\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               value={SOURCE_SRLEGACY}\r\n                               checked={preferredSource === SOURCE_SRLEGACY}\r\n                               onChange={handleSourceButtonClick}\r\n                        />\r\n                        SR Legacy\r\n                    </label>\r\n                    <label className=\"form-elements-largespace\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               value={SOURCE_FNDDS}\r\n                               checked={(preferredSource === SOURCE_FNDDS)}\r\n                               onChange={handleSourceButtonClick}\r\n                        />\r\n                        FNDDS (Survey)\r\n                    </label>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const makeHeaderDesktop = () => {\r\n        return (\r\n            <div className=\"d-flex flex-row header\">\r\n                <div style={{paddingTop: \"8px\", paddingLeft: \"8px\", minWidth: \"90px\", maxWidth: \"90px\"}}>\r\n                    <img src={logo} alt={\"Food Compare Logo\"}/>\r\n                </div>\r\n                <div className={\"d-flex flex-column w-100\"}>\r\n                    <div className=\"d-flex flex-row align-items-center justify-content-between\">\r\n                        <div style={{paddingTop: \"5px\"}}>\r\n                            <img src={text} alt={\"Food Compare Logo Text\"}/>\r\n                        </div>\r\n                        <div className=\"d-flex flex-row justify-content-end\" style={{paddingTop: \"6px\"}}>\r\n                            {renderLanguageButtons()}\r\n                            {!isMobileDevice() && renderSourceButtons()}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"d-flex flex-row\" style={{marginTop: \"3px\"}}>\r\n                        <div className=\"col-md-12 text-start\">\r\n                            {renderMenus()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const makeHeaderMobile = () => {\r\n        return (\r\n            <div className=\"d-flex flex-column header\" style={{overflowX: \"hidden\"}}>\r\n                <div className={\"d-flex flex-row justify-content-between\"}>\r\n                    <div className={\"d-flex flex-row\"}>\r\n                        <div style={{paddingTop: \"4px\", paddingLeft: \"4px\", minWidth: \"40px\", maxWidth: \"40px\"}}>\r\n                            <img src={logo} width={\"32px\"} alt={\"Food Compare Logo (mobile)\"}/>\r\n                        </div>\r\n                        <div style={{paddingTop: \"8px\"}}>\r\n                            <img src={text} width={\"67px\"} alt={\"Food Compare Logo text (mobile)\"}/>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"d-flex flex-row align-items-center justify-content-between\">\r\n                            <div className=\"d-flex flex-row justify-content-end\" style={{paddingTop: \"6px\"}}>\r\n                                {renderLanguageButtons()}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style={{marginTop: \"3px\"}}>\r\n                    {renderMenus()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return isMobileDevice() ? makeHeaderMobile() : makeHeaderDesktop()\r\n}","import ReactGA from \"react-ga4\";\r\n\r\nexport function callEvent(debugMode, action: string, category: string, label?: string, value?: number) {\r\n    if(debugMode) {\r\n        console.log(`[Event Call] ${action} | ${category} | label=${label}, value=${value}`)\r\n    } else {\r\n        ReactGA.event({\r\n            action: action,\r\n            category: category,\r\n            label: label,\r\n            value: value\r\n        })\r\n    }\r\n}","export const GA_CATEGORY_HOME = \"Home Menu\"\r\nexport const GA_CATEGORY_HEADER = \"Header\"\r\nexport const GA_CATEGORY_FOOD_ANALYZER = \"Food Analyzer\"\r\nexport const GA_CATEGORY_DIRECT_COMPARE = \"Direct Compare\"\r\nexport const GA_CATEGORY_RANKING = \"Ranking\"\r\nexport const GA_CATEGORY_USER_SETTINGS = \"User Settings Menu\"\r\nexport const GA_CATEGORY_CONTACT = \"Contact\"\r\n\r\nexport const GA_CATEGORY_DATAPANEL = \"Data Panel\"\r\n\r\n/*\r\n * In the Food Selector, a food item has been selected and added to the Food Analyzer.\r\n *  label: The name of the food class (English)\r\n *  value: The Food Item ID of the selected food item\r\n */\r\nexport const GA_ACTION_SELECT_FOOD_ITEM = \"FA: Single item selection\"\r\n\r\n/*\r\n * In the Direct Compare menu, a new comparison is made, meaning that one or two new food items have been selected.\r\n *  label: The names of the food classes to be compared (English name), separated by semicolon.\r\n *  value: The food item ID of the first selection (the second food item is disregarded).\r\n */\r\nexport const GA_ACTION_SELECTION_DIRECT_COMPARE = \"DC: New selection\"\r\n\r\n/*\r\n * In the Ranking menu, a new category has been selected.\r\n *  label: The ID of the selected category (0 = all).\r\n */\r\nexport const GA_ACTION_SELECTION_RANKING_CAT = \"RA: New category selected\"\r\n\r\n/*\r\n * In the Ranking menu, a new element for comparison has been selected.\r\n *  label: The name of the selected element, such as Vitamin B1, iron (English).\r\n */\r\nexport const GA_ACTION_SELECTION_RANKING_ELEMENT = \"RA: New element selected\"\r\n\r\n/*\r\n * In the Ranking menu, the configuration for displaying data was changed (radio button / checkbox).\r\n *  label: The names of the the configuration parameter (portion, show Dietary Req.)\r\n */\r\nexport const GA_ACTION_RANKING_CONFIG = \"RA: Change configuration\"\r\n\r\n/*\r\n * In the Home menu, one of the start buttons has been clicked (access a specific feature).\r\n *  label: The name of the feature to be clicked\r\n */\r\nexport const GA_ACTION_HOME_CLICK_START_BUTTON = \"HO: Click start button\"\r\n\r\n/*\r\n * In the Home menu, one of the menu buttons in the header has been clicked.\r\n *  label: The path (menu name)\r\n */\r\nexport const GA_ACTION_HOME_ACCESS_MENU = \"Header: Access menu\"\r\n\r\n/*\r\n * In the Header, the language has been changed (a language radio button was clicked).\r\n *  label: The name of the language that was clicked (German, English).\r\n */\r\nexport const GA_ACTION_HEADER_CONFIG_LANGUAGE = \"Header: Switch language\"\r\n\r\n/*\r\n * In the Header, the primary data source has been changed.\r\n *  label: The name of the source that was clicked (SR Legacy, FNDDS).\r\n */\r\nexport const GA_ACTION_HEADER_CONFIG_DATASOURCE = \"Header: Switch prim. data source\"\r\n\r\n/*\r\n * In the User menu, new data has been submitted.\r\n */\r\nexport const GA_ACTION_USER_SETTINGS = \"SE: Submit new user data\"\r\n\r\n/*\r\n * In the Contact menu, a sub-menu has been accessed.\r\n *  label: The name of the sub menu (such as Contact, Versions etc.)\r\n */\r\nexport const GA_ACTION_CONTACT_SUBMENU = \"CO: Access sub-menu\"\r\n\r\n/*\r\n * In the Data Panel, the page has been switched (a data page link button was clicked, e.g. Vitamins).\r\n *  label: The name of the data page (such as Vitamins)\r\n *  value: 1 if it happened in the Food Analyzer, 2 if it happened in the Direct Compare menu\r\n */\r\nexport const GA_ACTION_DATAPANEL_SWITCH_PAGE = \"Panel: Switch page\"\r\n\r\n/*\r\n * On the Base Data Page, some configuration has been changed (checkbox / radio button click)\r\n *  label: The name of the checkbox or radio button\r\n *  value: 1 if it happened in the Food Analyzer, 2 if it happened in the Direct Compare menu\r\n */\r\nexport const GA_ACTION_DATAPANEL_BASEDATA_CONFIG = \"Panel: Base Data Page Config Change\"\r\n\r\n/*\r\n * On the Vitamins/Minerals/Proteins Page, some configuration has been changed (checkbox / radio button click)\r\n *  label: The name of the checkbox or radio button\r\n *  value: 1 if it happened in the Food Analyzer, 2 if it happened in the Direct Compare menu\r\n */\r\nexport const GA_ACTION_DATAPANEL_VITAMINS_CONFIG = \"Panel: Vitamins Page Config Change\"\r\nexport const GA_ACTION_DATAPANEL_MINERALS_CONFIG = \"Panel: Minerals Page Config Change\"\r\nexport const GA_ACTION_DATAPANEL_PROTEINS_CONFIG = \"Panel: Proteins Page Config Change\"\r\nexport const GA_ACTION_DATAPANEL_LIPIDS_CONFIG = \"Panel: Lipids Page Config Change\"\r\nexport const GA_ACTION_DATAPANEL_CARBS_CONFIG = \"Panel: Carbs Page Config Change\"\r\n\r\n/*\r\n * In the Food Analyzer data panel a button in the header has been clicked (help, table/chart mode, close)\r\n *  label: The button / action triggered\r\n *  value: When the link to Food Data Central data is clicked (external reference), value is the selected food item ID\r\n */\r\nexport const GA_ACTION_DATAPANEL_GENERAL_ACTION = \"Panel: General action\"\r\n","import {useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {Carousel} from 'react-responsive-carousel';\r\nimport {applicationStrings} from \"../static/labels\";\r\n\r\nimport homeText1 from \"../static/hometext1.json\";\r\nimport homeText2 from \"../static/hometext2.json\";\r\nimport homeText3 from \"../static/hometext3.json\";\r\n\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport {Link} from 'react-router-dom';\r\nimport {LANGUAGE_DE, PATH_DIRECT_COMPARE, PATH_FOODDATA_PANEL, PATH_RANKING} from \"../config/Constants\";\r\nimport {FaAngleDoubleRight} from \"react-icons/fa\";\r\nimport {isMobileDevice} from \"../service/WindowDimension\";\r\nimport {callEvent} from \"../service/GA_EventService\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {GA_ACTION_HOME_CLICK_START_BUTTON, GA_CATEGORY_HOME} from \"../config/GA_Events\";\r\n\r\nconst images = require.context('../static/image/carousel', true);\r\n\r\ninterface HomeTextElement {\r\n    type: string\r\n    de: string\r\n    en: string\r\n}\r\n\r\nexport function Home() {\r\n    const {language} = useContext(LanguageContext)\r\n    const [displayedImage, setDisplayedImage] = useState<number>(0)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const imageChanged = (image) => {\r\n        setDisplayedImage(image)\r\n    }\r\n\r\n    const renderCarousel = () => {\r\n        const pic1 = images(`./Img-${language}-1.png`).default;\r\n        const pic2 = images(`./Img-${language}-2.png`).default;\r\n        const pic3 = images(`./Img-${language}-3.png`).default;\r\n        const pic4 = images(`./Img-${language}-4.png`).default;\r\n        const pic5 = images(`./Img-${language}-5.png`).default;\r\n        const pic6 = images(`./Img-${language}-6.png`).default;\r\n        const pic7 = images(`./Img-${language}-7.png`).default;\r\n\r\n        const captionAttribute = `home_carousel_${displayedImage}`;\r\n        const imageCaption = applicationStrings[captionAttribute][language];\r\n\r\n        return (\r\n            <div style={{paddingBottom: \"40px\"}}>\r\n                <Carousel showArrows={true}\r\n                          infiniteLoop={true} autoPlay={true}\r\n                          interval={6000}\r\n                          transitionTime={800}\r\n                          selectedItem={displayedImage}\r\n                          showThumbs={false}\r\n                          showStatus={false}\r\n                          onChange={imageChanged}>\r\n                    <div>\r\n                        <img src={pic1} alt={\"Carousel 1\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic2} alt={\"Carousel 2\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic3} alt={\"Carousel 3\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic4} alt={\"Carousel 4\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic5} alt={\"Carousel 5\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic6} alt={\"Carousel 6\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic7} alt={\"Carousel 7\"}/>\r\n                    </div>\r\n                </Carousel>\r\n                <div style={{textAlign: \"center\", fontStyle: \"oblique\"}}>\r\n                    {imageCaption}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // const buttonColors = [\"#f9e79f\", \"#d5f5e3\", \"#fadbd8\", \"#aed6f1\"];\r\n    const buttonBgColor = \"#2952a3\"\r\n    const buttonTextColor = \"#FFFFFF\"\r\n\r\n    const onStartButtonClick = (id: number) => {\r\n        let label = \"\";\r\n        switch (id) {\r\n            case 1:\r\n                label = \"Food Analyzer (Default Mode)\"\r\n                break;\r\n            case 2:\r\n                label = \"Food Analyzer (Aggregated)\"\r\n                break;\r\n            case 3:\r\n                label = \"Direct Compare\"\r\n                break;\r\n            case 4:\r\n                label = \"Ranking\"\r\n                break;\r\n        }\r\n\r\n        callEvent(applicationContext?.debug, GA_ACTION_HOME_CLICK_START_BUTTON, GA_CATEGORY_HOME, label)\r\n    }\r\n\r\n    const renderStartButtons = () => {\r\n        const buttonClass = isMobileDevice() ? \"text-center d-flex flex-row\" : \"text-center\"\r\n\r\n        return (\r\n            <div style={{paddingTop: \"16px\"}}>\r\n                <b>{applicationStrings.label_getStarted[language]}</b>\r\n                <div className={buttonClass}>\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_FOODDATA_PANEL + \"?add=1\"} onClick={() => onStartButtonClick(1)}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: buttonBgColor, color: buttonTextColor}}>\r\n                                {applicationStrings.button_getstarted_1[language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                    {!isMobileDevice() &&\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_FOODDATA_PANEL + \"?composite=1\"} onClick={() => onStartButtonClick(2)}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: buttonBgColor, color: buttonTextColor}}>\r\n                                {applicationStrings.button_getstarted_2[language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                    }\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_DIRECT_COMPARE} onClick={() => onStartButtonClick(3)}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: buttonBgColor, color: buttonTextColor}}>\r\n                                {applicationStrings.button_getstarted_3[language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_RANKING} onClick={() => onStartButtonClick(4)}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: buttonBgColor, color: buttonTextColor}}>\r\n                                {applicationStrings.button_getstarted_4[language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderHomeText = (textElements: HomeTextElement[]): any => {\r\n        return textElements.map((textElement, index) => renderTextElement(textElement, index))\r\n    }\r\n\r\n    const renderTextElement = (textElement: HomeTextElement, index: number): JSX.Element => {\r\n        const text = language === LANGUAGE_DE ? textElement.de : textElement.en\r\n\r\n        switch (textElement.type) {\r\n            case \"paragraph\":\r\n                return <p key={`homeitem ${index}`}>{text}</p>\r\n            case \"subheading\":\r\n                return (\r\n                    <div key={`homeitem ${index}`}>\r\n                        <br/>\r\n                        <h4>\r\n                            {text}\r\n                        </h4>\r\n                        <hr/>\r\n                    </div>\r\n                )\r\n            case \"paragraph-before-itemization\":\r\n                return <p key={`homeitem ${index}`}><b>{text}</b></p>\r\n            case \"fancy-item\":\r\n                return (\r\n                    <div key={`homeitem ${index}`}>\r\n                        {!isMobileDevice()\r\n                            ? <span style={{paddingLeft: \"10px\", paddingRight: \"10px\"}}>\r\n                                    <FaAngleDoubleRight/>\r\n                                </span>\r\n                            : <span>\r\n                                    <FaAngleDoubleRight/>\r\n                            </span>\r\n                        }\r\n                        {text}\r\n                    </div>\r\n                )\r\n            default:\r\n                return <p>{text}</p>\r\n        }\r\n    }\r\n\r\n\r\n    const renderMobile = () => {\r\n        return (\r\n            <div className=\"media home app\" style={{margin: \"0 auto\"}}>\r\n                <div>\r\n                    <div>\r\n                        {renderHomeText(homeText1)}\r\n                        <div style={{paddingTop: \"20px\", paddingBottom: \"60px\"}}>\r\n                            {renderStartButtons()}\r\n                        </div>\r\n                        {renderHomeText(homeText2)}\r\n                    </div>\r\n                    <hr/>\r\n                    <div style={{paddingTop: \"30px\"}}>\r\n                        <h3>{applicationStrings.home_foodcompare_overview[language]}</h3>\r\n                        <div className=\"card-header\"\r\n                             style={{maxWidth: \"1000px\", paddingBottom: \"20px\", marginBottom: \"50px\"}}>\r\n                            {renderHomeText(homeText3)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderDesktop = () => {\r\n        return (\r\n            <div>\r\n                <div className=\"media home app\" style={{margin: \"0 auto\"}}>\r\n                    <div className={\"container-fluid\"}>\r\n                        <div className=\"row\">\r\n                            <div className={\"col-5\"}>\r\n                                {renderHomeText(homeText1)}\r\n                                <div style={{paddingTop: \"20px\", paddingBottom: \"60px\"}}>\r\n                                    {renderStartButtons()}\r\n                                </div>\r\n                                {renderHomeText(homeText2)}\r\n                            </div>\r\n                            <div className={\"col-7\"} style={{paddingLeft: \"45px\"}}>\r\n                                {renderCarousel()}\r\n                            </div>\r\n                        </div>\r\n                        <hr/>\r\n                        <div style={{paddingTop: \"30px\"}}>\r\n                            <h3>{applicationStrings.home_foodcompare_overview[language]}</h3>\r\n                            <div className=\"card-header\"\r\n                                 style={{maxWidth: \"1000px\", paddingBottom: \"20px\", marginBottom: \"50px\"}}>\r\n                                {renderHomeText(homeText3)}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    return <div>\r\n        {isMobileDevice()\r\n            ? <div>{renderMobile()}</div>\r\n            : <div>{renderDesktop()}</div>\r\n        }\r\n    </div>\r\n\r\n\r\n}","import ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {getReactSelectOptionsList} from \"./NameTypeService\";\r\n\r\nexport function getCategorySelectList(categories: Array<NameType>, language: string): Array<ReactSelectOption> {\r\n    return getReactSelectOptionsList(categories, language)\r\n}\r\n\r\n","import FoodItem from \"../../types/nutrientdata/FoodItem\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {ReactSelectFoodItemOption} from \"../../types/ReactSelectOption\";\r\nimport getName, {removeAuxiliaryInformationFromFoodName} from \"../LanguageService\";\r\n\r\n\r\n/**\r\n * Auxiliary method to get the food item from a given food list or null.\r\n * @param foodItemId Food Item Id\r\n * @param foodItems The list of food items\r\n */\r\nexport function getFoodItem(foodItemId: number, foodItems: Array<FoodItem>): FoodItem | null {\r\n    const index = foodItems.findIndex(foodItem => foodItem.id === foodItemId)\r\n    if(index >= 0) {\r\n        return foodItems[index]\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\n/**\r\n * Makes the select list (component) for food items.\r\n * @param foodItems The list of all food items.\r\n * @param foodClass The selected food class.\r\n * @param foodNames The list of all food names.\r\n * @param conditions The list of all conditions.\r\n * @param language The given language.\r\n */\r\nexport function getFoodItemsSelectList(foodItems: Array<FoodItem>, foodClass: number, foodNames: Array<NameType>,\r\n                                       conditions: Array<NameType>, language: string): Array<ReactSelectFoodItemOption> {\r\n    const filteredFoodItems = getFoodItemsOfFoodclass(foodItems, foodClass)\r\n    const reactSelectOptions: Array<ReactSelectFoodItemOption> = []\r\n\r\n    if(filteredFoodItems && filteredFoodItems.length > 0) {\r\n        filteredFoodItems.forEach(foodItem => {\r\n            let foodName = getFoodItemName(foodItem, foodNames, language)\r\n            const condition = conditions.find(condition => condition.id === foodItem.conditionId)\r\n            const conditionName = condition ? getName(condition, language) : null\r\n\r\n            if(conditionName) {\r\n                foodName = `${foodName} (${conditionName})`\r\n            }\r\n\r\n            reactSelectOptions.push({\r\n                value: foodItem,\r\n                label: foodName ?? ''\r\n            })\r\n        })\r\n    }\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n/**\r\n * Central method to retrieve the food name of an food item in a given language.\r\n * @param foodItem The food item object.\r\n * @param foodNames The list of food items.\r\n * @param language The given language.\r\n */\r\nexport function getFoodItemName(foodItem: FoodItem, foodNames: Array<NameType>, language: string, verbose = false): string | null {\r\n    const nameId = foodItem.nameId!!\r\n    if(nameId > foodNames.length) {\r\n        return null\r\n    }\r\n    const nameType = foodNames[nameId-1]\r\n    return getName(nameType, language, verbose)\r\n}\r\n\r\n\r\n/**\r\n * Returns all food items that belong to a food class.\r\n * @param foodItems The list of all food items.\r\n * @param foodClassId The ID of the selected food class.\r\n */\r\nexport function getFoodItemsOfFoodclass(foodItems: Array<FoodItem>, foodClassId: number): Array<FoodItem> {\r\n    return foodItems.filter(foodItem => {\r\n        if(foodItem.foodClass === foodClassId) {\r\n            return foodItem\r\n        } else {\r\n            return null\r\n        }\r\n    })\r\n}","import {ReactSelectFoodClassOption} from \"../../types/ReactSelectOption\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport getName from \"../LanguageService\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {getFoodItemName, getFoodItemsOfFoodclass} from \"./FoodItemsService\";\r\nimport FoodDataCorpus from \"../../types/nutrientdata/FoodDataCorpus\";\r\n\r\nexport const foodClassLabelSeparator = \"||\"\r\n\r\nexport function getFoodClassSelectList(foodDataCorpus: FoodDataCorpus, category: number,\r\n                                       foodNames: Array<NameType>, language: string): ReactSelectFoodClassOption[] {\r\n    const {foodClasses, foodItems} = foodDataCorpus\r\n    const filteredFoodClasses = getFoodClassesOfCategory(foodClasses, category)\r\n\r\n    if (!filteredFoodClasses || filteredFoodClasses.length === 0) {\r\n        return []\r\n    }\r\n\r\n    const reactSelectOptions: Array<ReactSelectFoodClassOption> = []\r\n    filteredFoodClasses.forEach(foodClass => {\r\n        const nameId = foodClass.nameKey\r\n        if (nameId > foodNames.length) {\r\n            return\r\n        }\r\n        const nameType = foodNames[nameId - 1]\r\n        const foodName = getName(nameType, language)\r\n\r\n        /*\r\n         * In order to find food items in the select menu, which do not match the food class name, the food class\r\n         * label will be extended by the food item names of their class. A special formatting function is used in\r\n         * the list to convert the name back to the original food class name.\r\n         *\r\n         * Syntax: <food class name> || <name of food items (deduplicated)>\r\n         */\r\n\r\n        const foodItemsOfFoodclass = getFoodItemsOfFoodclass(foodItems, foodClass.id)\r\n        const foodItemNames: string[] = foodItemsOfFoodclass.map(foodItem => getFoodItemName(foodItem, foodNames, language)).filter(name => name !== null) as string[]\r\n        const label = foodName + foodClassLabelSeparator + foodItemNames.filter((element, index) => {\r\n            return foodItemNames.indexOf(element) === index;\r\n        }).join()   // Remove duplicates and then add all remaining food item names to the food class label\r\n\r\n        reactSelectOptions.push({\r\n            value: foodClass,\r\n            label: label\r\n        })\r\n    })\r\n\r\n    reactSelectOptions.sort((obj1, obj2) => obj1.label.localeCompare(obj2.label))\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nfunction getFoodClassesOfCategory(foodClasses: Array<FoodClass>, category: number): Array<FoodClass> {\r\n    return foodClasses.filter(foodClass => {\r\n        if (category === 0) {\r\n            return foodClass\r\n        } else if (foodClass.category === category) {\r\n            return foodClass\r\n        } else {\r\n            return null\r\n        }\r\n    })\r\n}","import NameType from \"../../types/nutrientdata/NameType\";\r\nimport {ReactSelectPortionOption} from \"../../types/ReactSelectOption\";\r\nimport FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport getName from \"../LanguageService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {PORTION_KEY_100, PORTION_KEY_INDIVIDUAL} from \"../../config/Constants\";\r\n\r\n\r\nexport function getPortionReactSelectList(portionData: Array<PortionData>, portionTypes: Array<NameType>, language: string): Array<ReactSelectPortionOption> {\r\n    const reactSelectOptions: Array<ReactSelectPortionOption> = []\r\n    portionData.forEach(portionElement => {\r\n        const portionTypeIndex = portionTypes.findIndex(portionType => {\r\n             return portionType.id === portionElement.portionType\r\n        })\r\n\r\n        const portionType = portionTypes[portionTypeIndex]\r\n        const portionName = getName(portionType, language)\r\n        reactSelectOptions.push({\r\n            value: portionElement,\r\n            label: portionName\r\n        })\r\n    })\r\n\r\n    reactSelectOptions.push({\r\n        value: {amount: 100, portionType: PORTION_KEY_100},\r\n        label: applicationStrings.portion_100g[language]\r\n    })\r\n\r\n    reactSelectOptions.push({\r\n        value: {amount: 0, portionType: PORTION_KEY_INDIVIDUAL},\r\n        label: applicationStrings.portion_individual[language]\r\n    })\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getDefaultPortionData(foodItem: FoodItem, portionDataList: Array<ReactSelectPortionOption>): ReactSelectPortionOption {\r\n    let defaultPortionIndex = portionDataList.findIndex(portionData => {\r\n        return portionData.value.portionType === foodItem.defaultPortionId\r\n    })\r\n\r\n    if (defaultPortionIndex < 0 || defaultPortionIndex >= portionDataList.length) {\r\n        defaultPortionIndex = 0;\r\n    }\r\n\r\n    return portionDataList[defaultPortionIndex]\r\n}","import FoodItem, {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\n\r\nexport function getSourceName(sourceId: number) {\r\n    switch (sourceId) {\r\n        case 0:\r\n            return \"SR Legacy\"\r\n        case 1:\r\n            return \"FNDDS\"\r\n        default:\r\n            return \"unknown\"\r\n    }\r\n}\r\n\r\nexport function getNutrientData(selectedFoodItem: SelectedFoodItem): NutrientData {\r\n    return getNutrientDataForFoodItem(selectedFoodItem.foodItem, selectedFoodItem.selectedSource,\r\n        selectedFoodItem.supplementData, selectedFoodItem.combineData)\r\n}\r\n\r\nexport function getNutrientDataForFoodItem(foodItem: FoodItem, sourceToUse?: number, supplementData?: boolean,\r\n                                           combineData?: boolean): NutrientData {\r\n    if (sourceToUse === null || sourceToUse === undefined || foodItem.nutrientDataList.length === 1) {\r\n        return foodItem.nutrientDataList[0]\r\n    } else {\r\n        const nutrientData = foodItem.nutrientDataList.find(nutrientDataObject => nutrientDataObject.source.id === sourceToUse)\r\n        if (nutrientData) {\r\n            if(supplementData || combineData) {\r\n                const complement = foodItem.nutrientDataList.find(nutrientDataObject => nutrientDataObject.source.id !== sourceToUse)\r\n                if(complement) {\r\n                    if(supplementData && !combineData) {\r\n                        return supplementNutrientData(nutrientData, complement)\r\n                    }\r\n                    if(combineData) {\r\n                        return combineNutrientData(nutrientData, complement)\r\n                    }\r\n                }\r\n            }\r\n            return nutrientData\r\n        } else {\r\n            return foodItem.nutrientDataList[0]\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function supplementNutrientData(selectedNutrientData: NutrientData, complementeNutrientData: NutrientData): NutrientData {\r\n    const supplementedBaseData = supplementCategory(selectedNutrientData.baseData, complementeNutrientData.baseData)\r\n    const supplementedVitaminData = supplementCategory(selectedNutrientData.vitaminData, complementeNutrientData.vitaminData)\r\n    const supplementedMineralData = supplementCategory(selectedNutrientData.mineralData, complementeNutrientData.mineralData)\r\n    const supplementedCarbsData = supplementCategory(selectedNutrientData.carbohydrateData, complementeNutrientData.carbohydrateData)\r\n    const supplementedProteinData = supplementCategory(selectedNutrientData.proteinData, complementeNutrientData.proteinData)\r\n\r\n    const supplementedOmegaData = supplementCategory(selectedNutrientData.lipidData.omegaData, complementeNutrientData.lipidData.omegaData)\r\n    let supplementedLipidData = supplementCategory(selectedNutrientData.lipidData, complementeNutrientData.lipidData)\r\n    supplementedLipidData.omegaData = supplementedOmegaData\r\n\r\n    return {\r\n        source: selectedNutrientData.source,\r\n        sourceItemId: selectedNutrientData.sourceItemId,\r\n        baseData: supplementedBaseData,\r\n        vitaminData: supplementedVitaminData,\r\n        mineralData: supplementedMineralData,\r\n        carbohydrateData: supplementedCarbsData,\r\n        proteinData: supplementedProteinData,\r\n        lipidData: supplementedLipidData\r\n    }\r\n}\r\n\r\n\r\nfunction supplementCategory(nutrientCategory1: any, nutrientCategory2: any): any {\r\n    if(!nutrientCategory2) {\r\n        return nutrientCategory1\r\n    }\r\n\r\n    const keysComplement = Object.keys(nutrientCategory2)\r\n    keysComplement.forEach(key => {\r\n        if(nutrientCategory1[key] === null) {\r\n            const objectHasChildren = nutrientCategory2[key] && Object.keys(nutrientCategory2[key]).length > 0\r\n            // Add value from source 2 to source 1 if it is not a sub-object (like Omega object on Lipids object):\r\n            if(nutrientCategory2[key] !== null && !objectHasChildren) {\r\n                nutrientCategory1[key] = nutrientCategory2[key]\r\n            }\r\n        }\r\n    })\r\n\r\n    return nutrientCategory1\r\n}\r\n\r\n\r\nexport function combineNutrientData(selectedNutrientData: NutrientData, complementeNutrientData: NutrientData): NutrientData {\r\n    const combinedBaseData = combineCategory(selectedNutrientData.baseData, complementeNutrientData.baseData)\r\n    const combinedVitaminData = combineCategory(selectedNutrientData.vitaminData, complementeNutrientData.vitaminData)\r\n    const combinedMineralData = combineCategory(selectedNutrientData.mineralData, complementeNutrientData.mineralData)\r\n    const combinedCarbsData = combineCategory(selectedNutrientData.carbohydrateData, complementeNutrientData.carbohydrateData)\r\n    const combinedProteinData = combineCategory(selectedNutrientData.proteinData, complementeNutrientData.proteinData)\r\n\r\n    const combinedOmegaData = combineCategory(selectedNutrientData.lipidData.omegaData, complementeNutrientData.lipidData.omegaData)\r\n    let combinedLipidData = combineCategory(selectedNutrientData.lipidData, complementeNutrientData.lipidData)\r\n    combinedLipidData.omegaData = combinedOmegaData\r\n\r\n    return {\r\n        source: selectedNutrientData.source,\r\n        sourceItemId: selectedNutrientData.sourceItemId,\r\n        baseData: combinedBaseData,\r\n        vitaminData: combinedVitaminData,\r\n        mineralData: combinedMineralData,\r\n        carbohydrateData: combinedCarbsData,\r\n        proteinData: combinedProteinData,\r\n        lipidData: combinedLipidData\r\n    }\r\n}\r\n\r\n\r\nfunction combineCategory(nutrientCategory1: any, nutrientCategory2: any): any {\r\n    if(!nutrientCategory1 && nutrientCategory2) {\r\n        return nutrientCategory2\r\n    } else if(nutrientCategory1 && !nutrientCategory2) {\r\n        return nutrientCategory1\r\n    } else if(!nutrientCategory1 && !nutrientCategory2) {\r\n        return null\r\n    }\r\n\r\n    const keys1: Array<string> = Object.keys(nutrientCategory1)\r\n    const keys2: Array<string> = Object.keys(nutrientCategory2)\r\n\r\n    // @ts-ignore\r\n    const allKeys = [...new Set<string>([...keys1, ...keys2])]\r\n    let finalObject = {}\r\n\r\n    allKeys.forEach(key => {\r\n        const value1 = nutrientCategory1[key] !== null\r\n            ? nutrientCategory1[key]\r\n            : null\r\n\r\n        const value2 = nutrientCategory2[key] !== null\r\n            ? nutrientCategory2[key]\r\n            : null\r\n\r\n        let finalValue\r\n\r\n        if(value1 !== null && value2 === null) {\r\n            finalValue = value1\r\n        } else if(value1 === null && value2 !== null) {\r\n            finalValue = value2\r\n        } else if(value1 === null && value2 === null) {\r\n            finalValue = null\r\n        }else {\r\n            finalValue = (value1 + value2) * 0.5\r\n        }\r\n\r\n        finalObject[key] = finalValue\r\n    })\r\n\r\n    return finalObject\r\n}\r\n","const fontsize = \"calc(0.5rem + 0.3vw)\"\r\nconst selectHeight = \"calc(0.5rem + 0.3vw)*2.2\"\r\n\r\nexport const customSelectStyles = {\r\n    control: base => ({\r\n        ...base,\r\n        height: selectHeight,\r\n        minHeight: selectHeight,\r\n        fontSize: fontsize,\r\n    }),\r\n    valueContainer: (provided, state) => ({\r\n        ...provided,\r\n        height: selectHeight,\r\n        minHeight: selectHeight,\r\n        padding: '0 2px',\r\n        fontsize: fontsize\r\n    }),\r\n    dropdownIndicator: (styles) => ({\r\n        ...styles,\r\n        paddingTop: \"2px\",\r\n        paddingBottom: \"2px\",\r\n    }),\r\n    clearIndicator: (styles) => ({\r\n        ...styles,\r\n        height: selectHeight,\r\n        minHeight: selectHeight,\r\n        paddingTop: \"2px\",\r\n        paddingBottom: \"2px\",\r\n    }),\r\n};\r\n\r\n\r\nexport function getCustomSelectStyle(backgroundColor: string): any {\r\n    return {\r\n        ...customSelectStyles,\r\n        control: base => ({\r\n            ...base,\r\n            height: selectHeight,\r\n            minHeight: selectHeight,\r\n            fontSize: fontsize,\r\n            backgroundColor: backgroundColor\r\n        }),\r\n    }\r\n}\r\n\r\n\r\nexport const correspondingSelectElementStyle = {\r\n    height: selectHeight,\r\n    fontSize: fontsize\r\n}\r\n\r\nexport const COLOR_SELECTOR_CATEGORY = \" #fdebd0\"\r\nexport const COLOR_SELECTOR_FOODCLASS = \" #85c1e9\"\r\nexport const COLOR_SELECTOR_FOODITEM = \"#ebf5fb\"","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport Select from 'react-select';\r\nimport ReactSelectOption, {\r\n    ReactSelectFoodClassOption,\r\n    ReactSelectFoodItemOption,\r\n    ReactSelectPortionOption\r\n} from \"../../types/ReactSelectOption\";\r\nimport {getCategorySelectList} from \"../../service/nutrientdata/CategoryService\";\r\nimport {foodClassLabelSeparator, getFoodClassSelectList} from \"../../service/nutrientdata/FoodClassService\";\r\nimport {getFoodItemsSelectList} from \"../../service/nutrientdata/FoodItemsService\";\r\nimport FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {getDefaultPortionData, getPortionReactSelectList} from \"../../service/nutrientdata/PortionDataService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {isMobileDevice, isSmallScreen, useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {SOURCE_FNDDS, SOURCE_SRLEGACY} from \"../../config/Constants\";\r\nimport {getSourceName} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {\r\n    COLOR_SELECTOR_CATEGORY,\r\n    COLOR_SELECTOR_FOODCLASS, COLOR_SELECTOR_FOODITEM,\r\n    correspondingSelectElementStyle,\r\n    customSelectStyles,\r\n    getCustomSelectStyle\r\n} from \"../../config/UI_Config\";\r\n\r\nexport interface FoodSelectorProps {\r\n    updateSelectedFoodItem: (selectedFoodItem: SelectedFoodItem) => void\r\n    updateFoodSelectorConfig: (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => void\r\n    updateCompositeTitle?: (compositeTitle: string) => void\r\n    compositeSelector: boolean\r\n    directCompareSelector?: boolean\r\n    initialFoodClassToSet?: number\r\n    selectedFoodItem?: SelectedFoodItem | null\r\n    defaultFoodClass?: number\r\n    directCompareSelectorNumber?: number\r\n}\r\n\r\n/**\r\n * Component to select a food element. The component can optionally show the category list and can be initialized\r\n * with an already existing selected food item (in case of component re-rendering).\r\n */\r\nexport default function FoodSelector(props: FoodSelectorProps): JSX.Element {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const initialCategory = applicationContext?.applicationData.foodSelector.selectedCategory\r\n        ? applicationContext.applicationData.foodSelector.selectedCategory\r\n        : null\r\n\r\n    const foodSelectorConfig = applicationContext?.applicationData.foodSelector\r\n    const directCompareSelectorConfig1 = applicationContext?.applicationData.directCompareDataPanel.foodSelector1\r\n    const directCompareSelectorConfig2 = applicationContext?.applicationData.directCompareDataPanel.foodSelector2\r\n\r\n    const initialSupplementValue = props.directCompareSelectorNumber === undefined\r\n        ? foodSelectorConfig?.sourceSupplement || false\r\n        : props.directCompareSelectorNumber === 1\r\n            ? directCompareSelectorConfig1?.sourceSupplement || false\r\n            : directCompareSelectorConfig2?.sourceSupplement || false\r\n\r\n    const initialCombineValue = props.directCompareSelectorNumber === undefined\r\n        ? foodSelectorConfig?.sourceCombine || false\r\n        : props.directCompareSelectorNumber === 1\r\n            ? directCompareSelectorConfig1?.sourceCombine || false\r\n            : directCompareSelectorConfig2?.sourceCombine || false\r\n\r\n    const [selectedCategory, setSelectedCategory] = useState<ReactSelectOption | null>(initialCategory)\r\n    const [selectdFoodClass, setSelectedFoodClass] = useState<ReactSelectFoodClassOption | null>(null)\r\n    const [selectedFoodItem, setSelectedFoodItem] = useState<ReactSelectFoodItemOption | null>(null)\r\n    const [selectedPortion, setSelectedPortion] = useState<ReactSelectPortionOption | null>(null)\r\n    const [portionAmount, setPortionAmount] = useState<number>(0)\r\n    const [title, setTitle] = useState<string>(applicationStrings.input_compositelist_title[language])\r\n    const [selectedSource, setSelectedSource] = useState<ReactSelectOption | null>(null)\r\n    const [supplementData, setSupplementData] = useState<boolean>(initialSupplementValue)\r\n    const [combineData, setCombineData] = useState<boolean>(initialCombineValue)\r\n    const [initialized, setInitialized] = useState<boolean>(false)\r\n\r\n    const [categoriesList, setCategoriesList] = useState<Array<ReactSelectOption>>([])\r\n    const [foodClassesList, setFoodClassesList] = useState<Array<ReactSelectFoodClassOption>>([])\r\n    const [foodClassesTypeaheadList, setFoodClassesTypeaheadList] = useState<Array<ReactSelectFoodClassOption>>([])\r\n\r\n    const [foodItemsList, setFoodItemsList] = useState<Array<ReactSelectFoodItemOption>>([])\r\n    const [portionsList, setPortionsList] = useState<Array<ReactSelectPortionOption>>([])\r\n    const [sourcesList, setSourcesList] = useState<Array<ReactSelectOption>>([])\r\n\r\n    const windowSize = useWindowDimension()\r\n\r\n    const getInitialFoodClassNumber = (foodClassOptions: ReactSelectFoodClassOption[]): number => {\r\n        if (props.initialFoodClassToSet !== undefined && props.initialFoodClassToSet !== null) {\r\n            return props.initialFoodClassToSet\r\n        }\r\n\r\n        if (props.defaultFoodClass !== undefined) {\r\n            const index = foodClassOptions.findIndex(foodClassOption => foodClassOption.value.id === props.defaultFoodClass)\r\n            if (index !== -1) {\r\n                return index\r\n            }\r\n        }\r\n\r\n        return 0   // Use the first food class in the list if no other parameter indicates the food class to select\r\n    }\r\n\r\n    useEffect(() => {\r\n            if (applicationContext && applicationContext.foodDataCorpus && categoriesList.length === 0) {\r\n                const foodDataCorpus = applicationContext.foodDataCorpus\r\n\r\n                if (foodDataCorpus.categories) {\r\n                    const categoryItems = getCategorySelectList(foodDataCorpus.categories, language)\r\n                    setCategoriesList(categoryItems)\r\n                }\r\n\r\n                if (foodDataCorpus.foodClasses) {\r\n                    const category = selectedCategory ? selectedCategory.value : 0\r\n                    const foodClasses = getFoodClassSelectList(foodDataCorpus, category, applicationContext.foodDataCorpus.foodNames, language)\r\n                    setFoodClassesList(foodClasses)\r\n                    setFoodClassesTypeaheadList(foodClasses)  // Initially, the typeahead-list is identical with the food classes list\r\n\r\n                    const initialFoodClass = getInitialFoodClassNumber(foodClasses)\r\n                    const foodClass = foodClasses[initialFoodClass]\r\n                    setSelectedFoodClass(foodClass)\r\n\r\n                    if (foodDataCorpus.foodItems && foodClasses) {\r\n                        const foodItemsOfFoodClass = getFoodItemsSelectList(foodDataCorpus.foodItems, foodClasses[initialFoodClass].value.id, foodDataCorpus.foodNames,\r\n                            foodDataCorpus.conditions, language)\r\n\r\n                        setFoodItemsList(foodItemsOfFoodClass)\r\n                        setSelectedFoodItem(foodItemsOfFoodClass[0])\r\n                        const foodItem = foodItemsOfFoodClass[0].value\r\n\r\n                        if (foodItem && foodItem.portionData) {\r\n                            const portionDataList = getPortionReactSelectList(foodItem.portionData, foodDataCorpus.portionTypes, language)\r\n                            setPortionsList(portionDataList)\r\n\r\n                            updateSourcesList(foodItem)\r\n\r\n                            const defaultPortion = getDefaultPortionData(foodItem, portionDataList)\r\n                            setSelectedPortion(defaultPortion)\r\n                            setPortionAmount(defaultPortion.value.amount)\r\n\r\n                            if (!props.selectedFoodItem) {\r\n                                makeSelectedFoodItemObject(foodItem, foodClass.value, defaultPortion.value)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                // Update data for outer component whenever render is triggered\r\n                if (selectedFoodItem && selectdFoodClass && selectedPortion) {\r\n                    const newFoodItem = makeSelectedFoodItemObject(selectedFoodItem.value, selectdFoodClass.value, selectedPortion.value)\r\n                    if (newFoodItem) {\r\n                        props.updateSelectedFoodItem(newFoodItem)\r\n                        props.updateFoodSelectorConfig(selectedCategory, supplementData, combineData)\r\n                    }\r\n                } else if (props.selectedFoodItem) {\r\n                    const {foodItem, foodClass, portion} = props.selectedFoodItem\r\n                    makeSelectedFoodItemObject(foodItem, foodClass, portion)\r\n                }\r\n            }\r\n\r\n        }, [selectedFoodItem,\r\n            selectedPortion,\r\n            selectdFoodClass,\r\n            selectedCategory,\r\n            selectedSource,\r\n            portionAmount,\r\n            title,\r\n            supplementData,\r\n            combineData\r\n        ]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleCategoryChange = (category: ReactSelectOption) => {\r\n        setSelectedCategory(category)\r\n        updateFoodClasses(category)\r\n    }\r\n\r\n    const handleFoodClassChange = (foodClass: ReactSelectFoodClassOption) => {\r\n        setSelectedFoodClass(foodClass)\r\n        updateFoodItem(foodClass)\r\n    }\r\n\r\n    const handleFoodItemChange = (foodItem: ReactSelectFoodItemOption) => {\r\n        setSelectedFoodItem(foodItem)\r\n        updatePortionsList(foodItem.value)\r\n        updateSourcesList(foodItem.value)\r\n    }\r\n\r\n    const handlePortionChange = (portion: ReactSelectPortionOption) => {\r\n        setSelectedPortion(portion)\r\n        setPortionAmount(portion.value.amount)\r\n    }\r\n\r\n    const handleTitleChange = (event) => {\r\n        setTitle((event.target.value))\r\n        if(props.updateCompositeTitle !== undefined) {\r\n            props.updateCompositeTitle(event.target.value)\r\n        }\r\n    }\r\n\r\n    const handleSourceChange = (source: ReactSelectOption) => {\r\n        setSelectedSource(source)\r\n    }\r\n\r\n    const handlePortionAmountChange = (e) => {\r\n        if (!e.target.value) {\r\n            setPortionAmount(0)\r\n            return\r\n        }\r\n\r\n        const amount = parseInt(e.target.value)\r\n\r\n        if (!isNaN(amount)) {\r\n            setPortionAmount(amount)\r\n        }\r\n    }\r\n\r\n    const updateFoodClasses = (category: ReactSelectOption) => {\r\n        const foodDataCorpus = applicationContext.foodDataCorpus\r\n\r\n        if (foodDataCorpus) {\r\n            const foodClassItems = getFoodClassSelectList(foodDataCorpus, category.value, applicationContext.foodDataCorpus.foodNames, language)\r\n            setFoodClassesList(foodClassItems)\r\n            setFoodClassesTypeaheadList(foodClassItems)\r\n            setSelectedFoodClass(foodClassItems[0])\r\n            updateFoodItem(foodClassItems[0])\r\n        }\r\n    }\r\n\r\n    const updateFoodItem = (foodClass: ReactSelectFoodClassOption) => {\r\n        const {foodItems, foodNames, conditions} = applicationContext.foodDataCorpus\r\n\r\n        if (foodItems) {\r\n            const foodClassItems = getFoodItemsSelectList(foodItems, foodClass.value.id, foodNames, conditions, language)\r\n            setFoodItemsList(foodClassItems)\r\n            setSelectedFoodItem(foodClassItems[0])\r\n\r\n            const foodItem = foodClassItems[0].value\r\n            if (foodItem) {\r\n                updatePortionsList(foodItem)\r\n                updateSourcesList(foodItem)\r\n            }\r\n        }\r\n    }\r\n\r\n    const updatePortionsList = (foodItem: FoodItem) => {\r\n        const portionDataList = getPortionReactSelectList(foodItem.portionData!!, applicationContext.foodDataCorpus.portionTypes, language)\r\n        setPortionsList(portionDataList)\r\n        const defaultPortion = getDefaultPortionData(foodItem, portionDataList)\r\n        setSelectedPortion(defaultPortion)\r\n        setPortionAmount(defaultPortion.value.amount)\r\n    }\r\n\r\n\r\n    const updateSourcesList = (foodItem: FoodItem) => {\r\n        const sourceNames = getSourceNames(foodItem)\r\n        setSourcesList(sourceNames)\r\n\r\n        if (sourceNames.length === 1) {\r\n            setSelectedSource(sourceNames[0])\r\n        } else {\r\n            const preferredSource = applicationContext.applicationData.preferredSource\r\n            const matchingSource = sourceNames.find(sourceObject => {\r\n                if (sourceObject.value === 0 && preferredSource === SOURCE_SRLEGACY) {\r\n                    return sourceObject\r\n                } else if (sourceObject.value === 1 && preferredSource === SOURCE_FNDDS) {\r\n                    return sourceObject\r\n                } else {\r\n                    return null\r\n                }\r\n            })\r\n            if (matchingSource) {\r\n                setSelectedSource(matchingSource)\r\n            } else {\r\n                setSelectedSource(sourceNames[0])\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const getSourceNames = (foodItem: FoodItem) => {\r\n        return foodItem.nutrientDataList.map(nutrientDataObject => {\r\n            const SourceName = getSourceName(nutrientDataObject.source.id)\r\n            return {label: SourceName, value: nutrientDataObject.source.id}\r\n        })\r\n    }\r\n\r\n\r\n    const makeSelectedFoodItemObject = (foodItem: FoodItem | undefined, foodClass: FoodClass | undefined, portion: PortionData | undefined): SelectedFoodItem | null => {\r\n        if (!foodItem || !foodClass || !portion) {\r\n            return null\r\n        }\r\n\r\n        if (portion.portionType === 0) {\r\n            portion.amount = portionAmount\r\n        }\r\n\r\n        return {\r\n            foodItem: foodItem,\r\n            foodClass: foodClass,\r\n            portion: {...portion},\r\n            selectedSource: selectedSource ? selectedSource.value : foodItem.nutrientDataList[0].source.id,\r\n            supplementData: supplementData,\r\n            combineData: combineData\r\n        }\r\n    }\r\n\r\n    const setInitialFoodElement = () => {\r\n        if (!foodClassesList || foodClassesList.length === 0) {\r\n            return\r\n        }\r\n\r\n        if (!props.selectedFoodItem || !props.selectedFoodItem.foodClass) {\r\n            return\r\n        }\r\n\r\n        const predefinedFoodObject = props.selectedFoodItem\r\n\r\n        // @ts-ignore\r\n        const foodClassOption = foodClassesList.find(foodClass => foodClass.value.id === predefinedFoodObject.foodClass.id)\r\n        const {foodItems, foodNames, conditions, portionTypes} = applicationContext.foodDataCorpus\r\n\r\n        if (foodClassOption) {\r\n            setSelectedFoodClass(foodClassOption)\r\n            const foodClassItems = getFoodItemsSelectList(foodItems, foodClassOption.value.id, foodNames, conditions, language)\r\n\r\n            if (foodClassItems) {\r\n                setFoodItemsList(foodClassItems)\r\n                const foodItem = foodClassItems.find(foodItem => foodItem.value.id === predefinedFoodObject.foodItem.id)\r\n\r\n                if (foodItem && foodItem.value && foodItem.value.portionData) {\r\n                    setSelectedFoodItem(foodItem)\r\n\r\n                    const sourceNames = getSourceNames(foodItem.value)\r\n                    setSourcesList(sourceNames)\r\n                    const selected = sourceNames.find(sourceElement => sourceElement.value === props.selectedFoodItem?.selectedSource)\r\n                    if (selected) {\r\n                        setSelectedSource(selected)\r\n                    }\r\n\r\n                    const portionDataList = getPortionReactSelectList(foodItem.value.portionData, portionTypes, language)\r\n                    setPortionsList(portionDataList)\r\n\r\n                    const portionType = predefinedFoodObject.portion.portionType\r\n                    const portionObject = portionDataList.find(portion => portion.value.portionType === portionType)\r\n                    if (portionObject) {\r\n                        setSelectedPortion(portionObject)\r\n\r\n                        //@ts-ignore\r\n                        const amount = predefinedFoodObject.portion.amount\r\n                        setPortionAmount(amount)\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        setInitialized(true)\r\n    }\r\n\r\n    const onCheckSupplementCheckbox = () => {\r\n        setSupplementData(!supplementData)\r\n    }\r\n\r\n    const onCheckCombineCheckbox = () => {\r\n        setCombineData(!combineData)\r\n    }\r\n\r\n    /**\r\n     * Manually creates a sorted typeahead list which will favor food classes starting with the search term\r\n     * against food classes not starting (but including) the search term. Also, the food class is favored\r\n     * against the food items of it, which may also include the search term (like \"Cheese\" is shown if \"Gouda\"\r\n     * is entered).\r\n     * @param value The value entered in the select input field\r\n     * @param action The event action\r\n     */\r\n    const handleFoodClassInputChange = (value, { action }) => {\r\n        if (action === 'input-change') {\r\n            if(value.trim().length === 0) {\r\n                setFoodClassesTypeaheadList(foodClassesList)\r\n                return\r\n            }\r\n\r\n            let resultList: ReactSelectFoodClassOption[] = []\r\n            let dictionary: string[] = []\r\n\r\n            value = value.toLowerCase().trim()\r\n\r\n            // Find add all food class elements to the typeahead list that start with the search term\r\n            foodClassesList.forEach(entry => {\r\n                let label = entry.label.toLowerCase()\r\n                if(label.includes(foodClassLabelSeparator)) {\r\n                    label = label.substring(0, label.indexOf(foodClassLabelSeparator)).trim()\r\n                }\r\n                if(label.startsWith(value)) {\r\n                    resultList.push(entry)\r\n                    dictionary.push(entry.label)\r\n                }\r\n            })\r\n\r\n            // Now add all food class elements to the typeahead list that match the search term (yet do not start with it)\r\n            foodClassesList.forEach(entry => {\r\n                let label = entry.label.toLowerCase()\r\n                if(label.includes(foodClassLabelSeparator)) {\r\n                    label = label.substring(0, label.indexOf(foodClassLabelSeparator)).trim()\r\n                }\r\n                if(label.includes(value) && !label.startsWith(value)) {\r\n                    resultList.push(entry)\r\n                    dictionary.push(entry.label)\r\n                }\r\n            })\r\n\r\n            // Finally add all labels (class or items) that contain the search term\r\n            foodClassesList.forEach(entry => {\r\n                const label = entry.label.toLowerCase()\r\n                if(label.includes(value) && !dictionary.includes(entry.label)) {\r\n                    resultList.push(entry)\r\n                }\r\n            })\r\n\r\n            setFoodClassesTypeaheadList(resultList)\r\n        }\r\n    }\r\n\r\n    if (props.selectedFoodItem && !initialized) {\r\n        setInitialFoodElement()\r\n    }\r\n\r\n    const renderSourceLine = () => {\r\n        const sourceSelectBox = (\r\n            <Select className={selectClass}\r\n                    options={sourcesList}\r\n                    isDisabled={sourcesList.length <= 1 || combineData}\r\n                    value={selectedSource ? selectedSource : sourcesList[0]}\r\n                    onChange={handleSourceChange}\r\n                    styles={customSelectStyles}\r\n            />\r\n        )\r\n\r\n        const x = props.directCompareSelector ? \"a\" : \"b\"\r\n\r\n        const checkboxes = (\r\n            <div>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_source_supplement_tooltip[language]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_source_supplement[language]}\r\n                                checked={supplementData}\r\n                                disabled={sourcesList.length <= 1}\r\n                                onClick={onCheckSupplementCheckbox}>\r\n                    </Form.Check>\r\n                </label>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_source_combine_tooltip[language]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check className=\"form-radiobutton\"\r\n                                style={{minHeight: \"1rem\"}}\r\n                                label={applicationStrings.label_source_combine[language]}\r\n                                checked={combineData}\r\n                                disabled={sourcesList.length <= 1}\r\n                                onClick={onCheckCombineCheckbox}>\r\n                    </Form.Check>\r\n                </label>\r\n            </div>\r\n        )\r\n\r\n        if(props.directCompareSelector && !isMobileDevice()) {  // Direct Compare Selector uses column layout for Checkboxes/Source box\r\n            return <div>\r\n                <span className={'form-label'}>{applicationStrings.label_source[language]}:</span>\r\n                <div className={\"d-flex row\"}>\r\n                    <div className=\"col-4 column select-menu form-section\">\r\n                        {sourceSelectBox}\r\n                    </div>\r\n                    <div className={\"col-8\"}>\r\n                        {checkboxes}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        } else {\r\n            return <div>\r\n                <span className={'form-label'}>{applicationStrings.label_source[language]}:</span>\r\n                <div className=\"select-menu form-section\">\r\n                    {sourceSelectBox}\r\n                </div>\r\n                <div>\r\n                    {checkboxes}\r\n                </div>\r\n            </div>\r\n        }\r\n    }\r\n\r\n\r\n    const amount_label = props.compositeSelector\r\n        ? `${applicationStrings.label_amount_short[language]}:`\r\n        : `${applicationStrings.label_amount[language]}:`\r\n    const initialFoodClass = getInitialFoodClassNumber(foodClassesList)\r\n\r\n    const selectClass = isSmallScreen(windowSize) ? \"form-control-sm\" : \"\"\r\n    const inputClass = isSmallScreen(windowSize) ? \"form-control form-control-sm\" : \"form-control\"\r\n\r\n    const formClass = props.compositeSelector ? \"form-section-small\" : \"form-section\"\r\n\r\n    // Remove hidden food class information in the label, which is only used to facilitate user search (e.g. find 'Cheese' for term 'Gouda')\r\n    const foodclassFormatter = (option) => {\r\n        const label = option.label\r\n\r\n        if(label.includes(\"||\")) {\r\n            const pos = label.indexOf(\"||\")\r\n            return label.substring(0, pos)\r\n        }\r\n        return label\r\n    }\r\n\r\n    const stylesCategory = !props.directCompareSelector ? getCustomSelectStyle(COLOR_SELECTOR_CATEGORY) : customSelectStyles\r\n    const stylesFoodClass = !props.directCompareSelector ? getCustomSelectStyle(COLOR_SELECTOR_FOODCLASS) : customSelectStyles\r\n    const stylesFoodItem = !props.directCompareSelector ? getCustomSelectStyle(COLOR_SELECTOR_FOODITEM) : customSelectStyles\r\n\r\n    return <div>\r\n        <div className=\"container\">\r\n            {props.compositeSelector === true &&\r\n            <div>\r\n                <span className={'form-label'}>{applicationStrings.label_title[language]}:</span>\r\n                <input className={inputClass}\r\n                       value={title}\r\n                       style={correspondingSelectElementStyle}\r\n                       onChange={handleTitleChange}\r\n                />\r\n            </div>\r\n            }\r\n            {props.directCompareSelector !== true &&\r\n            <div className={formClass}>\r\n                <span className={'form-label'}>{applicationStrings.label_category[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={categoriesList}\r\n                        value={selectedCategory ? selectedCategory : categoriesList[0]}\r\n                        onChange={(value) => handleCategoryChange(value)}\r\n                        styles={stylesCategory}\r\n                />\r\n            </div>\r\n            }\r\n            <div className={formClass}>\r\n                <span className={'form-label'}>{applicationStrings.label_foodclass[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={foodClassesTypeaheadList}\r\n                        onInputChange={handleFoodClassInputChange}\r\n                        formatOptionLabel={foodclassFormatter}\r\n                        value={selectdFoodClass ? selectdFoodClass : foodClassesList[initialFoodClass]}\r\n                        onChange={(value) => handleFoodClassChange(value)}\r\n                        styles={stylesFoodClass}\r\n                />\r\n            </div>\r\n            <div className={formClass}>\r\n                <span className={'form-label'}>{applicationStrings.label_fooditem[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={foodItemsList}\r\n                        value={selectedFoodItem ? selectedFoodItem : foodItemsList[0]}\r\n                        onChange={handleFoodItemChange}\r\n                        styles={stylesFoodItem}\r\n                />\r\n            </div>\r\n            <div className={formClass}>\r\n                <div className={\"row\"}>\r\n                    <div className={\"col-8\"}>\r\n                        <span\r\n                            className={'form-label'}>{applicationStrings.label_portion[language]}:</span>\r\n                        <Select className={selectClass}\r\n                                options={portionsList}\r\n                                styles={customSelectStyles}\r\n                                value={selectedPortion ? selectedPortion : portionsList[0]}\r\n                                onChange={(value) => handlePortionChange(value)}/>\r\n                    </div>\r\n                    <div className={\"col-4\"}>\r\n                        <span\r\n                            className={'form-label'}>{amount_label}</span>\r\n                        <input className={inputClass}\r\n                               disabled={selectedPortion?.value.portionType !== 0}\r\n                               value={portionAmount}\r\n                               style={correspondingSelectElementStyle}\r\n                               onChange={handlePortionAmountChange}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {renderSourceLine()}\r\n        </div>\r\n    </div>\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {FaTrash} from \"react-icons/fa\";\r\n\r\nexport interface CompositeFoodListProps {\r\n    selectedFoodItems: Array<SelectedFoodItem>\r\n    deleteItem: (index: number) => void\r\n}\r\n\r\nexport function CompositeFoodList(props: CompositeFoodListProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const onDeleteItem = (index: number) => {\r\n        props.deleteItem(index)\r\n    }\r\n\r\n    const renderLine = (selectedFoodItem: SelectedFoodItem, index: number) => {\r\n        if(applicationContext) {\r\n            const name = getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, selectedFoodItem.foodItem.nameId!!, languageContext.language)\r\n\r\n            return <div className={\"row\"}\r\n                        key={`composite food list ${index}`}\r\n                        style={{borderBottom: \"1px solid #dddddd\", paddingTop: \"6px\"}}>\r\n                <div className={\"col-1\"}>\r\n                    <b>{index+1}.</b>\r\n                </div>\r\n                <div className={\"col-8\"}>\r\n                    {name}\r\n                    <br/>\r\n                    {selectedFoodItem.portion.amount} g\r\n                </div>\r\n                <div className={\"col-3\"}>\r\n                    <Button onClick={() => onDeleteItem(index)}>\r\n                        <FaTrash/>\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        return <div></div>\r\n    }\r\n\r\n    return <div className={\"container\"} style={{maxHeight: \"300px\", overflowY: \"auto\"}}>\r\n        {props.selectedFoodItems.map((selectedFoodItem, index) => renderLine(selectedFoodItem, index))}\r\n    </div>\r\n\r\n}","import SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodItem, {\r\n    BaseData,\r\n    CarbohydrateData, CarotenoidData,\r\n    LipidData,\r\n    MineralData,\r\n    NutrientData,\r\n    ProteinData,\r\n    VitaminData\r\n} from \"../../types/nutrientdata/FoodItem\";\r\nimport {getNutrientData} from \"../nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function combineFoodItems(compositeList: Array<SelectedFoodItem>, preferredSource): SelectedFoodItem {\r\n    let portionSize = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        portionSize += selectedFoodItem.portion.amount\r\n    })\r\n\r\n    const nutrientDataList = buildAggregatedNutrientDataList(compositeList, portionSize, preferredSource);\r\n    const id = new Date().getTime();\r\n\r\n    const aggreatedFoodItem: FoodItem = {\r\n        id: id,\r\n        nutrientDataList: nutrientDataList,\r\n        aggregated: true\r\n    }\r\n\r\n    let combinedFoodItem: SelectedFoodItem = {\r\n        id: id,\r\n        foodItem: aggreatedFoodItem,\r\n        portion: {\r\n            portionType: 999,\r\n            amount: portionSize\r\n        },\r\n        compositeSubElements: compositeList,\r\n        selectedSource: -1,\r\n        supplementData: true,\r\n        combineData: false\r\n    };\r\n\r\n    return combinedFoodItem;\r\n}\r\n\r\n\r\nfunction buildAggregatedNutrientDataList(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): Array<NutrientData> {\r\n    const baseData = buildBaseDataObject(compositeList, portionSize, preferredSource);\r\n    const vitaminData = buildVitaminDataObject(compositeList, portionSize, preferredSource);\r\n    const mineralData = buildMineralDataObject(compositeList, portionSize, preferredSource);\r\n    const carbohydrateData = buildCarbohydrateData(compositeList, portionSize, preferredSource);\r\n    const lipidData = buildLipidData(compositeList, portionSize, preferredSource);\r\n    const proteinData = buildProteinData(compositeList, portionSize, preferredSource);\r\n\r\n    let nutrientObject: NutrientData = {\r\n        sourceItemId: \"0\",\r\n        source: {id: 0, url: \"\", name: \"\"},\r\n        baseData: baseData,\r\n        vitaminData: vitaminData,\r\n        mineralData: mineralData,\r\n        carbohydrateData: carbohydrateData,\r\n        lipidData: lipidData,\r\n        proteinData: proteinData\r\n    }\r\n\r\n    nutrientObject = removeNutrientObjectsWithNullValues(nutrientObject, compositeList, preferredSource);\r\n\r\n    const nutrientDataList: Array<NutrientData> = [];\r\n    nutrientDataList.push(nutrientObject);\r\n\r\n    return nutrientDataList;\r\n}\r\n\r\n\r\n/**\r\n * Removes all nutrient data elements that do not exist in ALL of the food elements within the list.\r\n * @param nutrientObject\r\n * @param compositeList\r\n */\r\nfunction removeNutrientObjectsWithNullValues(nutrientObject: NutrientData, compositeList: Array<SelectedFoodItem>, preferredSource: string) {\r\n    if (!compositeList) {\r\n        return nutrientObject;\r\n    }\r\n\r\n    for (let i = 0; i < compositeList.length; i++) {\r\n        let selectedFoodItem = compositeList[i]\r\n        const nutrientData = getNutrientData(selectedFoodItem)\r\n        const threshold = 0.1;   // Defines the amount of base data which must exist to set a sub-value to null.\r\n\r\n        // Remove base data\r\n        if (nutrientData.baseData.carbohydrates >= threshold) {\r\n            if (nutrientData.baseData.dietaryFibers == null) {\r\n                nutrientObject.baseData.dietaryFibers = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Lipid data\r\n        if (nutrientData.baseData.lipids >= threshold) {\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.saturated == null) {\r\n                nutrientObject.lipidData.saturated = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.unsaturatedMono == null) {\r\n                nutrientObject.lipidData.unsaturatedMono = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.unsaturatedPoly == null) {\r\n                nutrientObject.lipidData.unsaturatedPoly = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.transFattyAcids == null) {\r\n                nutrientObject.lipidData.transFattyAcids = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.cholesterol == null) {\r\n                nutrientObject.lipidData.cholesterol = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData.omegaData &&\r\n                (nutrientData.lipidData && nutrientData.lipidData.unsaturatedPoly && nutrientData.lipidData.unsaturatedPoly > threshold)) {\r\n                nutrientObject.lipidData.omegaData = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Carbohydrate data\r\n        if (nutrientData.baseData.carbohydrates >= threshold) {\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.sugar == null) {\r\n                nutrientObject.carbohydrateData.sugar = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.glucose == null) {\r\n                nutrientObject.carbohydrateData.glucose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.fructose == null) {\r\n                nutrientObject.carbohydrateData.fructose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.galactose == null) {\r\n                nutrientObject.carbohydrateData.galactose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.sucrose == null) {\r\n                nutrientObject.carbohydrateData.sucrose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.lactose == null) {\r\n                nutrientObject.carbohydrateData.lactose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.maltose == null) {\r\n                nutrientObject.carbohydrateData.maltose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.starch == null) {\r\n                nutrientObject.carbohydrateData.starch = null;\r\n            }\r\n        }\r\n\r\n\r\n\t\t// Vitamins:\r\n\t\tif(nutrientData.vitaminData.a === null) {\r\n\t\t\tnutrientObject.vitaminData.a = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b1 === null) {\r\n\t\t\tnutrientObject.vitaminData.b1 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b2 === null) {\r\n\t\t\tnutrientObject.vitaminData.b2 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b3 === null) {\r\n\t\t\tnutrientObject.vitaminData.b3 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b5 === null) {\r\n\t\t\tnutrientObject.vitaminData.b5 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b6 === null) {\r\n\t\t\tnutrientObject.vitaminData.b6 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b7 === null) {\r\n\t\t\tnutrientObject.vitaminData.b7 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b9 === null) {\r\n\t\t\tnutrientObject.vitaminData.b9 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b12 === null) {\r\n\t\t\tnutrientObject.vitaminData.b12 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.c === null) {\r\n\t\t\tnutrientObject.vitaminData.c = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.d === null) {\r\n\t\t\tnutrientObject.vitaminData.d = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.e === null) {\r\n\t\t\tnutrientObject.vitaminData.e = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.k === null) {\r\n\t\t\tnutrientObject.vitaminData.k = null\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// Minerals:\r\n\t\tif(nutrientData.mineralData.calcium === null) {\r\n\t\t\tnutrientObject.mineralData.calcium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.copper === null) {\r\n\t\t\tnutrientObject.mineralData.copper = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.iron === null) {\r\n\t\t\tnutrientObject.mineralData.iron = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.magnesium === null) {\r\n\t\t\tnutrientObject.mineralData.magnesium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.manganese === null) {\r\n\t\t\tnutrientObject.mineralData.manganese = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.phosphorus === null) {\r\n\t\t\tnutrientObject.mineralData.phosphorus = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.potassium === null) {\r\n\t\t\tnutrientObject.mineralData.potassium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.selenium === null) {\r\n\t\t\tnutrientObject.mineralData.selenium = null\r\n\t\t}\r\n\r\n\t\tif(nutrientData.mineralData.sodium === null) {\r\n\t\t\tnutrientObject.mineralData.sodium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.zinc === null) {\r\n\t\t\tnutrientObject.mineralData.zinc = null\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// Proteins:\r\n\t\t\r\n\t\tif(nutrientData.proteinData.alanine === null) {\r\n\t\t\tnutrientObject.proteinData.alanine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.arginine === null) {\r\n\t\t\tnutrientObject.proteinData.arginine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.asparticAcid === null) {\r\n\t\t\tnutrientObject.proteinData.asparticAcid = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.cystine === null) {\r\n\t\t\tnutrientObject.proteinData.cystine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.glutamicAcid === null) {\r\n\t\t\tnutrientObject.proteinData.glutamicAcid = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.glycine === null) {\r\n\t\t\tnutrientObject.proteinData.glycine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.histidine === null) {\r\n\t\t\tnutrientObject.proteinData.histidine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.isoleucine === null) {\r\n\t\t\tnutrientObject.proteinData.isoleucine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.leucine === null) {\r\n\t\t\tnutrientObject.proteinData.leucine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.lysine === null) {\r\n\t\t\tnutrientObject.proteinData.lysine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.methionine === null) {\r\n\t\t\tnutrientObject.proteinData.methionine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.phenylalanine === null) {\r\n\t\t\tnutrientObject.proteinData.phenylalanine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.proline === null) {\r\n\t\t\tnutrientObject.proteinData.proline = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.serine === null) {\r\n\t\t\tnutrientObject.proteinData.serine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.threonine === null) {\r\n\t\t\tnutrientObject.proteinData.threonine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.tryptophan === null) {\r\n\t\t\tnutrientObject.proteinData.tryptophan = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.tyrosine === null) {\r\n\t\t\tnutrientObject.proteinData.tyrosine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.valine === null) {\r\n\t\t\tnutrientObject.proteinData.valine = null\r\n\t\t}\r\n\r\n    }\r\n\r\n    return nutrientObject;\r\n}\r\n\r\n\r\nfunction buildBaseDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): BaseData {\r\n    let energy = 0;\r\n    let carbohydrates = 0;\r\n    let lipids = 0;\r\n    let proteins = 0;\r\n    let water = 0;\r\n    let dietaryFibers = 0;\r\n    let alcohol = 0;\r\n    let ash = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const baseData = getNutrientData(selectedFoodItem).baseData;\r\n        const userSetPortion = selectedFoodItem.portion.amount;\r\n        const portionFactor = userSetPortion / 100;\r\n\r\n        energy += (baseData.energy ? baseData.energy : 0) * portionFactor;\r\n        carbohydrates += baseData.carbohydrates * portionFactor;\r\n        lipids += baseData.lipids * portionFactor;\r\n        proteins += baseData.proteins * portionFactor;\r\n        water += baseData.water * portionFactor;\r\n        dietaryFibers += (baseData.dietaryFibers ? baseData.dietaryFibers : 0) * portionFactor;\r\n        alcohol += (baseData.alcohol ? baseData.alcohol : 0) * portionFactor;\r\n        ash += (baseData.ash ? baseData.ash : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        energy: createFinalValue(energy, portionSize),\r\n        carbohydrates: createFinalValue(carbohydrates, portionSize),\r\n        lipids: createFinalValue(lipids, portionSize),\r\n        proteins: createFinalValue(proteins, portionSize),\r\n        water: createFinalValue(water, portionSize),\r\n        dietaryFibers: createFinalValue(dietaryFibers, portionSize),\r\n        alcohol: alcohol,\r\n        ash: ash\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction buildVitaminDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): VitaminData {\r\n    let a = 0\r\n    let b1 = 0\r\n    let b2 = 0\r\n    let b3 = 0\r\n    let b5 = 0\r\n    let b6 = 0\r\n    let b7 = 0\r\n    let b9 = 0\r\n    let b12 = 0\r\n    let c = 0\r\n    let d = 0\r\n    let e = 0\r\n    let k = 0\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const vitaminData = getNutrientData(selectedFoodItem).vitaminData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        a += (vitaminData.a ? vitaminData.a : 0) * portionFactor\r\n        b1 += (vitaminData.b1 ? vitaminData.b1 : 0) * portionFactor\r\n        b2 += (vitaminData.b2 ? vitaminData.b2 : 0) * portionFactor\r\n        b3 += (vitaminData.b3 ? vitaminData.b3 : 0) * portionFactor\r\n        b5 += (vitaminData.b5 ? vitaminData.b5 : 0) * portionFactor\r\n        b6 += (vitaminData.b6 ? vitaminData.b6 : 0) * portionFactor\r\n        b7 += (vitaminData.b7 ? vitaminData.b7 : 0) * portionFactor\r\n        b9 += (vitaminData.b9 ? vitaminData.b9 : 0) * portionFactor\r\n        b12 += (vitaminData.b12 ? vitaminData.b12 : 0) * portionFactor\r\n        c += (vitaminData.c ? vitaminData.c : 0) * portionFactor\r\n        d += (vitaminData.d ? vitaminData.d : 0) * portionFactor\r\n        e += (vitaminData.e ? vitaminData.e : 0) * portionFactor\r\n        k += (vitaminData.k ? vitaminData.k : 0) * portionFactor\r\n    })\r\n\r\n    return {\r\n        a: createFinalValue(a, portionSize),\r\n        b1: createFinalValue(b1, portionSize),\r\n        b2: createFinalValue(b2, portionSize),\r\n        b3: createFinalValue(b3, portionSize),\r\n        b5: createFinalValue(b5, portionSize),\r\n        b6: createFinalValue(b6, portionSize),\r\n        b7: createFinalValue(b7, portionSize),\r\n        b9: createFinalValue(b9, portionSize),\r\n        b12: createFinalValue(b12, portionSize),\r\n        c: createFinalValue(c, portionSize),\r\n        d: createFinalValue(d, portionSize),\r\n        e: createFinalValue(e, portionSize),\r\n        k: createFinalValue(k, portionSize),\r\n        carotenoidData: buildCarotenoidDataObject(compositeList, portionSize, preferredSource)\r\n    }\r\n}\r\n\r\n\r\nfunction buildCarotenoidDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): CarotenoidData {\r\n    let alpha = 0\r\n    let beta = 0\r\n    let cryptoxanthin = 0\r\n    let lycopene = 0\r\n    let lutein = 0\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const carotenoidData = getNutrientData(selectedFoodItem).vitaminData.carotenoidData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        if(carotenoidData !== null) {\r\n            alpha += (carotenoidData.caroteneAlpha ? carotenoidData.caroteneAlpha : 0) * portionFactor\r\n            beta += (carotenoidData.caroteneBeta ? carotenoidData.caroteneBeta : 0) * portionFactor\r\n            cryptoxanthin += (carotenoidData.cryptoxanthin ? carotenoidData.cryptoxanthin : 0) * portionFactor\r\n            lycopene += (carotenoidData.lycopene ? carotenoidData.lycopene : 0) * portionFactor\r\n            lutein += (carotenoidData.lutein ? carotenoidData.lutein : 0) * portionFactor\r\n        }\r\n    })\r\n\r\n    return {\r\n        caroteneAlpha: createFinalValue(alpha, portionSize),\r\n        caroteneBeta: createFinalValue(beta, portionSize),\r\n        cryptoxanthin: createFinalValue(cryptoxanthin, portionSize),\r\n        lycopene: createFinalValue(lycopene, portionSize),\r\n        lutein: createFinalValue(lutein, portionSize)\r\n    }\r\n}\r\n\r\n\r\nfunction buildMineralDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): MineralData {\r\n    let calcium = 0;\r\n    let iron = 0;\r\n    let magnesium = 0;\r\n    let phosphorus = 0;\r\n    let potassium = 0;\r\n    let sodium = 0;\r\n    let zinc = 0;\r\n    let copper = 0;\r\n    let manganese = 0;\r\n    let selenium = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const mineralData = getNutrientData(selectedFoodItem).mineralData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        calcium += (mineralData.calcium ? mineralData.calcium : 0) * portionFactor;\r\n        iron += (mineralData.iron ? mineralData.iron : 0) * portionFactor;\r\n        magnesium += (mineralData.magnesium ? mineralData.magnesium : 0)\r\n        phosphorus += (mineralData.phosphorus ? mineralData.phosphorus : 0)\r\n        potassium += (mineralData.potassium ? mineralData.potassium : 0)\r\n        sodium += (mineralData.sodium ? mineralData.sodium : 0)\r\n        zinc += (mineralData.zinc ? mineralData.zinc : 0)\r\n        copper += (mineralData.copper ? mineralData.copper : 0)\r\n        manganese += (mineralData.manganese ? mineralData.manganese : 0)\r\n        selenium += (mineralData.selenium ? mineralData.selenium : 0)\r\n    })\r\n\r\n    return {\r\n        calcium: createFinalValue(calcium, portionSize),\r\n        iron: createFinalValue(iron, portionSize),\r\n        magnesium: createFinalValue(magnesium, portionSize),\r\n        phosphorus: createFinalValue(phosphorus, portionSize),\r\n        potassium: createFinalValue(potassium, portionSize),\r\n        sodium: createFinalValue(sodium, portionSize),\r\n        zinc: createFinalValue(zinc, portionSize),\r\n        copper: createFinalValue(copper, portionSize),\r\n        manganese: createFinalValue(manganese, portionSize),\r\n        selenium: createFinalValue(selenium, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildCarbohydrateData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): CarbohydrateData {\r\n    let glucose = 0;\r\n    let fructose = 0;\r\n    let galactose = 0;\r\n    let sucrose = 0;\r\n    let maltose = 0;\r\n    let lactose = 0;\r\n    let starch = 0;\r\n    let sugar = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const carbohydrateData = getNutrientData(selectedFoodItem).carbohydrateData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        glucose += (carbohydrateData.glucose ? carbohydrateData.glucose : 0) * portionFactor;\r\n        fructose += (carbohydrateData.fructose ? carbohydrateData.fructose : 0) * portionFactor;\r\n        galactose += (carbohydrateData.galactose ? carbohydrateData.galactose : 0) * portionFactor;\r\n        sucrose += (carbohydrateData.sucrose ? carbohydrateData.sucrose : 0) * portionFactor;\r\n        maltose += (carbohydrateData.maltose ? carbohydrateData.maltose : 0) * portionFactor;\r\n        lactose += (carbohydrateData.lactose ? carbohydrateData.lactose : 0) * portionFactor;\r\n        starch += (carbohydrateData.starch ? carbohydrateData.starch : 0) * portionFactor;\r\n        sugar += (carbohydrateData.sugar ? carbohydrateData.sugar : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        glucose: createFinalValue(glucose, portionSize),\r\n        fructose: createFinalValue(fructose, portionSize),\r\n        galactose: createFinalValue(galactose, portionSize),\r\n        sucrose: createFinalValue(sucrose, portionSize),\r\n        maltose: createFinalValue(maltose, portionSize),\r\n        lactose: createFinalValue(lactose, portionSize),\r\n        starch: createFinalValue(starch, portionSize),\r\n        sugar: createFinalValue(sugar, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildProteinData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): ProteinData {\r\n    let tryptophan = 0;\r\n    let threonine = 0;\r\n    let isoleucine = 0;\r\n    let leucine = 0;\r\n    let lysine = 0;\r\n    let methionine = 0;\r\n    let cystine = 0;\r\n    let phenylalanine = 0;\r\n    let tyrosine = 0;\r\n    let valine = 0;\r\n    let arginine = 0;\r\n    let histidine = 0;\r\n    let alanine = 0;\r\n    let asparticAcid = 0;\r\n    let glutamicAcid = 0;\r\n    let glycine = 0;\r\n    let proline = 0;\r\n    let serine = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const proteinData = getNutrientData(selectedFoodItem).proteinData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        tryptophan += (proteinData.tryptophan ? proteinData.tryptophan : 0) * portionFactor;\r\n        threonine += (proteinData.threonine ? proteinData.threonine : 0) * portionFactor;\r\n        isoleucine += (proteinData.isoleucine ? proteinData.isoleucine : 0) * portionFactor;\r\n        leucine += (proteinData.leucine ? proteinData.leucine : 0) * portionFactor;\r\n        lysine += (proteinData.lysine ? proteinData.lysine : 0) * portionFactor;\r\n        methionine += (proteinData.methionine ? proteinData.methionine : 0) * portionFactor;\r\n        cystine += (proteinData.cystine ? proteinData.cystine : 0) * portionFactor;\r\n        phenylalanine += (proteinData.phenylalanine ? proteinData.phenylalanine : 0) * portionFactor;\r\n        tyrosine += (proteinData.tyrosine ? proteinData.tyrosine : 0) * portionFactor;\r\n        valine += (proteinData.valine ? proteinData.valine : 0) * portionFactor;\r\n        arginine += (proteinData.arginine ? proteinData.arginine : 0) * portionFactor;\r\n        histidine += (proteinData.histidine ? proteinData.histidine : 0) * portionFactor;\r\n        alanine += (proteinData.alanine ? proteinData.alanine : 0) * portionFactor;\r\n        asparticAcid += (proteinData.asparticAcid ? proteinData.asparticAcid : 0) * portionFactor;\r\n        glutamicAcid += (proteinData.glutamicAcid ? proteinData.glutamicAcid : 0) * portionFactor;\r\n        glycine += (proteinData.glycine ? proteinData.glycine : 0) * portionFactor;\r\n        proline += (proteinData.proline ? proteinData.proline : 0) * portionFactor;\r\n        serine += (proteinData.serine ? proteinData.serine : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        tryptophan: createFinalValue(tryptophan, portionSize),\r\n        threonine: createFinalValue(threonine, portionSize),\r\n        isoleucine: createFinalValue(isoleucine, portionSize),\r\n        leucine: createFinalValue(leucine, portionSize),\r\n        lysine: createFinalValue(lysine, portionSize),\r\n        methionine: createFinalValue(methionine, portionSize),\r\n        cystine: createFinalValue(cystine, portionSize),\r\n        phenylalanine: createFinalValue(phenylalanine, portionSize),\r\n        tyrosine: createFinalValue(tyrosine, portionSize),\r\n        valine: createFinalValue(valine, portionSize),\r\n        arginine: createFinalValue(arginine, portionSize),\r\n        histidine: createFinalValue(histidine, portionSize),\r\n        alanine: createFinalValue(alanine, portionSize),\r\n        asparticAcid: createFinalValue(asparticAcid, portionSize),\r\n        glutamicAcid: createFinalValue(glutamicAcid, portionSize),\r\n        glycine: createFinalValue(glycine, portionSize),\r\n        proline: createFinalValue(proline, portionSize),\r\n        serine: createFinalValue(serine, portionSize),\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction buildLipidData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): LipidData {\r\n    let unsaturatedMono = 0;\r\n    let unsaturatedPoly = 0;\r\n    let saturated = 0;\r\n    let omega3 = 0;\r\n    let omega6 = 0;\r\n    let omegaUncertain = 0;\r\n    let cholesterol = 0;\r\n    let transFattyAcids = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const lipidData = getNutrientData(selectedFoodItem).lipidData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        unsaturatedMono += (lipidData.unsaturatedMono ? lipidData.unsaturatedMono : 0) * portionFactor;\r\n        unsaturatedPoly += (lipidData.unsaturatedPoly ? lipidData.unsaturatedPoly : 0) * portionFactor;\r\n        saturated += (lipidData.saturated ? lipidData.saturated : 0) * portionFactor;\r\n        omega3 += (lipidData.omegaData?.omega3 ? lipidData.omegaData.omega3 : 0) * portionFactor;\r\n        omega6 += (lipidData.omegaData?.omega6 ? lipidData.omegaData.omega6 : 0) * portionFactor;\r\n        omegaUncertain += (lipidData.omegaData?.uncertain ? lipidData.omegaData.uncertain : 0) * portionFactor;\r\n        cholesterol += (lipidData.cholesterol ? lipidData.cholesterol : 0) * portionFactor;\r\n        transFattyAcids += (lipidData.transFattyAcids ? lipidData.transFattyAcids : 0) * portionFactor;\r\n    })\r\n\r\n    const omegaRatio = (omega3 + omega6) / (omega3 + omega6 + omegaUncertain)\r\n\r\n    return {\r\n        unsaturatedMono: createFinalValue(unsaturatedMono, portionSize),\r\n        unsaturatedPoly: createFinalValue(unsaturatedPoly, portionSize),\r\n        saturated: createFinalValue(saturated, portionSize),\r\n        omegaData: {\r\n            omega3: createFinalValue(omega3, portionSize),\r\n            omega6: createFinalValue(omega6, portionSize),\r\n            uncertain: createFinalValue(omegaUncertain, portionSize),\r\n            uncertainRatio: omegaRatio\r\n        },\r\n        cholesterol: createFinalValue(cholesterol, portionSize),\r\n        transFattyAcids: createFinalValue(transFattyAcids, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction createFinalValue(value, totalPortionAmount) {\r\n    return (value / totalPortionAmount) * 100;\r\n}","import {ReactElement, useContext} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {HelpText} from \"../service/HelpService\";\r\n\r\ninterface HelpModalProps {\r\n    helpText: HelpText\r\n    closeHelpModal: () => void\r\n}\r\n\r\nexport function HelpModal(props: HelpModalProps): ReactElement {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if (!props.helpText) {\r\n        return (<div>No data available.</div>);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"modal\" style={{display: \"block\"}} role=\"dialog\">\r\n            <div className=\"modal-dialog\" role=\"document\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\">{props.helpText.title}</h5>\r\n                        <button type=\"button\"\r\n                                className=\"btn-close\"\r\n                                data-dismiss=\"modal\"\r\n                                aria-label=\"Close\"\r\n                                onClick={props.closeHelpModal}>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <span dangerouslySetInnerHTML={{__html: props.helpText.content}}/>\r\n                    </div>\r\n                    <div className=\"modal-footer\">\r\n                        <button type=\"button\"\r\n                                className=\"btn btn-primary\"\r\n                                onClick={props.closeHelpModal}>\r\n                            {applicationStrings.button_close[languageContext.language]}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import {LANGUAGE_EN} from \"../config/Constants\";\r\n\r\nexport interface HelpText {\r\n    title: string,\r\n    content: string\r\n}\r\n\r\nexport function getHelpText(helpModalId: number, languageId: string): HelpText | null {\r\n    const helpFile = require(\"../static/help/help.json\");\r\n    const entry = helpFile.entries.find( (entry) => entry.id === helpModalId);\r\n\r\n    if(entry) {\r\n        const languageSection = languageId === LANGUAGE_EN ? entry.en : entry.de;\r\n        const title = languageSection.title;\r\n        const contentArray = languageSection.content;\r\n\r\n        let content = \"\";\r\n        for(let i=0; i < contentArray.length; i++) {\r\n            content += contentArray[i];\r\n            if(i < (contentArray.length-1)) {\r\n                content += \"<br />\"\r\n            }\r\n        }\r\n\r\n        return {\r\n            title: title,\r\n            content: content\r\n        };\r\n    }\r\n\r\n    return null\r\n}","import React, {useContext, useState} from 'react'\r\n\r\nimport {Button, Modal} from 'react-bootstrap'\r\n\r\nimport {NotificationManager} from 'react-notifications'\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\nimport FoodSelector from \"./FoodSelector\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {CompositeFoodList} from \"./CompositeFoodList\";\r\nimport {initialFoodClassId, maximalPortionSize} from \"../../config/ApplicationSetting\";\r\nimport combineFoodItems from \"../../service/calculation/FoodDataAggregationService\";\r\nimport {FaQuestionCircle} from \"react-icons/fa\";\r\nimport {HelpModal} from \"../HelpModal\";\r\nimport {getHelpText} from \"../../service/HelpService\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\n\r\nexport interface FoodSelectorModalProps {\r\n    onHide: () => void,\r\n    selectedFoodItemCallback: (selectedFoodItem: SelectedFoodItem) => void\r\n    compositeSelector: boolean\r\n}\r\n\r\n\r\nconst FoodSelectorModal: React.FC<FoodSelectorModalProps> = (props: FoodSelectorModalProps) => {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const [selectedFoodItem, setSelectedFoodItem] = useState<SelectedFoodItem | null>(null)\r\n    const [compositeTitle, setCompositeTitle] = useState<string | null>(null)\r\n    const [compositeList, setCompositeList] = useState<Array<SelectedFoodItem>>([])\r\n    const [showHelpModal, setShowHelpModal] = useState<boolean>(false)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateSelectedFoodItem = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem(selectedFoodItem)\r\n    }\r\n\r\n    const updateCompositeTitle = (title: string): void => {\r\n        setCompositeTitle(title)\r\n    }\r\n\r\n    const addCompositeElement = () => {\r\n        if (selectedFoodItem !== null) {\r\n            if (selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n                NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n                return;\r\n            }\r\n\r\n            const newList: Array<SelectedFoodItem> = [...compositeList]\r\n            newList.push(selectedFoodItem)\r\n            setCompositeList(newList)\r\n        }\r\n    }\r\n\r\n    const deleteCompositeElement = (index: number) => {\r\n        const newList: Array<SelectedFoodItem> = [...compositeList]\r\n        newList.splice(index, 1)\r\n        setCompositeList(newList)\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (props.compositeSelector) {\r\n            onSubmitComposite()\r\n        } else {\r\n            onSubmitSingleItem()\r\n        }\r\n    }\r\n\r\n    const onSubmitSingleItem = () => {\r\n        const foodItemId = selectedFoodItem ? selectedFoodItem.foodItem.id : null\r\n        if (foodItemId) {\r\n            const existingItemInList = applicationContext?.applicationData.foodDataPanel.selectedFoodItems.find(foodItem => foodItem.id === foodItemId)\r\n\r\n            if (existingItemInList) {\r\n                NotificationManager.error(applicationStrings.message_error_existing_element[language])\r\n                return\r\n            }\r\n        }\r\n\r\n        if (!selectedFoodItem || !selectedFoodItem.foodItem || !selectedFoodItem.foodClass || !selectedFoodItem.portion) {\r\n            NotificationManager.error(applicationStrings.message_error_incomplete_form[language])\r\n        } else if (selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n            NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n        } else {\r\n            props.selectedFoodItemCallback(selectedFoodItem)\r\n            props.onHide()\r\n        }\r\n    }\r\n\r\n    const onSubmitComposite = () => {\r\n        const preferredSource = applicationContext.applicationData.preferredSource\r\n        let aggregatedSelectedFoodItem = combineFoodItems(compositeList, preferredSource)\r\n\r\n        if (compositeTitle !== null && compositeTitle.trim().length > 0) {\r\n            const titleToShow = compositeTitle.length < 24 ? compositeTitle.trim() : compositeTitle.substring(0, 21).trim() + \"...\"\r\n            aggregatedSelectedFoodItem.title = titleToShow\r\n        } else {\r\n            aggregatedSelectedFoodItem.title = applicationStrings.input_compositelist_title[language]\r\n        }\r\n\r\n        if (!aggregatedSelectedFoodItem) {\r\n            return\r\n        }\r\n\r\n        aggregatedSelectedFoodItem = {...aggregatedSelectedFoodItem, aggregated: true}\r\n        props.selectedFoodItemCallback(aggregatedSelectedFoodItem)\r\n        props.onHide()\r\n    }\r\n\r\n    const updateFoodSelectorConfig = (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => {\r\n        if (applicationContext) {\r\n            const currentSelectorSetting = applicationContext.applicationData.foodSelector\r\n            if (selectedCategory !== currentSelectorSetting.selectedCategory || supplementData !== currentSelectorSetting.sourceSupplement\r\n                || combineData !== currentSelectorSetting.sourceCombine) {\r\n                applicationContext.setFoodSelectorConfig(selectedCategory, supplementData, combineData)\r\n            }\r\n        }\r\n    }\r\n\r\n    const onCancel = () => {\r\n        props.onHide()\r\n    }\r\n\r\n    const onOpenHelpModal = () => {\r\n        setShowHelpModal(true)\r\n    }\r\n\r\n    const title = props.compositeSelector ? applicationStrings.label_foodselector_composite[language] : applicationStrings.label_foodselector[language]\r\n    const helpText = props.compositeSelector ? getHelpText(10, language) : getHelpText(9, language)\r\n\r\n    return (\r\n        <Modal size={'lg'} show={true} onHide={props.onHide}>\r\n            <Modal.Header>\r\n                <b>{title}</b>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                {showHelpModal && helpText !== null &&\r\n                <HelpModal helpText={helpText} closeHelpModal={() => setShowHelpModal(false)}/>\r\n                }\r\n                <div>\r\n                    {!props.compositeSelector ?\r\n                        <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                      defaultFoodClass={initialFoodClassId}\r\n                                      compositeSelector={false}\r\n                                      updateFoodSelectorConfig={updateFoodSelectorConfig}\r\n                        />\r\n                        :\r\n                        <div className={\"container\"}>\r\n                            <div className={\"row\"}>\r\n                                <div className={\"col-6\"}>\r\n                                    <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                                  updateFoodSelectorConfig={updateFoodSelectorConfig}\r\n                                                  defaultFoodClass={initialFoodClassId}\r\n                                                  updateCompositeTitle={updateCompositeTitle}\r\n                                                  compositeSelector={true}\r\n                                    />\r\n                                </div>\r\n                                <div className={\"col-6\"}>\r\n                                    <CompositeFoodList selectedFoodItems={compositeList}\r\n                                                       deleteItem={deleteCompositeElement}/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer className={\"justify-content-between\"}>\r\n                <div>\r\n                    <Button className={\"btn btn-secondary\"} onClick={onOpenHelpModal}>\r\n                        <FaQuestionCircle/>\r\n                    </Button>\r\n                </div>\r\n                <div className={\"d-flex d-row justify-content-end\"}>\r\n                    <Button className={\"btn-secondary form-button\"} onClick={onCancel}>\r\n                        {applicationStrings.button_cancel[language]}\r\n                    </Button>\r\n                    {props.compositeSelector ?\r\n                        <Button className={\"form-button\"}\r\n                                onClick={onSubmit}\r\n                                disabled={!compositeList || compositeList.length < 1}>\r\n                            {applicationStrings.button_show[language]}\r\n                        </Button>\r\n                        :\r\n                        <Button className={\"form-button\"} onClick={onSubmit}>\r\n                            {applicationStrings.button_select[language]}\r\n                        </Button>\r\n                    }\r\n\r\n                    {props.compositeSelector &&\r\n                    <Button className={\"form-button\"} onClick={addCompositeElement}>\r\n                        {applicationStrings.button_add[language]}\r\n                    </Button>\r\n                    }\r\n                </div>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n\r\n}\r\n\r\nexport default FoodSelectorModal","import React from \"react\";\r\n\r\nimport {confirmable, createConfirmation} from \"react-confirm\";\r\nimport {Button, Modal} from \"react-bootstrap\";\r\n\r\ninterface ConfirmationDialogProps {\r\n    okLabel: string,\r\n    cancelLabel: string,\r\n    title: string,\r\n    confirmation: string,\r\n    show: boolean,\r\n    proceed: (procedd: boolean) => void, // called when ok button is clicked.\r\n    enableEscape: boolean,\r\n    small?: boolean\r\n}\r\n\r\nclass ConfirmationDialog extends React.Component<ConfirmationDialogProps> {\r\n\r\n    render() {\r\n        const {\r\n            okLabel,\r\n            cancelLabel,\r\n            title,\r\n            confirmation,\r\n            show,\r\n            proceed,\r\n            enableEscape = true,\r\n        } = this.props;\r\n\r\n        return (\r\n            <Modal\r\n                show={show}\r\n                onHide={() => proceed(false)}\r\n                backdrop={enableEscape ? true : \"static\"}\r\n                keyboard={enableEscape}\r\n                fullscreen={true}>\r\n                <Modal.Header>\r\n                    <Modal.Title>{title}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>{confirmation}</Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button style={{minWidth: \"80px\"}}\r\n                            onClick={() => proceed(false)}>\r\n                        {cancelLabel}\r\n                    </Button>\r\n                    <Button\r\n                        style={{minWidth: \"80px\"}}\r\n                        className=\"primary button-l\"\r\n                        onClick={() => proceed(true)}>\r\n                        {okLabel}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function confirmAction(\r\n    confirmation,\r\n    okLabel,\r\n    cancelLabel,\r\n    options = {},\r\n    small?\r\n) {\r\n    return createConfirmation(confirmable(ConfirmationDialog))({\r\n        confirmation,\r\n        okLabel,\r\n        cancelLabel,\r\n        ...options,\r\n        small\r\n    });\r\n}\r\n","export const color_yellow = \"rgba(255, 255, 153, 1.0)\";   // Default for Lipids\r\nexport const color_green = \"rgba(132, 225, 132, 1.0)\";   // Default for Carbs\r\n\r\nexport const color_green_light = \"rgba(196, 236, 193, 1.0)\";   // Default for Sugar (as part of carbs)\r\nexport const color_red = \"rgba(255, 204, 204, 1.0)\";   // Default for proteins\r\nexport const color_blue = \"rgba(133, 193, 233, 1.0)\";   // Default for Water\r\nexport const color_purple = \"rgba(213, 205, 237, 1.0)\"; // Default color for a blue line\r\n\r\nexport const color_chart_brown = \"rgba(188, 170, 164)\";\t\t// brown\r\n\r\nexport const color_gray = \"rgba(235, 235, 235, 1.0)\"; // Default color for a blue line\r\nexport const color_line_blue = \"rgba(0, 107, 215, 1.0)\"; // Default color for a blue line\r\nexport const color_line_red = \"rgba(255, 102, 102, 1.0)\"; // Default color for a red line\r\n\r\nexport const color_chart_green_1 = \"rgba(39, 177, 96)\";\t\t// Dark green\r\nexport const color_chart_green_2 = \"rgba(137, 238, 137)\";\t// Normal green\r\nexport const color_chart_green_3 = \"rgba(214, 245, 214)\";\t\t// Light green\r\n\r\nexport const color_chart_yellow_1 = \"rgba(212, 172, 13)\";\t\t// Dark yellow\r\nexport const color_chart_yellow_2 = \"rgba(244, 208, 63)\";\t// Normal yellow\r\nexport const color_chart_yellow_3 = \"rgba(249, 231, 159)\";\t\t// Light yellow\r\nexport const color_chart_yellow_4 = \"rgba(255, 202, 40)\";\r\n\r\nexport const color_chart_yellow_green_1 =\"rgba(174, 213, 129)\"\r\nexport const color_chart_yellow_green_2 =\"rgba(76, 175, 80)\"\r\nexport const color_chart_yellow_green_3 =\"rgba(124, 179, 66)\"\r\n\r\nexport const color_chart_orange = \"rgba(230, 126, 34)\";\r\nexport const color_x = \"rgba(51, 204, 204)\"\r\n\r\nexport const color_chart_misc = color_gray;\r\n\r\n// Chart sizes:\r\n\r\nexport const default_chart_height = 380;\r\nexport const default_chart_height_m = 190;\r\n\r\nexport const basedata_piechart_width = 300;\r\nexport const basedata_piechart_width_m = 200;\r\n\r\nexport const basedata_barchart_width = 380;\r\nexport const basedata_barchart_width_m = 253;\r\n\r\n// Food data panel container size:\r\n\r\nexport const datapanel_container_min_width = 850\r\nexport const datapanel_container_min_width_m = 500\r\n\r\nexport const max_portion = 5000;\r\n\r\nexport const color_water = color_blue;\r\nexport const color_lipids = color_yellow;\r\nexport const color_carbs = color_green;\r\nexport const color_carbs_sugar = color_green_light;\r\nexport const color_carbs_dietaryFibers = color_chart_brown;\r\n\r\nexport const color_carbs_mono_glucose = color_chart_yellow_green_1\r\nexport const color_carbs_mono_fructose = color_chart_yellow_green_2\r\nexport const color_carbs_mono_galactose = color_chart_yellow_green_3\r\n\r\nexport const color_carbs_di_sucrose = color_chart_yellow_4\r\nexport const color_carbs_di_lactose = color_chart_yellow_3\r\nexport const color_carbs_di_maltose = color_chart_yellow_1\r\n\r\nexport const color_carbs_starch = color_chart_orange\r\n\r\nexport const color_alcohol = color_x;\r\n\r\nexport const color_proteins = color_red;\r\n\r\nexport const color_lipids_saturated = color_chart_yellow_4;\r\nexport const color_lipids_unsaturated_mono = color_chart_yellow_green_1;\r\nexport const color_lipids_unsaturated_poly = color_chart_yellow_green_2;\r\n\r\nexport const color_lipids_omega3 = color_chart_green_1;\r\nexport const color_lipids_omega6 = color_chart_yellow_2;\r\n\r\nexport const color_lipids_misc = color_gray;\r\n\r\nexport const color_ash = color_gray;\r\n\r\nexport const direct_compare_color1 = \"#ffe085\"\r\nexport const direct_compare_color2 = \"#d9ecff\"","/**\r\n * Returns a default-styled configuration for a bar chart.\r\n *\r\n * title: The charts title.\r\n * unit: The unit to use for the axis title and tooltip.\r\n * minYValue: Optional, a pre-defined maxYValue for the Y axis (e.g. 100)\r\n */\r\nimport {shortenName} from \"./nutrientdata/NameTypeService\";\r\n\r\nexport function getBarChartOptions(title: string, unit: string, maxYValue?: number | undefined) {\r\n    let yAxis: any = {\r\n        title: {\r\n            display: true,\r\n            text: unit\r\n        }\r\n    }\r\n\r\n    if(maxYValue) {\r\n        yAxis = {...yAxis, min: 0, max: maxYValue}\r\n    }\r\n\r\n    const scalesObject = {y: yAxis}\r\n    return getOptions(title, unit, scalesObject);\r\n}\r\n\r\n\r\nexport function getBarChartOptionsForRanking(title: string, unit: string) {\r\n    const scales = getScalesForRankingChart(unit);\r\n    const fullTitle = `${title} (${unit})`\r\n    return getOptions(fullTitle, unit, scales);\r\n}\r\n\r\n\r\nexport function getPieChartOptions(title: string, unit: string) {\r\n    return getOptions(title, unit);\r\n}\r\n\r\n\r\nfunction getOptions(title: string, unit: string, scalesObject?: any | undefined) {\r\n    const titleObj = title ? {display: true, text: title, fontSize: 18} : null;\r\n\r\n    let options: any = {\r\n        maintainAspectRatio: false,\r\n        responsive: true,\r\n        plugins: {\r\n            title: titleObj,\r\n            tooltip: getToolTips(unit),\r\n            legend: {\r\n                display: false\r\n            },\r\n        }\r\n    }\r\n\r\n    if (scalesObject !== undefined) {\r\n        options = {...options, scales: scalesObject}\r\n    }\r\n\r\n    return options;\r\n}\r\n\r\nfunction getToolTips(unit: string) {\r\n    return {\r\n        enabled: true,\r\n        maintainAspectRatio: true,\r\n        callbacks: {\r\n            label: tooltipItem => `${tooltipItem.label}: ${tooltipItem.formattedValue} ${unit}`\r\n        }\r\n    };\r\n}\r\n\r\n\r\nfunction getScalesForRankingChart(unit: string) {\r\n    let scaleLabel: any | null = null;\r\n\r\n    if (unit) {\r\n        scaleLabel = {\r\n            display: false,\r\n            labelString: unit\r\n        }\r\n    }\r\n\r\n    let axesObj = {};\r\n    if (scaleLabel) {\r\n        axesObj[\"scaleLabel\"] = scaleLabel;\r\n    }\r\n\r\n    const yAxes = [axesObj];\r\n\r\n    const scales = {\r\n        yAxes: yAxes,\r\n        xAxes: [{\r\n            ticks: {\r\n                autoSkip: false,\r\n                callback: function (value, index, values) {\r\n                    return shortenName(value, 24);\r\n                }\r\n            }\r\n        }]\r\n    };\r\n\r\n    return scales;\r\n}","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE} from \"../../config/Constants\";\r\nimport {Form} from 'react-bootstrap';\r\nimport {PieChartConfigurationProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\nexport function PieChartConfigurationForm(props: PieChartConfigurationProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    const legendLabel = isMobileDevice()\r\n        ? applicationStrings.checkbox_chartoption_showLegend_m[languageContext.language]\r\n        : applicationStrings.checkbox_chartoption_showLegend[languageContext.language]\r\n\r\n    const detailsLabel = isMobileDevice()\r\n        ? applicationStrings.checkbox_chartoption_showDetails_m[languageContext.language]\r\n        : applicationStrings.checkbox_chartoption_showDetails[languageContext.language]\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <form className=\"form-inline form-group\">\r\n                    <Form.Label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_charttype[languageContext.language]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_charttype_pie[languageContext.language]}\r\n                                type=\"radio\"\r\n                                value={CHART_TYPE_PIE}\r\n                                checked={props.chartType === CHART_TYPE_PIE}\r\n                                onChange={props.handleRadioButtonClick}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton form-horizontal-separation\"\r\n                                label={applicationStrings.label_charttype_bar[languageContext.language]}\r\n                                type=\"radio\"\r\n                                value={CHART_TYPE_BAR}\r\n                                checked={props.chartType === CHART_TYPE_BAR}\r\n                                onChange={props.handleRadioButtonClick}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton\"\r\n                                label={legendLabel}\r\n                                defaultChecked={props.showLegend}\r\n                                disabled={props.chartType === CHART_TYPE_BAR}\r\n                                onClick={props.handleLegendCheckboxClick}>\r\n                    </Form.Check>\r\n                    {props.detailsCheckboxAvailable &&\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton\"\r\n                                label={detailsLabel}\r\n                                defaultChecked={props.showDetails}\r\n                                onClick={props.handleDetailsCheckboxClick}>\r\n                    </Form.Check>\r\n                    }\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {ReactElement} from \"react\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\ninterface CustomLegendProps {\r\n    legendData: Array<any>\r\n}\r\n\r\nexport function CustomLegend(props: CustomLegendProps) {\r\n\r\n    const renderLegend = () => {\r\n        let legend: Array<ReactElement> = [];\r\n        const mobile = isMobileDevice()\r\n\r\n        for (let i = 0; i < props.legendData.length; i++) {\r\n            const element = props.legendData[i];\r\n            const indent = element.indent > 0 ? \"25px\" : \"0px\";\r\n            const verticalSpace = element.separateNextElement && !mobile ? \"15px\" : \"0px\";\r\n            const id = `legendrow ${i}`;\r\n\r\n            const legendItemLabelClass = mobile ? \"legendItemLabel-mobile\" : \"legendItemLabel\"\r\n            const legendClassName = isMobileDevice() ? \"align-items-baseline\" : \"align-items-middle\"\r\n\r\n            legend.push(\r\n                <div key={id} className=\"row\" style={{marginLeft: indent, marginBottom: verticalSpace}}>\r\n                    <div style={{display: \"flex\"}} className={legendClassName}>\r\n                        <div className=\"legendItem\" style={{background: element.color}}></div>\r\n                        <p className={legendItemLabelClass}>{element.item}</p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return legend;\r\n    }\r\n\r\n\r\n    return (\r\n        <div style={{borderLeft: \"1px solid #aaaaaa\", paddingLeft: \"5px\"}}>\r\n            <div style={{paddingTop: \"4px\"}}>\r\n                {renderLegend()}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n\r\n}","import {isMobileDevice, WindowDimension} from \"../WindowDimension\";\r\nimport {\r\n    basedata_piechart_width,\r\n    basedata_piechart_width_m, datapanel_container_min_width, datapanel_container_min_width_m,\r\n    default_chart_height,\r\n    default_chart_height_m\r\n} from \"../../config/ChartConfig\";\r\nimport {TAB_BASE_DATA} from \"../../config/Constants\";\r\n\r\nexport function calculateChartHeight(currentDimension: WindowDimension, directCompare?: boolean, dataPage?: string): number {\r\n    const mobile = isMobileDevice()\r\n\r\n    // Mobile devices don't need to be regarded in direct compare menu, as the functionality is disabled\r\n    if(directCompare) {\r\n        return currentDimension.height / 3\r\n    } else {\r\n        return dataPage === TAB_BASE_DATA\r\n            ? mobile\r\n                ? basedata_piechart_width_m\r\n                : basedata_piechart_width\r\n            : mobile\r\n                ? default_chart_height_m\r\n                : default_chart_height\r\n    }\r\n}\r\n\r\nexport function calculateChartContainerHeight(currentDimension: WindowDimension, directCompare?: boolean): number {\r\n    return directCompare === true\r\n        ? calculateChartHeight(currentDimension, directCompare) + 24\r\n        : calculateChartHeight(currentDimension, directCompare) + 10\r\n}\r\n\r\nexport function calculateMinimalDataPanelWidth() {\r\n    return isMobileDevice() ? datapanel_container_min_width_m : datapanel_container_min_width\r\n}\r\n","/**\r\n * Checks whether a value is a positive integer value.\r\n */\r\nexport function isPositiveIntegerValue(value) {\r\n    const number = Number(value);\r\n    return Number.isInteger(number) && number > 0;\r\n}\r\n\r\n/**\r\n * Checks whether a value is a positive integer value or 0.\r\n */\r\nexport function isPositiveIntegerValueOrZero(value) {\r\n    const number = Number(value);\r\n    return Number.isInteger(number) && number >= 0;\r\n}\r\n\r\n/**\r\n * Rounds a value between 0 and 100 automatically to a reasonable number of digits:\r\n *\r\n * - Generally the value is rounded to one digit.\r\n * - Between 1 and 10, the value is rounded to two digits.\r\n * - Between 0.1 and 1, the value is rounded to three digits.\r\n * - Between 0.01 and 0.1, the value is rounded to four digits.\r\n * - Otherwise it is rounded to five digits.\r\n *\r\n */\r\nexport function autoRound(value) {\r\n    let roundFactor = 0;   // Default round factor\r\n\r\n    if(value >= 100) {\r\n        roundFactor = 0;\r\n    } else if(value < 100 && value >= 10) {\r\n        roundFactor = 1;\r\n    } else if(value < 10 && value >= 1) {\r\n        roundFactor = 2;\r\n    } else if(value < 1 && value >= 0.1) {\r\n        roundFactor = 3;\r\n    } else if(value < 0.1 && value >= 0.01) {\r\n        roundFactor = 4;\r\n    } else {\r\n        roundFactor = 5;\r\n    }\r\n\r\n    return round(value, roundFactor);\r\n}\r\n\r\n/**\r\n * Simple round function to round a number to a specific number of digits.\r\n */\r\nexport function round(value, digits) {\r\n    const roundFactor = Math.pow(10, digits);\r\n    return (Math.round(value * roundFactor)) / roundFactor;\r\n}\r\n\r\n/**\r\n * Rounds any given value to the next sensible round or half-round value. Between a range of 10 and 100, everything\r\n * below 30 will be rounded to the next odden number, everthing above 30 to the next 5-round number.\r\n * @param value The value to round\r\n *\r\n * Examples:\r\n * 22.5 -> 24\r\n * 61.3 -> 65\r\n *\r\n * 0.00232 -> 0.024\r\n * 1226 -> 1400\r\n */\r\nexport function roundToNextValue(value: number): number {\r\n    const multiplier = 10000000000\r\n    const nextEvenNumber = (number) => 2 * Math.ceil(number / 2)\r\n    const nextNumberFive = (number) => 5 * Math.ceil(number / 5)\r\n\r\n    // Multiply vylue with a high value to prevent logarithmiting illegal values below 1\r\n    const ordinaryValue = value * multiplier\r\n    const numberOfDigits = Math.ceil(Math.log10(ordinaryValue))\r\n    const standardValue = (ordinaryValue / Math.pow(10, numberOfDigits)) * 100\r\n\r\n    const nextRoundValue = standardValue < 30 ? nextEvenNumber(standardValue) : nextNumberFive(standardValue)\r\n    return nextRoundValue / Math.pow(10, 12-numberOfDigits)\r\n}\r\n\r\n/**\r\n * Returns a number of fixed length with leading zeros.\r\n */\r\nexport function getNumberOfFixedLength(number: number, digits: number): string {\r\n\tlet numberString = `${number}`\r\n\twhile(numberString.length < digits) {\r\n\t\tnumberString = `0${numberString}`\r\n\t}\r\n\treturn numberString\r\n}\r\n\r\n\r\nexport function convertBooleanToDigit(value: boolean) {\r\n\treturn value === true ? 1 : 0\r\n}\r\n\r\nexport function convertStringToBoolean(value: string) {\r\n\treturn value === \"1\" ? true : false\r\n}\r\n","import {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {autoRound} from \"../calculation/MathService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as ChartConfig from \"../../config/ChartConfig\";\r\nimport {ChartDisplayData, LegendData} from \"../../types/livedata/ChartDisplayData\";\r\nimport {CATEGORY_BEVERAGE} from \"../../config/Constants\";\r\n\r\nexport function getTotalChartData(nutrientData: NutrientData, language: string, category: number | undefined): ChartDisplayData {\r\n    const alcoholValuePerc = nutrientData.baseData.alcohol !== null\r\n        ? autoRound(nutrientData.baseData.alcohol)\r\n        : null\r\n\r\n    const data = [autoRound(nutrientData.baseData.water),\r\n        autoRound(nutrientData.baseData.carbohydrates),\r\n        autoRound(nutrientData.baseData.lipids),\r\n        autoRound(nutrientData.baseData.proteins),\r\n        autoRound(nutrientData.baseData.ash)\r\n    ]\r\n\r\n    const labels: string[] = [applicationStrings.label_nutrient_water[language],\r\n        applicationStrings.label_nutrient_carbohydrates_short[language],\r\n        applicationStrings.label_nutrient_lipids[language],\r\n        applicationStrings.label_nutrient_proteins[language],\r\n        applicationStrings.label_nutrient_ash[language]]\r\n\r\n    const colors = [\r\n        ChartConfig.color_water,\r\n        ChartConfig.color_carbs,\r\n        ChartConfig.color_lipids,\r\n        ChartConfig.color_proteins,\r\n        ChartConfig.color_ash,\r\n    ]\r\n\r\n    if(alcoholValuePerc !== null && (category === CATEGORY_BEVERAGE || category === undefined)) {\r\n        data.push(alcoholValuePerc)\r\n        labels.push(applicationStrings.label_nutrient_alcohol[language])\r\n        colors.push(ChartConfig.color_alcohol)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: data,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getNutrientChartData(nutrientData: NutrientData, language: string, showDetails: boolean,\r\n                                     category: number | undefined): ChartDisplayData {\r\n    const totalValue = nutrientData.baseData.carbohydrates + nutrientData.baseData.lipids + nutrientData.baseData.proteins;\r\n\r\n    const sugar = nutrientData.carbohydrateData?.sugar ? nutrientData.carbohydrateData.sugar : 0\r\n    const dietaryFibers = nutrientData.baseData.dietaryFibers ? nutrientData.baseData.dietaryFibers : 0\r\n\r\n    let carbValue = showDetails ? (nutrientData.baseData.carbohydrates - sugar - dietaryFibers)\r\n        : nutrientData.baseData.carbohydrates;\r\n\r\n    if (carbValue < 0) {\r\n        carbValue = 0\r\n    }\r\n\r\n    const carbValuePerc = autoRound(carbValue / totalValue * 100)\r\n    const sugarValuePerc = autoRound(sugar / totalValue * 100)\r\n    const dietaryFibersPerc = autoRound(dietaryFibers / totalValue * 100)\r\n    const lipidValuePerc = autoRound(nutrientData.baseData.lipids / totalValue * 100)\r\n    const proteinsValuePerc = autoRound(nutrientData.baseData.proteins / totalValue * 100)\r\n    const alcoholValuePerc = nutrientData.baseData.alcohol !== null\r\n        ? autoRound(nutrientData.baseData.alcohol / totalValue * 100)\r\n        : null\r\n\r\n    const labels = [applicationStrings.label_nutrient_lipids[language],\r\n        applicationStrings.label_nutrient_proteins[language],\r\n        applicationStrings.label_nutrient_carbohydrates_short[language]]\r\n\r\n    const values = [lipidValuePerc, proteinsValuePerc, carbValuePerc];\r\n\r\n    const colors = [\r\n        ChartConfig.color_lipids,\r\n        ChartConfig.color_proteins,\r\n        ChartConfig.color_carbs\r\n    ];\r\n\r\n    if (alcoholValuePerc !== null && (category === CATEGORY_BEVERAGE || category === undefined)) {\r\n        labels.push(applicationStrings.label_nutrient_alcohol[language])\r\n        values.push(alcoholValuePerc)\r\n        colors.push(ChartConfig.color_alcohol)\r\n    }\r\n\r\n    if (showDetails) {\r\n        if (sugarValuePerc > 0) {\r\n            labels.push(applicationStrings.label_nutrient_sugar[language]);\r\n            values.push(sugarValuePerc);\r\n            colors.push(ChartConfig.color_carbs_sugar);\r\n        }\r\n        if (dietaryFibersPerc > 0) {\r\n            labels.push(applicationStrings.label_nutrient_dietaryFibers_short[language]);\r\n            values.push(dietaryFibersPerc);\r\n            colors.push(ChartConfig.color_carbs_dietaryFibers);\r\n        }\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values,\r\n        colors: colors\r\n    }\r\n}\r\n\r\nexport function getBaseChartLegendData(lang: string, showDetails: boolean, category: number | undefined): LegendData[] {\r\n    const legendData: LegendData[] = [\r\n        {\r\n            item: applicationStrings.label_nutrient_water[lang],\r\n            color: ChartConfig.color_water,\r\n            separateNextElement: true\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids[lang],\r\n            color: ChartConfig.color_lipids\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_proteins[lang],\r\n            color: ChartConfig.color_proteins\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_carbohydrates_short[lang],\r\n            color: ChartConfig.color_carbs,\r\n        }\r\n    ];\r\n\r\n    if(category === CATEGORY_BEVERAGE || category === undefined) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_alcohol[lang],\r\n            color: ChartConfig.color_alcohol,\r\n        })\r\n    }\r\n\r\n    if (showDetails) {\r\n        legendData.push(\r\n            {\r\n                item: applicationStrings.label_nutrient_sugar[lang],\r\n                color: ChartConfig.color_carbs_sugar,\r\n                indent: 1,\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_dietaryFibers[lang],\r\n                color: ChartConfig.color_carbs_dietaryFibers,\r\n                indent: 1,\r\n                separateNextElement: true\r\n            }\r\n        );\r\n\r\n    }\r\n\r\n    legendData.push({\r\n        item: applicationStrings.label_nutrient_ash[lang],\r\n        color: ChartConfig.color_ash\r\n    })\r\n\r\n    return legendData;\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE, TAB_BASE_DATA} from \"../../../config/Constants\";\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BaseDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {ChartDisplayData} from \"../../../types/livedata/ChartDisplayData\";\r\nimport {getBaseChartLegendData, getNutrientChartData, getTotalChartData} from \"../../../service/chartdata/BaseChartDataService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {GA_ACTION_DATAPANEL_BASEDATA_CONFIG, GA_CATEGORY_DATAPANEL} from \"../../../config/GA_Events\";\r\n\r\nexport default function BaseDataChart(props: BaseDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.baseChartConfig\r\n            : initialChartConfigData.baseChartConfig\r\n\r\n    const showDetailsProp = chartConfig.showDetails !== undefined\r\n        ? chartConfig.showDetails\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.baseChartConfig.showDetails\r\n            : initialChartConfigData.baseChartConfig.showDetails\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [showDetails, setShowDetails] = useState<boolean>(showDetailsProp)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse, TAB_BASE_DATA))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setShowDetails(showDetailsProp)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse, TAB_BASE_DATA))\r\n        updateChartConfig()\r\n    }, [chartType, showDetails, showLegend, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData\r\n            if (chartType !== currentConfig.baseChartConfig.chartType\r\n                || showDetails !== currentConfig.baseChartConfig.showDetails\r\n                || showLegend !== currentConfig.baseChartConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...currentConfig,\r\n                    baseChartConfig: {\r\n                        chartType: chartType,\r\n                        showDetails: showDetails,\r\n                        showLegend: showLegend\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const createTotalChartData = () => {\r\n        const category = props.selectedFoodItem.foodClass?.category\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const chartDisplayData: ChartDisplayData = getTotalChartData(nutrientData, lang, category)\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_chart_totalComposition[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n    const createNutrientChartData = () => {\r\n        const category = props.selectedFoodItem.foodClass?.category\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const chartDisplayData: ChartDisplayData = getNutrientChartData(nutrientData, lang, showDetails, category)\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_chart_nutrientComposition[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_BASEDATA_CONFIG, GA_CATEGORY_DATAPANEL, value, eventValue)\r\n        setChartType(value)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const handleLegendCheckboxClick = () => {\r\n        setShowLegend(!showLegend)\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        const label = \"legend: \" + !showLegend\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_BASEDATA_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const handleDetailsCheckboxClick = () => {\r\n        setShowDetails(!showDetails)\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        const label = \"details: \" + !showDetails\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_BASEDATA_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const legendAllowed = showLegend && chartType === CHART_TYPE_PIE\r\n\r\n    const getOptions = (title) => {\r\n        return chartType === CHART_TYPE_BAR ? getBarChartOptions(title, \"%\") : getPieChartOptions(title, \"%\")\r\n    }\r\n\r\n\r\n    const renderSubChart = (title: string, chartData: any) => {\r\n        if (!chartData) {\r\n            return <div/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie\r\n                    data={chartData}\r\n                    key={'chart ' + chartHeight}\r\n                    height={chartHeight}\r\n                    width={ChartConfig.basedata_piechart_width}\r\n                    options={getOptions(title)}/>\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar\r\n                    data={chartData}\r\n                    key={'chart ' + chartHeight}\r\n                    height={chartHeight}\r\n                    width={ChartConfig.basedata_barchart_width}\r\n                    options={getOptions(title)}/>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const totalChartData = createTotalChartData();\r\n    const nutrientChartData = createNutrientChartData();\r\n\r\n    const totalChartDataTitle = applicationStrings.label_chart_totalComposition[lang]\r\n    const nutrientChartDataTitle = applicationStrings.label_chart_nutrientComposition[lang]\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n    const justifyContent = props.directCompareUse ? \"center\" : \"left\"\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"d-flex text-align-center\" style={{justifyContent: justifyContent}}>\r\n                <div className=\"d-inline-block\">\r\n                    <div className=\"row\" style={{height: containerHeight}}\r\n                         key={\"base chart container \" + containerHeight}>\r\n                        <div className=\"col-6\">\r\n                            <div>{renderSubChart(totalChartDataTitle, totalChartData)}</div>\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                            <div>{renderSubChart(nutrientChartDataTitle, nutrientChartData)}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {legendAllowed &&\r\n                <div className=\"d-inline-block float-right\">\r\n                    <CustomLegend legendData={getBaseChartLegendData(lang, showDetails, props.selectedFoodItem.foodClass?.category)}/>\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareUse &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           showDetails={showDetails}\r\n                                           detailsCheckboxAvailable={true}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckboxClick}\r\n                                           handleDetailsCheckboxClick={handleDetailsCheckboxClick}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","export const PAL_CATEGORY_1 = 1.2;\r\nexport const PAL_CATEGORY_2 = 1.4;\r\nexport const PAL_CATEGORY_3 = 1.6;\r\nexport const PAL_CATEGORY_4 = 1.8;\r\nexport const PAL_CATEGORY_5 = 2.1;\r\nexport const PAL_CATEGORY_6 = 2.4;\r\nexport const PAL_CATEGORY_7 = 2.8;","import {SEX_MALE} from '../../config/Constants';\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as EnergyConstants from '../../config/EnergyConstants'\r\nimport {PalCategory} from \"../../types/livedata/PalCategory\";\r\n\r\n\r\n/**\r\n * Creates a list of PAL categories with name and value for the user settings form.\r\n */\r\nexport function getPalCategories(language: string): Array<PalCategory> {\r\n    const palCategories = [\r\n        {label: createPalCategoryName(language, 1), value: EnergyConstants.PAL_CATEGORY_1},\r\n        {label: createPalCategoryName(language, 2), value: EnergyConstants.PAL_CATEGORY_2},\r\n        {label: createPalCategoryName(language, 3), value: EnergyConstants.PAL_CATEGORY_3},\r\n        {label: createPalCategoryName(language, 4), value: EnergyConstants.PAL_CATEGORY_4},\r\n        {label: createPalCategoryName(language, 5), value: EnergyConstants.PAL_CATEGORY_5},\r\n        {label: createPalCategoryName(language, 6), value: EnergyConstants.PAL_CATEGORY_6},\r\n        {label: createPalCategoryName(language, 7), value: EnergyConstants.PAL_CATEGORY_7},\r\n    ];\r\n\r\n    return palCategories;\r\n}\r\n\r\n/**\r\n * Returns the PAL category number of a PAL value.\r\n *\r\n * value: The PAL value, e.g. 1.4 or 1.6.\r\n */\r\nexport function getPalCategory(value: number): number {\r\n    switch(value) {\r\n        case EnergyConstants.PAL_CATEGORY_1:\r\n            return 1\r\n        case EnergyConstants.PAL_CATEGORY_2:\r\n            return 2\r\n        case EnergyConstants.PAL_CATEGORY_3:\r\n            return 3\r\n        case EnergyConstants.PAL_CATEGORY_4:\r\n            return 4\r\n        case EnergyConstants.PAL_CATEGORY_5:\r\n            return 5\r\n        case EnergyConstants.PAL_CATEGORY_6:\r\n            return 6\r\n        case EnergyConstants.PAL_CATEGORY_7:\r\n            return 7\r\n        default:\r\n            return 1\r\n    }\r\n}\r\n\r\n\r\nexport function getPalValue(palCategory: number): number {\r\n\tswitch(palCategory) {\r\n        case 1:\r\n            return EnergyConstants.PAL_CATEGORY_1\r\n        case 2:\r\n            return EnergyConstants.PAL_CATEGORY_2\r\n        case 3:\r\n            return EnergyConstants.PAL_CATEGORY_3\r\n        case 4:\r\n            return EnergyConstants.PAL_CATEGORY_4\r\n        case 5:\r\n            return EnergyConstants.PAL_CATEGORY_5\r\n        case 6:\r\n            return EnergyConstants.PAL_CATEGORY_6\r\n        case 7:\r\n            return EnergyConstants.PAL_CATEGORY_7\r\n        default:\r\n            return EnergyConstants.PAL_CATEGORY_1\r\n    }\r\n}\r\n\r\n\r\nfunction createPalCategoryName(language, category): string {\r\n    const languageLabel = `palcat_name_${category}`;\r\n    const name = applicationStrings[languageLabel][language]\r\n\r\n    const energyLabel = `PAL_CATEGORY_${category}`;\r\n    const value = EnergyConstants[energyLabel];\r\n    return `${name} (${value})`;\r\n}\r\n\r\n\r\n/**\r\n * Calculates the Basal Metabolic Rate (BMR) of a person.\r\n */\r\nexport function calculateBMR(age: number, size: number, weight: number, sex: string): number {\r\n    if(sex === SEX_MALE) {\r\n        const bmr = 3.4 * weight + 15.3 * size - 6.8 * age - 961;\r\n        return Math.round(bmr);\r\n    } else {\r\n        const bmr = 2.4 * weight + 9.0 * size - 4.7 * age - 65;\r\n        return Math.round(bmr);\r\n    }\r\n}\r\n\r\n/**\r\n * Calculates the total energy consumption of a person in one day.\r\n *\r\n * bmr: The bmr value.\r\n * palValue: The pal value\r\n * leisureSports: Specifies whether leisure sports is performed or not (+0.3 PAL).\r\n */\r\nexport function calculateTotalEnergyConsumption(bmr: number, palValue: number, leisureSports: boolean): number {\r\n    if(leisureSports) {\r\n        palValue += 0.3;\r\n    }\r\n\r\n    return bmr * palValue;\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {Bar, Chart} from \"react-chartjs-2\";\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {calculateBMR, calculateTotalEnergyConsumption} from \"../../../service/calculation/EnergyService\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {default_chart_height} from \"../../../config/ChartConfig\";\r\nimport annotationPlugin from 'chartjs-plugin-annotation'\r\nimport {ChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {isMobileDevice, useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function EnergyDataChart(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const nutrientData = getNutrientData(props.selectedFoodItem);\r\n    const energy100g = nutrientData.baseData.energy;\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n    }, [chartHeight])\r\n\r\n    if (!applicationContext || !energy100g) {\r\n        return <div>No data.</div>\r\n    }\r\n\r\n    const createEnergyLevelChart = () => {\r\n        const averagePortion = props.selectedFoodItem.portion.amount\r\n        const energyPortion = Math.round(energy100g / 100 * averagePortion);\r\n\r\n        return {\r\n            labels: [\"100 g\", \"Portion\"],\r\n            datasets: [{\r\n                data: [energy100g,\r\n                    energyPortion\r\n                ],\r\n                backgroundColor: [\r\n                    ChartConfig.color_yellow,\r\n                    ChartConfig.color_red,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n\r\n        }\r\n    }\r\n\r\n\r\n    const renderUserDataInfoPage = () => {\r\n        const showInfotext = !(isMobileDevice() && props.directCompareUse)\r\n\r\n        return (\r\n            <div style={{paddingLeft: \"50px\", paddingTop: \"20px\"}}>\r\n                {!isMobileDevice()\r\n                    ? <h5><b>{`${energy100g}`} kcal / 100 g</b></h5>\r\n                    : <h6><b>{`${energy100g}`} kcal / 100 g</b></h6>\r\n                }\r\n\r\n                {showInfotext &&\r\n                <div style={{paddingTop: \"30px\"}}>\r\n                    {applicationContext.userData.initialValues ?\r\n                        (<div>\r\n                            <p>{applicationStrings.text_setUserdata_p1[lang]}</p>\r\n                            <p>{applicationStrings.text_setUserdata_p2[lang]}</p>\r\n                        </div>)\r\n                        :\r\n                        <p>{applicationStrings.text_setUserdata_p3[lang]}</p>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const getOptions = () => {\r\n        const {age, size, weight, sex, palValue, leisureSports} = applicationContext.userData\r\n        const bmr = calculateBMR(age, size, weight, sex);\r\n        const totalEnergy = calculateTotalEnergyConsumption(bmr, palValue, leisureSports);\r\n\r\n        if (props.directCompareUse) {\r\n\r\n        }\r\n\r\n        const annotation1 = {\r\n            drawTime: 'afterDatasetsDraw',\r\n            type: 'line',\r\n            mode: 'horizontal',\r\n            scaleID: 'y-axis-0',\r\n            yMin: bmr,\r\n            yMax: bmr,\r\n            borderColor: ChartConfig.color_line_red,\r\n            borderWidth: 4,\r\n            label: {\r\n                enabled: true,\r\n                content: applicationStrings.label_chart_bmr[lang]\r\n            },\r\n        }\r\n\r\n        const annotation2 =\r\n            {\r\n                drawTime: 'afterDatasetsDraw',\r\n                type: 'line',\r\n                mode: 'horizontal',\r\n                scaleID: 'y-axis-0',\r\n                yMin: totalEnergy,\r\n                yMax: totalEnergy,\r\n                borderColor: ChartConfig.color_line_blue,\r\n                borderWidth: 4,\r\n                label: {\r\n                    enabled: true,\r\n                    content: applicationStrings.label_chart_energyExpenditure[lang]\r\n                }\r\n            }\r\n\r\n        const annotation = {\r\n            annotations: {\r\n                line1: annotation1,\r\n                line2: !(props.directCompareUse && isMobileDevice()) ? annotation2 : undefined,\r\n            }\r\n        }\r\n\r\n        let options: any = getBarChartOptions(applicationStrings.label_charttype_energy[languageContext.language], \"kCal\");\r\n        options = {\r\n            ...options, plugins: {\r\n                ...options.plugins,\r\n                annotation: annotation\r\n            }\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    const data = createEnergyLevelChart();\r\n    if (!data) {\r\n        return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n    }\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row \" style={{height: containerHeight}} key={\"energy container \" + containerHeight}>\r\n                <div className=\"col-6\">\r\n                    <div>\r\n                        <Bar\r\n                            data={data}\r\n                            key={'chart ' + chartHeight}\r\n                            height={chartHeight}\r\n                            options={getOptions()}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {renderUserDataInfoPage()}\r\n                </div>\r\n            </div>\r\n            <div style={{height: \"64px\"}}></div>\r\n        </div>\r\n    )\r\n\r\n}","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {AMOUNT_PORTION, GRAM} from \"../../config/Constants\";\r\nimport {BarChartConfigurationProps} from \"../../types/livedata/ChartPropsData\";\r\n\r\nexport function BarChartConfigurationForm(props: BarChartConfigurationProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const label_portion = props.selectedFoodItem\r\n        ?`${applicationStrings.label_portion[lang]} (${props.selectedFoodItem.portion.amount} g)`\r\n        : applicationStrings.label_portion_selected[lang]\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <form className=\"form-inline form-group\">\r\n                    <Form.Label className={\"form-elements\"}>\r\n                        <b>{applicationStrings.label_reference[lang]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check className=\"form-radiobutton mr-4\"\r\n                                type=\"radio\"\r\n                                inline={true}\r\n                                label={\"100g\"}\r\n                                value={GRAM}\r\n                                checked={(props.portionType === GRAM)}\r\n                                onChange={props.handleRadioButtonClick}\r\n                    />\r\n                    <Form.Check className=\"form-radiobutton form-horizontal-separation\"\r\n                                type=\"radio\"\r\n                                inline={true}\r\n                                label={label_portion}\r\n                                value={AMOUNT_PORTION}\r\n                                checked={props.portionType === AMOUNT_PORTION}\r\n                                onChange={props.handleRadioButtonClick}\r\n                    />\r\n                    <Form.Check className=\"form-radiobutton\"\r\n                                inline={true}\r\n                                label={applicationStrings.checkbox_expand100g[lang]}\r\n                                checked={props.expand100}\r\n                                onChange={props.handleExpandCheckboxClick}>\r\n                    </Form.Check>\r\n                    {props.handleSynchronize !== undefined && props.synchronize !== undefined &&\r\n                    < Form.Check className=\"form-radiobutton\"\r\n                        inline={true}\r\n                        label={applicationStrings.checkbox_synchronize[lang]}\r\n                        checked={props.synchronize}\r\n                        onChange={props.handleSynchronize}>\r\n                        </Form.Check>\r\n                    }\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import * as Constants from '../../config/Constants';\r\nimport DietaryRequirement, {\r\n    RequirementAgeGroupData,\r\n    RequirementData\r\n} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport {SEX_MALE} from \"../../config/Constants\";\r\n\r\n/*\r\n * Determines the daily requirements of a vitamin or mineral for a specific user.\r\n *\r\n * dailyRequirementObject: A vitamin or mineral requirement object (e.g. for Vitamin C or Iron).\r\n * userData: The user data object containing the user data.\r\n */\r\nexport function determineDailyRequirement(dailyRequirementObject: RequirementData, userData: UserData): number {\r\n    let ageGroupRequirements: RequirementAgeGroupData\r\n\r\n    if (userData.age >= 65) {\r\n        ageGroupRequirements = dailyRequirementObject.senior;\r\n    } else if (userData.age >= 51) {\r\n        ageGroupRequirements = dailyRequirementObject.preSenior;\r\n    } else if (userData.age >= 26) {\r\n        ageGroupRequirements = dailyRequirementObject.midLifeAdult;\r\n    } else if (userData.age >= 19) {\r\n        ageGroupRequirements = dailyRequirementObject.youngAdult;\r\n    } else if (userData.age >= 15) {\r\n        ageGroupRequirements = dailyRequirementObject.youth;\r\n    } else {\r\n        ageGroupRequirements = dailyRequirementObject.youth;   // Default case (should not occur!)\r\n    }\r\n\r\n    let value: number\r\n    if (userData.sex === SEX_MALE) {\r\n        value = ageGroupRequirements.male;\r\n    } else {\r\n        if (userData.pregnant) {\r\n            value = ageGroupRequirements.femalePregnant ? ageGroupRequirements.femalePregnant : ageGroupRequirements.female;\r\n        } else if (userData.breastFeeding) {\r\n            value = ageGroupRequirements.femaleBreastFeeding ? ageGroupRequirements.femaleBreastFeeding : ageGroupRequirements.female;\r\n        } else {\r\n            value = ageGroupRequirements.female;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/*\r\n * Determines the ratio (percentage) of vitamins/minerals in food compared to the daily requirements of the user.\r\n * Example: The daily requirements of Vitamin C is 120 mg for the user. The food contains 24 mg C. The ratio is 0.2 (20 %).\r\n *\r\n * dailyRequirementObject: A vitamin or mineral requirement object (e.g. for Vitamin C or Iron).\r\n * userData: The user data object containing the user data.\r\n * portionSize: The portion size in gram (100 = default value, i.e., 100 gram).\r\n * amountInFood: The amount of the vitamin or mineral in the food (which is always 100 gram).\r\n */\r\nexport function determineFoodRequirementRatio(dailyRequirementObject: RequirementData, amountInFood: number, portionSize: number, userData: UserData): number {\r\n    const dailyRequirement = determineDailyRequirement(dailyRequirementObject, userData);\r\n    if (portionSize === 100) {\r\n        return Math.round(amountInFood / dailyRequirement * 1000) / 10;\r\n    } else {   // Calculate ration for a special amount (portion):\r\n        return Math.round(amountInFood / dailyRequirement * (portionSize * 10)) / 10;\r\n    }\r\n}\r\n\r\n\r\n/*\r\n * Determines the ratio (percentage) of proteins in food compared to the daily requirements of the user.\r\n * Example: The daily requirements of Lysine is 30 mg per kg. The user weights 80 kg. His dietary requirement\r\n * is thus 30 * 80 = 2400 mg per day. The food contains 240 mg C. The ratio is 0.1 (10 %).\r\n *\r\n * dailyRequirementObject: A protein requirement object for a specific protein (e.g. for Lycin).\r\n * userData: The user data object containing the user data.\r\n * portionSize: The portion size in gram (100 = default value, i.e., 100 gram).\r\n * amountInFood: The amount of the vitamin or mineral in the food (which is always 100 gram).\r\n */\r\nexport function determineProteinRequirementRatio(requirement: number, amountInFood: number, portionSize: number, userData: UserData) {\r\n    const dailyRequirement = (requirement * userData.weight) / 1000;\r\n\r\n    if (portionSize === 100) {\r\n        return Math.round(amountInFood / dailyRequirement * 1000) / 10;\r\n    } else {   // Calculate ration for a special amount (portion):\r\n        return Math.round(amountInFood / dailyRequirement * (portionSize * 10)) / 10;\r\n    }\r\n}\r\n\r\n\r\nexport function convertAbsoluteValueToDailyRequirement(dailyRequirements: DietaryRequirement, item: string, amount: number, userData: UserData) {\r\n    let dailyRequirementObject\r\n\r\n    if (item === Constants.DATA_VITAMINS_A) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.a;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B1) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b1;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B2) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b2;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B3) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b3;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B5) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b5;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B6) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b6;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B9) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b9;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B12) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b12;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_C) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.c;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_D) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.d;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_E) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.e;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_K) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.k;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_CALCIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.calcium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_COPPER) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.copper;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_IRON) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.iron;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_MAGNESIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.magnesium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_MANGANESE) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.manganese;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_PHOSPHORUS) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.phosphorus;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_POTASSIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.potassium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_SELENIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.selenium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_SODIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.sodium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_ZINC) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.zinc;\r\n    }\r\n\r\n    if (!dailyRequirementObject) {\r\n        return 0\r\n    }\r\n\r\n    const dailyRequirement = determineDailyRequirement(dailyRequirementObject, userData);\r\n    return Math.round(amount / dailyRequirement * 1000) / 10;\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {CHART_MINERALS, CHART_VITAMINS, GRAM} from \"../../../config/Constants\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\"\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../../charthelper/BarChartConfigurationForm\";\r\nimport {MineralVitaminChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {getMineralsChartData, getVitaminChartData} from \"../../../service/chartdata/VitaminsMineralsDataService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_MINERALS_CONFIG,\r\n    GA_ACTION_DATAPANEL_VITAMINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../../config/GA_Events\";\r\n\r\n\r\nexport default function MineralVitaminChart(props: MineralVitaminChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfigVitamins = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.vitaminChartConfig\r\n            : initialChartConfigData.vitaminChartConfig\r\n\r\n    const chartConfigMinerals = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.mineralChartConfig\r\n            : initialChartConfigData.mineralChartConfig\r\n\r\n    const [portionType_vitamins, setPortionType_vitamins] = useState<string>(chartConfigVitamins.portionType)\r\n    const [expand100_vitamins, setExpand100_vitamins] = useState<boolean>(chartConfigVitamins.expand100)\r\n    const [portionType_minerals, setPortionType_minerals] = useState<string>(chartConfigMinerals.portionType)\r\n    const [expand100_minerals, setExpand100_minerals] = useState<boolean>(chartConfigMinerals.expand100)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n    const [showBookModal, setShowBookModal] = useState<boolean>(false)\r\n    const [selectedColumnLabel, setSelectedColumnLabel] = useState<string | undefined>(undefined)\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setPortionType_vitamins(chartConfigVitamins.portionType)\r\n            setExpand100_vitamins(chartConfigVitamins.expand100)\r\n            setPortionType_minerals(chartConfigMinerals.portionType)\r\n            setExpand100_minerals(chartConfigMinerals.expand100)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [portionType_vitamins, portionType_minerals, expand100_vitamins, expand100_minerals, chartHeight, props])\r\n\r\n\r\n    if (!applicationContext || applicationContext.foodDataCorpus.dietaryRequirements === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const anyValueChanged = (): boolean => {\r\n        const config = props.selectedSubChart === CHART_VITAMINS\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.vitaminChartConfig\r\n            : applicationContext.applicationData.foodDataPanel.chartConfigData.mineralChartConfig\r\n\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            return portionType_vitamins !== config.portionType || expand100_vitamins !== config.expand100\r\n        } else {\r\n            return portionType_minerals !== config.portionType || expand100_minerals !== config.expand100\r\n        }\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (!props.directCompareConfig && anyValueChanged()) {\r\n            if (applicationContext) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    vitaminChartConfig: {\r\n                        portionType: portionType_vitamins,\r\n                        expand100: expand100_vitamins\r\n                    },\r\n                    mineralChartConfig: {\r\n                        portionType: portionType_minerals,\r\n                        expand100: expand100_minerals\r\n                    }\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const createVitaminChartData = () => {\r\n        const vitaminData = props.precalculatedData !== undefined ? props.precalculatedData : getNutrientData(props.selectedFoodItem).vitaminData;\r\n\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.vitaminRequirementData;\r\n        const userData = applicationContext.userData\r\n        const portionAmount = portionType_vitamins === GRAM ? 100 : props.selectedFoodItem.portion.amount\r\n\r\n        if (!vitaminData || !requirementData) {\r\n            return null\r\n        }\r\n\r\n        const chartDisplayData = getVitaminChartData(vitaminData, requirementData, userData, portionAmount)\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_chart_green_3\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_vitamins[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n    const createMineralChartData = () => {\r\n        const mineralData = props.precalculatedData !== undefined ? props.precalculatedData : getNutrientData(props.selectedFoodItem).mineralData;\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.mineralRequirementData;\r\n        const userData = applicationContext.userData\r\n        const portionAmount = portionType_minerals === GRAM ? 100 : props.selectedFoodItem.portion.amount\r\n\r\n        if (!mineralData || !requirementData) {\r\n            return null\r\n        }\r\n\r\n        const chartDisplayData = getMineralsChartData(mineralData, requirementData, userData, portionAmount, lang)\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_purple\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_minerals[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value=event.target.value\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_VITAMINS_CONFIG, GA_CATEGORY_DATAPANEL, value, 1)\r\n            setPortionType_vitamins(value)\r\n        } else if (props.selectedSubChart === CHART_MINERALS) {\r\n            callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_MINERALS_CONFIG, GA_CATEGORY_DATAPANEL, value, 1)\r\n            setPortionType_minerals(value)\r\n        }\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        const label = props.selectedSubChart === CHART_VITAMINS\r\n            ? \"expand100: \" + !expand100_vitamins\r\n            : \"expand100: \" + !expand100_minerals\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_VITAMINS_CONFIG, GA_CATEGORY_DATAPANEL, label, 1)\r\n            setExpand100_vitamins(!expand100_vitamins)\r\n        } else if (props.selectedSubChart === CHART_MINERALS) {\r\n            callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_MINERALS_CONFIG, GA_CATEGORY_DATAPANEL, label, 1)\r\n            setExpand100_minerals(!expand100_minerals)\r\n        }\r\n    }\r\n\r\n    const openVitaminMineralBook = (selectedColumn: string) => {\r\n        setSelectedColumnLabel(selectedColumn)\r\n        setShowBookModal(true)\r\n    }\r\n\r\n    const getOptions = (title, maxValue, data) => {\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals;\r\n        const overallMaxValue = props.directCompareConfig && props.directCompareConfig.maxValue\r\n            ? props.directCompareConfig.maxValue\r\n            : maxValue\r\n\r\n        let maxYValue\r\n        if (!props.directCompareConfig) {\r\n            if (expand100 && overallMaxValue < 100) {\r\n                maxYValue = 100\r\n            }\r\n        } else {\r\n            if (props.directCompareConfig.maxValue) {\r\n                maxYValue = props.directCompareConfig.maxValue\r\n            }\r\n            if (expand100) {\r\n                if (maxYValue === undefined) {\r\n                    if (overallMaxValue < 100) {\r\n                        maxYValue = 100\r\n                    }\r\n                } else if (maxYValue < 100) {\r\n                    maxYValue = 100\r\n                }\r\n            }\r\n        }\r\n\r\n        const getScientificVitaminName = (vitamin: string): string | null => {\r\n            const labelName = \"label_nutrient_vit_scientific_\" + vitamin.toLowerCase()\r\n            if(applicationStrings[labelName]) {\r\n                return applicationStrings[labelName][lang]\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n\r\n        let barChartOptions = getBarChartOptions(title, \"%\", maxYValue);\r\n\r\n        const handleChartClick = (c, i) => {\r\n            if(i && i[0]) {\r\n                const clickedColumnIndex = i[0].index;\r\n                const columnLabel = data.labels[clickedColumnIndex]\r\n                openVitaminMineralBook(columnLabel)\r\n            }\r\n        }\r\n\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            barChartOptions = {\r\n                ...barChartOptions, plugins: {\r\n                    ...barChartOptions.plugins, tooltip: {\r\n                        ...barChartOptions.plugins.tooltip, callbacks: {\r\n                            ...barChartOptions.plugins.tooltip.callbacks,\r\n                            title: function (context) {\r\n                                if (context && context.length > 0) {\r\n                                    const scientificName = getScientificVitaminName(context[0].label)\r\n                                    let title = `Vitamin ${context[0].label}`\r\n                                    if(scientificName) {\r\n                                        title = `${title}  (${scientificName})`\r\n                                    }\r\n                                    return title\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                onClick: handleChartClick\r\n            }\r\n        }\r\n\r\n        return barChartOptions\r\n    }\r\n\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const portionType = props.selectedSubChart === CHART_VITAMINS ? portionType_vitamins : portionType_minerals;\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals;\r\n\r\n        const barChartProps = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps} />\r\n    }\r\n\r\n\r\n    const data = props.selectedSubChart === CHART_VITAMINS ? createVitaminChartData() : createMineralChartData();\r\n    if (!data) {\r\n        return <div/>\r\n    }\r\n\r\n    const maxValue = (data && data.datasets && data.datasets.length > 0) ? Math.max(...data.datasets[0].data) : 0;\r\n\r\n    const title = props.selectedSubChart === CHART_VITAMINS ? applicationStrings.label_charttype_vitamins[lang] :\r\n        applicationStrings.label_charttype_minerals[lang];\r\n\r\n    const options = getOptions(title, maxValue, data);\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"base chart container \" + containerHeight}>\r\n                <div className={\"col-12\"}>\r\n                    <Bar\r\n                        data={data}\r\n                        key={'chart ' + chartHeight}\r\n                        height={chartHeight}\r\n                        options={options}\r\n                    />\r\n                </div>\r\n            </div>\r\n            {props.directCompareUse !== true &&\r\n            <div className=\"chart-control-button-bar\">\r\n                {renderChartConfigurationForm()}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {determineFoodRequirementRatio} from \"../calculation/DietaryRequirementService\";\r\nimport {MineralData, VitaminData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {MineralRequirementData, VitaminRequirementData} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport {ChartDisplayData} from \"../../types/livedata/ChartDisplayData\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {calculateVitaminAEquivalent} from \"../calculation/CarotenoidCalculationService\";\r\n\r\nexport function getVitaminChartData(vitaminData: VitaminData, requirementData: VitaminRequirementData, userData: UserData,\r\n                                    portionAmount: number): ChartDisplayData {\r\n    const labels: Array<string> = [];\r\n    const values: Array<number> = [];\r\n\r\n    if (vitaminData.a !== null) {\r\n        const amountA = vitaminData.a + calculateVitaminAEquivalent(vitaminData.carotenoidData)\r\n        labels.push(\"A\");\r\n        values.push(determineFoodRequirementRatio(requirementData.a, amountA, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b1 !== null) {\r\n        labels.push(\"B1\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b1, vitaminData.b1, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b2 !== null) {\r\n        labels.push(\"B2\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b2, vitaminData.b2, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b3 !== null) {\r\n        labels.push(\"B3\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b3, vitaminData.b3, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b5 !== null) {\r\n        labels.push(\"B5\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b5, vitaminData.b5, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b6 !== null) {\r\n        labels.push(\"B6\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b6, vitaminData.b6, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b9 !== null) {\r\n        labels.push(\"B9\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b9, vitaminData.b9, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b12 !== null) {\r\n        labels.push(\"B12\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b12, vitaminData.b12, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.c !== null) {\r\n        labels.push(\"C\");\r\n        values.push(determineFoodRequirementRatio(requirementData.c, vitaminData.c, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.d !== null) {\r\n        labels.push(\"D\");\r\n        values.push(determineFoodRequirementRatio(requirementData.d, vitaminData.d, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.e !== null) {\r\n        labels.push(\"E\");\r\n        values.push(determineFoodRequirementRatio(requirementData.e, vitaminData.e, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.k !== null) {\r\n        labels.push(\"K\");\r\n        values.push(determineFoodRequirementRatio(requirementData.k, vitaminData.k, portionAmount, userData));\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values\r\n    }\r\n}\r\n\r\n\r\nexport function getMineralsChartData(mineralData: MineralData, requirementData: MineralRequirementData, userData: UserData,\r\n                                     portionAmount: number, language: string): ChartDisplayData {\r\n    const labels: Array<string> = [];\r\n    const values: Array<number> = [];\r\n\r\n    if (mineralData.calcium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_calcium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.calcium, mineralData.calcium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.iron !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_iron[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.iron, mineralData.iron, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.magnesium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_magnesium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.magnesium, mineralData.magnesium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.phosphorus !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_phosphorus[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.phosphorus, mineralData.phosphorus, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.potassium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_potassimum[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.potassium, mineralData.potassium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.sodium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_sodium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.sodium, mineralData.sodium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.zinc !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_zinc[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.zinc, mineralData.zinc, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.copper !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_copper[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.copper, mineralData.copper, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.manganese !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_manganese[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.manganese, mineralData.manganese, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.selenium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_selenium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.selenium, mineralData.selenium, portionAmount, userData));\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values\r\n    }\r\n}","import {CarotenoidData} from \"../../types/nutrientdata/FoodItem\";\r\n\r\nexport function getTotalAmountOfCarotenoids(carotenoidData: CarotenoidData): number | null {\r\n    if(carotenoidData === null) {\r\n        return null\r\n    }\r\n\r\n    let amount = 0;\r\n\r\n    if(carotenoidData.caroteneAlpha) {\r\n        amount += carotenoidData.caroteneAlpha\r\n    }\r\n    if(carotenoidData.caroteneBeta) {\r\n        amount += carotenoidData.caroteneBeta\r\n    }\r\n    if(carotenoidData.cryptoxanthin) {\r\n        amount += carotenoidData.cryptoxanthin\r\n    }\r\n    if(carotenoidData.lutein) {\r\n        amount += carotenoidData.lutein\r\n    }\r\n    if(carotenoidData.lycopene) {\r\n        amount += carotenoidData.lycopene\r\n    }\r\n\r\n    return amount\r\n}\r\n\r\n/**\r\n * Calculates the total vitamin A equivalent out of the different carotenoid values\r\n * @param carotenoidData\r\n */\r\nexport function calculateVitaminAEquivalent(carotenoidData: CarotenoidData | null): number {\r\n    if(carotenoidData === null) {\r\n        return 0\r\n    }\r\n\r\n    let amount = 0;\r\n\r\n    const factorBetaCarotene = 0.1667\r\n    const factorOtherCarotenoids = 0.0833\r\n\r\n    if(carotenoidData.caroteneAlpha) {\r\n        amount += (carotenoidData.caroteneAlpha * factorOtherCarotenoids)\r\n    }\r\n    if(carotenoidData.caroteneBeta) {\r\n        amount += (carotenoidData.caroteneBeta * factorBetaCarotene)\r\n    }\r\n    if(carotenoidData.cryptoxanthin) {\r\n        amount += (carotenoidData.cryptoxanthin * factorOtherCarotenoids)\r\n    }\r\n    if(carotenoidData.lutein) {\r\n        amount += (carotenoidData.lutein * factorOtherCarotenoids)\r\n    }\r\n    if(carotenoidData.lycopene) {\r\n        amount += (carotenoidData.lycopene * factorOtherCarotenoids)\r\n    }\r\n\r\n    return amount\r\n}","import {LipidData, OmegaData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {autoRound} from \"../calculation/MathService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as ChartConfig from \"../../config/ChartConfig\";\r\nimport {ChartDisplayData, LegendData} from \"../../types/livedata/ChartDisplayData\";\r\n\r\nexport function getTotalLipidsChartData(lipidsData: LipidData, hideRemainders: boolean, portionAmount: number,\r\n                                           language: string): ChartDisplayData {\r\n    const {saturated, unsaturatedMono, unsaturatedPoly} = lipidsData\r\n\r\n    const valueSaturated = autoRound(saturated!! / portionAmount * 100);\r\n    const valueUnsaturatedMono = autoRound(unsaturatedMono!! / portionAmount * 100);\r\n    const valueUnsaturatedPoly = autoRound(unsaturatedPoly!! / portionAmount * 100);\r\n\r\n    let valueRemainder = portionAmount - (saturated!! + unsaturatedMono!! + unsaturatedPoly!!);\r\n    valueRemainder = autoRound(valueRemainder / portionAmount * 100);\r\n\r\n    if (valueRemainder < 0) {\r\n        valueRemainder = 0\r\n    }\r\n\r\n    const labels: string[] = [applicationStrings.label_nutrient_lipids_saturated_short[language],\r\n        applicationStrings.label_nutrient_lipids_unsaturated_mono_short[language],\r\n        applicationStrings.label_nutrient_lipids_unsaturated_poly_short[language]]\r\n\r\n    const colors: string[] = [\r\n        ChartConfig.color_lipids_saturated,\r\n        ChartConfig.color_lipids_unsaturated_mono,\r\n        ChartConfig.color_lipids_unsaturated_poly]\r\n\r\n    const values: number[] = [valueSaturated,\r\n        valueUnsaturatedMono,\r\n        valueUnsaturatedPoly]\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_nutrient_remainder[language])\r\n        colors.push(ChartConfig.color_lipids_misc)\r\n        values.push(valueRemainder)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getOmegaChartData(omegaData: OmegaData, hideRemainders: boolean, totalAmount: number, lang: string): ChartDisplayData | null {\r\n    if (omegaData === null || omegaData.omega3 === null || omegaData.omega6 === null || omegaData.uncertain === null) {\r\n        return null;\r\n    }\r\n\r\n    const valueOmega3 = autoRound(omegaData.omega3 / totalAmount * 100);\r\n    const valueOmega6 = autoRound(omegaData.omega6 / totalAmount * 100);\r\n    const valueUncertain = autoRound(omegaData.uncertain / totalAmount * 100);\r\n\r\n    const labels: string[] = [applicationStrings.label_nutrient_omega3[lang],\r\n        applicationStrings.label_nutrient_omega6[lang]]\r\n\r\n    const values: number[] = [valueOmega3,\r\n        valueOmega6]\r\n\r\n    const colors: string[] = [\r\n        ChartConfig.color_lipids_omega3,\r\n        ChartConfig.color_lipids_omega6\r\n    ]\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_unknown[lang])\r\n        colors.push(ChartConfig.color_lipids_misc)\r\n        values.push(valueUncertain)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getLipidsBaseChartLegend(language: string): LegendData[] {\r\n    return [\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids_saturated[language],\r\n            color: ChartConfig.color_lipids_saturated,\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids_unsaturated_mono[language],\r\n            color: ChartConfig.color_lipids_unsaturated_mono\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids_unsaturated_poly[language],\r\n            color: ChartConfig.color_lipids_unsaturated_poly,\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_remainder[language],\r\n            color: ChartConfig.color_lipids_misc\r\n        },\r\n    ];\r\n}\r\n\r\nexport function getLipidsOmegaChartLegend(language: string): LegendData[] {\r\n    return [\r\n        {\r\n            item: applicationStrings.label_nutrient_omega3[language],\r\n            color: ChartConfig.color_lipids_omega3,\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_omega6[language],\r\n            color: ChartConfig.color_lipids_omega6\r\n        },\r\n        {\r\n            item: applicationStrings.label_unknown[language],\r\n            color: ChartConfig.color_lipids_misc,\r\n        },\r\n    ];\r\n}","import {useContext, useEffect, useState} from \"react\";\r\n\r\nimport {default_chart_height} from \"../../../config/ChartConfig\"\r\nimport * as Constants from \"../../../config/Constants\"\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE, LIPIDS_DATA_BASE} from \"../../../config/Constants\"\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {OmegaData} from \"../../../types/nutrientdata/FoodItem\";\r\nimport {initialChartConfigData, minimalOmegaRatio} from \"../../../config/ApplicationSetting\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {LipidsDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {\r\n    getLipidsBaseChartLegend,\r\n    getLipidsOmegaChartLegend,\r\n    getOmegaChartData,\r\n    getTotalLipidsChartData\r\n} from \"../../../service/chartdata/LipidsChartDataService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_BASEDATA_CONFIG,\r\n    GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_ACTION_DATAPANEL_PROTEINS_CONFIG,\r\n    GA_ACTION_DATAPANEL_VITAMINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../../config/GA_Events\";\r\n\r\nexport default function LipidsDataChart(props: LipidsDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.lipidsChartConfig\r\n            : initialChartConfigData.lipidsChartConfig\r\n\r\n    const initialExpand100 =  props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.expand100\r\n        : chartConfig.expand100\r\n\r\n    const initialHideRemainders =  props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.hideRemainders\r\n        : chartConfig.hideRemainders\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [hideRemainders, setShowHideRemainders] = useState<boolean>(initialHideRemainders ? initialHideRemainders : false)\r\n    const [expand100, setExpand100] = useState<boolean>(initialExpand100 ? initialExpand100 : false)\r\n    const [subChart, setSubChart] = useState<string>(chartConfig.subChart ? chartConfig.subChart : LIPIDS_DATA_BASE)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setSubChart(chartConfig.subChart ? chartConfig.subChart : LIPIDS_DATA_BASE)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [chartType, showLegend, hideRemainders, expand100, subChart, chartHeight, windowSize, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData.lipidsChartConfig\r\n            if (chartType !== currentConfig.chartType\r\n                || hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100\r\n                || subChart !== currentConfig.subChart\r\n                || showLegend !== currentConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    lipidsChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: showLegend,\r\n                        subChart: subChart,\r\n                        hideRemainders: hideRemainders,\r\n                        expand100: expand100\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        } else if(applicationContext) {\r\n            const currentConfig = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n            if (hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100) {\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.expand100 = expand100\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.hideRemainders = hideRemainders\r\n            }\r\n        }\r\n    }\r\n\r\n    const totalLipidsAmount = getNutrientData(props.selectedFoodItem).baseData.lipids;\r\n\r\n    const handleChartSelectionChange = (event: any) => {\r\n        const value = event.target.value\r\n        const eventLabel = props.directCompareUse ? 2 : 1\r\n        if (props.directCompareConfig && props.directCompareConfig.handleSubchartChange) {\r\n            props.directCompareConfig.handleSubchartChange(event)\r\n        } else {\r\n            setSubChart(value)\r\n        }\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, value, eventLabel)\r\n    }\r\n\r\n    const handleExpand100Change = () => {\r\n        const label = \"expand100: \" + !expand100\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleHideRemaindersCheckbox = () => {\r\n        const label = \"hideRemainders: \" + !hideRemainders\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setShowHideRemainders(!hideRemainders)\r\n    }\r\n\r\n    const createTotalChartData = (totalAmount: number): any => {\r\n        const chartDisplayData  = getTotalLipidsChartData(lipidData, hideRemainders, totalAmount, lang)\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const createOmegaChartData = (totalAmount: number, omegaData: OmegaData) => {\r\n        const chartDisplayData = getOmegaChartData(omegaData, hideRemainders, totalAmount, lang)\r\n        if(!chartDisplayData) {\r\n            return null\r\n        }\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, value, eventValue)\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        const label = \"legend: \" + !showLegend\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const lipidData = getNutrientData(props.selectedFoodItem).lipidData;\r\n\r\n    let omegaDataAvailabe = false\r\n    if (lipidData.omegaData && lipidData.omegaData.uncertainRatio && lipidData.omegaData.uncertainRatio <= minimalOmegaRatio) {\r\n        omegaDataAvailabe = true\r\n    }\r\n\r\n    const chartColType = chartType === CHART_TYPE_PIE ? \"col-6\" : \"col-8\";\r\n\r\n    const getOptions = () => {\r\n        let title;\r\n\r\n        if (subChart === Constants.LIPIDS_DATA_BASE) {\r\n            title = applicationStrings.label_charttype_lipids_base_title[lang]\r\n        } else if (subChart === Constants.LIPIDS_DATA_OMEGA) {\r\n            title = applicationStrings.label_charttype_lipids_omega_title[lang];\r\n        }\r\n\r\n        if (chartType === CHART_TYPE_BAR) {\r\n            return expand100 ? getBarChartOptions(title, \"%\", 100) : getBarChartOptions(title, \"%\");\r\n        } else {\r\n            return getPieChartOptions(title, \"%\");\r\n        }\r\n    }\r\n\r\n    const renderChartSelector = () => {\r\n        return (\r\n            <div>\r\n                <Form>\r\n                    <Form.Label>\r\n                        <b>{applicationStrings.label_datatype[languageContext.language]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_charttype_lipids_base[lang]}\r\n                                type=\"radio\"\r\n                                value={Constants.LIPIDS_DATA_BASE}\r\n                                checked={subChart === Constants.LIPIDS_DATA_BASE}\r\n                                onChange={handleChartSelectionChange}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_charttype_lipids_omega[lang]}\r\n                                type=\"radio\"\r\n                                value={Constants.LIPIDS_DATA_OMEGA}\r\n                                checked={subChart === Constants.LIPIDS_DATA_OMEGA}\r\n                                onChange={handleChartSelectionChange}>\r\n                    </Form.Check>\r\n                </Form>\r\n                <hr/>\r\n                <Form>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_expand100g[lang]}\r\n                                type=\"checkbox\"\r\n                                disabled={chartType === Constants.CHART_TYPE_PIE}\r\n                                checked={expand100}\r\n                                onChange={handleExpand100Change}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_chartoption_hideRemainders[lang]}\r\n                                type=\"checkbox\"\r\n                                disabled={subChart === Constants.LIPIDS_DATA_OMEGA}\r\n                                checked={hideRemainders}\r\n                                onChange={handleHideRemaindersCheckbox}>\r\n                    </Form.Check>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderChart = (lipidsType) => {\r\n        const {saturated, unsaturatedMono, unsaturatedPoly, omegaData} = lipidData\r\n\r\n        let data\r\n        if (lipidsType === Constants.LIPIDS_DATA_BASE) {\r\n            if (!saturated || !unsaturatedMono || !unsaturatedPoly) {\r\n                return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n            }\r\n            data = createTotalChartData(totalLipidsAmount);\r\n        } else if (lipidsType === Constants.LIPIDS_DATA_OMEGA) {\r\n            if (omegaData) {\r\n                data = createOmegaChartData(totalLipidsAmount, omegaData)\r\n            }\r\n\r\n            if (!omegaData) {\r\n                return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n            }\r\n        }\r\n\r\n        if (!data) {\r\n            return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    //const height = props.directCompareUse === true ? direct_compare_chartheight : default_chart_height\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"lipids container \" + containerHeight}>\r\n                <div className=\"col-3 text-align-center\">\r\n                    {renderChartSelector()}\r\n                </div>\r\n                <div className={chartColType}>\r\n                    {subChart === Constants.LIPIDS_DATA_BASE &&\r\n                    renderChart(Constants.LIPIDS_DATA_BASE)\r\n                    }\r\n                    {omegaDataAvailabe && subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    renderChart(Constants.LIPIDS_DATA_OMEGA)\r\n                    }\r\n                    {!omegaDataAvailabe && subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n                    }\r\n                </div>\r\n\r\n                {showLegend && chartType === CHART_TYPE_PIE &&\r\n                <div className=\"col-3\">\r\n                    {subChart === Constants.LIPIDS_DATA_BASE &&\r\n                    <CustomLegend legendData={getLipidsBaseChartLegend(lang)}/>\r\n                    }\r\n                    {subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    <CustomLegend legendData={getLipidsOmegaChartLegend(lang)}/>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareConfig &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                <PieChartConfigurationForm key={\"Config Lipids Chart\"}\r\n                                           chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckbox}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {AMOUNT_PORTION} from \"../../../config/Constants\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\"\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../../charthelper/BarChartConfigurationForm\";\r\nimport {ProteinDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {getProteinChartData} from \"../../../service/chartdata/ProteinChartDataService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_PROTEINS_CONFIG,\r\n    GA_ACTION_DATAPANEL_VITAMINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../../config/GA_Events\";\r\n\r\nexport default function ProteinDataChart(props: ProteinDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.proteinChartConfig\r\n            : initialChartConfigData.proteinChartConfig\r\n\r\n    const [portionType, setPortionType] = useState<string>(chartConfig.portionType)\r\n    const [expand100, setExpand100] = useState<boolean>(chartConfig.expand100)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setExpand100(chartConfig.expand100)\r\n            setPortionType(chartConfig.portionType)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [portionType, expand100, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentSetting = applicationContext.applicationData.foodDataPanel.chartConfigData.proteinChartConfig\r\n            if (expand100 !== currentSetting.expand100 || portionType !== currentSetting.portionType) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    proteinChartConfig: {\r\n                        portionType: portionType,\r\n                        expand100: expand100\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const createProteinChartData = () => {\r\n        const proteinData = getNutrientData(props.selectedFoodItem).proteinData;\r\n        if (!proteinData || !applicationContext) {\r\n            return null;\r\n        }\r\n\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.proteinRequirementData;\r\n        if (!requirementData) {\r\n            return null;\r\n        }\r\n\r\n        const userData = applicationContext.userData;\r\n        const portionAmount = portionType === AMOUNT_PORTION ? props.selectedFoodItem.portion.amount : 100;\r\n        const chartDisplayData = getProteinChartData(proteinData, requirementData, userData, portionAmount, lang)\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_proteins\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_proteins[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value=event.target.value\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_PROTEINS_CONFIG, GA_CATEGORY_DATAPANEL, value, 1)\r\n        setPortionType(value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        const label = \"expand100: \" + !expand100\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_PROTEINS_CONFIG, GA_CATEGORY_DATAPANEL, label, 1)\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const getOptions = (title, maxValue) => {\r\n        const overallMaxValue = props.directCompareConfig && props.directCompareConfig.maxValue\r\n            ? props.directCompareConfig.maxValue\r\n            : maxValue\r\n\r\n        let maxYValue\r\n        if (!props.directCompareConfig) {\r\n            if (expand100 && overallMaxValue < 100) {\r\n                maxYValue = 100\r\n            }\r\n        } else {\r\n            if (props.directCompareConfig.maxValue) {\r\n                maxYValue = props.directCompareConfig.maxValue\r\n            }\r\n            if (expand100) {\r\n                if (maxYValue === undefined) {\r\n                    if (overallMaxValue < 100) {\r\n                        maxYValue = 100\r\n                    }\r\n                } else if (maxYValue < 100) {\r\n                    maxYValue = 100\r\n                }\r\n            }\r\n        }\r\n\r\n        return getBarChartOptions(title, \"%\", maxYValue);\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const barChartProps = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps} />\r\n    }\r\n\r\n    const data = createProteinChartData();\r\n    if (!data) {\r\n        return <div/>\r\n    }\r\n\r\n    const maxValue = (data && data.datasets && data.datasets.length > 0) ? Math.max(...data.datasets[0].data) : 0;\r\n    const options = getOptions(applicationStrings.label_charttype_proteins[lang], maxValue);\r\n    const dataExists = data.datasets && data.datasets[0].data && data.datasets[0].data.length > 0\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"base chart container \" + containerHeight}>\r\n                <div className=\"col-12\">\r\n                    {dataExists &&\r\n                    <Bar\r\n                        data={data}\r\n                        key={'chart ' + chartHeight}\r\n                        height={chartHeight}\r\n                        options={options}\r\n                    />\r\n                    }\r\n                    {!dataExists &&\r\n                    <p className=\"text-center\" style={{height: ChartConfig.default_chart_height}}>\r\n                        {applicationStrings.label_noData[lang]}\r\n                    </p>\r\n                    }\r\n                </div>\r\n            </div>\r\n            {props.directCompareUse !== true &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                {renderChartConfigurationForm()}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {UserData} from \"../../types/livedata/UserData\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {determineProteinRequirementRatio} from \"../calculation/DietaryRequirementService\";\r\nimport {ProteinData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {ProteinRequirementData} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {ChartDisplayData} from \"../../types/livedata/ChartDisplayData\";\r\n\r\nexport function getProteinChartData(proteinData: ProteinData, requirementData: ProteinRequirementData,\r\n                                    userData: UserData, portionAmount: number, lang: string): ChartDisplayData {\r\n    const labels: Array<string> = [];\r\n    const values: Array<number> = [];\r\n\r\n    if (proteinData.histidine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_histidine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.histidine, proteinData.histidine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.isoleucine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_isoleucine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.isoleucine, proteinData.isoleucine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.leucine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_leucine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.leucine, proteinData.leucine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.lysine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_lysine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.lysine, proteinData.lysine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.methionine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_methionine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.methionine, proteinData.methionine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.phenylalanine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_phenylalanine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.phenylalanine, proteinData.phenylalanine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.threonine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_threonine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.threonine, proteinData.threonine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.tryptophan !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_tryptophan[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.tryptophan, proteinData.tryptophan, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.valine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_valine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.valine, proteinData.valine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.cystine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_cystine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.cystine, proteinData.cystine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values\r\n    }\r\n}","import {autoRound} from \"../calculation/MathService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as ChartConfig from \"../../config/ChartConfig\";\r\nimport {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {ChartDisplayData, LegendData} from \"../../types/livedata/ChartDisplayData\";\r\n\r\nexport function getCarbBaseChartData(nutrientData: NutrientData, hideRemainders: boolean, totalAmount: number,\r\n                                     language: string): ChartDisplayData | null {\r\n    const totalCarbsAmount = nutrientData.baseData.carbohydrates;\r\n    const dietaryFibers = nutrientData.baseData.dietaryFibers;\r\n    const sugar = nutrientData.carbohydrateData.sugar\r\n\r\n    if (!sugar || !dietaryFibers) {\r\n        return null\r\n    }\r\n\r\n    const valueSugar = autoRound(sugar / totalCarbsAmount * 100);\r\n    const valueDietaryFibers = autoRound(dietaryFibers / totalCarbsAmount * 100);\r\n\r\n    if (totalCarbsAmount === 0) {\r\n        return null;\r\n    }\r\n\r\n    let valueMisc = totalCarbsAmount - (sugar + dietaryFibers);\r\n    valueMisc = autoRound(valueMisc / totalCarbsAmount * 100);\r\n\r\n    if (valueMisc < 0) {\r\n        valueMisc = 0;\r\n    }\r\n\r\n    const labels = [applicationStrings.label_nutrient_sugar[language],\r\n        applicationStrings.label_nutrient_dietaryFibers[language],\r\n    ]\r\n\r\n    const data = [valueSugar,\r\n        valueDietaryFibers]\r\n\r\n    const colors = [\r\n        ChartConfig.color_chart_green_3,\r\n        ChartConfig.color_chart_green_2,\r\n    ]\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_nutrient_remainder[language])\r\n        colors.push(ChartConfig.color_chart_misc)\r\n        data.push(valueMisc)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: data,\r\n        colors: colors\r\n    }\r\n}\r\n\r\nexport function getCarbDetailsChartData(nutrientData: NutrientData, hideRemainders: boolean, totalAmount: number,\r\n                                        language: string): ChartDisplayData | null {\r\n    const {carbohydrateData, baseData} = nutrientData\r\n\r\n    const valueGlucose = carbohydrateData.glucose !== null ? autoRound(carbohydrateData.glucose / totalAmount * 100) : null;\r\n    const valueFructose = carbohydrateData.fructose !== null ? autoRound(carbohydrateData.fructose / totalAmount * 100) : null;\r\n    const valueGalactose = carbohydrateData.galactose !== null ? autoRound(carbohydrateData.galactose / totalAmount * 100) : null;\r\n    const valueSucrose = carbohydrateData.sucrose !== null ? autoRound(carbohydrateData.sucrose / totalAmount * 100) : null;\r\n    const valueLactose = carbohydrateData.lactose !== null ? autoRound(carbohydrateData.lactose / totalAmount * 100) : null;\r\n    const valueMaltose = carbohydrateData.maltose !== null ? autoRound(carbohydrateData.maltose / totalAmount * 100) : null;\r\n    const valueStarch = carbohydrateData.starch !== null ? autoRound(carbohydrateData.starch / totalAmount * 100) : null;\r\n\r\n    const valueDietaryFibers = baseData.dietaryFibers !== null ? autoRound(baseData.dietaryFibers / totalAmount * 100) : null;\r\n\r\n    if (!valueMaltose && !valueSucrose && !valueLactose && !valueGlucose && !valueFructose && !valueGalactose) {\r\n        return null\r\n    }\r\n\r\n    let valueMisc = 100\r\n    const labels: string[] = []\r\n    const data: number[] = []\r\n    const colors: string[] = []\r\n\r\n    if (valueGlucose) {\r\n        valueMisc -= valueGlucose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_glucose[language])\r\n        data.push(valueGlucose)\r\n        colors.push(ChartConfig.color_carbs_mono_glucose)\r\n    }\r\n    if (valueFructose) {\r\n        valueMisc -= valueFructose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_fructose[language])\r\n        data.push(valueFructose)\r\n        colors.push(ChartConfig.color_carbs_mono_fructose)\r\n    }\r\n    if (valueGalactose) {\r\n        valueMisc -= valueGalactose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_galactose[language])\r\n        data.push(valueGalactose)\r\n        colors.push(ChartConfig.color_carbs_mono_galactose)\r\n    }\r\n    if (valueSucrose) {\r\n        valueMisc -= valueSucrose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_sucrose[language])\r\n        data.push(valueSucrose)\r\n        colors.push(ChartConfig.color_carbs_di_sucrose)\r\n    }\r\n    if (valueLactose) {\r\n        valueMisc -= valueLactose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_lactose[language])\r\n        data.push(valueLactose)\r\n        colors.push(ChartConfig.color_carbs_di_lactose)\r\n    }\r\n    if (valueMaltose) {\r\n        valueMisc -= valueMaltose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_maltose[language])\r\n        data.push(valueMaltose)\r\n        colors.push(ChartConfig.color_carbs_di_maltose)\r\n    }\r\n    if (valueStarch) {\r\n        valueMisc -= valueStarch\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_starch[language])\r\n        data.push(valueStarch)\r\n        colors.push(ChartConfig.color_carbs_starch)\r\n    }\r\n\r\n    if (valueDietaryFibers) {\r\n        valueMisc -= valueDietaryFibers\r\n        labels.push(applicationStrings.label_nutrient_dietaryFibers[language])\r\n        data.push(valueDietaryFibers)\r\n        colors.push(ChartConfig.color_carbs_dietaryFibers)\r\n    }\r\n\r\n    valueMisc = autoRound(valueMisc);\r\n    if (valueMisc < 0) {\r\n        valueMisc = 0;\r\n    }\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_nutrient_remainder[language])\r\n        data.push(valueMisc)\r\n        colors.push(ChartConfig.color_chart_misc)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: data,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getCarbsBaseLegend(labels: string[], language: string): LegendData[] {\r\n    const legendData: Array<any> = []\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_sugar[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_sugar[language],\r\n            color: ChartConfig.color_chart_green_3,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_dietaryFibers[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_dietaryFibers[language],\r\n            color: ChartConfig.color_chart_green_2,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_remainder[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_remainder[language],\r\n            color: ChartConfig.color_chart_misc,\r\n        })\r\n    }\r\n\r\n    return legendData;\r\n}\r\n\r\n\r\nexport function getCarbsDetailsLegend(labels: string[], language: string): LegendData[] {\r\n    const legendData: Array<any> = []\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_glucose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_glucose[language],\r\n            color: ChartConfig.color_carbs_mono_glucose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_fructose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_fructose[language],\r\n            color: ChartConfig.color_carbs_mono_fructose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_galactose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_galactose[language],\r\n            color: ChartConfig.color_carbs_mono_galactose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_sucrose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_sucrose[language],\r\n            color: ChartConfig.color_carbs_di_sucrose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_lactose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_lactose[language],\r\n            color: ChartConfig.color_carbs_di_lactose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_maltose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_maltose[language],\r\n            color: ChartConfig.color_carbs_di_maltose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_starch[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_starch[language],\r\n            color: ChartConfig.color_carbs_starch,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_dietaryFibers[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_dietaryFibers[language],\r\n            color: ChartConfig.color_carbs_dietaryFibers,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_remainder[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_remainder[language],\r\n            color: ChartConfig.color_chart_misc,\r\n        })\r\n    }\r\n\r\n    return legendData;\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport * as Constants from \"../../../config/Constants\"\r\nimport {CARBS_DATA_BASE, CHART_TYPE_BAR, CHART_TYPE_PIE} from \"../../../config/Constants\"\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {CarbDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {GeneralChartConfigDirectCompareWithSubCharts} from \"../../../types/livedata/ChartConfigData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {\r\n    getCarbBaseChartData,\r\n    getCarbDetailsChartData,\r\n    getCarbsBaseLegend,\r\n    getCarbsDetailsLegend\r\n} from \"../../../service/chartdata/CarbsChartDataService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_CARBS_CONFIG,\r\n    GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_ACTION_DATAPANEL_PROTEINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../../config/GA_Events\";\r\n\r\nexport default function CarbsDataChart(props: CarbDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    let chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.carbsChartConfig\r\n            : initialChartConfigData.carbsChartConfig\r\n\r\n    const initialExpand100 =  props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.expand100\r\n        : chartConfig.expand100\r\n\r\n    const initialHideRemainders =  props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.hideRemainders\r\n        : chartConfig.hideRemainders\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [hideRemainders, setShowHideRemainders] = useState<boolean>(initialHideRemainders ? initialHideRemainders : false)\r\n    const [expand100, setExpand100] = useState<boolean>(initialExpand100 ? initialExpand100 : false)\r\n    const [subChart, setSubChart] = useState<string>(chartConfig.subChart ? chartConfig.subChart : CARBS_DATA_BASE)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setSubChart(chartConfig.subChart ? chartConfig.subChart : CARBS_DATA_BASE)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [chartType, showLegend, hideRemainders, expand100, subChart, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData.carbsChartConfig\r\n            if (chartType !== currentConfig.chartType\r\n                || subChart !== currentConfig.subChart\r\n                || hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100\r\n                || showLegend !== currentConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    carbsChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: showLegend,\r\n                        hideRemainders: hideRemainders,\r\n                        expand100: expand100,\r\n                        subChart: subChart\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        } else if(applicationContext) {\r\n            const currentConfig = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n            if (hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100) {\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.expand100 = expand100\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.hideRemainders = hideRemainders\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleExpand100Change = () => {\r\n        const label = \"expand100: \" + !expand100\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_CARBS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleHideRemaindersCheckbox = () => {\r\n        const label = \"hideRemainders: \" + !hideRemainders\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_CARBS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setShowHideRemainders(!hideRemainders)\r\n    }\r\n\r\n    const carbohydrateData = getNutrientData(props.selectedFoodItem).carbohydrateData;\r\n\r\n    const handleChartSelectionChange = (event: any) => {\r\n        const value = event.target.value\r\n\r\n        if (applicationContext && props.directCompareConfig) {\r\n            const currentSettings = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n            const carbsChartConfig: GeneralChartConfigDirectCompareWithSubCharts = props.directCompareConfig.chartIndex === 1\r\n                ? {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    hideRemainders: true,\r\n                    expand100: true,\r\n                    subChart1: event.target.value,\r\n                    subChart2: currentSettings.carbsChartConfig.subChart2\r\n                }\r\n                : {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    hideRemainders: true,\r\n                    expand100: true,\r\n                    subChart1: currentSettings.carbsChartConfig.subChart1,\r\n                    subChart2: event.target.value\r\n                }\r\n\r\n            const newChartConfig = {\r\n                ...currentSettings,\r\n                carbsChartConfig: carbsChartConfig\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        } else {\r\n            setSubChart(value)\r\n        }\r\n\r\n        const eventLabel = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, value, eventLabel)\r\n    }\r\n\r\n    const createBasicChartData = () => {\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const totalAmount = getNutrientData(props.selectedFoodItem).baseData.carbohydrates;\r\n        const chartDisplayData = getCarbBaseChartData(nutrientData, hideRemainders, totalAmount, lang)\r\n\r\n        if(!chartDisplayData) {\r\n            return\r\n        }\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const createDetailChartData = () => {\r\n        const {carbohydrateData, baseData} = getNutrientData(props.selectedFoodItem)\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const totalAmount = getNutrientData(props.selectedFoodItem).baseData.carbohydrates;\r\n        const chartDisplayData = getCarbDetailsChartData(nutrientData, hideRemainders, totalAmount, lang)\r\n\r\n        if(!chartDisplayData) {\r\n            return\r\n        }\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_CARBS_CONFIG, GA_CATEGORY_DATAPANEL, value, eventValue)\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        const label = \"legend: \" + !showLegend\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_CARBS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const getOptions = () => {\r\n        let title;\r\n\r\n        if (subChart === Constants.CARBS_DATA_BASE) {\r\n            title = applicationStrings.label_charttype_carbs_base[lang];\r\n        } else if (subChart === Constants.CARBS_DATA_DETAIL) {\r\n            title = applicationStrings.label_charttype_carbs_detail[lang];\r\n        }\r\n\r\n        if (chartType === CHART_TYPE_BAR) {\r\n            return expand100 ? getBarChartOptions(title, \"%\", 100) : getBarChartOptions(title, \"%\");\r\n        } else {\r\n            return getPieChartOptions(title, \"%\");\r\n        }\r\n    }\r\n\r\n\r\n    const renderChartSelector = () => {\r\n        return (\r\n            <Form>\r\n                <Form.Label>\r\n                    <b>{applicationStrings.label_datatype[lang]}:</b>\r\n                </Form.Label>\r\n                <Form.Check inline={false}\r\n                            className={\"form-radiobutton\"}\r\n                            label={applicationStrings.label_charttype_carbs_base[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.CARBS_DATA_BASE}\r\n                            checked={subChart === Constants.CARBS_DATA_BASE}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n                <Form.Check inline={false}\r\n                            className={\"form-radiobutton\"}\r\n                            label={applicationStrings.label_charttype_carbs_detail[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.CARBS_DATA_DETAIL}\r\n                            checked={subChart === Constants.CARBS_DATA_DETAIL}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n                <hr/>\r\n                <Form>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_expand100g[lang]}\r\n                                type=\"checkbox\"\r\n                                disabled={chartType === Constants.CHART_TYPE_PIE}\r\n                                checked={expand100}\r\n                                onChange={handleExpand100Change}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_chartoption_hideRemainders[lang]}\r\n                                type=\"checkbox\"\r\n                                disabled={subChart === Constants.CARBS_DATA_DETAIL}\r\n                                checked={hideRemainders}\r\n                                onChange={handleHideRemaindersCheckbox}>\r\n                    </Form.Check>\r\n                </Form>\r\n            </Form>\r\n        )\r\n    }\r\n\r\n\r\n    const renderChart = (data: any) => {\r\n        if (!data) {\r\n            return (\r\n                <div style={{height: ChartConfig.default_chart_height}}>\r\n                    {applicationStrings.label_noData[lang]}\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const chartColType = chartType === CHART_TYPE_PIE ? \"col-6\" : \"col-8\";\r\n    const detailChartData = createDetailChartData()\r\n    const basicChartData = createBasicChartData()\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"carbs container \" + containerHeight}>\r\n                <div className=\"col-3\" style={{display: \"block\"}}>\r\n                    {renderChartSelector()}\r\n                </div>\r\n                <div className={chartColType}>\r\n                    {subChart === Constants.CARBS_DATA_BASE &&\r\n                    renderChart(basicChartData)\r\n                    }\r\n                    {detailChartData && subChart === Constants.CARBS_DATA_DETAIL &&\r\n                    renderChart(detailChartData)\r\n                    }\r\n                    {!detailChartData && subChart === Constants.CARBS_DATA_DETAIL &&\r\n                    <div style={{height: ChartConfig.default_chart_height}}>\r\n                        {applicationStrings.label_noData[lang]}\r\n                    </div>\r\n                    }\r\n                </div>\r\n\r\n                {showLegend && chartType === Constants.CHART_TYPE_PIE &&\r\n                <div className=\"col-3\">\r\n                    {subChart === Constants.CARBS_DATA_BASE && basicChartData &&\r\n                    <CustomLegend legendData={getCarbsBaseLegend(basicChartData.labels, lang)}/>\r\n                    }\r\n                    {subChart === Constants.CARBS_DATA_DETAIL && detailChartData &&\r\n                    <CustomLegend legendData={getCarbsDetailsLegend(detailChartData.labels, lang)}/>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareConfig &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckbox}/>\r\n\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n\r\n}","import BaseDataChart from \"./charts/BaseDataChart\";\r\nimport EnergyDataChart from \"./charts/EnergyDataChart\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport MineralVitaminChart from \"./charts/MineralVitaminChart\";\r\nimport LipidsDataChart from \"./charts/LipidsDataChart\";\r\nimport ProteinDataChart from \"./charts/ProteinDataChart\";\r\nimport CarbsDataChart from \"./charts/CarbsDataChart\";\r\nimport {ChartProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\nexport function ChartPanel(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const selectedDataTab = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n\r\n    let chart = <div>Nothing to show</div>;\r\n    if (selectedDataTab === TAB_BASE_DATA) {\r\n        chart = <BaseDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_ENERGY_DATA) {\r\n        chart = <EnergyDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_VITAMIN_DATA) {\r\n        chart = <MineralVitaminChart selectedFoodItem={props.selectedFoodItem} selectedSubChart={CHART_VITAMINS}/>\r\n    } else if (selectedDataTab === TAB_MINERAL_DATA) {\r\n        chart = <MineralVitaminChart selectedFoodItem={props.selectedFoodItem} selectedSubChart={CHART_MINERALS}/>\r\n    } else if (selectedDataTab === TAB_LIPIDS_DATA) {\r\n        chart = <LipidsDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_CARBS_DATA) {\r\n        chart = <CarbsDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_PROTEINS_DATA) {\r\n        chart = <ProteinDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    }\r\n\r\n    return (\r\n        <div style={{paddingTop: \"24px\"}}>\r\n            {chart}\r\n        </div>\r\n    )\r\n}","import {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport 'react-bootstrap-table/dist/react-bootstrap-table-all.min.css';\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {DISPLAYMODE_CHART} from \"../../config/Constants\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\ninterface FoodDataTableProps {\r\n    tableData: Array<FoodTableDataObject>\r\n    portionSize: number\r\n}\r\n\r\nexport function FoodDataTable(props: FoodDataTableProps) {\r\n    const dataExists = props.tableData && props.tableData.length > 0;\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext)\r\n\r\n    const changeToChartMode = () => {\r\n        applicationContext?.setFoodDataPanelData.setSelectedDisplayMode(DISPLAYMODE_CHART)\r\n    }\r\n\r\n    const formatDataCell = (cell, row) => {\r\n        if (!cell.includes(\"&&\")) {\r\n            return cell\r\n        }\r\n\r\n        const firstLineStype = {paddingBottom: \"6px\", display: 'block'}\r\n        const indentStyle = {paddingLeft: \"8px\"}\r\n\r\n        return <div>{cell.split(\"&&\").map((element, index) => (<div>\r\n                {index > 0 ?\r\n                    <span key={`cellindex-${index}`} style={indentStyle}>\r\n                    {element}\r\n                </span>\r\n                    :\r\n                    <span key={`cellindex-${index}`} style={firstLineStype}>\r\n                    {element}\r\n                </span>\r\n                }\r\n            </div>)\r\n        )}</div>\r\n    }\r\n\r\n    const labelPortion = `${applicationStrings.label_per_portion[language.language]} (${props.portionSize} g)`\r\n    const tableClass = isMobileDevice() ? \"table-style-m\" : \"table-style\"\r\n\r\n    return (\r\n        <div style={{height: \"418px\", margin: \"25px\", overflowY: \"auto\"}}>\r\n            <div>\r\n                {dataExists &&\r\n                <BootstrapTable trClassName={tableClass} data={props.tableData} striped hover>\r\n                    <TableHeaderColumn isKey dataField='label' dataFormat={formatDataCell}>Element</TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='value_100g'\r\n                                       dataFormat={formatDataCell}>{applicationStrings.label_per_100g[language.language]}\r\n                    </TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='value_portion'\r\n                                       dataFormat={formatDataCell}>{labelPortion}\r\n                    </TableHeaderColumn>\r\n                </BootstrapTable>\r\n                }\r\n                {!dataExists &&\r\n                <div className=\"text-center\">{applicationStrings.label_noData[language.language]}</div>\r\n                }\r\n            </div>\r\n            <div style={{paddingTop: \"25px\"}}>\r\n                <button className={\"btn btn-link\"} onClick={changeToChartMode}>\r\n                    {applicationStrings.label_chart_view[language.language]}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport SelectedFoodItem from \"../../../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {getNameFromFoodNameList} from \"../../../service/nutrientdata/NameTypeService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport getName from \"../../../service/LanguageService\";\r\nimport {calculateChartContainerHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {isMobileDevice, useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData, getSourceName} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {getFoodItem, getFoodItemName} from \"../../../service/nutrientdata/FoodItemsService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL} from \"../../../config/GA_Events\";\r\n\r\ninterface InfoDataProps {\r\n    selectedFoodItem: SelectedFoodItem,\r\n    directCompare?: boolean\r\n}\r\n\r\ninterface RowElement {\r\n    key: string,\r\n    value: string\r\n}\r\n\r\nexport function InfoData(props: InfoDataProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const windowSize = useWindowDimension()\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, props.directCompare))\r\n\r\n    useEffect(() => {\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, props.directCompare))\r\n    }, [containerHeight])\r\n\r\n    const createRow = (key: string, value: any): RowElement => {\r\n        return {\r\n            key: key,\r\n            value: value\r\n        }\r\n    }\r\n\r\n    const getGeneralTableData = (): Array<RowElement> => {\r\n        if (!applicationContext) {\r\n            return []\r\n        }\r\n\r\n        const foodNameId = props.selectedFoodItem.foodItem.nameId\r\n        const foodName = foodNameId ? getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, foodNameId, lang, true) : ''\r\n\r\n        const foodClass = props.selectedFoodItem.foodClass;\r\n        const foodClassNameId = foodClass ? foodClass.nameKey : null\r\n\r\n        const sourceName = getSourceName(props.selectedFoodItem.selectedSource)\r\n        const sourceItemId = getNutrientData(props.selectedFoodItem).sourceItemId\r\n\r\n        const source = `United States Department of Agriculture (USDA)`;\r\n        const sourceLine2 = `${sourceName}, ID = ${sourceItemId}`;\r\n        const foodClassName = foodClassNameId ? getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, foodClassNameId, lang) : null;\r\n\r\n        const categoryId = foodClass ? foodClass.category : null\r\n        const category = categoryId ? applicationContext.foodDataCorpus.categories.find(category => category.id === categoryId) : null\r\n        const categoryName = category ? getName(category, lang) : null;\r\n\r\n        const conditionId = props.selectedFoodItem.foodItem.conditionId\r\n        const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === conditionId)\r\n        const conditionName = condition ? getName(condition, lang) : null;\r\n\r\n        const tableDataGeneral: Array<RowElement> = [];\r\n\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodName[lang]}:`, foodName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_preparation[lang]}:`, conditionName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodId[lang]}:`, props.selectedFoodItem.foodItem.id)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodClass[lang]}:`, foodClassName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_category[lang]}:`, categoryName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_source[lang]}:`, source)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(\"\", sourceLine2)\r\n        );\r\n\r\n        return tableDataGeneral;\r\n    }\r\n\r\n    const getTableDataPortion = () => {\r\n        const foodPortion = props.selectedFoodItem.portion;\r\n        const portionValue = `${foodPortion.amount} g`;\r\n\r\n        const portionObject = applicationContext?.foodDataCorpus.portionTypes.find(portion => portion.id === foodPortion.portionType)\r\n        if (portionObject) {\r\n            const portionName = foodPortion.portionType !== 0 ? getName(portionObject, lang) : applicationStrings.portion_individual[lang];\r\n            const tableDataPortion: Array<RowElement> = [];\r\n\r\n            tableDataPortion.push(\r\n                createRow(`${applicationStrings.label_info_portionType[lang]}:`, portionName)\r\n            );\r\n\r\n            tableDataPortion.push(\r\n                createRow(`${applicationStrings.label_portion[lang]}:`, portionValue)\r\n            );\r\n\r\n            return tableDataPortion\r\n        }\r\n\r\n\r\n        return [];\r\n    }\r\n\r\n\r\n    const makeTableDataCombinedFood = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const compositeList = props.selectedFoodItem?.compositeSubElements ?? []\r\n        const tableData: Array<RowElement> = []\r\n        const {foodNames} = applicationContext.foodDataCorpus\r\n\r\n        for (let i = 0; i < compositeList.length; i++) {\r\n            const foodItem = compositeList[i].foodItem\r\n            let name = getFoodItemName(foodItem, foodNames, lang)\r\n            const portion = compositeList[i].portion.amount\r\n            const conditionId = compositeList[i].foodItem.conditionId\r\n\r\n            if (conditionId !== 100) {\r\n                const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === conditionId)\r\n                const conditionName = condition ? getName(condition, lang) : null;\r\n                name += ` (${conditionName})`\r\n            }\r\n            tableData.push(\r\n                createRow(`${name}:`, `${portion} g`)\r\n            )\r\n        }\r\n\r\n        return tableData;\r\n    }\r\n\r\n    const tableClass = isMobileDevice() ? \"table-style-m\" : \"table-style\"\r\n\r\n    const renderSubTable = (data) => {\r\n        return (\r\n            <div>\r\n                <BootstrapTable trClassName={tableClass} bordered={false} data={data}>\r\n                    <TableHeaderColumn className=\"table-header-no-top-border\" dataField='key' isKey width=\"200px\"/>\r\n                    <TableHeaderColumn className=\"table-header-no-top-border\" dataField='value'/>\r\n                </BootstrapTable>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const onLinkClick = () => {\r\n        const sourceItemId = getNutrientData(props.selectedFoodItem).sourceItemId\r\n        const usdaLink = `https://fdc.nal.usda.gov/fdc-app.html#/food-details/${sourceItemId}/nutrients`\r\n\r\n        console.log('SEL', props.selectedFoodItem)\r\n\r\n        const label = \"Open ext. FoodDataCentral Link\"\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL, label, props.selectedFoodItem.foodItem.id)\r\n\r\n        const link = window.open(usdaLink, '_blank')\r\n        if (link) {\r\n            link.focus()\r\n        } else {\r\n            window.location.href = usdaLink\r\n        }\r\n    }\r\n\r\n\r\n    let height = containerHeight\r\n    if (!props.directCompare) {\r\n        height += 86\r\n    }\r\n\r\n    const isCompositeFoodElement = props.selectedFoodItem.aggregated === true\r\n\r\n    return (\r\n        <div>\r\n            <div style={{height: height, maxHeight: height, overflowY: \"auto\", padding: \"15px\"}}>\r\n                {!isCompositeFoodElement &&\r\n                <div>\r\n                    <div>\r\n                        <div>\r\n                            {renderSubTable(getGeneralTableData())}\r\n                        </div>\r\n                        <div style={{paddingTop: \"30px\"}}>\r\n                            <h5>{applicationStrings.label_info_portion[lang]}</h5>\r\n                            {renderSubTable(getTableDataPortion())}\r\n                        </div>\r\n                    </div>\r\n                    <div style={{paddingTop: \"20px\", paddingBottom: \"12px\"}}>\r\n                        <Button variant={'link'} active={true} onClick={onLinkClick}>\r\n                            {applicationStrings.label_usda_reference[lang]}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n                }\r\n                {isCompositeFoodElement &&\r\n                <div>\r\n                    <h5>{applicationStrings.label_info_composite[lang]}</h5>\r\n                    {renderSubTable(makeTableDataCombinedFood())}\r\n                </div>\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {DISPLAYMODE_CHART, DISPLAYMODE_TABLE, TAB_INFO} from \"../../config/Constants\";\r\nimport {ChartPanel} from \"./ChartPanel\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {FoodDataTable} from \"./FoodDataTable\";\r\nimport {InfoData} from \"./charts/InfoData\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {calculateMinimalDataPanelWidth} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\n\r\ninterface FoodDataPageBodyProps {\r\n    tableData: Array<FoodTableDataObject>\r\n    selectedFoodItem: SelectedFoodItem\r\n}\r\n\r\nexport default function FoodDataPageBody(props: FoodDataPageBodyProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    if(!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const {displayMode, selectedDataPage}  = applicationContext.applicationData.foodDataPanel\r\n\r\n    const renderDataPage = () => {\r\n        return (\r\n            <div>\r\n                {displayMode === DISPLAYMODE_TABLE &&\r\n                <div className=\"col\">\r\n                    <FoodDataTable tableData={props.tableData} portionSize={props.selectedFoodItem.portion.amount}/>\r\n                </div>\r\n                }\r\n                {displayMode === DISPLAYMODE_CHART &&\r\n                <div className=\"col\">\r\n                    <ChartPanel selectedFoodItem={props.selectedFoodItem} />\r\n                </div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{maxWidth: \"1200px\", minWidth: calculateMinimalDataPanelWidth()}}>\r\n            {selectedDataPage === TAB_INFO &&\r\n                 <InfoData selectedFoodItem={props.selectedFoodItem}/>\r\n            }\r\n            {selectedDataPage !== TAB_INFO &&\r\n                renderDataPage()\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {Button, ButtonGroup} from \"react-bootstrap\";\r\nimport {\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {GA_ACTION_DATAPANEL_SWITCH_PAGE, GA_CATEGORY_DATAPANEL} from \"../../config/GA_Events\";\r\n\r\ninterface ChartMenuPanelProps {\r\n    dataPage: string\r\n    setDataPage: (id: string) => void\r\n    verticalArrangement: boolean\r\n}\r\n\r\nexport function ChartMenuPanel(props: ChartMenuPanelProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const handlePageButtonClick = (value: string) => {\r\n        const eventValue = props.verticalArrangement ? 1 : 2\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_SWITCH_PAGE, GA_CATEGORY_DATAPANEL, value, eventValue)\r\n        props.setDataPage(value)\r\n    }\r\n\r\n    const variant = \"link\"\r\n\r\n    const makeButtonLabel = (buttonText): JSX.Element => {\r\n        const classNameSpan = props.verticalArrangement ? \"float-start\" : \"\"\r\n        return <span className={classNameSpan}>{buttonText}</span>\r\n    }\r\n\r\n    const rowClass = props.verticalArrangement ? \"d-flex\" : \"d-flex flex-row flex-wrap\"\r\n\r\n    return (\r\n        <div>\r\n            <ButtonGroup className={rowClass} vertical={props.verticalArrangement}>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_BASE_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_BASE_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_overview[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_ENERGY_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_ENERGY_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_energy[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_VITAMIN_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_VITAMIN_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_vit[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_MINERAL_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_MINERAL_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_min[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_LIPIDS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_LIPIDS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_lipids[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_CARBS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_CARBS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_carbohydrates[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_PROTEINS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_PROTEINS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_proteins[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_INFO)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_INFO}>\r\n                    {makeButtonLabel(applicationStrings.label_info[languageContext.language])}\r\n                </Button>\r\n            </ButtonGroup>\r\n        </div>\r\n    );\r\n\r\n}","import {useContext, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {FaBookOpen, FaChartBar, FaQuestionCircle, FaThList, FaTimes} from \"react-icons/fa\";\r\nimport {\r\n    DISPLAYMODE_CHART,\r\n    DISPLAYMODE_TABLE,\r\n    PATH_FOODDATA_PANEL,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {getNameFromFoodNameList, shortenName} from \"../../service/nutrientdata/NameTypeService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodDataPageBody from \"./FoodDataPageBody\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {HelpModal} from \"../HelpModal\";\r\nimport {getHelpText, HelpText} from \"../../service/HelpService\";\r\nimport getName from \"../../service/LanguageService\";\r\nimport {ChartMenuPanel} from \"./ChartMenuPanel\";\r\nimport {getSourceName} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL} from \"../../config/GA_Events\";\r\n\r\ninterface FoodDataPageHeaderProps {\r\n    setDisplayMode: (id: string) => void\r\n    setDataPage: (id: string) => void\r\n    selectedFoodItem: SelectedFoodItem\r\n    tableData: Array<FoodTableDataObject>\r\n}\r\n\r\nexport default function FoodDataPageHeader(props: FoodDataPageHeaderProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const [helpModalId, setHelpModalId] = useState<number>(0)\r\n    const [showBookModal, setShowBookModal] = useState<boolean>(false)\r\n\r\n    if (applicationContext === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const displayMode = applicationContext.applicationData.foodDataPanel.displayMode\r\n    const dataPage = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n\r\n    const handleRadioButtonClick = (value: string) => {\r\n        const displaymode = value === DISPLAYMODE_TABLE ? \"table\" : \"chart\"\r\n        const label = `Switch display mode to ${displaymode}`\r\n        callEvent(applicationContext.debug, GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL, label)\r\n        props.setDisplayMode(value)\r\n    }\r\n\r\n    const closeTab = () => {\r\n        const id = (props.selectedFoodItem.foodItem.id)\r\n        const remainingItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length - 1\r\n        callEvent(applicationContext.debug, GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL, \"Close food item tab\")\r\n\r\n        applicationContext.setFoodDataPanelData.removeItemFromFoodDataPanel(id)\r\n\r\n        if (remainingItems === 0) {\r\n            history.push({pathName: PATH_FOODDATA_PANEL})\r\n        }\r\n    }\r\n\r\n    const help = () => {\r\n        const label = `Open help page: ${dataPage}`\r\n        callEvent(applicationContext.debug, GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL, label)\r\n        switch (dataPage) {\r\n            case TAB_BASE_DATA:\r\n                setHelpModalId(1)\r\n                return;\r\n            case TAB_ENERGY_DATA:\r\n                setHelpModalId(2)\r\n                return;\r\n            case TAB_VITAMIN_DATA:\r\n                setHelpModalId(3)\r\n                return;\r\n            case TAB_MINERAL_DATA:\r\n                setHelpModalId(4)\r\n                return;\r\n            case TAB_LIPIDS_DATA:\r\n                setHelpModalId(5)\r\n                return;\r\n            case TAB_INFO:\r\n                setHelpModalId(6)\r\n                return;\r\n            case TAB_CARBS_DATA:\r\n                setHelpModalId(7)\r\n                return;\r\n            case TAB_PROTEINS_DATA:\r\n                setHelpModalId(8)\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    const openVitaminMineralBook = () => {\r\n        setShowBookModal(true)\r\n    }\r\n\r\n    const enabledDisplayButtonClasses = \"btn button-displaymode-enabled\"\r\n    const disabledDisplayButtonClasses = \"btn button-displaymode-disabled\"\r\n\r\n    const chartButtonClasses = displayMode === DISPLAYMODE_CHART ? enabledDisplayButtonClasses\r\n        : disabledDisplayButtonClasses;\r\n\r\n    const tablesButtonClasses = displayMode === DISPLAYMODE_TABLE ? enabledDisplayButtonClasses\r\n        : disabledDisplayButtonClasses;\r\n\r\n    const foodNamesList = applicationContext.foodDataCorpus.foodNames;\r\n\r\n\r\n    let foodName\r\n    if (props.selectedFoodItem.foodItem.nameId) {\r\n        foodName = getNameFromFoodNameList(foodNamesList, props.selectedFoodItem.foodItem.nameId, languageContext.language)\r\n    } else {\r\n        foodName = props.selectedFoodItem.title !== undefined ? props.selectedFoodItem.title : 'Individual'\r\n    }\r\n\r\n    let fullName\r\n    const portionSize = props.selectedFoodItem.portion.amount\r\n\r\n    if (!props.selectedFoodItem.foodItem.aggregated) {\r\n        const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === props.selectedFoodItem.foodItem.conditionId)\r\n        const conditionName = condition ? getName(condition, languageContext.language) : \"\"\r\n        if (isMobileDevice()) {\r\n            foodName = shortenName(foodName, 16)\r\n        }\r\n        fullName = `${foodName} (${conditionName}, ${portionSize} g)`\r\n    } else {\r\n        fullName = `${foodName} (${portionSize} g)`\r\n    }\r\n\r\n    const helpText: HelpText | null = helpModalId > 0 ? getHelpText(helpModalId, languageContext.language) : null\r\n    const sourceString = getSourceName(props.selectedFoodItem.selectedSource)\r\n    const selectedDataPage = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n    const sourceToolTip = `${applicationStrings.tooltip_source[languageContext.language]} ${sourceString}`\r\n    const headerLabel = isMobileDevice() ? \"header-label-m\" : \"header-label\";\r\n\r\n    return (\r\n        <div style={{paddingBottom: \"6px\"}}>\r\n            {helpText !== null &&\r\n            <HelpModal helpText={helpText} closeHelpModal={() => setHelpModalId(0)}/>\r\n            }\r\n            <div className={\"d-flex flex-nowrap\"}>\r\n                <div className=\"col-2\">\r\n                    <div className={\"card\"}>\r\n                        <div className=\"card-body\" style={{paddingRight: \"16px\"}}>\r\n                            <ChartMenuPanel verticalArrangement={true} setDataPage={props.setDataPage}\r\n                                            dataPage={selectedDataPage}/>\r\n                            <div className={\"d-flex card\"} style={{marginTop: \"24px\", backgroundColor: \"#eeeeee\"}}>\r\n                                <div className={\"text-center\"} style={{fontSize: \"0.8em\"}} data-tip={sourceToolTip}>\r\n                                    {sourceString}\r\n                                    <ReactTooltip/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={\"col-10\"}>\r\n                    <div className=\"d-flex flex-row justify-content-between\" style={{marginTop: \"10px\"}}>\r\n                        <div style={{paddingTop: \"6px\", paddingLeft: \"32px\"}}>\r\n                            <div className={headerLabel}>\r\n                                <b>{fullName}</b>\r\n                            </div>\r\n                        </div>\r\n                        <div style={{paddingRight: \"24px\"}}>\r\n                            <div style={{padding: \"0px !important\", margin: \"0px !important\"}}>\r\n                                <div className=\"btn-group\" role=\"group\">\r\n                                    <Button className={chartButtonClasses}\r\n                                            onClick={() => handleRadioButtonClick(DISPLAYMODE_CHART)}\r\n                                            active={displayMode === DISPLAYMODE_CHART}\r\n                                            data-tip={applicationStrings.tooltip_icon_charts[languageContext.language]}>\r\n                                        <ReactTooltip/>\r\n                                        <FaChartBar/>\r\n                                    </Button>\r\n                                    <Button className={tablesButtonClasses}\r\n                                            onClick={() => handleRadioButtonClick(DISPLAYMODE_TABLE)}\r\n                                            active={displayMode === DISPLAYMODE_TABLE}\r\n                                            data-tip={applicationStrings.tooltip_icon_table[languageContext.language]}>\r\n                                        <FaThList/>\r\n                                    </Button>\r\n                                </div>\r\n                                <div className=\"btn-group\" role=\"group\" style={{paddingLeft: \"20px\"}}>\r\n                                    <Button className={\"btn-primary button-foodPanelHead\"}\r\n                                            onClick={help}\r\n                                            active={displayMode === DISPLAYMODE_CHART}>\r\n                                        <ReactTooltip/>\r\n                                        <FaQuestionCircle/>\r\n                                    </Button>\r\n                                    <Button className={\"button-closeTab\"}\r\n                                            onClick={closeTab}\r\n                                            data-for=\"closeButtonTooltip\"\r\n                                            data-tip={applicationStrings.tooltip_icon_close[languageContext.language]}>\r\n                                        <ReactTooltip id=\"closeButtonTooltip\"/>\r\n                                        <FaTimes/>\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <FoodDataPageBody selectedFoodItem={props.selectedFoodItem}\r\n                                      tableData={props.tableData}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import * as MathService from './calculation/MathService';\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {FoodTableDataObject} from \"../types/livedata/SelectedFoodItemData\";\r\nimport {getNutrientData} from \"./nutrientdata/NutrientDataRetriever\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {getTotalAmountOfCarotenoids} from \"./calculation/CarotenoidCalculationService\";\r\nimport {CATEGORY_BEVERAGE} from \"../config/Constants\";\r\n\r\nexport function createBaseDataTable(selectedFoodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const {\r\n        water,\r\n        carbohydrates,\r\n        lipids,\r\n        proteins,\r\n        dietaryFibers,\r\n        ash,\r\n        alcohol\r\n    } = getNutrientData(selectedFoodItem).baseData\r\n    const {sugar} = getNutrientData(selectedFoodItem).carbohydrateData\r\n\r\n    if (water !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_water[language],\r\n            water,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (carbohydrates  !== null) {\r\n        const carbObject = makeCarbsTableObject(carbohydrates, sugar, dietaryFibers, portion, language)\r\n        tableData.push(carbObject)\r\n    }\r\n\r\n    if (lipids !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids[language],\r\n            lipids,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteins !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins[language],\r\n            proteins,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    // We display alcohol content only if the food class is beverage or unknown\r\n    if (alcohol !== null && (selectedFoodItem.foodClass?.category === CATEGORY_BEVERAGE || selectedFoodItem.foodClass === null)) {\r\n        tableData.push(createTableObjectAlcohol(\r\n            applicationStrings.label_nutrient_alcohol[language],\r\n            alcohol,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (ash !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_ash[language],\r\n            ash,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createVitaminTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const nutrientData = getNutrientData(foodItem)\r\n\r\n    if (nutrientData.vitaminData.a != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_a[language],\r\n            nutrientData.vitaminData.a,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    const {carotenoidData} = nutrientData.vitaminData\r\n\r\n    if (carotenoidData != null) {\r\n        const totalCarotenoid = getTotalAmountOfCarotenoids(carotenoidData)\r\n\r\n        if (totalCarotenoid !== null) {\r\n            let carotenoidTableObject = createTableObject(\r\n                applicationStrings.label_nutrient_vit_carotenoid[language],\r\n                totalCarotenoid,\r\n                portion, \"mg\")\r\n\r\n            if (carotenoidData.caroteneAlpha !== null) {\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_carotenoid_alpha[language]}`\r\n                carotenoidTableObject = appendTableDataObject(carotenoidTableObject, language, label, carotenoidData.caroteneAlpha, portion, \"g\")\r\n            }\r\n\r\n            if (carotenoidData.caroteneBeta !== null) {\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_carotenoid_beta[language]}`\r\n                carotenoidTableObject = appendTableDataObject(carotenoidTableObject, language, label, carotenoidData.caroteneBeta, portion, \"g\")\r\n            }\r\n\r\n            tableData.push(carotenoidTableObject)\r\n        }\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b1 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b1[language],\r\n            nutrientData.vitaminData.b1,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b2 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b2[language],\r\n            nutrientData.vitaminData.b2,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b3 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b3[language],\r\n            nutrientData.vitaminData.b3,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b5 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b5[language],\r\n            nutrientData.vitaminData.b5,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b6 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b6[language],\r\n            nutrientData.vitaminData.b6,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b9 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b9[language],\r\n            nutrientData.vitaminData.b9,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b12 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b12[language],\r\n            nutrientData.vitaminData.b12,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.c != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_c[language],\r\n            nutrientData.vitaminData.c,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.d != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_d[language],\r\n            nutrientData.vitaminData.d,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.e != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_e[language],\r\n            nutrientData.vitaminData.e,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.k != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_k[language],\r\n            nutrientData.vitaminData.k,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createMineralTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n\r\n    if (firstNutrientData.mineralData.calcium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_calcium[language],\r\n            firstNutrientData.mineralData.calcium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.iron != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_iron[language],\r\n            firstNutrientData.mineralData.iron,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.magnesium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_magnesium[language],\r\n            firstNutrientData.mineralData.magnesium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.phosphorus != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_phosphorus[language],\r\n            firstNutrientData.mineralData.phosphorus,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.potassium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_potassimum[language],\r\n            firstNutrientData.mineralData.potassium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.sodium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_sodium[language],\r\n            firstNutrientData.mineralData.sodium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.zinc != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_zinc[language],\r\n            firstNutrientData.mineralData.zinc,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.copper != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_copper[language],\r\n            firstNutrientData.mineralData.copper,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.manganese != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_manganese[language],\r\n            firstNutrientData.mineralData.manganese,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.selenium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_selenium[language],\r\n            firstNutrientData.mineralData.selenium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createLipidsTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n\r\n    if (firstNutrientData.lipidData.saturated != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_saturated[language],\r\n            firstNutrientData.lipidData.saturated,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.unsaturatedMono != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_unsaturated_mono[language],\r\n            firstNutrientData.lipidData.unsaturatedMono,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.unsaturatedPoly != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_unsaturated_poly[language],\r\n            firstNutrientData.lipidData.unsaturatedPoly,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.omegaData) {\r\n        if (firstNutrientData.lipidData.omegaData.omega3 != null) {\r\n            tableData.push(createTableObject(\r\n                `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_lipids_omega3[language]}`,\r\n                firstNutrientData.lipidData.omegaData.omega3,\r\n                portion, \"g\")\r\n            );\r\n        }\r\n\r\n        if (firstNutrientData.lipidData.omegaData.omega6 != null) {\r\n            tableData.push(createTableObject(\r\n                `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_lipids_omega6[language]}`,\r\n                firstNutrientData.lipidData.omegaData.omega6,\r\n                portion, \"g\")\r\n            );\r\n        }\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.transFattyAcids != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_transfattyAcids[language],\r\n            firstNutrientData.lipidData.transFattyAcids,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.cholesterol != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_cholesterol[language],\r\n            firstNutrientData.lipidData.cholesterol,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createEnergyTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const nutrientData = getNutrientData(foodItem)\r\n    const energy = nutrientData.baseData.energy !== null ? nutrientData.baseData.energy : 0;\r\n\r\n    tableData.push(createTableObject(\r\n        \"kcal\",\r\n        energy,\r\n        portion, \"\")\r\n    );\r\n\r\n    tableData.push(createTableObject(\r\n        \"kJ\",\r\n        MathService.round(4.186 * energy, 1),\r\n        portion, \"\")\r\n    );\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createCarbsTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n    const {carbohydrates, dietaryFibers} = firstNutrientData.baseData\r\n    const {sugar} = firstNutrientData.carbohydrateData\r\n\r\n    if (carbohydrates) {\r\n        const carbObject = makeCarbsTableObject(carbohydrates, sugar, dietaryFibers, portion, language)\r\n        tableData.push(carbObject)\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.glucose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_glucose[language],\r\n            firstNutrientData.carbohydrateData.glucose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.fructose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_fructose[language],\r\n            firstNutrientData.carbohydrateData.fructose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.galactose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_galactose[language],\r\n            firstNutrientData.carbohydrateData.galactose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.sucrose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_sucrose[language],\r\n            firstNutrientData.carbohydrateData.sucrose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.lactose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_lactose[language],\r\n            firstNutrientData.carbohydrateData.lactose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.maltose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_maltose[language],\r\n            firstNutrientData.carbohydrateData.maltose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.starch != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_starch[language],\r\n            firstNutrientData.carbohydrateData.starch,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createProteinTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const proteinData = getNutrientData(foodItem).proteinData;\r\n    if (!proteinData) {\r\n        return tableData;\r\n    }\r\n\r\n    if (proteinData.tryptophan != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_tryptophan[language],\r\n            proteinData.tryptophan,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.threonine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_threonine[language],\r\n            proteinData.threonine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.isoleucine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_isoleucine[language],\r\n            proteinData.isoleucine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.leucine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_leucine[language],\r\n            proteinData.leucine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.lysine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_lysine[language],\r\n            proteinData.lysine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.methionine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_methionine[language],\r\n            proteinData.methionine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.cystine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_cystine[language],\r\n            proteinData.cystine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.phenylalanine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_phenylalanine[language],\r\n            proteinData.phenylalanine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.tyrosine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_tyrosine[language],\r\n            proteinData.tyrosine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.valine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_valine[language],\r\n            proteinData.valine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.arginine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_arginine[language],\r\n            proteinData.arginine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.histidine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_histidine[language],\r\n            proteinData.histidine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.alanine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_alanine[language],\r\n            proteinData.alanine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.asparticAcid != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_asparticAcid[language],\r\n            proteinData.asparticAcid,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.glutamicAcid != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_glutamicAcid[language],\r\n            proteinData.glutamicAcid,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.glycine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_glysine[language],\r\n            proteinData.glycine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.proline != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_proline[language],\r\n            proteinData.proline,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.serine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_serine[language],\r\n            proteinData.serine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nfunction createTableObject(label: string, value_100g: number, portion: number, unit: String): FoodTableDataObject {\r\n    const valuePortion = calculatePortionData(value_100g, portion);\r\n    return {\r\n        label: label,\r\n        value_100g: `${MathService.autoRound(value_100g)} ${unit}`,\r\n        value_portion: `${MathService.autoRound(valuePortion)} ${unit}`\r\n    }\r\n}\r\n\r\nfunction createTableObjectAlcohol(label: string, value_100g: number, portion: number, unit: String): FoodTableDataObject {\r\n    const valuePortion = calculatePortionData(value_100g, portion);\r\n    if (valuePortion === null) {\r\n        return {\r\n            label: label,\r\n            value_100g: \"n/a\",\r\n            value_portion: \"n/a\",\r\n        }\r\n    }\r\n\r\n    const valueVolumePortion = valuePortion * 1.267\r\n    const valueVolume100gram = value_100g * 1.267\r\n\r\n    return {\r\n        label: label,\r\n        value_100g: `${MathService.autoRound(value_100g)} ${unit}   ( = ${MathService.autoRound(valueVolume100gram)} Vol % )`,\r\n        value_portion: `${MathService.autoRound(valuePortion)} ${unit}   ( = ${MathService.autoRound(valueVolume100gram)} Vol % )`\r\n    }\r\n}\r\n\r\n\r\nfunction calculatePortionData(value: number | null, portionSize: number): number | null {\r\n    if (value === null || value === undefined) {\r\n        return null;\r\n    } else if (value === 0) {\r\n        return 0;\r\n    }\r\n    return (value / 100) * portionSize;\r\n}\r\n\r\n\r\nfunction makeCarbsTableObject(carbohydrates: number, sugar: number | null, dietaryFibers: number | null,\r\n                              portion: number, language: string): FoodTableDataObject {\r\n    let carbObject = createTableObject(\r\n        applicationStrings.label_nutrient_carbohydrates[language],\r\n        carbohydrates,\r\n        portion, \"g\")\r\n\r\n    if (sugar !== null) {\r\n        const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_sugar[language]}`\r\n        carbObject = appendTableDataObject(carbObject, language, label, sugar, portion, \"g\")\r\n    }\r\n\r\n    if (dietaryFibers !== null) {\r\n        const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_dietaryFibers[language]}`\r\n        carbObject = appendTableDataObject(carbObject, language, label, dietaryFibers, portion, \"g\")\r\n    }\r\n\r\n    return carbObject\r\n}\r\n\r\n\r\nfunction appendTableDataObject(object: FoodTableDataObject, language: string, label: string, value: number, portion: number, unit: string): FoodTableDataObject {\r\n    const appendedObject = {...object}\r\n\r\n    const extension = createTableObject(label, value, portion, unit)\r\n\r\n    appendedObject.label = appendedObject.label + '&&' + extension.label\r\n    appendedObject.value_100g = appendedObject.value_100g + '&&' + extension.value_100g\r\n    appendedObject.value_portion = appendedObject.value_portion + '&&' + extension.value_portion\r\n\r\n    return appendedObject\r\n}","import SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport FoodDataPageHeader from \"./FoodDataPageHeader\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {\r\n    SOURCE_SRLEGACY,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {\r\n    createBaseDataTable,\r\n    createCarbsTable,\r\n    createEnergyTable,\r\n    createLipidsTable,\r\n    createMineralTable,\r\n    createProteinTable,\r\n    createVitaminTable\r\n} from \"../../service/TableService\";\r\n\r\ninterface FoodDataPageProps {\r\n    selectedFoodItem: SelectedFoodItem,\r\n    dataPage?: string\r\n}\r\n\r\nexport default function FoodDataPage(props: FoodDataPageProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const selectedDataTab = applicationContext\r\n        ? applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n        : TAB_BASE_DATA\r\n\r\n    const [tableData, setTableData] = useState<Array<FoodTableDataObject>>([])\r\n\r\n    const updatePage = () => {   // Central update method when any (radio) button was clicked\r\n        let tableDataList: Array<FoodTableDataObject> = [];\r\n        const {portion} = props.selectedFoodItem\r\n\r\n        const preferredSource = applicationContext ? applicationContext.applicationData.preferredSource : SOURCE_SRLEGACY\r\n\r\n        if (selectedDataTab === TAB_BASE_DATA) {\r\n            tableDataList = createBaseDataTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_ENERGY_DATA) {\r\n            tableDataList = createEnergyTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_VITAMIN_DATA) {\r\n            tableDataList = createVitaminTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_MINERAL_DATA) {\r\n            tableDataList = createMineralTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_LIPIDS_DATA) {\r\n            tableDataList = createLipidsTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_CARBS_DATA) {\r\n            tableDataList = createCarbsTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_PROTEINS_DATA) {\r\n            tableDataList = createProteinTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        }\r\n\r\n        setTableData(tableDataList)\r\n    }\r\n\r\n    useEffect(() => {\r\n            updatePage()\r\n        }, [props.selectedFoodItem,\r\n            applicationContext?.applicationData.preferredSource,\r\n            applicationContext?.applicationData.foodDataPanel.selectedDataPage,\r\n            applicationContext?.applicationData.foodDataPanel.displayMode,\r\n            applicationContext?.userData]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onNewDataPage = (datapage: string) => {\r\n        applicationContext.setFoodDataPanelData.setSelectedDataPage(datapage)\r\n        updatePage()\r\n    }\r\n\r\n    const onDisplayModeChange = (newMode: string) => {\r\n        applicationContext.setFoodDataPanelData.setSelectedDisplayMode(newMode)\r\n        updatePage()\r\n    }\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('FoodDataPage: Render, tabledata = ', tableData)\r\n    }\r\n\r\n    return <div>\r\n        <FoodDataPageHeader setDisplayMode={onDisplayModeChange}\r\n                            setDataPage={onNewDataPage}\r\n                            selectedFoodItem={props.selectedFoodItem}\r\n                            tableData={tableData}\r\n        />\r\n    </div>\r\n\r\n}","import NameType from \"../types/nutrientdata/NameType\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {getNameFromFoodNameList} from \"./nutrientdata/NameTypeService\";\r\nimport FoodDataPage from \"../components/fooddatapanel/FoodDataPage\";\r\nimport React from \"react\";\r\n\r\n/**\r\n * Enriches a selected food item by its JSX container to be displayed as a tab in the food data panel\r\n * @param selectedFoodItem The already initialized selected food item\r\n * @param foodNamesList The food names list\r\n * @param language The selected language\r\n */\r\nexport function makeFoodDataPanelComponent(selectedFoodItem: SelectedFoodItem, foodNamesList: Array<NameType>, \r\n\t\tlanguage: string): SelectedFoodItem | null {\r\n    let foodName\r\n    if(selectedFoodItem.foodItem.nameId) {\r\n        foodName = getNameFromFoodNameList(foodNamesList, selectedFoodItem.foodItem.nameId, language)\r\n    } else {\r\n        foodName = selectedFoodItem.title ?? 'Unknown'\r\n    }\r\n\r\n    if (foodName === null) {\r\n        return null\r\n    }\r\n\r\n    selectedFoodItem.component = <FoodDataPage key={`page component ${selectedFoodItem.id}`} selectedFoodItem={selectedFoodItem}/>\r\n    selectedFoodItem.tab = foodName\r\n    selectedFoodItem.id = selectedFoodItem.foodItem.id\r\n\r\n    return selectedFoodItem\r\n}\r\n","import React, {useContext, useEffect, useState} from 'react'\r\nimport {Button} from 'react-bootstrap'\r\n\r\nimport FoodSelectorModal from '../foodselector/FoodSelectorModal'\r\nimport {FaLayerGroup, FaPlusSquare, FaTrash} from \"react-icons/fa\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {confirmAction} from \"../ConfirmationDialog\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {PATH_FOODDATA_PANEL} from '../../config/Constants';\r\nimport {makeFoodDataPanelComponent} from \"../../service/FoodDataPanelService\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport ReactGA from \"react-ga4\";\r\nimport {GA_ACTION_SELECT_FOOD_ITEM, GA_CATEGORY_FOOD_ANALYZER} from \"../../config/GA_Events\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\n\r\ninterface FoodAnalyzerContainerProps {\r\n    openSelectorModal?: boolean\r\n    openCompositeSelectorModal?: boolean\r\n    onNewFoodItemSelected: () => void\r\n}\r\n\r\nexport default function FoodAnalyzerContainer(props: FoodAnalyzerContainerProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const showFoodSelectorInitialState = props.openSelectorModal === true\r\n    const showCompositeFoodSelectorInitialState = props.openCompositeSelectorModal === true\r\n\r\n    const [showFoodSelector, setShowFoodSelector] = useState<Boolean>(showFoodSelectorInitialState)\r\n    const [showFoodAggregatedFoodSelector, setShowAggregatedFoodSelector] = useState<Boolean>(showCompositeFoodSelectorInitialState)\r\n\r\n    useEffect(() => {\r\n        ReactTooltip.rebuild()\r\n    })\r\n\r\n    ReactTooltip.rebuild()\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onHide = (): void => {\r\n        setShowFoodSelector(false)\r\n        setShowAggregatedFoodSelector(false)\r\n    }\r\n\r\n    const onSelectFoodItemSubmit = (selectedFoodItem: SelectedFoodItem): void => {\r\n        if (applicationContext === null) {\r\n            return\r\n        }\r\n\r\n        const selectedFoodItemWithComponent = makeFoodDataPanelComponent(\r\n            selectedFoodItem, applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n        if (selectedFoodItemWithComponent !== null) {\r\n            applicationContext.setFoodDataPanelData.addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n        }\r\n\r\n        if (applicationContext?.debug) {\r\n            console.log('FoodAnalyzerContainer: Set new selected item and execute callback. Selected item = ', selectedFoodItemWithComponent)\r\n        }\r\n\r\n        const foodClassNameKey = selectedFoodItem.foodClass?.nameKey\r\n        const nameEntity = applicationContext.foodDataCorpus.foodNames.find(entry => entry.id === foodClassNameKey)\r\n        const foodClassName = nameEntity ? nameEntity.englishName : ''\r\n        const debugMode = applicationContext.debug\r\n\r\n        if (selectedFoodItem.foodItem.aggregated) {\r\n            callEvent(\r\n                debugMode,\r\n                GA_ACTION_SELECT_FOOD_ITEM,\r\n                GA_CATEGORY_FOOD_ANALYZER,\r\n                \"Aggregated Data\",\r\n                selectedFoodItem.compositeSubElements?.length ?? 0\r\n            )\r\n        } else {\r\n            callEvent(\r\n                debugMode,\r\n                GA_ACTION_SELECT_FOOD_ITEM,\r\n                GA_CATEGORY_FOOD_ANALYZER,\r\n                foodClassName,\r\n                selectedFoodItem.foodItem.id\r\n            )\r\n        }\r\n\r\n        props.onNewFoodItemSelected()\r\n    }\r\n\r\n    const onCloseAllTabs = async () => {\r\n        if (await confirmAction(\r\n            applicationStrings.confirm_close_all_tabs[languageContext.language],\r\n            applicationStrings.button_yes[languageContext.language],\r\n            applicationStrings.button_no[languageContext.language],\r\n            {}\r\n        )) {\r\n            history.push(PATH_FOODDATA_PANEL)\r\n            applicationContext?.setFoodDataPanelData.removeAllItemsFromFoodDataPanel()\r\n        }\r\n    }\r\n\r\n    if (applicationContext?.debug) {\r\n        console.log('FoodAnalyzerContainer: Render')\r\n    }\r\n\r\n    const selectedFoodItems = applicationContext?.applicationData.foodDataPanel.selectedFoodItems\r\n    const deleteIconEnabled = selectedFoodItems && selectedFoodItems.length > 0\r\n    ReactTooltip.rebuild()\r\n\r\n    const buttonClass = isMobileDevice() ? \"btn mb-4\" : \"btn mb-4 foodanalyzer-button\"\r\n\r\n    return (\r\n        <div className={\"foodanalyzer-buttonbar\"}>\r\n            <div>\r\n                {showFoodSelector &&\r\n                <FoodSelectorModal onHide={onHide} selectedFoodItemCallback={onSelectFoodItemSubmit}\r\n                                   compositeSelector={false}/>\r\n                }\r\n                {showFoodAggregatedFoodSelector &&\r\n                <FoodSelectorModal onHide={onHide} selectedFoodItemCallback={onSelectFoodItemSubmit}\r\n                                   compositeSelector={true}/>\r\n                }\r\n                <div className={\"d-flex flex-column align-items-center\"}>\r\n                    <Button onClick={() => setShowFoodSelector(!showFoodSelector)}\r\n                            className={buttonClass}\r\n                            data-tip={applicationStrings.tooltip_icon_newFoodItem[languageContext.language]}>\r\n                        <FaPlusSquare/>\r\n                    </Button>\r\n                    <Button onClick={() => setShowAggregatedFoodSelector(!showFoodAggregatedFoodSelector)}\r\n                            className={buttonClass}\r\n                            disabled={isMobileDevice()}\r\n                            data-tip={applicationStrings.tooltip_icon_newFoodItemStack[languageContext.language]}>\r\n                        <FaLayerGroup/>\r\n                    </Button>\r\n                    <Button onClick={() => onCloseAllTabs()}\r\n                            disabled={deleteIconEnabled === false}\r\n                            className={buttonClass}\r\n                            data-tip={applicationStrings.tooltip_icon_removeAll[languageContext.language]}>\r\n                        <FaTrash/>\r\n                    </Button>\r\n                </div>\r\n                <ReactTooltip/>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport CloseableTabs from 'react-closeable-tabs';\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\ninterface TabContainerProps {\r\n    onTabChange: (id: number) => void\r\n    indexToSet: number\r\n}\r\n\r\n// Origin: Vinus Online\r\nexport default function TabContainer(props: TabContainerProps) {\r\n    const applicationData = useContext(ApplicationDataContextStore)\r\n\r\n    const style = {\r\n        buttonTab: {\r\n            border: \"border border-secondary\",\r\n            background: \"none\",\r\n            display: \"inline-flex\",\r\n            verticalAlign: \"middle\",\r\n            minHeight: \"30px\",\r\n            alignItems: \"center\",\r\n            cursor: \"pointer\",\r\n            marginTop: \"-12px\",\r\n            borderBottom: \"2px solid transparent\"\r\n        }\r\n    }\r\n\r\n    if(applicationData?.debug) {\r\n        console.log('TabContainer: Render, food panel data = ', applicationData.applicationData.foodDataPanel.selectedFoodItems)\r\n    }\r\n\r\n    if (!applicationData || !applicationData.applicationData.foodDataPanel.selectedFoodItems) {\r\n        return <div/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <CloseableTabs\r\n                data={applicationData.applicationData.foodDataPanel.selectedFoodItems}\r\n                tabPanelClass=\"tab-panel\"\r\n                tabContentClass=\"tab-content mainPanel\"\r\n                style={style}\r\n                onTabClick={(id) => props.onTabChange(id)}\r\n                activeIndex={applicationData.applicationData.foodDataPanel.selectedFoodItemIndex}\r\n            />\r\n        </div>\r\n    )\r\n}","import { AMOUNT_PORTION, CARBS_DATA_BASE, CARBS_DATA_DETAIL, CHART_TYPE_BAR, CHART_TYPE_PIE, GRAM, LIPIDS_DATA_BASE, LIPIDS_DATA_OMEGA, TAB_BASE_DATA, TAB_CARBS_DATA, TAB_LIPIDS_DATA, TAB_MINERAL_DATA, TAB_PROTEINS_DATA, TAB_VITAMIN_DATA } from \"../../config/Constants\"\r\nimport { ChartConfigData, DirectCompareChartConfigData, GeneralizedChartConfig } from \"../../types/livedata/ChartConfigData\"\r\nimport { convertBooleanToDigit, convertStringToBoolean } from \"../calculation/MathService\"\r\n\r\n/**\r\n * Converts/encodes a food data panel chart config sub-element into the corresponding URI query string.\r\n */\r\nexport function makeChartConfigUriString(chartConfigData: ChartConfigData | DirectCompareChartConfigData, selectedDataPage: string): string {\r\n\tlet chartObject: any\r\n\tswitch(selectedDataPage) {\r\n\t\tcase TAB_BASE_DATA:\r\n\t\t\tchartObject = chartConfigData.baseChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_LIPIDS_DATA:\r\n\t\t\tchartObject = chartConfigData.lipidsChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_CARBS_DATA:\r\n\t\t\tchartObject = chartConfigData.carbsChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_VITAMIN_DATA:\r\n\t\t\tchartObject = chartConfigData.vitaminChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_MINERAL_DATA:\r\n\t\t\tchartObject = chartConfigData.mineralChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_PROTEINS_DATA:\r\n\t\t\tchartObject = chartConfigData.proteinChartConfig\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tchartObject = {}\r\n\t}\r\n\t\r\n\tconst generalizedChartConfig = makeGeneralizedChartConfig(chartObject)\r\n\treturn convertGeneralizedChartConfigToString(generalizedChartConfig)\r\n}\r\n\r\n\r\n/**\r\n * Converts/decodes a URI query string to get the encoded chart config data of the currently selected data page\r\n * in the food data panel.\r\n * The resulting chart config will be added to the existing chart configuration data object passed to this method.\r\n */\r\nexport function getUpdatedChartConfig(chartConfigData: ChartConfigData, chartConfigUriString: string, selectedDataPage: string): ChartConfigData {\r\n\tconst chartConfigFromUri = convertGeneralizedChartConfigStringToObject(chartConfigUriString)\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart} = chartConfigFromUri\r\n\t\r\n\tif(selectedDataPage === TAB_BASE_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || showDetails === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, baseChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tshowDetails: showDetails\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_LIPIDS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, lipidsChartConfig: {\r\n\t\t\t\t...chartConfigData.lipidsChartConfig,\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart: subChart\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_CARBS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, carbsChartConfig: {\r\n\t\t\t\t...chartConfigData.carbsChartConfig,\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart: subChart\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage === TAB_MINERAL_DATA || selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\tif(portionType === undefined || expand100 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\tconst barChartConfig = {\r\n\t\t\t\tportionType: portionType,\r\n\t\t\t\texpand100: expand100,\r\n\t\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_VITAMIN_DATA) {\r\n\t\t\treturn {...chartConfigData, vitaminChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_MINERAL_DATA) {\r\n\t\t\treturn {...chartConfigData, mineralChartConfig: barChartConfig}\r\n\t\t}\r\n\t\t\r\n\t\tif(selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\t\treturn {...chartConfigData, proteinChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\treturn chartConfigData\r\n}\r\n\r\n\r\nexport function getUpdatedDirectCompareChartConfig(chartConfigData: DirectCompareChartConfigData, \r\n\t\tchartConfigUriString: string, selectedDataPage: string): DirectCompareChartConfigData {\r\n\tconst chartConfigFromUri = convertGeneralizedChartConfigStringToObject(chartConfigUriString)\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart, subChart2, synchronize} = chartConfigFromUri\r\n\t\r\n\tif(selectedDataPage === TAB_BASE_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || showDetails === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, baseChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tshowDetails: showDetails\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_LIPIDS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined || subChart2 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, lipidsChartConfig: {\r\n\t\t\t\t...chartConfigData.lipidsChartConfig,\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart1: subChart,\r\n\t\t\t\tsubChart2: subChart2,\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_CARBS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined || subChart2 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, carbsChartConfig: {\r\n\t\t\t\t...chartConfigData.carbsChartConfig,\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart1: subChart,\r\n\t\t\t\tsubChart2: subChart2,\r\n\t\t\t\thideRemainders: false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage === TAB_MINERAL_DATA || selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\tif(portionType === undefined || expand100 === undefined || synchronize === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\tconst barChartConfig = {\r\n\t\t\t\tportionType: portionType,\r\n\t\t\t\texpand100: expand100,\r\n\t\t\t\tsynchronize: synchronize\r\n\t\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_VITAMIN_DATA) {\r\n\t\t\treturn {...chartConfigData, vitaminChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_MINERAL_DATA) {\r\n\t\t\treturn {...chartConfigData, mineralChartConfig: barChartConfig}\r\n\t\t}\r\n\t\t\r\n\t\tif(selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\t\treturn {...chartConfigData, proteinChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\treturn chartConfigData\r\n}\r\n\r\n\r\n\r\nexport function makeGeneralizedChartConfig(chartObject: any): GeneralizedChartConfig {\r\n\tconst generalizedChartObject: GeneralizedChartConfig = {}\r\n\tif(chartObject.chartType) {\r\n\t\tgeneralizedChartObject.chartType = chartObject.chartType\r\n\t}\r\n\t\r\n\tif(chartObject.expand100) {\r\n\t\tgeneralizedChartObject.expand100 = chartObject.expand100\r\n\t}\r\n\t\r\n\tif(chartObject.showDetails) {\r\n\t\tgeneralizedChartObject.showDetails = chartObject.showDetails\r\n\t}\r\n\t\r\n\tif(chartObject.showLegend) {\r\n\t\tgeneralizedChartObject.showLegend = chartObject.showLegend\r\n\t}\r\n\t\r\n\tif(chartObject.portionType) {\r\n\t\tgeneralizedChartObject.portionType = chartObject.portionType\r\n\t}\r\n\r\n\tif(chartObject.subChart) {\r\n\t\tgeneralizedChartObject.subChart = chartObject.subChart\r\n\t}\r\n\t\r\n\tif(chartObject.subChart2) {\r\n\t\tgeneralizedChartObject.subChart2 = chartObject.subChart2\r\n\t}\r\n\t\r\n\tif(chartObject.synchronize) {\r\n\t\tgeneralizedChartObject.synchronize = chartObject.synchronize\r\n\t}\r\n\t\r\n\treturn generalizedChartObject\r\n}\r\n\r\n\r\nexport function convertGeneralizedChartConfigToString(chartObject: GeneralizedChartConfig) {\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart, subChart2, synchronize} = chartObject\r\n\t\r\n\tconst chartTypeKey = chartType === undefined || chartType === null ? 0 : chartType === CHART_TYPE_PIE ? 1 : 2\r\n\tconst portionTypeKey = portionType === undefined || portionType === null ? 0 : portionType === AMOUNT_PORTION ? 1 : 2\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\tconst expand100Key = expand100 ? convertBooleanToDigit(expand100) : 0\r\n\tconst showLegendKey = showLegend ? convertBooleanToDigit(showLegend) : 0\r\n\tconst showDetailsKey = showDetails ? convertBooleanToDigit(showDetails) : 0\r\n\t\r\n\tconst subChartKey = subChart ? getSubChartKey(subChart) : 0\r\n\tconst subChartKey2 = subChart2 ? getSubChartKey(subChart2) : 0\r\n\tconst synchronizeKey = synchronize ? convertBooleanToDigit(synchronize) : 0\r\n\t\r\n\treturn `${chartTypeKey}${portionTypeKey}${expand100Key}${showLegendKey}${showDetailsKey}${subChartKey}${subChartKey2}${synchronizeKey}`\r\n}\r\n\r\n\r\nexport function convertGeneralizedChartConfigStringToObject(uriString: string): GeneralizedChartConfig {\r\n\tif(!uriString) {\r\n\t\treturn {}\r\n\t}\r\n\t\r\n\tconst stringToParse = uriString.trim()\r\n\tif(stringToParse.length !== 8) {\r\n\t\treturn {}\r\n\t}\r\n\t\r\n\tconst chartTypeKey = stringToParse.substring(0, 1)\r\n\tconst portionTypeKey = stringToParse.substring(1, 2)\r\n\tconst expand100Key = stringToParse.substring(2, 3)\r\n\tconst showLegendKey = stringToParse.substring(3, 4)\r\n\tconst showDetailsKey = stringToParse.substring(4, 5)\r\n\tconst subChartKey = stringToParse.substring(5, 6)\r\n\tconst subChartKey2 = stringToParse.substring(6, 7)\r\n\tconst synchronizeKey = stringToParse.substring(7, 8)\r\n\t\r\n\tconst chartTypeNumber = parseInt(chartTypeKey)\r\n\tconst portionTypeNumber = parseInt(portionTypeKey)\r\n\tconst subChartNumber = parseInt(subChartKey)\r\n\tconst subChartNumber2 = parseInt(subChartKey2)\r\n\t\t\r\n\tconst chartType = chartTypeNumber === 0 || isNaN(chartTypeNumber) \r\n\t\t\t\t\t\t? undefined \r\n\t\t\t\t\t\t: chartTypeNumber === 1 ? CHART_TYPE_PIE : CHART_TYPE_BAR\r\n\t\t\t\t\t\t\r\n\tconst portionType = portionTypeNumber === 0 || isNaN(portionTypeNumber) \r\n\t\t\t\t\t\t? undefined \r\n\t\t\t\t\t\t: portionTypeNumber === 1 ? AMOUNT_PORTION : GRAM\r\n\t\r\n\tconst subChart = subChartNumber === 0 || isNaN(subChartNumber) ? undefined : getSubChartFromKey(subChartNumber)\r\n\tconst subChart2 = subChartNumber2 === 0 || isNaN(subChartNumber2) ? undefined : getSubChartFromKey(subChartNumber2)\r\n\t\r\n\treturn {\r\n\t\tchartType: chartType,\r\n\t\tportionType: portionType,\r\n\t\texpand100: convertStringToBoolean(expand100Key),\r\n\t\tshowLegend: convertStringToBoolean(showLegendKey),\r\n\t\tshowDetails: convertStringToBoolean(showDetailsKey),\r\n\t\tsubChart: subChart ? subChart : undefined,\r\n\t\tsubChart2: subChart2 ? subChart2 : undefined,\r\n\t\tsynchronize: convertStringToBoolean(synchronizeKey)\r\n\t}\r\n\t\r\n}\r\n\r\n\r\nexport function getSubChartKey(subChart: string): number {\r\n\tswitch(subChart) {\r\n\t\tcase CARBS_DATA_BASE:\r\n\t\t\treturn 1\r\n\t\tcase CARBS_DATA_DETAIL:\r\n\t\t\treturn 2\r\n\t\tcase LIPIDS_DATA_BASE:\r\n\t\t\treturn 3\r\n\t\tcase LIPIDS_DATA_OMEGA:\r\n\t\t\treturn 4\r\n\t\tdefault:\r\n\t\t\treturn 0\r\n\t}\r\n}\r\n\r\nexport function getSubChartFromKey(key: number): string | null {\r\n\tswitch(key) {\r\n\t\tcase 1:\r\n\t\t\treturn CARBS_DATA_BASE\r\n\t\tcase 2:\r\n\t\t\treturn CARBS_DATA_DETAIL\r\n\t\tcase 3:\r\n\t\t\treturn LIPIDS_DATA_BASE\r\n\t\tcase 4:\r\n\t\t\treturn LIPIDS_DATA_OMEGA\r\n\t\tdefault:\r\n\t\t\treturn null\r\n\t}\t\t\r\n}\r\n","import {SEX_FEMALE, SEX_MALE} from \"../../config/Constants\"\r\nimport {ChartConfigData} from \"../../types/livedata/ChartConfigData\"\r\nimport {FoodItemUriData, SimpleFoodItemUriData} from \"../../types/livedata/UriData\"\r\nimport {UserData} from \"../../types/livedata/UserData\"\r\nimport {PortionData} from \"../../types/nutrientdata/FoodItem\"\r\nimport {getPalCategory, getPalValue} from \"../calculation/EnergyService\"\r\nimport {convertBooleanToDigit, convertStringToBoolean, getNumberOfFixedLength} from \"../calculation/MathService\"\r\nimport {getUpdatedChartConfig, makeChartConfigUriString} from \"./ChartConfigConverter\"\r\n\r\n\r\nexport function makeFoodDataPanelDefaultUri(foodItemData: FoodItemUriData,\r\n\t\tuserData: UserData, selectedDataPage: string, selectedDisplayMode: string, chartConfigData: ChartConfigData) {\r\n\tconst foodItemDataString = makeFoodItemDefaultUri(foodItemData)\r\n\tconst userDataString = convertUserDataObjectToString(userData)\r\n\tconst chartConfigString = makeChartConfigUriString(chartConfigData, selectedDataPage)\r\n\treturn `${foodItemDataString};${selectedDataPage};${selectedDisplayMode};${userDataString};${chartConfigString}`\r\n}\r\n\r\nexport function makeFoodItemDefaultUri(foodItemData: FoodItemUriData) {\r\n\t\tconst portionString = convertPortionDataObjectToString(foodItemData.portionData)\t\r\n\t\tconst supplementValue = convertBooleanToDigit(foodItemData.supplementData)\r\n\t\tconst combineValue = convertBooleanToDigit(foodItemData.combineData)\r\n\t\t\r\n\t\treturn `${foodItemData.foodItemId};${foodItemData.source};${portionString};${supplementValue}${combineValue}`\r\n}\r\n\r\nexport function parseFoodDataPanelDefaultUri(uri: string, chartConfigData: ChartConfigData): SimpleFoodItemUriData | null {\r\n\tconst fragments = prepareUriForParsing(uri).split(\";\")\r\n\tif(fragments.length !== 8) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst selectedDataPage = fragments[4]\r\n\tconst displayMode = fragments[5]\r\n\tconst userData = convertUserDataStringToObject(fragments[6])\r\n\tconst chartConfigString = fragments[7]\r\n\tconst foodItemUriData = getFoodItemUriData(fragments)\r\n\t\r\n\tif(!userData || !foodItemUriData) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst newChartConfigData = getUpdatedChartConfig(chartConfigData, chartConfigString, selectedDataPage)\r\n\t\r\n\treturn {\r\n\t\tselectedFoodItem: foodItemUriData,\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tdisplayMode: displayMode,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Retrieves the food item uri data from a fragments string. It will always extract those\r\n * data objects from the beginning of the array, no matter how long it is.\r\n */\r\nexport function getFoodItemUriData(fragments: Array<string>): FoodItemUriData | null {\r\n\tconst foodItemId = parseInt(fragments[0])\r\n\tconst source = parseInt(fragments[1])\r\n\tconst portionData = convertPortionDataStringToObject(fragments[2])\r\n\tconst booleanData = fragments[3]\r\n\t\r\n\tconst supplementData = convertStringToBoolean(booleanData.substring(0,1))\r\n\tconst combineData = convertStringToBoolean(booleanData.substring(1,2))\r\n\t\r\n\tif(!portionData || booleanData.length < 2) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\treturn {\r\n\t\tfoodItemId: foodItemId,\r\n\t\tsource: source,\r\n\t\tportionData: portionData,\r\n\t\tsupplementData: supplementData,\r\n\t\tcombineData: combineData\r\n\t}\r\n}\r\n\r\nexport function convertUserDataObjectToString(userData: UserData): string {\r\n\tconst weight = getNumberOfFixedLength(userData.weight, 3)\r\n\tconst age = getNumberOfFixedLength(userData.age, 3)\r\n\tconst size = getNumberOfFixedLength(userData.size, 3)\r\n\r\n\tconst palValue = getNumberOfFixedLength( getPalCategory(userData.palValue), 2)\r\n\tconst sex = userData.sex === SEX_MALE ? 1 : 0\r\n\t\r\n\tconst pregnant = convertBooleanToDigit(userData.pregnant)\r\n\tconst breastFeeding = convertBooleanToDigit(userData.breastFeeding)\r\n\tconst leisureSports = convertBooleanToDigit(userData.leisureSports)\r\n\t\t\r\n\treturn `${weight}${age}${size}${palValue}${sex}${pregnant}${breastFeeding}${leisureSports}`\r\n}\r\n\r\n\r\nexport function convertUserDataStringToObject(userDataString: string): UserData | null {\r\n\tif(userDataString.length < 15) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst weight = userDataString.substring(0,3)\r\n\tconst age = userDataString.substring(3,6)\r\n\tconst size = userDataString.substring(6,9)\r\n\tconst palValueInt = userDataString.substring(9,11)\r\n\tconst sex = userDataString.substring(11,12)\r\n\tconst pregnant = userDataString.substring(12,13)\r\n\tconst breastFeeding = userDataString.substring(13,14)\r\n\tconst leisureSports = userDataString.substring(14,15)\r\n\t\r\n\tconst palValue = getPalValue(parseInt(palValueInt))\r\n\t\r\n\treturn {\r\n\t\tweight: parseInt(weight),\r\n\t\tage: parseInt(age),\r\n\t\tsize: parseInt(size),\r\n\t\tpalValue: palValue,\r\n\t\tsex: sex === \"1\" ? SEX_MALE : SEX_FEMALE,\r\n\t\tpregnant: convertStringToBoolean(pregnant),\r\n\t\tbreastFeeding: convertStringToBoolean(breastFeeding),\r\n\t\tleisureSports: convertStringToBoolean(leisureSports),\r\n\t\tinitialValues: false\r\n\t}\r\n}\r\n\r\n\r\nexport function convertPortionDataObjectToString(portionData: PortionData): string {\r\n\treturn `${portionData.portionType}_${portionData.amount}`\r\n}\r\n\r\nexport function convertPortionDataStringToObject(portionDataString: string): PortionData | null {\r\n\tconst fragments = portionDataString.split(\"_\")\r\n\tif(fragments.length !== 2) {\r\n\t\treturn null\r\n\t}\r\n\treturn {\r\n\t\tportionType: parseInt(fragments[0]),\r\n\t\tamount: parseInt(fragments[1])\r\n\t}\r\n}\r\n\r\n\r\nexport function prepareUriForParsing(uri: string): string {\r\n\t// Some websites like youtube transform the semicolons in the URL to %3B, which later need to be translated back to semicolons\r\n\treturn uri.replace(/%3B/g, \";\")\r\n}\r\n\r\n","import { ChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\"\r\nimport { AggregatedFoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { getUpdatedChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\nimport {\r\n\tconvertUserDataObjectToString,\r\n\tconvertUserDataStringToObject,\r\n\tprepareUriForParsing\r\n} from \"./FoodDataPanelUriService\"\r\n\r\n\r\ninterface Replacemet {\r\n\tkey: string\r\n\tshort: string\r\n}\r\n\r\nconst separator = \"++\"\r\n\r\nconst metaDataReplacement: Array<Replacemet> = [\r\n\t{key: \"nutrientDataList\", short: \"_mA\"},\r\n\t{key: \"foodItem\", short: \"_mB\"},\r\n\t{key: \"sourceItemId\", short: \"_mC\"},\r\n\t{key: \"source\", short: \"_mD\"},\r\n\t{key: \"url\", short: \"_mE\"},\r\n\t{key: \"name\", short: \"_mF\"},\r\n\t{key: \"id\", short: \"_mG\"},\r\n]\r\n\t\r\nconst nutrientCategoryReplacement: Array<Replacemet> = [\r\n\t{key: \"baseData\", short: \"_nA\"},\r\n\t{key: \"carbohydrateData\", short: \"_nB\"},\r\n\t{key: \"vitaminData\", short: \"_nC\"},\r\n\t{key: \"mineralData\", short: \"_nD\"},\r\n\t{key: \"lipidData\", short: \"_nE\"},\r\n\t{key: \"proteinData\", short: \"_nF\"},\r\n]\r\n\r\nconst baseDataReplacements: Array<Replacemet> = [\r\n\t{key: \"energy\", short: \"_bA\"},\r\n\t{key: \"water\", short: \"_bB\"},\r\n\t{key: \"carbohydrates\", short: \"_bC\"},\r\n\t{key: \"lipids\", short: \"_bD\"},\r\n\t{key: \"proteins\", short: \"_bE\"},\r\n\t{key: \"dietaryFibers\", short: \"_bF\"},\r\n\t{key: \"ash\", short: \"_bG\"},\r\n\t{key: \"alcohol\", short: \"_bH\"}\r\n]\r\n\r\nconst carbsDataReplacements: Array<Replacemet> = [\r\n\t{key: \"sugar\", short: \"_cA\"},\r\n\t{key: \"sucrose\", short: \"_cB\"},\r\n\t{key: \"glucose\", short: \"_cC\"},\r\n\t{key: \"lactose\", short: \"_cD\"},\r\n\t{key: \"fructose\", short: \"_cE\"},\r\n\t{key: \"galactose\", short: \"_cF\"},\r\n\t{key: \"maltose\", short: \"_cG\"},\r\n\t{key: \"starch\", short: \"_cH\"}\r\n]\r\n\r\nconst lipidsDataReplacements: Array<Replacemet> = [\r\n\t{key: \"saturated\", short: \"_lA\"},\r\n\t{key: \"unsaturatedMono\", short: \"_lB\"},\r\n\t{key: \"unsaturatedPoly\", short: \"_lC\"},\r\n\t{key: \"transFattyAcids\", short: \"_lD\"},\r\n\t{key: \"cholesterol\", short: \"_lE\"},\r\n\t{key: \"galactose\", short: \"_lF\"},\r\n\t{key: \"omegaData\", short: \"_lG\"},\r\n\t{key: \"omega3\", short: \"_lH\"},\r\n\t{key: \"omega6\", short: \"_li\"},\r\n\t{key: \"uncertain\", short: \"_lj\"},\r\n\t{key: \"uncertainRatio\", short: \"_li\"}\r\n]\r\n\r\nconst mineralDataReplacement: Array<Replacemet> = [\r\n\t{key: \"calcium\", short: \"_bA\"},\r\n\t{key: \"iron\", short: \"_bB\"},\r\n\t{key: \"magnesium\", short: \"_bC\"},\r\n\t{key: \"phosphorus\", short: \"_bD\"},\r\n\t{key: \"potassium\", short: \"_bE\"},\r\n\t{key: \"sodium\", short: \"_bF\"},\r\n\t{key: \"zinc\", short: \"_bG\"},\r\n\t{key: \"selenium\", short: \"_bH\"},\r\n\t{key: \"manganese\", short: \"_bI\"},\r\n\t{key: \"copper\", short: \"_bJ\"}\r\n]\r\n\r\nconst vitaminDataReplacement: Array<Replacemet> = [\r\n\t{key: \"a\", short: \"_vA\"},\r\n\t{key: \"b1\", short: \"_vB\"},\r\n\t{key: \"b2\", short: \"_vC\"},\r\n\t{key: \"b3\", short: \"_vD\"},\r\n\t{key: \"b5\", short: \"_vE\"},\r\n\t{key: \"b7\", short: \"_vF\"},\r\n\t{key: \"b9\", short: \"_vG\"},\r\n\t{key: \"b12\", short: \"_vH\"},\r\n\t{key: \"c\", short: \"_vI\"},\r\n\t{key: \"d\", short: \"_vJ\"},\r\n\t{key: \"e\", short: \"_vK\"},\r\n\t{key: \"k\", short: \"_vL\"}\r\n]\r\n\r\nconst carotenoidDataReplacement: Array<Replacemet> = [\r\n\t{key: \"caroteneAlpha\", short: \"_xA\"},\r\n\t{key: \"caroteneBeta\", short: \"_xB\"},\r\n\t{key: \"cryptoxanthin\", short: \"_xC\"},\r\n\t{key: \"lycopene\", short: \"_xD\"},\r\n\t{key: \"lutein\", short: \"_xE\"},\r\n]\r\n\r\nconst proteinDataReplacement: Array<Replacemet> = [\r\n\t{key: \"tryptophan\", short: \"_bA\"},\r\n\t{key: \"threonine\", short: \"_bB\"},\r\n\t{key: \"isoleucine\", short: \"_bC\"},\r\n\t{key: \"leucine\", short: \"_bD\"},\r\n\t{key: \"lysine\", short: \"_bE\"},\r\n\t{key: \"methionine\", short: \"_bF\"},\r\n\t{key: \"cystine\", short: \"_bG\"},\r\n\t{key: \"phenylalanine\", short: \"_bH\"},\r\n\t{key: \"tyrosine\", short: \"_bI\"},\r\n\t{key: \"arginine\", short: \"_bJ\"},\r\n\t{key: \"histidine\", short: \"_bK\"},\r\n\t{key: \"alanine\", short: \"_bL\"},\r\n\t{key: \"asparticAcid\", short: \"_bM\"},\r\n\t{key: \"glycine\", short: \"_bN\"},\r\n\t{key: \"proline\", short: \"_bO\"},\r\n\t{key: \"serine\", short: \"_bP\"},\r\n]\r\n\r\nconst replacements: Array<Array<Replacemet>> = [\r\n\tmetaDataReplacement,\r\n\tnutrientCategoryReplacement,\r\n\tbaseDataReplacements,\r\n\tcarbsDataReplacements,\r\n\tlipidsDataReplacements,\r\n\tmineralDataReplacement,\r\n\tvitaminDataReplacement,\r\n\tcarotenoidDataReplacement,\r\n\tproteinDataReplacement\r\n]\r\n\r\n\r\nexport function convertAggregatedDataJsonToUriString(uriData: AggregatedFoodItemUriData): string {\t\r\n\tconst objectToParse: SelectedFoodItem = {...uriData.selectedFoodItem, compositeSubElements: undefined, component: undefined, foodClass: undefined}\r\n\tlet selectedFoodItemString = JSON.stringify(objectToParse)\r\n\t\r\n\treplacements.forEach(replacementArray => {\r\n\t\treplacementArray.forEach(replacement => selectedFoodItemString = selectedFoodItemString.replace(`\"${replacement.key}\"`, replacement.short))\r\n\t})\r\n\t\r\n\tconst userDataString = convertUserDataObjectToString(uriData.userData)\r\n\tconst chartConfigString = makeChartConfigUriString(uriData.chartConfigData, uriData.selectedDataPage)\r\n\t\r\n\treturn `${uriData.selectedDataPage}${separator}${selectedFoodItemString}${separator}${userDataString}${separator}${chartConfigString}`\r\n}\r\n\r\nexport function convertAggregatedUriStringToObject(chartConfigData: ChartConfigData, uriString: string): AggregatedFoodItemUriData | null {\r\n\tconst fragments = uriString.split(separator)\r\n\tif(fragments.length !== 4) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\tconst selectedDataPage = fragments[0]\r\n\tlet selectedFoodItem: SelectedFoodItem = convertUriStringToSelectedFoodItem( fragments[1])\r\n\tselectedFoodItem = {...selectedFoodItem, aggregated: true}\r\n\t\r\n\tconst userData: UserData | null = convertUserDataStringToObject(fragments[2])\r\n\tconst newChartConfigData: ChartConfigData = getUpdatedChartConfig(chartConfigData, fragments[3], selectedDataPage)\r\n\t\r\n\tif(!userData) {\r\n\t\treturn null\r\n\t}\r\n\t\t\r\n\treturn {\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tselectedFoodItem: selectedFoodItem,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n}\r\n\r\n\r\nexport function convertUriStringToSelectedFoodItem(uriString: string): SelectedFoodItem {\r\n\tlet stringToParse = prepareUriForParsing(uriString).trim()\r\n\tstringToParse = stringToParse.replace(/%22/g, \"\\\"\")\r\n\tstringToParse = stringToParse.replace(/%20/g, \" \")\r\n\t\r\n\treplacements.forEach(replacementArray => {\r\n\t\treplacementArray.forEach(replacement => stringToParse = stringToParse.replace(replacement.short, `\"${replacement.key}\"`))\r\n\t})\r\n\t\r\n\treturn JSON.parse(stringToParse)\r\n}","import { UserData } from \"../types/livedata/UserData\";\r\n\r\nexport const USERDATA_ERROR_AGE = \"userdata error age\"\r\nexport const USERDATA_ERROR_WEIGHT = \"userdata error weight\"\r\nexport const USERDATA_ERROR_SIZE = \"userdata error size\"\r\nexport const USERDATA_OK = \"userdata ok\"\r\n\r\nexport function checkUserDataValidity(userData: UserData): string {\r\n\tconst {age, size, weight} = userData\r\n\r\n\tif (age != null && (age < 15 || age > 100 || isNaN(age))) {\r\n\t\treturn USERDATA_ERROR_AGE\r\n    } else if (size != null && (size < 80 || size > 225 || isNaN(size))) {\r\n\t\treturn USERDATA_ERROR_SIZE\r\n\t} else if (weight != null && (weight < 30 || weight > 250 || isNaN(weight))) {\r\n\t\treturn USERDATA_ERROR_WEIGHT\r\n    }\r\n\r\n    return USERDATA_OK\r\n}","import FoodAnalyzerContainer from \"./FoodAnalyzerContainer\";\r\nimport {useContext, useEffect} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport TabContainer from \"./TabContainer\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {\r\n    PATH_FOODDATA_PANEL,\r\n    QUERYKEY_DATAPANEL_ADD, QUERYKEY_DATAPANEL_ADD_COMPOSITE,\r\n    QUERYKEY_DATAPANEL_AGGREGATED,\r\n    QUERYKEY_DATAPANEL_ITEM\r\n} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {makeFoodDataPanelComponent} from \"../../service/FoodDataPanelService\";\r\nimport {AggregatedFoodItemUriData, FoodItemUriData} from \"../../types/livedata/UriData\";\r\nimport {makeFoodDataPanelDefaultUri, parseFoodDataPanelDefaultUri} from \"../../service/uri/FoodDataPanelUriService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {\r\n    convertAggregatedDataJsonToUriString,\r\n    convertAggregatedUriStringToObject\r\n} from \"../../service/uri/FoodDataPanelAggregatedUriService\";\r\nimport {checkUserDataValidity, USERDATA_OK} from \"../../service/UserDataService\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport {FaExclamationTriangle} from \"react-icons/fa\";\r\n\r\nexport default function FoodDataPanelContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const queryString = window.location.search.substring(1)\r\n    const equalOperator = queryString.indexOf(\"=\")\r\n    const key = queryString.substring(0, equalOperator)\r\n    const value = queryString.substring(equalOperator + 1)\r\n\r\n    const openSelectorModal = key === QUERYKEY_DATAPANEL_ADD && value === \"1\"\r\n    const openCompositeSelectorModal = key === QUERYKEY_DATAPANEL_ADD_COMPOSITE && value === \"1\"\r\n\r\n    useEffect(() => {\r\n        buildDataPanelPageFromURI()\r\n    }, [applicationContext?.applicationData.foodDataPanel.selectedFoodItemIndex,\r\n        applicationContext?.applicationData.foodDataPanel.selectedFoodItems,\r\n        applicationContext?.applicationData.foodDataPanel.selectedDataPage,\r\n        applicationContext?.applicationData.foodDataPanel.displayMode,\r\n        applicationContext?.applicationData.foodDataPanel.chartConfigData,\r\n        applicationContext?.userData])\r\n\r\n    const buildDataPanelPageFromURI = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const {selectedFoodItemIndex, selectedFoodItems} = applicationContext.applicationData.foodDataPanel\r\n\r\n        if (selectedFoodItemIndex === null || !selectedFoodItems || selectedFoodItems.length === 0) {\r\n            createDataFromUriQuery()\r\n        } else {   // Set new URI Query\r\n            updateUriQuery(selectedFoodItemIndex)\r\n        }\r\n    }\r\n\r\n    if (!applicationContext || !applicationContext.ready) {\r\n        return <div/>\r\n    }\r\n\r\n    const chartConfigData = applicationContext.applicationData.foodDataPanel.chartConfigData\r\n\r\n    const updateUriQuery = (selectedFoodItemIndex: number) => {\r\n        const selectedFoodItem = selectedFoodItems[selectedFoodItemIndex]\r\n        const userData = applicationContext.userData\r\n        const {selectedDataPage, displayMode, chartConfigData} = applicationContext.applicationData.foodDataPanel\r\n\r\n        // New query for aggregated food item\r\n        if (selectedFoodItem.aggregated) {\r\n            const uriDataObject: AggregatedFoodItemUriData = {\r\n                selectedFoodItem: {...selectedFoodItem, component: undefined},\r\n                selectedDataPage: selectedDataPage,\r\n                userData: userData,\r\n                chartConfigData: chartConfigData\r\n            }\r\n\r\n            const query = convertAggregatedDataJsonToUriString(uriDataObject)\r\n\r\n            history.push({\r\n                pathName: PATH_FOODDATA_PANEL,\r\n                search: `${QUERYKEY_DATAPANEL_AGGREGATED}=${query}`\r\n            })\r\n        } else {   // New query for a default food item\r\n            const {portion, selectedSource, supplementData, combineData} = selectedFoodItem\r\n            const foodItemData: FoodItemUriData = {\r\n                foodItemId: selectedFoodItem.foodItem.id,\r\n                portionData: portion,\r\n                source: selectedSource,\r\n                supplementData: supplementData,\r\n                combineData: combineData\r\n            }\r\n            const query = makeFoodDataPanelDefaultUri(foodItemData, userData, selectedDataPage, displayMode, chartConfigData)\r\n\r\n            history.push({\r\n                pathName: PATH_FOODDATA_PANEL,\r\n                search: `${QUERYKEY_DATAPANEL_ITEM}=${query}`\r\n            })\r\n        }\r\n    }\r\n\r\n    const createDataFromUriQuery = () => {\r\n        const {\r\n            addItemToFoodDataPanel,\r\n            setSelectedDataPage,\r\n            setSelectedDisplayMode\r\n        } = applicationContext.setFoodDataPanelData\r\n\r\n        // Set data from an aggregated food item query\r\n        if (key === QUERYKEY_DATAPANEL_AGGREGATED && value.length > 1) {\r\n            try {\r\n                const uriDataObject: AggregatedFoodItemUriData | null = convertAggregatedUriStringToObject(chartConfigData, value)\r\n                if (!uriDataObject) {\r\n                    return\r\n                }\r\n\r\n                if (checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n                    return\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(uriDataObject.chartConfigData)\r\n                setSelectedDataPage(uriDataObject.selectedDataPage)\r\n                applicationContext.setUserData(uriDataObject.userData)\r\n\r\n                const selectedFoodItemWithComponent = makeFoodDataPanelComponent(uriDataObject.selectedFoodItem,\r\n                    applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n                if (selectedFoodItemWithComponent) {\r\n                    selectedFoodItemWithComponent.aggregated = true\r\n                    addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n                }\r\n            } catch (e) {\r\n                if(applicationContext.debug) {\r\n                    console.log(e)\r\n                }\r\n            }\r\n        }\r\n\r\n        // Set data from a simple food item (create data from query parameters)\r\n        if (key === QUERYKEY_DATAPANEL_ITEM && value.length > 1) {\r\n            const uriDataObject = parseFoodDataPanelDefaultUri(value, chartConfigData)\r\n            if (uriDataObject) {\r\n                const foodItem = applicationContext.foodDataCorpus.foodItems.find(\r\n                    foodItem => foodItem.id === uriDataObject.selectedFoodItem.foodItemId\r\n                )\r\n\r\n                if (!foodItem) {\r\n                    return\r\n                }\r\n\r\n                if (checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n                    return\r\n                }\r\n\r\n                applicationContext.setUserData(uriDataObject.userData)\r\n                const foodClass = applicationContext.foodDataCorpus.foodClasses.find(foodClass => foodClass.id === foodItem.foodClass)\r\n\r\n                const selectedFoodItem: SelectedFoodItem = {\r\n                    id: 1,\r\n                    foodItem: foodItem,\r\n                    foodClass: foodClass,\r\n                    portion: uriDataObject.selectedFoodItem.portionData,\r\n                    selectedSource: uriDataObject.selectedFoodItem.source,\r\n                    combineData: uriDataObject.selectedFoodItem.combineData,\r\n                    supplementData: uriDataObject.selectedFoodItem.supplementData\r\n                }\r\n\r\n                setSelectedDataPage(uriDataObject.selectedDataPage)\r\n                setSelectedDisplayMode(uriDataObject.displayMode)\r\n\r\n                const selectedFoodItemWithComponent = makeFoodDataPanelComponent(selectedFoodItem,\r\n                    applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n                if (selectedFoodItemWithComponent) {\r\n                    addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(uriDataObject.chartConfigData)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const selectedFoodItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems\r\n\r\n    const onTabChange = (foodId) => {\r\n        buildDataPanelPageFromURI()\r\n        for (let i = 0; i < selectedFoodItems.length; i++) {\r\n            if (selectedFoodItems[i].id === foodId) {\r\n                applicationContext.setFoodDataPanelData.setSelectedFoodTab(i)\r\n            }\r\n        }\r\n    }\r\n\r\n    const onNewFoodItemSelected = (): void => {\r\n        buildDataPanelPageFromURI()\r\n        const newTabIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length - 1\r\n        applicationContext.setFoodDataPanelData.setSelectedFoodTab(newTabIndex)\r\n    }\r\n\r\n    const selectedTabIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n    if (!(selectedTabIndex >= 0)) {\r\n        return <div/>\r\n    }\r\n\r\n    const selectedFoodItem = applicationContext.applicationData.foodDataPanel.selectedFoodItems[selectedTabIndex]\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('FoodDataPanelContainer: Render, selected food item = ', selectedFoodItem)\r\n    }\r\n\r\n    return <div>\r\n        {selectedFoodItem !== null &&\r\n        <div className=\"container-fluid container-scroll\" style={{paddingTop: \"4vh\"}}>\r\n            <div className=\"d-flex flex-row\">\r\n                <div className={\"\"}>\r\n                    <FoodAnalyzerContainer onNewFoodItemSelected={onNewFoodItemSelected}\r\n                                           openSelectorModal={openSelectorModal}\r\n                                           openCompositeSelectorModal={openCompositeSelectorModal}\r\n                    />\r\n                </div>\r\n                <div className=\"col media app\" style={{maxWidth: \"1100px\", marginTop: \"-10px\"}}>\r\n                    {selectedFoodItems && selectedFoodItems.length > 0 ?\r\n                        <div>\r\n                            <TabContainer indexToSet={selectedTabIndex} onTabChange={onTabChange}/>\r\n                        </div>\r\n                        :\r\n                        <div className={\"form-text\"} style={{padding: \"24px\"}}>\r\n                            <p>\r\n                                <i>\r\n                                    {applicationStrings.text_empty_fooddatapanel[languageContext.language]}\r\n                                </i>\r\n                            </p>\r\n                            {isMobileDevice() &&\r\n                             <p><FaExclamationTriangle/> {applicationStrings.text_empty_fooddatapanel_mobileInfo[languageContext.language]}</p>\r\n                            }\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n        }\r\n    </div>\r\n\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport FoodSelector from \"./FoodSelector\";\r\nimport {Button, Card, CardDeck} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {initialComparisonFoodClassId, initialFoodClassId} from \"../../config/ApplicationSetting\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\n\r\ninterface DirectCompareSelectorProps {\r\n    updateSelectedFoodItems: (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => void\r\n}\r\n\r\nconst STATUS_FIRST_TIME = \"first time\"\r\nconst STATUS_NOT_UPDATED = \"not updated\"\r\nconst STATUS_UPDATED = \"updated\"\r\n\r\nexport function DirectCompareSelector(props: DirectCompareSelectorProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const language = languageContext.language\r\n\r\n    // Checkbox states (needed to update global configuration)\r\n    const [supplementData1, setSupplementData1] = useState<boolean>(true)\r\n    const [combineData1, setCombineData1] = useState<boolean>(false)\r\n\r\n    const [supplementData2, setSupplementData2] = useState<boolean>(true)\r\n    const [combineData2, setCombineData2] = useState<boolean>(false)\r\n\r\n    const initialItem1 = applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem1 !== null\r\n        ? applicationContext.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        : null\r\n\r\n    const initialItem2 = applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2 !== null\r\n        ? applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        : null\r\n\r\n    const [selectedFoodItem1, setSelectedFoodItem1] = useState<SelectedFoodItem | null>(initialItem1)\r\n    const [selectedFoodItem2, setSelectedFoodItem2] = useState<SelectedFoodItem | null>(initialItem2)\r\n    const [displayStatus, setDisplayStatus] = useState<string>(STATUS_FIRST_TIME)\r\n\r\n    useEffect(() => {\r\n        if(applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2) {\r\n            const {selectedFoodItem1, selectedFoodItem2} = applicationContext.applicationData.directCompareDataPanel\r\n            if(selectedFoodItem1 && selectedFoodItem2) {\r\n                updateSelectedFoodItem1(selectedFoodItem1)\r\n                updateSelectedFoodItem2(selectedFoodItem2)\r\n            }\r\n        }\r\n\r\n    }, [applicationContext?.applicationData.directCompareDataPanel, supplementData1, combineData1, supplementData2, combineData2 ])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateSelectedFoodItem1 = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem1({...selectedFoodItem})\r\n        if (displayStatus !== STATUS_FIRST_TIME) {\r\n            setDisplayStatus(STATUS_UPDATED)\r\n        }\r\n    }\r\n\r\n    const updateSelectedFoodItem2 = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem2(selectedFoodItem)\r\n        if (displayStatus !== STATUS_FIRST_TIME) {\r\n            setDisplayStatus(STATUS_UPDATED)\r\n        }\r\n    }\r\n\r\n    const updateFoodSelectorConfig1 = (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => {\r\n        setSupplementData1(supplementData)\r\n        setCombineData1(combineData)\r\n    }\r\n\r\n    const updateFoodSelectorConfig2 = (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => {\r\n        setSupplementData2(supplementData)\r\n        setCombineData2(combineData)\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (selectedFoodItem1 && selectedFoodItem2) {\r\n            props.updateSelectedFoodItems(selectedFoodItem1, selectedFoodItem2)\r\n\r\n            if (applicationContext) {\r\n                const currentSelectorSetting1 = applicationContext.applicationData.directCompareDataPanel.foodSelector1\r\n                if (supplementData1 !== currentSelectorSetting1.sourceSupplement\r\n                    || combineData1 !== currentSelectorSetting1.sourceCombine) {\r\n                    applicationContext.setDirectCompareFoodSelector1(supplementData1, combineData1)\r\n                }\r\n\r\n                const currentSelectorSetting2 = applicationContext.applicationData.directCompareDataPanel.foodSelector2\r\n                if (supplementData2 !== currentSelectorSetting2.sourceSupplement\r\n                    || combineData2 !== currentSelectorSetting2.sourceCombine) {\r\n                    applicationContext.setDirectCompareFoodSelector2(supplementData2, combineData2)\r\n                }\r\n            }\r\n        }\r\n\r\n        setDisplayStatus(STATUS_NOT_UPDATED)\r\n    }\r\n\r\n\r\n    const renderFoodSelectorCard = (foodSelectorNumber: number) => {\r\n        const updateSelectedFoodItem = foodSelectorNumber === 1 ? updateSelectedFoodItem1 : updateSelectedFoodItem2\r\n        const styleClass = foodSelectorNumber === 1 ? {backgroundColor: direct_compare_color1} : {backgroundColor: direct_compare_color2}\r\n        const initialFoodClassToSet = foodSelectorNumber === 1 ? initialFoodClassId : initialComparisonFoodClassId\r\n\r\n        const selectedFoodItem = foodSelectorNumber === 1 ? selectedFoodItem1 : selectedFoodItem2\r\n        const updateFoodSelectorConfig = foodSelectorNumber === 1 ? updateFoodSelectorConfig1 : updateFoodSelectorConfig2\r\n\r\n        return <div style={{paddingTop: \"32px\"}}>\r\n            <Card style={styleClass}>\r\n                <Card.Header>\r\n                    {applicationStrings.label_food[language]} {foodSelectorNumber}\r\n                </Card.Header>\r\n                <CardDeck>\r\n                    <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                  updateFoodSelectorConfig={updateFoodSelectorConfig}\r\n                                  compositeSelector={false}\r\n                                  directCompareSelector={true}\r\n                                  selectedFoodItem={selectedFoodItem}\r\n                                  defaultFoodClass={initialFoodClassToSet}\r\n                                  directCompareSelectorNumber={foodSelectorNumber}\r\n                    />\r\n                </CardDeck>\r\n            </Card>\r\n        </div>\r\n    }\r\n\r\n    const buttonName = displayStatus === STATUS_FIRST_TIME ? applicationStrings.button_show[language] : applicationStrings.button_update[language]\r\n\r\n    return <div>\r\n        {renderFoodSelectorCard(1)}\r\n        {renderFoodSelectorCard(2)}\r\n        <div style={{paddingTop: \"20px\", paddingBottom: \"64px\"}}>\r\n            <Button className={\"form-button float-end\"}\r\n                    disabled={displayStatus === STATUS_NOT_UPDATED}\r\n                    onClick={onSubmit}>\r\n                {buttonName}\r\n            </Button>\r\n        </div>\r\n    </div>\r\n}","import {determineFoodRequirementRatio, determineProteinRequirementRatio} from \"./DietaryRequirementService\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport {MineralData, VitaminData} from \"../../types/nutrientdata/FoodItem\";\r\n\r\n/**\r\n * Determines the maximum vitamin or mineral or protein value of a food item (referring to the daily dietary requirements).\r\n */\r\nexport function getMaximumValue(dataSet: any, amount: number, requirementData: any, userData: UserData, proteins?: boolean) {\r\n    let maxValue = 0\r\n    for (let dataSetKey in dataSet) {\r\n        if (requirementData[dataSetKey]) {\r\n            const ratioValue = proteins === true\r\n                ? determineProteinRequirementRatio(requirementData[dataSetKey], dataSet[dataSetKey], amount, userData)\r\n                : determineFoodRequirementRatio(requirementData[dataSetKey], dataSet[dataSetKey], amount, userData)\r\n            if (ratioValue > maxValue) {\r\n                maxValue = ratioValue\r\n            }\r\n        }\r\n    }\r\n    return maxValue\r\n}\r\n\r\n\r\n/**\r\n * Given two data sets of values, this method determines the attributes that has values for both objects. It\r\n * can be used to remove all data attributes (columns) where at least one of the two data sets does not provide\r\n * a value.\r\n * @param dataSet1\r\n * @param dataSet2\r\n */\r\nexport function getOverlappingValues(dataSet1: any, dataSet2: any): string[] {\r\n    const overlapping: string[] = []\r\n    for (const dataSetKey in dataSet1) {\r\n        const value = dataSet1[dataSetKey]\r\n        if((value !== null && value !== undefined) && (dataSet2[dataSetKey] !== null && dataSet2[dataSetKey] !== undefined)) {\r\n            overlapping.push(dataSetKey)\r\n        }\r\n    }\r\n\r\n    return overlapping\r\n}\r\n\r\n\r\nexport function nullifyNonOverlappingValues(dataSet: any, overlappingAttributes: string[]): any {\r\n    const newDataset: any = {}\r\n    for (const dataSetKey in dataSet) {\r\n        if(!overlappingAttributes.includes(dataSetKey)) {\r\n            newDataset[dataSetKey] = null\r\n        } else {\r\n            newDataset[dataSetKey] = dataSet[dataSetKey]\r\n        }\r\n    }\r\n\r\n    return newDataset\r\n}","import {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport getName from \"../../service/LanguageService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\n\r\nexport interface VerticalLabelProps {\r\n    selectedFoodItem: SelectedFoodItem\r\n}\r\n\r\nexport function VerticalLabel(props: VerticalLabelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if(applicationContext === null) {\r\n        return null\r\n    }\r\n\r\n    const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === props.selectedFoodItem.foodItem.conditionId)\r\n    const conditionName = condition ? getName(condition, languageContext.language) : \"\"\r\n\r\n    return (\r\n        <>\r\n            <div className={\"vertical-label-small\"}>{conditionName}</div>\r\n            <div className={\"vertical-label\"}>{props.selectedFoodItem.resolvedName}</div>\r\n        </>\r\n    )\r\n}","import MineralVitaminChart from \"../fooddatapanel/charts/MineralVitaminChart\";\r\nimport {AMOUNT_PORTION, CHART_VITAMINS} from \"../../config/Constants\";\r\nimport {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {BarChartConfigurationForm} from \"../charthelper/BarChartConfigurationForm\";\r\nimport {roundToNextValue} from \"../../service/calculation/MathService\";\r\nimport {\r\n    getMaximumValue,\r\n    getOverlappingValues,\r\n    nullifyNonOverlappingValues\r\n} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport {DC_MineralVitaminChartProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_MINERALS_CONFIG,\r\n    GA_ACTION_DATAPANEL_VITAMINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../config/GA_Events\";\r\n\r\nexport function DcMineralVitaminChart(props: DC_MineralVitaminChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfigVitamins = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.vitaminChartConfig\r\n        : initialDirectCompareConfigData.vitaminChartConfig\r\n\r\n    const chartConfigMinerals = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.mineralChartConfig\r\n        : initialDirectCompareConfigData.mineralChartConfig\r\n\r\n    const [portionType_vitamins, setPortionType_vitamins] = useState<string>(chartConfigVitamins.portionType)\r\n    const [portionType_minerals, setPortionType_minerals] = useState<string>(chartConfigMinerals.portionType)\r\n    const [expand100_vitamins, setExpand100_vitamins] = useState<boolean>(chartConfigVitamins.expand100)\r\n    const [expand100_minerals, setExpand100_minerals] = useState<boolean>(chartConfigMinerals.expand100)\r\n    const [synchronizeVitamins, setSynchronizeVitamins] = useState<boolean>(chartConfigVitamins.synchronize)\r\n    const [synchronizeMinerals, setSynchronizeMinerals] = useState<boolean>(chartConfigMinerals.synchronize)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        updateChartConfig()\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [portionType_minerals,\r\n        portionType_vitamins,\r\n        synchronizeVitamins,\r\n        synchronizeMinerals,\r\n        expand100_vitamins,\r\n        expand100_minerals,\r\n        containerHeight,\r\n        windowSize]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            const newChartConfig = {\r\n                ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                vitaminChartConfig: {\r\n                    portionType: portionType_vitamins,\r\n                    expand100: expand100_vitamins,\r\n                    synchronize: synchronizeVitamins\r\n                },\r\n                mineralChartConfig: {\r\n                    portionType: portionType_minerals,\r\n                    expand100: expand100_minerals,\r\n                    synchronize: synchronizeMinerals\r\n                }\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        }\r\n    }\r\n\r\n    const requirementData = props.selectedSubChart === CHART_VITAMINS\r\n        ? applicationContext.foodDataCorpus.dietaryRequirements?.vitaminRequirementData\r\n        : applicationContext.foodDataCorpus.dietaryRequirements?.mineralRequirementData\r\n\r\n    if (!requirementData) {\r\n        return <div></div>\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value = event.target.value\r\n        const action = props.selectedSubChart === CHART_VITAMINS\r\n            ? GA_ACTION_DATAPANEL_VITAMINS_CONFIG\r\n            : GA_ACTION_DATAPANEL_MINERALS_CONFIG\r\n        callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, value, 2)\r\n        props.selectedSubChart === CHART_VITAMINS ? setPortionType_vitamins(event.target.value) : setPortionType_minerals(value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        const action = props.selectedSubChart === CHART_VITAMINS\r\n            ? GA_ACTION_DATAPANEL_VITAMINS_CONFIG\r\n            : GA_ACTION_DATAPANEL_MINERALS_CONFIG\r\n        const label = props.selectedSubChart === CHART_VITAMINS\r\n            ? \"expand100: \" + !expand100_vitamins\r\n            : \"expand100: \" + !expand100_minerals\r\n        callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, label, 2)\r\n        props.selectedSubChart === CHART_VITAMINS ? setExpand100_vitamins(!expand100_vitamins) : setExpand100_minerals(!expand100_minerals)\r\n    }\r\n\r\n    const handleSynchronize = () => {\r\n        const action = props.selectedSubChart === CHART_VITAMINS\r\n            ? GA_ACTION_DATAPANEL_VITAMINS_CONFIG\r\n            : GA_ACTION_DATAPANEL_MINERALS_CONFIG\r\n        const label = props.selectedSubChart === CHART_VITAMINS\r\n            ? \"synchronize: \" + !synchronizeVitamins\r\n            : \"synchronize: \" + !synchronizeMinerals\r\n        callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, label, 2)\r\n        props.selectedSubChart === CHART_VITAMINS ? setSynchronizeVitamins(!synchronizeVitamins) : setSynchronizeMinerals(!synchronizeMinerals)\r\n    }\r\n\r\n    const portionType = props.selectedSubChart === CHART_VITAMINS ? portionType_vitamins : portionType_minerals\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals\r\n        const synchronize = props.selectedSubChart === CHART_VITAMINS ? synchronizeVitamins : synchronizeMinerals\r\n\r\n        const barChartProps = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox,\r\n            handleSynchronize: handleSynchronize\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps}/>\r\n    }\r\n\r\n    const nutrientData1 = getNutrientData(props.selectedFoodItem1)\r\n    const nutrientData2 = getNutrientData(props.selectedFoodItem2)\r\n\r\n    let dataSet1 = props.selectedSubChart === CHART_VITAMINS ? nutrientData1.vitaminData : nutrientData1.mineralData\r\n    let dataSet2 = props.selectedSubChart === CHART_VITAMINS ? nutrientData2.vitaminData : nutrientData2.mineralData\r\n\r\n    const synchronize = props.selectedSubChart === CHART_VITAMINS ? synchronizeVitamins : synchronizeMinerals\r\n\r\n    if (synchronize) {\r\n        const overlappingAttributes = getOverlappingValues(dataSet1, dataSet2)\r\n        dataSet1 = nullifyNonOverlappingValues(dataSet1, overlappingAttributes)\r\n        dataSet2 = nullifyNonOverlappingValues(dataSet2, overlappingAttributes)\r\n    }\r\n\r\n    const portion1 = portionType === AMOUNT_PORTION ? props.selectedFoodItem1.portion.amount : 100\r\n    const portion2 = portionType === AMOUNT_PORTION ? props.selectedFoodItem2.portion.amount : 100\r\n\r\n    const maxValue1 = getMaximumValue(dataSet1, portion1, requirementData, applicationContext.userData)\r\n    const maxValue2 = getMaximumValue(dataSet2, portion2, requirementData, applicationContext.userData)\r\n    const maxValue = Math.max(maxValue1, maxValue2)\r\n\r\n    const maxY = synchronize\r\n        ? roundToNextValue(maxValue) : undefined\r\n\r\n    const preconfigVitamins = {\r\n        maxValue: maxY,\r\n        portionType: portionType_vitamins,\r\n        expand100: expand100_vitamins,\r\n        synchronize: synchronizeVitamins\r\n    }\r\n\r\n    const preconfigMinerals = {\r\n        maxValue: maxY,\r\n        portionType: portionType_minerals,\r\n        expand100: expand100_minerals,\r\n        synchronize: synchronizeMinerals\r\n    }\r\n\r\n    const preconfig = props.selectedSubChart === CHART_VITAMINS ? preconfigVitamins : preconfigMinerals\r\n\r\n    const preconfigFoodItem1 = {...preconfig, barChartColor: direct_compare_color1}\r\n    const preconfigFoodItem2 = {...preconfig, barChartColor: direct_compare_color2}\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}></VerticalLabel>\r\n                <MineralVitaminChart selectedSubChart={props.selectedSubChart}\r\n                                     selectedFoodItem={props.selectedFoodItem1}\r\n                                     precalculatedData={dataSet1}\r\n                                     directCompareUse={true} directCompareConfig={preconfigFoodItem1}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}></VerticalLabel>\r\n                <MineralVitaminChart selectedSubChart={props.selectedSubChart}\r\n                                     selectedFoodItem={props.selectedFoodItem2}\r\n                                     precalculatedData={dataSet2}\r\n                                     directCompareUse={true} directCompareConfig={preconfigFoodItem2}/>\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {PieChartConfigurationForm} from \"../charthelper/PieChartConfigurationForm\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport BaseDataChart from \"../fooddatapanel/charts/BaseDataChart\";\r\nimport {\r\n    CARBS_DATA_BASE,\r\n    LIPIDS_DATA_BASE,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_LIPIDS_DATA\r\n} from \"../../config/Constants\";\r\nimport LipidsDataChart from \"../fooddatapanel/charts/LipidsDataChart\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {\r\n    PieChartConfigurationProps,\r\n    PieChartDirectCompareConfig,\r\n    PieChartDirectCompareProp\r\n} from \"../../types/livedata/ChartPropsData\";\r\nimport CarbsDataChart from \"../fooddatapanel/charts/CarbsDataChart\";\r\nimport {\r\n    GeneralChartConfigDirectCompareWithSubCharts,\r\n    GeneralChartConfigWithDetails\r\n} from \"../../types/livedata/ChartConfigData\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_BASEDATA_CONFIG,\r\n    GA_ACTION_DATAPANEL_CARBS_CONFIG,\r\n    GA_ACTION_DATAPANEL_LIPIDS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../config/GA_Events\";\r\n\r\n/**\r\n * Re-usable direct compare chart component for pie-chart data pages (Lipids, Carbs, Base Data)\r\n */\r\nexport function DcPieChart(props: PieChartDirectCompareProp) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    let initialConfig\r\n    switch (props.dataPage) {\r\n        case TAB_BASE_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.baseChartConfig\r\n                ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.baseChartConfig\r\n                : initialDirectCompareConfigData.baseChartConfig\r\n            break\r\n        case TAB_LIPIDS_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n                ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n                : initialDirectCompareConfigData.lipidsChartConfig\r\n            break\r\n        case TAB_CARBS_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n                ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n                : initialDirectCompareConfigData.carbsChartConfig\r\n            break\r\n    }\r\n\r\n    const [chartType, setChartType] = useState<string>(initialConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(initialConfig.showLegend)\r\n    const [showDetails, setShowDetails] = useState<boolean>(initialConfig.showDetails)\r\n    const [subChart1, setSubChart1] = useState<string>(initialConfig.subChart1)\r\n    const [subChart2, setSubChart2] = useState<string>(initialConfig.subChart2)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        const currentConfig = applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n        if (!currentConfig) {\r\n            return\r\n        }\r\n\r\n        if (props.dataPage === TAB_LIPIDS_DATA || props.dataPage === TAB_CARBS_DATA) {\r\n            const configObject: GeneralChartConfigDirectCompareWithSubCharts = props.dataPage === TAB_LIPIDS_DATA\r\n                ? currentConfig.lipidsChartConfig\r\n                : currentConfig.carbsChartConfig\r\n\r\n            if (chartType !== configObject.chartType || showLegend !== configObject.showLegend\r\n                 || subChart1 !== configObject.subChart1 || subChart2 !== configObject.subChart2) {\r\n                updateChartConfig()\r\n            }\r\n        } else if (props.dataPage === TAB_BASE_DATA) {\r\n            const configObject: GeneralChartConfigWithDetails = currentConfig.baseChartConfig\r\n            if (chartType !== configObject.chartType || showLegend !== configObject.showLegend || showDetails !== configObject?.showDetails) {\r\n                updateChartConfig()\r\n            }\r\n        }\r\n\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [chartType, showDetails, showLegend, subChart1, subChart2, containerHeight, windowSize.height])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            let newChartConfig\r\n\r\n            if (props.dataPage === TAB_BASE_DATA) {\r\n                const pieChartConfig: GeneralChartConfigWithDetails = {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    showDetails: showDetails\r\n                }\r\n\r\n                newChartConfig = {\r\n                    ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                    baseChartConfig: pieChartConfig\r\n                }\r\n            } else {\r\n                if (props.dataPage === TAB_LIPIDS_DATA) {\r\n                    newChartConfig = {\r\n                        ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                        lipidsChartConfig: {\r\n                            ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig,\r\n                            chartType: chartType,\r\n                            showLegend: showLegend,\r\n                            subChart1: subChart1,\r\n                            subChart2: subChart2\r\n                        }\r\n                    }\r\n                } else if (props.dataPage === TAB_CARBS_DATA) {\r\n                    newChartConfig = {\r\n                        ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                        carbsChartConfig: {\r\n                            ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig,\r\n                            chartType: chartType,\r\n                            showLegend: showLegend,\r\n                            subChart1: subChart1,\r\n                            subChart2: subChart2\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (newChartConfig) {\r\n                applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const getEventActionName = (): string | null => {\r\n        if(props.dataPage === TAB_BASE_DATA) {\r\n            return GA_ACTION_DATAPANEL_BASEDATA_CONFIG\r\n        } else if(props.dataPage === TAB_LIPIDS_DATA) {\r\n            return GA_ACTION_DATAPANEL_LIPIDS_CONFIG\r\n        } else if(props.dataPage === TAB_CARBS_DATA) {\r\n            return GA_ACTION_DATAPANEL_CARBS_CONFIG\r\n        }\r\n        return null\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value = event.target.value\r\n        const action = getEventActionName()\r\n        if(action !== null) {\r\n            callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, value, 2)\r\n        }\r\n        setChartType(value)\r\n    }\r\n\r\n    const handleShowLegendCheckbox = () => {\r\n        const label = \"legend: \" + !showLegend\r\n        const action = getEventActionName()\r\n        if(action !== null) {\r\n            callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, label, 2)\r\n        }\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const handleShowDetailsCheckbox = () => {\r\n        const label = \"details: \" + !showLegend\r\n        const action = getEventActionName()\r\n        if(action !== null) {\r\n            callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, label, 2)\r\n        }\r\n        setShowDetails(!showDetails)\r\n    }\r\n\r\n    const handleSubchart1Change = (event: any): void => {\r\n        setSubChart1(event.target.value)\r\n    }\r\n\r\n    const handleSubchart2Change = (event: any): void => {\r\n        setSubChart2(event.target.value)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const chartProps = getConfigurationProps()\r\n        return <PieChartConfigurationForm key={`Config DirectCompare ${props.dataPage}`} {...chartProps}/>\r\n    }\r\n\r\n    const getConfigurationProps = (): PieChartConfigurationProps => {\r\n        let chartProps: PieChartConfigurationProps = {\r\n            chartType: chartType,\r\n            showLegend: showLegend,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleLegendCheckboxClick: handleShowLegendCheckbox,\r\n        }\r\n\r\n        if (props.dataPage === TAB_BASE_DATA) {\r\n            chartProps = {\r\n                ...chartProps,\r\n                detailsCheckboxAvailable: true,\r\n                showDetails: showDetails,\r\n                handleDetailsCheckboxClick: handleShowDetailsCheckbox\r\n            }\r\n        }\r\n\r\n        return chartProps\r\n    }\r\n\r\n\r\n    const getChartComponent = (selectedFoodItem: SelectedFoodItem, index: number) => {\r\n        let preconfig: PieChartDirectCompareConfig = {\r\n            chartType: chartType,\r\n            showLegend: showLegend,\r\n            showDetails: showDetails,\r\n        }\r\n\r\n        if (props.dataPage === TAB_BASE_DATA) {\r\n            return <BaseDataChart key={`${TAB_BASE_DATA} ${index}`} selectedFoodItem={selectedFoodItem}\r\n                                  directCompareUse={true}\r\n                                  directCompareConfig={preconfig}/>\r\n        }\r\n\r\n        if (props.dataPage === TAB_LIPIDS_DATA) {\r\n            const selectedSubChart = applicationContext\r\n                ? index === 1\r\n                    ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart1\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart1\r\n                        : LIPIDS_DATA_BASE\r\n                    : applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart2\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart2\r\n                        : LIPIDS_DATA_BASE\r\n                : LIPIDS_DATA_BASE\r\n\r\n            preconfig = {\r\n                ...preconfig,\r\n                subChart: selectedSubChart,\r\n                handleSubchartChange: index === 1 ? handleSubchart1Change : handleSubchart2Change,\r\n                chartIndex: index\r\n            }\r\n\r\n            return <LipidsDataChart key={`${TAB_LIPIDS_DATA} ${index}`} selectedFoodItem={selectedFoodItem}\r\n                                    directCompareUse={true}\r\n                                    directCompareConfig={preconfig}/>\r\n        }\r\n\r\n        if (props.dataPage === TAB_CARBS_DATA) {\r\n            const selectedSubChart = applicationContext\r\n                ? index === 1\r\n                    ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart1\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart1\r\n                        : CARBS_DATA_BASE\r\n                    : applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart2\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart2\r\n                        : CARBS_DATA_BASE\r\n                : CARBS_DATA_BASE\r\n\r\n            preconfig = {\r\n                ...preconfig,\r\n                subChart: selectedSubChart,\r\n                chartIndex: index,\r\n                handleSubchartChange: index === 1 ? handleSubchart1Change : handleSubchart2Change\r\n            }\r\n\r\n            return <CarbsDataChart key={`${TAB_CARBS_DATA} ${index}`} selectedFoodItem={selectedFoodItem}\r\n                                   directCompareUse={true}\r\n                                   directCompareConfig={preconfig}/>\r\n        }\r\n    }\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}\r\n                 key={\"directcompare container\" + containerHeight}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}></VerticalLabel>\r\n                {getChartComponent(props.selectedFoodItem1, 1)}\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}\r\n                 key={\"directcompare container\" + containerHeight}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}></VerticalLabel>\r\n                {getChartComponent(props.selectedFoodItem2, 2)}\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../charthelper/BarChartConfigurationForm\";\r\nimport {roundToNextValue} from \"../../service/calculation/MathService\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport ProteinDataChart from \"../fooddatapanel/charts/ProteinDataChart\";\r\nimport {BarChartDirectCompareConfig, DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {\r\n    getMaximumValue,\r\n    getOverlappingValues,\r\n    nullifyNonOverlappingValues\r\n} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_PROTEINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../config/GA_Events\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\n\r\nexport function DcProteinDataChart(props: DirectCompareDataPanelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.proteinChartConfig\r\n        : initialDirectCompareConfigData.proteinChartConfig\r\n\r\n    const [portionType, setPortionType] = useState<string>(chartConfig.portionType)\r\n    const [expand100, setExpand100] = useState<boolean>(chartConfig.expand100)\r\n    const [synchronize, setSynchronize] = useState<boolean>(chartConfig.synchronize)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        updateChartConfig()\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [portionType, expand100, synchronize, containerHeight, windowSize.height])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            const newChartConfig = {\r\n                ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                proteinChartConfig: {\r\n                    portionType: portionType,\r\n                    expand100: expand100,\r\n                    synchronize: synchronize\r\n                }\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        }\r\n    }\r\n\r\n    const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.proteinRequirementData\r\n    if (!requirementData) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value = event.target.value\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_PROTEINS_CONFIG, GA_CATEGORY_DATAPANEL, value, 2)\r\n        setPortionType(value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        const label = \"expand100: \" + !expand100\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_PROTEINS_CONFIG, GA_CATEGORY_DATAPANEL, label, 2)\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleSynchronize = () => {\r\n        const label = \"synchronize: \" + !synchronize\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_PROTEINS_CONFIG, GA_CATEGORY_DATAPANEL, label, 2)\r\n        setSynchronize(!synchronize)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const barChartProps = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox,\r\n            handleSynchronize: handleSynchronize\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps}/>\r\n    }\r\n\r\n    let dataSet1 = getNutrientData(props.selectedFoodItem1).proteinData\r\n    let dataSet2 = getNutrientData(props.selectedFoodItem2).proteinData\r\n\r\n    if (synchronize) {\r\n        const overlappingAttributes = getOverlappingValues(dataSet1, dataSet2)\r\n        dataSet1 = nullifyNonOverlappingValues(dataSet1, overlappingAttributes)\r\n        dataSet2 = nullifyNonOverlappingValues(dataSet2, overlappingAttributes)\r\n    }\r\n\r\n    const maxValue1 = getMaximumValue(dataSet1, props.selectedFoodItem1.portion.amount, requirementData, applicationContext.userData, true)\r\n    const maxValue2 = getMaximumValue(dataSet2, props.selectedFoodItem2.portion.amount, requirementData, applicationContext.userData, true)\r\n    const maxValue = Math.max(maxValue1, maxValue2)\r\n    const maxY = synchronize ? roundToNextValue(maxValue) : undefined\r\n\r\n    const preconfig: BarChartDirectCompareConfig = {\r\n        maxValue: maxY,\r\n        portionType: portionType,\r\n        expand100: expand100,\r\n        synchronize: synchronize,\r\n        barChartColor: ''\r\n    }\r\n\r\n    const preconfigFoodItem1 = {...preconfig, barChartColor: direct_compare_color1}\r\n    const preconfigFoodItem2 = {...preconfig, barChartColor: direct_compare_color2}\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}></VerticalLabel>\r\n                <ProteinDataChart selectedFoodItem={props.selectedFoodItem1}\r\n                                  precalculatedData={dataSet1}\r\n                                  directCompareUse={true} directCompareConfig={preconfigFoodItem1}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}></VerticalLabel>\r\n                <ProteinDataChart selectedFoodItem={props.selectedFoodItem2}\r\n                                  precalculatedData={dataSet2}\r\n                                  directCompareUse={true} directCompareConfig={preconfigFoodItem2}/>\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {Card} from \"react-bootstrap\";\r\nimport EnergyDataChart from \"../fooddatapanel/charts/EnergyDataChart\";\r\nimport {DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\n\r\nexport function DcEnergyChart(props: DirectCompareDataPanelProps) {\r\n    const windowSize = useWindowDimension()\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [containerHeight, windowSize])\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}></VerticalLabel>\r\n                <EnergyDataChart selectedFoodItem={props.selectedFoodItem1} directCompareUse={true}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}></VerticalLabel>\r\n                <EnergyDataChart selectedFoodItem={props.selectedFoodItem2} directCompareUse={true}/>\r\n            </div>\r\n        </Card>\r\n    </div>\r\n\r\n}","import {ChartMenuPanel} from \"../fooddatapanel/ChartMenuPanel\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {useContext} from \"react\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {DcMineralVitaminChart} from \"./DcMineralVitaminChart\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport {DcPieChart} from \"./DcPieChart\";\r\nimport {DcProteinDataChart} from \"./DcProteinDataChart\";\r\nimport {DcEnergyChart} from \"./DcEnergyChart\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {InfoData} from \"../fooddatapanel/charts/InfoData\";\r\n\r\nexport function DirectCompareDataPanel(props: DirectCompareDataPanelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const setDataPage = (datapage: string) => {\r\n        applicationContext.setDirectCompareData.setSelectedDirectCompareDataPage(datapage)\r\n    }\r\n\r\n    const foodNames = applicationContext.foodDataCorpus.foodNames\r\n\r\n    const nameId1 = props.selectedFoodItem1.foodItem.nameId ? props.selectedFoodItem1.foodItem.nameId : null\r\n    const nameId2 = props.selectedFoodItem2.foodItem.nameId ? props.selectedFoodItem2.foodItem.nameId : null\r\n\r\n    const name1 = nameId1 ? getNameFromFoodNameList(foodNames, nameId1, languageContext.language) : \"\"\r\n    const name2 = nameId2 ? getNameFromFoodNameList(foodNames, nameId2, languageContext.language) : \"\"\r\n\r\n    const selectedFoodItem1: SelectedFoodItem = {...props.selectedFoodItem1, resolvedName: name1}\r\n    const selectedFoodItem2: SelectedFoodItem = {...props.selectedFoodItem2, resolvedName: name2}\r\n\r\n    const selectedDataPage = applicationContext.applicationData.directCompareDataPanel.selectedDataPage\r\n\r\n    const renderCharts = () => {\r\n        switch (selectedDataPage) {\r\n            case TAB_BASE_DATA:\r\n                return <DcPieChart key={TAB_BASE_DATA}\r\n                                   selectedFoodItem1={selectedFoodItem1}\r\n                                   selectedFoodItem2={selectedFoodItem2}\r\n                                   dataPage={TAB_BASE_DATA}\r\n                />\r\n            case TAB_ENERGY_DATA:\r\n                return <DcEnergyChart selectedFoodItem1={selectedFoodItem1}\r\n                                      selectedFoodItem2={selectedFoodItem2}\r\n                />\r\n\r\n            case TAB_VITAMIN_DATA:\r\n                return <DcMineralVitaminChart key={TAB_VITAMIN_DATA}\r\n                                              selectedFoodItem1={selectedFoodItem1}\r\n                                              selectedFoodItem2={selectedFoodItem2}\r\n                                              selectedSubChart={CHART_VITAMINS}\r\n                />\r\n            case TAB_MINERAL_DATA:\r\n                return <DcMineralVitaminChart key={TAB_MINERAL_DATA}\r\n                                              selectedFoodItem1={selectedFoodItem1}\r\n                                              selectedFoodItem2={selectedFoodItem2}\r\n                                              selectedSubChart={CHART_MINERALS}\r\n                />\r\n            case TAB_LIPIDS_DATA:\r\n                return <DcPieChart key={TAB_LIPIDS_DATA}\r\n                                   selectedFoodItem1={selectedFoodItem1}\r\n                                   selectedFoodItem2={selectedFoodItem2}\r\n                                   dataPage={TAB_LIPIDS_DATA}\r\n                />\r\n            case TAB_CARBS_DATA:\r\n                return <DcPieChart key={TAB_CARBS_DATA}\r\n                                   selectedFoodItem1={selectedFoodItem1}\r\n                                   selectedFoodItem2={selectedFoodItem2}\r\n                                   dataPage={TAB_CARBS_DATA}\r\n                />\r\n            case TAB_PROTEINS_DATA:\r\n                return <DcProteinDataChart selectedFoodItem1={selectedFoodItem1}\r\n                                           selectedFoodItem2={selectedFoodItem2}\r\n                />\r\n            case TAB_INFO:\r\n                return <div>\r\n                    <Card>\r\n                        <InfoData selectedFoodItem={props.selectedFoodItem1} directCompare={true}/>\r\n                    </Card>\r\n                    <Card>\r\n                        <InfoData selectedFoodItem={props.selectedFoodItem2} directCompare={true}/>\r\n                    </Card>\r\n                </div>\r\n\r\n        }\r\n\r\n        return <div/>\r\n    }\r\n\r\n    return <div>\r\n        <Card.Header>\r\n            <ChartMenuPanel dataPage={selectedDataPage} verticalArrangement={false} setDataPage={setDataPage}/>\r\n        </Card.Header>\r\n        {renderCharts()}\r\n    </div>\r\n\r\n}","import { DirectCompareChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\"\r\nimport { DirectCompareUriData, FoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { getUpdatedDirectCompareChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\nimport {\r\n\tconvertUserDataObjectToString,\r\n\tconvertUserDataStringToObject,\r\n\tgetFoodItemUriData,\r\n\tmakeFoodItemDefaultUri,\r\n\tprepareUriForParsing\r\n} from \"./FoodDataPanelUriService\"\r\n\r\nexport function makeDirectCompareDataUri(selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem, \r\n\t\tuserData: UserData, selectedDataPage: string, chartConfigData: DirectCompareChartConfigData): string {\r\n\tconst foodItemUriData1 = makeFoodItemUriData(selectedFoodItem1)\r\n\tconst foodItemUriData2 = makeFoodItemUriData(selectedFoodItem2)\r\n\t\r\n\tconst foodItem1DataUri = makeFoodItemDefaultUri(foodItemUriData1)\r\n\tconst foodItem2DataUri = makeFoodItemDefaultUri(foodItemUriData2)\r\n\t\r\n\tconst userDataUri = convertUserDataObjectToString(userData)\r\n\tconst chartConfigUri = makeChartConfigUriString(chartConfigData, selectedDataPage)\r\n\t\r\n\treturn `${foodItem1DataUri};${foodItem2DataUri};${selectedDataPage};${userDataUri};${chartConfigUri}`\r\n}\r\n\r\n\r\nfunction makeFoodItemUriData(selectedFoodItem: SelectedFoodItem): FoodItemUriData {\r\n\treturn {\r\n\t\tfoodItemId: selectedFoodItem.foodItem.id,\r\n\t\tportionData: selectedFoodItem.portion,\r\n\t\tsource: selectedFoodItem.selectedSource,\r\n\t\tcombineData: selectedFoodItem.combineData,\r\n\t\tsupplementData: selectedFoodItem.supplementData\r\n\t}\r\n}\r\n\r\n\r\nexport function parseDirectComparetUri(uri: string, chartConfigData: DirectCompareChartConfigData): DirectCompareUriData | null {\r\n\tconst fragments = prepareUriForParsing(uri).split(\";\")\r\n\tif(fragments.length !== 11) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst selectedDataPage = fragments[8]\r\n\tconst userData = convertUserDataStringToObject(fragments[9])\r\n\tconst chartConfigString = fragments[10]\r\n\t\r\n\tconst foodItemUriData1 = getFoodItemUriData(fragments)\r\n\tconst remainingFragments = fragments.slice(4)\r\n\tconst foodItemUriData2 = getFoodItemUriData(remainingFragments)\r\n\t\r\n\tif(!userData || !foodItemUriData1 || !foodItemUriData2) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst newChartConfigData = getUpdatedDirectCompareChartConfig(chartConfigData, chartConfigString, selectedDataPage)\r\n\t\r\n\treturn {\r\n\t\tselectedFoodItem1: foodItemUriData1,\r\n\t\tselectedFoodItem2: foodItemUriData2,\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n\t\r\n}","import {DirectCompareSelector} from \"../foodselector/DirectCompareSelector\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {DirectCompareDataPanel} from \"./DirectCompareDataPanel\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {PATH_DIRECT_COMPARE, QUERYKEY_DATAPANEL_ITEM} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {makeDirectCompareDataUri, parseDirectComparetUri} from \"../../service/uri/DirectCompareUriService\";\r\nimport {checkUserDataValidity, USERDATA_OK} from \"../../service/UserDataService\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {\r\n\tGA_ACTION_SELECTION_DIRECT_COMPARE, GA_CATEGORY_DIRECT_COMPARE,\r\n} from \"../../config/GA_Events\";\r\n\r\nexport default function DirectCompareContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const initialFoodItem1 = applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        : null\r\n\r\n    const initialFoodItem2 = applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        : null\r\n\r\n    const [selectedFoodItem1, setSelectedFoodItem1] = useState<SelectedFoodItem | null>(initialFoodItem1)\r\n    const [selectedFoodItem2, setSelectedFoodItem2] = useState<SelectedFoodItem | null>(initialFoodItem2)\r\n\r\n\tuseEffect(() => {\r\n        buildDataObjectsFromURI()\r\n    }, [applicationContext?.applicationData.directCompareDataPanel])\r\n\r\n\t\r\n    if (applicationContext === null || !applicationContext.ready) {\r\n        return <div/>\r\n    }\r\n\r\n\tconst buildDataObjectsFromURI = () => {\r\n\t\tif(!applicationContext) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tif(!selectedFoodItem1 || !selectedFoodItem2) {\t\t\t\r\n\t\t\tcreateDataFromUriQuery()\t\t\r\n\t\t} else {   // Set new URI Query\t\t\r\n\t\t\tupdateUriQuery()\r\n\t\t}\r\n    }\r\n\r\n\tconst chartConfigData = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n\tconst updateUriQuery = () => {\r\n\t\tconst userData = applicationContext.userData\r\n\t\tconst selectedDataPage = applicationContext.applicationData.directCompareDataPanel.selectedDataPage\r\n\r\n\t\tif(selectedFoodItem1 && selectedFoodItem2) {\r\n\t\t\tconst query = makeDirectCompareDataUri(selectedFoodItem1, selectedFoodItem2, userData, selectedDataPage, \r\n\t\t\t\tchartConfigData)\r\n\t\t\t\t\r\n\t\t\thistory.push({\r\n\t\t\t\tpathName: PATH_DIRECT_COMPARE,\r\n\t\t\t\tsearch: `${QUERYKEY_DATAPANEL_ITEM}=${query}`\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst createDataFromUriQuery = () => {\r\n\t\t\tconst queryString = window.location.search.substring(1)\r\n\t\t\tconst equalOperator = queryString.indexOf(\"=\")\r\n            const key = queryString.substring(0, equalOperator)\r\n            const value = queryString.substring(equalOperator+1)\r\n\r\n\t\t\t// Set data from a simple food item (create data from query parameters)\r\n\t\t\tif(key === QUERYKEY_DATAPANEL_ITEM && value.length > 1) {\r\n\t\t\t\tconst uriDataObject = parseDirectComparetUri(value, chartConfigData)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tif(uriDataObject) {\r\n\t\t\t\t\tconst foodItem1 = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem1.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tconst foodItem2 = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem2.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif(!foodItem1 || !foodItem2) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tapplicationContext.setUserData(uriDataObject.userData)\t\r\n\t\t\t\t\tapplicationContext.setDirectCompareData.updateDirectCompareChartConfig(uriDataObject.chartConfigData)\r\n\t\t\t\t\tapplicationContext.setDirectCompareData.setSelectedDirectCompareDataPage(uriDataObject.selectedDataPage)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst foodClass1 = applicationContext.foodDataCorpus.foodClasses.find(\r\n\t\t\t\t\t\tfoodClass => foodClass.id === foodItem1.foodClass)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tconst foodClass2 = applicationContext.foodDataCorpus.foodClasses.find(\r\n\t\t\t\t\t\tfoodClass => foodClass.id === foodItem2.foodClass)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem1: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1000,\r\n\t\t\t\t\t\tfoodItem: foodItem1,\r\n\t\t\t\t\t\tfoodClass: foodClass1,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem1.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem1.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem1.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem1.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem2: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1001,\r\n\t\t\t\t\t\tfoodItem: foodItem2,\r\n\t\t\t\t\t\tfoodClass: foodClass2,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem2.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem2.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem2.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem2.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tupdateSelectedFoodItems(selectedFoodItem1, selectedFoodItem2)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n    const updateSelectedFoodItems = (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => {\r\n    \tconst foodClassNameKey1 = selectedFoodItem1.foodClass?.nameKey\r\n\t\tconst nameEntity1 = applicationContext.foodDataCorpus.foodNames.find(entry => entry.id === foodClassNameKey1)\r\n\t\tconst foodClassName1 = nameEntity1 ? nameEntity1.englishName : ''\r\n\t\tconst foodClassNameKey2 = selectedFoodItem2.foodClass?.nameKey\r\n\t\tconst nameEntity2 = applicationContext.foodDataCorpus.foodNames.find(entry => entry.id === foodClassNameKey2)\r\n\t\tconst foodClassName2 = nameEntity2 ? nameEntity2.englishName : ''\r\n\t\tconst label = `${foodClassName1}; ${foodClassName2}`\r\n\t\tconst debugMode = applicationContext.debug\r\n\t\tcallEvent(debugMode, GA_ACTION_SELECTION_DIRECT_COMPARE, GA_CATEGORY_DIRECT_COMPARE, label, selectedFoodItem1.foodItem.id)\r\n\r\n\t\tsetSelectedFoodItem1(selectedFoodItem1)\r\n        setSelectedFoodItem2(selectedFoodItem2)\r\n        applicationContext.setDirectCompareData.setSelectedDirectCompareItems(selectedFoodItem1, selectedFoodItem2)\r\n    }\r\n\r\n    return (\r\n        <div className={\"container-fluid\"}>\r\n            <div className={\"row\"}>\r\n                <div className={\"col-4\"}>\r\n                    <DirectCompareSelector updateSelectedFoodItems={updateSelectedFoodItems}/>\r\n                </div>\r\n                <div className={\"col-8\"} style={{padding: \"32px\"}}>\r\n                    {selectedFoodItem1 !== null && selectedFoodItem2 !== null ?\r\n                    <DirectCompareDataPanel selectedFoodItem1={selectedFoodItem1}\r\n                                            selectedFoodItem2={selectedFoodItem2}/>\r\n                        : <div className={\"form-text\"}><i>{applicationStrings.direct_compare_text[languageContext.language]}</i></div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {SEX_FEMALE, SEX_MALE} from \"../config/Constants\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    initialUserDataAge,\r\n    initialUserDataBreastfeeding,\r\n    initialUserDataLeisureSports,\r\n    initialUserDataPregnant,\r\n    initialUserDataSex,\r\n    initialUserDataSize,\r\n    initialUserDataWeight\r\n} from \"../config/ApplicationSetting\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {NotificationManager} from 'react-notifications'\r\nimport 'react-notifications/lib/notifications.css';\r\nimport {Form, FormControl, FormGroup} from \"react-bootstrap\";\r\nimport Select from 'react-select';\r\nimport {getPalCategories, getPalCategory} from \"../service/calculation/EnergyService\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\nimport {isMobileDevice, isSmallScreen, useWindowDimension} from \"../service/WindowDimension\";\r\nimport {\r\n    checkUserDataValidity,\r\n    USERDATA_ERROR_AGE,\r\n    USERDATA_ERROR_SIZE,\r\n    USERDATA_ERROR_WEIGHT\r\n} from \"../service/UserDataService\";\r\nimport {customSelectStyles} from \"../config/UI_Config\";\r\nimport {FaLightbulb} from \"react-icons/fa\";\r\nimport {callEvent} from \"../service/GA_EventService\";\r\nimport {GA_ACTION_USER_SETTINGS, GA_CATEGORY_USER_SETTINGS} from \"../config/GA_Events\";\r\n\r\nexport function UserSettings() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const [age, setAge] = useState<number>(initialUserDataAge)\r\n    const [size, setSize] = useState<number>(initialUserDataSize)\r\n    const [weight, setWeight] = useState<number>(initialUserDataWeight)\r\n    const [sex, setSex] = useState<string>(initialUserDataSex)\r\n    const [pregnant, setPregnant] = useState<boolean>(initialUserDataPregnant)\r\n    const [breastFeeding, setBreastFeeding] = useState<boolean>(initialUserDataBreastfeeding)\r\n    const [palValue, setPalValue] = useState<ReactSelectOption | null>(null)\r\n    const [leisureSport, setLeisureSport] = useState<boolean>(initialUserDataLeisureSports)\r\n\r\n    const windowSize = useWindowDimension()\r\n\r\n    useEffect(() => {\r\n        if (applicationContext) {\r\n            setAge(applicationContext.userData.age)\r\n            setSize(applicationContext.userData.size)\r\n            setWeight(applicationContext.userData.weight)\r\n            setSex(applicationContext.userData.sex)\r\n            setPregnant(applicationContext.userData.pregnant)\r\n            setBreastFeeding(applicationContext.userData.breastFeeding)\r\n            setLeisureSport(applicationContext.userData.leisureSports)\r\n        }\r\n    }, [applicationContext])\r\n\r\n    const changeAge = (event: any) => {\r\n        setAge(event.target.value)\r\n    }\r\n\r\n    const changeSize = (event: any) => {\r\n        setSize(event.target.value)\r\n    }\r\n\r\n    const changeWeight = (event: any) => {\r\n        setWeight(event.target.value)\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value;\r\n        const sex = value === SEX_MALE ? SEX_MALE : SEX_FEMALE;\r\n        if (sex === SEX_MALE) {\r\n            setPregnant(false)\r\n            setBreastFeeding(false)\r\n        }\r\n        setSex(sex)\r\n    }\r\n\r\n    const changePregnant = (event: any) => {\r\n        setPregnant(!pregnant)\r\n    }\r\n\r\n    const changeBreastFeeding = (event: any) => {\r\n        setBreastFeeding(!breastFeeding)\r\n    }\r\n\r\n    const changeAdditionalPalPorts = (event: any) => {\r\n        setLeisureSport(!leisureSport)\r\n    }\r\n\r\n    const changePalValue = (value: ReactSelectOption) => {\r\n        setPalValue(value)\r\n    }\r\n\r\n    const submitUserData = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const userData: UserData = {\r\n            age: age,\r\n            size: size,\r\n            weight: weight,\r\n            sex: sex,\r\n            pregnant: pregnant,\r\n            breastFeeding: breastFeeding,\r\n            palValue: palValue ? palValue.value : applicationContext.userData.palValue,\r\n            leisureSports: leisureSport,\r\n            initialValues: false\r\n        }\r\n\r\n        const inputOk = checkInputValidity(userData)\r\n\r\n        if (inputOk) {\r\n            callEvent(applicationContext.debug, GA_ACTION_USER_SETTINGS, GA_CATEGORY_USER_SETTINGS)\r\n            applicationContext.setUserData(userData)\r\n            NotificationManager.success(applicationStrings.message_userdata_success[lang])\r\n        }\r\n    }\r\n\r\n\r\n    const checkInputValidity = (userData: UserData) => {\r\n        const validationResult = checkUserDataValidity(userData)\r\n\r\n        if (validationResult === USERDATA_ERROR_AGE) {\r\n            showMessage(applicationStrings.message_userdata_error_age[lang]);\r\n            return false;\r\n        } else if (validationResult === USERDATA_ERROR_SIZE) {\r\n            showMessage(applicationStrings.message_userdata_error_size[lang]);\r\n            return false;\r\n        } else if (validationResult === USERDATA_ERROR_WEIGHT) {\r\n            showMessage(applicationStrings.message_userdata_error_weight[lang]);\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    const showMessage = (message: string) => {\r\n        NotificationManager.error(message)\r\n    }\r\n\r\n    const inputClass = isSmallScreen(windowSize) ? \"form-control form-control-sm input-sm\" : \"form-control input\"\r\n\r\n    const renderTextField = (label, value, callback) => {\r\n        const classRow = isMobileDevice() ? \"form-row-m\" : \"form-row\"\r\n\r\n        return (\r\n            <div className={classRow}>\r\n                <Form.Label className=\"form-label\">{label}:</Form.Label>\r\n                <FormControl\r\n                    className={inputClass}\r\n                    type=\"text\"\r\n                    value={value}\r\n                    onChange={callback}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderSexRadioButtons = () => {\r\n        const classRow = isMobileDevice() ? \"form-row-indent-m\" : \"form-row-indent\"\r\n\r\n        return (\r\n            <div className={classRow}>\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                label={applicationStrings.label_userSettings_sex_male[lang]}\r\n                                value={SEX_MALE}\r\n                                checked={(sex === SEX_MALE)}\r\n                                onChange={handleRadioButtonClick}\r\n                    />\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                label={applicationStrings.label_userSettings_sex_female[lang]}\r\n                                value={SEX_FEMALE}\r\n                                checked={(sex !== SEX_MALE)}\r\n                                onChange={handleRadioButtonClick}\r\n                    />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderFemaleCheckboxes = () => {\r\n        return (\r\n            <div className=\"form\" style={{marginLeft: \"100px\"}}>\r\n                <div>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                checked={pregnant === true}\r\n                                disabled={sex === SEX_MALE}\r\n                                label={applicationStrings.label_userSettings_pregnant[lang]}\r\n                                onClick={changePregnant}>\r\n                    </Form.Check>\r\n                </div>\r\n                <div>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                disabled={sex === SEX_MALE}\r\n                                label={applicationStrings.label_userSettings_breastfeeding[lang]}\r\n                                onClick={changeBreastFeeding}>\r\n                    </Form.Check>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const renderPalList = (userData: UserData) => {\r\n        const palCategories = getPalCategories(lang);\r\n        if (!palCategories) {\r\n            return <div/>\r\n        }\r\n\r\n        if (!palValue) {   // Initialize pal value first time\r\n            let userDataPalValue = palCategories.find(palObject => palObject.value === userData.palValue)\r\n            if (!userDataPalValue) {\r\n                userDataPalValue = palCategories[0]\r\n            }\r\n            setPalValue(userDataPalValue)\r\n        }\r\n\r\n        if (!palValue) {\r\n            return <div/>\r\n        }\r\n\r\n        const descriptionCode = `palcat_desc_${getPalCategory(palValue.value)}`\r\n        const description = applicationStrings[descriptionCode][lang];\r\n\r\n        return (\r\n            <div className=\"form-row\">\r\n                <div className={\"usersettings-pal\"}>\r\n                    <label className=\"form-label\">{applicationStrings.label_userSettings_palValue[lang]}:</label>\r\n                    <Select className=\"form-control-sm\"\r\n                            options={palCategories}\r\n                            value={palValue}\r\n                            styles={customSelectStyles}\r\n                            onChange={(value) => changePalValue(value)}\r\n                    />\r\n                </div>\r\n                <p className=\"usersettings-pal-text\">\r\n                    {description}\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderActivityCheckboxes = () => {\r\n        return (\r\n            <div className=\"form-row-indent\" style={{marginTop: \"-15px\"}}>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_userSettings_leisureSports_tooltip[lang]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_userSettings_leisureSports[lang]}\r\n                                checked={leisureSport}\r\n                                onChange={changeAdditionalPalPorts}>\r\n                    </Form.Check>\r\n                </label>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderSubmitButton = () => {\r\n        return (\r\n            <div className=\"text-center\">\r\n                <button type=\"button\"\r\n                        className=\"btn btn-primary\"\r\n                        style={{marginBottom: \"5vh\"}}\r\n                        onClick={() => submitUserData()}>\r\n                    {applicationStrings.button_submit[lang]}\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const value_age = (age != null) ? age : initialUserDataAge\r\n    const value_size = (size != null) ? size : initialUserDataSize\r\n    const value_weight = (weight != null) ? weight : initialUserDataWeight\r\n\r\n    return (\r\n        <div>\r\n            <div className={\"m-3\"}>\r\n               <FaLightbulb/> {applicationStrings.label_userSettings_intro[lang]}\r\n            </div>\r\n            <div className=\"container\" style={{paddingTop: \"24px\"}}>\r\n                <div className=\"row userDataSettings\">\r\n                    <div className=\"col-12\">\r\n                        <form>\r\n                            <FormGroup controlId=\"formBasicText\">\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-6\">\r\n                                        {renderTextField(applicationStrings.label_userSettings_age[lang], value_age, changeAge)}\r\n                                        {renderTextField(applicationStrings.label_userSettings_size[lang], value_size, changeSize)}\r\n                                        {renderTextField(applicationStrings.label_userSettings_weight[lang], value_weight, changeWeight)}\r\n                                    </div>\r\n                                    <div className=\"col-6\">\r\n                                        <Form.Label className=\"form-label\" style={{paddingLeft: \"20px\"}}>\r\n                                            {applicationStrings.label_userSettings_sex[lang]}\r\n                                        </Form.Label>\r\n                                        {renderSexRadioButtons()}\r\n                                        {renderFemaleCheckboxes()}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    {renderPalList(applicationContext.userData)}\r\n                                    {renderActivityCheckboxes()}\r\n                                </div>\r\n                            </FormGroup>\r\n                            {renderSubmitButton()}\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","export const MAIL_INVALID_NAME = \"mail invalid name\"\r\nexport const MAIL_NO_CONTENT = \"no content\"\r\nexport const MAIL_CONTENT_TO_LONG = \"content too long\"\r\nexport const MAIL_INVALID_ADDRESS = \"invalid address\"","import {MailData} from \"../types/livedata/MailData\";\r\nimport {\r\n    MAIL_INVALID_ADDRESS,\r\n    MAIL_CONTENT_TO_LONG,\r\n    MAIL_INVALID_NAME,\r\n    MAIL_NO_CONTENT\r\n} from \"../config/ErrorMessageCodes\";\r\nimport {maxMessageCharacters} from \"../config/ApplicationSetting\";\r\n\r\n\r\nconst mailRegex = '(?:[a-z0-9!#$%&\\'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&\\'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\\\])'\r\n\r\nexport function checkMailValidity(mail: MailData): string[] {\r\n    const errors: string[] = []\r\n\r\n    if (!checkName(mail.name)) {\r\n        errors.push(MAIL_INVALID_NAME)\r\n    }\r\n\r\n    if (!checkMailAddress(mail.address)) {\r\n        errors.push(MAIL_INVALID_ADDRESS)\r\n    }\r\n\r\n    if (!checkContent(mail.message)) {\r\n        errors.push(MAIL_NO_CONTENT)\r\n    }\r\n\r\n    if (!checkLength(mail.message)) {\r\n        errors.push(MAIL_CONTENT_TO_LONG)\r\n    }\r\n\r\n    return errors\r\n}\r\n\r\nfunction checkName(name: string): boolean {\r\n    return name.length >= 2 && name.length <= 50\r\n}\r\n\r\nfunction checkContent(content: string): boolean {\r\n    return content.length >= 20\r\n}\r\n\r\nfunction checkLength(content: string): boolean {\r\n    return content.length <= maxMessageCharacters\r\n}\r\n\r\nfunction checkMailAddress(mailAddress: string): boolean {\r\n    return mailAddress.match(mailRegex) !== null\r\n}\r\n","import React, {useContext, useState} from \"react\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {maxMessageCharacters} from \"../../config/ApplicationSetting\";\r\nimport {MailData} from \"../../types/livedata/MailData\";\r\nimport {checkMailValidity} from \"../../service/MailService\";\r\nimport {NotificationManager} from 'react-notifications'\r\nimport Recaptcha from 'react-recaptcha'\r\n\r\nimport {\r\n    MAIL_CONTENT_TO_LONG,\r\n    MAIL_INVALID_ADDRESS,\r\n    MAIL_INVALID_NAME,\r\n    MAIL_NO_CONTENT\r\n} from \"../../config/ErrorMessageCodes\";\r\nimport {RECAPTCHA_KEY, SERVICE_ID, TEMPLATE_ID, USER_ID} from \"../../config/ApplicationKeys\";\r\nimport emailjs from \"emailjs-com\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\nexport function ContactForm() {\r\n    const language = useContext(LanguageContext).language\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [mailAddress, setMailAdress] = useState(\"\")\r\n    const [message, setMessage] = useState(\"\")\r\n    const [characters, setCharacters] = useState(0)\r\n\r\n    const [userVerified, setUserVerified] = useState(false)\r\n\r\n    const updateName = (event) => {\r\n        setName(event.target.value)\r\n    }\r\n\r\n    const updateMailAddress = (event) => {\r\n        setMailAdress(event.target.value)\r\n    }\r\n\r\n    const updateMessage = (event) => {\r\n        setMessage(event.target.value)\r\n        setCharacters(event.target.value.length)\r\n    }\r\n\r\n    const verifyCallBack = (response) => {\r\n        if(response) {\r\n            setUserVerified(true)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n\r\n        if(!userVerified) {\r\n            NotificationManager.error(applicationStrings.label_mail_error_verification[language])\r\n            return\r\n        }\r\n\r\n        const mailData: MailData = {\r\n            name: name.trim(),\r\n            address: mailAddress.trim(),\r\n            message: message.trim()\r\n        }\r\n\r\n        const validationErrors = checkMailValidity(mailData)\r\n        if(validationErrors.length > 0) {\r\n            const firstError = validationErrors[0]\r\n            let errorMessage = ''\r\n            switch(firstError) {\r\n                case MAIL_INVALID_NAME:\r\n                    errorMessage = applicationStrings.label_mail_error_name[language]\r\n                    break\r\n                case MAIL_INVALID_ADDRESS:\r\n                    errorMessage = applicationStrings.label_mail_error_mailaddress[language]\r\n                    break\r\n                case MAIL_NO_CONTENT:\r\n                    errorMessage = applicationStrings.label_mail_error_nocontent[language]\r\n                    break\r\n                case MAIL_CONTENT_TO_LONG:\r\n                    errorMessage = applicationStrings.label_mail_error_content_too_long[language]\r\n                    break\r\n            }\r\n\r\n            NotificationManager.error(errorMessage)\r\n            return\r\n        }\r\n\r\n        sendMail(mailData, language)\r\n    }\r\n\r\n    const sendMail = (mail: MailData, language: string) => {\r\n        const options = {\r\n            reply_to: mail.address,\r\n            from_name: mail.name,\r\n            message: mail.message,\r\n        }\r\n\r\n        emailjs.send(SERVICE_ID, TEMPLATE_ID, options, USER_ID)\r\n            .then((result) => {\r\n                NotificationManager.info(applicationStrings.message_email_success[language])\r\n                setName(\"\")\r\n                setMessage(\"\")\r\n                setMailAdress(\"\")\r\n                setCharacters(0)\r\n            }, (error) => {\r\n                if(applicationContext?.debug) {\r\n                    console.log(error.text);\r\n                }\r\n                NotificationManager.info(applicationStrings.message_email_error[language])\r\n            });\r\n    }\r\n\r\n    const charactersLeft = maxMessageCharacters - characters\r\n    const charactersMessage = maxMessageCharacters >= 0\r\n        ? applicationStrings.label_mail_characters_left[language].replace(\"/xx/\", charactersLeft)\r\n        : applicationStrings.label_mail_too_long[language]\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className={\"container\"} style={{paddingBottom: \"30px\"}}>\r\n                <p>{applicationStrings.text_contact_form[language]}</p>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_name[language]}</span>\r\n                    <input className={\"form-control input\"}\r\n                           value={name}\r\n                           onChange={updateName}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_address[language]}</span>\r\n                    <input className={\"form-control input\"}\r\n                           value={mailAddress}\r\n                           onChange={updateMailAddress}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_message[language]}</span>\r\n                    <textarea className={\"form-control input\"}\r\n                              rows={8}\r\n                              value={message}\r\n                              onChange={updateMessage}\r\n                    />\r\n                </div>\r\n                <div><p style={{fontSize: \"0.8em\"}}>{charactersMessage}</p></div>\r\n\r\n                <div style={{paddingTop: \"12px\", paddingBottom: \"36px\"}}>\r\n                    <Recaptcha\r\n                        sitekey={RECAPTCHA_KEY}\r\n                        render=\"explicit\"\r\n                        verifyCallback={verifyCallBack}\r\n                    />\r\n                </div>\r\n\r\n                <button className={\"btn btn-primary\"} type=\"submit\">{applicationStrings.button_send[language]}</button>\r\n            </div>\r\n        </form>\r\n    );\r\n};","import {applicationStrings} from \"../../static/labels\";\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\nexport function Sources() {\r\n    const language = useContext(LanguageContext).language\r\n\r\n    return (\r\n        <div className={\"container\"}>\r\n            <h4><b>{applicationStrings.text_contact_source1[language]}</b></h4>\r\n            <h5>{applicationStrings.text_contact_source2[language]}</h5>\r\n            <p>U.S. Department of Agriculture, Agricultural Research Service.<br/>\r\n                FoodData Central, 2021.</p>\r\n            <p>\r\n                Website: <a href={\"https://fdc.nal.usda.gov/\"}>Food Data Central</a>\r\n            </p>\r\n            <h5>{applicationStrings.text_contact_source3[language]}</h5>\r\n            <p>Deutsche Gesellschaft fr Ernhrung e.V.</p>\r\n            <p>\r\n                Website: <a href={\"https://www.dge.de/\"}>DGE</a>\r\n            </p>\r\n            <h5>{applicationStrings.text_contact_source4[language]}</h5>\r\n            <p>Prakash S. Shetty, Christiani J. K. Henry, Alison E. Black and A. M. Prentice:<br/>\r\n                \"Energy requirements of adults: an update on basal metabolic rates (BMRs) and physical activity\r\n                levels (PALs).\",<br/>\r\n                European journal of clinical nutrition (1996), Volume 50, Suppl 1, pp. 11-23\r\n            </p>\r\n        </div>\r\n    );\r\n\r\n}","import {buildDate, release} from \"../../config/ApplicationSetting\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\nexport function Versions() {\r\n    return <div className={\"container\"}>\r\n        {isMobileDevice() ?\r\n            <h3>\r\n                Food Compare\r\n            </h3>\r\n            :\r\n            <h1>\r\n                Food Compare\r\n            </h1>\r\n        }\r\n\r\n        <h6>\r\n            Version {release}\r\n        </h6>\r\n        <h6>\r\n            Build time: {buildDate}\r\n        </h6>\r\n\r\n        <p style={{paddingTop: \"24px\"}}>\r\n            <b>New features in Version {release}</b>\r\n            <ul>\r\n                <li>The layout of several menus has been revised</li>\r\n                <li>Food Compare fits better on mobile devices now, though some functionality remains limited</li>\r\n                <li>New food items have been added</li>\r\n            </ul>\r\n        </p>\r\n\r\n    </div>\r\n}","export default __webpack_public_path__ + \"static/media/impressum-german.92ba80d6.png\";","export default __webpack_public_path__ + \"static/media/impressum-english.1bd33956.png\";","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\nimport impressum_de from '../../static/image/impressum-german.png';\r\nimport impressum_en from '../../static/image/impressum-english.png';\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LANGUAGE_DE} from \"../../config/Constants\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\nexport function Impressum() {\r\n    const lang = useContext(LanguageContext).language\r\n\r\n    const impressumPath = lang === LANGUAGE_DE ? impressum_de : impressum_en;\r\n    const columnClass = isMobileDevice() ? \"col-10\" : \"col-6\"\r\n\r\n    return (\r\n        <div className={\"container\"} style={{paddingBottom: \"30px\"}}>\r\n            <div className={columnClass}>\r\n                <p>\r\n                    <b>{applicationStrings.text_contact_disclaimer1[lang]}</b>\r\n                </p>\r\n                <p>\r\n                    <i>\r\n                        {applicationStrings.text_contact_disclaimer2[lang]}\r\n                    </i>\r\n                </p>\r\n                <p>\r\n                    <i>\r\n                        {applicationStrings.text_contact_disclaimer3[lang]}\r\n                    </i>\r\n                </p>\r\n            </div>\r\n            <div style={{paddingTop: \"20px\"}}>\r\n                <div style={{height: '180px'}}>\r\n                    <img src={impressumPath} alt={\"Impressumtext\"} style={{height: '180px'}}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {ToggleButton, ToggleButtonGroup} from \"react-bootstrap\";\r\nimport {ContactForm} from \"./ContactForm\";\r\nimport {Sources} from \"./Sources\";\r\nimport {Versions} from \"./Versions\";\r\nimport {Impressum} from \"./Impressum\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_CONTACT_SUBMENU,\r\n    GA_CATEGORY_CONTACT\r\n} from \"../../config/GA_Events\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\nexport function ContactContainer() {\r\n    const languageContext = useContext(LanguageContext)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const menu_contact = 1\r\n    const menu_sources = 2\r\n    const menu_versions = 3\r\n    const menu_impressum = 4\r\n\r\n\r\n    const [selectedMenu, setSelectedMenu] = useState(menu_contact)\r\n    const buttonStyle = {width: \"175px\"}\r\n\r\n    const renderSubMenu = () => {\r\n        switch (selectedMenu) {\r\n            case menu_contact:\r\n                return <ContactForm/>\r\n            case menu_sources:\r\n                return <Sources/>\r\n            case menu_versions:\r\n                return <Versions/>\r\n            case menu_impressum:\r\n                return <Impressum/>\r\n            default:\r\n                return <div/>\r\n        }\r\n    }\r\n\r\n    const onChangeSubmenu = (selectedMenu) => {\r\n        let label = \"\"\r\n        switch(selectedMenu) {\r\n            case menu_contact:\r\n                label = \"Contact\"\r\n                break\r\n            case menu_sources:\r\n                label = \"Sources\"\r\n                break\r\n            case menu_versions:\r\n                label = \"Versions\"\r\n                break\r\n            case menu_impressum:\r\n                label = \"Impressum\"\r\n                break\r\n        }\r\n\r\n        callEvent(applicationContext?.debug, GA_ACTION_CONTACT_SUBMENU, GA_CATEGORY_CONTACT, label)\r\n\r\n        setSelectedMenu(menu_contact)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={\"text-center\"} style={{paddingTop: \"25px\", paddingBottom: \"50px\"}}>\r\n                <ToggleButtonGroup className={\"contact\"}\r\n                                   type={\"radio\"}\r\n                                   name={\"contact menus\"}\r\n                                   defaultValue={menu_contact}>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_contact}\r\n                                  checked={selectedMenu === menu_contact}\r\n                                  onChange={() => onChangeSubmenu(menu_contact)}>\r\n                        {applicationStrings.menu_contact[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_sources}\r\n                                  checked={selectedMenu === menu_sources}\r\n                                  onChange={() => onChangeSubmenu(menu_sources)}>\r\n                        {applicationStrings.menu_contact_sources[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_versions}\r\n                                  checked={selectedMenu === menu_versions}\r\n                                  onChange={() => onChangeSubmenu(menu_versions)}>\r\n                        {applicationStrings.menu_contact_versions[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_impressum}\r\n                                  checked={selectedMenu === menu_impressum}\r\n                                  onChange={() => onChangeSubmenu(menu_impressum)}>\r\n                        {applicationStrings.menu_contact_impressum[languageContext.language]}\r\n                    </ToggleButton>\r\n                </ToggleButtonGroup>\r\n            </div>\r\n            <div>\r\n                {renderSubMenu()}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {getCategorySelectList} from \"../../service/nutrientdata/CategoryService\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {getElementsOfRankingGroup, getRankingGroups} from \"../../service/RankingService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport Select from 'react-select';\r\nimport {PATH_RANKING, QUERYKEY_DATAPANEL_RANKING} from \"../../config/Constants\";\r\nimport {makeRankingPanelDataUri, parseRankingPanelDataUri} from \"../../service/uri/RankingPanelUriService\";\r\nimport {RankingPanelData} from \"../../types/livedata/ApplicationData\";\r\nimport {customSelectStyles} from \"../../config/UI_Config\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_RANKING_CONFIG,\r\n    GA_ACTION_SELECTION_RANKING_CAT, GA_ACTION_SELECTION_RANKING_ELEMENT,\r\n    GA_CATEGORY_RANKING\r\n} from \"../../config/GA_Events\";\r\n\r\ninterface RankingSelectorProps {\r\n    openChart: (selectedCategory, selectedValue, use100gram, transformToDietaryRequirements) => void,\r\n    useHorizontalLayout: boolean\r\n}\r\n\r\nexport const BASE_DATA_INDEX = 0\r\nexport const VITAMIN_INDEX = 1\r\nexport const MINERAL_INDEX = 2\r\nexport const LIPIDS_INDEX = 3\r\nexport const CARBS_INDEX = 4\r\nexport const PROTEIN_INDEX = 5\r\n\r\nexport function RankingSelector(props: RankingSelectorProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const rankingPanelData = applicationContext?.applicationData.rankingPanelData\r\n\r\n    const initializeState = rankingPanelData && rankingPanelData.selectedFoodCategory\r\n                                && rankingPanelData.selectedGroup && rankingPanelData.selectedElement ? true : false\r\n\r\n    const [elementsList, setElementsList] = useState<any>()\r\n    const [initialized, setInitialized] = useState<boolean>(initializeState)\r\n\r\n    useEffect(() => {\r\n        if (applicationContext) {\r\n            const newElements = buildElementsList(applicationContext.applicationData.rankingPanelData.selectedGroup)\r\n            setElementsList(newElements)\r\n        }\r\n    }, [applicationContext?.applicationData.rankingPanelData.selectedGroup])\r\n\r\n    useEffect(() => {\r\n        if (selectedFoodCategory && selectedGroup && selectedElement && initialized) {\r\n            updateUriQuery()\r\n            openChart()\r\n        } else if (!initialized) {\r\n            buildRankingPanelPageFromURI()\r\n        }\r\n    }, [applicationContext?.applicationData.rankingPanelData.selectedFoodCategory,\r\n        applicationContext?.applicationData.rankingPanelData.selectedElement,\r\n        applicationContext?.applicationData.rankingPanelData.use100gram,\r\n        applicationContext?.applicationData.rankingPanelData.showDietaryRequirements,\r\n        elementsList\r\n    ])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const {\r\n        selectedFoodCategory,\r\n        selectedGroup,\r\n        selectedElement,\r\n        use100gram,\r\n        showDietaryRequirements\r\n    } = applicationContext.applicationData.rankingPanelData\r\n\r\n    const buildRankingPanelPageFromURI = () => {\r\n        const queryString = window.location.search.substring(1)\r\n        const equalOperator = queryString.indexOf(\"=\")\r\n        const key = queryString.substring(0, equalOperator)\r\n        const value = queryString.substring(equalOperator + 1)\r\n\r\n        if (key === QUERYKEY_DATAPANEL_RANKING && value.length > 1) {\r\n            const uriData: RankingPanelData | null = parseRankingPanelDataUri(value, applicationContext.foodDataCorpus, language)\r\n            if (!uriData) {\r\n                return\r\n            }\r\n\r\n            const {selectedFoodCategory, selectedGroup, selectedElement} = uriData\r\n            if (selectedFoodCategory === null || selectedGroup === null || selectedElement === null) {\r\n                return\r\n            } else {   // Set new URI Query\r\n                applicationContext.setRankingPanelData(uriData)\r\n                openChart()\r\n                setInitialized(true)\r\n            }\r\n        }\r\n    }\r\n\r\n    const updateUriQuery = () => {\r\n        const query = makeRankingPanelDataUri(applicationContext.applicationData.rankingPanelData)\r\n\r\n        history.push({\r\n            pathName: PATH_RANKING,\r\n            search: `${QUERYKEY_DATAPANEL_RANKING}=${query}`\r\n        })\r\n    }\r\n\r\n    const handleFoodCategoryChange = (selectedOption) => {\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            selectedFoodCategory: selectedOption\r\n        }\r\n\r\n        callEvent(applicationContext.debug, GA_ACTION_SELECTION_RANKING_CAT, GA_CATEGORY_RANKING, selectedOption.value)\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const handleGroupChange = (selectedOption) => {\r\n        setInitialized(true)\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            selectedGroup: selectedOption,\r\n            selectedElement: null\r\n        }\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n        props.openChart(null, null, false, false);\r\n    }\r\n\r\n    const handleValueChange = (selectedOption) => {\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            selectedElement: selectedOption\r\n        }\r\n\r\n        callEvent(applicationContext.debug, GA_ACTION_SELECTION_RANKING_ELEMENT, GA_CATEGORY_RANKING, selectedOption.value)\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const handlePortionAmountChange = () => {\r\n        const label = \"100 gram portion: \" + !use100gram\r\n        callEvent(applicationContext.debug, GA_ACTION_RANKING_CONFIG, GA_CATEGORY_RANKING, label)\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            use100gram: !use100gram\r\n        }\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const handleDietaryRequirementsCheckbox = () => {\r\n        const label = \"use dietary req.: \" + !showDietaryRequirements\r\n        callEvent(applicationContext.debug, GA_ACTION_RANKING_CONFIG, GA_CATEGORY_RANKING, label)\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            showDietaryRequirements: !showDietaryRequirements\r\n        }\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const getFoodCategoryList = () => {\r\n        return getCategorySelectList(applicationContext.foodDataCorpus.categories, language)\r\n    }\r\n\r\n    const getRankingGroupsList = () => {\r\n        return getRankingGroups(language);\r\n    }\r\n\r\n    const buildElementsList = (selectedGroup) => {\r\n        if (!selectedGroup) {\r\n            return;\r\n        }\r\n\r\n        return getElementsOfRankingGroup(selectedGroup.value, language)\r\n    }\r\n\r\n    const openChart = () => {\r\n        if (!selectedFoodCategory || !selectedGroup || !selectedElement) {\r\n            return\r\n        }\r\n\r\n        const rankingCategory = selectedGroup ? selectedGroup.value : null\r\n        const mineralOrVitaminCategory = (rankingCategory === VITAMIN_INDEX) || (rankingCategory === MINERAL_INDEX);\r\n        const transformToDietaryRequirements = mineralOrVitaminCategory ? showDietaryRequirements : false;\r\n\r\n        props.openChart(selectedFoodCategory, selectedElement, use100gram, transformToDietaryRequirements);\r\n    }\r\n\r\n    const renderPortionForm = () => {\r\n        const rankingCategory = selectedGroup ? selectedGroup.value : null;\r\n\r\n        return (\r\n            <div className=\"column select-menu\" style={{paddingLeft: \"20px\", paddingTop: \"10px\"}}>\r\n                <form className=\"form-inline form-group\">\r\n                    <label className=\"form-elements form-label\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               checked={(use100gram)}\r\n                               onChange={handlePortionAmountChange}\r\n                        />\r\n                        100 g\r\n                    </label>\r\n                    <label className=\"form-elements-largespace form-label\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               checked={!use100gram}\r\n                               onChange={handlePortionAmountChange}\r\n                        />\r\n                        {applicationStrings.label_portion_common[language]}\r\n                    </label>\r\n                    {(rankingCategory === VITAMIN_INDEX || rankingCategory === MINERAL_INDEX) &&\r\n                    <Form.Label className=\"form-elements\">\r\n                        <Form.Check className=\"form-radiobutton\"\r\n                                    inline={true}\r\n                                    label={applicationStrings.label_ranking_dietaryRequirements[language]}\r\n                                    defaultChecked={showDietaryRequirements}\r\n                                    onClick={handleDietaryRequirementsCheckbox}>\r\n                        </Form.Check>\r\n                    </Form.Label>\r\n                    }\r\n                </form>\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n    const rankingList = getRankingGroupsList()\r\n\r\n    const containerClass = props.useHorizontalLayout ? \"container row\" : \"container\"\r\n    const selectorClass = props.useHorizontalLayout ? \"col-4 select-menu form-section\" : \"column select-menu form-section\"\r\n\r\n    return (\r\n        <div className={containerClass}>\r\n            <div className={selectorClass}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_category[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={getFoodCategoryList()}\r\n                        value={selectedFoodCategory}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleFoodCategoryChange}\r\n                />\r\n            </div>\r\n            <div className={selectorClass}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_group[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={rankingList}\r\n                        value={selectedGroup}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleGroupChange}\r\n                />\r\n            </div>\r\n            <div className={selectorClass}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_value[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={elementsList}\r\n                        value={selectedElement}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleValueChange}\r\n                />\r\n            </div>\r\n            {renderPortionForm()}\r\n        </div>\r\n    )\r\n\r\n\r\n}","import {RankingPanelData} from \"../../types/livedata/ApplicationData\";\r\nimport {prepareUriForParsing} from \"./FoodDataPanelUriService\";\r\nimport {getCategorySelectList} from \"../nutrientdata/CategoryService\";\r\nimport FoodDataCorpus from \"../../types/nutrientdata/FoodDataCorpus\";\r\nimport {getElementsOfRankingGroup, getRankingGroups} from \"../RankingService\";\r\n\r\nexport function makeRankingPanelDataUri(rankingPanelData: RankingPanelData) {\r\n    const selectedCategory = rankingPanelData.selectedFoodCategory?.value\r\n    const selectedGroup = rankingPanelData.selectedGroup?.value\r\n    const selectedElement = rankingPanelData.selectedElement?.value\r\n\r\n    const use100gram = rankingPanelData.use100gram ? \"1\" : \"0\"\r\n    const showDailyRequirements = rankingPanelData.showDietaryRequirements ? \"1\" : \"0\"\r\n\r\n    return `${selectedCategory};${selectedGroup};${selectedElement};${use100gram}${showDailyRequirements}`\r\n}\r\n\r\nexport function parseRankingPanelDataUri(uri: string, foodDataCorpus: FoodDataCorpus, language: string): RankingPanelData | null {\r\n    const fragments = prepareUriForParsing(uri).split(\";\")\r\n    if(fragments.length !== 4) {\r\n        return null\r\n    }\r\n\r\n    if(fragments[3].length !== 2) {\r\n        return null\r\n    }\r\n\r\n    const selectedCategory = parseInt(fragments[0])\r\n    const selectedGroup = parseInt(fragments[1])\r\n    const selectedElement = fragments[2]\r\n\r\n    const foodCategories = getCategorySelectList(foodDataCorpus.categories, language)\r\n    const groups = getRankingGroups(language)\r\n    const elements = getElementsOfRankingGroup(selectedGroup, language)\r\n\r\n    const selectedFoodCategoryOption = foodCategories.find(foodCategory => foodCategory.value === selectedCategory)\r\n    const selectedGroupOption = groups.find(group => group.value === selectedGroup)\r\n    const selectedElementOption: any = elements ? elements.find(element => element.value === selectedElement) : null\r\n\r\n    const use100g = fragments[3].substring(0,1) === \"0\" ? false : true\r\n    const showDietaryRequirements = fragments[3].substring(1,2) === \"0\" ? false : true\r\n\r\n    if(selectedFoodCategoryOption && selectedGroupOption && selectedElementOption) {\r\n        return {\r\n            selectedFoodCategory: selectedFoodCategoryOption,\r\n            selectedGroup: selectedGroupOption,\r\n            selectedElement: selectedElementOption,\r\n            use100gram: use100g,\r\n            showDietaryRequirements: showDietaryRequirements\r\n        }\r\n    } else {\r\n        return null\r\n    }\r\n}","import * as Constants from \"../config/Constants\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {autoRound} from \"./calculation/MathService\";\r\nimport FoodItem from \"../types/nutrientdata/FoodItem\";\r\nimport FoodClass from \"../types/nutrientdata/FoodClass\";\r\nimport {getNameFromFoodNameList} from \"./nutrientdata/NameTypeService\";\r\nimport NameType from \"../types/nutrientdata/NameType\";\r\nimport {\r\n    BASE_DATA_INDEX,\r\n    CARBS_INDEX,\r\n    LIPIDS_INDEX,\r\n    MINERAL_INDEX,\r\n    PROTEIN_INDEX,\r\n    VITAMIN_INDEX\r\n} from \"../components/ranking/RankingSelector\";\r\nimport {getNutrientDataForFoodItem} from \"./nutrientdata/NutrientDataRetriever\";\r\nimport getName from \"./LanguageService\";\r\n\r\n\r\nexport interface ChartItem {\r\n    name: string\r\n    value: number\r\n}\r\n\r\n/**\r\n * Returns a list of all ranking categories.\r\n */\r\nexport function getRankingGroups(language: string) {\r\n    return [\r\n        {value: BASE_DATA_INDEX, label: applicationStrings.label_chart_nutrientComposition[language]},\r\n        {value: VITAMIN_INDEX, label: applicationStrings.label_nutrient_vit[language]},\r\n        {value: MINERAL_INDEX, label: applicationStrings.label_nutrient_min[language]},\r\n        {value: LIPIDS_INDEX, label: applicationStrings.label_nutrient_lipids_long[language]},\r\n        {value: CARBS_INDEX, label: applicationStrings.label_nutrient_carbohydrates[language]},\r\n        {value: PROTEIN_INDEX, label: applicationStrings.label_chart_proteins[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable vitamins.\r\n */\r\nexport function getBaseCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_ENERGY, label: applicationStrings.label_nutrient_energy[language]},\r\n        {value: Constants.DATA_WATER, label: applicationStrings.label_nutrient_water[language]},\r\n        {value: Constants.DATA_CARBS, label: applicationStrings.label_nutrient_carbohydrates[language]},\r\n        {value: Constants.DATA_LIPIDS, label: applicationStrings.label_nutrient_lipids_long[language]},\r\n        {value: Constants.DATA_PROTEINS, label: applicationStrings.label_nutrient_proteins[language]},\r\n        {value: Constants.DATA_ASH, label: applicationStrings.label_nutrient_ash[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable vitamin values.\r\n */\r\nexport function getVitaminCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_VITAMINS_A, label: applicationStrings.label_nutrient_vit_a[language]},\r\n        {value: Constants.DATA_VITAMINS_B1, label: applicationStrings.label_nutrient_vit_b1[language]},\r\n        {value: Constants.DATA_VITAMINS_B2, label: applicationStrings.label_nutrient_vit_b2[language]},\r\n        {value: Constants.DATA_VITAMINS_B3, label: applicationStrings.label_nutrient_vit_b3[language]},\r\n        {value: Constants.DATA_VITAMINS_B5, label: applicationStrings.label_nutrient_vit_b5[language]},\r\n        {value: Constants.DATA_VITAMINS_B6, label: applicationStrings.label_nutrient_vit_b6[language]},\r\n        {value: Constants.DATA_VITAMINS_B9, label: applicationStrings.label_nutrient_vit_b9[language]},\r\n        {value: Constants.DATA_VITAMINS_B12, label: applicationStrings.label_nutrient_vit_b12[language]},\r\n        {value: Constants.DATA_VITAMINS_C, label: applicationStrings.label_nutrient_vit_c[language]},\r\n        {value: Constants.DATA_VITAMINS_D, label: applicationStrings.label_nutrient_vit_d[language]},\r\n        {value: Constants.DATA_VITAMINS_E, label: applicationStrings.label_nutrient_vit_e[language]},\r\n        {value: Constants.DATA_VITAMINS_K, label: applicationStrings.label_nutrient_vit_k[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable mineral values.\r\n */\r\nexport function getMineralCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_MINERAL_CALCIUM, label: applicationStrings.label_nutrient_min_calcium[language]},\r\n        {value: Constants.DATA_MINERAL_IRON, label: applicationStrings.label_nutrient_min_iron[language]},\r\n        {value: Constants.DATA_MINERAL_MAGNESIUM, label: applicationStrings.label_nutrient_min_magnesium[language]},\r\n        {value: Constants.DATA_MINERAL_PHOSPHORUS, label: applicationStrings.label_nutrient_min_phosphorus[language]},\r\n        {value: Constants.DATA_MINERAL_POTASSIUM, label: applicationStrings.label_nutrient_min_potassimum[language]},\r\n        {value: Constants.DATA_MINERAL_SODIUM, label: applicationStrings.label_nutrient_min_sodium[language]},\r\n        {value: Constants.DATA_MINERAL_ZINC, label: applicationStrings.label_nutrient_min_zinc[language]},\r\n        {value: Constants.DATA_MINERAL_SELENIUM, label: applicationStrings.label_nutrient_min_selenium[language]},\r\n        {value: Constants.DATA_MINERAL_MANGANESE, label: applicationStrings.label_nutrient_min_manganese[language]},\r\n        {value: Constants.DATA_MINERAL_COPPER, label: applicationStrings.label_nutrient_min_copper[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable mineral values.\r\n */\r\nexport function getLipidCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_LIPIDS_SATURATED, label: applicationStrings.label_nutrient_lipids_saturated[language]},\r\n        {\r\n            value: Constants.DATA_LIPIDS_MONO_UNSATURATED,\r\n            label: applicationStrings.label_nutrient_lipids_unsaturated_mono[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_LIPIDS_POLY_UNSATURATED,\r\n            label: applicationStrings.label_nutrient_lipids_unsaturated_poly[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_LIPIDS_TRANSFATTY_ACIDS,\r\n            label: applicationStrings.label_nutrient_lipids_unsaturated[language]\r\n        },\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable carbohydrate values.\r\n */\r\nexport function getCarbohydrateCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_CARBS_DIETARY_FIBERS, label: applicationStrings.label_nutrient_dietaryFibers[language]},\r\n        {value: Constants.DATA_CARBS_SUGAR, label: applicationStrings.label_nutrient_sugar[language]},\r\n        {value: Constants.DATA_CARBS_GLUCOSE, label: applicationStrings.label_nutrient_carbohydrates_glucose[language]},\r\n        {\r\n            value: Constants.DATA_CARBS_FRUCTOSE,\r\n            label: applicationStrings.label_nutrient_carbohydrates_fructose[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_CARBS_GALACTOSE,\r\n            label: applicationStrings.label_nutrient_carbohydrates_galactose[language]\r\n        },\r\n        {value: Constants.DATA_CARBS_SUCROSE, label: applicationStrings.label_nutrient_carbohydrates_sucrose[language]},\r\n        {value: Constants.DATA_CARBS_LACTOSE, label: applicationStrings.label_nutrient_carbohydrates_lactose[language]},\r\n        {value: Constants.DATA_CARBS_MALTOSE, label: applicationStrings.label_nutrient_carbohydrates_maltose[language]},\r\n        {value: Constants.DATA_CARBS_STARCH, label: applicationStrings.label_nutrient_carbohydrates_starch[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all protein values.\r\n */\r\nexport function getProteinCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_PROTEIN_ALANINE, label: applicationStrings.label_nutrient_proteins_alanine[language]},\r\n        {value: Constants.DATA_PROTEIN_ARGININE, label: applicationStrings.label_nutrient_proteins_arginine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_ASPARTIC_ACID,\r\n            label: applicationStrings.label_nutrient_proteins_asparticAcid[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_CYSTINE, label: applicationStrings.label_nutrient_proteins_cystine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_GLUTAMIC_ACID,\r\n            label: applicationStrings.label_nutrient_proteins_glutamicAcid[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_GLYCINE, label: applicationStrings.label_nutrient_proteins_glysine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_HISTIDINE,\r\n            label: applicationStrings.label_nutrient_proteins_histidine[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_PROTEIN_ISOLEUCINE,\r\n            label: applicationStrings.label_nutrient_proteins_isoleucine[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_LEUCINE, label: applicationStrings.label_nutrient_proteins_leucine[language]},\r\n        {value: Constants.DATA_PROTEIN_LYSINE, label: applicationStrings.label_nutrient_proteins_lysine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_METHIONINE,\r\n            label: applicationStrings.label_nutrient_proteins_methionine[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_PROTEIN_PHENYLALANINE,\r\n            label: applicationStrings.label_nutrient_proteins_phenylalanine[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_PROLINE, label: applicationStrings.label_nutrient_proteins_proline[language]},\r\n        {value: Constants.DATA_PROTEIN_SERINE, label: applicationStrings.label_nutrient_proteins_serine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_THREONINE,\r\n            label: applicationStrings.label_nutrient_proteins_threonine[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_PROTEIN_TRYPTOPHAN,\r\n            label: applicationStrings.label_nutrient_proteins_tryptophan[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_TYROSINE, label: applicationStrings.label_nutrient_proteins_tyrosine[language]},\r\n        {value: Constants.DATA_PROTEIN_VALINE, label: applicationStrings.label_nutrient_proteins_valine[language]},\r\n    ];\r\n}\r\n\r\n\r\nexport function getElementsOfRankingGroup(rankingGroup: number, language: string) {\r\n    switch (rankingGroup) {\r\n        case BASE_DATA_INDEX:\r\n            return getBaseCategoryValues(language)\r\n        case VITAMIN_INDEX:\r\n            return getVitaminCategoryValues(language)\r\n        case MINERAL_INDEX:\r\n            return getMineralCategoryValues(language)\r\n        case LIPIDS_INDEX:\r\n            return getLipidCategoryValues(language)\r\n        case CARBS_INDEX:\r\n            return getCarbohydrateCategoryValues(language)\r\n        case PROTEIN_INDEX:\r\n            return getProteinCategoryValues(language)\r\n    }\r\n}\r\n\r\n\r\nexport function getOrderedFoodList(foodList: Array<FoodItem>, foodClassesList: Array<FoodClass>, selectedCategory: number,\r\n                                   selectedValue: any, use100gram: number, language: string, foodNamesList: Array<NameType>,\r\n                                   conditions: Array<NameType>) {\r\n    let chartItems: Array<ChartItem> = [];\r\n\r\n    for (let i = 0; i < foodList.length; i++) {\r\n        let foodItem: FoodItem = foodList[i];\r\n        const foodClassId = foodClassesList.find(foodClass => foodClass.id === foodItem.foodClass)\r\n        const category = foodClassId ? foodClassId.category : foodClassId\r\n\r\n        if (selectedCategory !== 0 && (category !== selectedCategory)) {\r\n            continue;  // Skip this food item, as it does not belong to the selected category\r\n        }\r\n\r\n        let value = getValueOfFoodItem(foodItem, selectedValue);\r\n        if (value === null || value === 0) {\r\n            continue;  // Skip all food items, which do not have the specified value\r\n        }\r\n\r\n        let portionAmount\r\n\r\n        if (!use100gram) {\r\n            const defaultPortion = foodItem.defaultPortionId\r\n            const portionObject = foodItem.portionData?.find(portionObject => portionObject.portionType === defaultPortion)\r\n            portionAmount = portionObject ? portionObject.amount : 100\r\n            value = getPortionValue(value, portionAmount);\r\n        } else {\r\n            value = autoRound(value)\r\n        }\r\n\r\n        let name = getNameFromFoodNameList(foodNamesList, foodItem.nameId!!, language)\r\n\r\n        if(foodItem.conditionId !== 100) {\r\n            const condition = conditions.find(condition => condition.id === foodItem.conditionId)\r\n            if(condition) {\r\n                const conditionName = getName(condition, language)\r\n                name = name + \", \" + conditionName\r\n            }\r\n        }\r\n\r\n        if(!use100gram) {\r\n            name = name + \" (\" + portionAmount + \"g )\"\r\n        }\r\n\r\n        const chartItem: ChartItem = {\r\n            name: name ? name : \"\",\r\n            value: value\r\n        };\r\n\r\n        chartItems.push(chartItem);\r\n    }\r\n\r\n\r\n    chartItems = chartItems.sort((obj1, obj2) => {\r\n        if (obj1.value > obj2.value) {\r\n            return -1;\r\n        } else if (obj1.value < obj2.value) {\r\n            return 1;\r\n        } else {\r\n            return 0;\r\n        }\r\n    });\r\n\r\n    return chartItems;\r\n}\r\n\r\n\r\nfunction getValueOfFoodItem(foodItem, selectedValue) {\r\n    let value\r\n\r\n    const nutrientData = getNutrientDataForFoodItem(foodItem, 0, true)\r\n\r\n    const baseData = nutrientData.baseData;\r\n    const vitaminData = nutrientData.vitaminData;\r\n    const mineralData = nutrientData.mineralData;\r\n    const lipidData = nutrientData.lipidData;\r\n    const carbsData = nutrientData.carbohydrateData;\r\n    const proteinData = nutrientData.proteinData;\r\n\r\n    if (proteinData === null) {\r\n        return 0;\r\n    }\r\n\r\n    // Base Data\r\n\r\n    if (selectedValue === Constants.DATA_ENERGY) {\r\n        value = baseData.water;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_WATER) {\r\n        value = baseData.water;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS) {\r\n        value = baseData.carbohydrates;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS) {\r\n        value = baseData.lipids;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEINS) {\r\n        value = baseData.proteins;\r\n    }\r\n\r\n\r\n    // Vitamins\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_A) {\r\n        value = vitaminData.a;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B1) {\r\n        value = vitaminData.b1;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B2) {\r\n        value = vitaminData.b2;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B3) {\r\n        value = vitaminData.b3;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B5) {\r\n        value = vitaminData.b5;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B6) {\r\n        value = vitaminData.b6;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B9) {\r\n        value = vitaminData.b9;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B12) {\r\n        value = vitaminData.b12;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_C) {\r\n        value = vitaminData.c;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_D) {\r\n        value = vitaminData.d;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_E) {\r\n        value = vitaminData.e;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_K) {\r\n        value = vitaminData.k;\r\n    }\r\n\r\n\r\n    // Minerals\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_CALCIUM) {\r\n        value = mineralData.calcium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_IRON) {\r\n        value = mineralData.iron;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_MAGNESIUM) {\r\n        value = mineralData.magnesium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_PHOSPHORUS) {\r\n        value = mineralData.phosphorus;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_POTASSIUM) {\r\n        value = mineralData.potassium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_SODIUM) {\r\n        value = mineralData.sodium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_ZINC) {\r\n        value = mineralData.zinc;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_SELENIUM) {\r\n        value = mineralData.selenium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_COPPER) {\r\n        value = mineralData.copper;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_MANGANESE) {\r\n        value = mineralData.manganese;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_SATURATED) {\r\n        value = lipidData.saturated;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_MONO_UNSATURATED) {\r\n        value = lipidData.unsaturatedMono;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_POLY_UNSATURATED) {\r\n        value = lipidData.unsaturatedPoly;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_TRANSFATTY_ACIDS) {\r\n        value = lipidData.transFattyAcids;\r\n    }\r\n\r\n\r\n    // Carbohydrates\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_DIETARY_FIBERS) {\r\n        value = baseData.dietaryFibers;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_SUGAR) {\r\n        value = carbsData.sugar;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_GLUCOSE) {\r\n        value = carbsData.glucose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_FRUCTOSE) {\r\n        value = carbsData.fructose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_GALACTOSE) {\r\n        value = carbsData.galactose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_SUCROSE) {\r\n        value = carbsData.sucrose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_LACTOSE) {\r\n        value = carbsData.lactose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_MALTOSE) {\r\n        value = carbsData.maltose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_STARCH) {\r\n        value = carbsData.starch;\r\n    }\r\n\r\n\r\n    // Proteins\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ALANINE) {\r\n        value = proteinData.alanine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ARGININE) {\r\n        value = proteinData.arginine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ASPARTIC_ACID) {\r\n        value = proteinData.asparticAcid;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_CYSTINE) {\r\n        value = proteinData.cystine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_GLUTAMIC_ACID) {\r\n        value = proteinData.glutamicAcid;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_GLYCINE) {\r\n        value = proteinData.glycine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_HISTIDINE) {\r\n        value = proteinData.histidine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ISOLEUCINE) {\r\n        value = proteinData.isoleucine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_LEUCINE) {\r\n        value = proteinData.leucine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_LYSINE) {\r\n        value = proteinData.lysine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_METHIONINE) {\r\n        value = proteinData.methionine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_PHENYLALANINE) {\r\n        value = proteinData.phenylalanine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_PROLINE) {\r\n        value = proteinData.proline;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_SERINE) {\r\n        value = proteinData.serine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_THREONINE) {\r\n        value = proteinData.threonine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_TRYPTOPHAN) {\r\n        value = proteinData.tryptophan;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_TYROSINE) {\r\n        value = proteinData.tyrosine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_VALINE) {\r\n        value = proteinData.valine;\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\nfunction getPortionValue(value, portionSize) {\r\n    const portionValue = value / 100 * portionSize;\r\n    return autoRound(portionValue);\r\n}","import {ChartItem} from \"../../service/RankingService\";\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {color_green} from \"../../config/ChartConfig\";\r\nimport {getBarChartOptionsForRanking} from \"../../service/ChartConfigurationService\";\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\ninterface RankingChartProps {\r\n    chartItems: Array<ChartItem>\r\n    unit: string\r\n    selectedElement: string\r\n}\r\n\r\nexport function RankingChart(props: RankingChartProps) {\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const createChartData = () => {\r\n        const labels: Array<String> = [];\r\n        const data: Array<number> = [];\r\n\r\n        for (let i = 0; i < props.chartItems.length; i++) {\r\n            const chartItem = props.chartItems[i];\r\n\r\n            const name = chartItem.name\r\n            labels.push(name);\r\n            data.push(chartItem.value);\r\n        }\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                data: data,\r\n                backgroundColor: color_green,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n    const getOptions = () => {\r\n        let options = getBarChartOptionsForRanking(props.selectedElement, props.unit)\r\n        options = {\r\n            ...options, plugins: {\r\n                ...options.plugins, title: {\r\n                    ...options.plugins.title,\r\n                    position: \"left\"\r\n                }\r\n            }\r\n        }\r\n        return options\r\n    }\r\n\r\n\r\n    const chartData: any = createChartData();\r\n    const options = getOptions();\r\n    const dataAvailable = chartData.datasets.length > 0 && chartData.datasets[0].data.length > 0;\r\n\r\n    const width = isMobileDevice()\r\n        ? 40 * props.chartItems.length + 150\r\n        : 50 * props.chartItems.length + 150\r\n    const height = isMobileDevice() ? 200 : 500;\r\n    const maxWidth = isMobileDevice() ? \"90vw\": 1000;\r\n\r\n    let containerStyle: any = {\r\n        position: \"relative\",\r\n        width: `${width}px`\r\n    }\r\n\r\n    if(isMobileDevice()) {\r\n        containerStyle.height = `90vh`\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"smooth-scroll\" style={{overflowX: \"auto\", position: \"absolute\", maxWidth: maxWidth}}>\r\n                {dataAvailable &&\r\n                    <div style={containerStyle}>\r\n                        <Bar id=\"chart\"\r\n                             data={chartData}\r\n                             height={height}\r\n                             options={options}\r\n                        />\r\n                    </div>\r\n                }\r\n                {!dataAvailable &&\r\n                  <span>{applicationStrings.label_noData[language]}</span>\r\n                }\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n\r\n}","import {useContext, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {ChartItem, getOrderedFoodList} from \"../../service/RankingService\";\r\nimport {convertAbsoluteValueToDailyRequirement} from \"../../service/calculation/DietaryRequirementService\";\r\nimport * as Constants from \"./../../config/Constants\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {RankingSelector} from \"./RankingSelector\";\r\nimport {RankingChart} from \"./RankingChart\";\r\nimport {maxElementsInRankingChart} from \"../../config/ApplicationSetting\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\nexport function RankingContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const [chartItems, setChartItems] = useState<Array<ChartItem>>([])\r\n    const [unit, setUnit] = useState<string>(\"g\")\r\n    const [selectedValue, setSelectedValue] = useState<ReactSelectOption | null>(null)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const openChart = (selectedCategory, selectedValue, use100gram, transformToDietaryRequirements) => {\r\n        if (!selectedValue) {\r\n            setChartItems([])\r\n            return\r\n        }\r\n\r\n        let category = 0;\r\n        if (selectedCategory) {\r\n            category = selectedCategory.value;\r\n        }\r\n\r\n        setSelectedValue(selectedValue)\r\n        const {foodItems, foodClasses, dietaryRequirements} = applicationContext.foodDataCorpus\r\n        const userData = applicationContext.userData\r\n\r\n        let orderedChartItems = getOrderedFoodList(foodItems, foodClasses, category,\r\n            selectedValue.value, use100gram, language, applicationContext?.foodDataCorpus.foodNames,\r\n            applicationContext?.foodDataCorpus.conditions);\r\n\r\n        if (transformToDietaryRequirements && dietaryRequirements) {\r\n            for (let i = 0; i < orderedChartItems.length; i++) {\r\n                orderedChartItems[i].value = convertAbsoluteValueToDailyRequirement(\r\n                    dietaryRequirements,\r\n                    selectedValue.value,\r\n                    orderedChartItems[i].value,\r\n                    userData\r\n                );\r\n            }\r\n        }\r\n\r\n        const unit = getUnit(selectedValue.value, transformToDietaryRequirements)\r\n\r\n        if (orderedChartItems.length > maxElementsInRankingChart) {\r\n            orderedChartItems = orderedChartItems.slice(0, maxElementsInRankingChart + 1)\r\n        }\r\n\r\n        setChartItems(orderedChartItems)\r\n        setUnit(unit)\r\n    }\r\n\r\n\r\n    const getUnit = (selectedValue, transformToDietaryRequirements) => {\r\n        if (selectedValue === Constants.DATA_ENERGY) {\r\n            return \"kCal\";\r\n        } else if (selectedValue === Constants.DATA_WATER\r\n            || selectedValue === Constants.DATA_LIPIDS\r\n            || selectedValue === Constants.DATA_CARBS\r\n            || selectedValue === Constants.DATA_CARBS_SUGAR\r\n            || selectedValue === Constants.DATA_PROTEINS\r\n            || selectedValue === Constants.DATA_CARBS_DIETARY_FIBERS\r\n            || selectedValue === Constants.DATA_LIPIDS_SATURATED\r\n            || selectedValue === Constants.DATA_LIPIDS_MONO_UNSATURATED\r\n            || selectedValue === Constants.DATA_LIPIDS_POLY_UNSATURATED\r\n            || selectedValue === Constants.DATA_LIPIDS_TRANSFATTY_ACIDS) {\r\n            return \"g\";\r\n        } else if (transformToDietaryRequirements) {\r\n            return \"%\";\r\n        } else {\r\n            return \"mg\";\r\n        }\r\n    }\r\n\r\n    const renderHelpText = () => {\r\n        const helpText = applicationStrings.text_ranking[language];\r\n\r\n        return (\r\n            <div className={\"container\"}>\r\n                <div className={\"row\"}>\r\n                    <div className=\"col-md-6 col-lg-5 infotextMenus\" style={{padding: \"24px\"}}>\r\n                        <i>{helpText}</i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderWebsite = () => {\r\n        return (\r\n            <div className=\"container-fluid\" style={{paddingTop: \"24px\"}}>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <RankingSelector openChart={openChart} useHorizontalLayout={false}/>\r\n                    </div>\r\n                    {chartItems && chartItems.length > 0 &&\r\n                    <div className=\"col-9\">\r\n                        <RankingChart chartItems={chartItems}\r\n                                      unit={unit}\r\n                                      selectedElement={selectedValue ? selectedValue.label : \"\"}/>\r\n                    </div>\r\n                    }\r\n                    {!chartItems &&\r\n                    renderHelpText()\r\n                    }\r\n                    {chartItems && chartItems.length === 0 &&\r\n                    applicationStrings.label_noData[language]\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderMobile = () => {\r\n        return (\r\n            <div className=\"container-fluid\" style={{paddingTop: \"24px\"}}>\r\n                <div>\r\n                    <RankingSelector openChart={openChart} useHorizontalLayout={isMobileDevice()}/>\r\n                </div>\r\n                <hr/>\r\n                {chartItems && chartItems.length > 0 &&\r\n                <div>\r\n                    <RankingChart chartItems={chartItems}\r\n                                  unit={unit}\r\n                                  selectedElement={selectedValue ? selectedValue.label : \"\"}/>\r\n                </div>\r\n                }\r\n                {!chartItems &&\r\n                renderHelpText()\r\n                }\r\n                {chartItems && chartItems.length === 0 &&\r\n                applicationStrings.label_noData[language]\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return isMobileDevice() ? renderMobile() : renderWebsite()\r\n\r\n}","import Header from \"./Header\";\r\nimport Switch from \"react-bootstrap/Switch\";\r\nimport {\r\n    PATH_CONTACT,\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODCOMPARE,\r\n    PATH_FOODDATA_PANEL,\r\n    PATH_HOME,\r\n    PATH_RANKING,\r\n    PATH_USERSETTINGS\r\n} from \"../config/Constants\";\r\nimport {Home} from \"./Home\";\r\nimport FoodDataPanelContainer from \"./fooddatapanel/FoodDataPanelContainer\";\r\nimport DirectCompareContainer from \"./directcompare/DirectCompareContainer\";\r\nimport {UserSettings} from \"./UserSettings\";\r\nimport {ContactContainer} from \"./contact/ContactContainer\";\r\nimport React, {useContext} from \"react\";\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom'\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {RankingContainer} from \"./ranking/RankingContainer\";\r\nimport {Chart, ArcElement} from 'chart.js'\r\nimport annotationPlugin from \"chartjs-plugin-annotation\";\r\n\r\nexport function WebPageContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    // Registering requires some time and should only be performed when the real site is loaded.\r\n    Chart.register(annotationPlugin)\r\n    Chart.register(ArcElement);\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Router>\r\n                    <Header/>\r\n                    <Switch>\r\n                        <Route path={PATH_FOODCOMPARE} component={Home}/>\r\n                        <Route path={PATH_HOME} component={Home}/>\r\n                        <Route path={PATH_FOODDATA_PANEL} component={FoodDataPanelContainer}/>\r\n                        <Route path={PATH_DIRECT_COMPARE} component={DirectCompareContainer}/>\r\n                        <Route path={PATH_RANKING} component={RankingContainer}/>\r\n                        <Route path={PATH_USERSETTINGS} component={UserSettings}/>\r\n                        <Route path={PATH_CONTACT} component={ContactContainer}/>\r\n                        <Route exact path={\"/\"} component={Home}/>\r\n                    </Switch>\r\n                </Router>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {isMobileDevice} from \"../service/WindowDimension\";\r\n\r\nexport default function MobileDeviceCheck() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const setMobileStatus = (status: boolean) => {\r\n        applicationContext?.setMobileUsage(status)\r\n    }\r\n\r\n    const showMobileInformationModal = () => {\r\n        return <div className={\"mobile-device-message\"}>\r\n            <div style={{margin: \"15px\"}}>\r\n                {applicationStrings.device_detection_hint[language]}\r\n            </div>\r\n            <div className={\"d-flex justify-content-center\"}>\r\n                <Button\r\n                    style={{minWidth: \"80px\"}}\r\n                    className=\"primary button-l\"\r\n                    onClick={() => setMobileStatus(false)}>\r\n                    OK\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    return <div>\r\n        {applicationContext?.useAsMobile === null && isMobileDevice() &&\r\n        < div>\r\n            {showMobileInformationModal()}\r\n        </div>\r\n        }\r\n    </div>\r\n\r\n}","import './App.scss';\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"bootstrap/dist/js/bootstrap.min.js\";\r\nimport {NotificationContainer} from 'react-notifications'\r\nimport ApplicationDataContextProvider from \"./contexts/ApplicationDataContext\";\r\nimport React, {useEffect} from \"react\";\r\n\r\nimport {LanguageProvider} from \"./contexts/LangContext\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport ReactGA from \"react-ga4\"\r\nimport {ANALYTICS_MESS_ID} from \"./config/ApplicationKeys\";\r\n\r\nimport {WebPageContainer} from \"./components/WebPageContainer\";\r\nimport {parseFoodCompareUri} from \"./service/uri/BaseUriService\";\r\nimport MobileDeviceCheck from \"./components/MobileDeviceCheck\";\r\n\r\n\r\nfunction initializeReactGA() {\r\n    (async () => {\r\n        try {   // NOTE: uBlock Origin may cause a crash here\r\n            ReactGA.initialize(ANALYTICS_MESS_ID)\r\n        } catch (e) {\r\n            console.log(\"GA4 React initialization error \", e)\r\n        }\r\n    })();\r\n}\r\n\r\nfunction App(): JSX.Element {\r\n    useEffect(() => {\r\n        ReactTooltip.rebuild()\r\n    })\r\n\r\n    const uriData: string | null = parseFoodCompareUri()\r\n    if(uriData !== \"test\" && uriData !== \"debug\") {\r\n        initializeReactGA()  // Initialize Google Analytics Tool if the app is not run in test/debug mode\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <NotificationContainer/>\r\n            <ReactTooltip/>\r\n            <LanguageProvider>\r\n                <ApplicationDataContextProvider>\r\n                    <MobileDeviceCheck/>\r\n                    <WebPageContainer/>\r\n                </ApplicationDataContextProvider>\r\n            </LanguageProvider>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport {hydrate, render} from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\n\r\nif (rootElement && rootElement.hasChildNodes()) {\r\n    hydrate(<App />, rootElement);\r\n} else {\r\n    render(\r\n        <App />, rootElement);\r\n}\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n\r\n\r\n"],"sourceRoot":""}