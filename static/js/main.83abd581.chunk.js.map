{"version":3,"sources":["static/image/carousel sync /^/.*$","static/image/carousel/Img-de-1.png","static/image/carousel/Img-de-2.png","static/image/carousel/Img-de-3.png","static/image/carousel/Img-de-4.png","static/image/carousel/Img-de-5.png","static/image/carousel/Img-de-6.png","static/image/carousel/Img-en-1.png","static/image/carousel/Img-en-2.png","static/image/carousel/Img-en-3.png","static/image/carousel/Img-en-4.png","static/image/carousel/Img-en-5.png","static/image/carousel/Img-en-6.png","service/NutrientDataImportService.ts","config/Constants.ts","config/ApplicationSetting.ts","service/LanguageService.ts","service/nutrientdata/NameTypeService.ts","contexts/ApplicationDataContext.tsx","contexts/LangContext.tsx","static/labels.ts","components/MobileDeviceCheck.tsx","static/image/logo.png","components/Header.tsx","static/image/text.png","components/Home.tsx","service/nutrientdata/CategoryService.ts","service/nutrientdata/FoodClassService.ts","service/nutrientdata/FoodItemsService.ts","service/nutrientdata/PortionDataService.ts","service/WindowDimension.ts","service/nutrientdata/NutrientDataRetriever.ts","components/foodselector/FoodSelector.tsx","components/foodselector/CompositeFoodList.tsx","service/calculation/FoodDataAggregationService.ts","components/foodselector/FoodSelectorModal.tsx","components/ConfirmationDialog.tsx","service/calculation/MathService.ts","config/ChartConfig.ts","service/ChartConfigurationService.ts","components/charthelper/PieChartConfigurationForm.tsx","components/charthelper/CustomLegend.tsx","service/nutrientdata/ChartSizeCalculation.tsx","components/fooddatapanel/charts/BaseDataChart.tsx","config/EnergyConstants.ts","service/calculation/EnergyService.ts","components/fooddatapanel/charts/EnergyDataChart.tsx","service/calculation/DietaryRequirementService.ts","components/charthelper/BarChartConfigurationForm.tsx","components/fooddatapanel/charts/MineralVitaminChart.tsx","components/fooddatapanel/charts/LipidsDataChart.tsx","components/fooddatapanel/charts/ProteinDataChart.tsx","components/fooddatapanel/charts/CarbsDataChart.tsx","components/fooddatapanel/ChartPanel.tsx","components/fooddatapanel/FoodDataTable.tsx","components/fooddatapanel/charts/InfoData.tsx","components/fooddatapanel/FoodDataPageBody.tsx","components/HelpModal.tsx","components/fooddatapanel/ChartMenuPanel.tsx","components/fooddatapanel/FoodDataPageHeader.tsx","service/HelpService.ts","service/TableService.ts","components/fooddatapanel/FoodDataPage.tsx","service/FoodDataPanelService.tsx","components/fooddatapanel/FoodAnalyzerContainer.tsx","components/fooddatapanel/TabContainer.tsx","service/uri/ChartConfigConverter.ts","service/uri/FoodDataPanelUriService.ts","service/uri/FoodDataPanelAggregatedUriService.ts","service/UserDataService.ts","components/fooddatapanel/FoodDataPanelContainer.tsx","components/foodselector/DirectCompareSelector.tsx","service/calculation/NutrientCalculationService.ts","components/directcompare/DC_MineralVitaminChart.tsx","components/directcompare/DC_PieChart.tsx","components/directcompare/DC_ProteinDataChart.tsx","components/directcompare/DC_EnergyChart.tsx","components/directcompare/DirectCompareDataPanel.tsx","service/uri/DirectCompareUriService.ts","components/directcompare/DirectCompareContainer.tsx","static/image/app.png","components/FoodCompareApp.tsx","components/UserSettings.tsx","config/ErrorMessageCodes.ts","service/MailService.ts","components/contact/ContactForm.tsx","config/ApplicationKeys.ts","components/contact/Sources.tsx","components/contact/Versions.tsx","static/image/impressum-german.png","static/image/impressum-english.png","components/contact/Impressum.tsx","components/contact/ContactContainer.tsx","components/WebPageContainer.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","loadFoodDataCorpus","categories","nutrientdata","conditions","portionTypes","sources","foodNames","foodClasses","foodItems","dietaryRequirements","AMOUNT_PORTION","GRAM","CHART_TYPE_PIE","CHART_TYPE_BAR","CHART_VITAMINS","CHART_MINERALS","DISPLAYMODE_TABLE","DISPLAYMODE_CHART","CARBS_DATA_BASE","CARBS_DATA_DETAIL","LIPIDS_DATA_BASE","LIPIDS_DATA_OMEGA","PATH_DIRECT_COMPARE","PATH_FOODCOMPARE","PATH_FOODDATA_PANEL","PATH_HOME","PATH_CONTACT","PATH_MOBILE_APP","PATH_USERSETTINGS","LANGUAGE_DE","LANGUAGE_EN","SEX_MALE","SEX_FEMALE","SOURCE_SRLEGACY","SOURCE_FNDDS","TAB_BASE_DATA","TAB_ENERGY_DATA","TAB_VITAMIN_DATA","TAB_MINERAL_DATA","TAB_LIPIDS_DATA","TAB_CARBS_DATA","TAB_PROTEINS_DATA","TAB_INFO","QUERYKEY_DATAPANEL_ITEM","QUERYKEY_DATAPANEL_AGGREGATED","mobileAppPath","maxMessageCharacters","smallFormsScreenSize","initialUserDataSize","initialUserDataSex","initialUserDataPregnant","initialUserDataBreastfeeding","initialUserDataLeisureSports","initialChartConfigData","baseChartConfig","chartType","showLegend","showDetails","vitaminChartConfig","portionType","expand100","mineralChartConfig","lipidsChartConfig","subChart","carbsChartConfig","proteinChartConfig","initialDirectCompareConfigData","synchronize","subChart1","subChart2","getName","nameType","language","germanName","englishName","getNameFromFoodNameList","foodNameList","find","ApplicationDataContextStore","createContext","ApplicationDataContextProvider","setSelectedFoodDataPanelTab","selectedTab","setState","prevState","applicationData","foodDataPanel","selectedFoodItemIndex","setSelectedDisplayMode","displayMode","setSelectedFoodDataPanelPage","selectedPage","selectedDataPage","addItemToFoodDataPanel","foodItem","newItems","assign","state","selectedFoodItems","push","removeItemFromFoodDataPanel","foodItemId","filter","selectedFoodItem","newIndex","currentIndex","length","removeAllItemsFromFoodDataPanel","updateAllFoodItemNames","newLanguage","newFoodItems","foodName","nameId","tab","updateFoodDataPanelChartConfig","chartConfig","chartConfigData","setSelectedDirectCompareItems","selectedFoodItem1","selectedFoodItem2","directCompareDataPanel","setSelectedDirectCompareDataPage","updateDirectCompareChartConfig","directCompareConfigChart","setUserData","userData","setPreferredSource","source","preferredSource","setFoodSelectorConfig","selectedCategory","sourceSupplement","sourceCombine","foodSelector","foodDataCorpus","age","size","weight","sex","pregnant","breastFeeding","palValue","leisureSports","initialValues","debug","ready","useAsMobile","NutrientDataImportService","this","value","setMobileUsage","usage","setFoodDataPanelData","setSelectedFoodTab","setSelectedDataPage","setDirectCompareData","Provider","props","children","Component","LanguageContext","userLanguageChange","selectedLanguage","LanguageProvider","userLanguage","navigator","preferredLanguage","useState","setLanguage","provider","selectedLanaguage","applicationStrings","button_add","de","en","button_cancel","button_change_to_chart_mode","button_close","button_getstarted_1","button_getstarted_2","button_getstarted_3","button_no","button_select","button_show","button_send","button_submit","button_update","button_yes","checkbox_chartoption_showLegend","checkbox_chartoption_showDetails","checkbox_english","checkbox_expand100g","checkbox_german","checkbox_synchronize","confirm_close_all_tabs","device_detection_hint","device_detection_question","direct_compare_text","home_carousel_0","home_carousel_1","home_carousel_2","home_carousel_3","home_carousel_4","home_carousel_5","home_text_1","home_text_2","home_text_3","label_amount","label_amount_short","label_category","label_charttype","label_charttype_pie","label_charttype_bar","label_charttype_carbs_base","label_charttype_carbs_detail","label_charttype_energy","label_charttype_lipids_base","label_charttype_lipids_base_title","label_charttype_lipids_omega","label_charttype_lipids_omega_title","label_charttype_minerals","label_charttype_proteins","label_charttype_vitamins","label_chart_bmr","label_chart_energyExpenditure","label_chart_nutrientComposition","label_chart_totalComposition","label_datatype","label_food","label_foodclass","label_fooditem","label_foodselector","label_foodselector_composite","label_getStarted","label_info","label_info_category","label_info_foodClass","label_info_foodId","label_info_foodName","label_info_portion","label_info_portionType","label_info_preparation","label_info_source","label_language","label_mail_name","label_mail_address","label_mail_message","label_mail_characters_left","label_mail_too_long","label_mail_error_name","label_mail_error_mailaddress","label_mail_error_nocontent","label_mail_error_content_too_long","label_mail_error_verification","label_noData","label_nutrient_ash","label_nutrient_carbohydrates","label_nutrient_carbohydrates_short","label_nutrient_carbohydrates_fructose","label_nutrient_carbohydrates_galactose","label_nutrient_carbohydrates_glucose","label_nutrient_carbohydrates_lactose","label_nutrient_carbohydrates_maltose","label_nutrient_carbohydrates_starch","label_nutrient_carbohydrates_sucrose","label_nutrient_dietaryFibers","label_nutrient_dietaryFibers_short","label_nutrient_energy","label_nutrient_lipids","label_nutrient_lipids_saturated","label_nutrient_lipids_unsaturated","label_nutrient_lipids_unsaturated_mono","label_nutrient_lipids_unsaturated_poly","label_nutrient_lipids_transfattyAcids","label_nutrient_lipids_omega3","label_nutrient_lipids_omega6","label_nutrient_lipids_cholesterol","label_nutrient_min","label_nutrient_min_calcium","label_nutrient_min_copper","label_nutrient_min_iron","label_nutrient_min_magnesium","label_nutrient_min_manganese","label_nutrient_min_phosphorus","label_nutrient_min_potassimum","label_nutrient_min_selenium","label_nutrient_min_sodium","label_nutrient_min_zinc","label_nutrient_omega3","label_nutrient_omega6","label_nutrient_proteins","label_nutrient_proteins_alanine","label_nutrient_proteins_arginine","label_nutrient_proteins_asparticAcid","label_nutrient_proteins_cystine","label_nutrient_proteins_glysine","label_nutrient_proteins_glutamicAcid","label_nutrient_proteins_histidine","label_nutrient_proteins_isoleucine","label_nutrient_proteins_leucine","label_nutrient_proteins_lysine","label_nutrient_proteins_methionine","label_nutrient_proteins_phenylalanine","label_nutrient_proteins_proline","label_nutrient_proteins_serine","label_nutrient_proteins_threonine","label_nutrient_proteins_tryptophan","label_nutrient_proteins_tyrosine","label_nutrient_proteins_valine","label_nutrient_remainder","label_nutrient_sugar","label_nutrient_vit","label_nutrient_vit_a","label_nutrient_vit_b1","label_nutrient_vit_b2","label_nutrient_vit_b3","label_nutrient_vit_b5","label_nutrient_vit_b6","label_nutrient_vit_b9","label_nutrient_vit_b12","label_nutrient_vit_c","label_nutrient_vit_d","label_nutrient_vit_e","label_nutrient_vit_k","label_nutrient_water","label_overview","label_portion","label_prefix_hereof","label_reference","label_preferred_source","label_source","label_source_supplement","label_source_supplement_tooltip","label_source_combine","label_source_combine_tooltip","label_unknown","label_userSettings_age","label_userSettings_breastfeeding","label_userSettings_leisureSports","label_userSettings_leisureSports_tooltip","label_userSettings_palValue","label_userSettings_pregnant","label_userSettings_sex","label_userSettings_sex_male","label_userSettings_sex_female","label_userSettings_size","label_userSettings_weight","menu_food_data_panel","menu_direct_compare","menu_home","menu_mobile_app","menu_ranking","menu_settings","menu_contact","menu_contact_sources","menu_contact_versions","menu_contact_impressum","message_email_success","message_email_error","message_error_existing_element","message_error_incomplete_form","message_error_invalid_portion","message_userdata_success","message_userdata_error_title","message_userdata_error_age","message_userdata_error_size","message_userdata_error_weight","palcat_name_1","palcat_desc_1","palcat_name_2","palcat_desc_2","palcat_name_3","palcat_desc_3","palcat_name_4","palcat_desc_4","palcat_name_5","palcat_desc_5","palcat_name_6","palcat_desc_6","palcat_name_7","palcat_desc_7","portion_100g","portion_individual","text_contact_disclaimer1","text_contact_disclaimer2","text_contact_disclaimer3","text_contact_form","text_contact_source1","text_contact_source2","text_contact_source3","text_contact_source4","text_empty_fooddatapanel","text_foodcompareapp_1","text_foodcompareapp_2","text_setUserdata_p1","text_setUserdata_p2","text_setUserdata_p3","tooltip_icon_charts","tooltip_icon_close","tooltip_icon_newFoodItem","tooltip_icon_newFoodItemStack","tooltip_icon_removeAll","tooltip_icon_table","MobileDeviceCheck","applicationContext","useContext","setMobileStatus","status","window","location","href","isMobile","className","style","margin","Button","minWidth","marginRight","onClick","Header","useLocation","handleLanguageButtonClick","event","target","handleSourceButtonClick","activePath","pathname","endsWith","substring","console","log","paddingTop","paddingLeft","maxWidth","src","name","type","checked","onChange","renderSourceButtons","marginTop","role","to","variant","active","images","require","Home","languageContext","displayedImage","setDisplayedImage","imageChanged","image","renderHomeText","textElements","textElement","renderTextElement","text","paddingRight","homeText1","paddingBottom","width","backgroundColor","langKey","pic1","default","pic2","pic3","pic4","pic5","pic6","captionAttribute","imageCaption","showArrows","infiniteLoop","autoPlay","interval","transitionTime","selectedItem","showThumbs","showStatus","textAlign","fontStyle","renderCarousel","marginBottom","homeText2","getCategorySelectList","nameTypeList","sort","names","forEach","reactSelectOptions","index","label","getReactSelectOptionsList","getFoodClassSelectList","category","filteredFoodClasses","foodClass","getFoodClassesOfCategory","nameKey","error","obj1","obj2","localeCompare","getFoodItemsSelectList","filteredFoodItems","foodClassId","getFoodItemsOfFoodclass","condition","conditionId","conditionName","getPortionReactSelectList","portionData","portionElement","portionTypeIndex","findIndex","portionName","amount","getDefaultPortionData","portionDataList","defaultPortionIndex","defaultPortionId","getCurrentWindowDimension","innerWidth","height","innerHeight","useWindowDimension","windowDimension","setWindowDimension","useEffect","addEventListener","removeEventListener","isSmallScreen","getSourceName","sourceId","getNutrientData","sourceToUse","supplementData","combineData","undefined","nutrientDataList","nutrientData","nutrientDataObject","complement","selectedNutrientData","complementeNutrientData","supplementedBaseData","supplementCategory","baseData","supplementedVitaminData","vitaminData","supplementedMineralData","mineralData","supplementedCarbsData","carbohydrateData","supplementedProteinData","proteinData","supplementedOmegaData","lipidData","omegaData","supplementedLipidData","sourceItemId","supplementNutrientData","combinedBaseData","combineCategory","combinedVitaminData","combinedMineralData","combinedCarbsData","combinedProteinData","combinedOmegaData","combinedLipidData","combineNutrientData","getNutrientDataForFoodItem","selectedSource","nutrientCategory1","nutrientCategory2","key","objectHasChildren","keys1","keys2","allKeys","Set","finalObject","finalValue","value1","value2","FoodSelector","initialCategory","initialSupplementValue","initialCombineValue","setSelectedCategory","selectdFoodClass","setSelectedFoodClass","setSelectedFoodItem","selectedPortion","setSelectedPortion","portionAmount","setPortionAmount","setSelectedSource","setSupplementData","setCombineData","initialized","setInitialized","categoriesList","setCategoriesList","foodClassesList","setFoodClassesList","foodItemsList","setFoodItemsList","portionsList","setPortionsList","sourcesList","setSourcesList","windowSize","currentSelectorSetting","initialFoodClass","initialFoodClassToSet","categoryItems","foodItemsOfFoodClass","updateSourcesList","defaultPortion","makeSelectedFoodItemObject","newFoodItem","updateSelectedFoodItem","portion","handleSourceChange","updateFoodClasses","foodClassItems","updateFoodItem","updatePortionsList","sourceNames","getSourceNames","matchingSource","sourceObject","onCheckSupplementCheckbox","onCheckCombineCheckbox","predefinedFoodObject","foodClassOption","selected","sourceElement","portionObject","setInitialFoodElement","amount_label","smallVariant","selectClass","inputClass","noCategorySelect","options","disabled","parseInt","isNaN","sourceSelectBox","isDisabled","checkboxes","data-tip","Form","Check","inline","renderSourceLine","CompositeFoodList","renderLine","borderBottom","deleteItem","onDeleteItem","maxHeight","overflowY","combineFoodItems","compositeList","portionSize","energy","carbohydrates","lipids","proteins","water","dietaryFibers","alcohol","ash","portionFactor","createFinalValue","buildBaseDataObject","a","b1","b2","b3","b5","b6","b7","b9","b12","c","d","k","buildVitaminDataObject","calcium","iron","magnesium","phosphorus","potassium","sodium","zinc","copper","manganese","selenium","buildMineralDataObject","glucose","fructose","galactose","sucrose","maltose","lactose","starch","sugar","buildCarbohydrateData","unsaturatedMono","unsaturatedPoly","saturated","omega3","omega6","omegaUncertain","cholesterol","transFattyAcids","uncertain","omegaRatio","uncertainRatio","buildLipidData","tryptophan","threonine","isoleucine","leucine","lysine","methionine","cystine","phenylalanine","tyrosine","valine","arginine","histidine","alanine","asparticAcid","glutamicAcid","glycine","proline","serine","buildProteinData","nutrientObject","url","i","threshold","removeNutrientObjectsWithNullValues","buildAggregatedNutrientDataList","Date","getTime","aggregated","compositeSubElements","totalPortionAmount","FoodSelectorModal","setCompositeList","onSubmit","compositeSelector","onSubmitComposite","onSubmitSingleItem","NotificationManager","selectedFoodItemCallback","onHide","aggregatedSelectedFoodItem","title","Modal","show","Body","newList","splice","Footer","ConfirmationDialog","okLabel","cancelLabel","confirmation","proceed","enableEscape","small","backdrop","keyboard","fullscreen","Title","React","confirmAction","createConfirmation","confirmable","autoRound","round","digits","roundFactor","Math","pow","roundToNextValue","chartMaxValue","multiple","remainder","roundUp","getNumberOfFixedLength","number","numberString","convertBooleanToDigit","convertStringToBoolean","color_yellow","color_red","color_brown","color_gray","color_chart_green_1","color_chart_green_2","color_chart_green_3","color_chart_yellow_1","color_chart_yellow_2","color_chart_yellow_3","color_chart_orange","color_chart_misc","default_chart_height","color_water","color_lipids","color_carbs","color_carbs_sugar","color_carbs_dietaryFibers","color_proteins","color_lipids_saturated","color_lipids_unsaturated_mono","color_lipids_unsaturated_poly","color_lipids_omega3","color_lipids_omega6","color_lipids_misc","color_ash","direct_compare_color1","direct_compare_color2","getBarChartOptions","unit","maxYValue","yAxis","display","min","max","getOptions","y","getPieChartOptions","scalesObject","maintainAspectRatio","responsive","plugins","fontSize","tooltip","getToolTips","legend","scales","enabled","callbacks","tooltipItem","formattedValue","PieChartConfigurationForm","Label","handleRadioButtonClick","defaultChecked","handleLegendCheckboxClick","detailsCheckboxAvailable","handleDetailsCheckboxClick","CustomLegend","borderLeft","legendData","element","indent","verticalSpace","separateNextElement","marginLeft","background","color","item","renderLegend","calculateChartHeight","currentDimension","directCompare","dataPage","calculateChartContainerHeight","BaseDataChart","lang","directCompareConfig","showDetailsProp","setChartType","setShowLegend","setShowDetails","directCompareUse","chartHeight","setChartHeight","updateChartConfig","currentConfig","newChartConfig","legendAllowed","renderSubChart","chartData","data","totalChartData","labels","datasets","ChartConfig","borderWidth","borderColor","createTotalChartData","nutrientChartData","totalValue","carbValue","carbValuePerc","sugarValuePerc","dietaryFibersPerc","lipidValuePerc","proteinsValuePerc","values","backgroundColors","createNutrientChartData","totalChartDataTitle","nutrientChartDataTitle","containerHeight","justifyContent","getLegendData","PAL_CATEGORY_1","PAL_CATEGORY_2","PAL_CATEGORY_3","PAL_CATEGORY_4","PAL_CATEGORY_5","PAL_CATEGORY_6","PAL_CATEGORY_7","getPalCategory","EnergyConstants","createPalCategoryName","languageLabel","energyLabel","EnergyDataChart","energy100g","Chart","register","annotationPlugin","averagePortion","energyPortion","createEnergyLevelChart","bmr","calculateBMR","totalEnergy","calculateTotalEnergyConsumption","annotation","annotations","line1","mode","scaleID","yMin","yMax","content","line2","determineDailyRequirement","dailyRequirementObject","ageGroupRequirements","senior","preSenior","midLifeAdult","youngAdult","youth","male","femalePregnant","female","femaleBreastFeeding","determineFoodRequirementRatio","amountInFood","dailyRequirement","determineProteinRequirementRatio","requirement","BarChartConfigurationForm","handleExpandCheckboxClick","handleSynchronize","MineralVitaminChart","chartConfigVitamins","chartConfigMinerals","portionType_vitamins","setPortionType_vitamins","expand100_vitamins","setExpand100_vitamins","chartType_minerals","setChartType_minerals","expand100_minerals","setExpand100_minerals","config","selectedSubChart","anyValueChanged","handleExpandCheckbox","requirementData","vitaminRequirementData","chartColor","barChartColor","createVitaminChartData","mineralRequirementData","createMineralChartData","maxValue","overallMaxValue","barChartProps","renderChartConfigurationForm","LipidsDataChart","setSubChart","lipidsData","totalLipidsAmount","handleChartSelectionChange","handleSubchartChange","omegaDataAvailabe","chartColType","Constants","renderChart","lipidsType","totalAmount","valueSaturated","valueUnsaturatedMono","valueUnsaturatedPoly","valueRemainder","valueOmega3","valueOmega6","valueUncertain","createOmegaChartData","ProteinDataChart","setPortionType","setExpand100","currentSetting","proteinRequirementData","createProteinChartData","dataExists","CarbsDataChart","currentSettings","chartIndex","detailChartData","valueGlucose","valueFructose","valueGalactose","valueSucrose","valueLactose","valueMaltose","valueStarch","valueMisc","createDetailChartData","basicChartData","totalCarbsAmount","valueSugar","valueDietaryFibers","warn","createBasicChartData","includes","getLegendBaseChart","getLegendDetailsChart","ChartPanel","selectedDataTab","chart","FoodDataTable","tableData","useHistory","striped","hover","isKey","dataField","InfoData","setContainerHeight","createRow","renderSubTable","bordered","padding","foodNameId","foodClassNameId","sourceName","sourceLine2","foodClassName","categoryId","categoryName","tableDataGeneral","getGeneralTableData","foodPortion","portionValue","tableDataPortion","getTableDataPortion","getTableDataCombinedFood","usdaLink","link","open","focus","FoodDataPageBody","HelpModal","helpText","data-dismiss","aria-label","closeHelpModal","dangerouslySetInnerHTML","__html","ChartMenuPanel","handlePageButtonClick","setDataPage","makeButtonLabel","buttonText","verticalArrangement","ButtonGroup","vertical","FoodDataPageHeader","history","helpModalId","setHelpModalId","fullName","setDisplayMode","enabledDisplayButtonClasses","disabledDisplayButtonClasses","chartButtonClasses","tablesButtonClasses","foodNamesList","languageId","entry","entries","languageSection","contentArray","getHelpText","sourceString","remainingItems","pathName","createTableObject","value_100g","valuePortion","calculatePortionData","MathService","value_portion","FoodDataPage","setTableData","updatePage","tableDataList","createBaseDataTable","createEnergyTable","createVitaminTable","firstNutrientData","createMineralTable","createLipidsTable","createCarbsTable","createProteinTable","newMode","datapage","makeFoodDataPanelComponent","component","FoodAnalyzerContainer","showFoodSelectorInitialState","openSelectorModal","showCompositeFoodSelectorInitialState","openCompositeSelectorModal","showFoodSelector","setShowFoodSelector","showFoodAggregatedFoodSelector","setShowAggregatedFoodSelector","ReactTooltip","rebuild","onSelectFoodItemSubmit","selectedFoodItemWithComponent","onNewFoodItemSelected","onCloseAllTabs","deleteIconEnabled","TabContainer","tabPanelClass","tabContentClass","buttonTab","border","verticalAlign","minHeight","alignItems","cursor","onTabClick","onTabChange","activeIndex","makeChartConfigUriString","chartObject","chartTypeKey","portionTypeKey","expand100Key","showLegendKey","showDetailsKey","subChartKey","getSubChartKey","subChartKey2","synchronizeKey","convertGeneralizedChartConfigToString","generalizedChartObject","makeGeneralizedChartConfig","getUpdatedChartConfig","chartConfigUriString","chartConfigFromUri","convertGeneralizedChartConfigStringToObject","barChartConfig","uriString","stringToParse","trim","chartTypeNumber","portionTypeNumber","subChartNumber","subChartNumber2","getSubChartFromKey","makeFoodItemDefaultUri","foodItemData","portionString","supplementValue","combineValue","getFoodItemUriData","fragments","portionDataString","split","convertPortionDataStringToObject","booleanData","convertUserDataObjectToString","convertUserDataStringToObject","userDataString","palValueInt","palCategory","getPalValue","prepareUriForParsing","uri","replace","separator","replacements","short","convertAggregatedUriStringToObject","replacementArray","replacement","JSON","parse","convertUriStringToSelectedFoodItem","newChartConfigData","USERDATA_ERROR_AGE","USERDATA_ERROR_WEIGHT","USERDATA_ERROR_SIZE","USERDATA_OK","checkUserDataValidity","FoodDataPanelContainer","queryString","search","equalOperator","indexOf","buildDataPanelPageFromURI","updateUriQuery","createDataFromUriQuery","query","uriData","objectToParse","selectedFoodItemString","stringify","chartConfigString","convertAggregatedDataJsonToUriString","selectedDisplayMode","foodItemDataString","makeFoodDataPanelDefaultUri","uriDataObject","foodItemUriData","parseFoodDataPanelDefaultUri","selectedTabIndex","newTabIndex","indexToSet","foodId","STATUS_FIRST_TIME","STATUS_NOT_UPDATED","STATUS_UPDATED","DirectCompareSelector","initialItem1","initialItem2","setSelectedFoodItem1","setSelectedFoodItem2","displayStatus","setDisplayStatus","updateSelectedFoodItem1","updateSelectedFoodItem2","renderFoodSelectorCard","foodSelectorNumber","styleClass","Card","CardDeck","buttonName","updateSelectedFoodItems","getMaximumValue","dataSet","dataSetKey","ratioValue","nullifyIncompleValues","dataSet1","dataSet2","DC_MineralVitaminChart","portionType_minerals","setPortionType_minerals","synchronizeVitamins","setSynchronizeVitamins","synchronizeMinerals","setSynchronizeMinerals","nutrientData1","nutrientData2","maxValue1","maxValue2","maxY","preconfigVitamins","preconfigMinerals","preconfig","preconfigFoodItem1","preconfigFoodItem2","DC_PieChart","initialConfig","setSubChart1","setSubChart2","configObject","pieChartConfig","handleShowLegendCheckbox","handleShowDetailsCheckbox","handleSubchart1Change","handleSubchart2Change","getConfigurationProps","chartProps","getChartComponent","resolvedName","DC_ProteinDataChart","setSynchronize","DC_EnergyChart","DirectCompareDataPanel","nameId1","nameId2","name1","name2","renderCharts","makeFoodItemUriData","parseDirectComparetUri","foodItemUriData1","foodItemUriData2","slice","getUpdatedDirectCompareChartConfig","DirectCompareContainer","initialFoodItem1","initialFoodItem2","buildDataObjectsFromURI","foodItem1DataUri","foodItem2DataUri","userDataUri","chartConfigUri","makeDirectCompareDataUri","foodItem1","foodItem2","foodClass1","foodClass2","FoodCompareApp","fontWeight","appPath","UserSettings","setAge","setSize","setWeight","setSex","setPregnant","setBreastFeeding","setPalValue","leisureSport","setLeisureSport","changePregnant","changeBreastFeeding","changeAdditionalPalPorts","checkInputValidity","validationResult","showMessage","message","renderTextField","callback","FormControl","value_age","value_size","value_weight","FormGroup","controlId","palCategories","userDataPalValue","palObject","descriptionCode","description","changePalValue","renderPalList","success","submitUserData","MAIL_INVALID_NAME","MAIL_NO_CONTENT","MAIL_CONTENT_TO_LONG","MAIL_INVALID_ADDRESS","mailRegex","checkMailValidity","mail","errors","address","match","checkLength","ContactForm","setName","mailAddress","setMailAdress","setMessage","characters","setCharacters","userVerified","setUserVerified","sendMail","reply_to","from_name","emailjs","send","then","result","info","charactersLeft","charactersMessage","preventDefault","mailData","validationErrors","errorMessage","rows","sitekey","render","verifyCallback","response","Sources","Versions","Impressum","impressumPath","impressum_de","impressum_en","ContactContainer","selectedMenu","setSelectedMenu","buttonStyle","ToggleButtonGroup","defaultValue","ToggleButton","renderSubMenu","WebPageContainer","Switch","path","exact","ga4react","GA4React","App","initialize","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","rootElement","document","getElementById","hasChildNodes","hydrate"],"mappings":"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","file":"static/js/main.83abd581.chunk.js","sourcesContent":["var map = {\n\t\"./Img-de-1.png\": 225,\n\t\"./Img-de-2.png\": 226,\n\t\"./Img-de-3.png\": 227,\n\t\"./Img-de-4.png\": 228,\n\t\"./Img-de-5.png\": 229,\n\t\"./Img-de-6.png\": 230,\n\t\"./Img-en-1.png\": 231,\n\t\"./Img-en-2.png\": 232,\n\t\"./Img-en-3.png\": 233,\n\t\"./Img-en-4.png\": 234,\n\t\"./Img-en-5.png\": 235,\n\t\"./Img-en-6.png\": 236\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 224;","export default __webpack_public_path__ + \"static/media/Img-de-1.fe6e2bdd.png\";","export default __webpack_public_path__ + \"static/media/Img-de-2.21ae70e3.png\";","export default __webpack_public_path__ + \"static/media/Img-de-3.9e1d1685.png\";","export default __webpack_public_path__ + \"static/media/Img-de-4.bd08575b.png\";","export default __webpack_public_path__ + \"static/media/Img-de-5.0ca87bcd.png\";","export default __webpack_public_path__ + \"static/media/Img-de-6.e2bd37af.png\";","export default __webpack_public_path__ + \"static/media/Img-en-1.5e9bd479.png\";","export default __webpack_public_path__ + \"static/media/Img-en-2.fa2f1ec7.png\";","export default __webpack_public_path__ + \"static/media/Img-en-3.ef4052ad.png\";","export default __webpack_public_path__ + \"static/media/Img-en-4.ef10584a.png\";","export default __webpack_public_path__ + \"static/media/Img-en-5.7459e0f8.png\";","export default __webpack_public_path__ + \"static/media/Img-en-6.5767bb06.png\";","import NameType from '../types/nutrientdata/NameType'\r\nimport Source from '../types/nutrientdata/Source'\r\nimport FoodItem from '../types/nutrientdata/FoodItem'\r\nimport DietaryRequirement from '../types/nutrientdata/DietaryRequirement'\r\n\r\nimport nutrientdata from \"./../static/data/nutrientdata_foodcompare_2.json\";\r\nimport FoodDataCorpus from \"../types/nutrientdata/FoodDataCorpus\"\r\nimport FoodClass from \"../types/nutrientdata/FoodClass\";\r\n\r\nexport function loadFoodDataCorpus(): FoodDataCorpus {\r\n\tconst categories = loadCategories()\r\n\tconst conditions = loadConditions()\r\n\tconst portionTypes = loadPortionTypes()\r\n\tconst sources = loadSources()\r\n\tconst foodNames = loadFoodNames()\r\n\tconst foodClasses = loadFoodClasses()\r\n\tconst nutrientData = loadFoodItems()\r\n\tconst dietaryRequirements = loadDietaryRequirements()\r\n\r\n\treturn {\r\n\t\tcategories: categories,\r\n\t\tconditions: conditions,\r\n\t\tportionTypes: portionTypes,\r\n\t\tsources: sources,\r\n\t\tfoodNames: foodNames,\r\n\t\tfoodClasses: foodClasses,\r\n\t\tfoodItems: nutrientData,\r\n\t\tdietaryRequirements: dietaryRequirements\r\n\t}\r\n}\r\n\r\nexport function loadConditions(): Array<NameType> {\r\n\treturn nutrientdata.conditions;\r\n}\r\n\r\nexport function loadPortionTypes(): Array<NameType> {\r\n\treturn nutrientdata.portionTypes;\r\n}\r\n\r\nexport function loadFoodNames(): Array<NameType> {\r\n\treturn nutrientdata.foodNames;\r\n}\r\n\r\nexport function loadSources(): Array<Source> {\r\n\treturn nutrientdata.sources;\r\n}\r\n\r\nexport function loadCategories(): Array<NameType> {\r\n\treturn nutrientdata.categories;\r\n}\r\n\r\nexport function loadFoodClasses(): Array<FoodClass> {\r\n\treturn nutrientdata.foodClasses;\r\n}\r\n\r\nexport function loadFoodItems(): Array<FoodItem> {\r\n\treturn nutrientdata.foodItems;\r\n}\r\n\r\nexport function loadDietaryRequirements(): DietaryRequirement {\r\n\treturn nutrientdata.dietaryRequirements;\r\n}","export const AMOUNT_PORTION = \"amount portion\"\r\nexport const GRAM = \"100 gram\"\r\n\r\nexport const CHART_TYPE_PIE = \"pie chart\"\r\nexport const CHART_TYPE_BAR = \"bar chart\"\r\n\r\nexport const CHART_VITAMINS = \"chart vitamins\"\r\nexport const CHART_MINERALS = \"chart minerals\"\r\n\r\nexport const DATA_MINERAL_CALCIUM = \"data calcium\";\r\nexport const DATA_MINERAL_IRON = \"data iron\";\r\nexport const DATA_MINERAL_MAGNESIUM = \"data magnesium\";\r\nexport const DATA_MINERAL_PHOSPHORUS = \"data phosphorous\";\r\nexport const DATA_MINERAL_POTASSIUM = \"data potassium\";\r\nexport const DATA_MINERAL_SODIUM = \"data sodium\";\r\nexport const DATA_MINERAL_ZINC = \"data zinc\";\r\nexport const DATA_MINERAL_SELENIUM = \"data selenium\";\r\nexport const DATA_MINERAL_MANGANESE = \"data manganese\";\r\nexport const DATA_MINERAL_COPPER = \"data copper\";\r\n\r\nexport const DATA_VITAMINS_A = \"data a\";\r\nexport const DATA_VITAMINS_B1 = \"data b1\";\r\nexport const DATA_VITAMINS_B2 = \"data b2\";\r\nexport const DATA_VITAMINS_B3 = \"data b3\";\r\nexport const DATA_VITAMINS_B5 = \"data b5\";\r\nexport const DATA_VITAMINS_B6 = \"data b6\";\r\nexport const DATA_VITAMINS_B9 = \"data b9\";\r\nexport const DATA_VITAMINS_B12 = \"data b12\";\r\nexport const DATA_VITAMINS_C = \"data c\";\r\nexport const DATA_VITAMINS_D = \"data d\";\r\nexport const DATA_VITAMINS_E = \"data e\";\r\nexport const DATA_VITAMINS_K = \"data k\";\r\n\r\nexport const DISPLAYMODE_TABLE = \"dtb\"\r\nexport const DISPLAYMODE_CHART = \"dct\"\r\n\r\nexport const CARBS_DATA_BASE = \"carbs data base chart\";\r\nexport const CARBS_DATA_DETAIL = \"carbs data detail chart\"\r\n\r\nexport const LIPIDS_DATA_BASE = \"lipids data base chart\";\r\nexport const LIPIDS_DATA_OMEGA = \"lipids data omega chart\"\r\n\r\nexport const PATH_DIRECT_COMPARE = \"/directcompare\";\r\nexport const PATH_FOODCOMPARE = \"/foodcompare\"\r\nexport const PATH_FOODDATA_PANEL = \"/datapanel\";\r\nexport const PATH_HOME = \"/home\";\r\nexport const PATH_CONTACT = \"/contact\";\r\nexport const PATH_MOBILE_APP = \"/mobileapp\";\r\nexport const PATH_USERSETTINGS = \"/usersettings\";\r\n\r\nexport const PORTION_KEY_INDIVIDUAL = 0\r\nexport const PORTION_KEY_100 = 1\r\n\r\nexport const LANGUAGE_DE = \"de\";\r\nexport const LANGUAGE_EN = \"en\";\r\n\r\nexport const SEX_MALE = \"sex male\"\r\nexport const SEX_FEMALE = \"sex female\"\r\n\r\nexport const SOURCE_SRLEGACY = \"srlegacy\"\r\nexport const SOURCE_FNDDS = \"fndds\"\r\n\r\nexport const TAB_BASE_DATA = \"basedata\"\r\nexport const TAB_ENERGY_DATA = \"energydata\"\r\nexport const TAB_VITAMIN_DATA = \"vitamindata\"\r\nexport const TAB_MINERAL_DATA = \"mineraldata\"\r\nexport const TAB_LIPIDS_DATA = \"lipidsdata\"\r\nexport const TAB_CARBS_DATA = \"carbsdata\"\r\nexport const TAB_PROTEINS_DATA = \"proteinsdata\"\r\nexport const TAB_INFO = \"infodata\"\r\n\r\nexport const QUERYKEY_DATAPANEL_ADD = \"add\"\r\nexport const QUERYKEY_DATAPANEL_ADD_COMPOSITE = \"composite\"\r\nexport const QUERYKEY_DATAPANEL_ITEM = \"item\"\r\nexport const QUERYKEY_DATAPANEL_AGGREGATED = \"aggregated\"\r\n\r\nexport const TAB_LIST = [TAB_BASE_DATA, TAB_ENERGY_DATA, TAB_VITAMIN_DATA, TAB_MINERAL_DATA, TAB_LIPIDS_DATA, TAB_CARBS_DATA, TAB_PROTEINS_DATA, TAB_INFO]","import {AMOUNT_PORTION, CARBS_DATA_BASE, CHART_TYPE_PIE, LIPIDS_DATA_BASE, SEX_MALE} from \"./Constants\";\r\nimport {ChartConfigData, DirectCompareChartConfigData} from \"../types/livedata/ChartConfigData\";\r\nimport {WindowDimension} from \"../service/WindowDimension\";\r\n\r\nexport const release = \"1.3.1\"\r\nexport const buildDate = \"2021-08-24\"\r\n\r\nexport const mobileAppPath = \"https://play.google.com/store/apps/details?id=com.parapps.foodcompareapp\"\r\n\r\nexport const maxMessageCharacters = 5000\r\n\r\nexport const minimalOmegaRatio = 0.3\r\nexport const maximalPortionSize = 5000\r\nexport const defaultPanelHeight = '468px'\r\n\r\nexport const smallFormsScreenSize: WindowDimension = {\r\n    width: 1200,\r\n    height: 800\r\n}\r\n\r\nexport const initialUserDataAge = 35\r\nexport const initialUserDataSize = 175\r\nexport const initialUserDataWeight = 75\r\nexport const initialUserDataSex = SEX_MALE\r\nexport const initialUserDataPregnant = false\r\nexport const initialUserDataBreastfeeding = false\r\nexport const initialUserDataPalValue = 1.6\r\nexport const initialUserDataLeisureSports = false\r\n\r\nexport const initialChartConfigData: ChartConfigData = {\r\n    baseChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        showDetails: false\r\n    },\r\n    vitaminChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    },\r\n    mineralChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    },\r\n    lipidsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        subChart: LIPIDS_DATA_BASE\r\n    },\r\n    carbsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        subChart: CARBS_DATA_BASE\r\n    },\r\n    proteinChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    }\r\n}\r\n\r\nexport const initialDirectCompareConfigData: DirectCompareChartConfigData = {\r\n    baseChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        showDetails: false\r\n    },\r\n    vitaminChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    },\r\n    mineralChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    },\r\n    lipidsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        subChart1: LIPIDS_DATA_BASE,\r\n        subChart2: LIPIDS_DATA_BASE\r\n    },\r\n    carbsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        subChart1: CARBS_DATA_BASE,\r\n        subChart2: CARBS_DATA_BASE\r\n    },\r\n    proteinChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    }\r\n}","import NameType from \"../types/nutrientdata/NameType\";\r\n\r\nexport default function getName(nameType: NameType, language: string): string {\r\n    if(language === 'de') {\r\n        return nameType.germanName\r\n    } else {\r\n        return nameType.englishName\r\n    }\r\n}\r\n\r\n\r\n","import NameType from \"../../types/nutrientdata/NameType\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport getName from \"../LanguageService\";\r\n\r\nexport function getReactSelectOptionsList(nameTypeList: Array<NameType>, language: string, sort?: boolean): Array<ReactSelectOption> {\r\n    const names: Array<string> = []\r\n\r\n    if(nameTypeList && nameTypeList.length > 0) {\r\n        nameTypeList.forEach(nameType => names.push(getName(nameType, language)))\r\n    }\r\n\r\n    if(sort) {\r\n        names.sort()\r\n    }\r\n\r\n    const reactSelectOptions: Array<ReactSelectOption> = []\r\n    names.forEach((name, index) => {\r\n        reactSelectOptions.push({\r\n            value: index,\r\n            label: name\r\n        })\r\n    })\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getNameFromFoodNameList(foodNameList: Array<NameType>, id: number, language: string): string | null {\r\n    const nameType = foodNameList.find(nameType => nameType.id === id)\r\n\r\n    if(nameType) {\r\n        return getName(nameType, language)\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\n/*\r\n * General method to shorten the name of long food name.\r\n * name: The food name, e.g. \"Linen oil (at least 60 % lineul acid)\"\r\n * maxLength: The maximum length of the food name.\r\n */\r\nexport function shortenName(name, maxLength) {\r\n    if(name.length <= maxLength) {\r\n        return name;\r\n    }\r\n\r\n    if(name.includes(\"(\")) {\r\n        const indexOfBrace = name.indexOf(\"(\");\r\n        if(indexOfBrace >= maxLength-6) {\r\n            return name.substring(0, indexOfBrace-1).trim() + \"...\";\r\n        }\r\n    }\r\n\r\n    return name.substring(0, maxLength-3).trim() + \"...\";\r\n}","import {Component, createContext, ReactElement} from \"react\";\r\nimport * as NutrientDataImportService from \"../service/NutrientDataImportService\";\r\nimport FoodDataCorpus from \"../types/nutrientdata/FoodDataCorpus\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationData} from \"../types/livedata/ApplicationData\";\r\nimport {DISPLAYMODE_CHART, SOURCE_SRLEGACY, TAB_BASE_DATA} from \"../config/Constants\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    initialChartConfigData,\r\n    initialDirectCompareConfigData,\r\n    initialUserDataAge,\r\n    initialUserDataBreastfeeding,\r\n    initialUserDataLeisureSports,\r\n    initialUserDataPalValue,\r\n    initialUserDataPregnant,\r\n    initialUserDataSex,\r\n    initialUserDataSize,\r\n    initialUserDataWeight\r\n} from \"../config/ApplicationSetting\";\r\nimport {getNameFromFoodNameList} from \"../service/nutrientdata/NameTypeService\";\r\nimport NameType from \"../types/nutrientdata/NameType\";\r\nimport {ChartConfigData, DirectCompareChartConfigData} from \"../types/livedata/ChartConfigData\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\n\r\nexport interface ApplicationDataContext {\r\n    foodDataCorpus: FoodDataCorpus\r\n    applicationData: ApplicationData\r\n    userData: UserData\r\n    debug: boolean\r\n    ready: boolean\r\n    useAsMobile: Boolean | null\r\n}\r\n\r\nexport interface ApplicationContext extends ApplicationDataContext {\r\n\tsetUserData: (userData: UserData) => void\r\n\tsetPreferredSource: (string) => void\r\n    setMobileUsage: (boolean) => void\r\n\tsetFoodSelectorConfig: (selectedCategory: ReactSelectOption | null, sourceSupplement: boolean, sourceCombine: boolean) => void\r\n\tsetFoodDataPanelData: {\r\n\t\tsetSelectedFoodTab: (number) => void\r\n\t\tsetSelectedDataPage: (string) => void\r\n        setSelectedDisplayMode: (string) => void\r\n\t\taddItemToFoodDataPanel: (selectedFoodItem: SelectedFoodItem) => void\r\n\t\tremoveItemFromFoodDataPanel: (number) => void\r\n\t\tremoveAllItemsFromFoodDataPanel: () => void\r\n\t\tupdateAllFoodItemNames: (foodNames: Array<NameType>, newLanguage: string) => void\r\n\t\tupdateFoodDataPanelChartConfig: (chartConfig: ChartConfigData) => void\r\n\t}\r\n\tsetDirectCompareData: {\r\n\t\tupdateDirectCompareChartConfig: (chartConfig: DirectCompareChartConfigData) => void\r\n    \tsetSelectedDirectCompareItems: (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => void\r\n    \tsetSelectedDirectCompareDataPage: (selectedPage: string) => void\r\n\t}\r\n\t\r\n}\r\n\r\nexport const ApplicationDataContextStore = createContext<ApplicationContext | null>(null)\r\n\r\nexport default class ApplicationDataContextProvider extends Component<any, ApplicationDataContext> {\r\n\r\n    setSelectedFoodDataPanelTab = (selectedTab: number) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItemIndex: selectedTab}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedDisplayMode = (displayMode: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, displayMode: displayMode}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedFoodDataPanelPage = (selectedPage: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedDataPage: selectedPage}\r\n            }\r\n        }))\r\n    }\r\n\r\n    addItemToFoodDataPanel = (foodItem: SelectedFoodItem) => {\r\n        const newItems = Object.assign(this.state.applicationData.foodDataPanel.selectedFoodItems)\r\n        newItems.push(foodItem)\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItems: newItems}\r\n            }\r\n        }))\r\n    }\r\n\r\n    removeItemFromFoodDataPanel = (foodItemId: number) => {\r\n        const newItems = this.state.applicationData.foodDataPanel.selectedFoodItems.filter(\r\n            selectedFoodItem => selectedFoodItem.foodItem.id !== foodItemId\r\n        )\r\n\r\n        let newIndex = 0\r\n        let currentIndex = this.state.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n        if (newItems.length > 0) {\r\n            if (currentIndex < newItems.length) {\r\n                newIndex = currentIndex\r\n            } else {\r\n                newIndex = newItems.length - 1\r\n            }\r\n        }\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: newItems,\r\n                    selectedFoodItemIndex: newIndex\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    removeAllItemsFromFoodDataPanel = () => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: [],\r\n                    selectedFoodItemIndex: 0\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateAllFoodItemNames = (foodNames: Array<NameType>, newLanguage: string) => {\r\n        const selectedFoodItems = this.state.applicationData.foodDataPanel.selectedFoodItems\r\n        const newFoodItems = selectedFoodItems.map(selectedFoodItem => {\r\n            const foodName = selectedFoodItem.foodItem.nameId\r\n                ? getNameFromFoodNameList(foodNames, selectedFoodItem.foodItem.nameId, newLanguage)\r\n                : \"Individual\"\r\n            if (foodName) {\r\n                selectedFoodItem = {...selectedFoodItem, tab: foodName}\r\n            }\r\n            return selectedFoodItem\r\n        })\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: newFoodItems,\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateFoodDataPanelChartConfig = (chartConfig: ChartConfigData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    chartConfigData: chartConfig\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n\r\n    setSelectedDirectCompareItems = (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...prevState.applicationData.directCompareDataPanel,\r\n                    selectedFoodItem1: selectedFoodItem1,\r\n                    selectedFoodItem2: selectedFoodItem2\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedDirectCompareDataPage = (selectedPage: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...prevState.applicationData.directCompareDataPanel,\r\n                    selectedDataPage: selectedPage\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateDirectCompareChartConfig = (chartConfig: DirectCompareChartConfigData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...this.state.applicationData.directCompareDataPanel,\r\n                    directCompareConfigChart: chartConfig\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    setUserData = (userData: UserData) => {\r\n        this.setState(() => ({\r\n            userData: {\r\n\t\t\t\t...userData\r\n\t\t\t}\r\n        }))\r\n    }\r\n\r\n\r\n    setPreferredSource = (source: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData, preferredSource: source\r\n            }\r\n        }))\r\n    }\r\n\r\n\r\n    setFoodSelectorConfig = (selectedCategory: ReactSelectOption | null, sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData, foodSelector: {\r\n                        ...prevState.applicationData.foodSelector,\r\n                        selectedCategory: selectedCategory,\r\n                        sourceSupplement: sourceSupplement,\r\n                        sourceCombine: sourceCombine\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n\r\n    state: ApplicationDataContext = {\r\n        foodDataCorpus: {\r\n            categories: [],\r\n            conditions: [],\r\n            portionTypes: [],\r\n            sources: [],\r\n            foodNames: [],\r\n            foodClasses: [],\r\n            foodItems: [],\r\n            dietaryRequirements: null,\r\n        },\r\n        applicationData: {\r\n            foodDataPanel: {\r\n                selectedFoodItems: [],\r\n                selectedDataPage: TAB_BASE_DATA,\r\n                displayMode: DISPLAYMODE_CHART,\r\n                selectedFoodItemIndex: 0,\r\n                chartConfigData: initialChartConfigData,\r\n            },\r\n            directCompareDataPanel: {\r\n                selectedFoodItem1: null,\r\n                selectedFoodItem2: null,\r\n                selectedDataPage: TAB_BASE_DATA,\r\n                directCompareConfigChart: initialDirectCompareConfigData\r\n            },\r\n            foodSelector: {\r\n                selectedCategory: null,\r\n                sourceSupplement: true,\r\n                sourceCombine: false,\r\n            },\r\n            preferredSource: SOURCE_SRLEGACY,\r\n        },\r\n        userData: {\r\n            age: initialUserDataAge,\r\n            size: initialUserDataSize,\r\n            weight: initialUserDataWeight,\r\n            sex: initialUserDataSex,\r\n            pregnant: initialUserDataPregnant,\r\n            breastFeeding: initialUserDataBreastfeeding,\r\n            palValue: initialUserDataPalValue,\r\n            leisureSports: initialUserDataLeisureSports,\r\n            initialValues: true\r\n        },\r\n        debug: true,\r\n        ready: false,\r\n        useAsMobile: null\r\n    }\r\n\r\n    componentWillMount() {\r\n        const foodDataCorpus = NutrientDataImportService.loadFoodDataCorpus()\r\n        this.setState({\r\n            foodDataCorpus: foodDataCorpus,\r\n            ready: true\r\n        })\r\n    }\r\n\r\n    render(): ReactElement {\r\n\t\tconst value = {\r\n\t\t\tapplicationData: this.state.applicationData,\r\n\t\t\tfoodDataCorpus: this.state.foodDataCorpus,\r\n\t\t\tuserData: this.state.userData,\r\n\t\t\tdebug: this.state.debug,\r\n\t\t\tready: this.state.ready,\r\n            useAsMobile: this.state.useAsMobile,\r\n\t\t\tsetUserData: this.setUserData,\r\n\t\t\tsetPreferredSource: this.setPreferredSource,\r\n            setMobileUsage: (usage: boolean) => {this.setState({...this.state, useAsMobile: usage})},\r\n\t\t\tsetFoodDataPanelData: {\r\n                setSelectedFoodTab: this.setSelectedFoodDataPanelTab,\r\n                setSelectedDataPage: this.setSelectedFoodDataPanelPage,\r\n                setSelectedDisplayMode: this.setSelectedDisplayMode,\r\n                addItemToFoodDataPanel: this.addItemToFoodDataPanel,\r\n                removeItemFromFoodDataPanel: this.removeItemFromFoodDataPanel,\r\n                removeAllItemsFromFoodDataPanel: this.removeAllItemsFromFoodDataPanel,\r\n                updateAllFoodItemNames: this.updateAllFoodItemNames,\r\n                updateFoodDataPanelChartConfig: this.updateFoodDataPanelChartConfig\r\n\t\t\t},\r\n\t\t\tsetDirectCompareData: {\r\n                updateDirectCompareChartConfig: this.updateDirectCompareChartConfig,\r\n                setSelectedDirectCompareDataPage: this.setSelectedDirectCompareDataPage,\r\n                setSelectedDirectCompareItems: this.setSelectedDirectCompareItems\t\t\t\t\r\n\t\t\t},\r\n\t\t\tsetFoodSelectorConfig: this.setFoodSelectorConfig\r\n\t\t}\r\n\t\t\r\n        return (\r\n            <ApplicationDataContextStore.Provider value={value}>\r\n                {this.props.children}\r\n            </ApplicationDataContextStore.Provider>\r\n        )\r\n    }\r\n\r\n}\r\n","import {createContext, useState} from \"react\";\r\nimport {LANGUAGE_DE, LANGUAGE_EN} from \"../config/Constants\";\r\n\r\nexport interface LanguageProviderProps {\r\n    language: string\r\n    userLanguageChange: (selectedLanguage: string) => void\r\n}\r\n\r\nexport const LanguageContext = createContext<LanguageProviderProps>({\r\n    language: 'en',\r\n    userLanguageChange: (selectedLanguage) => {return 'en'}\r\n});\r\n\r\nexport function LanguageProvider({ children }) {\r\n    const userLanguage = navigator.language;\r\n    const preferredLanguage = userLanguage === 'de' || userLanguage === 'de-DE' ? LANGUAGE_DE : LANGUAGE_EN\r\n    const [language, setLanguage] = useState(preferredLanguage);\r\n\r\n\r\n    const userLanguageChange = (selectedLanaguage: string): void => {\r\n        const newLanguage = selectedLanaguage ? selectedLanaguage : LANGUAGE_EN\r\n        setLanguage(newLanguage);\r\n    }\r\n\r\n    const provider: LanguageProviderProps = {\r\n        language,\r\n        userLanguageChange\r\n    };\r\n\r\n    return (\r\n        <LanguageContext.Provider value={provider}>\r\n            {children}\r\n        </LanguageContext.Provider>\r\n    );\r\n};\r\n\r\n\r\n\r\n","export const applicationStrings = {\r\n    button_add: {\r\n        de: 'Hinzufügen',\r\n        en: 'Add'\r\n    },\r\n    button_cancel: {\r\n        de: 'Abbrechen',\r\n        en: 'Cancel'\r\n    },\r\n    button_change_to_chart_mode: {\r\n        de: 'Daten als Diagramm anzeigen',\r\n        en: 'Display data as chart'\r\n    },\r\n    button_close: {\r\n        de: 'Schließen',\r\n        en: 'Close'\r\n    },\r\n    button_getstarted_1: {\r\n        de: 'Verschiedene Lebensmittel analysieren',\r\n        en: 'Analyze different foods'\r\n    },\r\n    button_getstarted_2: {\r\n        de: 'Komplexe Lebensmittel zusammenstellen',\r\n        en: 'Create a composite food list'\r\n    },\r\n    button_getstarted_3: {\r\n        de: 'Zwei Lebensmittel gegenüberstellen',\r\n        en: 'Compare two foods with each other'\r\n    },\r\n    button_no: {\r\n        de: 'Nein',\r\n        en: 'No'\r\n    },\r\n    button_select: {\r\n        de: 'Auswählen',\r\n        en: 'Show'\r\n    },\r\n    button_show: {\r\n        de: 'Anzeigen',\r\n        en: 'Show'\r\n    },\r\n    button_send: {\r\n        de: \"Senden\",\r\n        en: \"Send\"\r\n    },\r\n    button_submit: {\r\n        de: 'Übernehmen',\r\n        en: 'Submit'\r\n    },\r\n    button_update: {\r\n        de: \"Aktualisieren\",\r\n        en: \"Update\"\r\n    },\r\n    button_yes: {\r\n        de: 'Ja',\r\n        en: 'Yes'\r\n    },\r\n    checkbox_chartoption_showLegend: {\r\n        de: 'Legende anzeigen',\r\n        en: 'Show legend'\r\n    },\r\n    checkbox_chartoption_showDetails: {\r\n        de: 'Details anzeigen',\r\n        en: 'Show details'\r\n    },\r\n    checkbox_english: {\r\n        de: 'Englisch',\r\n        en: 'English'\r\n    },\r\n    checkbox_expand100g: {\r\n        de: 'Auf 100 % erweitern',\r\n        en: 'Expand to 100 %'\r\n    },\r\n    checkbox_german: {\r\n        de: 'Deutsch',\r\n        en: 'German'\r\n    },\r\n    checkbox_synchronize: {\r\n        de: 'Synchronisieren',\r\n        en: 'Synchronize'\r\n    },\r\n    confirm_close_all_tabs: {\r\n        de: 'Sollen wirklich alle Lebensmittel-Tabs geschlossen werden?',\r\n        en: 'Really close all food tabs?'\r\n    },\r\n    device_detection_hint: {\r\n        de: 'Die Website Food Compare ist nicht für Mobilgeräte und sehr kleine Bildschirmgrößen geeignet. Stattdessen bieten wir eine App für Android-Geräte, welche einen Großteil der Funktionalität von Food Compare umfasst.',\r\n        en: 'This website is not designed for mobile devices and very small screen sizes. Instead, we provide an app for Android devices that comprises most of the functionality provided by the website.',\r\n    },\r\n    device_detection_question: {\r\n        de: 'Möchten Sie die Android App verwenden?',\r\n        en: 'Do you want to use the Android App?',\r\n    },\r\n    direct_compare_text: {\r\n        de: 'Wählen Sie zwei Lebensmittel aus den beiden Auswahlboxen, um diese miteinander zu vergleichen.',\r\n        en: 'Pick two food elements from the two selectors in order to compare them with each other.'\r\n      },\r\n    home_carousel_0: {\r\n        de: 'Vitamine in Lebensmitteln im Vergleich zum Tagesbedarf',\r\n        en: 'Vitamins in food compared to daily requirements'\r\n    },\r\n    home_carousel_1: {\r\n        de: 'Mineralstoffe in Lebensmitteln im Vergleich zum Tagesbedarf',\r\n        en: 'Minerals in food compared to daily requirements'\r\n    },\r\n    home_carousel_2: {\r\n        de: 'Nährstoffzusammensetzung in einem Lebensmittel',\r\n        en: 'Food composition of nutrients'\r\n    },\r\n    home_carousel_3: {\r\n        de: 'Verteilung der Fettsäuren (gesättigt / ungesättigt)',\r\n        en: 'Distribution of fatty acids (saturated / unsaturated)'\r\n    },\r\n    home_carousel_4: {\r\n        de: 'In Nahrungsmitteln enthaltene Aminosäuren',\r\n        en: 'Amino acids conainted in foods'\r\n    },\r\n    home_carousel_5: {\r\n        de: 'Gegenüberstellung zweier Lebensmittel',\r\n        en: 'Comparing two foods'\r\n    },\r\n    home_text_1: {\r\n        de: 'Food Compare ist ein Webprojekt zur grafischen Darstellung der Zusammensetzung von Lebensmitteln. Während klassische Quellen die enthaltenen Inhaltsstoffe meist nur in tabellarischer Form angeben, verwendet Food Compare Grafiken und Diagramme, um den Gehalt an Vitaminen und Mineralstoffen, Kohlenhydraten, Fettsäuren und Eiweißen (Proteinen) leichter und übersichtlich darzustellen.',\r\n        en: 'Food Compare is a web project to visually display information about food composition. While conventional resources commonly display nutrient data in tables, Food Compare provides charts and graphics to allow users a better understanding of the containing nutrients (carbohydrates, lipids, proteins) as well as vitamins and minerals.'\r\n    },\r\n    home_text_2: {\r\n        de: 'Das Hauptaugenmerk von Food Compare gilt jedoch nicht nur der Veranschaulichung einzelner Nahrungsmittel, sondern der Vergleichbarkeit von Nährstoffen, Vitaminen und Mineralen in Lebensmittels. Dazu können beliebig viele Tabs geöffnet und Lebensmittel damit leicht miteinander verglichen werden. So lassen sich bspw. auf einfache Weise der Vitamingehalt von einzelnen Obstsorten vergleichen, oder die Aufteilung von Kohlenhydraten, Fetten und Eiweißen zwischen Grundnahrungsmitteln. Dabei erlaubt die Anwendung auch das Zusammenstellen von komplexen Menüs, deren Gesamtgehalt an Nährstoffen, Vitaminen und Mineralstoffen dann berechnet wird.',\r\n        en: 'The primary focus of Food Compare is to visually compare the composition and contents of different foods, though. Food items can be opened in different tabs so that nutrients, vitamins or minerals can be easily compare. As an example, users can compare the containing vitamins between different fruits or the nutrient composition between staple foods. In addition, the application allows to aggregate foods to more complex menus and will then calculate the overall amount of nutrients, vitamins and minerals in that menu.'\r\n    },\r\n    home_text_3: {\r\n        de: 'Um die Nährstoffdiagramme zweier Lebensmittel auf einen Blick miteinander vergleichen zu können, gibt es seit der Version 1.2 nun auch einen zusätzlichen Bereich, in denen die Diagramme entsprechend nebeneinander angeordnet sind. Einige Datenseiten wie Vitamine und Mineralstoffe lassen sich dabei auch synchronisieren, so dass eine einheitliche Skalierung der Diagramme stattfindet und nur die Daten angezeigt werden, welche für beide Lebensmittel vorliegen.',\r\n        en: 'In order to compare nutrient charts of two foods at a glance, an additional page was added in version 1.2 where nutrient charts are placed next to each other. Some data pages like vitamins and minerals can also be synchronized, which means that the charts use a unique scaling and only display data that is available in both food elements.'\r\n    },\r\n    label_amount: {\r\n        de: 'Menge (Gramm)',\r\n        en: 'Amount (gram)'\r\n    },\r\n    label_amount_short: {\r\n        de: 'Gramm',\r\n        en: 'Gram'\r\n    },\r\n    label_category: {\r\n        de: 'Kategorie',\r\n        en: 'Category'\r\n    },\r\n    label_charttype: {\r\n        de: 'Diagrammart',\r\n        en: 'Chart type'\r\n    },\r\n    label_charttype_pie: {\r\n        de: 'Tortendiagramm',\r\n        en: 'Pie chart'\r\n    },\r\n    label_charttype_bar: {\r\n        de: 'Balkendiagramm',\r\n        en: 'Bar chart'\r\n    },\r\n    label_charttype_carbs_base: {\r\n        de: 'Allgemeine Werte',\r\n        en: 'Basic data'\r\n    },\r\n    label_charttype_carbs_detail: {\r\n        de: 'Detailwerte',\r\n        en: 'Detailed data'\r\n    },\r\n    label_charttype_energy: {\r\n        de: 'Grundumsatz und Gesamtumsatz (Energie)',\r\n        en: 'BMR and Energy Expenditure'\r\n    },\r\n    label_charttype_lipids_base: {\r\n        de: 'Allgemeine Werte',\r\n        en: 'Basic data'\r\n    },\r\n    label_charttype_lipids_base_title: {\r\n        de: 'Allgemeine Verteilung der Fettsäuren',\r\n        en: 'Basic distributions of fatty acids'\r\n    },\r\n    label_charttype_lipids_omega: {\r\n        de: 'Omega-Werte',\r\n        en: 'Omega data'\r\n    },\r\n    label_charttype_lipids_omega_title: {\r\n        de: 'Allgemeine Verteilung der Omega-3/6-Fettsäuren',\r\n        en: 'Basic distributions of Omega 3/6 acids'\r\n    },\r\n    label_charttype_minerals: {\r\n        de: 'Minerale (im Vgl. zum Tagesbedarf)',\r\n        en: 'Minerals (related to daily requirements)'\r\n    },\r\n    label_charttype_proteins: {\r\n        de: 'Proteine (im Vgl. zum Tagesbedarf)',\r\n        en: 'Proteins  (related to daily requirements)'\r\n    },\r\n    label_charttype_vitamins: {\r\n        de: 'Vitamine (im Vgl. zum Tagesbedarf)',\r\n        en: 'Vitamins (related to daily requirements)'\r\n    },\r\n    label_chart_bmr: {\r\n        de: 'Grundumsatz',\r\n        en: 'Basal Metabolic Rate (BMR)'\r\n    },\r\n    label_chart_energyExpenditure: {\r\n        de: 'Gesamtumsatz',\r\n        en: 'Energy Expenditure'\r\n    },\r\n    label_chart_nutrientComposition: {\r\n        de: 'Nährstoffzusammensetzung',\r\n        en: 'Nutrient Composition'\r\n    },\r\n    label_chart_totalComposition: {\r\n        de: 'Gesamtzusammensetzung',\r\n        en: 'Total Composition'\r\n    },\r\n    label_datatype: {\r\n        de: 'Datentyp',\r\n        en: 'Data type'\r\n    },\r\n    label_food: {\r\n        de: \"Lebensmittel\",\r\n        en: \"Food\"\r\n    },\r\n    label_foodclass: {\r\n        de: 'Lebensmittel',\r\n        en: 'Food Class'\r\n    },\r\n    label_fooditem: {\r\n        de: 'Typ',\r\n        en: 'Food type'\r\n    },\r\n    label_foodselector: {\r\n        de: 'Lebensmittelauswahl',\r\n        en: 'Food Selector'\r\n    },\r\n    label_foodselector_composite: {\r\n        de: 'Zusammenstellung eines Lebensmittels',\r\n        en: 'Composite food generation'\r\n    },\r\n    label_getStarted: {\r\n      de: \"Jetzt beginnen...\",\r\n      en: \"Get started...\"\r\n    },\r\n    label_info: {\r\n        de: 'Info',\r\n        en: 'Info'\r\n    },\r\n    label_info_category: {\r\n        de: 'Kategorie',\r\n        en: 'Category'\r\n    },\r\n    label_info_foodClass: {\r\n        de: 'Lebensmittel-Klasse',\r\n        en: 'Food Class'\r\n    },\r\n    label_info_foodId: {\r\n        de: 'Lebensmittel ID',\r\n        en: 'Food Id'\r\n    },\r\n    label_info_foodName: {\r\n        de: 'Lebensmittel',\r\n        en: 'Food'\r\n    },\r\n    label_info_portion: {\r\n        de: 'Portionsdaten',\r\n        en: 'Portion data'\r\n    },\r\n    label_info_portionType: {\r\n        de: 'Portionstyp',\r\n        en: 'Portion type'\r\n    },\r\n    label_info_preparation: {\r\n        de: 'Zubereitungsart',\r\n        en: 'Preparation type'\r\n    },\r\n    label_info_source: {\r\n        de: 'Quelle',\r\n        en: 'Source'\r\n    },\r\n    label_language: {\r\n        de: 'Sprache',\r\n        en: 'Language'\r\n    },\r\n    label_mail_name: {\r\n      de: \"Name\",\r\n      en: \"Name\"\r\n    },\r\n    label_mail_address: {\r\n        de: \"Mail-Adresse\",\r\n        en: \"Mail address\"\r\n    },\r\n    label_mail_message: {\r\n        de: \"Ihre Nachricht\",\r\n        en: \"Your message\"\r\n    },\r\n    label_mail_characters_left: {\r\n        de: \"Noch /xx/ Zeichen verbleibend\",\r\n        en: \"/xx/ characters left\"\r\n    },\r\n    label_mail_too_long: {\r\n        de: \"Nachricht ist zu lang\",\r\n        en: \"Message too long\"\r\n    },\r\n    label_mail_error_name: {\r\n        de: \"Geben Sie bitte einen gültigen Namen ein.\",\r\n        en: \"Please enter a valid name.\"\r\n    },\r\n    label_mail_error_mailaddress: {\r\n        de: \"Geben Sie bitte eine gültige Mail-Adresse ein.\",\r\n        en: \"Please enter a valid mail address.\"\r\n    },\r\n    label_mail_error_nocontent: {\r\n        de: \"Geben Sie bitte eine Nachricht ein.\",\r\n        en: \"Please specify a message.\"\r\n    },\r\n    label_mail_error_content_too_long: {\r\n        de: \"Die eingegebene Nachricht ist zu lang.\",\r\n        en: \"The specified message is too long.\"\r\n    },\r\n    label_mail_error_verification: {\r\n        de: \"Bitte verifizieren, dass Sie kein Roboter sind.\",\r\n        en: \"Please verify that you are not a robot.\"\r\n    },\r\n    label_noData: {\r\n        de: 'Keine Daten vorhanden',\r\n        en: 'No data available'\r\n    },\r\n    label_nutrient_ash: {\r\n        de: 'Reststoffe',\r\n        en: 'Ash'\r\n    },\r\n    label_nutrient_carbohydrates: {\r\n        de: 'Kohlenhydrate',\r\n        en: 'Carbohydrates'\r\n    },\r\n    label_nutrient_carbohydrates_short: {\r\n        de: 'Kohlenhyd.',\r\n        en: 'Carbs'\r\n    },\r\n    label_nutrient_carbohydrates_fructose: {\r\n        de: 'Fruktose',\r\n        en: 'Fructose'\r\n    },\r\n    label_nutrient_carbohydrates_galactose: {\r\n        de: 'Galaktose',\r\n        en: 'Galactose'\r\n    },\r\n    label_nutrient_carbohydrates_glucose: {\r\n        de: 'Glukose (Traubenzucker)',\r\n        en: 'Glucose'\r\n    },\r\n    label_nutrient_carbohydrates_lactose: {\r\n        de: 'Laktose',\r\n        en: 'Lactose'\r\n    },\r\n    label_nutrient_carbohydrates_maltose: {\r\n        de: 'Maltose',\r\n        en: 'Maltose'\r\n    },\r\n    label_nutrient_carbohydrates_starch: {\r\n        de: 'Stärke',\r\n        en: 'Starch'\r\n    },\r\n    label_nutrient_carbohydrates_sucrose: {\r\n        de: 'Sukrose',\r\n        en: 'Sucrose'\r\n    },\r\n    label_nutrient_dietaryFibers: {\r\n        de: 'Ballaststoffe',\r\n        en: 'Dietary fibers'\r\n    },\r\n    label_nutrient_dietaryFibers_short: {\r\n        de: 'Ballastst.',\r\n        en: 'Dietary fib.'\r\n    },\r\n    label_nutrient_energy: {\r\n        de: 'Energie',\r\n        en: 'Energy'\r\n    },\r\n    label_nutrient_lipids: {\r\n        de: 'Fett',\r\n        en: 'Fats'\r\n    },\r\n    label_nutrient_lipids_saturated: {\r\n        de: 'Gesättigte Fettsäuren',\r\n        en: 'Saturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated: {\r\n        de: 'Ungesättigte Fettsäuren',\r\n        en: 'Unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_mono: {\r\n        de: 'Einfach ungesättigte Fettsäuren',\r\n        en: 'Mono-unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_poly: {\r\n        de: 'Mehrfach ungesättigte Fettsäuren',\r\n        en: 'Poly-unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_transfattyAcids: {\r\n        de: 'Transfettsäuren',\r\n        en: 'Transfatty acids'\r\n    },\r\n    label_nutrient_lipids_omega3: {\r\n        de: 'Omega-3-Fettsäuren',\r\n        en: 'Omega-3 fatty acids'\r\n    },\r\n    label_nutrient_lipids_omega6: {\r\n        de: 'Omega-6-Fettsäuren',\r\n        en: 'Omega-6 fatty acids'\r\n    },\r\n    label_nutrient_lipids_cholesterol: {\r\n        de: 'Cholesterin',\r\n        en: 'Cholesterol'\r\n    },\r\n    label_nutrient_min: {\r\n        de: 'Mineralstoffe',\r\n        en: 'Minerals'\r\n    },\r\n    label_nutrient_min_calcium: {\r\n        de: 'Kalzium',\r\n        en: 'Calcium'\r\n    },\r\n    label_nutrient_min_copper: {\r\n        de: 'Kupfer',\r\n        en: 'Copper'\r\n    },\r\n    label_nutrient_min_iron: {\r\n        de: 'Eisen',\r\n        en: 'Iron'\r\n    },\r\n    label_nutrient_min_magnesium: {\r\n        de: 'Magnesium',\r\n        en: 'Magnesium'\r\n    },\r\n    label_nutrient_min_manganese: {\r\n        de: 'Mangan',\r\n        en: 'Manganese'\r\n    },\r\n    label_nutrient_min_phosphorus: {\r\n        de: 'Phosphor',\r\n        en: 'Phosphorus'\r\n    },\r\n    label_nutrient_min_potassimum: {\r\n        de: 'Kalium',\r\n        en: 'Potassimum'\r\n    },\r\n    label_nutrient_min_selenium: {\r\n        de: 'Selen',\r\n        en: 'Selenium'\r\n    },\r\n    label_nutrient_min_sodium: {\r\n        de: 'Natrium',\r\n        en: 'Sodium'\r\n    },\r\n    label_nutrient_min_zinc: {\r\n        de: 'Zink',\r\n        en: 'Zinc'\r\n    },\r\n    label_nutrient_omega3: {\r\n        de: 'Omega-3-Fettsäuren',\r\n        en: 'Omega-3 Fatty acids'\r\n    },\r\n    label_nutrient_omega6: {\r\n        de: 'Omega-6-Fettsäuren',\r\n        en: 'Omega-6 Fatty acids'\r\n    },\r\n    label_nutrient_proteins: {\r\n        de: 'Eiweiß',\r\n        en: 'Proteins'\r\n    },\r\n    label_nutrient_proteins_alanine: {\r\n        de: 'Alanin',\r\n        en: 'Alanine'\r\n    },\r\n    label_nutrient_proteins_arginine: {\r\n        de: 'Arginin',\r\n        en: 'Arginin'\r\n    },\r\n    label_nutrient_proteins_asparticAcid: {\r\n        de: 'Asparaginsäure',\r\n        en: 'Aspartic acid'\r\n    },\r\n    label_nutrient_proteins_cystine: {\r\n        de: 'Cystein',\r\n        en: 'Cystein'\r\n    },\r\n    label_nutrient_proteins_glysine: {\r\n        de: 'Glysin',\r\n        en: 'Glysine'\r\n    },\r\n    label_nutrient_proteins_glutamicAcid: {\r\n        de: 'Glutamin',\r\n        en: 'Glutamic acid'\r\n    },\r\n    label_nutrient_proteins_histidine: {\r\n        de: 'Histidin',\r\n        en: 'Histidine'\r\n    },\r\n    label_nutrient_proteins_isoleucine: {\r\n        de: 'Isoleucin',\r\n        en: 'Isoleucin'\r\n    },\r\n    label_nutrient_proteins_leucine: {\r\n        de: 'Leucin',\r\n        en: 'Leucin'\r\n    },\r\n    label_nutrient_proteins_lysine: {\r\n        de: 'Lysin',\r\n        en: 'Lysine'\r\n    },\r\n    label_nutrient_proteins_methionine: {\r\n        de: 'Methionin',\r\n        en: 'Methionin'\r\n    },\r\n    label_nutrient_proteins_phenylalanine: {\r\n        de: 'Phenylalanin',\r\n        en: 'Phenylalanin'\r\n    },\r\n    label_nutrient_proteins_proline: {\r\n        de: 'Prolin',\r\n        en: 'Proline'\r\n    },\r\n    label_nutrient_proteins_serine: {\r\n        de: 'Serin',\r\n        en: 'Serine'\r\n    },\r\n    label_nutrient_proteins_threonine: {\r\n        de: 'Threonin',\r\n        en: 'Threonine'\r\n    },\r\n    label_nutrient_proteins_tryptophan: {\r\n        de: 'Tryptophan',\r\n        en: 'Tryptophan'\r\n    },\r\n    label_nutrient_proteins_tyrosine: {\r\n        de: 'Tyrosin',\r\n        en: 'Tyrosin'\r\n    },\r\n    label_nutrient_proteins_valine: {\r\n        de: 'Valin',\r\n        en: 'Valin'\r\n    },\r\n    label_nutrient_remainder: {\r\n        de: 'Rest',\r\n        en: 'Remainder'\r\n    },\r\n    label_nutrient_sugar: {\r\n        de: 'Zucker',\r\n        en: 'Sugar'\r\n    },\r\n    label_nutrient_vit: {\r\n        de: 'Vitamine',\r\n        en: 'Vitamins'\r\n    },\r\n    label_nutrient_vit_a: {\r\n        de: 'Vitamin A (Retinol, Retinal, ...)',\r\n        en: 'Vitamin A (Retinol, Retinal, ...)'\r\n    },\r\n    label_nutrient_vit_b1: {\r\n        de: 'Vitamin B1 (Thiamine)',\r\n        en: 'Vitamin B1 (Thiamine)'\r\n    },\r\n    label_nutrient_vit_b2: {\r\n        de: 'Vitamin B2 (Riboflavin)',\r\n        en: 'Vitamin B2 (Riboflavin)'\r\n    },\r\n    label_nutrient_vit_b3: {\r\n        de: 'Vitamin B3 (Niacin)',\r\n        en: 'Vitamin B3 (Niacin)'\r\n    },\r\n    label_nutrient_vit_b5: {\r\n        de: 'Vitamin B5 (Pantothensäure)',\r\n        en: 'Vitamin B5 (Pantothenic acid)'\r\n    },\r\n    label_nutrient_vit_b6: {\r\n        de: 'Vitamin B6',\r\n        en: 'Vitamin B6'\r\n    },\r\n    label_nutrient_vit_b9: {\r\n        de: 'Vitamin B9 (Folsäure)',\r\n        en: 'Vitamin B9 (Folate)'\r\n    },\r\n    label_nutrient_vit_b12: {\r\n        de: 'Vitamin B12',\r\n        en: 'Vitamin B12'\r\n    },\r\n    label_nutrient_vit_c: {\r\n        de: 'Vitamin C',\r\n        en: 'Vitamin C'\r\n    },\r\n    label_nutrient_vit_d: {\r\n        de: 'Vitamin D',\r\n        en: 'Vitamin D'\r\n    },\r\n    label_nutrient_vit_e: {\r\n        de: 'Vitamin E',\r\n        en: 'Vitamin E'\r\n    },\r\n    label_nutrient_vit_k: {\r\n        de: 'Vitamin K',\r\n        en: 'Vitamin K'\r\n    },\r\n    label_nutrient_water: {\r\n        de: 'Wasser',\r\n        en: 'Water'\r\n    },\r\n    label_overview: {\r\n        de: 'Übersicht',\r\n        en: 'Overview'\r\n    },\r\n    label_portion: {\r\n        de: 'Portion',\r\n        en: 'Portion'\r\n    },\r\n    label_prefix_hereof: {\r\n        de: 'davon',\r\n        en: 'hereof'\r\n    },\r\n    label_reference: {\r\n        de: 'Bezug',\r\n        en: 'Reference'\r\n    },\r\n    label_preferred_source: {\r\n        de: 'Bevorzugte Datenquelle',\r\n        en: 'Preferred data source'\r\n    },\r\n    label_source: {\r\n        de: 'Datenquelle',\r\n        en: 'Data source'\r\n    },\r\n    label_source_supplement: {\r\n      de: \"Unvollständige Daten ergänzen\",\r\n      en: \"Supplement incomplete data\"\r\n    },\r\n    label_source_supplement_tooltip: {\r\n        de: \"Ergänzt fehlende Daten aus einer anderen Quelle, sofern diese die entsprechenden Daten enthält\",\r\n        en: \"Supplements missing data from another source in case that source contains the relevant data\"\r\n    },\r\n    label_source_combine: {\r\n        de: \"Datenquellen kombinieren\",\r\n        en: \"Combine data sources\"\r\n    },\r\n    label_source_combine_tooltip: {\r\n        de: \"Bildet den Daten-Mittelwert aus allen Datenquellen zu dem Lebensmittel\",\r\n        en: \"Create the average data out of all available data sources to this food\"\r\n    },\r\n    label_unknown: {\r\n        de: 'Unbekannt',\r\n        en: 'Unknown'\r\n    },\r\n    label_userSettings_age: {\r\n        de: 'Alter',\r\n        en: 'Age'\r\n    },\r\n    label_userSettings_breastfeeding: {\r\n        de: 'stillend',\r\n        en: 'breast-feeding'\r\n    },\r\n    label_userSettings_leisureSports: {\r\n        de: 'Freizeitsport',\r\n        en: 'Leisure sports'\r\n    },\r\n    label_userSettings_leisureSports_tooltip: {\r\n        de: 'Angabe, ob Sie an dem betreffenden Tag zusätzlich zu Ihrer Tätigkeit nennenswert Sport ausgeübt haben, z.B. 30-45 min joggen oder 45-60 min Rad fahren (erhöht PAL-Wert um 0.3)',\r\n        en: 'Specifies whether you did some notable (leisure) sports or activity that day, like 30-45 minutes jogging or 45-60 minutes biking (increases PAL-value by 0.3)'\r\n    },\r\n    label_userSettings_palValue: {\r\n        de: 'PAL-Value',\r\n        en: 'Pal Value'\r\n    },\r\n    label_userSettings_pregnant: {\r\n        de: 'schwanger',\r\n        en: 'pregnant'\r\n    },\r\n    label_userSettings_sex: {\r\n        de: 'Geschlecht:',\r\n        en: 'Sex:'\r\n    },\r\n    label_userSettings_sex_male: {\r\n        de: 'männlich',\r\n        en: 'male'\r\n    },\r\n    label_userSettings_sex_female: {\r\n        de: 'weiblich',\r\n        en: 'female'\r\n    },\r\n    label_userSettings_size: {\r\n        de: 'Körpergröße',\r\n        en: 'Size'\r\n    },\r\n    label_userSettings_weight: {\r\n        de: 'Gewicht',\r\n        en: 'Weight'\r\n    },\r\n    menu_food_data_panel: {\r\n        de: 'Lebensmittel analysieren',\r\n        en: 'Food data analyzer'\r\n    },\r\n    menu_direct_compare: {\r\n        de: 'Direktvergleich',\r\n        en: 'Direct comparison'\r\n    },\r\n    menu_home: {\r\n        de: 'Home',\r\n        en: 'Home'\r\n    },\r\n    menu_mobile_app: {\r\n        de: 'Mobile App',\r\n        en: 'Mobile App'\r\n    },\r\n    menu_ranking: {\r\n        de: 'Lebensmittel Ranking',\r\n        en: 'Food ranking'\r\n    },\r\n    menu_settings: {\r\n        de: 'User Einstellungen',\r\n        en: 'User settings'\r\n    },\r\n    menu_contact: {\r\n        de: 'Kontakt',\r\n        en: 'Contact'\r\n    },\r\n    menu_contact_sources: {\r\n        de: 'Quellen',\r\n        en: 'Sources'\r\n    },\r\n    menu_contact_versions: {\r\n        de: 'Versionen',\r\n        en: 'Versions'\r\n    },\r\n    menu_contact_impressum: {\r\n        de: 'Impressum',\r\n        en: 'Impressum'\r\n    },\r\n    message_email_success: {\r\n        de: 'Ihre Nachricht wurde versendet.',\r\n        en: 'Your message has been sent.'\r\n    },\r\n    message_email_error: {\r\n        de: 'Beim Versenden der Nachricht trat ein Fehler auf.',\r\n        en: 'Error while trying to send message.'\r\n    },\r\n    message_error_existing_element: {\r\n        de: 'Das ausgewählte Element befindet sich bereits im Datenbereich. Ein Lebensmittel darf nur einmal hinzugefügt werden.',\r\n        en: 'The selected food item already exists in your list. A food item can be added only once.'\r\n    },\r\n    message_error_incomplete_form: {\r\n        de: 'Das Formular ist unvollständig ausgefüllt.',\r\n        en: 'The form is incomplete.'\r\n    },\r\n    message_error_invalid_portion: {\r\n        de: 'Geben Sie bitte eine Portion zwischen 1 und 5000 Gramm an.',\r\n        en: 'Please specify a portion amount between 1 and 5000 gram.'\r\n    },\r\n    message_userdata_success: {\r\n        de: 'Änderungen wurden gespeichert.',\r\n        en: 'Saved changes.'\r\n    },\r\n    message_userdata_error_title: {\r\n        de: 'Fehlerhafte Eingabe',\r\n        en: 'Invalid input'\r\n    },\r\n    message_userdata_error_age: {\r\n        de: 'Geben Sie bitte ein Alter zwischen 15 und 100 Jahren ein.',\r\n        en: 'Please enter an age between 15 and 100 years.'\r\n    },\r\n    message_userdata_error_size: {\r\n        de: 'Geben Sie bitte eine Körpergröße zwischen 80 und 225 cm ein.',\r\n        en: 'Please enter a body height between 80 and 225 cm.'\r\n    },\r\n    message_userdata_error_weight: {\r\n        de: 'Geben Sie bitte ein Gewicht zwischen 30 und 250 kg ein.',\r\n        en: 'Please enter a body weight between 30 and 250 kg.'\r\n    },\r\n    palcat_name_1: {\r\n        de: 'Extrem niedrige Aktivität',\r\n        en: 'Extremely light activity.'\r\n    },\r\n    palcat_desc_1: {\r\n        de: 'Bspw. ans Bett gebundene Menschen.',\r\n        en: 'Such as bed-ridden people.'\r\n    },\r\n    palcat_name_2: {\r\n        de: 'Sehr nierdige Aktivität',\r\n        en: 'Very light activity'\r\n    },\r\n    palcat_desc_2: {\r\n        de: 'Bspw. sehr einfache Büroarbeit in permanent sitzender Haltung, Reisende in einem Flugzeug oder Zug (sitzend).',\r\n        en: 'Such as very light office work (permanently seated), passengers sitting in a train or airplane.'\r\n    },\r\n    palcat_name_3: {\r\n        de: 'Niedrige Aktivität',\r\n        en: 'Light activity'\r\n    },\r\n    palcat_desc_3: {\r\n        de: 'Überwiegend sitzende Tätigkeit, mit Phasen im stehenden Zustand (z.B. Berufsfahrer, Ärzte, Lehrer, Schüler) oder dem Ausführen zusätzlicher leichter Tätigkeiten (z.B. einfache Haushaltstätigkeiten).',\r\n        en: 'Mostly seated activity, with phases of standing activity (e.g., drivers, doctors, students, teachers...) or additional tasks like simple household chores.'\r\n    },\r\n    palcat_name_4: {\r\n        de: 'Mäßige Aktivität',\r\n        en: 'Mediocre Activity'\r\n    },\r\n    palcat_desc_4: {\r\n        de: 'Überwiegende Stehende Tätigkeit (z.B. Handwerker, Verkäufer, Kellner, Krankenschwester).',\r\n        en: 'Mostly standing activity (e.g. shop assistants, waiters, craftsmen, nurses).'\r\n    },\r\n    palcat_name_5: {\r\n        de: 'Hohe Aktivität',\r\n        en: 'High activity'\r\n    },\r\n    palcat_desc_5: {\r\n        de: 'Körperlich schwere Arbeit, z.B. Bauarbeiter, Möbelpacker, Sportlehrer.',\r\n        en: 'Hard work, such as construction workers, movers, gym teachers etc.'\r\n    },\r\n    palcat_name_6: {\r\n        de: 'Sehr hohe Aktivität',\r\n        en: 'Very high activity'\r\n    },\r\n    palcat_desc_6: {\r\n        de: 'Körperlich sehr schwere Arbeit, z.B. Bauarbeiter, Möbelpacker, Fitnesstrainer, Bergarbeiter.',\r\n        en: 'Very hard work, such as construction workers, movers, fitness trainers, miners etc.'\r\n    },\r\n    palcat_name_7: {\r\n        de: 'Extrem hohe Aktivität',\r\n        en: 'Extremely high activity'\r\n    },\r\n    palcat_desc_7: {\r\n        de: 'Bspw. (Hoch-) Leistungssportler.',\r\n        en: 'Such as professional athletes.'\r\n    },\r\n    portion_100g: {\r\n        de: '100 Gramm',\r\n        en: '100 Gram'\r\n    },\r\n    portion_individual: {\r\n        de: 'Individuell',\r\n        en: 'Individual'\r\n    },\r\n    text_contact_disclaimer1: {\r\n        de: 'Alle Rechte vorbehalten.',\r\n        en: 'All rights reserved.'\r\n    },\r\n    text_contact_disclaimer2: {\r\n        de: 'Food Compare basiert auf freien Datenquellen, die im Quellen-Tab näher beschrieben sind. Die Lebensmitteldaten stammen von Food Data Central, einem Teilprojekt des United States Department of Agriculture. Im Info-Tab des Daten-Panels existiert für jedes Lebensmittel ein Link zu den abgegriffenen Daten.',\r\n        en: 'Food Compare is based upon free data sources specified in the sources tab. Food data used in the project originates from Food Data Central as part of the United States Department of Agriculture. There is a direct link to the original source data of each food element in the info data page of the food data panel.'\r\n    },\r\n    text_contact_disclaimer3: {\r\n        de: 'Die für die Berechnung des Tagesbedarfs verwendeten Einstellungen entstammen der Deutschen Gesellschaft für Ernährung (DGE).',\r\n        en: 'For the computation of daily dietary requirements, data from the German Nutrition Society (DGE) is used.'\r\n    },\r\n    text_contact_form: {\r\n        de: 'Bitte benutzen Sie das Kontaktformular, wenn Sie Frage oder Feedback zu Food Compare haben.',\r\n        en: 'Please use the contact form below if you have questions of feedback about Food Compare.'\r\n    },\r\n    text_contact_source1: {\r\n        de: 'Quellen:',\r\n        en: 'Sources:',\r\n    },\r\n    text_contact_source2: {\r\n        de: 'Nährwert-Daten:',\r\n        en: 'Nutrient Data:',\r\n    },\r\n    text_contact_source3: {\r\n        de: 'Daten für Tagesbedarf von Vitaminen/Mineralstoffen:',\r\n        en: 'Source for Dietary Requirement of Minerals and Vitamins',\r\n    },\r\n    text_contact_source4: {\r\n        de: 'Berechnung von Grundumsatz und PAL:',\r\n        en: 'Calculation of BMR and PAL:',\r\n    },\r\n    text_empty_fooddatapanel: {\r\n        de: 'Klicken Sie links auf den Plus-Button, um Lebensmittel zum Analysebereich hinzufügen. Es können beliebig viele Lebensmittel hinzugefügt werden. Klicken Sie den Stapel-Button, um ein komplexes Lebensmittel bzw. ein Menü zusammenzustellen, dessen Gesamtwerte dann agezeigt werden.',\r\n        en: 'Click the plus button on the left to add food elements to the analysis panel. You can add as many food elements as you like. Click the stack button if you want to create complex meals to show their total nutrient data.'\r\n    },\r\n    text_foodcompareapp_1: {\r\n        de: 'Für Androidgeräte bieten wir eine Mobilversion von Food Compare an, welche dieselben Funktionen wie die Website beinhaltet. Zusätzlich können Lebensmittel dort auch nach einem bestimmten Nährstoff, Vitamin oder Mineralstoff sortiert werden. So lassen sich leicht Lebensmittel mit den höchsten Werten von einer Gruppe identifizieren.',\r\n        en: 'For Android devices we also provide a mobile app containing the same functionality as the website. Additionally, the mobile app also allows you to rank food by specific nutrients, vitamins or minerals to support users in identifying food elements that have the highest amount of a specific nutrient aspect.',\r\n    },\r\n    text_foodcompareapp_2: {\r\n        de: 'App im Playstore erhalten',\r\n        en: 'Get the App from the Playstore'\r\n    },\r\n    text_setUserdata_p1: {\r\n        de: 'Es werden aktuell Standardwerte für einen durchschnittlichen Erwachsenen (männlich, 35 Jahre) angezeigt.',\r\n        en: 'You are currently seeing the reference data for an average adult (male, 35 years).'\r\n    },\r\n    text_setUserdata_p2: {\r\n        de: 'Geben Sie, bei Bedarf, in den Einstellungen Ihre eigenen Körperdaten für ein genaueres Ergebnis ein.',\r\n        en: 'For more accurate data, if necessary, please enter your personal body data in the settings menu.'\r\n    },\r\n    text_setUserdata_p3: {\r\n        de: 'Die Referenzwerte beziehen sich auf die eingestellten Nutzerdaten.',\r\n        en: 'The reference data refer to your entered body data.'\r\n    },\r\n    tooltip_icon_charts: {\r\n        de: 'Diagramm-Modus',\r\n        en: 'Chart mode'\r\n    },\r\n    tooltip_icon_close: {\r\n        de: 'Tab schließen',\r\n        en: 'Close tab'\r\n    },\r\n    tooltip_icon_newFoodItem: {\r\n        de: 'Lebensmittel hinzufügen',\r\n        en: 'Add food item'\r\n    },\r\n    tooltip_icon_newFoodItemStack: {\r\n        de: 'Kombinierte Liste an Lebensmitteln hinzufügen (aggregierte Daten)',\r\n        en: 'Add composite list of food items (aggregated data)'\r\n    },\r\n    tooltip_icon_removeAll: {\r\n        de: 'Alle Tabs schließen',\r\n        en: 'Close all data tabs'\r\n    },\r\n    tooltip_icon_table: {\r\n        de: 'Tabellen-Modus',\r\n        en: 'Table mode'\r\n    }\r\n}","import {isMobile} from \"react-device-detect\";\r\nimport React, {useContext} from \"react\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {mobileAppPath} from \"../config/ApplicationSetting\";\r\n\r\nexport default function MobileDeviceCheck() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n\r\n    const setMobileStatus = (status: boolean) => {\r\n        if(status === true) {\r\n            window.location.href = mobileAppPath\r\n        } else {\r\n            applicationContext?.setMobileUsage(status)\r\n        }\r\n    }\r\n\r\n    const showQuestionModal2 = () => {\r\n        return <div className={\"mobile-device-message\"}>\r\n            <div style={{margin: \"15px\"}}>\r\n                {applicationStrings.device_detection_hint[language]}\r\n            </div>\r\n            <div className={\"d-flex justify-content-center\"} style={{margin: \"15px\"}}>\r\n                {applicationStrings.device_detection_question[language]}\r\n            </div>\r\n            <div className={\"d-flex justify-content-center\"}>\r\n                <Button style={{minWidth: \"80px\", marginRight: \"40px\"}}\r\n                        onClick={() => setMobileStatus(true)}>\r\n                    {applicationStrings.button_yes[language]}\r\n                </Button>\r\n                <Button\r\n                    style={{minWidth: \"80px\"}}\r\n                    className=\"primary button-l\"\r\n                    onClick={() => setMobileStatus(false)}>\r\n                    {applicationStrings.button_no[language]}\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    return <div>\r\n        {applicationContext?.useAsMobile === null && isMobile &&\r\n        < div>\r\n            {showQuestionModal2()}\r\n        </div>\r\n        }\r\n    </div>\r\n\r\n}","export default \"data:image/png;base64,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\"","import logo from '../static/image/logo.png'\r\nimport text from '../static/image/text.png'\r\nimport {Button} from \"react-bootstrap\";\r\nimport {\r\n    LANGUAGE_DE,\r\n    LANGUAGE_EN,\r\n    PATH_FOODDATA_PANEL,\r\n    PATH_HOME,\r\n    PATH_CONTACT,\r\n    PATH_USERSETTINGS,\r\n    PATH_MOBILE_APP,\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODCOMPARE,\r\n    SOURCE_SRLEGACY,\r\n    SOURCE_FNDDS\r\n} from \"../config/Constants\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {Link} from 'react-router-dom';\r\nimport {useLocation} from 'react-router-dom';\r\n\r\n\r\nexport default function Header() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language, userLanguageChange} = useContext(LanguageContext)\r\n    const location = useLocation();\r\n\r\n    if (applicationContext === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleLanguageButtonClick = (event: any): void => {\r\n        userLanguageChange(event.target.value)\r\n        applicationContext.setFoodDataPanelData.updateAllFoodItemNames(applicationContext.foodDataCorpus.foodNames, event.target.value)\r\n    }\r\n\r\n    const handleSourceButtonClick = (event: any): void => {\r\n        applicationContext.setPreferredSource(event.target.value)\r\n    }\r\n\r\n    let activePath = location.pathname && location.pathname !== \"/\" ? location.pathname : PATH_HOME\r\n    if (activePath.endsWith(\"/\") && activePath.length > 1) {\r\n        activePath = activePath.substring(0, activePath.length - 1)\r\n    }\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('Path:', activePath)\r\n    }\r\n\r\n    const renderMenus = () => {\r\n        return (\r\n            <div className=\"btn-group\" role=\"group\">\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_HOME}>\r\n                        <Button className=\"header-link\"\r\n                                value={PATH_HOME}\r\n                                variant={'link'}\r\n                                active={activePath === PATH_HOME || activePath === PATH_FOODCOMPARE}>\r\n                            {applicationStrings.menu_home[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_FOODDATA_PANEL}>\r\n                        <Button className=\"header-link\"\r\n                                value={PATH_FOODDATA_PANEL}\r\n                                variant={'link'}\r\n                                active={activePath === PATH_FOODDATA_PANEL}>\r\n                            {applicationStrings.menu_food_data_panel[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_DIRECT_COMPARE}>\r\n                        <Button className=\"header-link\"\r\n                                value={PATH_DIRECT_COMPARE}\r\n                                variant={'link'}\r\n                                active={activePath === PATH_DIRECT_COMPARE}>\r\n                            {applicationStrings.menu_direct_compare[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n                {/*<div className=\"header-menu\">*/}\r\n                {/*    <Button className=\"blink header-link\"*/}\r\n                {/*            value={MENU_RANKING}*/}\r\n                {/*            variant={'link'}*/}\r\n                {/*            active={props.selectedMenu === MENU_RANKING}*/}\r\n                {/*            onClick={props.changeMenu}>*/}\r\n                {/*        {applicationStrings.menu_ranking[language]}*/}\r\n                {/*    </Button>*/}\r\n                {/*</div>*/}\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_MOBILE_APP}>\r\n                        <Button className=\"header-link\"\r\n                                value={PATH_MOBILE_APP}\r\n                                variant={'link'}\r\n                                active={activePath === PATH_MOBILE_APP}>\r\n                            {applicationStrings.menu_mobile_app[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_USERSETTINGS}>\r\n                        <Button className=\"link header-link\"\r\n                                value={PATH_USERSETTINGS}\r\n                                variant={'link'}\r\n                                active={activePath === PATH_USERSETTINGS}>\r\n                            {applicationStrings.menu_settings[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_CONTACT}>\r\n                        <Button className=\"link header-link\"\r\n                                variant={'link'}\r\n                                value={PATH_CONTACT}\r\n                                active={activePath === PATH_CONTACT}>\r\n                            {applicationStrings.menu_contact[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderLanguageButtons = () => {\r\n        return (\r\n            <div className=\"form-language text-right\">\r\n                <form className=\"form-group\">\r\n                    <label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_language[language]}</b>\r\n                    </label>\r\n                    <label className=\"form-elements\">\r\n                        <input className=\"form-radiobutton\"\r\n                               name={\"user language\"}\r\n                               type=\"radio\"\r\n                               value={LANGUAGE_EN}\r\n                               checked={language === LANGUAGE_EN}\r\n                               onChange={handleLanguageButtonClick}\r\n                        />\r\n                        {applicationStrings.checkbox_english[language]}\r\n                    </label>\r\n                    <label className=\"form-elements-largespace\">\r\n                        <input className=\"form-radiobutton\"\r\n                               name={\"user language\"}\r\n                               type=\"radio\"\r\n                               value={LANGUAGE_DE}\r\n                               checked={language === LANGUAGE_DE}\r\n                               onChange={handleLanguageButtonClick}\r\n                        />\r\n                        {applicationStrings.checkbox_german[language]}\r\n                    </label>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderSourceButtons = () => {\r\n        const preferredSource = applicationContext.applicationData.preferredSource\r\n\r\n        return (\r\n            <div className=\"form-language text-right\" style={{paddingLeft: \"25px\"}}>\r\n                <form className=\"form-group\">\r\n                    <label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_preferred_source[language]}</b>\r\n                    </label>\r\n                    <label className=\"form-elements\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               value={SOURCE_SRLEGACY}\r\n                               checked={preferredSource === SOURCE_SRLEGACY}\r\n                               onChange={handleSourceButtonClick}\r\n                        />\r\n                        SR Legacy\r\n                    </label>\r\n                    <label className=\"form-elements-largespace\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               value={SOURCE_FNDDS}\r\n                               checked={(preferredSource === SOURCE_FNDDS)}\r\n                               onChange={handleSourceButtonClick}\r\n                        />\r\n                        FNDDS (Survey)\r\n                    </label>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"d-flex d-row header\">\r\n            <div style={{paddingTop: \"8px\", paddingLeft: \"8px\", minWidth: \"90px\", maxWidth: \"90px\"}}>\r\n                <img src={logo}/>\r\n            </div>\r\n            <div className={\"d-flex flex-column w-100\"}>\r\n                <div className=\"d-flex d-row align-items-center justify-content-between\">\r\n                    <div style={{paddingTop: \"5px\"}}>\r\n                        <img src={text}/>\r\n                    </div>\r\n                    <div className=\"d-flex d-row justify-content-end\" style={{paddingTop: \"6px\"}}>\r\n                        {renderLanguageButtons()}\r\n                        {renderSourceButtons()}\r\n                    </div>\r\n                </div>\r\n                <div className=\"d-row\" style={{marginTop: \"3px\"}}>\r\n                    <div className=\"col-md-12 text-start\">\r\n                        {renderMenus()}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","export default \"data:image/png;base64,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\"","import {useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {Carousel} from 'react-responsive-carousel';\r\nimport {applicationStrings} from \"../static/labels\";\r\n\r\nimport homeText1 from \"../static/hometext1.json\";\r\nimport homeText2 from \"../static/hometext2.json\";\r\n\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport {Link} from 'react-router-dom';\r\nimport {LANGUAGE_DE, PATH_DIRECT_COMPARE, PATH_FOODDATA_PANEL} from \"../config/Constants\";\r\nimport {FaAngleDoubleRight} from \"react-icons/fa\";\r\n\r\nconst images = require.context('../static/image/carousel', true);\r\n\r\ninterface HomeTextElement {\r\n    type: string\r\n    de: string\r\n    en: string\r\n}\r\n\r\nexport function Home() {\r\n    const languageContext = useContext(LanguageContext)\r\n    const [displayedImage, setDisplayedImage] = useState<number>(0)\r\n\r\n    const imageChanged = (image) => {\r\n        setDisplayedImage(image)\r\n    }\r\n\r\n    const renderCarousel = () => {\r\n        let langKey = languageContext.language\r\n\r\n        const pic1 = images(`./Img-${langKey}-1.png`).default;\r\n        const pic2 = images(`./Img-${langKey}-2.png`).default;\r\n        const pic3 = images(`./Img-${langKey}-3.png`).default;\r\n        const pic4 = images(`./Img-${langKey}-4.png`).default;\r\n        const pic5 = images(`./Img-${langKey}-5.png`).default;\r\n        const pic6 = images(`./Img-${langKey}-6.png`).default;\r\n\r\n        const captionAttribute = `home_carousel_${displayedImage}`;\r\n        const imageCaption = applicationStrings[captionAttribute][languageContext.language];\r\n\r\n        return (\r\n            <div style={{ paddingBottom: \"40px\"}}>\r\n                <Carousel showArrows={true}\r\n                          infiniteLoop={true} autoPlay={true}\r\n                          interval={6000}\r\n                          transitionTime={800}\r\n                          selectedItem={displayedImage}\r\n                          showThumbs={false}\r\n                          showStatus={false}\r\n                          onChange={imageChanged}>\r\n                    <div>\r\n                        <img src={pic1}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic2}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic3}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic4}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic5}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic6}/>\r\n                    </div>\r\n                </Carousel>\r\n                <div style={{textAlign: \"center\", fontStyle: \"oblique\"}}>\r\n                    {imageCaption}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const renderStartButtons = () => {\r\n        return (\r\n            <div style={{paddingTop: \"16px\"}}>\r\n                <b>{applicationStrings.label_getStarted[languageContext.language]}</b>\r\n                <div className={\"text-center\"}>\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_FOODDATA_PANEL + \"?add=1\"}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: \"#f9e79f\"}}>\r\n                                {applicationStrings.button_getstarted_1[languageContext.language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_FOODDATA_PANEL + \"?composite=1\"}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: \"#d5f5e3\"}}>\r\n                                {applicationStrings.button_getstarted_2[languageContext.language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_DIRECT_COMPARE}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: \"#fadbd8\"}}>\r\n                                {applicationStrings.button_getstarted_3[languageContext.language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderHomeText = (textElements: HomeTextElement[]): any => {\r\n        return textElements.map(textElement => renderTextElement(textElement))\r\n    }\r\n\r\n    const renderTextElement = (textElement: HomeTextElement): JSX.Element => {\r\n        const text = languageContext.language === LANGUAGE_DE ? textElement.de : textElement.en\r\n\r\n        switch (textElement.type) {\r\n            case \"paragraph\":\r\n                return <p>{text}</p>\r\n            case \"subheading\":\r\n                return (\r\n                    <>\r\n                        <br/>\r\n                        <h3>\r\n                            {text}\r\n                        </h3>\r\n                        <hr/>\r\n                    </>\r\n                )\r\n            case \"paragraph-before-itemization\":\r\n                return <p><b>{text}</b></p>\r\n            case \"fancy-item\":\r\n                return (\r\n                    <div>\r\n                        <span style={{paddingLeft: \"10px\", paddingRight: \"10px\"}}>\r\n                            <FaAngleDoubleRight/>\r\n                        </span>\r\n                        {text}\r\n                    </div>\r\n                )\r\n            default:\r\n                return <p>{text}</p>\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"media home app\" style={{margin: \"0 auto\"}}>\r\n            <div className={\"container-fluid\"}>\r\n                <div className=\"row\">\r\n                    <div className={\"col-5\"}>\r\n                        {renderHomeText(homeText1)}\r\n                        <div style={{paddingTop: \"20px\", paddingBottom: \"60px\"}}>\r\n                            {renderStartButtons()}\r\n                        </div>\r\n                    </div>\r\n                    <div className={\"col-7\"} style={{paddingLeft: \"45px\"}}>\r\n                        {renderCarousel()}\r\n                    </div>\r\n                </div>\r\n                <hr/>\r\n                <div className=\"card-header\" style={{maxWidth: \"1000px\", paddingBottom: \"20px\", marginBottom: \"50px\"}}>\r\n                    {renderHomeText(homeText2)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {getReactSelectOptionsList} from \"./NameTypeService\";\r\n\r\nexport function getCategorySelectList(categories: Array<NameType>, language: string): Array<ReactSelectOption> {\r\n    return getReactSelectOptionsList(categories, language)\r\n}\r\n\r\n","import {ReactSelectFoodClassOption} from \"../../types/ReactSelectOption\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport getName from \"../LanguageService\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\n\r\nexport function getFoodClassSelectList(foodClasses: Array<FoodClass>, category: number, foodNames: Array<NameType>, language: string): Array<ReactSelectFoodClassOption> {\r\n    const filteredFoodClasses = getFoodClassesOfCategory(foodClasses, category)\r\n\r\n    if(!filteredFoodClasses || filteredFoodClasses.length === 0) {\r\n        return []\r\n    }\r\n\r\n    const reactSelectOptions: Array<ReactSelectFoodClassOption> = []\r\n    filteredFoodClasses.forEach(foodClass => {\r\n        const nameId = foodClass.nameKey\r\n        if(nameId > foodNames.length) {\r\n            console.error(`Illegal food name Id in food class having ID=${foodClass.id}`)\r\n            return\r\n        }\r\n        const nameType = foodNames[nameId-1]\r\n        const foodName = getName(nameType, language)\r\n        reactSelectOptions.push({\r\n            value: foodClass,\r\n            label: foodName\r\n        })\r\n    })\r\n\r\n    reactSelectOptions.sort((obj1, obj2) => obj1.label.localeCompare(obj2.label))\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nfunction getFoodClassesOfCategory(foodClasses: Array<FoodClass>, category: number): Array<FoodClass> {\r\n    return foodClasses.filter(foodClass => {\r\n        if(category === 0) {\r\n            return foodClass\r\n        } else if(foodClass.category === category) {\r\n            return foodClass\r\n        } else {\r\n            return null\r\n        }\r\n    })\r\n}","import FoodItem from \"../../types/nutrientdata/FoodItem\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {ReactSelectFoodItemOption} from \"../../types/ReactSelectOption\";\r\nimport getName from \"../LanguageService\";\r\n\r\nexport function getFoodItem(foodItemId: number, foodItems: Array<FoodItem>): FoodItem | null {\r\n    const index = foodItems.findIndex(foodItem => foodItem.id === foodItemId)\r\n    if(index >= 0) {\r\n        return foodItems[index]\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\nexport function getFoodItemsSelectList(foodItems: Array<FoodItem>, foodClass: number, foodNames: Array<NameType>, conditions: Array<NameType>, language: string): Array<ReactSelectFoodItemOption> {\r\n    const filteredFoodItems = getFoodItemsOfFoodclass(foodItems, foodClass)\r\n    const reactSelectOptions: Array<ReactSelectFoodItemOption> = []\r\n\r\n    if(filteredFoodItems && filteredFoodItems.length > 0) {\r\n        filteredFoodItems.forEach(foodItem => {\r\n            const nameId = foodItem.nameId!!\r\n            if(nameId > foodNames.length) {\r\n                console.error(`Illegal food name Id in food item having ID=${foodItem.id}`)\r\n                return\r\n            }\r\n            const nameType = foodNames[nameId-1]\r\n            let foodName = getName(nameType, language)\r\n            const condition = conditions.find(condition => condition.id === foodItem.conditionId)\r\n            const conditionName =condition ? getName(condition, language) : null\r\n\r\n            if(conditionName) {\r\n                foodName = `${foodName} (${conditionName})`\r\n            }\r\n\r\n            reactSelectOptions.push({\r\n                value: foodItem,\r\n                label: foodName\r\n            })\r\n        })\r\n    }\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\nfunction getFoodItemsOfFoodclass(foodItems: Array<FoodItem>, foodClassId: number): Array<FoodItem> {\r\n    return foodItems.filter(foodItem => {\r\n        if(foodItem.foodClass === foodClassId) {\r\n            return foodItem\r\n        } else {\r\n            return null\r\n        }\r\n    })\r\n}","import NameType from \"../../types/nutrientdata/NameType\";\r\nimport {ReactSelectPortionOption} from \"../../types/ReactSelectOption\";\r\nimport FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport getName from \"../LanguageService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {PORTION_KEY_100, PORTION_KEY_INDIVIDUAL} from \"../../config/Constants\";\r\n\r\n\r\nexport function getPortionReactSelectList(portionData: Array<PortionData>, portionTypes: Array<NameType>, language: string): Array<ReactSelectPortionOption> {\r\n    const reactSelectOptions: Array<ReactSelectPortionOption> = []\r\n    portionData.forEach(portionElement => {\r\n        const portionTypeIndex = portionTypes.findIndex(portionType => {\r\n             return portionType.id === portionElement.portionType\r\n        })\r\n\r\n        const portionType = portionTypes[portionTypeIndex]\r\n        const portionName = getName(portionType, language)\r\n        reactSelectOptions.push({\r\n            value: portionElement,\r\n            label: portionName\r\n        })\r\n    })\r\n\r\n    reactSelectOptions.push({\r\n        value: {amount: 100, portionType: PORTION_KEY_100},\r\n        label: applicationStrings.portion_100g[language]\r\n    })\r\n\r\n    reactSelectOptions.push({\r\n        value: {amount: 0, portionType: PORTION_KEY_INDIVIDUAL},\r\n        label: applicationStrings.portion_individual[language]\r\n    })\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getDefaultPortionData(foodItem: FoodItem, portionDataList: Array<ReactSelectPortionOption>): ReactSelectPortionOption {\r\n    let defaultPortionIndex = portionDataList.findIndex(portionData => {\r\n        return portionData.value.portionType === foodItem.defaultPortionId\r\n    })\r\n\r\n    if (defaultPortionIndex < 0 || defaultPortionIndex >= portionDataList.length) {\r\n        defaultPortionIndex = 0;\r\n    }\r\n\r\n    return portionDataList[defaultPortionIndex]\r\n}","import {useEffect, useState} from \"react\";\r\nimport {smallFormsScreenSize} from \"../config/ApplicationSetting\";\r\n\r\nexport interface WindowDimension {\r\n    width: number\r\n    height: number\r\n}\r\n\r\nfunction getCurrentWindowDimension() {\r\n    return {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight\r\n    }\r\n}\r\n\r\nexport function useWindowDimension() {\r\n    const [windowDimension, setWindowDimension] = useState(getCurrentWindowDimension())\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", () => setWindowDimension(getCurrentWindowDimension))\r\n        return () => window.removeEventListener(\"resize\", () => setWindowDimension(getCurrentWindowDimension))\r\n    }, [])\r\n\r\n    return windowDimension\r\n}\r\n\r\n\r\nexport function isSmallScreen(windowDimension: WindowDimension) {\r\n    return windowDimension.width < smallFormsScreenSize.width || windowDimension.height < smallFormsScreenSize.height\r\n}","import FoodItem, {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\n\r\nexport function getSourceName(sourceId: number) {\r\n    switch (sourceId) {\r\n        case 0:\r\n            return \"SR Legacy\"\r\n        case 1:\r\n            return \"FNDDS\"\r\n        default:\r\n            return \"unknown\"\r\n    }\r\n}\r\n\r\nexport function getNutrientData(selectedFoodItem: SelectedFoodItem): NutrientData {\r\n    return getNutrientDataForFoodItem(selectedFoodItem.foodItem, selectedFoodItem.selectedSource,\r\n        selectedFoodItem.supplementData, selectedFoodItem.combineData)\r\n}\r\n\r\nexport function getNutrientDataForFoodItem(foodItem: FoodItem, sourceToUse?: number, supplementData?: boolean,\r\n                                           combineData?: boolean): NutrientData {\r\n    if (sourceToUse === null || sourceToUse === undefined || foodItem.nutrientDataList.length === 1) {\r\n        return foodItem.nutrientDataList[0]\r\n    } else {\r\n        const nutrientData = foodItem.nutrientDataList.find(nutrientDataObject => nutrientDataObject.source.id === sourceToUse)\r\n        if (nutrientData) {\r\n            if(supplementData || combineData) {\r\n                const complement = foodItem.nutrientDataList.find(nutrientDataObject => nutrientDataObject.source.id !== sourceToUse)\r\n                if(complement) {\r\n                    if(supplementData && !combineData) {\r\n                        return supplementNutrientData(nutrientData, complement)\r\n                    }\r\n                    if(combineData) {\r\n                        return combineNutrientData(nutrientData, complement)\r\n                    }\r\n                }\r\n            }\r\n            return nutrientData\r\n        } else {\r\n            return foodItem.nutrientDataList[0]\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function supplementNutrientData(selectedNutrientData: NutrientData, complementeNutrientData: NutrientData): NutrientData {\r\n    const supplementedBaseData = supplementCategory(selectedNutrientData.baseData, complementeNutrientData.baseData)\r\n    const supplementedVitaminData = supplementCategory(selectedNutrientData.vitaminData, complementeNutrientData.vitaminData)\r\n    const supplementedMineralData = supplementCategory(selectedNutrientData.mineralData, complementeNutrientData.mineralData)\r\n    const supplementedCarbsData = supplementCategory(selectedNutrientData.carbohydrateData, complementeNutrientData.carbohydrateData)\r\n    const supplementedProteinData = supplementCategory(selectedNutrientData.proteinData, complementeNutrientData.proteinData)\r\n\r\n    const supplementedOmegaData = supplementCategory(selectedNutrientData.lipidData.omegaData, complementeNutrientData.lipidData.omegaData)\r\n    let supplementedLipidData = supplementCategory(selectedNutrientData.lipidData, complementeNutrientData.lipidData)\r\n    supplementedLipidData.omegaData = supplementedOmegaData\r\n\r\n    return {\r\n        source: selectedNutrientData.source,\r\n        sourceItemId: selectedNutrientData.sourceItemId,\r\n        baseData: supplementedBaseData,\r\n        vitaminData: supplementedVitaminData,\r\n        mineralData: supplementedMineralData,\r\n        carbohydrateData: supplementedCarbsData,\r\n        proteinData: supplementedProteinData,\r\n        lipidData: supplementedLipidData\r\n    }\r\n}\r\n\r\n\r\nfunction supplementCategory(nutrientCategory1: any, nutrientCategory2: any): any {\r\n    if(!nutrientCategory2) {\r\n        return nutrientCategory1\r\n    }\r\n\r\n    const keysComplement = Object.keys(nutrientCategory2)\r\n    keysComplement.forEach(key => {\r\n        if(nutrientCategory1[key] === null) {\r\n            const objectHasChildren = nutrientCategory2[key] && Object.keys(nutrientCategory2[key]).length > 0\r\n            // Add value from source 2 to source 1 if it is not a sub-object (like Omega object on Lipids object):\r\n            if(nutrientCategory2[key] !== null && !objectHasChildren) {\r\n                nutrientCategory1[key] = nutrientCategory2[key]\r\n            }\r\n        }\r\n    })\r\n\r\n    return nutrientCategory1\r\n}\r\n\r\n\r\nexport function combineNutrientData(selectedNutrientData: NutrientData, complementeNutrientData: NutrientData): NutrientData {\r\n    const combinedBaseData = combineCategory(selectedNutrientData.baseData, complementeNutrientData.baseData)\r\n    const combinedVitaminData = combineCategory(selectedNutrientData.vitaminData, complementeNutrientData.vitaminData)\r\n    const combinedMineralData = combineCategory(selectedNutrientData.mineralData, complementeNutrientData.mineralData)\r\n    const combinedCarbsData = combineCategory(selectedNutrientData.carbohydrateData, complementeNutrientData.carbohydrateData)\r\n    const combinedProteinData = combineCategory(selectedNutrientData.proteinData, complementeNutrientData.proteinData)\r\n\r\n    const combinedOmegaData = combineCategory(selectedNutrientData.lipidData.omegaData, complementeNutrientData.lipidData.omegaData)\r\n    let combinedLipidData = combineCategory(selectedNutrientData.lipidData, complementeNutrientData.lipidData)\r\n    combinedLipidData.omegaData = combinedOmegaData\r\n\r\n    return {\r\n        source: selectedNutrientData.source,\r\n        sourceItemId: selectedNutrientData.sourceItemId,\r\n        baseData: combinedBaseData,\r\n        vitaminData: combinedVitaminData,\r\n        mineralData: combinedMineralData,\r\n        carbohydrateData: combinedCarbsData,\r\n        proteinData: combinedProteinData,\r\n        lipidData: combinedLipidData\r\n    }\r\n}\r\n\r\n\r\nfunction combineCategory(nutrientCategory1: any, nutrientCategory2: any): any {\r\n    if(!nutrientCategory1 && nutrientCategory2) {\r\n        return nutrientCategory2\r\n    } else if(nutrientCategory1 && !nutrientCategory2) {\r\n        return nutrientCategory1\r\n    } else if(!nutrientCategory1 && !nutrientCategory2) {\r\n        return null\r\n    }\r\n\r\n    const keys1: Array<string> = Object.keys(nutrientCategory1)\r\n    const keys2: Array<string> = Object.keys(nutrientCategory2)\r\n\r\n    // @ts-ignore\r\n    const allKeys = [...new Set<string>([...keys1, ...keys2])]\r\n    let finalObject = {}\r\n\r\n    allKeys.forEach(key => {\r\n        const value1 = nutrientCategory1[key] !== null\r\n            ? nutrientCategory1[key]\r\n            : null\r\n\r\n        const value2 = nutrientCategory2[key] !== null\r\n            ? nutrientCategory2[key]\r\n            : null\r\n\r\n        let finalValue\r\n\r\n        if(value1 !== null && value2 === null) {\r\n            finalValue = value1\r\n        } else if(value1 === null && value2 !== null) {\r\n            finalValue = value2\r\n        } else if(value1 === null && value2 === null) {\r\n            finalValue = null\r\n        }else {\r\n            finalValue = (value1 + value2) * 0.5\r\n        }\r\n\r\n        finalObject[key] = finalValue\r\n    })\r\n\r\n    return finalObject\r\n}\r\n","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport Select from 'react-select';\r\nimport ReactSelectOption, {\r\n    ReactSelectFoodClassOption,\r\n    ReactSelectFoodItemOption,\r\n    ReactSelectPortionOption\r\n} from \"../../types/ReactSelectOption\";\r\nimport {getCategorySelectList} from \"../../service/nutrientdata/CategoryService\";\r\nimport {getFoodClassSelectList} from \"../../service/nutrientdata/FoodClassService\";\r\nimport {getFoodItemsSelectList} from \"../../service/nutrientdata/FoodItemsService\";\r\nimport FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {getDefaultPortionData, getPortionReactSelectList} from \"../../service/nutrientdata/PortionDataService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {isSmallScreen, useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {SOURCE_FNDDS, SOURCE_SRLEGACY} from \"../../config/Constants\";\r\nimport {getSourceName} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {Form} from \"react-bootstrap\";\r\n\r\nexport interface FoodSelectorProps {\r\n    updateSelectedFoodItem: (selectedFoodItem: SelectedFoodItem) => void\r\n    smallVariant: boolean\r\n    noCategorySelect?: boolean\r\n    initialFoodClassToSet?: number\r\n    selectedFoodItem?: SelectedFoodItem | null\r\n}\r\n\r\n/**\r\n * Component to select a food element. The component can optionally show the category list and can be initialized\r\n * with an already existing selected food item (in case of component re-rendering).\r\n */\r\nexport default function FoodSelector(props: FoodSelectorProps): JSX.Element {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const initialCategory = applicationContext?.applicationData.foodSelector.selectedCategory\r\n        ? applicationContext.applicationData.foodSelector.selectedCategory\r\n        : null\r\n\r\n    const initialSupplementValue = applicationContext?.applicationData.foodSelector.sourceSupplement || false\r\n    const initialCombineValue = applicationContext?.applicationData.foodSelector.sourceCombine || false\r\n\r\n    const [selectedCategory, setSelectedCategory] = useState<ReactSelectOption | null>(initialCategory)\r\n    const [selectdFoodClass, setSelectedFoodClass] = useState<ReactSelectFoodClassOption | null>(null)\r\n    const [selectedFoodItem, setSelectedFoodItem] = useState<ReactSelectFoodItemOption | null>(null)\r\n    const [selectedPortion, setSelectedPortion] = useState<ReactSelectPortionOption | null>(null)\r\n    const [portionAmount, setPortionAmount] = useState<number>(0)\r\n    const [selectedSource, setSelectedSource] = useState<ReactSelectOption | null>(null)\r\n    const [supplementData, setSupplementData] = useState<boolean>(initialSupplementValue)\r\n    const [combineData, setCombineData] = useState<boolean>(initialCombineValue)\r\n    const [initialized, setInitialized] = useState<boolean>(false)\r\n\r\n    const [categoriesList, setCategoriesList] = useState<Array<ReactSelectOption>>([])\r\n    const [foodClassesList, setFoodClassesList] = useState<Array<ReactSelectFoodClassOption>>([])\r\n    const [foodItemsList, setFoodItemsList] = useState<Array<ReactSelectFoodItemOption>>([])\r\n    const [portionsList, setPortionsList] = useState<Array<ReactSelectPortionOption>>([])\r\n    const [sourcesList, setSourcesList] = useState<Array<ReactSelectOption>>([])\r\n\r\n    const windowSize = useWindowDimension()\r\n\r\n    useEffect(() => {\r\n            if (applicationContext) {\r\n                const currentSelectorSetting = applicationContext.applicationData.foodSelector\r\n                if (selectedCategory !== currentSelectorSetting.selectedCategory || supplementData !== currentSelectorSetting.sourceSupplement\r\n                    || combineData !== currentSelectorSetting.sourceCombine) {\r\n                    applicationContext.setFoodSelectorConfig(selectedCategory, supplementData, combineData)\r\n                }\r\n            }\r\n\r\n            const initialFoodClass = props.initialFoodClassToSet ? props.initialFoodClassToSet : 0\r\n\r\n            if (applicationContext && applicationContext.foodDataCorpus && categoriesList.length === 0) {\r\n                const foodDataCorpus = applicationContext.foodDataCorpus\r\n\r\n                if (foodDataCorpus.categories) {\r\n                    const categoryItems = getCategorySelectList(foodDataCorpus.categories, language)\r\n                    setCategoriesList(categoryItems)\r\n                }\r\n\r\n                if (foodDataCorpus.foodClasses) {\r\n                    const category = selectedCategory ? selectedCategory.value : 0\r\n                    const foodClasses = getFoodClassSelectList(foodDataCorpus.foodClasses, category, applicationContext.foodDataCorpus.foodNames, language)\r\n                    setFoodClassesList(foodClasses)\r\n                    const foodClass = foodClasses[initialFoodClass]\r\n                    setSelectedFoodClass(foodClass)\r\n\r\n                    if (foodDataCorpus.foodItems && foodClasses) {\r\n                        const foodItemsOfFoodClass = getFoodItemsSelectList(foodDataCorpus.foodItems, foodClasses[initialFoodClass].value.id, foodDataCorpus.foodNames,\r\n                            foodDataCorpus.conditions, language)\r\n\r\n                        setFoodItemsList(foodItemsOfFoodClass)\r\n                        setSelectedFoodItem(foodItemsOfFoodClass[0])\r\n                        const foodItem = foodItemsOfFoodClass[0].value\r\n\r\n                        if (foodItem && foodItem.portionData) {\r\n                            const portionDataList = getPortionReactSelectList(foodItem.portionData, foodDataCorpus.portionTypes, language)\r\n                            setPortionsList(portionDataList)\r\n\r\n                            updateSourcesList(foodItem)\r\n\r\n                            const defaultPortion = getDefaultPortionData(foodItem, portionDataList)\r\n                            setSelectedPortion(defaultPortion)\r\n                            setPortionAmount(defaultPortion.value.amount)\r\n\r\n                            if (!props.selectedFoodItem) {\r\n                                makeSelectedFoodItemObject(foodItem, foodClass.value, defaultPortion.value)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                // Update data for outer component whenever render is triggered\r\n                if(selectedFoodItem && selectdFoodClass && selectedPortion) {\r\n                    const newFoodItem = makeSelectedFoodItemObject(selectedFoodItem.value, selectdFoodClass.value, selectedPortion.value)\r\n                    if(newFoodItem) {\r\n                        props.updateSelectedFoodItem(newFoodItem)\r\n                    }\r\n                } else if(props.selectedFoodItem) {\r\n                    const {foodItem, foodClass, portion} = props.selectedFoodItem\r\n                    makeSelectedFoodItemObject(foodItem, foodClass, portion)\r\n                }\r\n            }\r\n\r\n        }, [selectedFoodItem,\r\n            selectedPortion,\r\n            selectdFoodClass,\r\n            selectedCategory,\r\n            selectedSource,\r\n            portionAmount,\r\n            supplementData,\r\n            combineData\r\n        ]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleCategoryChange = (category: ReactSelectOption) => {\r\n        setSelectedCategory(category)\r\n        updateFoodClasses(category)\r\n    }\r\n\r\n    const handleFoodClassChange = (foodClass: ReactSelectFoodClassOption) => {\r\n        setSelectedFoodClass(foodClass)\r\n        updateFoodItem(foodClass)\r\n    }\r\n\r\n    const handleFoodItemChange = (foodItem: ReactSelectFoodItemOption) => {\r\n        setSelectedFoodItem(foodItem)\r\n        updatePortionsList(foodItem.value)\r\n        updateSourcesList(foodItem.value)\r\n    }\r\n\r\n    const handlePortionChange = (portion: ReactSelectPortionOption) => {\r\n        setSelectedPortion(portion)\r\n        setPortionAmount(portion.value.amount)\r\n    }\r\n\r\n    const handleSourceChange = (source: ReactSelectOption) => {\r\n        setSelectedSource(source)\r\n    }\r\n\r\n    const handlePortionAmountChange = (e) => {\r\n        if (!e.target.value) {\r\n            setPortionAmount(0)\r\n            return\r\n        }\r\n\r\n        const amount = parseInt(e.target.value)\r\n\r\n        if (!isNaN(amount)) {\r\n            setPortionAmount(amount)\r\n        }\r\n    }\r\n\r\n    const updateFoodClasses = (category: ReactSelectOption) => {\r\n        const foodClasses = applicationContext.foodDataCorpus.foodClasses\r\n\r\n        if (foodClasses) {\r\n            const foodClassItems = getFoodClassSelectList(foodClasses, category.value, applicationContext.foodDataCorpus.foodNames, language)\r\n            setFoodClassesList(foodClassItems)\r\n            setSelectedFoodClass(foodClassItems[0])\r\n            updateFoodItem(foodClassItems[0])\r\n        }\r\n    }\r\n\r\n    const updateFoodItem = (foodClass: ReactSelectFoodClassOption) => {\r\n        const {foodItems, foodNames, conditions} = applicationContext.foodDataCorpus\r\n\r\n        if (foodItems) {\r\n            const foodClassItems = getFoodItemsSelectList(foodItems, foodClass.value.id, foodNames, conditions, language)\r\n            setFoodItemsList(foodClassItems)\r\n            setSelectedFoodItem(foodClassItems[0])\r\n\r\n            const foodItem = foodClassItems[0].value\r\n            if (foodItem) {\r\n                updatePortionsList(foodItem)\r\n                updateSourcesList(foodItem)\r\n            }\r\n        }\r\n    }\r\n\r\n    const updatePortionsList = (foodItem: FoodItem) => {\r\n        const portionDataList = getPortionReactSelectList(foodItem.portionData!!, applicationContext.foodDataCorpus.portionTypes, language)\r\n        setPortionsList(portionDataList)\r\n        const defaultPortion = getDefaultPortionData(foodItem, portionDataList)\r\n        setSelectedPortion(defaultPortion)\r\n        setPortionAmount(defaultPortion.value.amount)\r\n    }\r\n\r\n\r\n    const updateSourcesList = (foodItem: FoodItem) => {\r\n        const sourceNames = getSourceNames(foodItem)\r\n        setSourcesList(sourceNames)\r\n\r\n        if (sourceNames.length === 1) {\r\n            setSelectedSource(sourceNames[0])\r\n        } else {\r\n            const preferredSource = applicationContext.applicationData.preferredSource\r\n            const matchingSource = sourceNames.find(sourceObject => {\r\n                if (sourceObject.value === 0 && preferredSource === SOURCE_SRLEGACY) {\r\n                    return sourceObject\r\n                } else if (sourceObject.value === 1 && preferredSource === SOURCE_FNDDS) {\r\n                    return sourceObject\r\n                }\r\n            })\r\n            if (matchingSource) {\r\n                setSelectedSource(matchingSource)\r\n            } else {\r\n                setSelectedSource(sourceNames[0])\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const getSourceNames = (foodItem: FoodItem) => {\r\n        return foodItem.nutrientDataList.map(nutrientDataObject => {\r\n            const SourceName = getSourceName(nutrientDataObject.source.id)\r\n            return {label: SourceName, value: nutrientDataObject.source.id}\r\n        })\r\n    }\r\n\r\n\r\n    const makeSelectedFoodItemObject = (foodItem: FoodItem | undefined, foodClass: FoodClass | undefined, portion: PortionData | undefined): SelectedFoodItem | null => {\r\n        if (!foodItem || !foodClass || !portion) {\r\n            return null\r\n        }\r\n\r\n        if (portion.portionType === 0) {\r\n            portion.amount = portionAmount\r\n        }\r\n\r\n        const newFoodItem: SelectedFoodItem = {\r\n            foodItem: foodItem,\r\n            foodClass: foodClass,\r\n            portion: portion,\r\n            selectedSource: selectedSource ? selectedSource.value : foodItem.nutrientDataList[0].source.id,\r\n            supplementData: supplementData,\r\n            combineData: combineData\r\n        }\r\n\r\n        return newFoodItem\r\n    }\r\n\r\n    const setInitialFoodElement = () => {\r\n        if (!foodClassesList || foodClassesList.length === 0) {\r\n            return\r\n        }\r\n\r\n        if (!props.selectedFoodItem || !props.selectedFoodItem.foodClass) {\r\n            return\r\n        }\r\n\r\n        const predefinedFoodObject = props.selectedFoodItem\r\n\r\n        // @ts-ignore\r\n        const foodClassOption = foodClassesList.find(foodClass => foodClass.value.id === predefinedFoodObject.foodClass.id)\r\n        const {foodItems, foodNames, conditions, portionTypes} = applicationContext.foodDataCorpus\r\n\r\n        if (foodClassOption) {\r\n            setSelectedFoodClass(foodClassOption)\r\n            const foodClassItems = getFoodItemsSelectList(foodItems, foodClassOption.value.id, foodNames, conditions, language)\r\n\r\n            if (foodClassItems) {\r\n                setFoodItemsList(foodClassItems)\r\n                const foodItem = foodClassItems.find(foodItem => foodItem.value.id === predefinedFoodObject.foodItem.id)\r\n\r\n                if (foodItem && foodItem.value && foodItem.value.portionData) {\r\n                    setSelectedFoodItem(foodItem)\r\n\r\n                    const sourceNames = getSourceNames(foodItem.value)\r\n                    setSourcesList(sourceNames)\r\n                    const selected = sourceNames.find(sourceElement => sourceElement.value === props.selectedFoodItem?.selectedSource)\r\n                    if (selected) {\r\n                        setSelectedSource(selected)\r\n                    }\r\n\r\n                    const portionDataList = getPortionReactSelectList(foodItem.value.portionData, portionTypes, language)\r\n                    setPortionsList(portionDataList)\r\n\r\n                    const portionType = predefinedFoodObject.portion.portionType\r\n                    const portionObject = portionDataList.find(portion => portion.value.portionType === portionType)\r\n                    if (portionObject) {\r\n                        setSelectedPortion(portionObject)\r\n\r\n                        //@ts-ignore\r\n                        const amount = predefinedFoodObject.portion.amount\r\n                        setPortionAmount(amount)\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        setInitialized(true)\r\n    }\r\n\r\n    const onCheckSupplementCheckbox = () => {\r\n        setSupplementData(!supplementData)\r\n    }\r\n\r\n    const onCheckCombineCheckbox = () => {\r\n        setCombineData(!combineData)\r\n    }\r\n\r\n    if (props.selectedFoodItem && !initialized) {\r\n        setInitialFoodElement()\r\n    }\r\n\r\n    const renderSourceLine = () => {\r\n        const sourceSelectBox = (\r\n            <Select className={selectClass}\r\n                    options={sourcesList}\r\n                    isDisabled={sourcesList.length <= 1 || combineData === true}\r\n                    value={selectedSource ? selectedSource : sourcesList[0]}\r\n                    onChange={handleSourceChange}\r\n            />\r\n        )\r\n\r\n        const checkboxes = (\r\n            <div>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_source_supplement_tooltip[language]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_source_supplement[language]}\r\n                                checked={supplementData === true}\r\n                                disabled={sourcesList.length <= 1}\r\n                                onClick={onCheckSupplementCheckbox}>\r\n                    </Form.Check>\r\n                </label>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_source_combine_tooltip[language]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_source_combine[language]}\r\n                                checked={combineData === true}\r\n                                disabled={sourcesList.length <= 1}\r\n                                onClick={onCheckCombineCheckbox}>\r\n                    </Form.Check>\r\n                </label>\r\n            </div>\r\n        )\r\n\r\n        return <div>\r\n            <span className={'form-label'}>{applicationStrings.label_source[language]}:</span>\r\n            {props.smallVariant !== true ?\r\n                <div className={\"row\"}>\r\n                    <div className=\"col-4 column select-menu form-section\">\r\n                        {sourceSelectBox}\r\n                    </div>\r\n                    <div className={\"col-8\"}>\r\n                        {checkboxes}\r\n                    </div>\r\n                </div>\r\n                :\r\n                <div>\r\n                    <div>\r\n                        {sourceSelectBox}\r\n                    </div>\r\n                    <div style={{paddingLeft: \"24px\", paddingTop: \"8px\"}}>\r\n                        {checkboxes}\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    }\r\n\r\n\r\n    const amount_label = props.smallVariant\r\n        ? `${applicationStrings.label_amount_short[language]}:`\r\n        : `${applicationStrings.label_amount[language]}:`\r\n    const initialFoodClass = props.initialFoodClassToSet ? props.initialFoodClassToSet : 0\r\n\r\n    const selectClass = isSmallScreen(windowSize) ? \"form-control-sm\" : \"\"\r\n    const inputClass = isSmallScreen(windowSize) ? \"form-control form-control-sm input-sm\" : \"form-control input\"\r\n\r\n    return <div>\r\n        <div className=\"container\">\r\n            {props.noCategorySelect !== true &&\r\n            <div className=\"column select-menu form-section\">\r\n                <span className={'form-label'}>{applicationStrings.label_category[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={categoriesList}\r\n                        value={selectedCategory ? selectedCategory : categoriesList[0]}\r\n                        onChange={(value) => handleCategoryChange(value)}\r\n                />\r\n            </div>\r\n            }\r\n            <div className=\"column select-menu form-section\">\r\n                <span className={'form-label'}>{applicationStrings.label_foodclass[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={foodClassesList}\r\n                        value={selectdFoodClass ? selectdFoodClass : foodClassesList[initialFoodClass]}\r\n                        onChange={(value) => handleFoodClassChange(value)}\r\n                />\r\n            </div>\r\n            <div className=\"column select-menu form-section\">\r\n                <span className={'form-label'}>{applicationStrings.label_fooditem[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={foodItemsList}\r\n                        value={selectedFoodItem ? selectedFoodItem : foodItemsList[0]}\r\n                        onChange={handleFoodItemChange}\r\n                />\r\n            </div>\r\n            <div className=\"column select-menu form-section\">\r\n                <div className={\"row\"}>\r\n                    <div className={\"col-lg-8 col-xl-9\"}>\r\n                        <span\r\n                            className={'form-label'}>{applicationStrings.label_portion[language]}:</span>\r\n                        <Select className={selectClass}\r\n                                options={portionsList}\r\n                                value={selectedPortion ? selectedPortion : portionsList[0]}\r\n                                onChange={(value) => handlePortionChange(value)}/>\r\n                    </div>\r\n                    <div className={\"col-lg-4 col-xl-3\"}>\r\n                        <span\r\n                            className={'form-label'}>{amount_label}</span>\r\n                        <input className={inputClass}\r\n                               disabled={selectedPortion?.value.portionType !== 0}\r\n                               value={portionAmount}\r\n                               onChange={handlePortionAmountChange}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {renderSourceLine()}\r\n        </div>\r\n    </div>\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {FaTrash} from \"react-icons/all\";\r\n\r\nexport interface CompositeFoodListProps {\r\n    selectedFoodItems: Array<SelectedFoodItem>\r\n    deleteItem: (index: number) => void\r\n}\r\n\r\nexport function CompositeFoodList(props: CompositeFoodListProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const onDeleteItem = (index: number) => {\r\n        props.deleteItem(index)\r\n    }\r\n\r\n    const renderLine = (selectedFoodItem: SelectedFoodItem, index: number) => {\r\n        if(applicationContext) {\r\n            const name = getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, selectedFoodItem.foodItem.nameId!!, languageContext.language)\r\n\r\n            return <div className={\"row\"}\r\n                        key={`composite food list ${index}`}\r\n                        style={{borderBottom: \"1px solid #dddddd\", paddingTop: \"6px\"}}>\r\n                <div className={\"col-1\"}>\r\n                    <b>{index+1}.</b>\r\n                </div>\r\n                <div className={\"col-8\"}>\r\n                    {name}\r\n                    <br/>\r\n                    {selectedFoodItem.portion.amount} g\r\n                </div>\r\n                <div className={\"col-3\"}>\r\n                    <Button onClick={() => onDeleteItem(index)}>\r\n                        <FaTrash/>\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        return <div></div>\r\n    }\r\n\r\n    return <div className={\"container\"} style={{maxHeight: \"300px\", overflowY: \"auto\"}}>\r\n        {props.selectedFoodItems.map((selectedFoodItem, index) => renderLine(selectedFoodItem, index))}\r\n    </div>\r\n\r\n}","import SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodItem, {\r\n    BaseData,\r\n    CarbohydrateData,\r\n    LipidData,\r\n    MineralData,\r\n    NutrientData,\r\n    ProteinData,\r\n    VitaminData\r\n} from \"../../types/nutrientdata/FoodItem\";\r\nimport {getNutrientData} from \"../nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function combineFoodItems(compositeList: Array<SelectedFoodItem>, preferredSource): SelectedFoodItem {\r\n    let portionSize = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        portionSize += selectedFoodItem.portion.amount\r\n    })\r\n\r\n    const nutrientDataList = buildAggregatedNutrientDataList(compositeList, portionSize, preferredSource);\r\n    const id = new Date().getTime();\r\n\r\n    const aggreatedFoodItem: FoodItem = {\r\n        id: id,\r\n        nutrientDataList: nutrientDataList,\r\n        aggregated: true\r\n    }\r\n\r\n    let combinedFoodItem: SelectedFoodItem = {\r\n        id: id,\r\n        foodItem: aggreatedFoodItem,\r\n        portion: {\r\n            portionType: 999,\r\n            amount: portionSize\r\n        },\r\n        compositeSubElements: compositeList,\r\n        selectedSource: -1,\r\n        supplementData: true,\r\n        combineData: false\r\n    };\r\n\r\n    return combinedFoodItem;\r\n}\r\n\r\n\r\nfunction buildAggregatedNutrientDataList(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): Array<NutrientData> {\r\n    const baseData = buildBaseDataObject(compositeList, portionSize, preferredSource);\r\n    const vitaminData = buildVitaminDataObject(compositeList, portionSize, preferredSource);\r\n    const mineralData = buildMineralDataObject(compositeList, portionSize, preferredSource);\r\n    const carbohydrateData = buildCarbohydrateData(compositeList, portionSize, preferredSource);\r\n    const lipidData = buildLipidData(compositeList, portionSize, preferredSource);\r\n    const proteinData = buildProteinData(compositeList, portionSize, preferredSource);\r\n\r\n    let nutrientObject: NutrientData = {\r\n        sourceItemId: \"0\",\r\n        source: {id: 0, url: \"\", name: \"\"},\r\n        baseData: baseData,\r\n        vitaminData: vitaminData,\r\n        mineralData: mineralData,\r\n        carbohydrateData: carbohydrateData,\r\n        lipidData: lipidData,\r\n        proteinData: proteinData\r\n    }\r\n\r\n    nutrientObject = removeNutrientObjectsWithNullValues(nutrientObject, compositeList, preferredSource);\r\n\r\n    const nutrientDataList: Array<NutrientData> = [];\r\n    nutrientDataList.push(nutrientObject);\r\n\r\n    return nutrientDataList;\r\n}\r\n\r\n\r\n/**\r\n * Removes all nutrient data elements that do not exist in ALL of the food elements within the list.\r\n * @param nutrientObject\r\n * @param compositeList\r\n */\r\nfunction removeNutrientObjectsWithNullValues(nutrientObject: NutrientData, compositeList: Array<SelectedFoodItem>, preferredSource: string) {\r\n    if (!compositeList) {\r\n        return nutrientObject;\r\n    }\r\n\r\n    for (let i = 0; i < compositeList.length; i++) {\r\n        let selectedFoodItem = compositeList[i]\r\n        const nutrientData = getNutrientData(selectedFoodItem)\r\n        const threshold = 0.1;   // Defines the amount of base data which must exist to set a sub-value to null.\r\n\r\n        // Remove base data\r\n        if (nutrientData.baseData.carbohydrates >= threshold) {\r\n            if (nutrientData.baseData.dietaryFibers == null) {\r\n                nutrientObject.baseData.dietaryFibers = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Lipid data\r\n        if (nutrientData.baseData.lipids >= threshold) {\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.saturated == null) {\r\n                nutrientObject.lipidData.saturated = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.unsaturatedMono == null) {\r\n                nutrientObject.lipidData.unsaturatedMono = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.unsaturatedPoly == null) {\r\n                nutrientObject.lipidData.unsaturatedPoly = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.transFattyAcids == null) {\r\n                nutrientObject.lipidData.transFattyAcids = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.cholesterol == null) {\r\n                nutrientObject.lipidData.cholesterol = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData.omegaData &&\r\n                (nutrientData.lipidData && nutrientData.lipidData.unsaturatedPoly && nutrientData.lipidData.unsaturatedPoly > threshold)) {\r\n                nutrientObject.lipidData.omegaData = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Carbohydrate data\r\n        if (nutrientData.baseData.carbohydrates >= threshold) {\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.sugar == null) {\r\n                nutrientObject.carbohydrateData.sugar = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.glucose == null) {\r\n                nutrientObject.carbohydrateData.glucose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.fructose == null) {\r\n                nutrientObject.carbohydrateData.fructose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.galactose == null) {\r\n                nutrientObject.carbohydrateData.galactose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.sucrose == null) {\r\n                nutrientObject.carbohydrateData.sucrose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.lactose == null) {\r\n                nutrientObject.carbohydrateData.lactose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.maltose == null) {\r\n                nutrientObject.carbohydrateData.maltose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.starch == null) {\r\n                nutrientObject.carbohydrateData.starch = null;\r\n            }\r\n        }\r\n\r\n\r\n\t\t// Vitamins:\r\n\t\tif(nutrientData.vitaminData.a === null) {\r\n\t\t\tnutrientObject.vitaminData.a = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b1 === null) {\r\n\t\t\tnutrientObject.vitaminData.b1 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b2 === null) {\r\n\t\t\tnutrientObject.vitaminData.b2 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b3 === null) {\r\n\t\t\tnutrientObject.vitaminData.b3 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b5 === null) {\r\n\t\t\tnutrientObject.vitaminData.b5 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b6 === null) {\r\n\t\t\tnutrientObject.vitaminData.b6 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b7 === null) {\r\n\t\t\tnutrientObject.vitaminData.b7 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b9 === null) {\r\n\t\t\tnutrientObject.vitaminData.b9 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b12 === null) {\r\n\t\t\tnutrientObject.vitaminData.b12 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.c === null) {\r\n\t\t\tnutrientObject.vitaminData.c = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.d === null) {\r\n\t\t\tnutrientObject.vitaminData.d = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.e === null) {\r\n\t\t\tnutrientObject.vitaminData.e = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.k === null) {\r\n\t\t\tnutrientObject.vitaminData.k = null\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// Minerals:\r\n\t\tif(nutrientData.mineralData.calcium === null) {\r\n\t\t\tnutrientObject.mineralData.calcium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.copper === null) {\r\n\t\t\tnutrientObject.mineralData.copper = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.iron === null) {\r\n\t\t\tnutrientObject.mineralData.iron = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.magnesium === null) {\r\n\t\t\tnutrientObject.mineralData.magnesium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.manganese === null) {\r\n\t\t\tnutrientObject.mineralData.manganese = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.phosphorus === null) {\r\n\t\t\tnutrientObject.mineralData.phosphorus = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.potassium === null) {\r\n\t\t\tnutrientObject.mineralData.potassium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.selenium === null) {\r\n\t\t\tnutrientObject.mineralData.selenium = null\r\n\t\t}\r\n\r\n\t\tif(nutrientData.mineralData.sodium === null) {\r\n\t\t\tnutrientObject.mineralData.sodium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.zinc === null) {\r\n\t\t\tnutrientObject.mineralData.zinc = null\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// Proteins:\r\n\t\t\r\n\t\tif(nutrientData.proteinData.alanine === null) {\r\n\t\t\tnutrientObject.proteinData.alanine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.arginine === null) {\r\n\t\t\tnutrientObject.proteinData.arginine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.asparticAcid === null) {\r\n\t\t\tnutrientObject.proteinData.asparticAcid = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.cystine === null) {\r\n\t\t\tnutrientObject.proteinData.cystine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.glutamicAcid === null) {\r\n\t\t\tnutrientObject.proteinData.glutamicAcid = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.glycine === null) {\r\n\t\t\tnutrientObject.proteinData.glycine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.histidine === null) {\r\n\t\t\tnutrientObject.proteinData.histidine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.isoleucine === null) {\r\n\t\t\tnutrientObject.proteinData.isoleucine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.leucine === null) {\r\n\t\t\tnutrientObject.proteinData.leucine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.lysine === null) {\r\n\t\t\tnutrientObject.proteinData.lysine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.methionine === null) {\r\n\t\t\tnutrientObject.proteinData.methionine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.phenylalanine === null) {\r\n\t\t\tnutrientObject.proteinData.phenylalanine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.proline === null) {\r\n\t\t\tnutrientObject.proteinData.proline = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.serine === null) {\r\n\t\t\tnutrientObject.proteinData.serine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.threonine === null) {\r\n\t\t\tnutrientObject.proteinData.threonine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.tryptophan === null) {\r\n\t\t\tnutrientObject.proteinData.tryptophan = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.tyrosine === null) {\r\n\t\t\tnutrientObject.proteinData.tyrosine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.valine === null) {\r\n\t\t\tnutrientObject.proteinData.valine = null\r\n\t\t}\r\n\r\n    }\r\n\r\n    return nutrientObject;\r\n}\r\n\r\n\r\nfunction buildBaseDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): BaseData {\r\n    let energy = 0;\r\n    let carbohydrates = 0;\r\n    let lipids = 0;\r\n    let proteins = 0;\r\n    let water = 0;\r\n    let dietaryFibers = 0;\r\n    let alcohol = 0;\r\n    let ash = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const baseData = getNutrientData(selectedFoodItem).baseData;\r\n        const userSetPortion = selectedFoodItem.portion.amount;\r\n        const portionFactor = userSetPortion / 100;\r\n\r\n        energy += (baseData.energy ? baseData.energy : 0) * portionFactor;\r\n        carbohydrates += baseData.carbohydrates * portionFactor;\r\n        lipids += baseData.lipids * portionFactor;\r\n        proteins += baseData.proteins * portionFactor;\r\n        water += baseData.water * portionFactor;\r\n        dietaryFibers += (baseData.dietaryFibers ? baseData.dietaryFibers : 0) * portionFactor;\r\n        alcohol += (baseData.alcohol ? baseData.alcohol : 0) * portionFactor;\r\n        ash += (baseData.ash ? baseData.ash : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        energy: createFinalValue(energy, portionSize),\r\n        carbohydrates: createFinalValue(carbohydrates, portionSize),\r\n        lipids: createFinalValue(lipids, portionSize),\r\n        proteins: createFinalValue(proteins, portionSize),\r\n        water: createFinalValue(water, portionSize),\r\n        dietaryFibers: createFinalValue(dietaryFibers, portionSize),\r\n        alcohol: alcohol,\r\n        ash: ash\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction buildVitaminDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): VitaminData {\r\n    let a = 0\r\n    let b1 = 0\r\n    let b2 = 0\r\n    let b3 = 0\r\n    let b5 = 0\r\n    let b6 = 0\r\n    let b7 = 0\r\n    let b9 = 0\r\n    let b12 = 0\r\n    let c = 0\r\n    let d = 0\r\n    let e = 0\r\n    let k = 0\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const vitaminData = getNutrientData(selectedFoodItem).vitaminData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        a += (vitaminData.a ? vitaminData.a : 0) * portionFactor\r\n        b1 += (vitaminData.b1 ? vitaminData.b1 : 0) * portionFactor\r\n        b2 += (vitaminData.b2 ? vitaminData.b2 : 0) * portionFactor\r\n        b3 += (vitaminData.b3 ? vitaminData.b3 : 0) * portionFactor\r\n        b5 += (vitaminData.b5 ? vitaminData.b5 : 0) * portionFactor\r\n        b6 += (vitaminData.b6 ? vitaminData.b6 : 0) * portionFactor\r\n        b7 += (vitaminData.b7 ? vitaminData.b7 : 0) * portionFactor\r\n        b9 += (vitaminData.b9 ? vitaminData.b9 : 0) * portionFactor\r\n        b12 += (vitaminData.b12 ? vitaminData.b12 : 0) * portionFactor\r\n        c += (vitaminData.c ? vitaminData.c : 0) * portionFactor\r\n        d += (vitaminData.d ? vitaminData.d : 0) * portionFactor\r\n        e += (vitaminData.e ? vitaminData.e : 0) * portionFactor\r\n        k += (vitaminData.k ? vitaminData.k : 0) * portionFactor\r\n    })\r\n\r\n    return {\r\n        a: createFinalValue(a, portionSize),\r\n        b1: createFinalValue(b1, portionSize),\r\n        b2: createFinalValue(b2, portionSize),\r\n        b3: createFinalValue(b3, portionSize),\r\n        b5: createFinalValue(b5, portionSize),\r\n        b6: createFinalValue(b6, portionSize),\r\n        b7: createFinalValue(b7, portionSize),\r\n        b9: createFinalValue(b9, portionSize),\r\n        b12: createFinalValue(b12, portionSize),\r\n        c: createFinalValue(c, portionSize),\r\n        d: createFinalValue(d, portionSize),\r\n        e: createFinalValue(e, portionSize),\r\n        k: createFinalValue(k, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildMineralDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): MineralData {\r\n    let calcium = 0;\r\n    let iron = 0;\r\n    let magnesium = 0;\r\n    let phosphorus = 0;\r\n    let potassium = 0;\r\n    let sodium = 0;\r\n    let zinc = 0;\r\n    let copper = 0;\r\n    let manganese = 0;\r\n    let selenium = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const mineralData = getNutrientData(selectedFoodItem).mineralData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        calcium += (mineralData.calcium ? mineralData.calcium : 0) * portionFactor;\r\n        iron += (mineralData.iron ? mineralData.iron : 0) * portionFactor;\r\n        magnesium += (mineralData.magnesium ? mineralData.magnesium : 0)\r\n        phosphorus += (mineralData.phosphorus ? mineralData.phosphorus : 0)\r\n        potassium += (mineralData.potassium ? mineralData.potassium : 0)\r\n        sodium += (mineralData.sodium ? mineralData.sodium : 0)\r\n        zinc += (mineralData.zinc ? mineralData.zinc : 0)\r\n        copper += (mineralData.copper ? mineralData.copper : 0)\r\n        manganese += (mineralData.manganese ? mineralData.manganese : 0)\r\n        selenium += (mineralData.selenium ? mineralData.selenium : 0)\r\n    })\r\n\r\n    return {\r\n        calcium: createFinalValue(calcium, portionSize),\r\n        iron: createFinalValue(iron, portionSize),\r\n        magnesium: createFinalValue(magnesium, portionSize),\r\n        phosphorus: createFinalValue(phosphorus, portionSize),\r\n        potassium: createFinalValue(potassium, portionSize),\r\n        sodium: createFinalValue(sodium, portionSize),\r\n        zinc: createFinalValue(zinc, portionSize),\r\n        copper: createFinalValue(copper, portionSize),\r\n        manganese: createFinalValue(manganese, portionSize),\r\n        selenium: createFinalValue(selenium, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildCarbohydrateData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): CarbohydrateData {\r\n    let glucose = 0;\r\n    let fructose = 0;\r\n    let galactose = 0;\r\n    let sucrose = 0;\r\n    let maltose = 0;\r\n    let lactose = 0;\r\n    let starch = 0;\r\n    let sugar = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const carbohydrateData = getNutrientData(selectedFoodItem).carbohydrateData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        glucose += (carbohydrateData.glucose ? carbohydrateData.glucose : 0) * portionFactor;\r\n        fructose += (carbohydrateData.fructose ? carbohydrateData.fructose : 0) * portionFactor;\r\n        galactose += (carbohydrateData.galactose ? carbohydrateData.galactose : 0) * portionFactor;\r\n        sucrose += (carbohydrateData.sucrose ? carbohydrateData.sucrose : 0) * portionFactor;\r\n        maltose += (carbohydrateData.maltose ? carbohydrateData.maltose : 0) * portionFactor;\r\n        lactose += (carbohydrateData.lactose ? carbohydrateData.lactose : 0) * portionFactor;\r\n        starch += (carbohydrateData.starch ? carbohydrateData.starch : 0) * portionFactor;\r\n        sugar += (carbohydrateData.sugar ? carbohydrateData.sugar : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        glucose: createFinalValue(glucose, portionSize),\r\n        fructose: createFinalValue(fructose, portionSize),\r\n        galactose: createFinalValue(galactose, portionSize),\r\n        sucrose: createFinalValue(sucrose, portionSize),\r\n        maltose: createFinalValue(maltose, portionSize),\r\n        lactose: createFinalValue(lactose, portionSize),\r\n        starch: createFinalValue(starch, portionSize),\r\n        sugar: createFinalValue(sugar, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildProteinData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): ProteinData {\r\n    let tryptophan = 0;\r\n    let threonine = 0;\r\n    let isoleucine = 0;\r\n    let leucine = 0;\r\n    let lysine = 0;\r\n    let methionine = 0;\r\n    let cystine = 0;\r\n    let phenylalanine = 0;\r\n    let tyrosine = 0;\r\n    let valine = 0;\r\n    let arginine = 0;\r\n    let histidine = 0;\r\n    let alanine = 0;\r\n    let asparticAcid = 0;\r\n    let glutamicAcid = 0;\r\n    let glycine = 0;\r\n    let proline = 0;\r\n    let serine = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const proteinData = getNutrientData(selectedFoodItem).proteinData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        tryptophan += (proteinData.tryptophan ? proteinData.tryptophan : 0) * portionFactor;\r\n        threonine += (proteinData.threonine ? proteinData.threonine : 0) * portionFactor;\r\n        isoleucine += (proteinData.isoleucine ? proteinData.isoleucine : 0) * portionFactor;\r\n        leucine += (proteinData.leucine ? proteinData.leucine : 0) * portionFactor;\r\n        lysine += (proteinData.lysine ? proteinData.lysine : 0) * portionFactor;\r\n        methionine += (proteinData.methionine ? proteinData.methionine : 0) * portionFactor;\r\n        cystine += (proteinData.cystine ? proteinData.cystine : 0) * portionFactor;\r\n        phenylalanine += (proteinData.phenylalanine ? proteinData.phenylalanine : 0) * portionFactor;\r\n        tyrosine += (proteinData.tyrosine ? proteinData.tyrosine : 0) * portionFactor;\r\n        valine += (proteinData.valine ? proteinData.valine : 0) * portionFactor;\r\n        arginine += (proteinData.arginine ? proteinData.arginine : 0) * portionFactor;\r\n        histidine += (proteinData.histidine ? proteinData.histidine : 0) * portionFactor;\r\n        alanine += (proteinData.alanine ? proteinData.alanine : 0) * portionFactor;\r\n        asparticAcid += (proteinData.asparticAcid ? proteinData.asparticAcid : 0) * portionFactor;\r\n        glutamicAcid += (proteinData.glutamicAcid ? proteinData.glutamicAcid : 0) * portionFactor;\r\n        glycine += (proteinData.glycine ? proteinData.glycine : 0) * portionFactor;\r\n        proline += (proteinData.proline ? proteinData.proline : 0) * portionFactor;\r\n        serine += (proteinData.serine ? proteinData.serine : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        tryptophan: createFinalValue(tryptophan, portionSize),\r\n        threonine: createFinalValue(threonine, portionSize),\r\n        isoleucine: createFinalValue(isoleucine, portionSize),\r\n        leucine: createFinalValue(leucine, portionSize),\r\n        lysine: createFinalValue(lysine, portionSize),\r\n        methionine: createFinalValue(methionine, portionSize),\r\n        cystine: createFinalValue(cystine, portionSize),\r\n        phenylalanine: createFinalValue(phenylalanine, portionSize),\r\n        tyrosine: createFinalValue(tyrosine, portionSize),\r\n        valine: createFinalValue(valine, portionSize),\r\n        arginine: createFinalValue(arginine, portionSize),\r\n        histidine: createFinalValue(histidine, portionSize),\r\n        alanine: createFinalValue(alanine, portionSize),\r\n        asparticAcid: createFinalValue(asparticAcid, portionSize),\r\n        glutamicAcid: createFinalValue(glutamicAcid, portionSize),\r\n        glycine: createFinalValue(glycine, portionSize),\r\n        proline: createFinalValue(proline, portionSize),\r\n        serine: createFinalValue(serine, portionSize),\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction buildLipidData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): LipidData {\r\n    let unsaturatedMono = 0;\r\n    let unsaturatedPoly = 0;\r\n    let saturated = 0;\r\n    let omega3 = 0;\r\n    let omega6 = 0;\r\n    let omegaUncertain = 0;\r\n    let cholesterol = 0;\r\n    let transFattyAcids = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const lipidData = getNutrientData(selectedFoodItem).lipidData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        unsaturatedMono += (lipidData.unsaturatedMono ? lipidData.unsaturatedMono : 0) * portionFactor;\r\n        unsaturatedPoly += (lipidData.unsaturatedPoly ? lipidData.unsaturatedPoly : 0) * portionFactor;\r\n        saturated += (lipidData.saturated ? lipidData.saturated : 0) * portionFactor;\r\n        omega3 += (lipidData.omegaData?.omega3 ? lipidData.omegaData.omega3 : 0) * portionFactor;\r\n        omega6 += (lipidData.omegaData?.omega6 ? lipidData.omegaData.omega6 : 0) * portionFactor;\r\n        omegaUncertain += (lipidData.omegaData?.uncertain ? lipidData.omegaData.uncertain : 0) * portionFactor;\r\n        cholesterol += (lipidData.cholesterol ? lipidData.cholesterol : 0) * portionFactor;\r\n        transFattyAcids += (lipidData.transFattyAcids ? lipidData.transFattyAcids : 0) * portionFactor;\r\n    })\r\n\r\n    const omegaRatio = (omega3 + omega6) / (omega3 + omega6 + omegaUncertain)\r\n\r\n    return {\r\n        unsaturatedMono: createFinalValue(unsaturatedMono, portionSize),\r\n        unsaturatedPoly: createFinalValue(unsaturatedPoly, portionSize),\r\n        saturated: createFinalValue(saturated, portionSize),\r\n        omegaData: {\r\n            omega3: createFinalValue(omega3, portionSize),\r\n            omega6: createFinalValue(omega6, portionSize),\r\n            uncertain: createFinalValue(omegaUncertain, portionSize),\r\n            uncertainRatio: omegaRatio\r\n        },\r\n        cholesterol: createFinalValue(cholesterol, portionSize),\r\n        transFattyAcids: createFinalValue(transFattyAcids, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction createFinalValue(value, totalPortionAmount) {\r\n    return (value / totalPortionAmount) * 100;\r\n}","import React, {useContext, useState} from 'react'\r\n\r\nimport {Button, Modal} from 'react-bootstrap'\r\n\r\nimport {NotificationManager} from 'react-notifications'\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\nimport FoodSelector from \"./FoodSelector\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {CompositeFoodList} from \"./CompositeFoodList\";\r\nimport {maximalPortionSize} from \"../../config/ApplicationSetting\";\r\nimport combineFoodItems from \"../../service/calculation/FoodDataAggregationService\";\r\n\r\nexport interface FoodSelectorModalProps {\r\n    onHide: () => void,\r\n    selectedFoodItemCallback: (selectedFoodItem: SelectedFoodItem) => void\r\n    compositeSelector: boolean\r\n}\r\n\r\n\r\nconst FoodSelectorModal: React.FC<FoodSelectorModalProps> = (props: FoodSelectorModalProps) => {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const [selectedFoodItem, setSelectedFoodItem] = useState<SelectedFoodItem | null>(null)\r\n    const [compositeList, setCompositeList] = useState<Array<SelectedFoodItem>>([])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateSelectedFoodItem = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem(selectedFoodItem)\r\n    }\r\n\r\n    const addCompositeElement = () => {\r\n        if (selectedFoodItem !== null) {\r\n            if(selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n                NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n                return;\r\n            }\r\n\r\n            const newList: Array<SelectedFoodItem> = [...compositeList]\r\n            newList.push(selectedFoodItem)\r\n            setCompositeList(newList)\r\n        }\r\n    }\r\n\r\n    const deleteCompositeElement = (index: number) => {\r\n        const newList: Array<SelectedFoodItem> = [...compositeList]\r\n        newList.splice(index, 1)\r\n        setCompositeList(newList)\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (props.compositeSelector) {\r\n            onSubmitComposite()\r\n        } else {\r\n            onSubmitSingleItem()\r\n        }\r\n    }\r\n\r\n    const onSubmitSingleItem = () => {\r\n        const foodItemId = selectedFoodItem ? selectedFoodItem.foodItem.id : null\r\n        if (foodItemId) {\r\n            const existingItemInList = applicationContext?.applicationData.foodDataPanel.selectedFoodItems.find(foodItem => foodItem.id === foodItemId)\r\n\r\n            if (existingItemInList) {\r\n                NotificationManager.error(applicationStrings.message_error_existing_element[language])\r\n                return\r\n            }\r\n        }\r\n\r\n        if (!selectedFoodItem || !selectedFoodItem.foodItem || !selectedFoodItem.foodClass || !selectedFoodItem.portion) {\r\n            NotificationManager.error(applicationStrings.message_error_incomplete_form[language])\r\n        } else if (selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n            NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n        } else {\r\n            props.selectedFoodItemCallback(selectedFoodItem)\r\n            props.onHide()\r\n        }\r\n    }\r\n\r\n    const onSubmitComposite = () => {\r\n        const preferredSource = applicationContext.applicationData.preferredSource\r\n        let aggregatedSelectedFoodItem = combineFoodItems(compositeList, preferredSource)\r\n\r\n        if(!aggregatedSelectedFoodItem) {\r\n            console.error('Error while creating aggregated food item.')\r\n            return\r\n        }\r\n\r\n\t\taggregatedSelectedFoodItem = {...aggregatedSelectedFoodItem, aggregated: true}\r\n        props.selectedFoodItemCallback(aggregatedSelectedFoodItem)\r\n        props.onHide()\r\n    }\r\n\r\n    const onCancel = () => {\r\n        props.onHide()\r\n    }\r\n\r\n    const title = props.compositeSelector ? applicationStrings.label_foodselector_composite[language] : applicationStrings.label_foodselector[language]\r\n\r\n    return (\r\n        <Modal size={'lg'} show={true} onHide={props.onHide}>\r\n            <Modal.Header>\r\n                <b>{title}</b>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div>\r\n                    {!props.compositeSelector ?\r\n                        <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem} smallVariant={false}/>\r\n                        :\r\n                        <div className={\"container\"}>\r\n                            <div className={\"row\"}>\r\n                                <div className={\"col-6\"}>\r\n                                    <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                                  smallVariant={true}/>\r\n                                </div>\r\n                                <div className={\"col-6\"}>\r\n                                    <CompositeFoodList selectedFoodItems={compositeList}\r\n                                                       deleteItem={deleteCompositeElement}/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <div className={\"container-fluid\"}>\r\n                    {props.compositeSelector ?\r\n                        <Button className={\"form-button float-end\"}\r\n                                onClick={onSubmit}\r\n                                disabled={!compositeList || compositeList.length < 1}>\r\n                            {applicationStrings.button_show[language]}\r\n                        </Button>\r\n                        :\r\n                        <Button className={\"form-button float-end\"} onClick={onSubmit}>\r\n                            {applicationStrings.button_select[language]}\r\n                        </Button>\r\n                    }\r\n\r\n                    {props.compositeSelector &&\r\n                    <Button className={\"form-button float-end\"} onClick={addCompositeElement}>\r\n                        {applicationStrings.button_add[language]}\r\n                    </Button>\r\n                    }\r\n\r\n                    <Button className={\"btn-secondary form-button float-end\"} onClick={onCancel}>\r\n                        {applicationStrings.button_cancel[language]}\r\n                    </Button>\r\n                </div>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n\r\n}\r\n\r\nexport default FoodSelectorModal","import React from \"react\";\r\n\r\nimport {confirmable, createConfirmation} from \"react-confirm\";\r\nimport {Button, Modal} from \"react-bootstrap\";\r\n\r\ninterface ConfirmationDialogProps {\r\n    okLabel: string,\r\n    cancelLabel: string,\r\n    title: string,\r\n    confirmation: string,\r\n    show: boolean,\r\n    proceed: (procedd: boolean) => void, // called when ok button is clicked.\r\n    enableEscape: boolean,\r\n    small?: boolean\r\n}\r\n\r\nclass ConfirmationDialog extends React.Component<ConfirmationDialogProps> {\r\n\r\n    render() {\r\n        const {\r\n            okLabel,\r\n            cancelLabel,\r\n            title,\r\n            confirmation,\r\n            show,\r\n            proceed,\r\n            enableEscape = true,\r\n            small\r\n        } = this.props;\r\n\r\n        const size = small ? \"sm\" : \"lg\"\r\n\r\n        return (\r\n            <Modal\r\n                show={show}\r\n                onHide={() => proceed(false)}\r\n                backdrop={enableEscape ? true : \"static\"}\r\n                keyboard={enableEscape}\r\n                fullscreen={true}>\r\n                <Modal.Header>\r\n                    <Modal.Title>{title}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>{confirmation}</Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button style={{minWidth: \"80px\"}}\r\n                            onClick={() => proceed(false)}>\r\n                        {cancelLabel}\r\n                    </Button>\r\n                    <Button\r\n                        style={{minWidth: \"80px\"}}\r\n                        className=\"primary button-l\"\r\n                        onClick={() => proceed(true)}>\r\n                        {okLabel}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function confirmAction(\r\n    confirmation,\r\n    okLabel,\r\n    cancelLabel,\r\n    options = {},\r\n    small?\r\n) {\r\n    return createConfirmation(confirmable(ConfirmationDialog))({\r\n        confirmation,\r\n        okLabel,\r\n        cancelLabel,\r\n        ...options,\r\n        small\r\n    });\r\n}\r\n","/**\r\n * Checks whether a value is a positive integer value.\r\n */\r\nexport function isPositiveIntegerValue(value) {\r\n    const number = Number(value);\r\n    return Number.isInteger(number) && number > 0;\r\n}\r\n\r\n/**\r\n * Checks whether a value is a positive integer value or 0.\r\n */\r\nexport function isPositiveIntegerValueOrZero(value) {\r\n    const number = Number(value);\r\n    return Number.isInteger(number) && number >= 0;\r\n}\r\n\r\n/**\r\n * Rounds a value between 0 and 100 automatically to a reasonable number of digits:\r\n *\r\n * - Generally the value is rounded to one digit.\r\n * - Between 1 and 10, the value is rounded to two digits.\r\n * - Between 0.1 and 1, the value is rounded to three digits.\r\n * - Between 0.01 and 0.1, the value is rounded to four digits.\r\n * - Otherwise it is rounded to five digits.\r\n *\r\n */\r\nexport function autoRound(value) {\r\n    let roundFactor = 0;   // Default round factor\r\n\r\n    if(value >= 100) {\r\n        roundFactor = 0;\r\n    } else if(value < 100 && value >= 10) {\r\n        roundFactor = 1;\r\n    } else if(value < 10 && value >= 1) {\r\n        roundFactor = 2;\r\n    } else if(value < 1 && value >= 0.1) {\r\n        roundFactor = 3;\r\n    } else if(value < 0.1 && value >= 0.01) {\r\n        roundFactor = 4;\r\n    } else {\r\n        roundFactor = 5;\r\n    }\r\n\r\n    return round(value, roundFactor);\r\n}\r\n\r\n/**\r\n * Simple round function to round a number to a specific number of digits.\r\n */\r\nexport function round(value, digits) {\r\n    const roundFactor = Math.pow(10, digits);\r\n    return (Math.round(value * roundFactor)) / roundFactor;\r\n}\r\n\r\nexport function roundToNextValue(chartMaxValue: number) {\r\n\r\n    const roundUp = (value: number, multiple: number) => {\r\n        const remainder = value % multiple\r\n        if (remainder === 0) {\r\n            return value\r\n        } else {\r\n            return value + multiple - remainder\r\n        }\r\n    }\r\n\r\n    let multiple\r\n    if (chartMaxValue < 0.2) {\r\n        multiple = 0.1\r\n    } else if (chartMaxValue < 0.5) {\r\n        multiple = 0.2\r\n    } else if (chartMaxValue < 1) {\r\n        multiple = 0.5\r\n    } else if (chartMaxValue < 2) {\r\n        multiple = 1\r\n    } else if (chartMaxValue < 5) {\r\n        multiple = 2\r\n    } else if (chartMaxValue < 10) {\r\n        multiple = 5\r\n    } else if (chartMaxValue < 20) {\r\n        multiple = 10\r\n    } else if (chartMaxValue < 50) {\r\n        multiple = 20\r\n    } else if (chartMaxValue < 100) {\r\n        multiple = 50\r\n    } else if (chartMaxValue < 200) {\r\n        multiple = 100\r\n    } else if (chartMaxValue < 500) {\r\n        multiple = 200\r\n    } else if (chartMaxValue < 1000) {\r\n        multiple = 500\r\n    } else if (chartMaxValue < 2000) {\r\n        multiple = 1000\r\n    } else if (chartMaxValue < 5000) {\r\n        multiple = 2000\r\n    } else if (chartMaxValue < 10000) {\r\n        multiple = 5000\r\n    } else if (chartMaxValue < 20000) {\r\n        multiple = 10000\r\n    } else if (chartMaxValue < 50000) {\r\n        multiple = 20000\r\n    } else if (chartMaxValue < 100000) {\r\n        multiple = 50000\r\n    } else if (chartMaxValue < 200000) {\r\n        multiple = 100000\r\n    } else {\r\n        multiple = 200000\r\n    }\r\n\r\n    // Add 1 % buffer to the maximum value\r\n    chartMaxValue = chartMaxValue * 1.01\r\n\r\n    return round(roundUp(chartMaxValue, multiple),2)\r\n}\r\n\r\n\r\n/**\r\n * Returns a number of fixed length with leading zeros.\r\n */\r\nexport function getNumberOfFixedLength(number: number, digits: number): string {\r\n\tlet numberString = `${number}`\r\n\twhile(numberString.length < digits) {\r\n\t\tnumberString = `0${numberString}`\r\n\t}\r\n\treturn numberString\r\n}\r\n\r\n\r\nexport function convertBooleanToDigit(value: boolean) {\r\n\treturn value === true ? 1 : 0\r\n}\r\n\r\nexport function convertStringToBoolean(value: string) {\r\n\treturn value === \"1\" ? true : false\r\n}\r\n","export const color_yellow = \"rgba(255, 255, 153, 1.0)\";   // Default for Lipids\r\nexport const color_green = \"rgba(132, 225, 132, 1.0)\";   // Default for Carbs\r\n\r\nexport const color_green_light = \"rgba(196, 236, 193, 1.0)\";   // Default for Sugar (as part of carbs)\r\nexport const color_red = \"rgba(255, 204, 204, 1.0)\";   // Default for proteins\r\nexport const color_blue = \"rgba(133, 193, 233, 1.0)\";   // Default for Water\r\nexport const color_purple = \"rgba(213, 205, 237, 1.0)\"; // Default color for a blue line\r\n\r\nexport const color_brown = \"rgba(202, 132, 0)\";\r\n\r\nexport const color_gray = \"rgba(235, 235, 235, 1.0)\"; // Default color for a blue line\r\nexport const color_line_blue = \"rgba(0, 107, 215, 1.0)\"; // Default color for a blue line\r\nexport const color_line_red = \"rgba(255, 102, 102, 1.0)\"; // Default color for a red line\r\n\r\nexport const color_chart_green_1 = \"rgba(39, 177, 96)\";\t\t// Dark green\r\nexport const color_chart_green_2 = \"rgba(137, 238, 137)\";\t// Normal green\r\nexport const color_chart_green_3 = \"rgba(214, 245, 214)\";\t\t// Light green\r\n\r\nexport const color_chart_yellow_1 = \"rgba(212, 172, 13)\";\t\t// Dark yellow\r\nexport const color_chart_yellow_2 = \"rgba(244, 208, 63)\";\t// Normal yellow\r\nexport const color_chart_yellow_3 = \"rgba(249, 231, 159)\";\t\t// Light yellow\r\n\r\nexport const color_chart_orange = \"rgba(230, 126, 34)\";\r\nexport const color_chart_misc = color_gray;\r\n\r\nexport const basedata_chart_height = 300;\r\nexport const basedata_piechart_width = 300;\r\nexport const basedata_barchart_width = 380;\r\n\r\nexport const default_chart_height = 380;\r\nexport const default_chart_width = 800;\r\n\r\nexport const direct_compare_chartheight = 300;\r\n\r\nexport const energy_chart_height = 413;\r\n\r\nexport const minimal_table_height = energy_chart_height;\r\n\r\nexport const max_portion = 5000;\r\n\r\nexport const color_water = color_blue;\r\nexport const color_lipids = color_yellow;\r\nexport const color_carbs = color_green;\r\nexport const color_carbs_sugar = color_green_light;\r\nexport const color_carbs_dietaryFibers = color_chart_green_1;\r\nexport const color_carbs_misc = color_gray;\r\n\r\nexport const color_proteins = color_red;\r\n\r\nexport const color_lipids_saturated = color_brown;\r\nexport const color_lipids_unsaturated_mono = color_chart_yellow_2;\r\nexport const color_lipids_unsaturated_poly = color_chart_yellow_3;\r\n\r\nexport const color_lipids_omega3 = color_chart_yellow_2;\r\nexport const color_lipids_omega6 = color_brown;\r\n\r\nexport const color_lipids_misc = color_gray;\r\n\r\nexport const color_ash = color_gray;\r\n\r\nexport const direct_compare_color1 = \"#ffe085\"\r\nexport const direct_compare_color2 = \"#d9ecff\"","/**\r\n * Returns a default-styled configuration for a bar chart.\r\n *\r\n * title: The charts title.\r\n * unit: The unit to use for the axis title and tooltip.\r\n * minYValue: Optional, a pre-defined maxYValue for the Y axis (e.g. 100)\r\n */\r\nimport {shortenName} from \"./nutrientdata/NameTypeService\";\r\n\r\nexport function getBarChartOptions(title: string, unit: string, maxYValue?: number | undefined) {\r\n    let yAxis: any = {\r\n        title: {\r\n            display: true,\r\n            text: unit\r\n        }\r\n    }\r\n\r\n    if(maxYValue) {\r\n        yAxis = {...yAxis, min: 0, max: maxYValue}\r\n    }\r\n\r\n    const scalesObject = {y: yAxis}\r\n\r\n    return getOptions(title, unit, scalesObject);\r\n}\r\n\r\n\r\nexport function getBarChartOptionsForRanking(title: string, unit: string) {\r\n    const scales = getScalesForRankingChart(unit);\r\n    return getOptions(title, unit, scales);\r\n}\r\n\r\n\r\nexport function getPieChartOptions(title: string, unit: string) {\r\n    return getOptions(title, unit);\r\n}\r\n\r\n\r\nfunction getOptions(title: string, unit: string, scalesObject?: any | undefined) {\r\n    const titleObj = title ? {display: true, text: title, fontSize: 18} : null;\r\n\r\n    let options: any = {\r\n        maintainAspectRatio: false,\r\n        responsive: true,\r\n        plugins: {\r\n            title: titleObj,\r\n            tooltip: getToolTips(unit),\r\n            legend: {\r\n                display: false\r\n            },\r\n        }\r\n    }\r\n\r\n    if (scalesObject !== undefined) {\r\n        options = {...options, scales: scalesObject}\r\n    }\r\n\r\n    return options;\r\n}\r\n\r\nfunction getToolTips(unit: string) {\r\n    return {\r\n        enabled: true,\r\n        maintainAspectRatio: true,\r\n        callbacks: {\r\n            label: tooltipItem => `${tooltipItem.label}: ${tooltipItem.formattedValue} ${unit}`\r\n        }\r\n    };\r\n}\r\n\r\n\r\nfunction getScalesForRankingChart(unit: string) {\r\n    let scaleLabel: any | null = null;\r\n\r\n    if (unit) {\r\n        scaleLabel = {\r\n            display: true,\r\n            labelString: unit\r\n        }\r\n    }\r\n\r\n    let axesObj = {};\r\n    if (scaleLabel) {\r\n        axesObj[\"scaleLabel\"] = scaleLabel;\r\n    }\r\n\r\n    const yAxes = [axesObj];\r\n\r\n    const scales = {\r\n        yAxes: yAxes,\r\n        xAxes: [{\r\n            ticks: {\r\n                autoSkip: false,\r\n                callback: function (value, index, values) {\r\n                    return shortenName(value, 24);\r\n                }\r\n            }\r\n        }]\r\n    };\r\n\r\n    return scales;\r\n}","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE} from \"../../config/Constants\";\r\nimport {Form} from 'react-bootstrap';\r\nimport {PieChartConfigurationProps} from \"../../types/livedata/ChartPropsData\";\r\n\r\nexport function PieChartConfigurationForm(props: PieChartConfigurationProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    return (\r\n        <div className=\"container form-main\">\r\n            <div className=\"row\">\r\n                <form className=\"form-inline form-group\">\r\n                    <Form.Label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_charttype[languageContext.language]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check inline={true}\r\n                                label={applicationStrings.label_charttype_pie[languageContext.language]}\r\n                                type=\"radio\"\r\n                                value={CHART_TYPE_PIE}\r\n                                checked={props.chartType === CHART_TYPE_PIE}\r\n                                onChange={props.handleRadioButtonClick}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={true}\r\n                                style={{paddingRight: \"48px\"}}\r\n                                label={applicationStrings.label_charttype_bar[languageContext.language]}\r\n                                type=\"radio\"\r\n                                value={CHART_TYPE_BAR}\r\n                                checked={props.chartType === CHART_TYPE_BAR}\r\n                                onChange={props.handleRadioButtonClick}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={true}\r\n                                label={applicationStrings.checkbox_chartoption_showLegend[languageContext.language]}\r\n                                defaultChecked={props.showLegend}\r\n                                disabled={props.chartType === CHART_TYPE_BAR}\r\n                                onClick={props.handleLegendCheckboxClick}>\r\n                    </Form.Check>\r\n                    {props.detailsCheckboxAvailable &&\r\n                    <Form.Check inline={true}\r\n                                label={applicationStrings.checkbox_chartoption_showDetails[languageContext.language]}\r\n                                defaultChecked={props.showDetails}\r\n                                onClick={props.handleDetailsCheckboxClick}>\r\n                    </Form.Check>\r\n                    }\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {ReactElement} from \"react\";\r\n\r\ninterface CustomLegendProps {\r\n    legendData: Array<any>\r\n}\r\n\r\nexport function CustomLegend(props: CustomLegendProps) {\r\n\r\n    const renderLegend = () => {\r\n        let legend: Array<ReactElement> = [];\r\n\r\n        for (let i = 0; i < props.legendData.length; i++) {\r\n            const element = props.legendData[i];\r\n            const indent = element.indent > 0 ? \"25px\" : \"0px\";\r\n            const verticalSpace = element.separateNextElement ? \"15px\" : \"0px\";\r\n            const id = `legendrow ${i}`;\r\n\r\n            legend.push(\r\n                <div key={id} className=\"row\" style={{marginLeft: indent, marginBottom: verticalSpace}}>\r\n                    <div style={{display: \"flex\"}}>\r\n                        <div className=\"legendItem\" style={{background: element.color}}></div>\r\n                        <p style={{marginTop: \"-3px\"}}>{element.item}</p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return legend;\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={\"form-main\"} style={{borderLeft: \"1px solid #aaaaaa\", paddingLeft: \"5px\"}}>\r\n            <div style={{paddingTop: \"4px\"}}>\r\n                {renderLegend()}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n\r\n}","import {WindowDimension} from \"../WindowDimension\";\r\nimport {basedata_piechart_width, default_chart_height} from \"../../config/ChartConfig\";\r\nimport {TAB_BASE_DATA} from \"../../config/Constants\";\r\n\r\nexport function calculateChartHeight(currentDimension: WindowDimension, directCompare?: boolean, dataPage?: string): number {\r\n    return directCompare === true\r\n        ? currentDimension.height / 3\r\n        : dataPage === TAB_BASE_DATA\r\n            ? basedata_piechart_width\r\n            : default_chart_height\r\n}\r\n\r\nexport function calculateChartContainerHeight(currentDimension: WindowDimension, directCompare?: boolean): number {\r\n    return directCompare === true\r\n        ? calculateChartHeight(currentDimension, directCompare) + 24\r\n        : calculateChartHeight(currentDimension, directCompare) + 10\r\n}\r\n","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {autoRound} from \"../../../service/calculation/MathService\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE, TAB_BASE_DATA} from \"../../../config/Constants\";\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BaseDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function BaseDataChart(props: BaseDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.baseChartConfig\r\n            : initialChartConfigData.baseChartConfig\r\n\r\n    const showDetailsProp = chartConfig.showDetails\r\n        ? chartConfig.showDetails\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.baseChartConfig.showDetails\r\n            : initialChartConfigData.baseChartConfig.showDetails\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [showDetails, setShowDetails] = useState<boolean>(showDetailsProp)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse, TAB_BASE_DATA))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setShowDetails(showDetailsProp)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse, TAB_BASE_DATA))\r\n        updateChartConfig()\r\n    }, [chartType, showDetails, showLegend, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData\r\n            if (chartType !== currentConfig.baseChartConfig.chartType\r\n                || showDetails !== currentConfig.baseChartConfig.showDetails\r\n                || showLegend !== currentConfig.baseChartConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...currentConfig,\r\n                    baseChartConfig: {\r\n                        chartType: chartType,\r\n                        showDetails: showDetails,\r\n                        showLegend: showLegend\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const createTotalChartData = () => {\r\n        const nutrientData = getNutrientData(props.selectedFoodItem);\r\n\r\n        return {\r\n            labels: [applicationStrings.label_nutrient_water[lang],\r\n                applicationStrings.label_nutrient_carbohydrates_short[lang],\r\n                applicationStrings.label_nutrient_lipids[lang],\r\n                applicationStrings.label_nutrient_proteins[lang],\r\n                applicationStrings.label_nutrient_ash[lang]],\r\n            datasets: [{\r\n                label: applicationStrings.label_chart_totalComposition[lang],\r\n                data: [autoRound(nutrientData.baseData.water),\r\n                    autoRound(nutrientData.baseData.carbohydrates),\r\n                    autoRound(nutrientData.baseData.lipids),\r\n                    autoRound(nutrientData.baseData.proteins),\r\n                    autoRound(nutrientData.baseData.ash)\r\n                ],\r\n                backgroundColor: [\r\n                    ChartConfig.color_water,\r\n                    ChartConfig.color_carbs,\r\n                    ChartConfig.color_lipids,\r\n                    ChartConfig.color_proteins,\r\n                    ChartConfig.color_ash,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const createNutrientChartData = () => {\r\n        const nutrientData = getNutrientData(props.selectedFoodItem);\r\n        const totalValue = nutrientData.baseData.carbohydrates + nutrientData.baseData.lipids + nutrientData.baseData.proteins;\r\n\r\n        const sugar = nutrientData.carbohydrateData?.sugar ? nutrientData.carbohydrateData.sugar : 0\r\n        const dietaryFibers = nutrientData.baseData.dietaryFibers ? nutrientData.baseData.dietaryFibers : 0\r\n\r\n        let carbValue = showDetails ? (nutrientData.baseData.carbohydrates - sugar - dietaryFibers)\r\n            : nutrientData.baseData.carbohydrates;\r\n\r\n        if (carbValue < 0) {\r\n            carbValue = 0\r\n        }\r\n\r\n        const carbValuePerc = autoRound(carbValue / totalValue * 100)\r\n        const sugarValuePerc = autoRound(sugar / totalValue * 100)\r\n        const dietaryFibersPerc = autoRound(dietaryFibers / totalValue * 100)\r\n        const lipidValuePerc = autoRound(nutrientData.baseData.lipids / totalValue * 100)\r\n        const proteinsValuePerc = autoRound(nutrientData.baseData.proteins / totalValue * 100)\r\n\r\n        const labels = [applicationStrings.label_nutrient_lipids[lang],\r\n            applicationStrings.label_nutrient_proteins[lang],\r\n            applicationStrings.label_nutrient_carbohydrates_short[lang]]\r\n\r\n        const values = [lipidValuePerc, proteinsValuePerc, carbValuePerc];\r\n\r\n        const backgroundColors = [\r\n            ChartConfig.color_lipids,\r\n            ChartConfig.color_proteins,\r\n            ChartConfig.color_carbs\r\n        ];\r\n\r\n        if (showDetails) {\r\n            if (sugarValuePerc > 0) {\r\n                labels.push(applicationStrings.label_nutrient_sugar[lang]);\r\n                values.push(sugarValuePerc);\r\n                backgroundColors.push(ChartConfig.color_carbs_sugar);\r\n            }\r\n            if (dietaryFibersPerc > 0) {\r\n                labels.push(applicationStrings.label_nutrient_dietaryFibers_short[lang]);\r\n                values.push(dietaryFibersPerc);\r\n                backgroundColors.push(ChartConfig.color_carbs_dietaryFibers);\r\n            }\r\n        }\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_chart_nutrientComposition[lang],\r\n                data: values,\r\n                backgroundColor: backgroundColors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const getLegendData = () => {\r\n        const legendData: Array<any> = [\r\n            {\r\n                item: applicationStrings.label_nutrient_water[lang],\r\n                color: ChartConfig.color_water,\r\n                separateNextElement: true\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_lipids[lang],\r\n                color: ChartConfig.color_lipids\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_proteins[lang],\r\n                color: ChartConfig.color_proteins\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_carbohydrates_short[lang],\r\n                color: ChartConfig.color_carbs,\r\n            }\r\n        ];\r\n\r\n        if (showDetails) {\r\n            legendData.push(\r\n                {\r\n                    item: applicationStrings.label_nutrient_sugar[lang],\r\n                    color: ChartConfig.color_carbs_sugar,\r\n                    indent: 1,\r\n                },\r\n                {\r\n                    item: applicationStrings.label_nutrient_dietaryFibers[lang],\r\n                    color: ChartConfig.color_carbs_dietaryFibers,\r\n                    indent: 1,\r\n                    separateNextElement: true\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_ash[lang],\r\n            color: ChartConfig.color_ash\r\n        })\r\n\r\n        return legendData;\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        setChartType(event.target.value)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const handleLegendCheckboxClick = () => {\r\n        setShowLegend(!showLegend)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const handleDetailsCheckboxClick = () => {\r\n        setShowDetails(!showDetails)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const legendAllowed = showLegend && chartType === CHART_TYPE_PIE\r\n\r\n    const getOptions = (title) => {\r\n        return chartType === CHART_TYPE_BAR ? getBarChartOptions(title, \"%\") : getPieChartOptions(title, \"%\")\r\n    }\r\n\r\n\r\n    const renderSubChart = (title: string, chartData: any) => {\r\n        if (!chartData) {\r\n            return <div/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie\r\n                    data={chartData}\r\n                    key={'chart ' + chartHeight}\r\n                    height={chartHeight}\r\n                    width={ChartConfig.basedata_piechart_width}\r\n                    options={getOptions(title)}/>\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar\r\n                    data={chartData}\r\n                    key={'chart ' + chartHeight}\r\n                    height={chartHeight}\r\n                    width={ChartConfig.basedata_barchart_width}\r\n                    options={getOptions(title)}/>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const totalChartData = createTotalChartData();\r\n    const nutrientChartData = createNutrientChartData();\r\n\r\n    const totalChartDataTitle = applicationStrings.label_chart_totalComposition[lang]\r\n    const nutrientChartDataTitle = applicationStrings.label_chart_nutrientComposition[lang]\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n    const justifyContent = props.directCompareUse ? \"center\" : \"left\"\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"d-flex text-align-center\" style={{justifyContent: justifyContent}}>\r\n                <div className=\"d-inline-block\">\r\n                    <div className=\"row\" style={{height: containerHeight}}\r\n                         key={\"base chart container \" + containerHeight}>\r\n                        <div className=\"col-6\">\r\n                            <div>{renderSubChart(totalChartDataTitle, totalChartData)}</div>\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                            <div>{renderSubChart(nutrientChartDataTitle, nutrientChartData)}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {legendAllowed &&\r\n                <div className=\"d-inline-block float-right\">\r\n                    <CustomLegend legendData={getLegendData()}/>\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareUse &&\r\n            <div className=\"row chartFormLine\">\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           showDetails={showDetails}\r\n                                           detailsCheckboxAvailable={true}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckboxClick}\r\n                                           handleDetailsCheckboxClick={handleDetailsCheckboxClick}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n\r\n}","export const PAL_CATEGORY_1 = 1.2;\r\nexport const PAL_CATEGORY_2 = 1.4;\r\nexport const PAL_CATEGORY_3 = 1.6;\r\nexport const PAL_CATEGORY_4 = 1.8;\r\nexport const PAL_CATEGORY_5 = 2.1;\r\nexport const PAL_CATEGORY_6 = 2.4;\r\nexport const PAL_CATEGORY_7 = 2.8;","import * as Constants from '../../config/Constants';\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as EnergyConstants from '../../config/EnergyConstants'\r\nimport {SEX_MALE} from \"../../config/Constants\";\r\nimport {PalCategory} from \"../../types/livedata/PalCategory\";\r\n\r\n\r\n/**\r\n * Creates a list of PAL categories with name and value for the user settings form.\r\n */\r\nexport function getPalCategories(language: string): Array<PalCategory> {\r\n    const palCategories = [\r\n        {label: createPalCategoryName(language, 1), value: EnergyConstants.PAL_CATEGORY_1},\r\n        {label: createPalCategoryName(language, 2), value: EnergyConstants.PAL_CATEGORY_2},\r\n        {label: createPalCategoryName(language, 3), value: EnergyConstants.PAL_CATEGORY_3},\r\n        {label: createPalCategoryName(language, 4), value: EnergyConstants.PAL_CATEGORY_4},\r\n        {label: createPalCategoryName(language, 5), value: EnergyConstants.PAL_CATEGORY_5},\r\n        {label: createPalCategoryName(language, 6), value: EnergyConstants.PAL_CATEGORY_6},\r\n        {label: createPalCategoryName(language, 7), value: EnergyConstants.PAL_CATEGORY_7},\r\n    ];\r\n\r\n    return palCategories;\r\n}\r\n\r\n/**\r\n * Returns the PAL category number of a PAL value.\r\n *\r\n * value: The PAL value, e.g. 1.4 or 1.6.\r\n */\r\nexport function getPalCategory(value: number): number {\r\n    switch(value) {\r\n        case EnergyConstants.PAL_CATEGORY_1:\r\n            return 1\r\n        case EnergyConstants.PAL_CATEGORY_2:\r\n            return 2\r\n        case EnergyConstants.PAL_CATEGORY_3:\r\n            return 3\r\n        case EnergyConstants.PAL_CATEGORY_4:\r\n            return 4\r\n        case EnergyConstants.PAL_CATEGORY_5:\r\n            return 5\r\n        case EnergyConstants.PAL_CATEGORY_6:\r\n            return 6\r\n        case EnergyConstants.PAL_CATEGORY_7:\r\n            return 7\r\n        default:\r\n            return 1\r\n    }\r\n}\r\n\r\n\r\nexport function getPalValue(palCategory: number): number {\r\n\tswitch(palCategory) {\r\n        case 1:\r\n            return EnergyConstants.PAL_CATEGORY_1\r\n        case 2:\r\n            return EnergyConstants.PAL_CATEGORY_2\r\n        case 3:\r\n            return EnergyConstants.PAL_CATEGORY_3\r\n        case 4:\r\n            return EnergyConstants.PAL_CATEGORY_4\r\n        case 5:\r\n            return EnergyConstants.PAL_CATEGORY_5\r\n        case 6:\r\n            return EnergyConstants.PAL_CATEGORY_6\r\n        case 7:\r\n            return EnergyConstants.PAL_CATEGORY_7\r\n        default:\r\n            return EnergyConstants.PAL_CATEGORY_1\r\n    }\r\n}\r\n\r\n\r\nfunction createPalCategoryName(language, category): string {\r\n    const languageLabel = `palcat_name_${category}`;\r\n    const name = applicationStrings[languageLabel][language]\r\n\r\n    const energyLabel = `PAL_CATEGORY_${category}`;\r\n    const value = EnergyConstants[energyLabel];\r\n    return `${name} (${value})`;\r\n}\r\n\r\n\r\n/**\r\n * Calculates the Basal Metabolic Rate (BMR) of a person.\r\n */\r\nexport function calculateBMR(age: number, size: number, weight: number, sex: string): number {\r\n    if(sex === SEX_MALE) {\r\n        const bmr = 3.4 * weight + 15.3 * size - 6.8 * age - 961;\r\n        return Math.round(bmr);\r\n    } else {\r\n        const bmr = 2.4 * weight + 9.0 * size - 4.7 * age - 65;\r\n        return Math.round(bmr);\r\n    }\r\n}\r\n\r\n/**\r\n * Calculates the total energy consumption of a person in one day.\r\n *\r\n * bmr: The bmr value.\r\n * palValue: The pal value\r\n * leisureSports: Specifies whether leisure sports is performed or not (+0.3 PAL).\r\n */\r\nexport function calculateTotalEnergyConsumption(bmr: number, palValue: number, leisureSports: boolean): number {\r\n    if(leisureSports) {\r\n        palValue += 0.3;\r\n    }\r\n\r\n    return bmr * palValue;\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {Bar, Chart} from \"react-chartjs-2\";\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {calculateBMR, calculateTotalEnergyConsumption} from \"../../../service/calculation/EnergyService\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {default_chart_height} from \"../../../config/ChartConfig\";\r\nimport annotationPlugin from 'chartjs-plugin-annotation'\r\nimport {ChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function EnergyDataChart(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const nutrientData = getNutrientData(props.selectedFoodItem);\r\n    const energy100g = nutrientData.baseData.energy;\r\n\r\n    Chart.register(annotationPlugin)\r\n\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n    }, [chartHeight])\r\n\r\n    if (!applicationContext || !energy100g) {\r\n        return <div>No data.</div>\r\n    }\r\n\r\n    const createEnergyLevelChart = () => {\r\n        const averagePortion = props.selectedFoodItem.portion.amount\r\n        const energyPortion = Math.round(energy100g / 100 * averagePortion);\r\n\r\n        return {\r\n            labels: [\"100 g\", \"Portion\"],\r\n            datasets: [{\r\n                data: [energy100g,\r\n                    energyPortion\r\n                ],\r\n                backgroundColor: [\r\n                    ChartConfig.color_yellow,\r\n                    ChartConfig.color_red,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n\r\n        }\r\n    }\r\n\r\n\r\n    const renderUserDataInfoPage = () => {\r\n        return (\r\n            <div style={{paddingLeft: \"50px\", paddingTop: \"50px\"}}>\r\n                {applicationContext.userData.initialValues ?\r\n                    (<div>\r\n                        <p>{applicationStrings.text_setUserdata_p1[lang]}</p>\r\n                        <p>{applicationStrings.text_setUserdata_p2[lang]}</p>\r\n                    </div>)\r\n                    :\r\n                    <p>{applicationStrings.text_setUserdata_p3[lang]}</p>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const getOptions = () => {\r\n        const {age, size, weight, sex, palValue, leisureSports} = applicationContext.userData\r\n        const bmr = calculateBMR(age, size, weight, sex);\r\n        const totalEnergy = calculateTotalEnergyConsumption(bmr, palValue, leisureSports);\r\n\r\n        const annotation = {\r\n            annotations: {\r\n                line1: {\r\n                    type: 'line',\r\n                    mode: 'horizontal',\r\n                    scaleID: 'y-axis-0',\r\n                    yMin: bmr,\r\n                    yMax: bmr,\r\n                    borderColor: ChartConfig.color_line_red,\r\n                    borderWidth: 4,\r\n                    label: {\r\n                        enabled: true,\r\n                        content: applicationStrings.label_chart_bmr[lang]\r\n                    }\r\n                },\r\n                line2:\r\n                    {\r\n                        type: 'line',\r\n                        mode: 'horizontal',\r\n                        scaleID: 'y-axis-0',\r\n                        yMin: totalEnergy,\r\n                        yMax: totalEnergy,\r\n                        borderColor: ChartConfig.color_line_blue,\r\n                        borderWidth: 4,\r\n                        label: {\r\n                            enabled: true,\r\n                            content: applicationStrings.label_chart_energyExpenditure[lang]\r\n                        }\r\n                    },\r\n            }\r\n        }\r\n\r\n        let options: any = getBarChartOptions(applicationStrings.label_charttype_energy[languageContext.language], \"kCal\");\r\n        options = {\r\n            ...options, plugins: {\r\n                ...options.plugins,\r\n                annotation: annotation\r\n            }\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    const data = createEnergyLevelChart();\r\n    if (!data) {\r\n        return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n    }\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\" >\r\n            <div className=\"row \" style={{height: containerHeight}} key={\"energy container \" + containerHeight}>\r\n                <div className=\"col-6\">\r\n                    <div>\r\n                        <Bar\r\n                            data={data}\r\n                            key={'chart ' + chartHeight}\r\n                            height={chartHeight}\r\n                            options={getOptions()}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {renderUserDataInfoPage()}\r\n                </div>\r\n            </div>\r\n            <div style={{height: \"64px\"}}></div>\r\n        </div>\r\n    )\r\n\r\n}","import * as Constants from '../../config/Constants';\r\nimport DietaryRequirement, {\r\n    RequirementAgeGroupData,\r\n    RequirementData\r\n} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport {SEX_MALE} from \"../../config/Constants\";\r\n\r\n/*\r\n * Determines the daily requirements of a vitamin or mineral for a specific user.\r\n *\r\n * dailyRequirementObject: A vitamin or mineral requirement object (e.g. for Vitamin C or Iron).\r\n * userData: The user data object containing the user data.\r\n */\r\nexport function determineDailyRequirement(dailyRequirementObject: RequirementData, userData: UserData): number {\r\n    let ageGroupRequirements: RequirementAgeGroupData\r\n\r\n    if (userData.age >= 65) {\r\n        ageGroupRequirements = dailyRequirementObject.senior;\r\n    } else if (userData.age >= 51) {\r\n        ageGroupRequirements = dailyRequirementObject.preSenior;\r\n    } else if (userData.age >= 26) {\r\n        ageGroupRequirements = dailyRequirementObject.midLifeAdult;\r\n    } else if (userData.age >= 19) {\r\n        ageGroupRequirements = dailyRequirementObject.youngAdult;\r\n    } else if (userData.age >= 15) {\r\n        ageGroupRequirements = dailyRequirementObject.youth;\r\n    } else {\r\n        ageGroupRequirements = dailyRequirementObject.youth;   // Default case (should not occur!)\r\n    }\r\n\r\n    let value: number\r\n    if (userData.sex === SEX_MALE) {\r\n        value = ageGroupRequirements.male;\r\n    } else {\r\n        if (userData.pregnant) {\r\n            value = ageGroupRequirements.femalePregnant ? ageGroupRequirements.femalePregnant : ageGroupRequirements.female;\r\n        } else if (userData.breastFeeding) {\r\n            value = ageGroupRequirements.femaleBreastFeeding ? ageGroupRequirements.femaleBreastFeeding : ageGroupRequirements.female;\r\n        } else {\r\n            value = ageGroupRequirements.female;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/*\r\n * Determines the ratio (percentage) of vitamins/minerals in food compared to the daily requirements of the user.\r\n * Example: The daily requirements of Vitamin C is 120 mg for the user. The food contains 24 mg C. The ratio is 0.2 (20 %).\r\n *\r\n * dailyRequirementObject: A vitamin or mineral requirement object (e.g. for Vitamin C or Iron).\r\n * userData: The user data object containing the user data.\r\n * portionSize: The portion size in gram (100 = default value, i.e., 100 gram).\r\n * amountInFood: The amount of the vitamin or mineral in the food (which is always 100 gram).\r\n */\r\nexport function determineFoodRequirementRatio(dailyRequirementObject: RequirementData, amountInFood: number, portionSize: number, userData: UserData): number {\r\n    const dailyRequirement = determineDailyRequirement(dailyRequirementObject, userData);\r\n    if (portionSize === 100) {\r\n        return Math.round(amountInFood / dailyRequirement * 1000) / 10;\r\n    } else {   // Calculate ration for a special amount (portion):\r\n        return Math.round(amountInFood / dailyRequirement * (portionSize * 10)) / 10;\r\n    }\r\n}\r\n\r\n\r\n/*\r\n * Determines the ratio (percentage) of proteins in food compared to the daily requirements of the user.\r\n * Example: The daily requirements of Lysine is 30 mg per kg. The user weights 80 kg. His dietary requirement\r\n * is thus 30 * 80 = 2400 mg per day. The food contains 240 mg C. The ratio is 0.1 (10 %).\r\n *\r\n * dailyRequirementObject: A protein requirement object for a specific protein (e.g. for Lycin).\r\n * userData: The user data object containing the user data.\r\n * portionSize: The portion size in gram (100 = default value, i.e., 100 gram).\r\n * amountInFood: The amount of the vitamin or mineral in the food (which is always 100 gram).\r\n */\r\nexport function determineProteinRequirementRatio(requirement: number, amountInFood: number, portionSize: number, userData: UserData) {\r\n    const dailyRequirement = (requirement * userData.weight) / 1000;\r\n\r\n    if (portionSize === 100) {\r\n        return Math.round(amountInFood / dailyRequirement * 1000) / 10;\r\n    } else {   // Calculate ration for a special amount (portion):\r\n        return Math.round(amountInFood / dailyRequirement * (portionSize * 10)) / 10;\r\n    }\r\n}\r\n\r\n\r\nexport function convertAbsoluteValueToDailyRequirement(dailyRequirements: DietaryRequirement, item: string, amount: number, userData: UserData) {\r\n    let dailyRequirementObject\r\n\r\n    if (item === Constants.DATA_VITAMINS_A) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.a;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B1) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b1;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B2) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b2;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B3) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b3;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B5) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b5;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B6) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b6;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B9) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b9;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B12) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b12;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_C) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.c;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_D) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.d;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_E) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.e;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_K) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.k;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_CALCIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.calcium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_COPPER) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.copper;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_IRON) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.iron;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_MAGNESIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.magnesium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_MANGANESE) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.manganese;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_PHOSPHORUS) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.phosphorus;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_POTASSIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.potassium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_SELENIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.selenium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_SODIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.sodium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_ZINC) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.zinc;\r\n    }\r\n\r\n    if (!dailyRequirementObject) {\r\n        console.error('No requirement data object generated.')\r\n        return 0\r\n    }\r\n\r\n    const dailyRequirement = determineDailyRequirement(dailyRequirementObject, userData);\r\n    return Math.round(amount / dailyRequirement * 1000) / 10;\r\n}","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {AMOUNT_PORTION, GRAM} from \"../../config/Constants\";\r\nimport {BarChartConfigurationProps} from \"../../types/livedata/ChartPropsData\";\r\n\r\nexport function BarChartConfigurationForm(props: BarChartConfigurationProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const label_portion = props.selectedFoodItem\r\n        ?`${applicationStrings.label_portion[lang]} (${props.selectedFoodItem.portion.amount} g)`\r\n        : applicationStrings.label_portion[lang]\r\n\r\n    return (\r\n        <div className=\"container-fluid form-main\">\r\n            <div className=\"row foodDataPageHeader\">\r\n                <form className=\"form-inline form-group\">\r\n                    <Form.Label className={\"form-elements\"}>\r\n                        <b>{applicationStrings.label_reference[lang]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                label={\"100g\"}\r\n                                value={GRAM}\r\n                                checked={(props.portionType === GRAM)}\r\n                                onChange={props.handleRadioButtonClick}\r\n                    />\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                style={{paddingRight: \"48px\"}}\r\n                                label={label_portion}\r\n                                value={AMOUNT_PORTION}\r\n                                checked={props.portionType === AMOUNT_PORTION}\r\n                                onChange={props.handleRadioButtonClick}\r\n                    />\r\n                    <Form.Check className=\"form-radiobutton\"\r\n                                inline={true}\r\n                                label={applicationStrings.checkbox_expand100g[lang]}\r\n                                checked={props.expand100}\r\n                                onChange={props.handleExpandCheckboxClick}>\r\n                    </Form.Check>\r\n                    {props.handleSynchronize !== undefined && props.synchronize !== undefined &&\r\n                    < Form.Check className=\"form-radiobutton\"\r\n                        inline={true}\r\n                        label={applicationStrings.checkbox_synchronize[lang]}\r\n                        checked={props.synchronize}\r\n                        onChange={props.handleSynchronize}>\r\n                        </Form.Check>\r\n                    }\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {CHART_MINERALS, CHART_VITAMINS, GRAM} from \"../../../config/Constants\";\r\nimport {determineFoodRequirementRatio} from \"../../../service/calculation/DietaryRequirementService\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\"\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../../charthelper/BarChartConfigurationForm\";\r\nimport {MineralVitaminChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function MineralVitaminChart(props: MineralVitaminChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfigVitamins = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.vitaminChartConfig\r\n            : initialChartConfigData.vitaminChartConfig\r\n\r\n    const chartConfigMinerals = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.mineralChartConfig\r\n            : initialChartConfigData.mineralChartConfig\r\n\r\n    const [portionType_vitamins, setPortionType_vitamins] = useState<string>(chartConfigVitamins.portionType)\r\n    const [expand100_vitamins, setExpand100_vitamins] = useState<boolean>(chartConfigVitamins.expand100)\r\n    const [chartType_minerals, setChartType_minerals] = useState<string>(chartConfigMinerals.portionType)\r\n    const [expand100_minerals, setExpand100_minerals] = useState<boolean>(chartConfigMinerals.expand100)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setPortionType_vitamins(chartConfigVitamins.portionType)\r\n            setExpand100_vitamins(chartConfigVitamins.expand100)\r\n            setChartType_minerals(chartConfigMinerals.portionType)\r\n            setExpand100_minerals(chartConfigMinerals.expand100)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [portionType_vitamins, chartType_minerals, expand100_vitamins, expand100_minerals, chartHeight, props])\r\n\r\n\r\n    if (!applicationContext || applicationContext.foodDataCorpus.dietaryRequirements === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const anyValueChanged = (): boolean => {\r\n        const config = props.selectedSubChart === CHART_VITAMINS\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.vitaminChartConfig\r\n            : applicationContext.applicationData.foodDataPanel.chartConfigData.mineralChartConfig\r\n\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            return portionType_vitamins !== config.portionType || expand100_vitamins !== config.expand100\r\n        } else {\r\n            return chartType_minerals !== config.portionType || expand100_minerals !== config.expand100\r\n        }\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (!props.directCompareConfig && anyValueChanged()) {\r\n            if (applicationContext) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    vitaminChartConfig: {\r\n                        portionType: portionType_vitamins,\r\n                        expand100: expand100_vitamins\r\n                    },\r\n                    mineralChartConfig: {\r\n                        portionType: chartType_minerals,\r\n                        expand100: expand100_minerals\r\n                    }\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const createVitaminChartData = () => {\r\n        const vitaminData = getNutrientData(props.selectedFoodItem).vitaminData;\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.vitaminRequirementData;\r\n\r\n        if (!vitaminData || !requirementData) {\r\n            return null\r\n        }\r\n\r\n        const amount = portionType_vitamins === GRAM ? 100 : props.selectedFoodItem.portion.amount\r\n\r\n        const labels: Array<string> = [];\r\n        const data: Array<number> = [];\r\n\r\n        if (vitaminData.a !== null) {\r\n            labels.push(\"A\");\r\n            data.push(determineFoodRequirementRatio(requirementData.a, vitaminData.a, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b1 !== null) {\r\n            labels.push(\"B1\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b1, vitaminData.b1, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b2 !== null) {\r\n            labels.push(\"B2\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b2, vitaminData.b2, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b3 !== null) {\r\n            labels.push(\"B3\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b3, vitaminData.b3, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b5 !== null) {\r\n            labels.push(\"B5\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b5, vitaminData.b5, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b6 !== null) {\r\n            labels.push(\"B6\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b6, vitaminData.b6, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b9 !== null) {\r\n            labels.push(\"B9\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b9, vitaminData.b9, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b12 !== null) {\r\n            labels.push(\"B12\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b12, vitaminData.b12, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.c !== null) {\r\n            labels.push(\"C\");\r\n            data.push(determineFoodRequirementRatio(requirementData.c, vitaminData.c, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.d !== null) {\r\n            labels.push(\"D\");\r\n            data.push(determineFoodRequirementRatio(requirementData.d, vitaminData.d, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.e !== null) {\r\n            labels.push(\"E\");\r\n            data.push(determineFoodRequirementRatio(requirementData.e, vitaminData.e, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.k !== null) {\r\n            labels.push(\"K\");\r\n            data.push(determineFoodRequirementRatio(requirementData.k, vitaminData.k, amount, applicationContext.userData));\r\n        }\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_chart_green_3\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_vitamins[lang],\r\n                data: data,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n\r\n        }\r\n    }\r\n\r\n    const createMineralChartData = () => {\r\n        const mineralData = getNutrientData(props.selectedFoodItem).mineralData;\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.mineralRequirementData;\r\n\r\n        if (!mineralData || !requirementData) {\r\n            return null\r\n        }\r\n\r\n        const amount = chartType_minerals === GRAM ? 100 : props.selectedFoodItem.portion.amount\r\n\r\n        const labels: Array<string> = [];\r\n        const data: Array<number> = [];\r\n\r\n        if (mineralData.calcium !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_calcium[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.calcium, mineralData.calcium, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.iron !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_iron[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.iron, mineralData.iron, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.magnesium !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_magnesium[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.magnesium, mineralData.magnesium, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.phosphorus !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_phosphorus[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.phosphorus, mineralData.phosphorus, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.potassium !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_potassimum[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.potassium, mineralData.potassium, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.sodium !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_sodium[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.sodium, mineralData.sodium, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.zinc !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_zinc[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.zinc, mineralData.zinc, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.copper !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_copper[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.copper, mineralData.copper, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.manganese !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_manganese[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.manganese, mineralData.manganese, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.selenium !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_selenium[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.selenium, mineralData.selenium, amount, applicationContext.userData));\r\n        }\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_purple\r\n\r\n        const chartData = {\r\n            labels: labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_minerals[lang],\r\n                data: data,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n\r\n        }\r\n\r\n        return chartData;\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            setPortionType_vitamins(event.target.value)\r\n        } else if (props.selectedSubChart === CHART_MINERALS) {\r\n            setChartType_minerals(event.target.value)\r\n        }\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            setExpand100_vitamins(!expand100_vitamins)\r\n        } else if (props.selectedSubChart === CHART_MINERALS) {\r\n            setExpand100_minerals(!expand100_minerals)\r\n        }\r\n    }\r\n\r\n    const getOptions = (title, maxValue) => {\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals;\r\n        const overallMaxValue = props.directCompareConfig && props.directCompareConfig.maxValue\r\n            ? props.directCompareConfig.maxValue\r\n            : maxValue\r\n\r\n        let maxYValue\r\n        if (!props.directCompareConfig) {\r\n            if (expand100 && overallMaxValue < 100) {\r\n                maxYValue = 100\r\n            }\r\n        } else {\r\n\r\n            if (props.directCompareConfig.maxValue) {\r\n                maxYValue = props.directCompareConfig.maxValue\r\n            }\r\n            if (expand100 === true) {\r\n                if (maxYValue === undefined) {\r\n                    if (overallMaxValue < 100) {\r\n                        maxYValue = 100\r\n                    }\r\n                } else if (maxYValue < 100) {\r\n                    maxYValue = 100\r\n                }\r\n            }\r\n        }\r\n\r\n        return getBarChartOptions(title, \"%\", maxYValue);\r\n    }\r\n\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const portionType = props.selectedSubChart === CHART_VITAMINS ? portionType_vitamins : chartType_minerals;\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals;\r\n\r\n        const barChartProps = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps} />\r\n    }\r\n\r\n\r\n    const data = props.selectedSubChart === CHART_VITAMINS ? createVitaminChartData() : createMineralChartData();\r\n    if (!data) {\r\n        return <div/>\r\n    }\r\n\r\n    const maxValue = (data && data.datasets && data.datasets.length > 0) ? Math.max(...data.datasets[0].data) : 0;\r\n\r\n    const title = props.selectedSubChart === CHART_VITAMINS ? applicationStrings.label_charttype_vitamins[lang] :\r\n        applicationStrings.label_charttype_minerals[lang];\r\n\r\n    const options = getOptions(title, maxValue);\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"base chart container \" + containerHeight}>\r\n                <div className={\"col-12\"}>\r\n                    <Bar\r\n                        data={data}\r\n                        key={'chart ' + chartHeight}\r\n                        height={chartHeight}\r\n                        options={options}\r\n                    />\r\n                </div>\r\n            </div>\r\n            {props.directCompareUse !== true &&\r\n            <div className=\"row chartFormLine\">\r\n                {renderChartConfigurationForm()}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\n\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {default_chart_height} from \"../../../config/ChartConfig\"\r\nimport * as Constants from \"../../../config/Constants\"\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE, LIPIDS_DATA_BASE} from \"../../../config/Constants\"\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {autoRound} from \"../../../service/calculation/MathService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {OmegaData} from \"../../../types/nutrientdata/FoodItem\";\r\nimport {initialChartConfigData, minimalOmegaRatio} from \"../../../config/ApplicationSetting\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {LipidsDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function LipidsDataChart(props: LipidsDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    let chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.lipidsChartConfig\r\n            : initialChartConfigData.lipidsChartConfig\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [subChart, setSubChart] = useState<string>(chartConfig.subChart  ? chartConfig.subChart : LIPIDS_DATA_BASE)\r\n\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setSubChart(chartConfig.subChart ? chartConfig.subChart : LIPIDS_DATA_BASE)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [chartType, showLegend, subChart, chartHeight, windowSize, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData.lipidsChartConfig\r\n            if (chartType !== currentConfig.chartType\r\n                || subChart !== currentConfig.subChart\r\n                || showLegend !== currentConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    lipidsChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: showLegend,\r\n                        subChart: subChart\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const lipidsData = getNutrientData(props.selectedFoodItem).lipidData;\r\n    const totalLipidsAmount = getNutrientData(props.selectedFoodItem).baseData.lipids;\r\n\r\n    const handleChartSelectionChange = (event: any) => {\r\n        if (props.directCompareConfig && props.directCompareConfig.handleSubchartChange) {\r\n            props.directCompareConfig.handleSubchartChange(event)\r\n        } else {\r\n            setSubChart(event.target.value)\r\n        }\r\n    }\r\n\r\n    const createTotalChartData = (totalAmount: number, saturated: number, unsaturatedMono: number, unsaturatedPoly: number): any => {\r\n        const valueSaturated = autoRound(lipidsData.saturated!! / totalAmount * 100);\r\n        const valueUnsaturatedMono = autoRound(lipidsData.unsaturatedMono!! / totalAmount * 100);\r\n        const valueUnsaturatedPoly = autoRound(lipidsData.unsaturatedPoly!! / totalAmount * 100);\r\n\r\n        let valueRemainder = totalAmount - (saturated + unsaturatedMono + unsaturatedPoly);\r\n        valueRemainder = autoRound(valueRemainder / totalAmount * 100);\r\n\r\n        if (valueRemainder < 0) {\r\n            console.error(\"Fatty acids sum is erroneous. Food-Obj: \", props.selectedFoodItem);\r\n            valueRemainder = 0;\r\n        }\r\n\r\n        return {\r\n            labels: [applicationStrings.label_nutrient_lipids_saturated[lang],\r\n                applicationStrings.label_nutrient_lipids_unsaturated_mono[lang],\r\n                applicationStrings.label_nutrient_lipids_unsaturated_poly[lang],\r\n                applicationStrings.label_nutrient_remainder[lang]],\r\n            datasets: [{\r\n                data: [valueSaturated,\r\n                    valueUnsaturatedMono,\r\n                    valueUnsaturatedPoly,\r\n                    valueRemainder],\r\n                backgroundColor: [\r\n                    ChartConfig.color_lipids_saturated,\r\n                    ChartConfig.color_lipids_unsaturated_mono,\r\n                    ChartConfig.color_lipids_unsaturated_poly,\r\n                    ChartConfig.color_lipids_misc,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const createOmegaChartData = (totalAmount: number, omegaData: OmegaData) => {\r\n        if (omegaData.omega3 === null || omegaData.omega6 === null || omegaData.uncertain === null) {\r\n            return null;\r\n        }\r\n\r\n        const valueOmega3 = autoRound(omegaData.omega3 / totalAmount * 100);\r\n        const valueOmega6 = autoRound(omegaData.omega6 / totalAmount * 100);\r\n        const valueUncertain = autoRound(omegaData.uncertain / totalAmount * 100);\r\n\r\n        return {\r\n            labels: [applicationStrings.label_nutrient_omega3[lang],\r\n                applicationStrings.label_nutrient_omega6[lang],\r\n                applicationStrings.label_unknown[lang]],\r\n            datasets: [{\r\n                data: [valueOmega3,\r\n                    valueOmega6,\r\n                    valueUncertain],\r\n                backgroundColor: [\r\n                    ChartConfig.color_lipids_omega3,\r\n                    ChartConfig.color_lipids_omega6,\r\n                    ChartConfig.color_lipids_misc,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n\r\n    }\r\n\r\n\r\n    const getLegendBaseChart = () => {\r\n        return [\r\n            {\r\n                item: applicationStrings.label_nutrient_lipids_saturated[lang],\r\n                color: ChartConfig.color_lipids_saturated,\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_lipids_unsaturated_mono[lang],\r\n                color: ChartConfig.color_lipids_unsaturated_mono\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_lipids_unsaturated_poly[lang],\r\n                color: ChartConfig.color_lipids_unsaturated_poly,\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_remainder[lang],\r\n                color: ChartConfig.color_lipids_misc\r\n            },\r\n        ];\r\n    }\r\n\r\n\r\n    const getLegendOmegaChart = () => {\r\n        return [\r\n            {\r\n                item: applicationStrings.label_nutrient_omega3[lang],\r\n                color: ChartConfig.color_lipids_omega3,\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_omega6[lang],\r\n                color: ChartConfig.color_lipids_omega6\r\n            },\r\n            {\r\n                item: applicationStrings.label_unknown[lang],\r\n                color: ChartConfig.color_lipids_misc,\r\n            },\r\n        ];\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const lipidData = getNutrientData(props.selectedFoodItem).lipidData;\r\n\r\n    let omegaDataAvailabe = false\r\n    if (lipidData.omegaData && lipidData.omegaData.uncertainRatio && lipidData.omegaData.uncertainRatio <= minimalOmegaRatio) {\r\n        omegaDataAvailabe = true\r\n    }\r\n\r\n    const chartColType = chartType === CHART_TYPE_PIE ? \"col-6\" : \"col-8\";\r\n\r\n    const getOptions = () => {\r\n        let title;\r\n\r\n        if (subChart === Constants.LIPIDS_DATA_BASE) {\r\n            title = applicationStrings.label_charttype_lipids_base_title[lang]\r\n        } else if (subChart === Constants.LIPIDS_DATA_OMEGA) {\r\n            title = applicationStrings.label_charttype_lipids_omega_title[lang];\r\n        }\r\n\r\n        if (chartType === CHART_TYPE_BAR) {\r\n            return getBarChartOptions(title, \"%\");\r\n        } else {\r\n            return getPieChartOptions(title, \"%\");\r\n        }\r\n    }\r\n\r\n    const renderChartSelector = () => {\r\n        return (\r\n            <Form>\r\n                <Form.Label>\r\n                    <b>{applicationStrings.label_datatype[languageContext.language]}:</b>\r\n                </Form.Label>\r\n                <Form.Check inline={false}\r\n                            label={applicationStrings.label_charttype_lipids_base[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.LIPIDS_DATA_BASE}\r\n                            checked={subChart === Constants.LIPIDS_DATA_BASE}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n                <Form.Check inline={false}\r\n                            label={applicationStrings.label_charttype_lipids_omega[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.LIPIDS_DATA_OMEGA}\r\n                            checked={subChart === Constants.LIPIDS_DATA_OMEGA}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n            </Form>\r\n        )\r\n    }\r\n\r\n    const renderChart = (lipidsType) => {\r\n        const {saturated, unsaturatedMono, unsaturatedPoly, omegaData} = lipidData\r\n\r\n        let data\r\n        if (lipidsType === Constants.LIPIDS_DATA_BASE) {\r\n            if (!saturated || !unsaturatedMono || !unsaturatedPoly) {\r\n                return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n            }\r\n            data = createTotalChartData(totalLipidsAmount, saturated, unsaturatedMono, unsaturatedPoly);\r\n        } else if (lipidsType === Constants.LIPIDS_DATA_OMEGA) {\r\n            if (omegaData) {\r\n                data = createOmegaChartData(totalLipidsAmount, omegaData)\r\n            }\r\n\r\n            if (!omegaData) {\r\n                return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n            }\r\n        }\r\n\r\n        if (!data) {\r\n            return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    //const height = props.directCompareUse === true ? direct_compare_chartheight : default_chart_height\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"lipids container \" + containerHeight}>\r\n                <div className=\"col-3 text-align-center\">\r\n                    {renderChartSelector()}\r\n                </div>\r\n                <div className={chartColType}>\r\n                    {subChart === Constants.LIPIDS_DATA_BASE &&\r\n                    renderChart(Constants.LIPIDS_DATA_BASE)\r\n                    }\r\n                    {omegaDataAvailabe && subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    renderChart(Constants.LIPIDS_DATA_OMEGA)\r\n                    }\r\n                    {!omegaDataAvailabe && subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n                    }\r\n                </div>\r\n\r\n                {showLegend && chartType === CHART_TYPE_PIE &&\r\n                <div className=\"col-3\">\r\n                    {subChart === Constants.LIPIDS_DATA_BASE &&\r\n                    <CustomLegend legendData={getLegendBaseChart()}/>\r\n                    }\r\n                    {subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    <CustomLegend legendData={getLegendOmegaChart()}/>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n            <div className=\"row chartFormLine\">\r\n                {!props.directCompareConfig &&\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckbox}/>\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {AMOUNT_PORTION} from \"../../../config/Constants\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {determineProteinRequirementRatio} from \"../../../service/calculation/DietaryRequirementService\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\"\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../../charthelper/BarChartConfigurationForm\";\r\nimport {ProteinDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function ProteinDataChart(props: ProteinDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.proteinChartConfig\r\n            : initialChartConfigData.proteinChartConfig\r\n\r\n    const [portionType, setPortionType] = useState<string>(chartConfig.portionType)\r\n    const [expand100, setExpand100] = useState<boolean>(chartConfig.expand100)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setExpand100(chartConfig.expand100)\r\n            setPortionType(chartConfig.portionType)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [portionType, expand100, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentSetting = applicationContext.applicationData.foodDataPanel.chartConfigData.proteinChartConfig\r\n            if (expand100 !== currentSetting.expand100 || portionType !== currentSetting.portionType) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    proteinChartConfig: {\r\n                        portionType: portionType,\r\n                        expand100: expand100\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const createProteinChartData = () => {\r\n        const proteinData = getNutrientData(props.selectedFoodItem).proteinData;\r\n        if (!proteinData || !applicationContext) {\r\n            return null;\r\n        }\r\n\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.proteinRequirementData;\r\n        if (!requirementData) {\r\n            return null;\r\n        }\r\n\r\n        const userData = applicationContext.userData;\r\n        const amount = portionType === AMOUNT_PORTION ? props.selectedFoodItem.portion.amount : 100;\r\n\r\n        const labels: Array<string> = [];\r\n        const data: Array<number> = [];\r\n\r\n        if (proteinData.histidine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_histidine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.histidine, proteinData.histidine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.isoleucine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_isoleucine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.isoleucine, proteinData.isoleucine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.leucine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_leucine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.leucine, proteinData.leucine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.lysine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_lysine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.lysine, proteinData.lysine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.methionine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_methionine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.methionine, proteinData.methionine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.phenylalanine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_phenylalanine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.phenylalanine, proteinData.phenylalanine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.threonine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_threonine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.threonine, proteinData.threonine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.tryptophan !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_tryptophan[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.tryptophan, proteinData.tryptophan, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.valine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_valine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.valine, proteinData.valine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.cystine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_cystine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.cystine, proteinData.cystine, amount, userData)\r\n            )\r\n        }\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_proteins\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_proteins[lang],\r\n                data: data,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        setPortionType(event.target.value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const getOptions = (title, maxValue) => {\r\n        const overallMaxValue = props.directCompareConfig && props.directCompareConfig.maxValue\r\n            ? props.directCompareConfig.maxValue\r\n            : maxValue\r\n\r\n        let maxYValue\r\n        if (!props.directCompareConfig) {\r\n            if (expand100 && overallMaxValue < 100) {\r\n                maxYValue = 100\r\n            }\r\n        } else {\r\n            if (props.directCompareConfig.maxValue) {\r\n                maxYValue = props.directCompareConfig.maxValue\r\n            }\r\n            if (expand100 === true && (maxYValue === undefined || maxYValue < 100)) {\r\n                maxYValue = 100\r\n            }\r\n        }\r\n\r\n        return getBarChartOptions(title, \"%\", maxYValue);\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const barChartProps = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps} />\r\n    }\r\n\r\n    const data = createProteinChartData();\r\n    if (!data) {\r\n        return <div/>\r\n    }\r\n\r\n    const maxValue = (data && data.datasets && data.datasets.length > 0) ? Math.max(...data.datasets[0].data) : 0;\r\n    const options = getOptions(applicationStrings.label_charttype_proteins[lang], maxValue);\r\n    const dataExists = data.datasets && data.datasets[0].data && data.datasets[0].data.length > 0\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"base chart container \" + containerHeight}>\r\n                <div className=\"col-12\">\r\n                    {dataExists &&\r\n                    <Bar\r\n                        data={data}\r\n                        key={'chart ' + chartHeight}\r\n                        height={chartHeight}\r\n                        options={options}\r\n                    />\r\n                    }\r\n                    {!dataExists &&\r\n                    <p className=\"text-center\" style={{height: ChartConfig.default_chart_height}}>\r\n                        {applicationStrings.label_noData[lang]}\r\n                    </p>\r\n                    }\r\n                </div>\r\n            </div>\r\n            {props.directCompareUse !== true &&\r\n            <div className=\"row chartFormLine\">\r\n                {renderChartConfigurationForm()}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport * as Constants from \"../../../config/Constants\"\r\nimport {CARBS_DATA_BASE, CHART_TYPE_BAR, CHART_TYPE_PIE} from \"../../../config/Constants\"\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {autoRound} from \"../../../service/calculation/MathService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {CarbDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {GeneralChartConfigDirectCompareWithSubCharts} from \"../../../types/livedata/ChartConfigData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function CarbsDataChart(props: CarbDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    let chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.carbsChartConfig\r\n            : initialChartConfigData.carbsChartConfig\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [subChart, setSubChart] = useState<string>(chartConfig.subChart ? chartConfig.subChart : CARBS_DATA_BASE)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setSubChart(chartConfig.subChart ? chartConfig.subChart : CARBS_DATA_BASE)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [chartType, showLegend, subChart, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData.carbsChartConfig\r\n            if (chartType !== currentConfig.chartType\r\n                || subChart !== currentConfig.subChart\r\n                || showLegend !== currentConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    carbsChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: showLegend,\r\n                        subChart: subChart\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const carbohydrateData = getNutrientData(props.selectedFoodItem).carbohydrateData;\r\n\r\n    const handleChartSelectionChange = (event: any) => {\r\n        if (applicationContext && props.directCompareConfig) {\r\n            const currentSettings = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n            const carbsChartConfig: GeneralChartConfigDirectCompareWithSubCharts = props.directCompareConfig.chartIndex === 1\r\n                ? {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    subChart1: event.target.value,\r\n                    subChart2: currentSettings.carbsChartConfig.subChart2\r\n                }\r\n                : {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    subChart1: currentSettings.carbsChartConfig.subChart1,\r\n                    subChart2: event.target.value\r\n                }\r\n\r\n            const newChartConfig = {\r\n                ...currentSettings,\r\n                carbsChartConfig: carbsChartConfig\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        } else {\r\n            setSubChart(event.target.value)\r\n        }\r\n    }\r\n\r\n    const createBasicChartData = () => {\r\n        const totalCarbsAmount = getNutrientData(props.selectedFoodItem).baseData.carbohydrates;\r\n        const dietaryFibers = getNutrientData(props.selectedFoodItem).baseData.dietaryFibers;\r\n        const sugar = carbohydrateData.sugar\r\n\r\n        if (!sugar || !dietaryFibers) {\r\n            return null\r\n        }\r\n\r\n        const valueSugar = autoRound(sugar / totalCarbsAmount * 100);\r\n        const valueDietaryFibers = autoRound(dietaryFibers / totalCarbsAmount * 100);\r\n\r\n        if (totalCarbsAmount === 0) {\r\n            return null;\r\n        }\r\n\r\n        let valueMisc = totalCarbsAmount - (sugar + dietaryFibers);\r\n        valueMisc = autoRound(valueMisc / totalCarbsAmount * 100);\r\n\r\n        if (valueMisc < 0) {\r\n            console.warn(\"Carbo hydrate value is erroneous. Food-Obj: \", props.selectedFoodItem);\r\n            valueMisc = 0;\r\n        }\r\n\r\n        return {\r\n            labels: [applicationStrings.label_nutrient_sugar[lang],\r\n                applicationStrings.label_nutrient_dietaryFibers[lang],\r\n                applicationStrings.label_nutrient_remainder[lang]\r\n            ],\r\n            datasets: [{\r\n                data: [valueSugar,\r\n                    valueDietaryFibers,\r\n                    valueMisc],\r\n                backgroundColor: [\r\n                    ChartConfig.color_chart_green_3,\r\n                    ChartConfig.color_chart_green_2,\r\n                    ChartConfig.color_chart_misc,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const createDetailChartData = () => {\r\n        const carbohydrateData = getNutrientData(props.selectedFoodItem).carbohydrateData;\r\n        const totalAmount = getNutrientData(props.selectedFoodItem).baseData.carbohydrates;\r\n\r\n        const valueGlucose = carbohydrateData.glucose !== null ? autoRound(carbohydrateData.glucose / totalAmount * 100) : null;\r\n        const valueFructose = carbohydrateData.fructose !== null ? autoRound(carbohydrateData.fructose / totalAmount * 100) : null;\r\n        const valueGalactose = carbohydrateData.galactose !== null ? autoRound(carbohydrateData.galactose / totalAmount * 100) : null;\r\n        const valueSucrose = carbohydrateData.sucrose !== null ? autoRound(carbohydrateData.sucrose / totalAmount * 100) : null;\r\n        const valueLactose = carbohydrateData.lactose !== null ? autoRound(carbohydrateData.lactose / totalAmount * 100) : null;\r\n        const valueMaltose = carbohydrateData.maltose !== null ? autoRound(carbohydrateData.maltose / totalAmount * 100) : null;\r\n        const valueStarch = carbohydrateData.starch !== null ? autoRound(carbohydrateData.starch / totalAmount * 100) : null;\r\n\r\n        if (!valueMaltose && !valueSucrose && !valueLactose && !valueGlucose && !valueFructose && !valueGalactose) {\r\n            return null\r\n        }\r\n\r\n        let valueMisc = 100\r\n        const labels: Array<String> = []\r\n        const values: Array<number> = []\r\n\r\n        if (valueGlucose) {\r\n            valueMisc -= valueGlucose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_glucose[lang])\r\n            values.push(valueGlucose)\r\n        }\r\n        if (valueFructose) {\r\n            valueMisc -= valueFructose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_fructose[lang])\r\n            values.push(valueFructose)\r\n        }\r\n        if (valueGalactose) {\r\n            valueMisc -= valueGalactose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_galactose[lang])\r\n            values.push(valueGalactose)\r\n        }\r\n        if (valueSucrose) {\r\n            valueMisc -= valueSucrose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_sucrose[lang])\r\n            values.push(valueSucrose)\r\n        }\r\n        if (valueLactose) {\r\n            valueMisc -= valueLactose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_lactose[lang])\r\n            values.push(valueLactose)\r\n        }\r\n        if (valueMaltose) {\r\n            valueMisc -= valueMaltose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_maltose[lang])\r\n            values.push(valueMaltose)\r\n        }\r\n        if (valueStarch) {\r\n            valueMisc -= valueStarch\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_starch[lang])\r\n            values.push(valueStarch)\r\n        }\r\n\r\n        valueMisc = autoRound(valueMisc);\r\n        labels.push(applicationStrings.label_nutrient_remainder[lang])\r\n        values.push(valueMisc)\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                data: values,\r\n                backgroundColor: [\r\n                    ChartConfig.color_chart_green_1,\r\n                    ChartConfig.color_chart_green_2,\r\n                    ChartConfig.color_chart_green_3,\r\n                    ChartConfig.color_chart_yellow_1,\r\n                    ChartConfig.color_chart_yellow_2,\r\n                    ChartConfig.color_chart_yellow_3,\r\n                    ChartConfig.color_chart_orange,\r\n                    ChartConfig.color_chart_misc\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const getLegendBaseChart = (labels: Array<String>) => {\r\n        const legendData: Array<any> = []\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_sugar[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_sugar[lang],\r\n                color: ChartConfig.color_chart_green_3,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_dietaryFibers[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_dietaryFibers[lang],\r\n                color: ChartConfig.color_chart_green_2,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_remainder[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_remainder[lang],\r\n                color: ChartConfig.color_chart_misc,\r\n            })\r\n        }\r\n\r\n        return legendData;\r\n    }\r\n\r\n\r\n    const getLegendDetailsChart = (labels: Array<String>) => {\r\n        const legendData: Array<any> = []\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_glucose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_glucose[lang],\r\n                color: ChartConfig.color_chart_green_1,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_fructose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_fructose[lang],\r\n                color: ChartConfig.color_chart_green_2,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_galactose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_galactose[lang],\r\n                color: ChartConfig.color_chart_green_3,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_sucrose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_sucrose[lang],\r\n                color: ChartConfig.color_chart_yellow_1,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_lactose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_lactose[lang],\r\n                color: ChartConfig.color_chart_yellow_2,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_maltose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_maltose[lang],\r\n                color: ChartConfig.color_chart_yellow_3,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_starch[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_starch[lang],\r\n                color: ChartConfig.color_chart_orange,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_remainder[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_remainder[lang],\r\n                color: ChartConfig.color_chart_misc,\r\n            })\r\n        }\r\n\r\n        return legendData;\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const getOptions = () => {\r\n        let title;\r\n\r\n        if (subChart === Constants.CARBS_DATA_BASE) {\r\n            title = applicationStrings.label_charttype_carbs_base[lang];\r\n        } else if (subChart === Constants.CARBS_DATA_DETAIL) {\r\n            title = applicationStrings.label_charttype_carbs_detail[lang];\r\n        }\r\n\r\n        if (chartType === CHART_TYPE_BAR) {\r\n            return getBarChartOptions(title, \"%\");\r\n        } else {\r\n            return getPieChartOptions(title, \"%\");\r\n        }\r\n    }\r\n\r\n\r\n    const renderChartSelector = () => {\r\n        return (\r\n            <Form>\r\n                <Form.Label>\r\n                    <b>{applicationStrings.label_datatype[lang]}:</b>\r\n                </Form.Label>\r\n                <Form.Check inline={false}\r\n                            label={applicationStrings.label_charttype_carbs_base[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.CARBS_DATA_BASE}\r\n                            checked={subChart === Constants.CARBS_DATA_BASE}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n                <Form.Check inline={false}\r\n                            label={applicationStrings.label_charttype_carbs_detail[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.CARBS_DATA_DETAIL}\r\n                            checked={subChart === Constants.CARBS_DATA_DETAIL}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n            </Form>\r\n        )\r\n    }\r\n\r\n\r\n    const renderChart = (data: any) => {\r\n        if (!data) {\r\n            return (\r\n                <div style={{height: ChartConfig.default_chart_height}}>\r\n                    {applicationStrings.label_noData[lang]}\r\n                </div>\r\n            )\r\n        }\r\n\r\n        const height = props.directCompareUse ? ChartConfig.direct_compare_chartheight : ChartConfig.default_chart_height\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const chartColType = chartType === CHART_TYPE_PIE ? \"col-6\" : \"col-8\";\r\n    const detailChartData = createDetailChartData()\r\n    const basicChartData = createBasicChartData()\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"carbs container \" + containerHeight}>\r\n                <div className=\"col-3\" style={{display: \"block\"}}>\r\n                    {renderChartSelector()}\r\n                </div>\r\n                <div className={chartColType}>\r\n                    {subChart === Constants.CARBS_DATA_BASE &&\r\n                    renderChart(basicChartData)\r\n                    }\r\n                    {detailChartData && subChart === Constants.CARBS_DATA_DETAIL &&\r\n                    renderChart(detailChartData)\r\n                    }\r\n                    {!detailChartData && subChart === Constants.CARBS_DATA_DETAIL &&\r\n                    <div style={{height: ChartConfig.default_chart_height}}>\r\n                        {applicationStrings.label_noData[lang]}\r\n                    </div>\r\n                    }\r\n                </div>\r\n\r\n                {showLegend && chartType === Constants.CHART_TYPE_PIE &&\r\n                <div className=\"col-3\">\r\n                    {subChart === Constants.CARBS_DATA_BASE && basicChartData &&\r\n                    <CustomLegend legendData={getLegendBaseChart(basicChartData.labels)}/>\r\n                    }\r\n                    {subChart === Constants.CARBS_DATA_DETAIL && detailChartData &&\r\n                    <CustomLegend legendData={getLegendDetailsChart(detailChartData.labels)}/>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareConfig &&\r\n            <div className=\"row chartFormLine\">\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckbox}/>\r\n\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n\r\n}","import BaseDataChart from \"./charts/BaseDataChart\";\r\nimport EnergyDataChart from \"./charts/EnergyDataChart\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport MineralVitaminChart from \"./charts/MineralVitaminChart\";\r\nimport LipidsDataChart from \"./charts/LipidsDataChart\";\r\nimport ProteinDataChart from \"./charts/ProteinDataChart\";\r\nimport CarbsDataChart from \"./charts/CarbsDataChart\";\r\nimport {ChartProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\nexport function ChartPanel(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const selectedDataTab = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n\r\n    let chart = <div>Nothing to show</div>;\r\n    if (selectedDataTab === TAB_BASE_DATA) {\r\n        chart = <BaseDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_ENERGY_DATA) {\r\n        chart = <EnergyDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_VITAMIN_DATA) {\r\n        chart = <MineralVitaminChart selectedFoodItem={props.selectedFoodItem} selectedSubChart={CHART_VITAMINS}/>\r\n    } else if (selectedDataTab === TAB_MINERAL_DATA) {\r\n        chart = <MineralVitaminChart selectedFoodItem={props.selectedFoodItem} selectedSubChart={CHART_MINERALS}/>\r\n    } else if (selectedDataTab === TAB_LIPIDS_DATA) {\r\n        chart = <LipidsDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_CARBS_DATA) {\r\n        chart = <CarbsDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_PROTEINS_DATA) {\r\n        chart = <ProteinDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    }\r\n\r\n    return (\r\n        <div style={{paddingTop: \"24px\"}}>\r\n            {chart}\r\n        </div>\r\n    )\r\n}","import FoodItem from \"../../types/nutrientdata/FoodItem\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {minimal_table_height} from \"../../config/ChartConfig\";\r\nimport 'react-bootstrap-table/dist/react-bootstrap-table-all.min.css';\r\nimport {defaultPanelHeight} from \"../../config/ApplicationSetting\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {DISPLAYMODE_CHART, PATH_FOODDATA_PANEL, QUERYKEY_DATAPANEL_ITEM} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\n\r\ninterface FoodDataTableProps {\r\n    tableData: Array<FoodTableDataObject>\r\n}\r\n\r\nexport function FoodDataTable(props: FoodDataTableProps) {\r\n    const dataExists = props.tableData && props.tableData.length > 0;\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const changeToChartMode = () => {\r\n        applicationContext?.setFoodDataPanelData.setSelectedDisplayMode(DISPLAYMODE_CHART)\r\n\r\n        // history.push({\r\n        //     pathName: PATH_FOODDATA_PANEL,\r\n        //     search: \"\"\r\n        // })\r\n    }\r\n\r\n    return (\r\n        <div style={{height: \"418px\", margin: \"25px\", overflowY: \"auto\"}}>\r\n            <div>\r\n                {dataExists &&\r\n                <BootstrapTable className=\"table-sm\" data={props.tableData} striped hover>\r\n                    <TableHeaderColumn isKey dataField='label'>Element</TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='value_100g'>per 100 g</TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='value_portion'>per Portion</TableHeaderColumn>\r\n                </BootstrapTable>\r\n                }\r\n                {!dataExists &&\r\n                <div className=\"text-center\">{applicationStrings.label_noData[language.language]}</div>\r\n                }\r\n            </div>\r\n            <div style={{paddingTop: \"25px\"}}>\r\n                <button className={\"btn btn-link\"} onClick={changeToChartMode}>Zur Diagrammansicht wechseln</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport SelectedFoodItem from \"../../../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {getNameFromFoodNameList} from \"../../../service/nutrientdata/NameTypeService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport getName from \"../../../service/LanguageService\";\r\nimport {defaultPanelHeight, mobileAppPath} from \"../../../config/ApplicationSetting\";\r\nimport {direct_compare_chartheight} from \"../../../config/ChartConfig\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {TAB_BASE_DATA} from \"../../../config/Constants\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData, getSourceName} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {Button} from \"react-bootstrap\";\r\n\r\ninterface InfoDataProps {\r\n    selectedFoodItem: SelectedFoodItem,\r\n    directCompare?: boolean\r\n}\r\n\r\ninterface RowElement {\r\n    key: string,\r\n    value: string\r\n}\r\n\r\nexport function InfoData(props: InfoDataProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const windowSize = useWindowDimension()\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, props.directCompare))\r\n\r\n    useEffect(() => {\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, props.directCompare))\r\n    }, [containerHeight])\r\n\r\n    const createRow = (key, value): RowElement => {\r\n        return {\r\n            key: key,\r\n            value: value\r\n        }\r\n    }\r\n\r\n    const getGeneralTableData = (): Array<RowElement> => {\r\n        if (!applicationContext) {\r\n            return []\r\n        }\r\n\r\n        const foodNameId = props.selectedFoodItem.foodItem.nameId\r\n        const foodName = foodNameId ? getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, foodNameId, lang) : ''\r\n\r\n        const foodClass = props.selectedFoodItem.foodClass;\r\n        const foodClassNameId = foodClass ? foodClass.nameKey : null\r\n\r\n        const sourceName = getSourceName(props.selectedFoodItem.selectedSource)\r\n        const sourceItemId = getNutrientData(props.selectedFoodItem).sourceItemId\r\n\r\n        const source = `United States Department of Agriculture (USDA)`;\r\n        const sourceLine2 = `${sourceName}, ID = ${sourceItemId}`;\r\n        const foodClassName = foodClassNameId ? getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, foodClassNameId, lang) : null;\r\n\r\n        const categoryId = foodClass ? foodClass.category : null\r\n        const category = categoryId ? applicationContext.foodDataCorpus.categories.find(category => category.id === categoryId) : null\r\n        const categoryName = category ? getName(category, lang) : null;\r\n\r\n        const conditionId = props.selectedFoodItem.foodItem.conditionId\r\n        const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === conditionId)\r\n        const conditionName = condition ? getName(condition, lang) : null;\r\n\r\n        const tableDataGeneral: Array<RowElement> = [];\r\n\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodName[lang]}:`, foodName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_preparation[lang]}:`, conditionName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodId[lang]}:`, props.selectedFoodItem.foodItem.id)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodClass[lang]}:`, foodClassName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_category[lang]}:`, categoryName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_source[lang]}:`, source)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(\"\", sourceLine2)\r\n        );\r\n\r\n        return tableDataGeneral;\r\n    }\r\n\r\n    const getTableDataPortion = () => {\r\n        const foodPortion = props.selectedFoodItem.portion;\r\n        const portionValue = `${foodPortion.amount} g`;\r\n\r\n        const portionObject = applicationContext?.foodDataCorpus.portionTypes.find(portion => portion.id === foodPortion.portionType)\r\n        if (portionObject) {\r\n            const portionName = foodPortion.portionType !== 0 ? getName(portionObject, lang) : applicationStrings.portion_individual[lang];\r\n            const tableDataPortion: Array<RowElement> = [];\r\n\r\n            tableDataPortion.push(\r\n                createRow(`${applicationStrings.label_info_portionType[lang]}:`, portionName)\r\n            );\r\n\r\n            tableDataPortion.push(\r\n                createRow(`${applicationStrings.label_portion[lang]}:`, portionValue)\r\n            );\r\n\r\n            return tableDataPortion\r\n        }\r\n\r\n\r\n        return [];\r\n    }\r\n\r\n\r\n    const getTableDataCombinedFood = () => {\r\n        // const individualList = props.foodItem.individualData;\r\n        // const tableData = [];\r\n        //\r\n        // for(let i=0; i < individualList.length; i++) {\r\n        //     tableData.push(\r\n        //         createRow(`${individualList[i].name}:`, `${individualList[i].portion} g`)\r\n        //     );\r\n        // }\r\n        //\r\n        // return tableData;\r\n    }\r\n\r\n\r\n    const renderSubTable = (data) => {\r\n        return (\r\n            <div>\r\n                <BootstrapTable bordered={false} data={data}>\r\n                    <TableHeaderColumn className=\"tableHeaderClass\" dataField='key' isKey width=\"200px\"/>\r\n                    <TableHeaderColumn className=\"tableHeaderClass\" dataField='value'/>\r\n                </BootstrapTable>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const onLinkClick = () => {\r\n        const sourceItemId = getNutrientData(props.selectedFoodItem).sourceItemId\r\n        const usdaLink = `https://fdc.nal.usda.gov/fdc-app.html#/food-details/${sourceItemId}/nutrients`\r\n\r\n        const link = window.open(usdaLink, '_blank')\r\n        if (link) {\r\n            link.focus()\r\n        } else {\r\n            window.location.href = usdaLink\r\n        }\r\n    }\r\n\r\n\r\n    let height = containerHeight\r\n    if(!props.directCompare) {\r\n        height += 86\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div style={{height: height, maxHeight: height, overflowY: \"auto\", padding: \"15px\"}}>\r\n                {props.selectedFoodItem.foodItem.foodClass !== 0 &&\r\n                <div>\r\n                    <div>\r\n                        {renderSubTable(getGeneralTableData())}\r\n                    </div>\r\n                    <div style={{paddingTop: \"30px\"}}>\r\n                        <h5>{applicationStrings.label_info_portion[lang]}</h5>\r\n                        {renderSubTable(getTableDataPortion())}\r\n                    </div>\r\n                </div>\r\n                }\r\n                {props.selectedFoodItem.foodItem.foodClass === 0 &&\r\n                <div>\r\n                    <h5>Individual</h5>\r\n                    {renderSubTable(getTableDataCombinedFood())}\r\n                </div>\r\n                }\r\n\r\n                <div style={{paddingTop: \"20px\", paddingBottom: \"12px\"}}>\r\n                    <Button variant={'link'} active={true} onClick={onLinkClick}>\r\n                        See the nutrient data at USDA\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n\r\n}","import {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {DISPLAYMODE_CHART, DISPLAYMODE_TABLE, TAB_INFO} from \"../../config/Constants\";\r\nimport {ChartPanel} from \"./ChartPanel\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {FoodDataTable} from \"./FoodDataTable\";\r\nimport {InfoData} from \"./charts/InfoData\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\ninterface FoodDataPageBodyProps {\r\n    tableData: Array<FoodTableDataObject>\r\n    selectedFoodItem: SelectedFoodItem\r\n}\r\n\r\nexport default function FoodDataPageBody(props: FoodDataPageBodyProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    if(!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const {displayMode, selectedDataPage}  = applicationContext.applicationData.foodDataPanel\r\n\r\n    const renderDataPage = () => {\r\n        return (\r\n            <div>\r\n                {displayMode === DISPLAYMODE_TABLE &&\r\n                <div className=\"col\">\r\n                    <FoodDataTable tableData={props.tableData}/>\r\n                </div>\r\n                }\r\n                {displayMode === DISPLAYMODE_CHART &&\r\n                <div className=\"col\">\r\n                    <ChartPanel selectedFoodItem={props.selectedFoodItem} />\r\n                </div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={\"form-main\"} style={{maxWidth: \"1200px\", minWidth: \"850px\"}}>\r\n            {selectedDataPage === TAB_INFO &&\r\n            <InfoData selectedFoodItem={props.selectedFoodItem}/>\r\n            }\r\n            {selectedDataPage !== TAB_INFO &&\r\n            renderDataPage()\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {ReactElement, useContext} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {HelpText} from \"../service/HelpService\";\r\n\r\ninterface HelpModalProps {\r\n    helpText: HelpText\r\n    closeHelpModal: () => void\r\n}\r\n\r\nexport function HelpModal(props: HelpModalProps): ReactElement {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if (!props.helpText) {\r\n        return (<div>No data available.</div>);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"modal\" style={{display: \"block\"}} role=\"dialog\">\r\n            <div className=\"modal-dialog\" role=\"document\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\">{props.helpText.title}</h5>\r\n                        <button type=\"button\"\r\n                                className=\"btn-close\"\r\n                                data-dismiss=\"modal\"\r\n                                aria-label=\"Close\"\r\n                                onClick={props.closeHelpModal}>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <span dangerouslySetInnerHTML={{__html: props.helpText.content}}/>\r\n                    </div>\r\n                    <div className=\"modal-footer\">\r\n                        <button type=\"button\"\r\n                                className=\"btn btn-primary\"\r\n                                onClick={props.closeHelpModal}>\r\n                            {applicationStrings.button_close[languageContext.language]}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import {Button, ButtonGroup} from \"react-bootstrap\";\r\nimport {\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\ninterface ChartMenuPanelProps {\r\n    dataPage: string\r\n    setDataPage: (id: string) => void\r\n    verticalArrangement: boolean\r\n}\r\n\r\nexport function ChartMenuPanel(props: ChartMenuPanelProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    const handlePageButtonClick = (value: string) => {\r\n        props.setDataPage(value)\r\n    }\r\n\r\n    const variant = \"link\"\r\n\r\n    const makeButtonLabel = (buttonText): JSX.Element => {\r\n        const className = props.verticalArrangement ? \"float-start\" : \"\"\r\n        return <span className={className}>{buttonText}</span>\r\n    }\r\n\r\n    return (\r\n        <div className={\"d-flex\"}>\r\n            <ButtonGroup vertical={props.verticalArrangement}>\r\n                <Button className=\"btn header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_BASE_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_BASE_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_overview[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_ENERGY_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_ENERGY_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_energy[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_VITAMIN_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_VITAMIN_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_vit[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_MINERAL_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_MINERAL_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_min[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_LIPIDS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_LIPIDS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_lipids[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_CARBS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_CARBS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_carbohydrates[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_PROTEINS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_PROTEINS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_proteins[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_INFO)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_INFO}>\r\n                    {makeButtonLabel(applicationStrings.label_info[languageContext.language])}\r\n                </Button>\r\n            </ButtonGroup>\r\n        </div>\r\n    );\r\n\r\n}","import {useContext, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {FaChartBar, FaQuestionCircle, FaThList, FaTimes} from \"react-icons/all\";\r\nimport {\r\n    DISPLAYMODE_CHART,\r\n    DISPLAYMODE_TABLE,\r\n    PATH_FOODDATA_PANEL,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodDataPageBody from \"./FoodDataPageBody\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {HelpModal} from \"../HelpModal\";\r\nimport {getHelpText, HelpText} from \"../../service/HelpService\";\r\nimport getName from \"../../service/LanguageService\";\r\nimport {ChartMenuPanel} from \"./ChartMenuPanel\";\r\nimport {getSourceName} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {useHistory} from 'react-router-dom';\r\n\r\n\r\ninterface FoodDataPageHeaderProps {\r\n    setDisplayMode: (id: string) => void\r\n    setDataPage: (id: string) => void\r\n    selectedFoodItem: SelectedFoodItem\r\n    tableData: Array<FoodTableDataObject>\r\n}\r\n\r\nexport default function FoodDataPageHeader(props: FoodDataPageHeaderProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\tconst history = useHistory()\r\n\r\n    const [helpModalId, setHelpModalId] = useState<number>(0)\r\n\r\n    if (applicationContext === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const displayMode = applicationContext.applicationData.foodDataPanel.displayMode\r\n    const dataPage = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n\r\n    const handleRadioButtonClick = (value: string) => {\r\n        props.setDisplayMode(value)\r\n    }\r\n\r\n    const closeTab = () => {\r\n        const id = (props.selectedFoodItem.foodItem.id)\r\n\t\tconst remainingItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length - 1\r\n\r\n        applicationContext.setFoodDataPanelData.removeItemFromFoodDataPanel(id)\r\n\r\n\t\tif(remainingItems === 0) {\r\n\t\t\thistory.push({pathName: PATH_FOODDATA_PANEL})\r\n\t\t}\t\t\r\n    }\r\n\r\n    const help = () => {\r\n        console.log('Help', displayMode)\r\n\r\n        switch (dataPage) {\r\n            case TAB_BASE_DATA:\r\n                setHelpModalId(1)\r\n                return;\r\n            case TAB_ENERGY_DATA:\r\n                setHelpModalId(2)\r\n                return;\r\n            case TAB_VITAMIN_DATA:\r\n                setHelpModalId(3)\r\n                return;\r\n            case TAB_MINERAL_DATA:\r\n                setHelpModalId(4)\r\n                return;\r\n            case TAB_LIPIDS_DATA:\r\n                setHelpModalId(5)\r\n                return;\r\n            case TAB_INFO:\r\n                setHelpModalId(6)\r\n                return;\r\n            case TAB_CARBS_DATA:\r\n                setHelpModalId(7)\r\n                return;\r\n            case TAB_PROTEINS_DATA:\r\n                setHelpModalId(8)\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    const enabledDisplayButtonClasses = \"btn button-displaymode-enabled\"\r\n    const disabledDisplayButtonClasses = \"btn button-displaymode-disabled\"\r\n\r\n    const chartButtonClasses = displayMode === DISPLAYMODE_CHART ? enabledDisplayButtonClasses\r\n        : disabledDisplayButtonClasses;\r\n\r\n    const tablesButtonClasses = displayMode === DISPLAYMODE_TABLE ? enabledDisplayButtonClasses\r\n        : disabledDisplayButtonClasses;\r\n\r\n    const foodNamesList = applicationContext.foodDataCorpus.foodNames;\r\n\r\n\r\n    let foodName\r\n    if (props.selectedFoodItem.foodItem.nameId) {\r\n        foodName = getNameFromFoodNameList(foodNamesList, props.selectedFoodItem.foodItem.nameId, languageContext.language)\r\n    } else {\r\n        foodName = 'Individual'\r\n    }\r\n\r\n    let fullName\r\n    const portionSize = props.selectedFoodItem.portion.amount\r\n\r\n    if (!props.selectedFoodItem.foodItem.aggregated) {\r\n        const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === props.selectedFoodItem.foodItem.conditionId)\r\n        const conditionName = condition ? getName(condition, languageContext.language) : \"\"\r\n        fullName = `${foodName} (${conditionName}, ${portionSize} g)`\r\n    } else {\r\n        fullName = `${foodName} (${portionSize} g)`\r\n    }\r\n\r\n    const helpText: HelpText | null = helpModalId > 0 ? getHelpText(helpModalId, languageContext.language) : null\r\n    const sourceString = getSourceName(props.selectedFoodItem.selectedSource)\r\n    const selectedDataPage = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n\r\n    console.log('Help modal ID:', helpText)\r\n\r\n    return (\r\n        <div style={{paddingBottom: \"6px\"}}>\r\n            {helpText !== null &&\r\n            <HelpModal helpText={helpText} closeHelpModal={() => setHelpModalId(0)}/>\r\n            }\r\n            <div className={\"row d-flex flex-nowrap\"}>\r\n                <div className=\"col-md-2 col-sm-3\">\r\n                    <div className={\"card\"}>\r\n                        <div className=\"card-body\" style={{paddingRight: \"16px\"}}>\r\n                            <ChartMenuPanel verticalArrangement={true} setDataPage={props.setDataPage} dataPage={selectedDataPage}/>\r\n                            <div className={\"d-flex card\"} style={{marginTop: \"24px\", backgroundColor: \"#eeeeee\"}}>\r\n                                <div className={\"text-center\"} style={{fontSize: \"0.8em\"}}>\r\n                                    {sourceString}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={\"col\"}>\r\n                    <div className=\"row d-flex flex-nowrap\" style={{marginTop: \"10px\"}}>\r\n                        <div className=\"col-md-8\" style={{paddingTop: \"6px\", paddingLeft: \"32px\"}}>\r\n                            <div style={{borderBottom: \"1px solid #BBBBBB\", paddingLeft: \"12px\"}}>\r\n                                <b>{fullName}</b>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-auto\">\r\n                            <div style={{width: \"200px\", padding: \"0px !important\", margin: \"0px !important\"}}>\r\n                                <div className=\"btn-group\" role=\"group\">\r\n                                    <Button className={chartButtonClasses}\r\n                                            onClick={() => handleRadioButtonClick(DISPLAYMODE_CHART)}\r\n                                            active={displayMode === DISPLAYMODE_CHART}\r\n                                            data-tip={applicationStrings.tooltip_icon_charts[languageContext.language]}>\r\n                                        <ReactTooltip/>\r\n                                        <FaChartBar/>\r\n                                    </Button>\r\n                                    <Button className={tablesButtonClasses}\r\n                                            onClick={() => handleRadioButtonClick(DISPLAYMODE_TABLE)}\r\n                                            active={displayMode === DISPLAYMODE_TABLE}\r\n                                            data-tip={applicationStrings.tooltip_icon_table[languageContext.language]}>\r\n                                        <FaThList/>\r\n                                    </Button>\r\n                                </div>\r\n\r\n                                <div className=\"btn-group\" role=\"group\" style={{paddingLeft: \"24px\"}}>\r\n                                    <Button className={\"btn-primary button-foodPanelHead\"}\r\n                                            onClick={help}\r\n                                            active={displayMode === DISPLAYMODE_CHART}>\r\n                                        <ReactTooltip/>\r\n                                        <FaQuestionCircle/>\r\n                                    </Button>\r\n                                    <Button className={\"button-closeTab\"}\r\n                                            onClick={closeTab}\r\n                                            data-tip={applicationStrings.tooltip_icon_close[languageContext.language]}>\r\n                                        <ReactTooltip/>\r\n                                        <FaTimes/>\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <FoodDataPageBody selectedFoodItem={props.selectedFoodItem}\r\n                                      tableData={props.tableData}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import {LANGUAGE_EN} from \"../config/Constants\";\r\n\r\nexport interface HelpText {\r\n    title: string,\r\n    content: string\r\n}\r\n\r\nexport function getHelpText(helpModalId: number, languageId: string): HelpText | null {\r\n    const helpFile = require(\"../static/help/help.json\");\r\n\r\n    let helpEntry = 0;\r\n    const entry = helpFile.entries.find( (entry) => entry.id === helpModalId);\r\n\r\n    if(entry) {\r\n        const languageSection = languageId === LANGUAGE_EN ? entry.en : entry.de;\r\n        const title = languageSection.title;\r\n        const contentArray = languageSection.content;\r\n\r\n        let content = \"\";\r\n        for(let i=0; i < contentArray.length; i++) {\r\n            content += contentArray[i];\r\n            if(i < (contentArray.length-1)) {\r\n                content += \"<br />\"\r\n            }\r\n        }\r\n\r\n        return {\r\n            title: title,\r\n            content: content\r\n        };\r\n    }\r\n\r\n    return null\r\n}","import * as MathService from './calculation/MathService';\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {FoodTableDataObject} from \"../types/livedata/SelectedFoodItemData\";\r\nimport {getNutrientData} from \"./nutrientdata/NutrientDataRetriever\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\n\r\nexport function createBaseDataTable(selectedFoodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const {water, carbohydrates, lipids, proteins, dietaryFibers, ash} = getNutrientData(selectedFoodItem).baseData\r\n    const {sugar}  = getNutrientData(selectedFoodItem).carbohydrateData\r\n\r\n    if(water) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_water[language],\r\n            water,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(carbohydrates) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates[language],\r\n            carbohydrates,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(sugar) {\r\n        tableData.push(createTableObject(\r\n            `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_sugar[language]}`,\r\n            sugar,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(dietaryFibers) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_dietaryFibers[language],\r\n            dietaryFibers,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(lipids) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids[language],\r\n            lipids,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteins) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins[language],\r\n            proteins,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(ash) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_ash[language],\r\n            ash,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\n\r\nexport function createVitaminTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n    const nutrientData = getNutrientData(foodItem)\r\n    \r\n    if(nutrientData.vitaminData.a != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_a[language],\r\n            nutrientData.vitaminData.a,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b1 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b1[language],\r\n            nutrientData.vitaminData.b1,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b2 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b2[language],\r\n            nutrientData.vitaminData.b2,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b3 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b3[language],\r\n            nutrientData.vitaminData.b3,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b5 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b5[language],\r\n            nutrientData.vitaminData.b5,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b6 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b6[language],\r\n            nutrientData.vitaminData.b6,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b9 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b9[language],\r\n            nutrientData.vitaminData.b9,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b12 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b12[language],\r\n            nutrientData.vitaminData.b12,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.c != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_c[language],\r\n            nutrientData.vitaminData.c,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.d != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_d[language],\r\n            nutrientData.vitaminData.d,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.e != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_e[language],\r\n            nutrientData.vitaminData.e,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.k != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_k[language],\r\n            nutrientData.vitaminData.k,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createMineralTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n\r\n    if(firstNutrientData.mineralData.calcium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_calcium[language],\r\n            firstNutrientData.mineralData.calcium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.iron != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_iron[language],\r\n            firstNutrientData.mineralData.iron,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.magnesium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_magnesium[language],\r\n            firstNutrientData.mineralData.magnesium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.phosphorus != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_phosphorus[language],\r\n            firstNutrientData.mineralData.phosphorus,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.potassium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_potassimum[language],\r\n            firstNutrientData.mineralData.potassium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.sodium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_sodium[language],\r\n            firstNutrientData.mineralData.sodium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.zinc != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_zinc[language],\r\n            firstNutrientData.mineralData.zinc,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.copper != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_copper[language],\r\n            firstNutrientData.mineralData.copper,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.manganese != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_manganese[language],\r\n            firstNutrientData.mineralData.manganese,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.selenium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_selenium[language],\r\n            firstNutrientData.mineralData.selenium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createLipidsTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n\r\n    if(firstNutrientData.lipidData.saturated != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_saturated[language],\r\n            firstNutrientData.lipidData.saturated,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.lipidData.unsaturatedMono != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_unsaturated_mono[language],\r\n            firstNutrientData.lipidData.unsaturatedMono,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.lipidData.unsaturatedPoly != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_unsaturated_poly[language],\r\n            firstNutrientData.lipidData.unsaturatedPoly,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.lipidData.omegaData) {\r\n        if(firstNutrientData.lipidData.omegaData.omega3 != null) {\r\n            tableData.push(createTableObject(\r\n                `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_lipids_omega3[language]}`,\r\n                firstNutrientData.lipidData.omegaData.omega3,\r\n                portion, \"g\")\r\n            );\r\n        }\r\n\r\n        if(firstNutrientData.lipidData.omegaData.omega6 != null) {\r\n            tableData.push(createTableObject(\r\n                `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_lipids_omega6[language]}`,\r\n                firstNutrientData.lipidData.omegaData.omega6,\r\n                portion, \"g\")\r\n            );\r\n        }\r\n    }\r\n\r\n    if(firstNutrientData.lipidData.transFattyAcids != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_transfattyAcids[language],\r\n            firstNutrientData.lipidData.transFattyAcids,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.lipidData.cholesterol != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_cholesterol[language],\r\n            firstNutrientData.lipidData.cholesterol,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createEnergyTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n\r\n    const nutrientData = getNutrientData(foodItem)\r\n    const energy = nutrientData.baseData.energy !== null ? nutrientData.baseData.energy : 0;\r\n\r\n    tableData.push(createTableObject(\r\n        \"kcal\",\r\n        energy,\r\n        portion, \"\")\r\n    );\r\n\r\n    tableData.push(createTableObject(\r\n        \"kJ\",\r\n        MathService.round(4.186 * energy, 1),\r\n        portion, \"\")\r\n    );\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\n\r\nexport function createCarbsTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n\r\n    tableData.push(createTableObject(\r\n        applicationStrings.label_nutrient_carbohydrates[language],\r\n        firstNutrientData.baseData.carbohydrates,\r\n        portion, \"g\")\r\n    );\r\n\r\n    if(firstNutrientData.carbohydrateData.sugar != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_sugar[language],\r\n            firstNutrientData.carbohydrateData.sugar,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.baseData.dietaryFibers != null) {\r\n        tableData.push(createTableObject(\r\n            `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_dietaryFibers[language]}`,\r\n            firstNutrientData.baseData.dietaryFibers,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.glucose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_glucose[language],\r\n            firstNutrientData.carbohydrateData.glucose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.fructose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_fructose[language],\r\n            firstNutrientData.carbohydrateData.fructose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.galactose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_galactose[language],\r\n            firstNutrientData.carbohydrateData.galactose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.sucrose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_sucrose[language],\r\n            firstNutrientData.carbohydrateData.sucrose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.lactose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_lactose[language],\r\n            firstNutrientData.carbohydrateData.lactose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.maltose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_maltose[language],\r\n            firstNutrientData.carbohydrateData.maltose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.starch != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_starch[language],\r\n            firstNutrientData.carbohydrateData.starch,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\n\r\nexport function createProteinTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n\r\n    const proteinData = getNutrientData(foodItem).proteinData;\r\n    if(!proteinData) {\r\n        return tableData;\r\n    }\r\n\r\n    if(proteinData.tryptophan != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_tryptophan[language],\r\n            proteinData.tryptophan,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.threonine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_threonine[language],\r\n            proteinData.threonine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.isoleucine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_isoleucine[language],\r\n            proteinData.isoleucine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.leucine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_leucine[language],\r\n            proteinData.leucine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.lysine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_lysine[language],\r\n            proteinData.lysine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.methionine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_methionine[language],\r\n            proteinData.methionine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.cystine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_cystine[language],\r\n            proteinData.cystine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.phenylalanine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_phenylalanine[language],\r\n            proteinData.phenylalanine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.tyrosine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_tyrosine[language],\r\n            proteinData.tyrosine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.valine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_valine[language],\r\n            proteinData.valine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.arginine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_arginine[language],\r\n            proteinData.arginine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.histidine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_histidine[language],\r\n            proteinData.histidine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.alanine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_alanine[language],\r\n            proteinData.alanine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.asparticAcid != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_asparticAcid[language],\r\n            proteinData.asparticAcid,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.glutamicAcid != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_glutamicAcid[language],\r\n            proteinData.glutamicAcid,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.glycine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_glysine[language],\r\n            proteinData.glycine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.proline != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_proline[language],\r\n            proteinData.proline,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.serine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_serine[language],\r\n            proteinData.serine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nfunction createTableObject(label: string, value_100g: number, portion: number, unit: String): FoodTableDataObject {\r\n    const valuePortion = calculatePortionData(value_100g, portion);\r\n    return {\r\n        label: label,\r\n        value_100g: `${MathService.autoRound(value_100g)} ${unit}`,\r\n        value_portion: `${MathService.autoRound(valuePortion)} ${unit}`\r\n    }\r\n}\r\n\r\n\r\nfunction calculatePortionData(value: number | null, portionSize: number) {\r\n    if(value === null || value === undefined) {\r\n        return \"n/a\";\r\n    } else if(value === 0) {\r\n        return 0;\r\n    }\r\n    return (value / 100) * portionSize;\r\n}","import SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport FoodDataPageHeader from \"./FoodDataPageHeader\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {\r\n    SOURCE_SRLEGACY,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {\r\n    createBaseDataTable,\r\n    createCarbsTable,\r\n    createEnergyTable,\r\n    createLipidsTable,\r\n    createMineralTable,\r\n    createProteinTable,\r\n    createVitaminTable\r\n} from \"../../service/TableService\";\r\n\r\ninterface FoodDataPageProps {\r\n    selectedFoodItem: SelectedFoodItem,\r\n    dataPage?: string\r\n}\r\n\r\nexport default function FoodDataPage(props: FoodDataPageProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const selectedDataTab = applicationContext\r\n        ? applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n        : TAB_BASE_DATA\r\n\r\n    const [tableData, setTableData] = useState<Array<FoodTableDataObject>>([])\r\n\r\n    const updatePage = () => {   // Central update method when any (radio) button was clicked\r\n        let tableDataList: Array<FoodTableDataObject> = [];\r\n        const {portion} = props.selectedFoodItem\r\n\r\n        const preferredSource = applicationContext ? applicationContext.applicationData.preferredSource : SOURCE_SRLEGACY\r\n\r\n        if (selectedDataTab === TAB_BASE_DATA) {\r\n            tableDataList = createBaseDataTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_ENERGY_DATA) {\r\n            tableDataList = createEnergyTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_VITAMIN_DATA) {\r\n            tableDataList = createVitaminTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_MINERAL_DATA) {\r\n            tableDataList = createMineralTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_LIPIDS_DATA) {\r\n            tableDataList = createLipidsTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_CARBS_DATA) {\r\n            tableDataList = createCarbsTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_PROTEINS_DATA) {\r\n            tableDataList = createProteinTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        }\r\n\r\n        setTableData(tableDataList)\r\n    }\r\n\r\n    useEffect(() => {\r\n            updatePage()\r\n        }, [props.selectedFoodItem,\r\n            applicationContext?.applicationData.preferredSource,\r\n            applicationContext?.applicationData.foodDataPanel.selectedDataPage,\r\n            applicationContext?.applicationData.foodDataPanel.displayMode,\r\n            applicationContext?.userData]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onNewDataPage = (datapage: string) => {\r\n        applicationContext.setFoodDataPanelData.setSelectedDataPage(datapage)\r\n        updatePage()\r\n    }\r\n\r\n    const onDisplayModeChange = (newMode: string) => {\r\n        applicationContext.setFoodDataPanelData.setSelectedDisplayMode(newMode)\r\n        updatePage()\r\n    }\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('FoodDataPage: Render, tabledata = ', tableData)\r\n    }\r\n\r\n    return <div>\r\n        <FoodDataPageHeader setDisplayMode={onDisplayModeChange}\r\n                            setDataPage={onNewDataPage}\r\n                            selectedFoodItem={props.selectedFoodItem}\r\n                            tableData={tableData}\r\n        />\r\n    </div>\r\n\r\n}","import NameType from \"../types/nutrientdata/NameType\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {getNameFromFoodNameList} from \"./nutrientdata/NameTypeService\";\r\nimport FoodDataPage from \"../components/fooddatapanel/FoodDataPage\";\r\nimport React from \"react\";\r\n\r\n/**\r\n * Enriches a selected food item by its JSX container to be displayed as a tab in the food data panel\r\n * @param selectedFoodItem The already initialized selected food item\r\n * @param foodNamesList The food names list\r\n * @param language The selected language\r\n */\r\nexport function makeFoodDataPanelComponent(selectedFoodItem: SelectedFoodItem, foodNamesList: Array<NameType>, \r\n\t\tlanguage: string): SelectedFoodItem | null {\r\n    let foodName\r\n    if(selectedFoodItem.foodItem.nameId) {\r\n        foodName = getNameFromFoodNameList(foodNamesList, selectedFoodItem.foodItem.nameId, language)\r\n    } else {\r\n        foodName = 'Individual'\r\n    }\r\n\r\n    if (foodName === null) {\r\n        console.error('No food name available.')\r\n        return null\r\n    }\r\n\r\n    selectedFoodItem.component = <FoodDataPage key={`page component ${selectedFoodItem.id}`} selectedFoodItem={selectedFoodItem}/>\r\n    selectedFoodItem.tab = foodName\r\n    selectedFoodItem.id = selectedFoodItem.foodItem.id\r\n\r\n    return selectedFoodItem\r\n}\r\n","import React, {useContext, useEffect, useState} from 'react'\r\nimport {Button} from 'react-bootstrap'\r\n\r\nimport FoodSelectorModal from '../foodselector/FoodSelectorModal'\r\nimport {FaLayerGroup, FaPlusSquare, FaTrash} from \"react-icons/all\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {confirmAction} from \"../ConfirmationDialog\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {PATH_FOODDATA_PANEL} from '../../config/Constants';\r\nimport {makeFoodDataPanelComponent} from \"../../service/FoodDataPanelService\";\r\n\r\ninterface FoodAnalyzerContainerProps {\r\n    openSelectorModal?: boolean\r\n    openCompositeSelectorModal?: boolean\r\n    onNewFoodItemSelected: () => void\r\n}\r\n\r\nexport default function FoodAnalyzerContainer(props: FoodAnalyzerContainerProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\tconst history = useHistory()\r\n\r\n    const showFoodSelectorInitialState = props.openSelectorModal === true\r\n    const showCompositeFoodSelectorInitialState = props.openCompositeSelectorModal === true\r\n\r\n    const [showFoodSelector, setShowFoodSelector] = useState<Boolean>(showFoodSelectorInitialState)\r\n    const [showFoodAggregatedFoodSelector, setShowAggregatedFoodSelector] = useState<Boolean>(showCompositeFoodSelectorInitialState)\r\n\r\n    useEffect(() => {\r\n        ReactTooltip.rebuild()\r\n    })\r\n\r\n    if(!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onHide = (): void => {\r\n        setShowFoodSelector(false)\r\n        setShowAggregatedFoodSelector(false)\r\n    }\r\n\r\n    const onSelectFoodItemSubmit = (selectedFoodItem: SelectedFoodItem): void => {\r\n        if (applicationContext === null) {\r\n            return\r\n        }\r\n\r\n        const selectedFoodItemWithComponent = makeFoodDataPanelComponent(\r\n            selectedFoodItem, applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n        if(selectedFoodItemWithComponent !== null) {\r\n            applicationContext.setFoodDataPanelData.addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n        }\r\n\r\n        if (applicationContext?.debug) {\r\n            console.log('FoodAnalyzerContainer: Set new selected item and execute callback. Selected item = ', selectedFoodItemWithComponent)\r\n        }\r\n\r\n        props.onNewFoodItemSelected()\r\n    }\r\n\r\n    const onCloseAllTabs = async () => {\r\n        if (await confirmAction(\r\n            applicationStrings.confirm_close_all_tabs[languageContext.language],\r\n            applicationStrings.button_yes[languageContext.language],\r\n            applicationStrings.button_no[languageContext.language],\r\n            {}\r\n        )) {\r\n            applicationContext?.setFoodDataPanelData.removeAllItemsFromFoodDataPanel()\r\n\t\t\thistory.push({pathName: PATH_FOODDATA_PANEL})\r\n        }\r\n    }\r\n\r\n    if (applicationContext?.debug) {\r\n        console.log('FoodAnalyzerContainer: Render')\r\n    }\r\n\r\n    const selectedFoodItems = applicationContext?.applicationData.foodDataPanel.selectedFoodItems\r\n    const deleteIconEnabled = selectedFoodItems && selectedFoodItems.length > 0\r\n\r\n    ReactTooltip.rebuild()\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                {showFoodSelector &&\r\n                <FoodSelectorModal onHide={onHide} selectedFoodItemCallback={onSelectFoodItemSubmit} compositeSelector={false}/>\r\n                }\r\n                { showFoodAggregatedFoodSelector &&\r\n                <FoodSelectorModal onHide={onHide} selectedFoodItemCallback={onSelectFoodItemSubmit} compositeSelector={true}/>\r\n                }\r\n                <div className={\"text-center\"} style={{paddingTop: \"16px\"}}>\r\n                    <Button onClick={() => setShowFoodSelector(!showFoodSelector)}\r\n                            className={\"btn\"}\r\n                            style={{marginRight: \"12px\"}}\r\n                            data-tip={applicationStrings.tooltip_icon_newFoodItem[languageContext.language]}>\r\n                        <FaPlusSquare/>\r\n                    </Button>\r\n                    <Button onClick={() => setShowAggregatedFoodSelector(!showFoodAggregatedFoodSelector)}\r\n                            className={\"btn\"}\r\n                            style={{marginRight: \"12px\"}}\r\n                            data-tip={applicationStrings.tooltip_icon_newFoodItemStack[languageContext.language]}>\r\n                        <FaLayerGroup/>\r\n                    </Button>\r\n                    <Button onClick={() => onCloseAllTabs()}\r\n                            disabled={deleteIconEnabled === false}\r\n                            data-tip={applicationStrings.tooltip_icon_removeAll[languageContext.language]}>\r\n                        <FaTrash/>\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport CloseableTabs from 'react-closeable-tabs';\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\ninterface TabContainerProps {\r\n    onTabChange: (id: number) => void\r\n    indexToSet: number\r\n}\r\n\r\n// Origin: Vinus Online\r\nexport default function TabContainer(props: TabContainerProps) {\r\n    const applicationData = useContext(ApplicationDataContextStore)\r\n\r\n    const style = {\r\n        buttonTab: {\r\n            border: \"border border-secondary\",\r\n            background: \"none\",\r\n            display: \"inline-flex\",\r\n            verticalAlign: \"middle\",\r\n            minHeight: \"30px\",\r\n            alignItems: \"center\",\r\n            cursor: \"pointer\",\r\n            marginTop: \"-12px\",\r\n            borderBottom: \"2px solid transparent\"\r\n        }\r\n    }\r\n\r\n    if(applicationData?.debug) {\r\n        console.log('TabContainer: Render, food panel data = ', applicationData.applicationData.foodDataPanel.selectedFoodItems)\r\n    }\r\n\r\n    if (!applicationData || !applicationData.applicationData.foodDataPanel.selectedFoodItems) {\r\n        return <div/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <CloseableTabs\r\n                data={applicationData.applicationData.foodDataPanel.selectedFoodItems}\r\n                tabPanelClass=\"tab-panel\"\r\n                tabContentClass=\"tab-content mainPanel\"\r\n                style={style}\r\n                onTabClick={(id) => props.onTabChange(id)}\r\n                activeIndex={applicationData.applicationData.foodDataPanel.selectedFoodItemIndex}\r\n            />\r\n        </div>\r\n    )\r\n}","import { AMOUNT_PORTION, CARBS_DATA_BASE, CARBS_DATA_DETAIL, CHART_TYPE_BAR, CHART_TYPE_PIE, GRAM, LIPIDS_DATA_BASE, LIPIDS_DATA_OMEGA, TAB_BASE_DATA, TAB_CARBS_DATA, TAB_LIPIDS_DATA, TAB_MINERAL_DATA, TAB_PROTEINS_DATA, TAB_VITAMIN_DATA } from \"../../config/Constants\"\r\nimport { ChartConfigData, DirectCompareChartConfigData, GeneralizedChartConfig } from \"../../types/livedata/ChartConfigData\"\r\nimport { convertBooleanToDigit, convertStringToBoolean } from \"../calculation/MathService\"\r\n\r\n/**\r\n * Converts/encodes a food data panel chart config sub-element into the corresponding URI query string.\r\n */\r\nexport function makeChartConfigUriString(chartConfigData: ChartConfigData | DirectCompareChartConfigData, selectedDataPage: string): string {\r\n\tlet chartObject: any\r\n\tswitch(selectedDataPage) {\r\n\t\tcase TAB_BASE_DATA:\r\n\t\t\tchartObject = chartConfigData.baseChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_LIPIDS_DATA:\r\n\t\t\tchartObject = chartConfigData.lipidsChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_CARBS_DATA:\r\n\t\t\tchartObject = chartConfigData.carbsChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_VITAMIN_DATA:\r\n\t\t\tchartObject = chartConfigData.vitaminChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_MINERAL_DATA:\r\n\t\t\tchartObject = chartConfigData.mineralChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_PROTEINS_DATA:\r\n\t\t\tchartObject = chartConfigData.proteinChartConfig\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tchartObject = {}\r\n\t}\r\n\t\r\n\tconst generalizedChartConfig = makeGeneralizedChartConfig(chartObject)\r\n\treturn convertGeneralizedChartConfigToString(generalizedChartConfig)\r\n}\r\n\r\n\r\n/**\r\n * Converts/decodes a URI query string to get the encoded chart config data of the currently selected data page\r\n * in the food data panel.\r\n * The resulting chart config will be added to the existing chart configuration data object passed to this method.\r\n */\r\nexport function getUpdatedChartConfig(chartConfigData: ChartConfigData, chartConfigUriString: string, selectedDataPage: string): ChartConfigData {\r\n\tconst chartConfigFromUri = convertGeneralizedChartConfigStringToObject(chartConfigUriString)\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart} = chartConfigFromUri\r\n\t\r\n\tif(selectedDataPage === TAB_BASE_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || showDetails === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, baseChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tshowDetails: showDetails\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_LIPIDS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, lipidsChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart: subChart\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_CARBS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, carbsChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart: subChart\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage === TAB_MINERAL_DATA || selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\tif(portionType === undefined || expand100 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\tconst barChartConfig = {\r\n\t\t\t\tportionType: portionType,\r\n\t\t\t\texpand100: expand100,\r\n\t\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_VITAMIN_DATA) {\r\n\t\t\treturn {...chartConfigData, vitaminChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_MINERAL_DATA) {\r\n\t\t\treturn {...chartConfigData, mineralChartConfig: barChartConfig}\r\n\t\t}\r\n\t\t\r\n\t\tif(selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\t\treturn {...chartConfigData, proteinChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\treturn chartConfigData\r\n}\r\n\r\n\r\nexport function getUpdatedDirectCompareChartConfig(chartConfigData: DirectCompareChartConfigData, \r\n\t\tchartConfigUriString: string, selectedDataPage: string): DirectCompareChartConfigData {\r\n\tconst chartConfigFromUri = convertGeneralizedChartConfigStringToObject(chartConfigUriString)\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart, subChart2, synchronize} = chartConfigFromUri\r\n\t\r\n\tif(selectedDataPage === TAB_BASE_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || showDetails === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, baseChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tshowDetails: showDetails\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_LIPIDS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined || subChart2 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, lipidsChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart1: subChart,\r\n\t\t\t\tsubChart2: subChart2\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_CARBS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined || subChart2 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, carbsChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart1: subChart,\r\n\t\t\t\tsubChart2: subChart2\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage === TAB_MINERAL_DATA || selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\tif(portionType === undefined || expand100 === undefined || synchronize === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\tconst barChartConfig = {\r\n\t\t\t\tportionType: portionType,\r\n\t\t\t\texpand100: expand100,\r\n\t\t\t\tsynchronize: synchronize\r\n\t\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_VITAMIN_DATA) {\r\n\t\t\treturn {...chartConfigData, vitaminChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_MINERAL_DATA) {\r\n\t\t\treturn {...chartConfigData, mineralChartConfig: barChartConfig}\r\n\t\t}\r\n\t\t\r\n\t\tif(selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\t\treturn {...chartConfigData, proteinChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\treturn chartConfigData\r\n}\r\n\r\n\r\n\r\nexport function makeGeneralizedChartConfig(chartObject: any): GeneralizedChartConfig {\r\n\tconst generalizedChartObject: GeneralizedChartConfig = {}\r\n\tif(chartObject.chartType) {\r\n\t\tgeneralizedChartObject.chartType = chartObject.chartType\r\n\t}\r\n\t\r\n\tif(chartObject.expand100) {\r\n\t\tgeneralizedChartObject.expand100 = chartObject.expand100\r\n\t}\r\n\t\r\n\tif(chartObject.showDetails) {\r\n\t\tgeneralizedChartObject.showDetails = chartObject.showDetails\r\n\t}\r\n\t\r\n\tif(chartObject.showLegend) {\r\n\t\tgeneralizedChartObject.showLegend = chartObject.showLegend\r\n\t}\r\n\t\r\n\tif(chartObject.portionType) {\r\n\t\tgeneralizedChartObject.portionType = chartObject.portionType\r\n\t}\r\n\r\n\tif(chartObject.subChart) {\r\n\t\tgeneralizedChartObject.subChart = chartObject.subChart\r\n\t}\r\n\t\r\n\tif(chartObject.subChart2) {\r\n\t\tgeneralizedChartObject.subChart2 = chartObject.subChart2\r\n\t}\r\n\t\r\n\tif(chartObject.synchronize) {\r\n\t\tgeneralizedChartObject.synchronize = chartObject.synchronize\r\n\t}\r\n\t\r\n\treturn generalizedChartObject\r\n}\r\n\r\n\r\nexport function convertGeneralizedChartConfigToString(chartObject: GeneralizedChartConfig) {\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart, subChart2, synchronize} = chartObject\r\n\t\r\n\tconst chartTypeKey = chartType === undefined || chartType === null ? 0 : chartType === CHART_TYPE_PIE ? 1 : 2\r\n\tconst portionTypeKey = portionType === undefined || portionType === null ? 0 : portionType === AMOUNT_PORTION ? 1 : 2\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\tconst expand100Key = expand100 ? convertBooleanToDigit(expand100) : 0\r\n\tconst showLegendKey = showLegend ? convertBooleanToDigit(showLegend) : 0\r\n\tconst showDetailsKey = showDetails ? convertBooleanToDigit(showDetails) : 0\r\n\t\r\n\tconst subChartKey = subChart ? getSubChartKey(subChart) : 0\r\n\tconst subChartKey2 = subChart2 ? getSubChartKey(subChart2) : 0\r\n\tconst synchronizeKey = synchronize ? convertBooleanToDigit(synchronize) : 0\r\n\t\r\n\treturn `${chartTypeKey}${portionTypeKey}${expand100Key}${showLegendKey}${showDetailsKey}${subChartKey}${subChartKey2}${synchronizeKey}`\r\n}\r\n\r\n\r\nexport function convertGeneralizedChartConfigStringToObject(uriString: string): GeneralizedChartConfig {\r\n\tif(!uriString) {\r\n\t\treturn {}\r\n\t}\r\n\t\r\n\tconst stringToParse = uriString.trim()\r\n\tif(stringToParse.length !== 8) {\r\n\t\treturn {}\r\n\t}\r\n\t\r\n\tconst chartTypeKey = stringToParse.substring(0, 1)\r\n\tconst portionTypeKey = stringToParse.substring(1, 2)\r\n\tconst expand100Key = stringToParse.substring(2, 3)\r\n\tconst showLegendKey = stringToParse.substring(3, 4)\r\n\tconst showDetailsKey = stringToParse.substring(4, 5)\r\n\tconst subChartKey = stringToParse.substring(5, 6)\r\n\tconst subChartKey2 = stringToParse.substring(6, 7)\r\n\tconst synchronizeKey = stringToParse.substring(7, 8)\r\n\t\r\n\tconst chartTypeNumber = parseInt(chartTypeKey)\r\n\tconst portionTypeNumber = parseInt(portionTypeKey)\r\n\tconst subChartNumber = parseInt(subChartKey)\r\n\tconst subChartNumber2 = parseInt(subChartKey2)\r\n\t\t\r\n\tconst chartType = chartTypeNumber === 0 || isNaN(chartTypeNumber) \r\n\t\t\t\t\t\t? undefined \r\n\t\t\t\t\t\t: chartTypeNumber === 1 ? CHART_TYPE_PIE : CHART_TYPE_BAR\r\n\t\t\t\t\t\t\r\n\tconst portionType = portionTypeNumber === 0 || isNaN(portionTypeNumber) \r\n\t\t\t\t\t\t? undefined \r\n\t\t\t\t\t\t: portionTypeNumber === 1 ? AMOUNT_PORTION : GRAM\r\n\t\r\n\tconst subChart = subChartNumber === 0 || isNaN(subChartNumber) ? undefined : getSubChartFromKey(subChartNumber)\r\n\tconst subChart2 = subChartNumber2 === 0 || isNaN(subChartNumber2) ? undefined : getSubChartFromKey(subChartNumber2)\r\n\t\r\n\treturn {\r\n\t\tchartType: chartType,\r\n\t\tportionType: portionType,\r\n\t\texpand100: convertStringToBoolean(expand100Key),\r\n\t\tshowLegend: convertStringToBoolean(showLegendKey),\r\n\t\tshowDetails: convertStringToBoolean(showDetailsKey),\r\n\t\tsubChart: subChart ? subChart : undefined,\r\n\t\tsubChart2: subChart2 ? subChart2 : undefined,\r\n\t\tsynchronize: convertStringToBoolean(synchronizeKey)\r\n\t}\r\n\t\r\n}\r\n\r\n\r\nexport function getSubChartKey(subChart: string): number {\r\n\tswitch(subChart) {\r\n\t\tcase CARBS_DATA_BASE:\r\n\t\t\treturn 1\r\n\t\tcase CARBS_DATA_DETAIL:\r\n\t\t\treturn 2\r\n\t\tcase LIPIDS_DATA_BASE:\r\n\t\t\treturn 3\r\n\t\tcase LIPIDS_DATA_OMEGA:\r\n\t\t\treturn 4\r\n\t\tdefault:\r\n\t\t\treturn 0\r\n\t}\r\n}\r\n\r\nexport function getSubChartFromKey(key: number): string | null {\r\n\tswitch(key) {\r\n\t\tcase 1:\r\n\t\t\treturn CARBS_DATA_BASE\r\n\t\tcase 2:\r\n\t\t\treturn CARBS_DATA_DETAIL\r\n\t\tcase 3:\r\n\t\t\treturn LIPIDS_DATA_BASE\r\n\t\tcase 4:\r\n\t\t\treturn LIPIDS_DATA_OMEGA\r\n\t\tdefault:\r\n\t\t\treturn null\r\n\t}\t\t\r\n}\r\n","import {PATH_FOODDATA_PANEL, SEX_FEMALE, SEX_MALE} from \"../../config/Constants\"\r\nimport {ChartConfigData} from \"../../types/livedata/ChartConfigData\"\r\nimport {FoodItemUriData, SimpleFoodItemUriData} from \"../../types/livedata/UriData\"\r\nimport {UserData} from \"../../types/livedata/UserData\"\r\nimport {PortionData} from \"../../types/nutrientdata/FoodItem\"\r\nimport {getPalCategory, getPalValue} from \"../calculation/EnergyService\"\r\nimport {convertBooleanToDigit, convertStringToBoolean, getNumberOfFixedLength} from \"../calculation/MathService\"\r\nimport {getUpdatedChartConfig, makeChartConfigUriString} from \"./ChartConfigConverter\"\r\n\r\n\r\nexport function makeFoodDataPanelDefaultUri(foodItemData: FoodItemUriData,\r\n\t\tuserData: UserData, selectedDataPage: string, selectedDisplayMode: string, chartConfigData: ChartConfigData) {\r\n\tconst foodItemDataString = makeFoodItemDefaultUri(foodItemData)\r\n\tconst userDataString = convertUserDataObjectToString(userData)\r\n\tconst chartConfigString = makeChartConfigUriString(chartConfigData, selectedDataPage)\r\n\treturn `${foodItemDataString};${selectedDataPage};${selectedDisplayMode};${userDataString};${chartConfigString}`\r\n}\r\n\r\nexport function makeFoodItemDefaultUri(foodItemData: FoodItemUriData) {\r\n\t\tconst portionString = convertPortionDataObjectToString(foodItemData.portionData)\t\r\n\t\tconst supplementValue = convertBooleanToDigit(foodItemData.supplementData)\r\n\t\tconst combineValue = convertBooleanToDigit(foodItemData.combineData)\r\n\t\t\r\n\t\treturn `${foodItemData.foodItemId};${foodItemData.source};${portionString};${supplementValue}${combineValue}`\r\n}\r\n\r\nexport function parseFoodDataPanelDefaultUri(uri: string, chartConfigData: ChartConfigData): SimpleFoodItemUriData | null {\r\n\tconst fragments = prepareUriForParsing(uri).split(\";\")\r\n\tif(fragments.length !== 8) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst selectedDataPage = fragments[4]\r\n\tconst displayMode = fragments[5]\r\n\tconst userData = convertUserDataStringToObject(fragments[6])\r\n\tconst chartConfigString = fragments[7]\r\n\tconst foodItemUriData = getFoodItemUriData(fragments)\r\n\t\r\n\tif(!userData || !foodItemUriData) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst newChartConfigData = getUpdatedChartConfig(chartConfigData, chartConfigString, selectedDataPage)\r\n\t\r\n\treturn {\r\n\t\tselectedFoodItem: foodItemUriData,\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tdisplayMode: displayMode,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Retrieves the food item uri data from a fragments string. It will always extract those\r\n * data objects from the beginning of the array, no matter how long it is.\r\n */\r\nexport function getFoodItemUriData(fragments: Array<string>): FoodItemUriData | null {\r\n\tconst foodItemId = parseInt(fragments[0])\r\n\tconst source = parseInt(fragments[1])\r\n\tconst portionData = convertPortionDataStringToObject(fragments[2])\r\n\tconst booleanData = fragments[3]\r\n\t\r\n\tconst supplementData = convertStringToBoolean(booleanData.substring(0,1))\r\n\tconst combineData = convertStringToBoolean(booleanData.substring(1,2))\r\n\t\r\n\tif(!portionData || booleanData.length < 2) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\treturn {\r\n\t\tfoodItemId: foodItemId,\r\n\t\tsource: source,\r\n\t\tportionData: portionData,\r\n\t\tsupplementData: supplementData,\r\n\t\tcombineData: combineData\r\n\t}\r\n}\r\n\r\nexport function convertUserDataObjectToString(userData: UserData): string {\r\n\tconst weight = getNumberOfFixedLength(userData.weight, 3)\r\n\tconst age = getNumberOfFixedLength(userData.age, 3)\r\n\tconst size = getNumberOfFixedLength(userData.size, 3)\r\n\r\n\tconst palValue = getNumberOfFixedLength( getPalCategory(userData.palValue), 2)\r\n\tconst sex = userData.sex === SEX_MALE ? 1 : 0\r\n\t\r\n\tconst pregnant = convertBooleanToDigit(userData.pregnant)\r\n\tconst breastFeeding = convertBooleanToDigit(userData.breastFeeding)\r\n\tconst leisureSports = convertBooleanToDigit(userData.leisureSports)\r\n\t\t\r\n\treturn `${weight}${age}${size}${palValue}${sex}${pregnant}${breastFeeding}${leisureSports}`\r\n}\r\n\r\n\r\nexport function convertUserDataStringToObject(userDataString: string): UserData | null {\r\n\tif(userDataString.length < 15) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst weight = userDataString.substring(0,3)\r\n\tconst age = userDataString.substring(3,6)\r\n\tconst size = userDataString.substring(6,9)\r\n\tconst palValueInt = userDataString.substring(9,11)\r\n\tconst sex = userDataString.substring(11,12)\r\n\tconst pregnant = userDataString.substring(12,13)\r\n\tconst breastFeeding = userDataString.substring(13,14)\r\n\tconst leisureSports = userDataString.substring(14,15)\r\n\t\r\n\tconst palValue = getPalValue(parseInt(palValueInt))\r\n\t\r\n\treturn {\r\n\t\tweight: parseInt(weight),\r\n\t\tage: parseInt(age),\r\n\t\tsize: parseInt(size),\r\n\t\tpalValue: palValue,\r\n\t\tsex: sex === \"1\" ? SEX_MALE : SEX_FEMALE,\r\n\t\tpregnant: convertStringToBoolean(pregnant),\r\n\t\tbreastFeeding: convertStringToBoolean(breastFeeding),\r\n\t\tleisureSports: convertStringToBoolean(leisureSports),\r\n\t\tinitialValues: false\r\n\t}\r\n}\r\n\r\n\r\nexport function convertPortionDataObjectToString(portionData: PortionData): string {\r\n\treturn `${portionData.portionType}_${portionData.amount}`\r\n}\r\n\r\nexport function convertPortionDataStringToObject(portionDataString: string): PortionData | null {\r\n\tconst fragments = portionDataString.split(\"_\")\r\n\tif(fragments.length !== 2) {\r\n\t\treturn null\r\n\t}\r\n\treturn {\r\n\t\tportionType: parseInt(fragments[0]),\r\n\t\tamount: parseInt(fragments[1])\r\n\t}\r\n}\r\n\r\n\r\nexport function prepareUriForParsing(uri: string): string {\r\n\t// Some websites like youtube transform the semicolons in the URL to %3B, which later need to be translated back to semicolons\r\n\treturn uri.replace(/%3B/g, \";\")\r\n}\r\n\r\n","import { ChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\"\r\nimport { AggregatedFoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { getUpdatedChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\nimport {\r\n\tconvertUserDataObjectToString,\r\n\tconvertUserDataStringToObject,\r\n\tprepareUriForParsing\r\n} from \"./FoodDataPanelUriService\"\r\n\r\n\r\ninterface Replacemet {\r\n\tkey: string\r\n\tshort: string\r\n}\r\n\r\nconst separator = \"++\"\r\n\r\nconst metaDataReplacement: Array<Replacemet> = [\r\n\t{key: \"nutrientDataList\", short: \"_mA\"},\r\n\t{key: \"foodItem\", short: \"_mB\"},\r\n\t{key: \"sourceItemId\", short: \"_mC\"},\r\n\t{key: \"source\", short: \"_mD\"},\r\n\t{key: \"url\", short: \"_mE\"},\r\n\t{key: \"name\", short: \"_mF\"},\r\n\t{key: \"id\", short: \"_mG\"},\r\n]\r\n\t\r\nconst nutrientCategoryReplacement: Array<Replacemet> = [\r\n\t{key: \"baseData\", short: \"_nA\"},\r\n\t{key: \"carbohydrateData\", short: \"_nB\"},\r\n\t{key: \"vitaminData\", short: \"_nC\"},\r\n\t{key: \"mineralData\", short: \"_nD\"},\r\n\t{key: \"lipidData\", short: \"_nE\"},\r\n\t{key: \"proteinData\", short: \"_nF\"},\r\n]\r\n\r\nconst baseDataReplacements: Array<Replacemet> = [\r\n\t{key: \"energy\", short: \"_bA\"},\r\n\t{key: \"water\", short: \"_bB\"},\r\n\t{key: \"carbohydrates\", short: \"_bC\"},\r\n\t{key: \"lipids\", short: \"_bD\"},\r\n\t{key: \"proteins\", short: \"_bE\"},\r\n\t{key: \"dietaryFibers\", short: \"_bF\"},\r\n\t{key: \"ash\", short: \"_bG\"},\r\n\t{key: \"alcohol\", short: \"_bH\"}\r\n]\r\n\r\nconst carbsDataReplacements: Array<Replacemet> = [\r\n\t{key: \"sugar\", short: \"_cA\"},\r\n\t{key: \"sucrose\", short: \"_cB\"},\r\n\t{key: \"glucose\", short: \"_cC\"},\r\n\t{key: \"lactose\", short: \"_cD\"},\r\n\t{key: \"fructose\", short: \"_cE\"},\r\n\t{key: \"galactose\", short: \"_cF\"},\r\n\t{key: \"maltose\", short: \"_cG\"},\r\n\t{key: \"starch\", short: \"_cH\"}\r\n]\r\n\r\nconst lipidsDataReplacements: Array<Replacemet> = [\r\n\t{key: \"saturated\", short: \"_lA\"},\r\n\t{key: \"unsaturatedMono\", short: \"_lB\"},\r\n\t{key: \"unsaturatedPoly\", short: \"_lC\"},\r\n\t{key: \"transFattyAcids\", short: \"_lD\"},\r\n\t{key: \"cholesterol\", short: \"_lE\"},\r\n\t{key: \"galactose\", short: \"_lF\"},\r\n\t{key: \"omegaData\", short: \"_lG\"},\r\n\t{key: \"omega3\", short: \"_lH\"},\r\n\t{key: \"omega6\", short: \"_li\"},\r\n\t{key: \"uncertain\", short: \"_lj\"},\r\n\t{key: \"uncertainRatio\", short: \"_li\"}\r\n]\r\n\r\nconst mineralDataReplacement: Array<Replacemet> = [\r\n\t{key: \"calcium\", short: \"_bA\"},\r\n\t{key: \"iron\", short: \"_bB\"},\r\n\t{key: \"magnesium\", short: \"_bC\"},\r\n\t{key: \"phosphorus\", short: \"_bD\"},\r\n\t{key: \"potassium\", short: \"_bE\"},\r\n\t{key: \"sodium\", short: \"_bF\"},\r\n\t{key: \"zinc\", short: \"_bG\"},\r\n\t{key: \"selenium\", short: \"_bH\"},\r\n\t{key: \"manganese\", short: \"_bI\"},\r\n\t{key: \"copper\", short: \"_bJ\"}\r\n]\r\n\r\nconst vitaminDataReplacement: Array<Replacemet> = [\r\n\t{key: \"a\", short: \"_vA\"},\r\n\t{key: \"b1\", short: \"_vB\"},\r\n\t{key: \"b2\", short: \"_vC\"},\r\n\t{key: \"b3\", short: \"_vD\"},\r\n\t{key: \"b5\", short: \"_vE\"},\r\n\t{key: \"b7\", short: \"_vF\"},\r\n\t{key: \"b9\", short: \"_vG\"},\r\n\t{key: \"b12\", short: \"_vH\"},\r\n\t{key: \"c\", short: \"_vI\"},\r\n\t{key: \"d\", short: \"_vJ\"},\r\n\t{key: \"e\", short: \"_vK\"},\r\n\t{key: \"k\", short: \"_vL\"}\r\n]\r\n\r\nconst proteinDataReplacement: Array<Replacemet> = [\r\n\t{key: \"tryptophan\", short: \"_bA\"},\r\n\t{key: \"threonine\", short: \"_bB\"},\r\n\t{key: \"isoleucine\", short: \"_bC\"},\r\n\t{key: \"leucine\", short: \"_bD\"},\r\n\t{key: \"lysine\", short: \"_bE\"},\r\n\t{key: \"methionine\", short: \"_bF\"},\r\n\t{key: \"cystine\", short: \"_bG\"},\r\n\t{key: \"phenylalanine\", short: \"_bH\"},\r\n\t{key: \"tyrosine\", short: \"_bI\"},\r\n\t{key: \"arginine\", short: \"_bJ\"},\r\n\t{key: \"histidine\", short: \"_bK\"},\r\n\t{key: \"alanine\", short: \"_bL\"},\r\n\t{key: \"asparticAcid\", short: \"_bM\"},\r\n\t{key: \"glycine\", short: \"_bN\"},\r\n\t{key: \"proline\", short: \"_bO\"},\r\n\t{key: \"serine\", short: \"_bP\"},\r\n]\r\n\r\nconst replacements: Array<Array<Replacemet>> = [\r\n\tmetaDataReplacement,\r\n\tnutrientCategoryReplacement,\r\n\tbaseDataReplacements,\r\n\tcarbsDataReplacements,\r\n\tlipidsDataReplacements,\r\n\tmineralDataReplacement,\r\n\tvitaminDataReplacement,\r\n\tproteinDataReplacement\r\n]\r\n\r\n\r\nexport function convertAggregatedDataJsonToUriString(uriData: AggregatedFoodItemUriData): string {\t\r\n\tconst objectToParse: SelectedFoodItem = {...uriData.selectedFoodItem, compositeSubElements: undefined, component: undefined, foodClass: undefined}\r\n\tlet selectedFoodItemString = JSON.stringify(objectToParse)\r\n\t\r\n\treplacements.forEach(replacementArray => {\r\n\t\treplacementArray.forEach(replacement => selectedFoodItemString = selectedFoodItemString.replace(`\"${replacement.key}\"`, replacement.short))\r\n\t})\r\n\t\r\n\tconst userDataString = convertUserDataObjectToString(uriData.userData)\r\n\tconst chartConfigString = makeChartConfigUriString(uriData.chartConfigData, uriData.selectedDataPage)\r\n\t\r\n\treturn `${uriData.selectedDataPage}${separator}${selectedFoodItemString}${separator}${userDataString}${separator}${chartConfigString}`\r\n}\r\n\r\nexport function convertAggregatedUriStringToObject(chartConfigData: ChartConfigData, uriString: string): AggregatedFoodItemUriData | null {\r\n\tconst fragments = uriString.split(separator)\r\n\tif(fragments.length !== 4) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\tconst selectedDataPage = fragments[0]\r\n\tlet selectedFoodItem: SelectedFoodItem = convertUriStringToSelectedFoodItem( fragments[1])\r\n\tselectedFoodItem = {...selectedFoodItem, aggregated: true}\r\n\t\r\n\tconst userData: UserData | null = convertUserDataStringToObject(fragments[2])\r\n\tconst newChartConfigData: ChartConfigData = getUpdatedChartConfig(chartConfigData, fragments[3], selectedDataPage)\r\n\t\r\n\tif(!userData) {\r\n\t\treturn null\r\n\t}\r\n\t\t\r\n\treturn {\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tselectedFoodItem: selectedFoodItem,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n}\r\n\r\n\r\nexport function convertUriStringToSelectedFoodItem(uriString: string): SelectedFoodItem {\r\n\tlet stringToParse = prepareUriForParsing(uriString).trim()\r\n\tstringToParse = stringToParse.replace(/%22/g, \"\\\"\")\r\n\tstringToParse = stringToParse.replace(/%20/g, \" \")\r\n\t\r\n\treplacements.forEach(replacementArray => {\r\n\t\treplacementArray.forEach(replacement => stringToParse = stringToParse.replace(replacement.short, `\"${replacement.key}\"`))\r\n\t})\r\n\t\r\n\treturn JSON.parse(stringToParse)\r\n}","import { UserData } from \"../types/livedata/UserData\";\r\n\r\nexport const USERDATA_ERROR_AGE = \"userdata error age\"\r\nexport const USERDATA_ERROR_WEIGHT = \"userdata error weight\"\r\nexport const USERDATA_ERROR_SIZE = \"userdata error size\"\r\nexport const USERDATA_OK = \"userdata ok\"\r\n\r\nexport function checkUserDataValidity(userData: UserData): string {\r\n\tconst {age, size, weight} = userData\r\n\r\n\tif (age != null && (age < 15 || age > 100)) {\r\n\t\treturn USERDATA_ERROR_AGE\r\n    } else if (size != null && (size < 80 || size > 225)) {\r\n\t\treturn USERDATA_ERROR_SIZE\r\n\t} else if (weight != null && (weight < 30 || weight > 250)) {\r\n\t\treturn USERDATA_ERROR_WEIGHT\r\n    }\r\n\r\n    return USERDATA_OK\r\n}","import FoodAnalyzerContainer from \"./FoodAnalyzerContainer\";\r\nimport {useContext, useEffect} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport TabContainer from \"./TabContainer\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {\r\n    PATH_FOODDATA_PANEL,\r\n    QUERYKEY_DATAPANEL_ADD, QUERYKEY_DATAPANEL_ADD_COMPOSITE,\r\n    QUERYKEY_DATAPANEL_AGGREGATED,\r\n    QUERYKEY_DATAPANEL_ITEM\r\n} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {makeFoodDataPanelComponent} from \"../../service/FoodDataPanelService\";\r\nimport {AggregatedFoodItemUriData, FoodItemUriData} from \"../../types/livedata/UriData\";\r\nimport {makeFoodDataPanelDefaultUri, parseFoodDataPanelDefaultUri} from \"../../service/uri/FoodDataPanelUriService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {\r\n    convertAggregatedDataJsonToUriString,\r\n    convertAggregatedUriStringToObject\r\n} from \"../../service/uri/FoodDataPanelAggregatedUriService\";\r\nimport {checkUserDataValidity, USERDATA_OK} from \"../../service/UserDataService\";\r\n\r\n\r\ninterface FoodDataPanelContainerProps {\r\n    openSelectorModal: boolean\r\n}\r\n\r\nexport default function FoodDataPanelContainer(props: FoodDataPanelContainerProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const queryString = window.location.search.substring(1)\r\n    const equalOperator = queryString.indexOf(\"=\")\r\n    const key = queryString.substring(0, equalOperator)\r\n    const value = queryString.substring(equalOperator + 1)\r\n\r\n    const openSelectorModal = key === QUERYKEY_DATAPANEL_ADD && value === \"1\"\r\n    const openCompositeSelectorModal = key === QUERYKEY_DATAPANEL_ADD_COMPOSITE && value === \"1\"\r\n\r\n    useEffect(() => {\r\n        buildDataPanelPageFromURI()\r\n    }, [applicationContext?.applicationData.foodDataPanel.selectedFoodItemIndex,\r\n        applicationContext?.applicationData.foodDataPanel.selectedFoodItems,\r\n        applicationContext?.applicationData.foodDataPanel.selectedDataPage,\r\n        applicationContext?.applicationData.foodDataPanel.displayMode,\r\n        applicationContext?.applicationData.foodDataPanel.chartConfigData,\r\n        applicationContext?.userData])\r\n\r\n    const buildDataPanelPageFromURI = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const {selectedFoodItemIndex, selectedFoodItems} = applicationContext.applicationData.foodDataPanel\r\n\r\n        if (selectedFoodItemIndex === null || !selectedFoodItems || selectedFoodItems.length === 0) {\r\n            createDataFromUriQuery()\r\n        } else {   // Set new URI Query\r\n            updateUriQuery(selectedFoodItemIndex)\r\n        }\r\n    }\r\n\r\n    if (!applicationContext || !applicationContext.ready) {\r\n        return <div/>\r\n    }\r\n\r\n    const chartConfigData = applicationContext.applicationData.foodDataPanel.chartConfigData\r\n\r\n    const updateUriQuery = (selectedFoodItemIndex: number) => {\r\n        const selectedFoodItem = selectedFoodItems[selectedFoodItemIndex]\r\n        const userData = applicationContext.userData\r\n        const {selectedDataPage, displayMode, chartConfigData} = applicationContext.applicationData.foodDataPanel\r\n\r\n        // New query for aggregated food item\r\n        if (selectedFoodItem.aggregated) {\r\n            const uriDataObject: AggregatedFoodItemUriData = {\r\n                selectedFoodItem: {...selectedFoodItem, component: undefined},\r\n                selectedDataPage: selectedDataPage,\r\n                userData: userData,\r\n                chartConfigData: chartConfigData\r\n            }\r\n\r\n            const query = convertAggregatedDataJsonToUriString(uriDataObject)\r\n\r\n            history.push({\r\n                pathName: PATH_FOODDATA_PANEL,\r\n                search: `${QUERYKEY_DATAPANEL_AGGREGATED}=${query}`\r\n            })\r\n        } else {   // New query for a default food item\r\n            const {portion, selectedSource, supplementData, combineData} = selectedFoodItem\r\n            const foodItemData: FoodItemUriData = {\r\n                foodItemId: selectedFoodItem.foodItem.id,\r\n                portionData: portion,\r\n                source: selectedSource,\r\n                supplementData: supplementData,\r\n                combineData: combineData\r\n            }\r\n            const query = makeFoodDataPanelDefaultUri(foodItemData, userData, selectedDataPage, displayMode, chartConfigData)\r\n\r\n            history.push({\r\n                pathName: PATH_FOODDATA_PANEL,\r\n                search: `${QUERYKEY_DATAPANEL_ITEM}=${query}`\r\n            })\r\n        }\r\n    }\r\n\r\n    const createDataFromUriQuery = () => {\r\n        const {addItemToFoodDataPanel, setSelectedDataPage, setSelectedDisplayMode} = applicationContext.setFoodDataPanelData\r\n\r\n        // Set data from an aggregated food item query\r\n        if (key === QUERYKEY_DATAPANEL_AGGREGATED && value.length > 1) {\r\n            try {\r\n                const uriDataObject: AggregatedFoodItemUriData | null = convertAggregatedUriStringToObject(chartConfigData, value)\r\n                if (!uriDataObject) {\r\n                    return\r\n                }\r\n\r\n                if (checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n                    return\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(uriDataObject.chartConfigData)\r\n                setSelectedDataPage(uriDataObject.selectedDataPage)\r\n                applicationContext.setUserData(uriDataObject.userData)\r\n\r\n                const selectedFoodItemWithComponent = makeFoodDataPanelComponent(uriDataObject.selectedFoodItem,\r\n                    applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n                if (selectedFoodItemWithComponent) {\r\n                    addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n                }\r\n            } catch (e) {\r\n                console.error(e)\r\n            }\r\n        }\r\n\r\n        // Set data from a simple food item (create data from query parameters)\r\n        if (key === QUERYKEY_DATAPANEL_ITEM && value.length > 1) {\r\n            const uriDataObject = parseFoodDataPanelDefaultUri(value, chartConfigData)\r\n            if (uriDataObject) {\r\n                const foodItem = applicationContext.foodDataCorpus.foodItems.find(\r\n                    foodItem => foodItem.id === uriDataObject.selectedFoodItem.foodItemId\r\n                )\r\n\r\n                if (!foodItem) {\r\n                    return\r\n                }\r\n\r\n                if (checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n                    return\r\n                }\r\n\r\n                applicationContext.setUserData(uriDataObject.userData)\r\n                const foodClass = applicationContext.foodDataCorpus.foodClasses.find(foodClass => foodClass.id === foodItem.foodClass)\r\n\r\n                const selectedFoodItem: SelectedFoodItem = {\r\n                    id: 1,\r\n                    foodItem: foodItem,\r\n                    foodClass: foodClass,\r\n                    portion: uriDataObject.selectedFoodItem.portionData,\r\n                    selectedSource: uriDataObject.selectedFoodItem.source,\r\n                    combineData: uriDataObject.selectedFoodItem.combineData,\r\n                    supplementData: uriDataObject.selectedFoodItem.supplementData\r\n                }\r\n\r\n                setSelectedDataPage(uriDataObject.selectedDataPage)\r\n                setSelectedDisplayMode(uriDataObject.displayMode)\r\n\r\n                const selectedFoodItemWithComponent = makeFoodDataPanelComponent(selectedFoodItem,\r\n                    applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n                if (selectedFoodItemWithComponent) {\r\n                    addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(uriDataObject.chartConfigData)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const selectedFoodItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems\r\n\r\n    const onTabChange = (foodId) => {\r\n        buildDataPanelPageFromURI()\r\n        for (let i = 0; i < selectedFoodItems.length; i++) {\r\n            if (selectedFoodItems[i].id === foodId) {\r\n                applicationContext.setFoodDataPanelData.setSelectedFoodTab(i)\r\n            }\r\n        }\r\n    }\r\n\r\n    const onNewFoodItemSelected = (): void => {\r\n        buildDataPanelPageFromURI()\r\n        const newTabIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length - 1\r\n        applicationContext.setFoodDataPanelData.setSelectedFoodTab(newTabIndex)\r\n    }\r\n\r\n    const selectedTabIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n    if (!(selectedTabIndex >= 0)) {\r\n        return <div/>\r\n    }\r\n\r\n    const selectedFoodItem = applicationContext.applicationData.foodDataPanel.selectedFoodItems[selectedTabIndex]\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('FoodDataPanelContainer: Render, selected food item = ', selectedFoodItem)\r\n    }\r\n\r\n    return <div>\r\n        {selectedFoodItem !== null &&\r\n        <div className=\"container-fluid\" style={{paddingTop: \"20px\"}}>\r\n            <div className=\"row\">\r\n                <div className={\"col-2\"}>\r\n                    <FoodAnalyzerContainer onNewFoodItemSelected={onNewFoodItemSelected}\r\n                                           openSelectorModal={openSelectorModal}\r\n                                           openCompositeSelectorModal={openCompositeSelectorModal}\r\n                    />\r\n                </div>\r\n                <div className=\"col-10 media app\" style={{maxWidth: \"1100px\", marginTop: \"-10px\"}}>\r\n                    {selectedFoodItems && selectedFoodItems.length > 0 ?\r\n                        <div>\r\n                            <TabContainer indexToSet={selectedTabIndex} onTabChange={onTabChange}/>\r\n                        </div>\r\n                        :\r\n                        <div style={{padding: \"24px\"}}>\r\n                            <i>\r\n                                {applicationStrings.text_empty_fooddatapanel[languageContext.language]}\r\n                            </i>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n        }\r\n    </div>\r\n\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport FoodSelector from \"./FoodSelector\";\r\nimport {Button, Card, CardDeck} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\n\r\ninterface DirectCompareSelectorProps {\r\n    updateSelectedFoodItems: (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => void\r\n}\r\n\r\nconst STATUS_FIRST_TIME = \"first time\"\r\nconst STATUS_NOT_UPDATED = \"not updated\"\r\nconst STATUS_UPDATED = \"updated\"\r\n\r\nexport function DirectCompareSelector(props: DirectCompareSelectorProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const language = languageContext.language\r\n\r\n    const initialItem1 = applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        ? applicationContext.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        : null\r\n\r\n    const initialItem2 = applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        ? applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        : null\r\n\r\n    const [selectedFoodItem1, setSelectedFoodItem1] = useState<SelectedFoodItem | null>(initialItem1)\r\n    const [selectedFoodItem2, setSelectedFoodItem2] = useState<SelectedFoodItem | null>(initialItem2)\r\n    const [displayStatus, setDisplayStatus] = useState<string>(STATUS_FIRST_TIME)\r\n\r\n    useEffect(() => {\r\n        if(applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2) {\r\n            const {selectedFoodItem1, selectedFoodItem2} = applicationContext.applicationData.directCompareDataPanel\r\n            if(selectedFoodItem1 && selectedFoodItem2) {\r\n                updateSelectedFoodItem1(selectedFoodItem1)\r\n                updateSelectedFoodItem2(selectedFoodItem2)\r\n            }\r\n        }\r\n\r\n    }, [applicationContext?.applicationData.directCompareDataPanel])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateSelectedFoodItem1 = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem1({...selectedFoodItem})\r\n        if (displayStatus !== STATUS_FIRST_TIME) {\r\n            setDisplayStatus(STATUS_UPDATED)\r\n        }\r\n    }\r\n\r\n    const updateSelectedFoodItem2 = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem2(selectedFoodItem)\r\n        if (displayStatus !== STATUS_FIRST_TIME) {\r\n            setDisplayStatus(STATUS_UPDATED)\r\n        }\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (selectedFoodItem1 && selectedFoodItem2) {\r\n            props.updateSelectedFoodItems(selectedFoodItem1, selectedFoodItem2)\r\n        }\r\n\r\n        setDisplayStatus(STATUS_NOT_UPDATED)\r\n    }\r\n\r\n\r\n    const renderFoodSelectorCard = (foodSelectorNumber: number) => {\r\n        const updateSelectedFoodItem = foodSelectorNumber === 1 ? updateSelectedFoodItem1 : updateSelectedFoodItem2\r\n        const styleClass = foodSelectorNumber === 1 ? {backgroundColor: direct_compare_color1} : {backgroundColor: direct_compare_color2}\r\n        const initialFoodClassToSet = foodSelectorNumber - 1\r\n\r\n        const selectedFoodItem = foodSelectorNumber === 1 ? selectedFoodItem1 : selectedFoodItem2\r\n\r\n        return <div style={{paddingTop: \"32px\"}}>\r\n            <Card style={styleClass}>\r\n                <Card.Header>\r\n                    {applicationStrings.label_food[language]} {foodSelectorNumber}\r\n                </Card.Header>\r\n                <CardDeck>\r\n                    <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                  smallVariant={true}\r\n                                  noCategorySelect={true}\r\n                                  initialFoodClassToSet={initialFoodClassToSet}\r\n                                  selectedFoodItem={selectedFoodItem}\r\n                    />\r\n                </CardDeck>\r\n            </Card>\r\n        </div>\r\n    }\r\n\r\n    const buttonName = displayStatus === STATUS_FIRST_TIME ? applicationStrings.button_show[language] : applicationStrings.button_update[language]\r\n\r\n    return <div>\r\n        {renderFoodSelectorCard(1)}\r\n        {renderFoodSelectorCard(2)}\r\n        <div style={{paddingTop: \"20px\", paddingBottom: \"64px\"}}>\r\n            <Button className={\"form-button float-end\"}\r\n                    disabled={displayStatus === STATUS_NOT_UPDATED}\r\n                    onClick={onSubmit}>\r\n                {buttonName}\r\n            </Button>\r\n        </div>\r\n    </div>\r\n}","import {determineFoodRequirementRatio, determineProteinRequirementRatio} from \"./DietaryRequirementService\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\n\r\n/**\r\n * Determines the maximum vitamin or mineral or protein value of a food item (referring to the daily dietary requirements).\r\n */\r\nexport function getMaximumValue(dataSet: any, amount: number, requirementData: any, userData: UserData, proteins?: boolean) {\r\n    let maxValue = 0\r\n    for (let dataSetKey in dataSet) {\r\n        if (requirementData[dataSetKey]) {\r\n            const ratioValue = proteins === true\r\n                ? determineProteinRequirementRatio(requirementData[dataSetKey], dataSet[dataSetKey], amount, userData)\r\n                : determineFoodRequirementRatio(requirementData[dataSetKey], dataSet[dataSetKey], amount, userData)\r\n            if (ratioValue > maxValue) {\r\n                maxValue = ratioValue\r\n            }\r\n        }\r\n    }\r\n    return maxValue\r\n}\r\n\r\n/**\r\n * Given two data sets of vitamins, minerals or proteins, this method nullifies each value if it does not occur in\r\n * both data sets. This can be used as part of the synchronization process where two bar charts should contain the\r\n * exact same amount of columns.\r\n */\r\nexport function nullifyIncompleValues(dataSet1: any, dataSet2: any) {\r\n    for (let dataSetKey in dataSet1) {\r\n        const value = dataSet1[dataSetKey]\r\n        if(value === null && dataSet2[dataSetKey]) {\r\n            dataSet2[dataSetKey] = null\r\n        } else if(value !== null && (dataSet2[dataSetKey] === null || dataSet2[dataSetKey] === undefined)) {\r\n            dataSet1[dataSetKey] = null\r\n        }\r\n    }\r\n\r\n    for (let dataSetKey in dataSet2) {\r\n        const value = dataSet2[dataSetKey]\r\n        if(value === null && dataSet2[dataSetKey]) {\r\n            dataSet2[dataSetKey] = null\r\n        } else if(value !== null && (dataSet1[dataSetKey] === null || dataSet1[dataSetKey] === undefined)) {\r\n            dataSet2[dataSetKey] = null\r\n        }\r\n    }\r\n}","import MineralVitaminChart from \"../fooddatapanel/charts/MineralVitaminChart\";\r\nimport {CHART_VITAMINS} from \"../../config/Constants\";\r\nimport {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {BarChartConfigurationForm} from \"../charthelper/BarChartConfigurationForm\";\r\nimport {roundToNextValue} from \"../../service/calculation/MathService\";\r\nimport {getMaximumValue, nullifyIncompleValues} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport {DC_MineralVitaminChartProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport function DC_MineralVitaminChart(props: DC_MineralVitaminChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfigVitamins = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.vitaminChartConfig\r\n        : initialDirectCompareConfigData.vitaminChartConfig\r\n\r\n    const chartConfigMinerals = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.mineralChartConfig\r\n        : initialDirectCompareConfigData.mineralChartConfig\r\n\r\n    const [portionType_vitamins, setPortionType_vitamins] = useState<string>(chartConfigVitamins.portionType)\r\n    const [portionType_minerals, setPortionType_minerals] = useState<string>(chartConfigMinerals.portionType)\r\n    const [expand100_vitamins, setExpand100_vitamins] = useState<boolean>(chartConfigVitamins.expand100)\r\n    const [expand100_minerals, setExpand100_minerals] = useState<boolean>(chartConfigMinerals.expand100)\r\n    const [synchronizeVitamins, setSynchronizeVitamins] = useState<boolean>(chartConfigVitamins.synchronize)\r\n    const [synchronizeMinerals, setSynchronizeMinerals] = useState<boolean>(chartConfigMinerals.synchronize)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        updateChartConfig()\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [portionType_minerals,\r\n        portionType_vitamins,\r\n        synchronizeVitamins,\r\n        synchronizeMinerals,\r\n        expand100_vitamins,\r\n        expand100_minerals,\r\n        containerHeight,\r\n        windowSize.height]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            const newChartConfig = {\r\n                ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                vitaminChartConfig: {\r\n                    portionType: portionType_vitamins,\r\n                    expand100: expand100_vitamins,\r\n                    synchronize: synchronizeVitamins\r\n                },\r\n                mineralChartConfig: {\r\n                    portionType: portionType_minerals,\r\n                    expand100: expand100_minerals,\r\n                    synchronize: synchronizeMinerals\r\n                }\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        }\r\n    }\r\n\r\n    const requirementData = props.selectedSubChart === CHART_VITAMINS\r\n        ? applicationContext.foodDataCorpus.dietaryRequirements?.vitaminRequirementData\r\n        : applicationContext.foodDataCorpus.dietaryRequirements?.mineralRequirementData\r\n\r\n    if (!requirementData) {\r\n        return <div></div>\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        props.selectedSubChart === CHART_VITAMINS ? setPortionType_vitamins(event.target.value) : setPortionType_minerals(event.target.value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        props.selectedSubChart === CHART_VITAMINS ? setExpand100_vitamins(!expand100_vitamins) : setExpand100_minerals(!expand100_minerals)\r\n    }\r\n\r\n    const handleSynchronize = () => {\r\n        props.selectedSubChart === CHART_VITAMINS ? setSynchronizeVitamins(!synchronizeVitamins) : setSynchronizeMinerals(!synchronizeMinerals)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const portionType = props.selectedSubChart === CHART_VITAMINS ? portionType_vitamins : portionType_minerals\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals\r\n        const synchronize = props.selectedSubChart === CHART_VITAMINS ? synchronizeVitamins : synchronizeMinerals\r\n\r\n        const barChartProps = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox,\r\n            handleSynchronize: handleSynchronize\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps}/>\r\n    }\r\n\r\n    const nutrientData1 = getNutrientData(props.selectedFoodItem1)\r\n    const nutrientData2 = getNutrientData(props.selectedFoodItem2)\r\n\r\n    const dataSet1 = props.selectedSubChart === CHART_VITAMINS ? nutrientData1.vitaminData : nutrientData1.mineralData\r\n    const dataSet2 = props.selectedSubChart === CHART_VITAMINS ? nutrientData2.vitaminData : nutrientData2.mineralData\r\n\r\n    const maxValue1 = getMaximumValue(dataSet1, props.selectedFoodItem1.portion.amount, requirementData, applicationContext.userData)\r\n    const maxValue2 = getMaximumValue(dataSet2, props.selectedFoodItem2.portion.amount, requirementData, applicationContext.userData)\r\n    const maxValue = Math.max(maxValue1, maxValue2)\r\n\r\n    const synchronize = props.selectedSubChart === CHART_VITAMINS ? synchronizeVitamins : synchronizeMinerals\r\n\r\n    if (synchronize) {\r\n        nullifyIncompleValues(dataSet1, dataSet2)\r\n    }\r\n\r\n    const maxY = synchronize\r\n        ? roundToNextValue(maxValue) : undefined\r\n\r\n    const preconfigVitamins = {\r\n        maxValue: maxY,\r\n        portionType: portionType_vitamins,\r\n        expand100: expand100_vitamins,\r\n        synchronize: synchronizeVitamins\r\n    }\r\n\r\n    const preconfigMinerals = {\r\n        maxValue: maxY,\r\n        portionType: portionType_minerals,\r\n        expand100: expand100_minerals,\r\n        synchronize: synchronizeMinerals\r\n    }\r\n\r\n    const preconfig = props.selectedSubChart === CHART_VITAMINS ? preconfigVitamins : preconfigMinerals\r\n\r\n    const preconfigFoodItem1 = {...preconfig, barChartColor: direct_compare_color1}\r\n    const preconfigFoodItem2 = {...preconfig, barChartColor: direct_compare_color2}\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <MineralVitaminChart selectedSubChart={props.selectedSubChart}\r\n                                     selectedFoodItem={props.selectedFoodItem1}\r\n                                     directCompareUse={true} directCompareConfig={preconfigFoodItem1}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <MineralVitaminChart selectedSubChart={props.selectedSubChart}\r\n                                     selectedFoodItem={props.selectedFoodItem2}\r\n                                     directCompareUse={true} directCompareConfig={preconfigFoodItem2}/>\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {PieChartConfigurationForm} from \"../charthelper/PieChartConfigurationForm\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport BaseDataChart from \"../fooddatapanel/charts/BaseDataChart\";\r\nimport {\r\n    CARBS_DATA_BASE,\r\n    LIPIDS_DATA_BASE,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_LIPIDS_DATA\r\n} from \"../../config/Constants\";\r\nimport LipidsDataChart from \"../fooddatapanel/charts/LipidsDataChart\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {\r\n    PieChartConfigurationProps,\r\n    PieChartDirectCompareConfig,\r\n    PieChartDirectCompareProp\r\n} from \"../../types/livedata/ChartPropsData\";\r\nimport CarbsDataChart from \"../fooddatapanel/charts/CarbsDataChart\";\r\nimport {\r\n    GeneralChartConfigDirectCompareWithSubCharts,\r\n    GeneralChartConfigWithDetails\r\n} from \"../../types/livedata/ChartConfigData\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\n\r\n/**\r\n * Re-usable direct compare chart component for pie-chart data pages (Lipids, Carbs, Base Data)\r\n */\r\nexport function DC_PieChart(props: PieChartDirectCompareProp) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    let initialConfig\r\n    switch (props.dataPage) {\r\n        case TAB_BASE_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.baseChartConfig\r\n                ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.baseChartConfig\r\n                : initialDirectCompareConfigData.baseChartConfig\r\n            break\r\n        case TAB_LIPIDS_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n                ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n                : initialDirectCompareConfigData.lipidsChartConfig\r\n            break\r\n        case TAB_CARBS_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n                ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n                : initialDirectCompareConfigData.carbsChartConfig\r\n            break\r\n    }\r\n\r\n    const [chartType, setChartType] = useState<string>(initialConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(initialConfig.showLegend)\r\n    const [showDetails, setShowDetails] = useState<boolean>(initialConfig.showDetails)\r\n    const [subChart1, setSubChart1] = useState<string>(initialConfig.subChart1)\r\n    const [subChart2, setSubChart2] = useState<string>(initialConfig.subChart2)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        const currentConfig = applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n        if (!currentConfig) {\r\n            return\r\n        }\r\n\r\n        if (props.dataPage === TAB_LIPIDS_DATA || props.dataPage === TAB_CARBS_DATA) {\r\n            const configObject: GeneralChartConfigDirectCompareWithSubCharts = props.dataPage === TAB_LIPIDS_DATA\r\n                ? currentConfig.lipidsChartConfig\r\n                : currentConfig.carbsChartConfig\r\n\r\n            if (chartType !== configObject.chartType || showLegend !== configObject.showLegend\r\n                || subChart1 !== configObject.subChart1 || subChart2 !== configObject.subChart2) {\r\n                updateChartConfig()\r\n            }\r\n        } else if (props.dataPage === TAB_BASE_DATA) {\r\n            const configObject: GeneralChartConfigWithDetails = currentConfig.baseChartConfig\r\n            if (chartType !== configObject.chartType || showLegend !== configObject.showLegend || showDetails !== configObject?.showDetails) {\r\n                updateChartConfig()\r\n            }\r\n        }\r\n\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [chartType, showDetails, showLegend, subChart1, subChart2, containerHeight, windowSize.height])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            let newChartConfig\r\n\r\n            if (props.dataPage === TAB_BASE_DATA) {\r\n                const pieChartConfig: GeneralChartConfigWithDetails = {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    showDetails: showDetails\r\n                }\r\n\r\n                newChartConfig = {\r\n                    ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                    baseChartConfig: pieChartConfig\r\n                }\r\n            } else {\r\n                const pieChartConfig: GeneralChartConfigDirectCompareWithSubCharts = {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    subChart1: subChart1,\r\n                    subChart2: subChart2\r\n                }\r\n\r\n                if (props.dataPage === TAB_LIPIDS_DATA) {\r\n                    newChartConfig = {\r\n                        ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                        lipidsChartConfig: pieChartConfig\r\n                    }\r\n                } else if (props.dataPage === TAB_CARBS_DATA) {\r\n                    newChartConfig = {\r\n                        ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                        carbsChartConfig: pieChartConfig\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (newChartConfig) {\r\n                applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleShowLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const handleShowDetailsCheckbox = () => {\r\n        setShowDetails(!showDetails)\r\n    }\r\n\r\n    const handleSubchart1Change = (event: any): void => {\r\n        setSubChart1(event.target.value)\r\n    }\r\n\r\n    const handleSubchart2Change = (event: any): void => {\r\n        setSubChart2(event.target.value)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const chartProps = getConfigurationProps()\r\n        return <PieChartConfigurationForm key = {`Config ${props.dataPage}`} {...chartProps}/>\r\n    }\r\n\r\n    const getConfigurationProps = (): PieChartConfigurationProps => {\r\n        let chartProps: PieChartConfigurationProps = {\r\n            chartType: chartType,\r\n            showLegend: showLegend,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleLegendCheckboxClick: handleShowLegendCheckbox,\r\n        }\r\n\r\n        if (props.dataPage === TAB_BASE_DATA) {\r\n            chartProps = {\r\n                ...chartProps,\r\n                detailsCheckboxAvailable: true,\r\n                showDetails: showDetails,\r\n                handleDetailsCheckboxClick: handleShowDetailsCheckbox\r\n            }\r\n        }\r\n\r\n        return chartProps\r\n    }\r\n\r\n\r\n    const getChartComponent = (selectedFoodItem: SelectedFoodItem, index: number) => {\r\n        let preconfig: PieChartDirectCompareConfig = {\r\n            chartType: chartType,\r\n            showLegend: showLegend,\r\n            showDetails: showDetails,\r\n        }\r\n\r\n        if (props.dataPage === TAB_BASE_DATA) {\r\n            return <BaseDataChart key = {`${TAB_BASE_DATA} ${index}`} selectedFoodItem={selectedFoodItem} directCompareUse={true}\r\n                                  directCompareConfig={preconfig}/>\r\n        }\r\n\r\n        if (props.dataPage === TAB_LIPIDS_DATA) {\r\n            const selectedSubChart = applicationContext\r\n                ? index === 1\r\n                    ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart1\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart1\r\n                        : LIPIDS_DATA_BASE\r\n                    : applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart2\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart2\r\n                        : LIPIDS_DATA_BASE\r\n                : LIPIDS_DATA_BASE\r\n\r\n            preconfig = {\r\n                ...preconfig,\r\n                subChart: selectedSubChart,\r\n                handleSubchartChange: index === 1 ? handleSubchart1Change : handleSubchart2Change,\r\n                chartIndex: index\r\n            }\r\n\r\n            return <LipidsDataChart key = {`${TAB_LIPIDS_DATA} ${index}`} selectedFoodItem={selectedFoodItem} directCompareUse={true}\r\n                                    directCompareConfig={preconfig}/>\r\n        }\r\n\r\n        if (props.dataPage === TAB_CARBS_DATA) {\r\n            const selectedSubChart = applicationContext\r\n                ? index === 1\r\n                    ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart1\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart1\r\n                        : CARBS_DATA_BASE\r\n                    : applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart2\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart2\r\n                        : CARBS_DATA_BASE\r\n                : CARBS_DATA_BASE\r\n\r\n            preconfig = {\r\n                ...preconfig,\r\n                subChart: selectedSubChart,\r\n                chartIndex: index,\r\n                handleSubchartChange: index === 1 ? handleSubchart1Change : handleSubchart2Change\r\n            }\r\n\r\n            return <CarbsDataChart key = {`${TAB_CARBS_DATA} ${index}`} selectedFoodItem={selectedFoodItem} directCompareUse={true}\r\n                                   directCompareConfig={preconfig}/>\r\n        }\r\n    }\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}} key={\"directcompare container\" + containerHeight}>\r\n                <div className={\"vertical-label\"}>{props.selectedFoodItem1.resolvedName}</div>\r\n                {getChartComponent(props.selectedFoodItem1, 1)}\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}} key={\"directcompare container\" + containerHeight}>\r\n                <div className={\"vertical-label\"}>{props.selectedFoodItem2.resolvedName}</div>\r\n                {getChartComponent(props.selectedFoodItem2, 2)}\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../charthelper/BarChartConfigurationForm\";\r\nimport {getMaximumValue, nullifyIncompleValues} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {roundToNextValue} from \"../../service/calculation/MathService\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport ProteinDataChart from \"../fooddatapanel/charts/ProteinDataChart\";\r\nimport {\r\n    BarChartDirectCompareConfig,\r\n    DirectCompareDataPanelProps,\r\n    ProteinDataChartProps\r\n} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport function DC_ProteinDataChart(props: DirectCompareDataPanelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.proteinChartConfig\r\n        : initialDirectCompareConfigData.proteinChartConfig\r\n\r\n    const [portionType, setPortionType] = useState<string>(chartConfig.portionType)\r\n    const [expand100, setExpand100] = useState<boolean>(chartConfig.expand100)\r\n    const [synchronize, setSynchronize] = useState<boolean>(chartConfig.synchronize)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        updateChartConfig()\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [portionType, expand100, synchronize, containerHeight, windowSize.height])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            const newChartConfig = {\r\n                ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                proteinChartConfig: {\r\n                    portionType: portionType,\r\n                    expand100: expand100,\r\n                    synchronize: synchronize\r\n                }\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        }\r\n    }\r\n\r\n    const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.proteinRequirementData\r\n    if (!requirementData) {\r\n        return <div></div>\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        setPortionType(event.target.value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleSynchronize = () => {\r\n        setSynchronize(!synchronize)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const barChartProps = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox,\r\n            handleSynchronize: handleSynchronize\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps}/>\r\n    }\r\n\r\n    const dataSet1 = getNutrientData(props.selectedFoodItem1).proteinData\r\n    const dataSet2 = getNutrientData(props.selectedFoodItem2).proteinData\r\n\r\n    const maxValue1 = getMaximumValue(dataSet1, props.selectedFoodItem1.portion.amount, requirementData, applicationContext.userData, true)\r\n    const maxValue2 = getMaximumValue(dataSet2, props.selectedFoodItem2.portion.amount, requirementData, applicationContext.userData, true)\r\n    const maxValue = Math.max(maxValue1, maxValue2)\r\n\r\n    if (synchronize) {\r\n        nullifyIncompleValues(dataSet1, dataSet2)\r\n    }\r\n\r\n    const maxY = synchronize ? roundToNextValue(maxValue) : undefined\r\n\r\n    const preconfig: BarChartDirectCompareConfig = {\r\n        maxValue: maxY,\r\n        portionType: portionType,\r\n        expand100: expand100,\r\n        synchronize: synchronize,\r\n        barChartColor: ''\r\n    }\r\n\r\n    const preconfigFoodItem1 = {...preconfig, barChartColor: direct_compare_color1}\r\n    const preconfigFoodItem2 = {...preconfig, barChartColor: direct_compare_color2}\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <ProteinDataChart selectedFoodItem={props.selectedFoodItem1}\r\n                                  directCompareUse={true} directCompareConfig={preconfigFoodItem1}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <ProteinDataChart selectedFoodItem={props.selectedFoodItem2}\r\n                                  directCompareUse={true} directCompareConfig={preconfigFoodItem2}/>\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {Card} from \"react-bootstrap\";\r\nimport EnergyDataChart from \"../fooddatapanel/charts/EnergyDataChart\";\r\nimport {DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\n\r\nexport function DC_EnergyChart(props: DirectCompareDataPanelProps) {\r\n    const windowSize = useWindowDimension()\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [containerHeight, windowSize.height])\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <div className={\"vertical-label\"}>{props.selectedFoodItem1.resolvedName}</div>\r\n                <EnergyDataChart selectedFoodItem={props.selectedFoodItem1} directCompareUse={true}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <div className={\"vertical-label\"}>{props.selectedFoodItem2.resolvedName}</div>\r\n                <EnergyDataChart selectedFoodItem={props.selectedFoodItem2} directCompareUse={true}/>\r\n            </div>\r\n        </Card>\r\n    </div>\r\n\r\n}","import {ChartMenuPanel} from \"../fooddatapanel/ChartMenuPanel\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {useContext} from \"react\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {DC_MineralVitaminChart} from \"./DC_MineralVitaminChart\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport {DC_PieChart} from \"./DC_PieChart\";\r\nimport {DC_ProteinDataChart} from \"./DC_ProteinDataChart\";\r\nimport {DC_EnergyChart} from \"./DC_EnergyChart\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {InfoData} from \"../fooddatapanel/charts/InfoData\";\r\n\r\nexport function DirectCompareDataPanel(props: DirectCompareDataPanelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const setDataPage = (datapage: string) => {\r\n        applicationContext.setDirectCompareData.setSelectedDirectCompareDataPage(datapage)\r\n    }\r\n\r\n    const foodNames = applicationContext.foodDataCorpus.foodNames\r\n\r\n    const nameId1 = props.selectedFoodItem1.foodItem.nameId ? props.selectedFoodItem1.foodItem.nameId : null\r\n    const nameId2 = props.selectedFoodItem2.foodItem.nameId ? props.selectedFoodItem2.foodItem.nameId : null\r\n\r\n    const name1 = nameId1 ? getNameFromFoodNameList(foodNames, nameId1, languageContext.language) : \"\"\r\n    const name2 = nameId2 ? getNameFromFoodNameList(foodNames, nameId2, languageContext.language) : \"\"\r\n\r\n    const selectedFoodItem1: SelectedFoodItem = {...props.selectedFoodItem1, resolvedName: name1}\r\n    const selectedFoodItem2: SelectedFoodItem = {...props.selectedFoodItem2, resolvedName: name2}\r\n\r\n    const selectedDataPage = applicationContext.applicationData.directCompareDataPanel.selectedDataPage\r\n\r\n    const renderCharts = () => {\r\n        switch (selectedDataPage) {\r\n            case TAB_BASE_DATA:\r\n                return <DC_PieChart key={TAB_BASE_DATA}\r\n                                    selectedFoodItem1={selectedFoodItem1}\r\n                                    selectedFoodItem2={selectedFoodItem2}\r\n                                    dataPage={TAB_BASE_DATA}\r\n                />\r\n            case TAB_ENERGY_DATA:\r\n                return <DC_EnergyChart selectedFoodItem1={selectedFoodItem1}\r\n                                       selectedFoodItem2={selectedFoodItem2}\r\n                />\r\n\r\n            case TAB_VITAMIN_DATA:\r\n                return <DC_MineralVitaminChart key={TAB_VITAMIN_DATA}\r\n                                               selectedFoodItem1={selectedFoodItem1}\r\n                                               selectedFoodItem2={selectedFoodItem2}\r\n                                               selectedSubChart={CHART_VITAMINS}\r\n                />\r\n            case TAB_MINERAL_DATA:\r\n                return <DC_MineralVitaminChart key={TAB_MINERAL_DATA}\r\n                                               selectedFoodItem1={selectedFoodItem1}\r\n                                               selectedFoodItem2={selectedFoodItem2}\r\n                                               selectedSubChart={CHART_MINERALS}\r\n                />\r\n            case TAB_LIPIDS_DATA:\r\n                return <DC_PieChart key={TAB_LIPIDS_DATA}\r\n                                    selectedFoodItem1={selectedFoodItem1}\r\n                                    selectedFoodItem2={selectedFoodItem2}\r\n                                    dataPage={TAB_LIPIDS_DATA}\r\n                />\r\n            case TAB_CARBS_DATA:\r\n                return <DC_PieChart key={TAB_CARBS_DATA}\r\n                                    selectedFoodItem1={selectedFoodItem1}\r\n                                    selectedFoodItem2={selectedFoodItem2}\r\n                                    dataPage={TAB_CARBS_DATA}\r\n                />\r\n            case TAB_PROTEINS_DATA:\r\n                return <DC_ProteinDataChart selectedFoodItem1={selectedFoodItem1}\r\n                                            selectedFoodItem2={selectedFoodItem2}\r\n                />\r\n            case TAB_INFO:\r\n                return <div>\r\n                    <Card>\r\n                        <InfoData selectedFoodItem={props.selectedFoodItem1} directCompare={true}/>\r\n                    </Card>\r\n                    <Card>\r\n                        <InfoData selectedFoodItem={props.selectedFoodItem2} directCompare={true}/>\r\n                    </Card>\r\n                </div>\r\n\r\n        }\r\n\r\n        return <div/>\r\n    }\r\n\r\n    return <div>\r\n        <Card.Header>\r\n            <ChartMenuPanel dataPage={selectedDataPage} verticalArrangement={false} setDataPage={setDataPage}/>\r\n        </Card.Header>\r\n        {renderCharts()}\r\n    </div>\r\n\r\n}","import { DirectCompareChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\"\r\nimport { DirectCompareUriData, FoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { getUpdatedDirectCompareChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\nimport {\r\n\tconvertUserDataObjectToString,\r\n\tconvertUserDataStringToObject,\r\n\tgetFoodItemUriData,\r\n\tmakeFoodItemDefaultUri,\r\n\tprepareUriForParsing\r\n} from \"./FoodDataPanelUriService\"\r\n\r\nexport function makeDirectCompareDataUri(selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem, \r\n\t\tuserData: UserData, selectedDataPage: string, chartConfigData: DirectCompareChartConfigData): string {\r\n\tconst foodItemUriData1 = makeFoodItemUriData(selectedFoodItem1)\r\n\tconst foodItemUriData2 = makeFoodItemUriData(selectedFoodItem2)\r\n\t\r\n\tconst foodItem1DataUri = makeFoodItemDefaultUri(foodItemUriData1)\r\n\tconst foodItem2DataUri = makeFoodItemDefaultUri(foodItemUriData2)\r\n\t\r\n\tconst userDataUri = convertUserDataObjectToString(userData)\r\n\tconst chartConfigUri = makeChartConfigUriString(chartConfigData, selectedDataPage)\r\n\t\r\n\treturn `${foodItem1DataUri};${foodItem2DataUri};${selectedDataPage};${userDataUri};${chartConfigUri}`\r\n}\r\n\r\n\r\nfunction makeFoodItemUriData(selectedFoodItem: SelectedFoodItem): FoodItemUriData {\r\n\treturn {\r\n\t\tfoodItemId: selectedFoodItem.foodItem.id,\r\n\t\tportionData: selectedFoodItem.portion,\r\n\t\tsource: selectedFoodItem.selectedSource,\r\n\t\tcombineData: selectedFoodItem.combineData,\r\n\t\tsupplementData: selectedFoodItem.supplementData\r\n\t}\r\n}\r\n\r\n\r\nexport function parseDirectComparetUri(uri: string, chartConfigData: DirectCompareChartConfigData): DirectCompareUriData | null {\r\n\tconst fragments = prepareUriForParsing(uri).split(\";\")\r\n\tif(fragments.length !== 11) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst selectedDataPage = fragments[8]\r\n\tconst userData = convertUserDataStringToObject(fragments[9])\r\n\tconst chartConfigString = fragments[10]\r\n\t\r\n\tconst foodItemUriData1 = getFoodItemUriData(fragments)\r\n\tconst remainingFragments = fragments.slice(4)\r\n\tconst foodItemUriData2 = getFoodItemUriData(remainingFragments)\r\n\t\r\n\tif(!userData || !foodItemUriData1 || !foodItemUriData2) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst newChartConfigData = getUpdatedDirectCompareChartConfig(chartConfigData, chartConfigString, selectedDataPage)\r\n\t\r\n\treturn {\r\n\t\tselectedFoodItem1: foodItemUriData1,\r\n\t\tselectedFoodItem2: foodItemUriData2,\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n\t\r\n}","import {DirectCompareSelector} from \"../foodselector/DirectCompareSelector\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport ApplicationDataContextProvider, {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {DirectCompareDataPanel} from \"./DirectCompareDataPanel\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {PATH_DIRECT_COMPARE, QUERYKEY_DATAPANEL_AGGREGATED, QUERYKEY_DATAPANEL_ITEM, TAB_LIST} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {NotificationManager} from 'react-notifications'\r\nimport { AggregatedFoodItemUriData } from \"../../types/livedata/UriData\";\r\nimport { makeDirectCompareDataUri, parseDirectComparetUri } from \"../../service/uri/DirectCompareUriService\";\r\nimport { checkUserDataValidity, USERDATA_OK } from \"../../service/UserDataService\";\r\n\r\nexport default function DirectCompareContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const initialFoodItem1 = applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        : null\r\n\r\n    const initialFoodItem2 = applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        : null\r\n\r\n    const [selectedFoodItem1, setSelectedFoodItem1] = useState<SelectedFoodItem | null>(initialFoodItem1)\r\n    const [selectedFoodItem2, setSelectedFoodItem2] = useState<SelectedFoodItem | null>(initialFoodItem2)\r\n\r\n\tuseEffect(() => {\r\n        buildDataObjectsFromURI()\r\n    }, [applicationContext?.applicationData.directCompareDataPanel])\r\n\r\n\t\r\n    if (applicationContext === null || !applicationContext.ready) {\r\n        return <div/>\r\n    }\r\n\r\n\tconst buildDataObjectsFromURI = () => {\r\n\t\tif(!applicationContext) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tif(!selectedFoodItem1 || !selectedFoodItem2) {\t\t\t\r\n\t\t\tcreateDataFromUriQuery()\t\t\r\n\t\t} else {   // Set new URI Query\t\t\r\n\t\t\tupdateUriQuery()\r\n\t\t}\r\n    }\r\n\r\n\tconst chartConfigData = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n\tconst updateUriQuery = () => {\r\n\t\tconst userData = applicationContext.userData\r\n\t\tconst selectedDataPage = applicationContext.applicationData.directCompareDataPanel.selectedDataPage\r\n\r\n\t\tif(selectedFoodItem1 && selectedFoodItem2) {\r\n\t\t\tconst query = makeDirectCompareDataUri(selectedFoodItem1, selectedFoodItem2, userData, selectedDataPage, \r\n\t\t\t\tchartConfigData)\r\n\t\t\t\t\r\n\t\t\thistory.push({\r\n\t\t\t\tpathName: PATH_DIRECT_COMPARE,\r\n\t\t\t\tsearch: `${QUERYKEY_DATAPANEL_ITEM}=${query}`\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst createDataFromUriQuery = () => {\r\n\t\t\tconst queryString = window.location.search.substring(1)\r\n\t\t\tconst equalOperator = queryString.indexOf(\"=\")\r\n            const key = queryString.substring(0, equalOperator)\r\n            const value = queryString.substring(equalOperator+1)\r\n\r\n\t\t\t// Set data from a simple food item (create data from query parameters)\r\n\t\t\tif(key === QUERYKEY_DATAPANEL_ITEM && value.length > 1) {\r\n\t\t\t\tconst uriDataObject = parseDirectComparetUri(value, chartConfigData)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tif(uriDataObject) {\r\n\t\t\t\t\tconst foodItem1 = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem1.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tconst foodItem2 = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem2.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif(!foodItem1 || !foodItem2) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tapplicationContext.setUserData(uriDataObject.userData)\t\r\n\t\t\t\t\tapplicationContext.setDirectCompareData.updateDirectCompareChartConfig(uriDataObject.chartConfigData)\r\n\t\t\t\t\tapplicationContext.setDirectCompareData.setSelectedDirectCompareDataPage(uriDataObject.selectedDataPage)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst foodClass1 = applicationContext.foodDataCorpus.foodClasses.find(\r\n\t\t\t\t\t\tfoodClass => foodClass.id === foodItem1.foodClass)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tconst foodClass2 = applicationContext.foodDataCorpus.foodClasses.find(\r\n\t\t\t\t\t\tfoodClass => foodClass.id === foodItem2.foodClass)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem1: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1000,\r\n\t\t\t\t\t\tfoodItem: foodItem1,\r\n\t\t\t\t\t\tfoodClass: foodClass1,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem1.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem1.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem1.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem1.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem2: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1001,\r\n\t\t\t\t\t\tfoodItem: foodItem2,\r\n\t\t\t\t\t\tfoodClass: foodClass2,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem2.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem2.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem2.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem2.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tupdateSelectedFoodItems(selectedFoodItem1, selectedFoodItem2)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n    const updateSelectedFoodItems = (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => {\r\n        setSelectedFoodItem1(selectedFoodItem1)\r\n        setSelectedFoodItem2(selectedFoodItem2)\r\n        applicationContext.setDirectCompareData.setSelectedDirectCompareItems(selectedFoodItem1, selectedFoodItem2)\r\n    }\r\n\r\n    return (\r\n        <div className={\"container-fluid\"}>\r\n            <div className={\"row\"}>\r\n                <div className={\"col-4\"}>\r\n                    <DirectCompareSelector updateSelectedFoodItems={updateSelectedFoodItems}/>\r\n                </div>\r\n                <div className={\"col-8\"} style={{padding: \"32px\"}}>\r\n                    {selectedFoodItem1 !== null && selectedFoodItem2 !== null ?\r\n                    <DirectCompareDataPanel selectedFoodItem1={selectedFoodItem1}\r\n                                            selectedFoodItem2={selectedFoodItem2}/>\r\n                        : <div className={\"app\"}><i>{applicationStrings.direct_compare_text[languageContext.language]}</i></div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","export default __webpack_public_path__ + \"static/media/app.efc3a150.png\";","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\n\r\nimport appPath from '../static/image/app.png';\r\nimport {mobileAppPath} from \"../config/ApplicationSetting\";\r\nimport MobileDeviceCheck from \"./MobileDeviceCheck\";\r\n\r\nexport function FoodCompareApp() {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    const linkToPlayStore = () => {\r\n        const link = window.open(mobileAppPath, '_blank')\r\n        if(link) {\r\n            link.focus()\r\n        } else {\r\n            window.location.href = mobileAppPath\r\n        }\r\n    }\r\n\r\n    return <div className={\"container media app\"} style={{paddingTop: \"24px\"}}>\r\n        <div className={\"row\"}>\r\n            <div className={\"col-6\"}>\r\n                {applicationStrings.text_foodcompareapp_1[languageContext.language]}\r\n                <div className=\"text-center\" style={{paddingTop: \"32px\"}}>\r\n                    <button type=\"button\"\r\n                            className=\"btn btn-warning btn-small button-apply media app\"\r\n                            onClick={linkToPlayStore}\r\n                            style={{minWidth: \"250px\"}}>\r\n\t\t\t\t\t<span className={\"media app\"} style={{fontWeight: \"bold\"}}>\r\n\t\t\t\t\t\t{applicationStrings.text_foodcompareapp_2[languageContext.language]}\r\n\t\t\t\t\t</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div className={\"col-6\"}>\r\n                <img src={appPath} className={\"media mobile-app-img\"}/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {SEX_FEMALE, SEX_MALE} from \"../config/Constants\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    initialUserDataAge,\r\n    initialUserDataBreastfeeding,\r\n    initialUserDataLeisureSports,\r\n    initialUserDataPregnant,\r\n    initialUserDataSex,\r\n    initialUserDataSize,\r\n    initialUserDataWeight\r\n} from \"../config/ApplicationSetting\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {NotificationManager} from 'react-notifications'\r\nimport 'react-notifications/lib/notifications.css';\r\nimport {Form, FormControl, FormGroup} from \"react-bootstrap\";\r\nimport Select from 'react-select';\r\nimport {getPalCategories, getPalCategory} from \"../service/calculation/EnergyService\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\nimport {isSmallScreen, useWindowDimension} from \"../service/WindowDimension\";\r\nimport { checkUserDataValidity, USERDATA_ERROR_AGE, USERDATA_ERROR_SIZE, USERDATA_ERROR_WEIGHT } from \"../service/UserDataService\";\r\nimport MobileDeviceCheck from \"./MobileDeviceCheck\";\r\n\r\nexport function UserSettings() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const [age, setAge] = useState<number>(initialUserDataAge)\r\n    const [size, setSize] = useState<number>(initialUserDataSize)\r\n    const [weight, setWeight] = useState<number>(initialUserDataWeight)\r\n    const [sex, setSex] = useState<string>(initialUserDataSex)\r\n    const [pregnant, setPregnant] = useState<boolean>(initialUserDataPregnant)\r\n    const [breastFeeding, setBreastFeeding] = useState<boolean>(initialUserDataBreastfeeding)\r\n    const [palValue, setPalValue] = useState<ReactSelectOption | null>(null)\r\n    const [leisureSport, setLeisureSport] = useState<boolean>(initialUserDataLeisureSports)\r\n\r\n    const windowSize = useWindowDimension()\r\n\r\n    useEffect(() => {\r\n        if(applicationContext) {\r\n            setAge(applicationContext.userData.age)\r\n            setSize(applicationContext.userData.size)\r\n            setWeight(applicationContext.userData.weight)\r\n            setSex(applicationContext.userData.sex)\r\n            setPregnant(applicationContext.userData.pregnant)\r\n            setBreastFeeding(applicationContext.userData.breastFeeding)\r\n            setLeisureSport(applicationContext.userData.leisureSports)\r\n        }\r\n    }, [])\r\n\r\n    const changeAge = (event: any) => {\r\n        setAge(event.target.value)\r\n    }\r\n\r\n    const changeSize = (event: any) => {\r\n        setSize(event.target.value)\r\n    }\r\n\r\n    const changeWeight = (event: any) => {\r\n        setWeight(event.target.value)\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value;\r\n        const sex = value === SEX_MALE ? SEX_MALE : SEX_FEMALE;\r\n        if (sex === SEX_MALE) {\r\n            setPregnant(false)\r\n            setBreastFeeding(false)\r\n        }\r\n        setSex(sex)\r\n    }\r\n\r\n    const changePregnant = (event: any) => {\r\n        setPregnant(!pregnant)\r\n    }\r\n\r\n    const changeBreastFeeding = (event: any) => {\r\n        setBreastFeeding(!breastFeeding)\r\n    }\r\n\r\n    const changeAdditionalPalPorts = (event: any) => {\r\n        setLeisureSport(!leisureSport)\r\n    }\r\n\r\n    const changePalValue = (value: ReactSelectOption) => {\r\n        setPalValue(value)\r\n    }\r\n\r\n    const submitUserData = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const userData: UserData = {\r\n            age: age,\r\n            size: size,\r\n            weight: weight,\r\n            sex: sex,\r\n            pregnant: pregnant,\r\n            breastFeeding: breastFeeding,\r\n            palValue: palValue ? palValue.value : applicationContext.userData.palValue,\r\n            leisureSports: leisureSport,\r\n            initialValues: false\r\n        }\r\n\r\n        const inputOk = checkInputValidity(userData)\r\n\r\n        if (inputOk) {\r\n            applicationContext.setUserData(userData)\r\n            NotificationManager.success(applicationStrings.message_userdata_success[lang])\r\n        }\r\n    }\r\n\r\n\r\n    const checkInputValidity = (userData: UserData) => {\r\n        const validationResult = checkUserDataValidity(userData)\r\n\r\n        if (validationResult === USERDATA_ERROR_AGE) {\r\n            showMessage(applicationStrings.message_userdata_error_age[lang]);\r\n            return false;\r\n        } else if (validationResult === USERDATA_ERROR_SIZE) {\r\n            showMessage(applicationStrings.message_userdata_error_size[lang]);\r\n            return false;\r\n        } else if (validationResult === USERDATA_ERROR_WEIGHT) {\r\n            showMessage(applicationStrings.message_userdata_error_weight[lang]);\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    const showMessage = (message: string) => {\r\n        NotificationManager.error(message)\r\n    }\r\n\r\n    const selectClass = isSmallScreen(windowSize) ? \"form-control-sm\" : \"\"\r\n    const inputClass =  isSmallScreen(windowSize) ? \"form-control form-control-sm input-sm\" : \"form-control input\"\r\n\r\n    const renderTextField = (label, value, callback) => {\r\n        return (\r\n            <div className=\"form-row\">\r\n                <Form.Label className=\"form-label\">{label}:</Form.Label>\r\n                <FormControl\r\n                    className={inputClass}\r\n                    type=\"text\"\r\n                    value={value}\r\n                    onChange={callback}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderSexRadioButtons = () => {\r\n        return (\r\n            <div className=\"form-row-indent\">\r\n                <Form.Label className=\"form-elements\">\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                label={applicationStrings.label_userSettings_sex_male[lang]}\r\n                                value={SEX_MALE}\r\n                                checked={(sex === SEX_MALE)}\r\n                                onChange={handleRadioButtonClick}\r\n                    />\r\n                </Form.Label>\r\n                <Form.Label className=\"form-elements-largespace\">\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                label={applicationStrings.label_userSettings_sex_female[lang]}\r\n                                value={SEX_FEMALE}\r\n                                checked={(sex !== SEX_MALE)}\r\n                                onChange={handleRadioButtonClick}\r\n                    />\r\n                </Form.Label>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderFemaleCheckboxes = () => {\r\n        return (\r\n            <div className=\"form\" style={{marginLeft: \"48px\", marginBottom: \"10px\"}}>\r\n                <div>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                checked={pregnant === true}\r\n                                disabled={sex === SEX_MALE}\r\n                                label={applicationStrings.label_userSettings_pregnant[lang]}\r\n                                onClick={changePregnant}>\r\n                    </Form.Check>\r\n                </div>\r\n                <div>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                checked={breastFeeding === true}\r\n                                disabled={sex === SEX_MALE}\r\n                                label={applicationStrings.label_userSettings_breastfeeding[lang]}\r\n                                onClick={changeBreastFeeding}>\r\n                    </Form.Check>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const renderPalList = (userData: UserData) => {\r\n        const palCategories = getPalCategories(lang);\r\n        if (!palCategories) {\r\n            return <div/>\r\n        }\r\n\r\n        if (!palValue) {   // Initialize pal value first time\r\n            let userDataPalValue = palCategories.find(palObject => palObject.value === userData.palValue)\r\n            if (!userDataPalValue) {\r\n                console.error('Error: Pal object could not be determined.')\r\n                userDataPalValue = palCategories[0]\r\n            }\r\n            setPalValue(userDataPalValue)\r\n        }\r\n\r\n        if (!palValue) {\r\n            return <div/>\r\n        }\r\n\r\n        const descriptionCode = `palcat_desc_${getPalCategory(palValue.value)}`\r\n        const description = applicationStrings[descriptionCode][lang];\r\n\r\n        return (\r\n            <div className=\"form-row\">\r\n                <div style={{width: \"450px\", paddingTop: \"30px\"}}>\r\n                    <label className=\"form-label\">{applicationStrings.label_userSettings_palValue[lang]}:</label>\r\n                    <Select className={selectClass}\r\n                            options={palCategories}\r\n                            value={palValue}\r\n                            onChange={(value) => changePalValue(value)}\r\n                    />\r\n                </div>\r\n                <p className=\"app\">\r\n                    {description}\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderActivityCheckboxes = () => {\r\n        return (\r\n            <div className=\"form-row-indent\" style={{marginTop: \"-15px\"}}>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_userSettings_leisureSports_tooltip[lang]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_userSettings_leisureSports[lang]}\r\n                                checked={leisureSport === true}\r\n                                onClick={changeAdditionalPalPorts}>\r\n                    </Form.Check>\r\n                </label>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderSubmitButton = () => {\r\n        return (\r\n            <div className=\"text-center\">\r\n                <button type=\"button\"\r\n                        className=\"btn btn-primary button-base\"\r\n                        onClick={() => submitUserData()}>\r\n                    {applicationStrings.button_submit[lang]}\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const value_age = (age != null) ? age : initialUserDataAge\r\n    const value_size = (size != null) ? size : initialUserDataSize\r\n    const value_weight = (weight != null) ? weight : initialUserDataWeight\r\n\r\n    return (\r\n        <div className=\"container\" style={{paddingTop: \"24px\"}}>\r\n            <div className=\"row userDataSettings\">\r\n                <div className=\"col-12\">\r\n                    <form>\r\n                        <FormGroup controlId=\"formBasicText\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-6\">\r\n                                    {renderTextField(applicationStrings.label_userSettings_age[lang], value_age, changeAge)}\r\n                                    {renderTextField(applicationStrings.label_userSettings_size[lang], value_size, changeSize)}\r\n                                    {renderTextField(applicationStrings.label_userSettings_weight[lang], value_weight, changeWeight)}\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <Form.Label className=\"form-label\" style={{paddingLeft: \"20px\"}}>\r\n                                        {applicationStrings.label_userSettings_sex[lang]}\r\n                                    </Form.Label>\r\n                                    {renderSexRadioButtons()}\r\n                                    {renderFemaleCheckboxes()}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                {renderPalList(applicationContext.userData)}\r\n                                {renderActivityCheckboxes()}\r\n                            </div>\r\n                        </FormGroup>\r\n                        {renderSubmitButton()}\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","export const MAIL_INVALID_NAME = \"mail invalid name\"\r\nexport const MAIL_NO_CONTENT = \"no content\"\r\nexport const MAIL_CONTENT_TO_LONG = \"content too long\"\r\nexport const MAIL_INVALID_ADDRESS = \"invalid address\"","import {MailData} from \"../types/livedata/MailData\";\r\nimport emailjs from \"emailjs-com\"\r\nimport {\r\n    MAIL_INVALID_ADDRESS,\r\n    MAIL_CONTENT_TO_LONG,\r\n    MAIL_INVALID_NAME,\r\n    MAIL_NO_CONTENT\r\n} from \"../config/ErrorMessageCodes\";\r\nimport {maxMessageCharacters} from \"../config/ApplicationSetting\";\r\n\r\n\r\nconst mailRegex = '(?:[a-z0-9!#$%&\\'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&\\'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\\\])'\r\n\r\nexport function checkMailValidity(mail: MailData): string[] {\r\n    const errors: string[] = []\r\n\r\n    if (!checkName(mail.name)) {\r\n        errors.push(MAIL_INVALID_NAME)\r\n    }\r\n\r\n    if (!checkMailAddress(mail.address)) {\r\n        errors.push(MAIL_INVALID_ADDRESS)\r\n    }\r\n\r\n    if (!checkContent(mail.message)) {\r\n        errors.push(MAIL_NO_CONTENT)\r\n    }\r\n\r\n    if (!checkLength(mail.message)) {\r\n        errors.push(MAIL_CONTENT_TO_LONG)\r\n    }\r\n\r\n    return errors\r\n}\r\n\r\nfunction checkName(name: string): boolean {\r\n    return name.length >= 2 && name.length <= 50\r\n}\r\n\r\nfunction checkContent(content: string): boolean {\r\n    return content.length >= 20\r\n}\r\n\r\nfunction checkLength(content: string): boolean {\r\n    return content.length <= maxMessageCharacters\r\n}\r\n\r\nfunction checkMailAddress(mailAddress: string): boolean {\r\n    return mailAddress.match(mailRegex) !== null\r\n}\r\n","import React, {useContext, useState} from \"react\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {maxMessageCharacters} from \"../../config/ApplicationSetting\";\r\nimport {MailData} from \"../../types/livedata/MailData\";\r\nimport {checkMailValidity} from \"../../service/MailService\";\r\nimport {NotificationManager} from 'react-notifications'\r\nimport Recaptcha from 'react-recaptcha'\r\n\r\nimport {\r\n    MAIL_CONTENT_TO_LONG,\r\n    MAIL_INVALID_ADDRESS,\r\n    MAIL_INVALID_NAME,\r\n    MAIL_NO_CONTENT\r\n} from \"../../config/ErrorMessageCodes\";\r\nimport {RECAPTCHA_KEY, SERVICE_ID, TEMPLATE_ID, USER_ID} from \"../../config/ApplicationKeys\";\r\nimport emailjs from \"emailjs-com\";\r\n\r\nexport function ContactForm() {\r\n    const language = useContext(LanguageContext).language\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [mailAddress, setMailAdress] = useState(\"\")\r\n    const [message, setMessage] = useState(\"\")\r\n    const [characters, setCharacters] = useState(0)\r\n\r\n    const [userVerified, setUserVerified] = useState(false)\r\n\r\n    const updateName = (event) => {\r\n        setName(event.target.value)\r\n    }\r\n\r\n    const updateMailAddress = (event) => {\r\n        setMailAdress(event.target.value)\r\n    }\r\n\r\n    const updateMessage = (event) => {\r\n        setMessage(event.target.value)\r\n        setCharacters(event.target.value.length)\r\n    }\r\n\r\n    const verifyCallBack = (response) => {\r\n        if(response) {\r\n            setUserVerified(true)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n\r\n        if(!userVerified) {\r\n            NotificationManager.error(applicationStrings.label_mail_error_verification[language])\r\n            return\r\n        }\r\n\r\n        const mailData: MailData = {\r\n            name: name.trim(),\r\n            address: mailAddress.trim(),\r\n            message: message.trim()\r\n        }\r\n\r\n        const validationErrors = checkMailValidity(mailData)\r\n        if(validationErrors.length > 0) {\r\n            const firstError = validationErrors[0]\r\n            let errorMessage = ''\r\n            switch(firstError) {\r\n                case MAIL_INVALID_NAME:\r\n                    errorMessage = applicationStrings.label_mail_error_name[language]\r\n                    break\r\n                case MAIL_INVALID_ADDRESS:\r\n                    errorMessage = applicationStrings.label_mail_error_mailaddress[language]\r\n                    break\r\n                case MAIL_NO_CONTENT:\r\n                    errorMessage = applicationStrings.label_mail_error_nocontent[language]\r\n                    break\r\n                case MAIL_CONTENT_TO_LONG:\r\n                    errorMessage = applicationStrings.label_mail_error_content_too_long[language]\r\n                    break\r\n            }\r\n\r\n            NotificationManager.error(errorMessage)\r\n            return\r\n        }\r\n\r\n        sendMail(mailData, language)\r\n    }\r\n\r\n    const sendMail = (mail: MailData, language: string) => {\r\n        const options = {\r\n            reply_to: mail.address,\r\n            from_name: mail.name,\r\n            message: mail.message,\r\n        }\r\n\r\n        emailjs.send(SERVICE_ID, TEMPLATE_ID, options, USER_ID)\r\n            .then((result) => {\r\n                NotificationManager.info(applicationStrings.message_email_success[language])\r\n                setName(\"\")\r\n                setMessage(\"\")\r\n                setMailAdress(\"\")\r\n                setCharacters(0)\r\n            }, (error) => {\r\n                console.log(error.text);\r\n                NotificationManager.info(applicationStrings.message_email_error[language])\r\n            });\r\n    }\r\n\r\n    const charactersLeft = maxMessageCharacters - characters\r\n    const charactersMessage = maxMessageCharacters >= 0\r\n        ? applicationStrings.label_mail_characters_left[language].replace(\"/xx/\", charactersLeft)\r\n        : applicationStrings.label_mail_too_long[language]\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className={\"container\"}>\r\n                <p>{applicationStrings.text_contact_form[language]}</p>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_name[language]}</span>\r\n                    <input className={\"form-control input\"}\r\n                           value={name}\r\n                           onChange={updateName}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_address[language]}</span>\r\n                    <input className={\"form-control input\"}\r\n                           value={mailAddress}\r\n                           onChange={updateMailAddress}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_message[language]}</span>\r\n                    <textarea className={\"form-control input\"}\r\n                              rows={8}\r\n                              value={message}\r\n                              onChange={updateMessage}\r\n                    />\r\n                </div>\r\n                <div><p style={{fontSize: \"0.8em\"}}>{charactersMessage}</p></div>\r\n\r\n                <div style={{paddingTop: \"12px\", paddingBottom: \"36px\"}}>\r\n                    <Recaptcha\r\n                        sitekey={RECAPTCHA_KEY}\r\n                        render=\"explicit\"\r\n                        verifyCallback={verifyCallBack}\r\n                    />\r\n                </div>\r\n\r\n                <button className={\"btn btn-primary\"} type=\"submit\">{applicationStrings.button_send[language]}</button>\r\n            </div>\r\n        </form>\r\n    );\r\n};","// Google:\r\nexport const ANALYTICS_MESS_ID = 'G-DXHX3Y13KZ'\r\nexport const ADSENSE_TRACKING_ID = 'ca-pub-2335013571820161'\r\nexport const RECAPTCHA_KEY = '6LdVyyMcAAAAACXul89K-Epl2dQu3XOvOo1bTIg3'\r\n\r\n// Emailjs:\r\nexport const SERVICE_ID = 'service_608vcxh'\r\nexport const TEMPLATE_ID = 'template_nledi86'\r\nexport const USER_ID = 'user_8TjzzLK0ZdfUQd7h7cieX'\r\n\r\n","import {applicationStrings} from \"../../static/labels\";\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\nexport function Sources() {\r\n    const language = useContext(LanguageContext).language\r\n\r\n    return (\r\n        <div className={\"container\"}>\r\n            <h4>{applicationStrings.text_contact_source1[language]}</h4>\r\n            <h5>{applicationStrings.text_contact_source2[language]}</h5>\r\n            <p>U.S. Department of Agriculture, Agricultural Research Service.<br/>\r\n                FoodData Central, 2021.</p>\r\n            <p>\r\n                Website: <a href={\"https://fdc.nal.usda.gov/\"}>Food Data Central</a>\r\n            </p>\r\n            <h5>{applicationStrings.text_contact_source3[language]}</h5>\r\n            <p>Deutsche Gesellschaft für Ernährung e.V.</p>\r\n            <p>\r\n                Website: <a href={\"https://www.dge.de/\"}>DGE</a>\r\n            </p>\r\n            <h5>{applicationStrings.text_contact_source4[language]}</h5>\r\n            <p>Prakash S. Shetty, Christiani J. K. Henry, Alison E. Black and A. M. Prentice:<br/>\r\n                \"Energy requirements of adults: an update on basal metabolic rates (BMRs) and physical activity\r\n                levels (PALs).\",<br/>\r\n                European journal of clinical nutrition (1996), Volume 50, Suppl 1, pp. 11-23\r\n            </p>\r\n        </div>\r\n    );\r\n\r\n}","import {buildDate, release} from \"../../config/ApplicationSetting\";\r\n\r\nexport function Versions() {\r\n    return <div className={\"container\"}>\r\n        <h1>\r\n            Food Compare\r\n        </h1>\r\n        <h6>\r\n            Version {release}\r\n        </h6>\r\n        <h6>\r\n            Build time: {buildDate}\r\n        </h6>\r\n\r\n        <p style={{paddingTop: \"24px\"}}>\r\n            <b>New features in Version 1.3</b>\r\n            <ul>\r\n                <li>Direct comparison between two food elements</li>\r\n                <li>Forward from front page to the food selector modal within the food data panel</li>\r\n                <li>New data sources added for some fruits and vegetables (FNDDS)</li>\r\n                <li>Restyling of contact menu</li>\r\n                <li>New data settings: Supplementing or combining data if two data sources are available</li>\r\n                <li>Storing display mode temporarily when data tabs or menus are changed</li>\r\n                <li>General layout update and fixing of styling issues</li>\r\n            </ul>\r\n        </p>\r\n\r\n    </div>\r\n}","export default __webpack_public_path__ + \"static/media/impressum-german.92ba80d6.png\";","export default __webpack_public_path__ + \"static/media/impressum-english.1bd33956.png\";","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\nimport impressum_de from '../../static/image/impressum-german.png';\r\nimport impressum_en from '../../static/image/impressum-english.png';\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LANGUAGE_DE} from \"../../config/Constants\";\r\n\r\nexport function Impressum() {\r\n    const lang = useContext(LanguageContext).language\r\n\r\n    const impressumPath = lang === LANGUAGE_DE ? impressum_de : impressum_en;\r\n\r\n    return (\r\n        <div className={\"container\"}>\r\n            <div className={\"col-6\"}>\r\n                <p>\r\n                    <b>{applicationStrings.text_contact_disclaimer1[lang]}</b>\r\n                </p>\r\n                <p>\r\n                    <i>\r\n                        {applicationStrings.text_contact_disclaimer2[lang]}\r\n                    </i>\r\n                </p>\r\n                <p>\r\n                    <i>\r\n                        {applicationStrings.text_contact_disclaimer3[lang]}\r\n                    </i>\r\n                </p>\r\n            </div>\r\n            <div style={{paddingTop: \"20px\"}}>\r\n                <div style={{height: '180px'}}>\r\n                    <img src={impressumPath} style={{height: '180px'}}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {ToggleButton, ToggleButtonGroup} from \"react-bootstrap\";\r\nimport {ContactForm} from \"./ContactForm\";\r\nimport {Sources} from \"./Sources\";\r\nimport {Versions} from \"./Versions\";\r\nimport {Impressum} from \"./Impressum\";\r\n\r\nexport function ContactContainer() {\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const menu_contact = 1\r\n    const menu_sources = 2\r\n    const menu_versions = 3\r\n    const menu_impressum = 4\r\n\r\n    const [selectedMenu, setSelectedMenu] = useState(menu_contact)\r\n\r\n    const renderDisclaimer = () => {\r\n        return (\r\n            <div>\r\n                <p>\r\n                    <b>{applicationStrings.text_contact_disclaimer1[lang]}</b>\r\n                </p>\r\n                <p>\r\n                    <i>\r\n                        {applicationStrings.text_contact_disclaimer2[lang]}\r\n                    </i>\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const buttonStyle = {width: \"175px\"}\r\n\r\n    const renderSubMenu = () => {\r\n        console.log('render:', selectedMenu)\r\n        switch (selectedMenu) {\r\n            case menu_contact:\r\n                return <ContactForm/>\r\n            case menu_sources:\r\n                return <Sources/>\r\n            case menu_versions:\r\n                return <Versions/>\r\n            case menu_impressum:\r\n                return <Impressum/>\r\n            default:\r\n                return <div/>\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={\"text-center\"} style={{paddingTop: \"25px\", paddingBottom: \"50px\"}}>\r\n                <ToggleButtonGroup className={\"contact\"}\r\n                                   type={\"radio\"}\r\n                                   name={\"contact menus\"}\r\n                                   defaultValue={menu_contact}>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_contact}\r\n                                  checked={selectedMenu === menu_contact}\r\n                                  onChange={() => setSelectedMenu(menu_contact)}>\r\n                        {applicationStrings.menu_contact[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_sources}\r\n                                  checked={selectedMenu === menu_sources}\r\n                                  onChange={() => setSelectedMenu(menu_sources)}>\r\n                        {applicationStrings.menu_contact_sources[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_versions}\r\n                                  checked={selectedMenu === menu_versions}\r\n                                  onChange={() => setSelectedMenu(menu_versions)}>\r\n                        {applicationStrings.menu_contact_versions[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_impressum}\r\n                                  checked={selectedMenu === menu_impressum}\r\n                                  onChange={() => setSelectedMenu(menu_impressum)}>\r\n                        {applicationStrings.menu_contact_impressum[languageContext.language]}\r\n                    </ToggleButton>\r\n                </ToggleButtonGroup>\r\n            </div>\r\n            <div>\r\n                {renderSubMenu()}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n\r\n    // return(\r\n    //     <div className=\"container-fluid\"  style={{paddingLeft: \"50px\", paddingTop: \"20px\"}}>\r\n    //         <div className=\"row\">\r\n    //             <div className=\"col-6\" style={{paddingBottom: \"40px\", paddingRight: \"80px\"}}>\r\n    //                 <div>\r\n    //                     <h1>\r\n    //                         Food Compare\r\n    //                     </h1>\r\n    //                     <h6>\r\n    //                         Version {release}\r\n    //                     </h6>\r\n    //                     <h6>\r\n    //                         Build time: {buildDate}\r\n    //                     </h6>\r\n    //                 </div>\r\n    //                 <div style={{paddingTop: \"50px\"}}>\r\n    //                     {renderDisclaimer()}\r\n    //                     {renderSources()}\r\n    //                 </div>\r\n    //             </div>\r\n    //             <div className=\"col-6\">\r\n    //                 <div style={{height: '180px'}}>\r\n    //                     <img src={impressumPath} style={{height: '180px'}} />\r\n    //                 </div>\r\n    //             </div>\r\n    //         </div>\r\n    //     </div>\r\n    //    )\r\n\r\n}","import Header from \"./Header\";\r\nimport Switch from \"react-bootstrap/Switch\";\r\nimport {\r\n    PATH_CONTACT,\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODCOMPARE,\r\n    PATH_FOODDATA_PANEL,\r\n    PATH_HOME,\r\n    PATH_MOBILE_APP,\r\n    PATH_USERSETTINGS\r\n} from \"../config/Constants\";\r\nimport {Home} from \"./Home\";\r\nimport FoodDataPanelContainer from \"./fooddatapanel/FoodDataPanelContainer\";\r\nimport DirectCompareContainer from \"./directcompare/DirectCompareContainer\";\r\nimport {FoodCompareApp} from \"./FoodCompareApp\";\r\nimport {UserSettings} from \"./UserSettings\";\r\nimport {ContactContainer} from \"./contact/ContactContainer\";\r\nimport React, {useContext} from \"react\";\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom'\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\nexport function WebPageContainer() {\r\n\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    // NOTE: If the user is on a mobile device, we only render the page after he decided whether he wants to stay or not\r\n\r\n    console.log('Is mobile:', isMobile)\r\n\r\n    return (\r\n        <div>\r\n            {(isMobile === false || applicationContext.useAsMobile !== null) &&\r\n            <Router>\r\n                <Header/>\r\n                <Switch>\r\n                    <Route path={PATH_FOODCOMPARE} component={Home}/>\r\n                    <Route path={PATH_HOME} component={Home}/>\r\n                    <Route path={PATH_FOODDATA_PANEL} component={FoodDataPanelContainer}/>\r\n                    <Route path={PATH_DIRECT_COMPARE} component={DirectCompareContainer}/>\r\n                    <Route path={PATH_MOBILE_APP} component={FoodCompareApp}/>\r\n                    <Route path={PATH_USERSETTINGS} component={UserSettings}/>\r\n                    <Route path={PATH_CONTACT} component={ContactContainer}/>\r\n                    <Route exact path={\"/\"} component={Home}/>\r\n                </Switch>\r\n            </Router>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import './App.css';\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"bootstrap/dist/js/bootstrap.min.js\";\r\nimport {NotificationContainer} from 'react-notifications'\r\nimport ApplicationDataContextProvider from \"./contexts/ApplicationDataContext\";\r\nimport React, {useEffect} from \"react\";\r\nimport {LanguageProvider} from \"./contexts/LangContext\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport GA4React from \"ga-4-react\";\r\nimport {ANALYTICS_MESS_ID} from \"./config/ApplicationKeys\";\r\n\r\nimport MobileDeviceCheck from \"./components/MobileDeviceCheck\";\r\nimport {WebPageContainer} from \"./components/WebPageContainer\";\r\n\r\nconst ga4react = new GA4React(ANALYTICS_MESS_ID);\r\n\r\nfunction initializeGA4() {\r\n    (async () => {\r\n        try {   // NOTE: uBlock Origin may cause a crash here\r\n            await ga4react.initialize();\r\n        } catch (e) {\r\n            console.error(e)\r\n        }\r\n    })();\r\n}\r\n\r\nfunction App(): JSX.Element {\r\n    useEffect(() => {\r\n        ReactTooltip.rebuild()\r\n    })\r\n\r\n    initializeGA4()\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <NotificationContainer/>\r\n            <ReactTooltip/>\r\n            <LanguageProvider>\r\n                <ApplicationDataContextProvider>\r\n                    <MobileDeviceCheck/>\r\n                    <WebPageContainer/>\r\n                </ApplicationDataContextProvider>\r\n            </LanguageProvider>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport {hydrate, render} from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\n\r\nif (rootElement && rootElement.hasChildNodes()) {\r\n    hydrate(<App />, rootElement);\r\n} else {\r\n    render(\r\n        <App />, rootElement);\r\n}\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n\r\n\r\n"],"sourceRoot":""}