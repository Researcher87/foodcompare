{"version":3,"sources":["static/image/carousel-samples sync /^/.*$","static/image/carousel-samples/img-1-de.png","static/image/carousel-samples/img-1-en.png","static/image/carousel-samples/img-2-de.png","static/image/carousel-samples/img-2-en.png","static/image/carousel-samples/img-3-de.png","static/image/carousel-samples/img-3-en.png","static/image/carousel-samples/img-4-de.png","static/image/carousel-samples/img-4-en.png","static/image/carousel-samples/img-5-de.png","static/image/carousel-samples/img-5-en.png","static/image/carousel-samples/img-6-de.png","static/image/carousel-samples/img-6-en.png","static/image/start-buttons sync /^/.*$","static/image/start-buttons/StartImg1.jpg","static/image/start-buttons/StartImg2.jpg","static/image/start-buttons/StartImg3.jpg","static/image/start-buttons/StartImg4.jpg","static/image/intro-screens sync /^/.*$","static/image/intro-screens/img-1-de.png","static/image/intro-screens/img-1-en.png","static/image/intro-screens/img-2-de.png","static/image/intro-screens/img-2-en.png","static/image/intro-screens/img-3-de.png","static/image/intro-screens/img-3-en.png","static/image/intro-screens/img-4-de.png","static/image/intro-screens/img-4-en.png","static/image/intro-screens/img-5-de.png","static/image/intro-screens/img-5-en.png","service/NutrientDataImportService.ts","service/NutrientDataDecompressor.ts","config/Constants.ts","config/ApplicationSetting.ts","service/LanguageService.ts","service/nutrientdata/NameTypeService.ts","service/uri/BaseUriService.ts","contexts/LangContext.tsx","static/labels.ts","config/ChartConfig.ts","service/ChartConfigurationService.ts","components/charthelper/PieChartConfigurationForm.tsx","service/WindowDimension.ts","components/charthelper/CustomLegend.tsx","service/nutrientdata/NutrientDataRetriever.ts","service/calculation/MathService.ts","service/chartdata/BaseChartDataService.ts","components/fooddatapanel/charts/BaseDataChart.tsx","config/EnergyConstants.ts","service/calculation/EnergyService.ts","components/fooddatapanel/charts/energy/EnergyLevelChart.tsx","components/fooddatapanel/charts/energy/EnergyCompositionChart.tsx","components/fooddatapanel/charts/EnergyDataChart.tsx","components/charthelper/BarChartConfigurationForm.tsx","service/calculation/DietaryRequirementService.ts","service/calculation/provitaminCalculation/ProvitaminEquivalentFactors.ts","service/chartdata/VitaminsMineralsDataService.ts","service/calculation/provitaminCalculation/CarotenoidCalculationService.ts","service/calculation/provitaminCalculation/ExtendedVitaminECalculationService.ts","config/UI_Config.ts","components/fooddatapanel/VitaminBook.tsx","components/fooddatapanel/charts/MineralVitaminChart.tsx","service/chartdata/LipidsChartDataService.ts","components/fooddatapanel/charts/LipidsDataChart.tsx","components/fooddatapanel/charts/ProteinDataChart.tsx","service/chartdata/ProteinChartDataService.ts","service/chartdata/CarbsChartDataService.ts","components/fooddatapanel/charts/CarbsDataChart.tsx","service/RankingService.ts","service/calculation/NutrientCalculationService.ts","service/chartdata/JuxtapositionDataService.ts","components/fooddatapanel/juxtaposition/JuxtapositionChart.tsx","components/fooddatapanel/juxtaposition/JuxtapositionTable.tsx","components/fooddatapanel/juxtaposition/JustapositionSettings.tsx","components/fooddatapanel/juxtaposition/JuxtapositionContainer.tsx","components/fooddatapanel/ChartPanel.tsx","components/fooddatapanel/FoodDataTable.tsx","service/nutrientdata/FoodItemsService.ts","service/nutrientdata/NutrientStatisticsService.ts","components/fooddatapanel/charts/InfoData.tsx","components/fooddatapanel/FoodDataPageBody.tsx","components/HelpModal.tsx","service/HelpService.ts","components/fooddatapanel/ChartMenuPanel.tsx","components/fooddatapanel/SettingsModal.tsx","components/fooddatapanel/FoodDataPageHeader.tsx","service/TableService.ts","components/fooddatapanel/FoodDataPage.tsx","service/FoodDataPanelService.tsx","contexts/ApplicationDataContext.tsx","static/image/logo.png","static/image/text.png","components/Header.tsx","components/Home.tsx","service/nutrientdata/CategoryService.ts","service/nutrientdata/FoodClassService.ts","service/nutrientdata/PortionDataService.ts","components/UnitConversionModal.tsx","components/foodselector/FoodSelector.tsx","components/foodselector/CompositeFoodList.tsx","service/calculation/FoodDataAggregationService.ts","components/foodselector/CategoryTreeModal.tsx","service/Source.ts","components/foodselector/filter/NutrientFilterSelection.tsx","service/nutrientdata/FilterService.ts","components/foodselector/filter/FilterModal.tsx","components/foodselector/FoodSelectorModal.tsx","components/ConfirmationDialog.tsx","components/fooddatapanel/OverallView.tsx","components/fooddatapanel/FoodAnalyzerContainer.tsx","components/fooddatapanel/TabContainer.tsx","service/uri/ChartConfigConverter.ts","service/uri/FoodDataPanelUriService.ts","service/uri/FoodDataPanelAggregatedUriService.ts","service/UserDataService.ts","components/fooddatapanel/FoodDataPanelContainer.tsx","components/foodselector/DirectCompareSelector.tsx","service/ChartSizeCalculation.tsx","components/directcompare/VerticalLabel.tsx","components/directcompare/DcMineralVitaminChart.tsx","components/directcompare/DcPieChart.tsx","components/directcompare/DcProteinDataChart.tsx","components/directcompare/DcEnergyChart.tsx","components/directcompare/DirectCompareDataPanel.tsx","service/uri/DirectCompareUriService.ts","components/directcompare/DirectCompareContainer.tsx","components/UserSettings.tsx","config/ErrorMessageCodes.ts","service/MailService.ts","config/ApplicationKeys.ts","components/contact/ContactForm.tsx","components/contact/Sources.tsx","components/contact/Versions.tsx","static/image/impressum-german.png","static/image/impressum-english.png","components/contact/Impressum.tsx","components/contact/DataPrivacy.tsx","components/contact/ContactContainer.tsx","components/ranking/RankingSelector.tsx","service/uri/RankingPanelUriService.ts","components/ranking/RankingChart.tsx","components/ranking/RankingContainer.tsx","components/InfoSiteContainer.tsx","components/WebPageContainer.tsx","components/MobileDeviceCheck.tsx","App.tsx","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","nutrientDataDecompressed","nutrientDataObj","decompressedString","JSON","stringify","foodCompareCompressing","forEach","entry","regExp","RegExp","target","replace","source","parse","decompressNutrientData","nutrientData","loadFoodDataCorpus","categories","conditions","portionTypes","sources","foodNames","foodClasses","foodItems","dietaryRequirements","AMOUNT_PORTION","AMOUNT_100_GRAM","CHART_TYPE_PIE","CHART_TYPE_BAR","CHART_TYPE_COMPOSITION","CHART_TYPE_ENERGY_LEVEL","CHART_VITAMINS","CHART_MINERALS","CHART_SIZE_SMALL","CHART_SIZE_MEDIUM","CHART_SIZE_LARGE","DATA_ALCOHOL","DATA_ASH","DATA_CAFFEINE","DATA_ENERGY","DATA_WATER","DATA_CARBS","DATA_LIPIDS","DATA_PROTEINS","DATA_MINERAL_CALCIUM","DATA_MINERAL_IRON","DATA_MINERAL_MAGNESIUM","DATA_MINERAL_PHOSPHORUS","DATA_MINERAL_POTASSIUM","DATA_MINERAL_SODIUM","DATA_MINERAL_ZINC","DATA_MINERAL_SELENIUM","DATA_MINERAL_MANGANESE","DATA_MINERAL_COPPER","DATA_VITAMINS_A","DATA_VITAMINS_B1","DATA_VITAMINS_B2","DATA_VITAMINS_B3","DATA_VITAMINS_B5","DATA_VITAMINS_B6","DATA_VITAMINS_B9","DATA_VITAMINS_B12","DATA_VITAMINS_C","DATA_VITAMINS_D","DATA_VITAMINS_E","DATA_VITAMINS_K","DATA_LIPIDS_SATURATED","DATA_LIPIDS_MONO_UNSATURATED","DATA_LIPIDS_POLY_UNSATURATED","DATA_LIPIDS_TRANSFATTY_ACIDS","DATA_CARBS_DIETARY_FIBERS","DATA_CARBS_SUGAR","DATA_CARBS_GLUCOSE","DATA_CARBS_FRUCTOSE","DATA_CARBS_GALACTOSE","DATA_CARBS_SUCROSE","DATA_CARBS_LACTOSE","DATA_CARBS_MALTOSE","DATA_CARBS_STARCH","DATA_PROTEIN_TRYPTOPHAN","DATA_PROTEIN_THREONINE","DATA_PROTEIN_ISOLEUCINE","DATA_PROTEIN_LEUCINE","DATA_PROTEIN_LYSINE","DATA_PROTEIN_METHIONINE","DATA_PROTEIN_CYSTINE","DATA_PROTEIN_PHENYLALANINE","DATA_PROTEIN_TYROSINE","DATA_PROTEIN_VALINE","DATA_PROTEIN_ARGININE","DATA_PROTEIN_HISTIDINE","DATA_PROTEIN_ALANINE","DATA_PROTEIN_ASPARTIC_ACID","DATA_PROTEIN_GLUTAMIC_ACID","DATA_PROTEIN_GLYCINE","DATA_PROTEIN_PROLINE","DATA_PROTEIN_SERINE","DISPLAYMODE_TABLE","DISPLAYMODE_CHART","CARBS_DATA_BASE","CARBS_DATA_DETAIL","LANGUAGE_DE","LANGUAGE_EN","LIPIDS_DATA_BASE","LIPIDS_DATA_OMEGA","MODE_NEW","MODE_EDIT","OPERATOR_ALL","OPERATOR_ANY","OPTION_YES","OPTION_NO","PATH_DIRECT_COMPARE","PATH_FOODCOMPARE","PATH_FOODDATA_PANEL","PATH_HOME","PATH_CONTACT","PATH_USERSETTINGS","PATH_INFO","PATH_RANKING","PORTION_KEY_INDIVIDUAL","PORTION_KEY_100","QUERYKEY_DATAPANEL_ADD","QUERYKEY_DATAPANEL_ADD_COMPOSITE","QUERYKEY_DATAPANEL_ITEM","QUERYKEY_DATAPANEL_RANKING","QUERYKEY_DATAPANEL_AGGREGATED","SEX_MALE","SEX_FEMALE","SOURCE_SRLEGACY","SOURCE_FNDDS","TAB_BASE_DATA","TAB_ENERGY_DATA","TAB_VITAMIN_DATA","TAB_MINERAL_DATA","TAB_LIPIDS_DATA","TAB_CARBS_DATA","TAB_PROTEINS_DATA","TAB_JUXTAPOSITION","TAB_INFO","UNIT_GRAM","UNIT_MILLIGRAM","UNIT_MICROGRAM","NUTRIENT_BASE_DATA_INDEX","NUTRIENT_VITAMIN_INDEX","NUTRIENT_MINERAL_INDEX","NUTRIENT_LIPIDS_INDEX","NUTRIENT_CARBS_INDEX","NUTRIENT_PROTEIN_INDEX","COMPARISON_REFERENCE_ALL","COMPARISON_REFERENCE_ALL_IN_CATEGORY","COMPARISON_REFERENCE_SELECTED_TABS","release","buildDate","maxMessageCharacters","maxElementsInRankingChart","initialFoodClassId","initialComparisonFoodClassId","minimalOmegaRatio","maximalPortionSize","smallFormsScreenSize","width","height","initialUserDataAge","initialUserDataSize","initialUserDataWeight","initialUserDataSex","initialUserDataPregnant","initialUserDataBreastfeeding","initialUserDataLeisureSports","initialChartConfigData","baseChartConfig","chartType","showLegend","showDetails","energyChartConfig","vitaminChartConfig","portionType","expand100","mineralChartConfig","lipidsChartConfig","hideRemainders","subChart","carbsChartConfig","proteinChartConfig","initialJuxtapositionConfigData","selectedGroup","selectedComparisonReference","chartSize","showLabels","initialDirectCompareConfigData","synchronize","subChart1","subChart2","getName","nameType","language","verbose","arguments","length","undefined","name","germanName","englishName","includes","index","indexOf","substring","trim","removeAuxiliaryInformationFromFoodName","getNameFromFoodNameList","foodNameList","find","shortenName","maxLength","indexOfBrace","prepareUriForParsing","uri","LanguageContext","createContext","userLanguageChange","LanguageProvider","_ref","children","userLanguage","navigator","preferredLanguage","_useState","useState","_useState2","_slicedToArray","setLanguage","provider","selectedLanaguage","_jsx","Provider","value","applicationStrings","book_heading_deficiencies","book_heading_dependencies","book_heading_functionality","book_heading_overdose","book_heading_requirements","book_heading_sources","book_heading_storage","book_minerals","book_proteins","book_vitamins","_fl_ounces","de","en","_gram","_milligram","_microgram","_ounces","_option_no","_option_yes","_pounds","button_add","button_cancel","button_change_to_chart_mode","button_close","button_getstarted_1","button_getstarted_2","button_getstarted_3","button_getstarted_4","button_mode","button_no","button_select","button_show","button_send","button_submit","button_update","button_yes","checkbox_chartoption_hideRemainders","checkbox_chartoption_showLegend","checkbox_chartoption_showDetails","checkbox_english","checkbox_english_m","checkbox_expand100g","checkbox_german","checkbox_german_m","checkbox_synchronize","confirm_close_all_tabs","device_detection_hint","direct_compare_text","home_button_info","home_carousel_0","home_carousel_1","home_carousel_2","home_carousel_3","home_carousel_4","home_carousel_5","home_text_1","home_text_2","home_text_3","home_foodcompare_overview","info_button_back","input_compositelist_title","label_amount","label_amount_short","label_category","label_categoryTree_checkbox","label_categoryTree_title","label_charttype","label_charttype_bar","label_charttype_energy_composition","label_charttype_energy_level","label_charttype_pie","label_charttype_carbs_base","label_charttype_carbs_detail","label_charttype_energy","label_charttype_lipids_base","label_charttype_lipids_base_title","label_charttype_lipids_omega","label_charttype_lipids_omega_title","label_charttype_minerals","label_charttype_proteins","label_charttype_vitamins","label_chart_bmr","label_chart_energyExpenditure","label_chart_proteins","label_chart_nutrientComposition","label_chart_totalComposition","label_chart_view","label_datatype","label_error","label_filterModal_add","label_filterModal_note_addCondition","label_filterModal_note_noData","label_filterModal_selection","label_filterModal_title","label_food","label_foodclass","label_fooditem","label_foodselector","label_foodselector_composite","label_group","label_highlighting","label_highlighting_none","label_highlighting_minmax","label_highlighting_share_selection","label_highlighting_share_database","label_home_slogan","label_juxtaposition","label_juxtaposition_settings_btn","label_juxtaposition_settings_chartsize","label_juxtaposition_settings_chartsize_s","label_juxtaposition_settings_chartsize_m","label_juxtaposition_settings_chartsize_l","label_juxtaposition_settings_showLabels","label_juxtaposition_table_avg","label_juxtaposition_table_max","label_juxtaposition_table_median","label_juxtaposition_table_min","label_juxtaposition_table_rank","label_juxtaposition_table_value","label_juxtaposition_unavailable","label_info","label_info_calculation","label_info_calculation_none","label_info_calculation_combined","label_info_calculation_supplement_impossible","label_info_calculation_supplemented","label_info_calculation_supplemented_combined","label_info_composite","label_info_category","label_info_foodClass","label_info_foodId","label_info_foodName","label_info_portion","label_info_portionType","label_info_preparation","label_info_source","label_language","label_mail_name","label_mail_address","label_mail_message","label_mail_characters_left","label_mail_too_long","label_mail_error_name","label_mail_error_mailaddress","label_mail_error_nocontent","label_mail_error_content_too_long","label_mail_error_verification","label_mode_all","label_mode_any","label_na","label_noData","label_nutrient_alcohol","label_nutrient_ash","label_nutrient_ash_short","label_nutrient_caffeine","label_nutrient_carbohydrates","label_nutrient_carbohydrates_plural","label_nutrient_carbohydrates_m","label_nutrient_carbohydrates_short","label_nutrient_carbohydrates_fructose","label_nutrient_carbohydrates_galactose","label_nutrient_carbohydrates_glucose","label_nutrient_carbohydrates_lactose","label_nutrient_carbohydrates_maltose","label_nutrient_carbohydrates_starch","label_nutrient_carbohydrates_sucrose","label_nutrient_dietaryFibers","label_nutrient_dietaryFibers_plural","label_nutrient_dietaryFibers_short","label_nutrient_energy","label_nutrient_lipids","label_nutrient_lipids_long","label_nutrient_lipids_saturated","label_nutrient_lipids_saturated_short","label_nutrient_lipids_unsaturated","label_nutrient_lipids_unsaturated_mono","label_nutrient_lipids_unsaturated_mono_short","label_nutrient_lipids_unsaturated_poly","label_nutrient_lipids_unsaturated_poly_short","label_nutrient_lipids_transfattyAcids","label_nutrient_lipids_omega3","label_nutrient_lipids_omega6","label_nutrient_lipids_cholesterol","label_nutrient_min","label_nutrient_min_m","label_nutrient_min_calcium","label_nutrient_min_copper","label_nutrient_min_iron","label_nutrient_min_magnesium","label_nutrient_min_manganese","label_nutrient_min_phosphorus","label_nutrient_min_potassium","label_nutrient_min_selenium","label_nutrient_min_sodium","label_nutrient_min_zinc","label_nutrient_omega3","label_nutrient_omega6","label_nutrient_proteins","label_nutrient_proteins_alanine","label_nutrient_proteins_arginine","label_nutrient_proteins_asparticAcid","label_nutrient_proteins_cystine","label_nutrient_proteins_glysine","label_nutrient_proteins_glutamicAcid","label_nutrient_proteins_histidine","label_nutrient_proteins_isoleucine","label_nutrient_proteins_leucine","label_nutrient_proteins_lysine","label_nutrient_proteins_methionine","label_nutrient_proteins_phenylalanine","label_nutrient_proteins_proline","label_nutrient_proteins_serine","label_nutrient_proteins_threonine","label_nutrient_proteins_tryptophan","label_nutrient_proteins_tyrosine","label_nutrient_proteins_valine","label_nutrient_remainder","label_nutrient_sugar","label_nutrient_vit","label_nutrient_vit_a","label_nutrient_vit_b1","label_nutrient_vit_b2","label_nutrient_vit_b3","label_nutrient_vit_b5","label_nutrient_vit_b6","label_nutrient_vit_b9","label_nutrient_vit_b12","label_nutrient_vit_c","label_nutrient_vit_d","label_nutrient_vit_e","label_nutrient_vit_e_ext","label_nutrient_vit_e_ext_tocopherolBeta","label_nutrient_vit_e_ext_tocopherolGamma","label_nutrient_vit_e_ext_tocopherolDelta","label_nutrient_vit_e_ext_tocotrienolAlpha","label_nutrient_vit_e_ext_tocotrienolBeta","label_nutrient_vit_e_ext_tocotrienolGamma","label_nutrient_vit_k","label_nutrient_vit_carotenoid","label_nutrient_vit_carotenoid_alpha","label_nutrient_vit_carotenoid_beta","label_nutrient_vit_cryptoxanthin","label_nutrient_vit_scientific_a","label_nutrient_vit_scientific_b1","label_nutrient_vit_scientific_b2","label_nutrient_vit_scientific_b3","label_nutrient_vit_scientific_b5","label_nutrient_vit_scientific_b9","label_nutrient_vit_scientific_b12","label_nutrient_vit_scientific_c","label_nutrient_vit_scientific_d","label_nutrient_vit_scientific_e","label_nutrient_vit_scientific_k","label_nutrient_water","label_overview","label_overallview_avg","label_overallview_avg_short","label_overallview_compared","label_overallview_max","label_overallview_max_short","label_overallview_min","label_overallview_min_short","label_overallview_sum","label_overallview_title","label_per_100g","label_per_portion","label_portion","label_portion_selected","label_portion_common","label_preferred_source","label_prefix_energy_in","label_prefix_hereof","label_prefix_hereof_in","label_ranking_dietaryRequirements","label_reference","label_reference_all","label_reference_category","label_reference_panel","label_requirement","label_requirement_chart","label_result","label_results","label_selection","label_source","label_source_supplement","label_source_supplement_tooltip","label_source_combine","label_source_combine_tooltip","label_title","label_tooltips","label_unit","label_unit_conversion_title","label_unknown","label_usda_reference","label_userSettings_age","label_userSettings_breastfeeding","label_userSettings_intro","label_userSettings_leisureSports","label_userSettings_leisureSports_tooltip","label_userSettings_palValue","label_userSettings_pregnant","label_userSettings_sex","label_userSettings_sex_male","label_userSettings_sex_female","label_userSettings_size","label_userSettings_weight","label_value","menu_food_data_panel","menu_food_data_panel_m","menu_direct_compare","menu_direct_compare_m","menu_home","menu_ranking","menu_ranking_m","menu_settings","menu_settings_m","menu_contact","menu_contact_sources","menu_contact_dataprivacy","menu_contact_versions","menu_contact_impressum","message_email_success","message_email_error","message_error_existing_element","message_error_incomplete_form","message_error_input","message_error_invalid_portion","message_export_error","message_filter_error_existing","message_filter_error_range","message_filter_value_correction_min","message_filter_value_correction_max","message_import_error_invalidfile","message_import_error_parse","message_import_question","menu_info","message_userdata_success","message_userdata_error_title","message_userdata_error_age","message_userdata_error_size","message_userdata_error_weight","modal_settings_title","modal_settings_label_unit_vitamins","modal_settings_label_unit_proteins","modal_settings_label_provitamins","modal_settings_label_dietaryRequirments","palcat_name_1","palcat_desc_1","palcat_name_2","palcat_desc_2","palcat_name_3","palcat_desc_3","palcat_name_4","palcat_desc_4","palcat_name_5","palcat_desc_5","palcat_name_6","palcat_desc_6","palcat_name_7","palcat_desc_7","portion_100g","portion_individual","ranking_note","text_contact_disclaimer1","text_contact_disclaimer2","text_contact_disclaimer3","text_contact_form","text_contact_source1","text_contact_source2","text_contact_source3","text_contact_source4","text_empty_fooddatapanel","text_empty_fooddatapanel_mobileInfo","text_ranking","text_setUserdata_p1","text_setUserdata_p2","text_setUserdata_p3","tooltip_category_tree","tooltip_filter","tooltip_filter_edit","tooltip_filter_option_all","tooltip_filter_option_any","tooltip_filter_remove","tooltip_icon_charts","tooltip_icon_close","tooltip_icon_editFoodItem","tooltip_icon_export","tooltip_icon_import","tooltip_icon_minerals","tooltip_icon_newFoodItem","tooltip_icon_newFoodItemStack","tooltip_icon_overallView","tooltip_icon_proteins","tooltip_icon_removeAll","tooltip_icon_settings","tooltip_icon_table","tooltip_icon_vitamins","tooltip_source","vitamin_book_disclaimer","color_yellow","color_green","color_red","color_purple","color_gray","color_line_blue","color_line_red","color_chart_green_2","color_chart_green_3","color_chart_yellow_4","color_chart_yellow_green_1","color_chart_yellow_green_2","color_chart_black","color_chart_misc","default_chart_height","default_chart_height_m","basedata_piechart_width","basedata_piechart_width_m","basedata_barchart_width","max_portion","color_water","color_lipids","color_carbs","color_carbs_sugar","color_carbs_dietaryFibers","color_ash","color_caffeine","color_carbs_mono_glucose","color_carbs_mono_fructose","color_carbs_mono_galactose","color_carbs_di_sucrose","color_carbs_di_lactose","color_carbs_di_maltose","color_carbs_starch","color_alcohol","color_proteins","color_lipids_saturated","color_lipids_unsaturated_mono","color_lipids_unsaturated_poly","color_lipids_omega3","color_lipids_omega6","color_lipids_misc","direct_compare_color1","direct_compare_color2","getBarChartOptions","title","unit","maxYValue","yAxis","display","text","_objectSpread","min","max","getOptions","y","getPieChartOptions","scalesObject","options","maintainAspectRatio","responsive","plugins","fontSize","tooltip","getToolTips","legend","scales","enabled","callbacks","label","tooltipItem","concat","formattedValue","PieChartConfigurationForm","props","languageContext","useContext","className","_jsxs","Form","Label","Check","inline","type","checked","onChange","handleRadioButtonClick","defaultChecked","disabled","onClick","handleLegendCheckboxClick","detailsCheckboxAvailable","handleDetailsCheckboxClick","getCurrentWindowDimension","window","innerWidth","innerHeight","useWindowDimension","windowDimension","setWindowDimension","useEffect","addEventListener","removeEventListener","isSmallScreen","isMobileDevice","isMobile","CustomLegend","style","borderLeft","i","legendData","element","indent","push","marginLeft","background","color","item","renderLegend","getSourceName","sourceId","getNutrientData","selectedFoodItem","getNutrientDataForFoodItem","foodItem","selectedSource","supplementData","combineData","sourceToUse","nutrientDataList","shouldSupplementData","canSupplementData","nutrientDataObject","complement","selectedNutrientData","complementeNutrientData","supplementedBaseData","supplementCategory","baseData","supplementedVitaminData","vitaminData","supplementedMineralData","mineralData","supplementedCarbsData","carbohydrateData","supplementedProteinData","proteinData","supplementedOmegaData","lipidData","omegaData","supplementedLipidData","sourceItemId","supplementNutrientData","combinedBaseData","combineCategory","combinedVitaminData","combinedMineralData","combinedCarbsData","combinedProteinData","combinedOmegaData","combinedLipidData","combineNutrientData","nutrientCategory1","nutrientCategory2","newDataObject","key","objectHasChildren","keys1","keys2","allKeys","_toConsumableArray","Set","finalObject","finalValue","value1","value2","energy1","energy","energy2","Math","round","abs","autoRound","digits","roundFactor","pow","roundToNextValue","number","ordinaryValue","numberOfDigits","ceil","log10","standardValue","nextNumberFive","getNumberOfFixedLength","numberString","convertBooleanToDigit","convertStringToBoolean","getBaseChartLegendData","lang","ChartConfig","separateNextElement","BaseDataChart","applicationContext","ApplicationDataContextStore","chartConfig","directCompareConfig","applicationData","foodDataPanel","chartConfigData","showDetailsProp","setChartType","_useState3","_useState4","setShowLegend","_useState5","_useState6","setShowDetails","updateChartConfig","currentConfig","newChartConfig","setFoodDataPanelData","updateFoodDataPanelChartConfig","legendAllowed","renderSubChart","chartData","chartClass","directCompareUse","Pie","data","Bar","totalChartData","chartDisplayData","alcoholValuePercentage","alcohol","caffeine","water","carbohydrates","lipids","proteins","labels","colors","ash","values","getTotalChartData","datasets","backgroundColor","borderWidth","borderColor","createTotalChartData","nutrientChartData","_props$selectedFoodIt","foodClass","category","_nutrientData$baseDat","_nutrientData$baseDat2","_nutrientData$carbohy","totalValue","sugar","dietaryFibers","carbValue","carbValuePerc","sugarValuePerc","dietaryFibersPerc","lipidValuePerc","proteinsValuePerc","alcoholValuePerc","caffeinePerc","getNutrientChartData","createNutrientChartData","totalChartDataTitle","nutrientChartDataTitle","justifyContent","event","PAL_CATEGORY_1","PAL_CATEGORY_2","PAL_CATEGORY_3","PAL_CATEGORY_4","PAL_CATEGORY_5","PAL_CATEGORY_6","PAL_CATEGORY_7","getPalCategory","EnergyConstants","createPalCategoryName","languageLabel","energyLabel","calculateEnergyData","getValueForPortion","factor","fat","EnergyLevelChart","energy100g","averagePortion","portion","amount","energyPortion","createEnergyLevelChart","_applicationContext$u","userData","age","size","weight","sex","palValue","leisureSports","bmr","calculateBMR","totalEnergy","calculateTotalEnergyConsumption","annotation1","drawTime","mode","scaleID","yMin","yMax","content","annotation2","annotation","annotations","line1","line2","showInfotext","paddingLeft","paddingTop","maxWidth","initialValues","renderUserDataInfoPage","EnergyCompositionChart","portionAmount","transformToPortion","energyData","createData","keyWordStyle","minWidth","fontWeight","makeValue","energyPerPortion","paddingBottom","paddingRight","EnergyDataChart","_applicationContext$a","_applicationContext$a2","initialChartType","directCompareDataPanel","directCompareConfigChart","setDirectCompareData","updateDirectCompareChartConfig","BarChartConfigurationForm","handleExpandCheckboxClick","handleSynchronize","determineDailyRequirement","dailyRequirementObject","ageGroupRequirements","senior","preSenior","midLifeAdult","youngAdult","youth","male","pregnant","femalePregnant","female","breastFeeding","femaleBreastFeeding","determineFoodRequirementRatio","amountInFood","portionSize","dailyRequirement","determineProteinRequirementRatio","requirement","convertAbsoluteValueToDailyRequirement","dailyRequirements","Constants","vitaminRequirementData","a","b1","b2","b3","b5","b6","b9","b12","c","d","k","mineralRequirementData","calcium","copper","iron","magnesium","manganese","phosphorus","potassium","selenium","sodium","zinc","EQ_FACTOR_BETA_CAROTENE","EQ_FACTOR_OTHER_CAROTENE","EQ_FACTOR_TOCOPHEROL_BETA","EQ_FACTOR_TOCOPHEROL_GAMMA","EQ_FACTOR_TOCOPHEROL_DELTA","EC_FACTOR_TOCOTRIENOL_ALPHA","EC_FACTOR_TOCOTRIENOL_BETA","EC_FACTOR_TOCOTRIENOL_GAMMA","getVitaminChartData","requirementData","dataSettings","amountA","includeProvitamins","carotenoidData","caroteneAlpha","caroteneBeta","cryptoxanthin","calculateVitaminAEquivalent","amountE","extendedVitaminE","tocopherolBeta","tocopherolGamma","tocopherolDelta","tocotrienolAlpha","tocotrienolBeta","tocotrienolGamma","calculateVitaminEEquivalent","fontsize","selectHeight","customSelectStyles","control","base","minHeight","valueContainer","provided","padding","dropdownIndicator","styles","clearIndicator","getCustomSelectStyle","correspondingSelectElementStyle","COLOR_SELECTOR_CATEGORY","COLOR_SELECTOR_FOODCLASS","COLOR_SELECTOR_FOODITEM","VitaminsBook","_props$bookData$findI","initialIndex","initiallySelectedItem","bookData","findIndex","endsWith","selectedEntry","setSelectedEntry","handleEntryChange","selection","selectClass","selectList","renderItemList","items","renderDailyRequirements","dailyRequirementsText","parts","split","malePartsPrefix","malePartsData","femalePartsPrefix","femalePartsData","selectedDataTab","Modal","show","Header","closeBookModal","Body","overflowY","Select","defaultValue","renderSelectList","_selectedEntry$functi","_selectedEntry$defici","scientificTitle","scientificName","hasFunctionality","functionality","hasDeficiencies","deficiencies","hasOverdose","overdose","hasDependencies","dependencies","hasSources","hasStorage","storage","hasDailyRequirements","requirements","margin","description","textAlign","renderDataContent","Footer","MineralVitaminChart","chartConfigVitamins","chartConfigMinerals","portionType_vitamins","setPortionType_vitamins","expand100_vitamins","setExpand100_vitamins","portionType_minerals","setPortionType_minerals","_useState7","_useState8","expand100_minerals","setExpand100_minerals","_useState9","_useState10","showBookModal","setShowBookModal","_useState11","_useState12","selectedColumnLabel","setSelectedColumnLabel","foodDataCorpus","config","selectedSubChart","anyValueChanged","handleExpandCheckbox","_applicationContext$f","precalculatedData","chartColor","barChartColor","createVitaminChartData","_applicationContext$f2","getMineralsChartData","createMineralChartData","maxValue","apply","overallMaxValue","barChartOptions","handleChartClick","clickedColumnIndex","columnLabel","context","vitamin","toLowerCase","labelName","getScientificVitaminName","nutrientBook","vitamins","minerals","barChartProps","renderChartConfigurationForm","getLipidsOmegaChartLegend","LipidsDataChart","windowSize","initialExpand100","initialHideRemainders","setShowHideRemainders","setExpand100","setSubChart","totalLipidsAmount","handleChartSelectionChange","handleSubchartChange","handleExpand100Change","handleHideRemaindersCheckbox","totalAmount","lipidsData","saturated","unsaturatedMono","unsaturatedPoly","valueRemainder","portionAmountToUse","valueSaturated","valueUnsaturatedMono","valueUnsaturatedPoly","getTotalLipidsChartData","createOmegaChartData","omega3","omega6","uncertain","valueOmega3","valueOmega6","valueUncertain","getOmegaChartData","omegaDataAvailabe","uncertainRatio","chartColType","renderChart","lipidsType","omegaDataAvailable","ProteinDataChart","setPortionType","currentSetting","proteinRequirementData","histidine","isoleucine","leucine","lysine","methionine","phenylalanine","threonine","tryptophan","valine","cystine","getProteinChartData","createProteinChartData","dataExists","getCarbsBaseLegend","getCarbsDetailsLegend","CarbsDataChart","currentSettings","chartIndex","detailChartData","valueGlucose","glucose","valueFructose","fructose","valueGalactose","galactose","valueSucrose","sucrose","valueLactose","lactose","valueMaltose","maltose","valueStarch","starch","valueDietaryFibers","getCarbDetailsChartData","createDetailChartData","basicChartData","totalCarbsAmount","valueSugar","getCarbBaseChartData","createBasicChartData","getNutrientGroups","getNutrientGroup","nutrientValue","groupIndex","isNutrientInGroup","nutrientGroup","getVitaminCategoryValues","getMineralCategoryValues","getLipidCategoryValues","getCarbohydrateCategoryValues","getProteinCategoryValues","getNutrientGroupFromValue","group","getBaseCategoryValues","getElementsOfRankingGroup","rankingGroup","getOrderedFoodList","foodList","foodClassesList","selectedCategory","selectedValue","use100gram","foodNamesList","chartItems","_loop","foodClassId","getValueOfFoodItem","_foodItem$portionData","defaultPortion","defaultPortionId","portionObject","portionData","portionValue","getPortionValue","nameId","conditionId","condition","chartItem","sortChartItems","sort","obj1","obj2","transFattyAcids","alanine","arginine","asparticAcid","glutamicAcid","glycine","proline","serine","tyrosine","getMaximumValue","dataSet","dataSetKey","ratioValue","getOverlappingValues","dataSet1","dataSet2","overlapping","nullifyNonOverlappingValues","overlappingAttributes","newDataset","getUnit","transformToDietaryRequirements","createJuxtapositionTableData","referenceData","tableData","valuesInGroup","valueInGroup","allValues","minValue","averageValue","reduce","b","sorted","medianValue","centerValue","floor","calculateMedian","rank","num","tableRow","average","median","getFoodItemsForComparison","selectedReference","selectedFoodItemsInPanel","allFoodItems","selectedFoodClass","filter","JuxtapositionChart","selectedFoodItems","nutrientName","nameKey","foodName","fooditemCondition","conditionName","fullName","createChartDataForJuxtapostionChart","calculateChartData","juxtapositionConfigData","nutrientIndex","x","ticks","autoSkip","getBarChartOptionsForJuxtaposition","barIndexOfSelectedFoodItem","maxRotation","minRotation","numberOfItemsInChart","callback","marker","animation","chartDataObj","maxBarThickness","JuxtapositionTable","setTableData","updateTable","newTableData","tableClass","BootstrapTable","trClassName","striped","hover","TableHeaderColumn","isKey","dataField","JustapositionSettings","setChartSize","setShowLabels","saveData","newJuxtapositionConfigData","updateJuxtapositionConfig","onHide","optionsChartSize","chartSizeOption","classRow","FormGroup","controlId","isSearchable","option","renderMenu","JuxtapostionContainer","showSettingsModal","setShowSettingsModal","referenceList","handleGroupChange","selectedOption","_juxtapositionConfigD","numberOfFoodItemsInPanel","compareToFoodItemsInPanel","history","replaceState","url","location","protocol","host","pathname","search","newUrl","path","updateQueryParam","groupParam","URLSearchParams","get","rankingList","Number","_applicationContext$a3","reference","aggregated","maxHeight","displayMode","ChartPanel","selectedDataPage","chart","FoodDataTable","formatDataCell","cell","row","firstLineStype","indentStyle","labelPortion","shouldShowDietaryRequirements","dataPage","dataFormat","setSelectedDisplayMode","getFoodItemsSelectList","filteredFoodItems","getFoodItemsOfFoodClass","reactSelectOptions","_foodName","getFoodItemName","localeCompare","makeSelectedFoodItemObject","getStatisticalNutrientInformation","nutrient","preferredSource","sum","averageAmount","sortedValues","minimumAmount","maximumAmount","allValuesSorted","InfoData","createRow","renderSubTable","bordered","isCompositeFoodElement","containerClass","directCompare","debug","source1","source2","makeNutrientValuesLine","dataObj","makeAvailableNutrientValuesLine","valuesStatistics","groups","baseValues","carbValues","lipidValues","proteinValues","vitaminValues","mineralValues","nutrientValuesInFoodItem","baseDataValues","carbDataValues","lipidDataValues","proteinDataValues","vitaminDataValues","mineralDataValues","getTotalNumberOfValues","countNumberOfAvailableValues","tableDataDebug","getDebugData","foodNameId","foodClassNameId","sourceName","sourceLine2","foodClassName","categoryId","categoryName","tableDataGeneral","canSupplement","calculationLabel","getGeneralTableData","foodPortion","portionName","tableDataPortion","getTableDataPortion","Button","variant","active","usdaLink","link","open","focus","href","_props$selectedFoodIt2","compositeList","compositeSubElements","makeTableDataCombinedFood","FoodDataPageBody","HelpModal","helpText","closeHelpModal","backdrop","dangerouslySetInnerHTML","__html","getHelpText","helpModalId","languageId","require","entries","languageSection","contentArray","ChartMenuPanel","handlePageButtonClick","setDataPage","makeButtonLabel","buttonText","classNameSpan","verticalArrangement","rowClass","labelMinerals","labelCarbs","ButtonGroup","vertical","SettingsModal","optionsVitamins","selectedUnitVitamins","unitVitamins","selectedOptionVitamins","optionsProteins","selectedUnitProteins","unitProteins","selectedOptionProteins","optionsProvitamins","selectedOptionProvitamins","selectionOption","setDataSettings","handleUnitVitaminsChange","handleUnitProteinsChange","handleIncludeProvitaminsChange","FoodDataPageHeader","useHistory","setHelpModalId","setDisplayMode","enabledDisplayButtonClasses","disabledDisplayButtonClasses","chartButtonClasses","tablesButtonClasses","sourceString","sourceToolTip","bookToolTip","shouldShowBookIcon","helpModalSize","headerLabelClass","marginTop","ReactTooltip","FaBookOpen","role","FaChartBar","FaThList","globalEventOff","FaTools","FaQuestionCircle","remainingItems","removeItemFromFoodDataPanel","pathName","FaTimes","createBaseDataTable","params","_getNutrientData$base","createTableObject","carbObject","makeCarbsTableObject","value_100g","valuePortion","calculatePortionData","value_portion","valueVolume100gram","MathService","createTableObjectAlcohol","createEnergyTable","energyObject","value_100g_kcal","value_100g_kj","valuePortionKcal","valuePortionKj","createTableObjectEnergy","makeBaseLabel","carbEnergy","appendTableDataObject","object","reqString","appendedObject","extension","getVitaminOrMineralAmount","amountInMg","getProteinAmount","amountInGram","makeDietaryRequirementString","calculateProteinRequirement","requirementMg","calculateProvitaminEquivalent","referenceVitaminRequriemtnAmount","equivalenceFactor","equivalentVitA","FoodDataPage","updatePage","tableDataList","dietaryRequirement","tableCalculationParams","extendedParams","_dietaryRequirement$v","vitRequirementData","totalCarotenoid","getTotalAmountOfCarotenoids","requirementVitaminA","carotenoidTableObject","hasExtendedData","totalExtensions","getTotalAmountOfExtendedVitaminE","requirementVitaminE","extendedVitaminETable","equivalentVitE","createVitaminTable","minRequirementData","firstNutrientData","createMineralTable","cholesterol","createLipidsTable","_firstNutrientData$ba","createCarbsTable","_dietaryRequirement$p","protRequirementData","createProteinTable","console","log","newMode","datapage","setSelectedDataPage","makeFoodDataPanelComponent","_selectedFoodItem$tit","component","tab","ApplicationDataContextProvider","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","args","Array","_key","call","setDebugState","setState","prevState","setSelectedFoodDataPanelTab","selectedTab","selectedFoodItemIndex","setSelectedFoodDataPanelPage","selectedPage","addItemToFoodDataPanel","newItems","assign","state","setItemOfFoodDataPanel","updatedSelectedFoodItem","selectedIndex","updatedItems","setFoodDataPageComponent","setCompleteFoodDataPanel","foodDataPanelData","foodItemId","newIndex","currentIndex","removeAllItemsFromFoodDataPanel","updateAllFoodItemNames","newLanguage","newFoodItems","updateJuxtaPositionConfig","setSelectedDirectCompareItems","selectedFoodItem1","selectedFoodItem2","setSelectedDirectCompareDataPage","setUserData","setPreferredSource","setFoodSelectorConfig","sourceSupplement","sourceCombine","foodSelector","setDirectCompareFoodSelectorConfig1","foodSelector1","setDirectCompareFoodSelectorConfig2","foodSelector2","setRankingPanelData","rankingPanelData","setNutrientFilter","nutrientFilter","selectedFoodCategory","selectedElement","showDietaryRequirements","isDebugMode","ready","useAsMobile","_createClass","uriData","queryString","equalOperator","parseFoodCompareUri","NutrientDataImportService","this","_this2","setMobileUsage","usage","setCompleteData","setSelectedFoodTab","setDirectCompareFoodSelector1","setDirectCompareFoodSelector2","Component","_useContext","useLocation","handleLanguageButtonClick","handleSourceButtonClick","activePath","language_en","language_de","labelClass","headerClass","src","logo","alt","renderSourceButtons","menuNameAnalyze","menuNameDirectCompare","menuNameRanking","menuNameSettings","buttonContainerClass","Link","to","renderMenus","carouselImages","startButtonImages","startImg1","default","startImg2","startImg3","startImg4","Home","displayedImage","setDisplayedImage","imageChanged","image","onClickCarouselImage","route","renderCarousel","pic1","pic2","pic3","pic4","pic5","pic6","captionAttribute","imageCaption","Carousel","showArrows","infiniteLoop","autoPlay","interval","transitionTime","selectedItem","showThumbs","showStatus","showIndicators","onClickItem","fontStyle","FaExternalLinkAlt","renderStartButton","srcImage","buttonClass","homeText1","getCategorySelectList","nameTypeList","names","getReactSelectOptionsList","foodClassLabelSeparator","getFoodClassSelectList","filteredFoodClasses","getFoodClassesOfCategory","foodItemNames","join","getPortionReactSelectList","portionElement","portionTypeIndex","getDefaultPortionData","portionDataList","defaultPortionIndex","UnitConversionModal","unitOptions","sourceUnits","sourceUnit","labelKey","selectedUnitOption","setSelectedUnitOption","initialValue","inputValue","setInputValue","convertedValue","setConvertedValue","isNaN","onInputChange","val","isValidConversion","allowedMinimumTargetValue","allowedMaximumTargetValue","closeModal","inputClass","fontColor","targetUnitLabelKey","makeForm","onSubmit","NotificationManager","error","FoodSelector","initialCategory","foodSelectorConfig","directCompareSelectorConfig1","directCompareSelectorConfig2","initialSupplementValue","directCompareSelectorNumber","initialCombineValue","setSelectedCategory","setSelectedFoodClass","setSelectedFoodItem","selectedPortion","setSelectedPortion","setPortionAmount","setTitle","_useState13","_useState14","setSelectedSource","_useState15","_useState16","setSupplementData","_useState17","_useState18","setCombineData","_useState19","_useState20","initialized","setInitialized","_useState21","_useState22","categoriesList","setCategoriesList","_useState23","_useState24","setFoodClassesList","_useState25","_useState26","foodClassesTypeaheadList","setFoodClassesTypeaheadList","_useState27","_useState28","foodItemsList","setFoodItemsList","_useState29","_useState30","portionsList","setPortionsList","_useState31","_useState32","sourcesList","setSourcesList","_useState33","_useState34","unitModalOpen","setUnitModalOpen","_useState35","_useState36","foodClassSearchTerm","setFoodClassSearchTerm","initiallySetFoodItem","_useState37","_useState38","initiallySetSelectedFoodItem","setInitiallySetSelectedFoodItem","getInitialFoodClassNumber","foodClassOptions","initialFoodClassToSet","defaultFoodClass","foodClassOption","categoryItems","initialFoodClass","foodItemsOfFoodClass","updateSourcesList","newFoodItem","updateSelectedFoodItem","updateFoodSelectorConfig","resetTypeaheadFilter","handleSourceChange","updateFoodClasses","foodClassItems","updateFoodItem","_firstFoodClassItem$v","firstFoodItemName","startsWith","matchingIndex","_item$value$nameId","foodItemName","foodItemToSelect","foodItemValue","updatePortionsList","sourceNames","getSourceNames","matchingSource","sourceObject","setInitialFoodElement","predefinedFoodObject","selected","sourceElement","onCheckSupplementCheckbox","onCheckCombineCheckbox","amount_label","compositeSelector","formClass","directCompareSelector","stylesCategory","stylesFoodClass","stylesFoodItem","updateCompositeTitle","isDisabled","action","resultList","dictionary","formatOptionLabel","pos","onMenuClose","parseInt","FaSlidersH","sourceSelectBox","checkboxes","renderSourceLine","CompositeFoodList","renderLine","borderBottom","deleteItem","onDeleteItem","FaTrash","combineFoodItems","portionFactor","createFinalValue","buildBaseDataObject","b7","buildCarotenoidDataObject","buildExtendedVitaminEObject","buildVitaminDataObject","buildMineralDataObject","buildCarbohydrateData","omegaUncertain","_lipidData$omegaData","_lipidData$omegaData2","_lipidData$omegaData3","omegaRatio","buildLipidData","buildProteinData","nutrientObject","threshold","removeNutrientObjectsWithNullValues","buildAggregatedNutrientDataList","Date","getTime","alpha","beta","lycopene","lutein","extendedVitaminEData","totalPortionAmount","CategoryTreeModal","separateByCategory","setSeparateByCategory","renderFoodClasses","foodClassesOfCategory","_getNameFromFoodNameL","_getNameFromFoodNameL2","nameA","nameB","_foodClass$nameKey","renderFoodItems","foodItemSelectOption","selectFoodItemFromCategoryTree","onClickFoodItem","slice","categoryHeading","renderCategoryTree","getSourceId","NutrientFilterSelectionModal","_initialStatistics$mi","_initialStatistics$ma","nutrientGroups","initialElementsList","initialElement","existingCondition","initialGroup","preferredSourceId","initialStatistics","elementsList","setElementsList","setSelectedGroup","setSelectedElement","nutrientStatistics","setNutrientStatistics","initialMin","initialMax","setMinValue","setMaxValue","statisticalNutrientInformation","_statisticalNutrientI","_statisticalNutrientI2","newElementsList","handleValueChange","setMinimum","parseFloat","info","setMaximum","inputFieldStyle","FormControl","renderForm","keyStyle","FaLightbulb","availableValues","inRange","infoText","getInfoHeaderText","renderInfoPane","changedCondition","editCondition","onEditCondition","addCondition","onAddCondition","filterFoodItems","operator","addResultObject","matchingSources","failedCondition","successfulCondition","match","checkCondition","FilterModal","showHelpModal","setShowHelpModal","showNutrientFilterModal","setShowNutrientFilterModal","editingCondition","setEditingCondition","filterResult","setFilterResult","setSelectList","selectedFilterResult","setSelectedFilterResult","calculationTypeAny","setCalculationTypeAny","filterConditions","filterData","onOpenHelpModal","onOpenNutrientSelectorModal","closeFilterSelectionModal","selectFoodItem","result","selectFoodItemFromFilterModal","handleSelectionClick","renderFilterListEntry","ListGroupItem","marginRight","FaEdit","onRemoveCondition","radioButtonDisabled","top","ListGroup","resultMessage","renderResultList","FoodSelectorModal","initialFoodItem","initialCompositeList","compositeTitle","setCompositeTitle","setCompositeList","showCategoryTreeModal","setShowCategoryTreeModal","showFilterModal","setShowFilterModal","onSubmitComposite","onSubmitSingleItem","selectedFoodItemCallback","aggregatedSelectedFoodItem","currentSelectorSetting","canAccessCategoryTree","fnddsId","selectedObject","newList","splice","FaList","FaFilter","ConfirmationDialog","_React$Component","_this$props","okLabel","cancelLabel","confirmation","proceed","_this$props$enableEsc","enableEscape","keyboard","fullscreen","Title","React","confirmAction","small","createConfirmation","confirmable","TABLE_CELL_PADDING","COLOR_EMPTY","getColorCodeForMinMaxRange","redValue","greenValue","OverallView","highlighters","weightReferences","selectedHighlighter","setSelectedHighlighter","selectedWeightReference","setSelectedWeightReference","showToolTips","setShowToolTips","canvas","useRef","canvasElement","current","clientWidth","clientHeight","ctx","getContext","grd","createLinearGradient","addColorStop","fillStyle","fillRect","strokeStyle","strokeText","startPointX","offset","highlighter","altOption","buildHighlightSelectOptions","handleHighlighterChange","handleWeightReferenceChange","makeTableHead","thStyle","shortenedFoodName","makeTableBody","elements","aggregatedColumnStyle","foodItemValues","avg","nutrientStatData","getCellColor","bgColor","colorSelection","getColorCodeForFoodCompareRange","makeToolTipLine","makeAggegrationCell","left","tdStyle","valueTable","valueToolTip","makeColorLegend","showCanvas","ref","border","_require","compress","decompress","FoodAnalyzerContainer","showFoodSelectorInitialState","openSelectorModal","showCompositeFoodSelectorInitialState","openCompositeSelectorModal","showFoodSelector","setShowFoodSelector","showFoodAggregatedFoodSelector","setShowAggregatedFoodSelector","showOverallView","setShowOverallView","foodSelectorEditMode","setFoodSelectorEditMode","onAddNewFoodItem","aggregateSelector","onOpenFileUpload","_asyncToGenerator","_regeneratorRuntime","mark","_callee","startUpload","wrap","_context","prev","next","uploadElement","document","getElementById","click","sent","stop","onExport","_ref3","_callee3","fileContent","compressedContent","_context3","createElement","setAttribute","encodeURIComponent","body","appendChild","removeChild","t0","onHideSelector","onSelectFoodItemSubmit","selectedFoodItemWithComponent","onNewFoodItemSelected","onCloseAllTabs","_ref4","_callee4","_context4","_applicationContext$a4","isFoodItemSelected","buttonClassWithExtraSpace","existingFoodItem","FaPlusSquare","FaLayerGroup","onEditSelectedFoodItem","FaDownload","visibility","accept","files","lenth","file","fileReader","FileReader","readAsText","onloadend","_callee2","decompressedContent","_context2","abrupt","FaUpload","FaTable","TabContainer","CloseableTabs","tabPanelClass","tabContentClass","buttonTab","verticalAlign","alignItems","cursor","onTabClick","onTabChange","activeIndex","makeChartConfigUriString","chartObject","generalizedChartConfig","generalizedChartObject","makeGeneralizedChartConfig","chartTypeKey","portionTypeKey","expand100Key","showLegendKey","showDetailsKey","subChartKey","getSubChartKey","subChartKey2","synchronizeKey","convertGeneralizedChartConfigToString","getUpdatedChartConfig","chartConfigUriString","chartConfigFromUri","convertGeneralizedChartConfigStringToObject","barChartConfig","uriString","stringToParse","chartTypeNumber","portionTypeNumber","subChartNumber","subChartNumber2","getSubChartFromKey","makeFoodItemDefaultUri","foodItemData","portionString","supplementValue","combineValue","getFoodItemUriData","fragments","portionDataString","convertPortionDataStringToObject","booleanData","convertUserDataObjectToString","convertUserDataStringToObject","userDataString","palValueInt","palCategory","getPalValue","separator","replacements","short","convertAggregatedUriStringToObject","replacementArray","replacement","convertUriStringToSelectedFoodItem","newChartConfigData","USERDATA_ERROR_AGE","USERDATA_ERROR_WEIGHT","USERDATA_ERROR_SIZE","USERDATA_OK","checkUserDataValidity","FoodDataPanelContainer","buildDataPanelPageFromURI","updateUriQuery","createDataFromUriQuery","query","objectToParse","selectedFoodItemString","chartConfigString","convertAggregatedDataJsonToUriString","selectedDisplayMode","foodItemDataString","makeFoodDataPanelDefaultUri","currentQuery","_applicationContext$s","uriDataObject","foodItemUriData","parseFoodDataPanelDefaultUri","selectedTabIndex","containerDivClass","basepanelClass","newTabIndex","indexToSet","foodId","FaExclamationTriangle","STATUS_FIRST_TIME","STATUS_NOT_UPDATED","STATUS_UPDATED","DirectCompareSelector","supplementData1","setSupplementData1","combineData1","setCombineData1","supplementData2","setSupplementData2","combineData2","setCombineData2","initialItem1","initialItem2","setSelectedFoodItem1","setSelectedFoodItem2","displayStatus","setDisplayStatus","updateSelectedFoodItem1","updateSelectedFoodItem2","updateFoodSelectorConfig1","updateFoodSelectorConfig2","renderFoodSelectorCard","foodSelectorNumber","styleClass","Card","CardDeck","buttonName","updateSelectedFoodItems","currentSelectorSetting1","currentSelectorSetting2","calculateChartHeight","currentDimension","mobile","calculateChartContainerHeight","VerticalLabel","_Fragment","resolvedName","DcMineralVitaminChart","synchronizeVitamins","setSynchronizeVitamins","synchronizeMinerals","setSynchronizeMinerals","containerHeight","setContainerHeight","nutrientData1","nutrientData2","portion1","portion2","maxValue1","maxValue2","maxY","preConfigVitamins","preconfigMinerals","preconfig","preconfigFoodItem1","preconfigFoodItem2","DcPieChart","initialConfig","setSubChart1","setSubChart2","configObject","pieChartConfig","handleShowLegendCheckbox","handleShowDetailsCheckbox","handleSubchart1Change","handleSubchart2Change","getConfigurationProps","chartProps","getChartComponent","marginBottom","DcProteinDataChart","setSynchronize","DcEnergyChart","DirectCompareDataPanel","nameId1","nameId2","name1","name2","renderCharts","makeFoodItemUriData","parseDirectComparetUri","foodItemUriData1","foodItemUriData2","getUpdatedDirectCompareChartConfig","DirectCompareContainer","initialFoodItem1","initialFoodItem2","buildDataObjectsFromURI","foodItem1DataUri","foodItem2DataUri","userDataUri","chartConfigUri","makeDirectCompareDataUri","foodItem1","foodItem2","foodClass1","foodClass2","_selectedFoodItem1$fo","_selectedFoodItem2$fo","foodClassNameKey1","foodClassNameKey2","UserSettings","setAge","setSize","setWeight","setSex","setPregnant","setBreastFeeding","setPalValue","leisureSport","setLeisureSport","changePregnant","changeBreastFeeding","changeAdditionalPalPorts","checkInputValidity","validationResult","showMessage","message","renderTextField","value_age","value_size","value_weight","renderSexRadioButtons","palCategories","userDataPalValue","palObject","descriptionCode","changePalValue","renderPalList","place","success","submitUserData","MAIL_INVALID_NAME","MAIL_NO_CONTENT","MAIL_CONTENT_TO_LONG","MAIL_INVALID_ADDRESS","mailRegex","checkMailValidity","mail","errors","address","checkLength","SERVICE_ID","TEMPLATE_ID","USER_ID","ContactForm","setName","mailAddress","setMailAdress","setMessage","characters","setCharacters","sendMail","reply_to","from_name","emailjs","send","then","charactersLeft","charactersMessage","preventDefault","mailData","validationErrors","errorMessage","rows","Sources","Versions","Impressum","impressumPath","impressum_de","impressum_en","columnClass","DataPrivacy","dataprivacy","ContactContainer","selectedMenu","setSelectedMenu","buttonStyle","onChangeSubmenu","ToggleButtonGroup","ToggleButton","renderSubMenu","RankingSelector","initializeState","newElements","buildElementsList","openChart","buildRankingPanelPageFromURI","foodCategories","selectedFoodCategoryOption","foodCategory","selectedGroupOption","selectedElementOption","use100g","parseRankingPanelDataUri","_rankingPanelData$sel","_rankingPanelData$sel2","_rankingPanelData$sel3","showDailyRequirements","makeRankingPanelDataUri","handlePortionAmountChange","newRankingData","handleDietaryRequirementsCheckbox","rankingCategory","useHorizontalLayout","selectorClass","numberOfChartItems","renderPortionForm","RankingChart","createChartData","getBarChartOptionsForRanking","position","align","bottom","dataAvailable","containerStyle","RankingContainer","setChartItems","setUnit","setSelectedValue","orderedChartItems","renderHelpText","renderEmptyDatapage","InfoContainer","introImages","renderTextElement","textElement","FaAngleDoubleRight","textElements","renderImage","imageSrc","textParagraph","renderHomeText","homeText3","WebPageContainer","Chart","register","annotationPlugin","ArcElement","Router","Switch","Route","exact","MobileDeviceCheck","status","App","rebuild","NotificationContainer","rootElement","render"],"mappings":"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","file":"static/js/main.23032567.chunk.js","sourcesContent":["var map = {\n\t\"./img-1-de.png\": 244,\n\t\"./img-1-en.png\": 245,\n\t\"./img-2-de.png\": 246,\n\t\"./img-2-en.png\": 247,\n\t\"./img-3-de.png\": 248,\n\t\"./img-3-en.png\": 249,\n\t\"./img-4-de.png\": 250,\n\t\"./img-4-en.png\": 251,\n\t\"./img-5-de.png\": 252,\n\t\"./img-5-en.png\": 253,\n\t\"./img-6-de.png\": 254,\n\t\"./img-6-en.png\": 255\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 243;","export default __webpack_public_path__ + \"static/media/img-1-de.21d693be.png\";","export default __webpack_public_path__ + \"static/media/img-1-en.0c242482.png\";","export default __webpack_public_path__ + \"static/media/img-2-de.854419e7.png\";","export default __webpack_public_path__ + \"static/media/img-2-en.39f48c60.png\";","export default __webpack_public_path__ + \"static/media/img-3-de.fb847901.png\";","export default __webpack_public_path__ + \"static/media/img-3-en.e5df8c32.png\";","export default __webpack_public_path__ + \"static/media/img-4-de.2d813f9b.png\";","export default __webpack_public_path__ + \"static/media/img-4-en.349e58f8.png\";","export default __webpack_public_path__ + \"static/media/img-5-de.a9d367a1.png\";","export default __webpack_public_path__ + \"static/media/img-5-en.ccafef0d.png\";","export default __webpack_public_path__ + \"static/media/img-6-de.777795c9.png\";","export default __webpack_public_path__ + \"static/media/img-6-en.071d077b.png\";","var map = {\n\t\"./StartImg1.jpg\": 257,\n\t\"./StartImg2.jpg\": 258,\n\t\"./StartImg3.jpg\": 259,\n\t\"./StartImg4.jpg\": 260\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 256;","export default __webpack_public_path__ + \"static/media/StartImg1.cbf0990c.jpg\";","export default __webpack_public_path__ + \"static/media/StartImg2.bbe95216.jpg\";","export default __webpack_public_path__ + \"static/media/StartImg3.d172d9b5.jpg\";","export default __webpack_public_path__ + \"static/media/StartImg4.2a0a89b0.jpg\";","var map = {\n\t\"./img-1-de.png\": 294,\n\t\"./img-1-en.png\": 295,\n\t\"./img-2-de.png\": 296,\n\t\"./img-2-en.png\": 297,\n\t\"./img-3-de.png\": 298,\n\t\"./img-3-en.png\": 299,\n\t\"./img-4-de.png\": 300,\n\t\"./img-4-en.png\": 301,\n\t\"./img-5-de.png\": 302,\n\t\"./img-5-en.png\": 303\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 293;","export default __webpack_public_path__ + \"static/media/img-1-de.6acf1d6f.png\";","export default __webpack_public_path__ + \"static/media/img-1-en.422ad097.png\";","export default __webpack_public_path__ + \"static/media/img-2-de.1cd6eb7c.png\";","export default __webpack_public_path__ + \"static/media/img-2-en.ddc3db32.png\";","export default __webpack_public_path__ + \"static/media/img-3-de.47bb4cb8.png\";","export default __webpack_public_path__ + \"static/media/img-3-en.c462d724.png\";","export default __webpack_public_path__ + \"static/media/img-4-de.eba7128a.png\";","export default __webpack_public_path__ + \"static/media/img-4-en.f0e051bb.png\";","export default __webpack_public_path__ + \"static/media/img-5-de.62c9f97b.png\";","export default __webpack_public_path__ + \"static/media/img-5-en.5a3ac481.png\";","import NameType from '../types/nutrientdata/NameType'\r\nimport Source from '../types/nutrientdata/Source'\r\nimport FoodItem from '../types/nutrientdata/FoodItem'\r\nimport DietaryRequirement from '../types/nutrientdata/DietaryRequirement'\r\n\r\nimport nutrientData from \"../static/data/nutrientdata_foodcompare.json\";\r\n\r\nimport FoodDataCorpus from \"../types/nutrientdata/FoodDataCorpus\"\r\nimport FoodClass from \"../types/nutrientdata/FoodClass\";\r\nimport {decompressNutrientData} from \"./NutrientDataDecompressor\";\r\n\r\nconst nutrientDataDecompressed = decompressNutrientData(nutrientData)\r\n\r\nexport function loadFoodDataCorpus(): FoodDataCorpus {\r\n\tconst categories = loadCategories()\r\n\tconst conditions = loadConditions()\r\n\tconst portionTypes = loadPortionTypes()\r\n\tconst sources = loadSources()\r\n\tconst foodNames = loadFoodNames()\r\n\tconst foodClasses = loadFoodClasses()\r\n\tconst foodItems = loadFoodItems()\r\n\tconst dietaryRequirements = loadDietaryRequirements()\r\n\r\n\treturn {\r\n\t\tcategories: categories,\r\n\t\tconditions: conditions,\r\n\t\tportionTypes: portionTypes,\r\n\t\tsources: sources,\r\n\t\tfoodNames: foodNames,\r\n\t\tfoodClasses: foodClasses,\r\n\t\tfoodItems: foodItems,\r\n\t\tdietaryRequirements: dietaryRequirements\r\n\t}\r\n}\r\n\r\nexport function loadConditions(): Array<NameType> {\r\n\treturn nutrientDataDecompressed.conditions;\r\n}\r\n\r\nexport function loadPortionTypes(): Array<NameType> {\r\n\treturn nutrientDataDecompressed.portionTypes;\r\n}\r\n\r\nexport function loadFoodNames(): Array<NameType> {\r\n\treturn nutrientDataDecompressed.foodNames;\r\n}\r\n\r\nexport function loadSources(): Array<Source> {\r\n\treturn nutrientDataDecompressed.sources;\r\n}\r\n\r\nexport function loadCategories(): Array<NameType> {\r\n\treturn nutrientDataDecompressed.categories;\r\n}\r\n\r\nexport function loadFoodClasses(): Array<FoodClass> {\r\n\treturn nutrientDataDecompressed.foodClasses;\r\n}\r\n\r\nexport function loadFoodItems(): Array<FoodItem> {\r\n\treturn nutrientDataDecompressed.foodItems;\r\n}\r\n\r\nexport function loadDietaryRequirements(): DietaryRequirement {\r\n\treturn nutrientDataDecompressed.dietaryRequirements;\r\n}","import foodCompareCompressing from \"../static/data/foodCompareCompressing.json\";\r\n\r\n/**\r\n * Decompresses the nutrient data json file.\r\n * @param nutrientDataObj The nutrient data json file as compressed by the USDA parser.\r\n * @return The nutrient data object generated from the decompressed version of the file.\r\n */\r\nexport function decompressNutrientData(nutrientDataObj: any) {\r\n    const compressedNutrientData = JSON.stringify(nutrientDataObj)\r\n    let decompressedString = compressedNutrientData\r\n    foodCompareCompressing.forEach(entry => {\r\n        const regExp = new RegExp('\"' + entry.target + '\"', 'g');\r\n        decompressedString = decompressedString.replace(regExp,  \"\\\"\" + entry.source + \"\\\"\")\r\n    })\r\n    return JSON.parse(decompressedString);\r\n}","export const AMOUNT_PORTION = \"amount portion\"\r\nexport const AMOUNT_100_GRAM = \"100 gram\"\r\nexport const GRAM = \"gram\" +\r\n    \"\"\r\n\r\nexport const CHART_TYPE_PIE = \"1\"\r\nexport const CHART_TYPE_BAR = \"2\"\r\nexport const CHART_TYPE_COMPOSITION = \"3\"\r\nexport const CHART_TYPE_ENERGY_LEVEL = \"4\"\r\n\r\nexport const CHART_VITAMINS = \"chart vitamins\"\r\nexport const CHART_MINERALS = \"chart minerals\"\r\n\r\nexport const CHART_SIZE_SMALL = 0\r\nexport const CHART_SIZE_MEDIUM = 1\r\nexport const CHART_SIZE_LARGE = 2\r\n\r\nexport const DATA_ALCOHOL = \"alcohol\";\r\nexport const DATA_ASH = \"d_ash\";\r\nexport const DATA_CAFFEINE = \"d_caffeine\";\r\nexport const DATA_ENERGY = \"d_energy\";\r\nexport const DATA_WATER = \"d_water\";\r\nexport const DATA_CARBS = \"d_carbs\";\r\nexport const DATA_LIPIDS = \"d_lipids\";\r\nexport const DATA_PROTEINS = \"d_proteins\";\r\n\r\nexport const DATA_MINERAL_CALCIUM = \"d_calcium\";\r\nexport const DATA_MINERAL_IRON = \"d_iron\";\r\nexport const DATA_MINERAL_MAGNESIUM = \"d_magnesium\";\r\nexport const DATA_MINERAL_PHOSPHORUS = \"d_phosphorous\";\r\nexport const DATA_MINERAL_POTASSIUM = \"d_potassium\";\r\nexport const DATA_MINERAL_SODIUM = \"d_sodium\";\r\nexport const DATA_MINERAL_ZINC = \"d_zinc\";\r\nexport const DATA_MINERAL_SELENIUM = \"d_selenium\";\r\nexport const DATA_MINERAL_MANGANESE = \"d_manganese\";\r\nexport const DATA_MINERAL_COPPER = \"d_copper\";\r\n\r\nexport const DATA_VITAMINS_A = \"d_a\";\r\nexport const DATA_VITAMINS_B1 = \"d_b1\";\r\nexport const DATA_VITAMINS_B2 = \"d_b2\";\r\nexport const DATA_VITAMINS_B3 = \"d_b3\";\r\nexport const DATA_VITAMINS_B5 = \"d_b5\";\r\nexport const DATA_VITAMINS_B6 = \"d_b6\";\r\nexport const DATA_VITAMINS_B9 = \"d_b9\";\r\nexport const DATA_VITAMINS_B12 = \"d_b12\";\r\nexport const DATA_VITAMINS_C = \"d_c\";\r\nexport const DATA_VITAMINS_D = \"d_d\";\r\nexport const DATA_VITAMINS_E = \"d_e\";\r\nexport const DATA_VITAMINS_K = \"d_k\";\r\n\r\nexport const DATA_LIPIDS_SATURATED = \"d_saturated\";\r\nexport const DATA_LIPIDS_MONO_UNSATURATED = \"d_mono_unsaturated\";\r\nexport const DATA_LIPIDS_POLY_UNSATURATED = \"d_poly_unsaturated\";\r\nexport const DATA_LIPIDS_TRANSFATTY_ACIDS = \"d_transfatty_acids\";\r\n\r\nexport const DATA_CARBS_DIETARY_FIBERS = \"d_dietary fibers\";\r\nexport const DATA_CARBS_SUGAR = \"d_sugar\";\r\nexport const DATA_CARBS_GLUCOSE = \"d_glucose\";\r\nexport const DATA_CARBS_FRUCTOSE = \"d_fructose\";\r\nexport const DATA_CARBS_GALACTOSE = \"d_galactose\";\r\nexport const DATA_CARBS_SUCROSE = \"d_sucrose\";\r\nexport const DATA_CARBS_LACTOSE = \"d_lactose\";\r\nexport const DATA_CARBS_MALTOSE = \"d_maltose\";\r\nexport const DATA_CARBS_STARCH = \"d_starch\";\r\n\r\nexport const DATA_PROTEIN_TRYPTOPHAN = \"tryptophan\";\r\nexport const DATA_PROTEIN_THREONINE = \"threonine\";\r\nexport const DATA_PROTEIN_ISOLEUCINE = \"isoleucine\";\r\nexport const DATA_PROTEIN_LEUCINE = \"leucine\";\r\nexport const DATA_PROTEIN_LYSINE = \"lysine\";\r\nexport const DATA_PROTEIN_METHIONINE = \"methionine\";\r\nexport const DATA_PROTEIN_CYSTINE = \"cystine\";\r\nexport const DATA_PROTEIN_PHENYLALANINE = \"phenylalanine\";\r\nexport const DATA_PROTEIN_TYROSINE = \"tyrosine\";\r\nexport const DATA_PROTEIN_VALINE = \"valine\";\r\nexport const DATA_PROTEIN_ARGININE = \"arginine\";\r\nexport const DATA_PROTEIN_HISTIDINE = \"histidine\";\r\nexport const DATA_PROTEIN_ALANINE = \"alanine\";\r\nexport const DATA_PROTEIN_ASPARTIC_ACID = \"asparticAcid\";\r\nexport const DATA_PROTEIN_GLUTAMIC_ACID= \"glutamicAcid\";\r\nexport const DATA_PROTEIN_GLYCINE = \"glycine\";\r\nexport const DATA_PROTEIN_PROLINE = \"proline\";\r\nexport const DATA_PROTEIN_SERINE = \"serine\";\r\n\r\nexport const DISPLAYMODE_TABLE = \"dtb\"\r\nexport const DISPLAYMODE_CHART = \"dct\"\r\n\r\nexport const CARBS_DATA_BASE = \"carbs data base chart\";\r\nexport const CARBS_DATA_DETAIL = \"carbs data detail chart\"\r\n\r\nexport const LANGUAGE_DE = \"de\";\r\nexport const LANGUAGE_EN = \"en\";\r\n\r\nexport const LIPIDS_DATA_BASE = \"lipids data base chart\";\r\nexport const LIPIDS_DATA_OMEGA = \"lipids data omega chart\"\r\n\r\nexport const MODE_NEW = \"new\";\r\nexport const MODE_EDIT = \"edit\";\r\n\r\nexport const OPERATOR_ALL = 0\r\nexport const OPERATOR_ANY = 1\r\n\r\nexport const OPTION_YES = 0\r\nexport const OPTION_NO = 1\r\n\r\nexport const PATH_DIRECT_COMPARE = \"/directcompare\";\r\nexport const PATH_FOODCOMPARE = \"/foodcompare\"\r\nexport const PATH_FOODDATA_PANEL = \"/datapanel\";\r\nexport const PATH_HOME = \"/home\";\r\nexport const PATH_CONTACT = \"/contact\";\r\nexport const PATH_USERSETTINGS = \"/usersettings\";\r\nexport const PATH_INFO = \"/info\";\r\n\r\nexport const PATH_RANKING = \"/ranking\";\r\n\r\nexport const PORTION_KEY_INDIVIDUAL = 0\r\nexport const PORTION_KEY_100 = 1\r\n\r\nexport const QUERYKEY_DATAPANEL_ADD = \"add\"\r\nexport const QUERYKEY_DATAPANEL_ADD_COMPOSITE = \"composite\"\r\nexport const QUERYKEY_DATAPANEL_ITEM = \"item\"\r\nexport const QUERYKEY_DATAPANEL_RANKING = \"ranking\"\r\nexport const QUERYKEY_DATAPANEL_AGGREGATED = \"aggregated\"\r\n\r\nexport const SEX_MALE = \"sex male\"\r\nexport const SEX_FEMALE = \"sex female\"\r\n\r\nexport const SOURCE_SRLEGACY = \"srlegacy\"\r\nexport const SOURCE_FNDDS = \"fndds\"\r\n\r\nexport const TAB_BASE_DATA = \"basedata\"\r\nexport const TAB_ENERGY_DATA = \"energydata\"\r\nexport const TAB_VITAMIN_DATA = \"vitamindata\"\r\nexport const TAB_MINERAL_DATA = \"mineraldata\"\r\nexport const TAB_LIPIDS_DATA = \"lipidsdata\"\r\nexport const TAB_CARBS_DATA = \"carbsdata\"\r\nexport const TAB_PROTEINS_DATA = \"proteinsdata\"\r\nexport const TAB_JUXTAPOSITION = \"juxtaposition\"\r\nexport const TAB_INFO = \"infodata\"\r\n\r\nexport const TAB_LIST = [TAB_BASE_DATA, TAB_ENERGY_DATA, TAB_VITAMIN_DATA, TAB_MINERAL_DATA, TAB_LIPIDS_DATA, TAB_CARBS_DATA, TAB_PROTEINS_DATA, TAB_INFO]\r\n\r\nexport const UNIT_GRAM = 0\r\nexport const UNIT_MILLIGRAM = 1\r\nexport const UNIT_MICROGRAM = 2\r\n\r\nexport const NUTRIENT_BASE_DATA_INDEX = 0\r\nexport const NUTRIENT_VITAMIN_INDEX = 1\r\nexport const NUTRIENT_MINERAL_INDEX = 2\r\nexport const NUTRIENT_LIPIDS_INDEX = 3\r\nexport const NUTRIENT_CARBS_INDEX = 4\r\nexport const NUTRIENT_PROTEIN_INDEX = 5\r\n\r\nexport const HIGHLIGHTING_NONE = 0\r\nexport const HIGHLIGHTING_MIN_MAX = 1\r\nexport const HIGHLIGHTING_SHARE_SELECTION = 2\r\nexport const HIGHLIGHTING_SHARE_ALL = 3\r\n\r\nexport const COMPARISON_REFERENCE_ALL = 0\r\nexport const COMPARISON_REFERENCE_ALL_IN_CATEGORY = 1\r\nexport const COMPARISON_REFERENCE_SELECTED_TABS = 2","import {\r\n    AMOUNT_PORTION,\r\n    CARBS_DATA_BASE, CHART_SIZE_MEDIUM, CHART_TYPE_COMPOSITION,\r\n    CHART_TYPE_PIE,\r\n    LIPIDS_DATA_BASE,\r\n    SEX_MALE\r\n} from \"./Constants\";\r\nimport {ChartConfigData, DirectCompareChartConfigData, JuxtapositionConfig} from \"../types/livedata/ChartConfigData\";\r\nimport {WindowDimension} from \"../service/WindowDimension\";\r\n\r\nexport const release = \"2.2\"\r\nexport const buildDate = \"2024-03-11\"\r\n\r\nexport const maxMessageCharacters = 5000\r\nexport const maxElementsInRankingChart = 100\r\n\r\n// The food class to be initially displayed in the food selector\r\nexport const initialFoodClassId = 1\r\n\r\n// The food class to be initially displayed as the comparator in the direct comparison menu (second element)\r\nexport const initialComparisonFoodClassId = 7\r\n\r\nexport const minimalOmegaRatio = 0.3\r\nexport const maximalPortionSize = 5000\r\nexport const defaultPanelHeight = '468px'\r\n\r\nexport const smallFormsScreenSize: WindowDimension = {\r\n    width: 1200,\r\n    height: 800\r\n}\r\n\r\nexport const initialUserDataAge = 35\r\nexport const initialUserDataSize = 175\r\nexport const initialUserDataWeight = 75\r\nexport const initialUserDataSex = SEX_MALE\r\nexport const initialUserDataPregnant = false\r\nexport const initialUserDataBreastfeeding = false\r\nexport const initialUserDataPalValue = 1.6\r\nexport const initialUserDataLeisureSports = false\r\n\r\nexport const initialChartConfigData: ChartConfigData = {\r\n    baseChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        showDetails: false\r\n    },\r\n    energyChartConfig: {\r\n        chartType: CHART_TYPE_COMPOSITION,\r\n        showLegend: true\r\n    },\r\n    vitaminChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    },\r\n    mineralChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    },\r\n    lipidsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        hideRemainders: false,\r\n        subChart: LIPIDS_DATA_BASE,\r\n        expand100: false\r\n    },\r\n    carbsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        subChart: CARBS_DATA_BASE,\r\n        hideRemainders: false,\r\n        expand100: false\r\n    },\r\n    proteinChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    }\r\n}\r\n\r\nexport const initialJuxtapositionConfigData: JuxtapositionConfig = {\r\n    selectedGroup: null,\r\n    selectedComparisonReference: null,\r\n    chartSize: CHART_SIZE_MEDIUM,\r\n    showLabels: false\r\n}\r\n\r\nexport const initialDirectCompareConfigData: DirectCompareChartConfigData = {\r\n    baseChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        showDetails: false\r\n    },\r\n    energyChartConfig: {\r\n        chartType: CHART_TYPE_COMPOSITION,\r\n        showLegend: true\r\n    },\r\n    vitaminChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    },\r\n    mineralChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    },\r\n    lipidsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        hideRemainders: false,\r\n        expand100: false,\r\n        subChart1: LIPIDS_DATA_BASE,\r\n        subChart2: LIPIDS_DATA_BASE\r\n    },\r\n    carbsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        hideRemainders: false,\r\n        expand100: false,\r\n        subChart1: CARBS_DATA_BASE,\r\n        subChart2: CARBS_DATA_BASE\r\n    },\r\n    proteinChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    }\r\n}","import NameType from \"../types/nutrientdata/NameType\";\r\n\r\n/**\r\n * Retrieves the name of a name type object in the given language\r\n * @param nameType The name type object\r\n * @param language The given language\r\n * @param verbose Optionally set this value to true to obtain the full name (including auxiliary information set in brackets)\r\n */\r\nexport default function getName(nameType: NameType, language: string, verbose = false): string {\r\n    const name = language === 'de' ?  nameType.germanName : nameType.englishName\r\n    if(!verbose) {\r\n        return removeAuxiliaryInformationFromFoodName(name)\r\n    } else {\r\n        return name\r\n    }\r\n}\r\n\r\n/**\r\n * Strips of auxiliary information of the food item, which is set in brackets and may not be intended to display\r\n * @param name The full food name as set in the nutrient json file.\r\n */\r\nexport function removeAuxiliaryInformationFromFoodName(name: string): string {\r\n    if(name.includes(\"[\")) {\r\n        const index = name.indexOf(\"[\")\r\n        return name.substring(0, index).trim()\r\n    } else {\r\n        return name\r\n    }\r\n}\r\n\r\n","import NameType from \"../../types/nutrientdata/NameType\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport getName from \"../LanguageService\";\r\n\r\nexport function getReactSelectOptionsList(nameTypeList: Array<NameType>, language: string, sort?: boolean): Array<ReactSelectOption> {\r\n    const names: Array<string> = []\r\n\r\n    if(nameTypeList && nameTypeList.length > 0) {\r\n        nameTypeList.forEach(nameType => names.push(getName(nameType, language)))\r\n    }\r\n\r\n    if(sort) {\r\n        names.sort()\r\n    }\r\n\r\n    const reactSelectOptions: Array<ReactSelectOption> = []\r\n    names.forEach((name, index) => {\r\n        reactSelectOptions.push({\r\n            value: index,\r\n            label: name\r\n        })\r\n    })\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getNameFromFoodNameList(foodNameList: Array<NameType>, id: number, language: string, verbose = false): string | null {\r\n    const nameType = foodNameList.find(nameType => nameType.id === id)\r\n\r\n    if(nameType) {\r\n        return getName(nameType, language, verbose)\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\n/*\r\n * General method to shorten the name of long food name.\r\n * name: The food name, e.g. \"Linen oil (at least 60 % lineul acid)\"\r\n * maxLength: The maximum length of the food name.\r\n */\r\nexport function shortenName(name, maxLength) {\r\n    if(name.length <= maxLength) {\r\n        return name;\r\n    }\r\n\r\n    if(name.includes(\"(\")) {\r\n        const indexOfBrace = name.indexOf(\"(\");\r\n        if(indexOfBrace >= maxLength-6) {\r\n            return name.substring(0, indexOfBrace-1).trim() + \"...\";\r\n        }\r\n    }\r\n\r\n    return name.substring(0, maxLength-3).trim() + \"...\";\r\n}","export function parseFoodCompareUri(): string | null {\r\n    const queryString = window.location.search.substring(1)\r\n\r\n    const equalOperator = queryString.indexOf(\"=\")\r\n    if(equalOperator === -1) {\r\n        return null\r\n    }\r\n    const key = queryString.substring(0, equalOperator)\r\n    const value = queryString.substring(equalOperator + 1)\r\n\r\n    if(key === \"mode\") {\r\n        return value\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nexport function prepareUriForParsing(uri: string): string {\r\n    // Some websites like youtube transform the semicolons in the URL to %3B, which later need to be translated back to semicolons\r\n    if (uri.includes(\"/%3B\")) {\r\n        return uri.replace(/%3B/g, \";\")\r\n    }\r\n\r\n    // Some websites transform the semicolon to an ampersand\r\n    if (uri.includes(\"&\")) {\r\n        return uri.replace(/&/g, \";\")\r\n    }\r\n\r\n    return uri\r\n}","import React, {createContext, useState} from \"react\";\r\nimport {LANGUAGE_DE, LANGUAGE_EN} from \"../config/Constants\";\r\n\r\nexport interface LanguageProviderProps {\r\n    language: string\r\n    userLanguageChange: (selectedLanguage: string) => void\r\n}\r\n\r\nexport const LanguageContext = createContext<LanguageProviderProps>({\r\n    language: 'en',\r\n    userLanguageChange: () => {return 'en'}\r\n});\r\n\r\nexport function LanguageProvider({ children }) {\r\n    const userLanguage = navigator.language;\r\n    const preferredLanguage = userLanguage === 'de' || userLanguage === 'de-DE' ? LANGUAGE_DE : LANGUAGE_EN\r\n    const [language, setLanguage] = useState(preferredLanguage);\r\n\r\n    const userLanguageChange = (selectedLanaguage: string): void => {\r\n        const newLanguage = selectedLanaguage ? selectedLanaguage : LANGUAGE_EN\r\n        setLanguage(newLanguage);\r\n    }\r\n\r\n    const provider: LanguageProviderProps = {\r\n        language,\r\n        userLanguageChange\r\n    };\r\n\r\n    return (\r\n        <LanguageContext.Provider value={provider}>\r\n            {children}\r\n        </LanguageContext.Provider>\r\n    );\r\n}\r\n\r\n\r\n\r\n","export const applicationStrings = {\r\n    book_heading_deficiencies: {\r\n        \"de\": \"Mangelerscheinungen\",\r\n        \"en\": \"Deficiencies\"\r\n    },\r\n    book_heading_dependencies: {\r\n        \"de\": \"Abhängigkeiten\",\r\n        \"en\": \"Dependencies\"\r\n    },\r\n    book_heading_functionality: {\r\n        \"de\": \"Funktionen\",\r\n        \"en\": \"Meaning\"\r\n    },\r\n    book_heading_overdose: {\r\n        \"de\": \"Probleme bei Überdosis\",\r\n        \"en\": \"Issues of overdose\"\r\n    },\r\n    book_heading_requirements: {\r\n        \"de\": \"Tagesbedarf\",\r\n        \"en\": \"Daily requirement\"\r\n    },\r\n    book_heading_sources: {\r\n        \"de\": \"Quellen\",\r\n        \"en\": \"Sources\"\r\n    },\r\n    book_heading_storage: {\r\n        \"de\": \"Speicherung\",\r\n        \"en\": \"Storage\"\r\n    },\r\n    book_minerals: {\r\n        \"de\": \"Buch der Mineralstoffe\",\r\n        \"en\": \"Book of Minerals\"\r\n    },\r\n    book_proteins: {\r\n        \"de\": \"Buch der Aminosäuren\",\r\n        \"en\": \"Book of Amino Acids\"\r\n    },\r\n    book_vitamins: {\r\n        \"de\": \"Buch der Vitamine\",\r\n        \"en\": \"Book of Vitamins\"\r\n    },\r\n    _fl_ounces: {\r\n        de: 'Flüßigunzen',\r\n        en: 'Fl. ounces'\r\n    },\r\n    _gram: {\r\n        de: 'Gramm',\r\n        en: 'Gram'\r\n    },\r\n    _milligram: {\r\n        de: 'Milligramm (mg)',\r\n        en: 'Milligram (mg)'\r\n    },\r\n    _microgram: {\r\n        de: 'Mikrogramm (µg)',\r\n        en: 'Microgram (µg)'\r\n    },\r\n    _ounces: {\r\n        de: 'Unzen',\r\n        en: 'Ounces'\r\n    },\r\n    _option_no: {\r\n        de: 'Nein',\r\n        en: 'No'\r\n    },\r\n    _option_yes: {\r\n        de: 'Ja',\r\n        en: 'Yes'\r\n    },\r\n    _pounds: {\r\n        de: 'Pfund',\r\n        en: 'Pounds'\r\n    },\r\n    button_add: {\r\n        de: 'Hinzufügen',\r\n        en: 'Add'\r\n    },\r\n    button_cancel: {\r\n        de: 'Abbrechen',\r\n        en: 'Cancel'\r\n    },\r\n    button_change_to_chart_mode: {\r\n        de: 'Daten als Diagramm anzeigen',\r\n        en: 'Display data as chart'\r\n    },\r\n    button_close: {\r\n        de: 'Schließen',\r\n        en: 'Close'\r\n    },\r\n    button_getstarted_1: {\r\n        de: 'Einzelne Lebensmittel analysieren',\r\n        en: 'Analyze separate food items'\r\n    },\r\n    button_getstarted_2: {\r\n        de: 'Komplexe Lebensmittel zusammenstellen und analysieren',\r\n        en: 'Create and analyze a composite food list'\r\n    },\r\n    button_getstarted_3: {\r\n        de: 'Zwei Lebensmittel gegenüberstellen',\r\n        en: 'Compare two food items with each other'\r\n    },\r\n    button_getstarted_4: {\r\n        de: 'Lebensmittel nach Werten sortieren',\r\n        en: 'Rank food items by a nutrient value'\r\n    },\r\n    button_mode: {\r\n        de: 'Modus',\r\n        en: 'Mode'\r\n    },\r\n    button_no: {\r\n        de: 'Nein',\r\n        en: 'No'\r\n    },\r\n    button_select: {\r\n        de: 'Auswählen',\r\n        en: 'Show'\r\n    },\r\n    button_show: {\r\n        de: 'Anzeigen',\r\n        en: 'Show'\r\n    },\r\n    button_send: {\r\n        de: \"Senden\",\r\n        en: \"Send\"\r\n    },\r\n    button_submit: {\r\n        de: 'Übernehmen',\r\n        en: 'Submit'\r\n    },\r\n    button_update: {\r\n        de: \"Aktualisieren\",\r\n        en: \"Update\"\r\n    },\r\n    button_yes: {\r\n        de: 'Ja',\r\n        en: 'Yes'\r\n    },\r\n    checkbox_chartoption_hideRemainders: {\r\n        de: 'Rest ausblenden',\r\n        en: 'Hide remainders'\r\n    },\r\n    checkbox_chartoption_showLegend: {\r\n        de: 'Legende',\r\n        en: 'Legend'\r\n    },\r\n    checkbox_chartoption_showDetails: {\r\n        de: 'Details',\r\n        en: 'Details'\r\n    },\r\n    checkbox_english: {\r\n        de: 'Englisch',\r\n        en: 'English'\r\n    },\r\n    checkbox_english_m: {\r\n        de: 'EN',\r\n        en: 'EN'\r\n    },\r\n    checkbox_expand100g: {\r\n        de: 'Auf 100 % erweitern',\r\n        en: 'Expand to 100 %'\r\n    },\r\n    checkbox_german: {\r\n        de: 'Deutsch',\r\n        en: 'German'\r\n    },\r\n    checkbox_german_m: {\r\n        de: 'DE',\r\n        en: 'DE'\r\n    },\r\n    checkbox_synchronize: {\r\n        de: 'Synchronisieren',\r\n        en: 'Synchronize'\r\n    },\r\n    confirm_close_all_tabs: {\r\n        de: 'Sollen wirklich alle Lebensmittel-Tabs geschlossen werden?',\r\n        en: 'Really close all food tabs?'\r\n    },\r\n    device_detection_hint: {\r\n        de: 'Auf Mobilgeräten und sehr kleinen Geräten stehen einige Funktionen von Food Compare aktuell nur eingeschränkt zur Verfügung. Wir bitten um Verständnis.',\r\n        en: 'Please understand that on mobile devices and very small screens some functionality of Food Compare is currently limited or unavailable.',\r\n    },\r\n    direct_compare_text: {\r\n        de: 'Wählen Sie zwei Lebensmittel aus den beiden Auswahlboxen, die miteinander verglichen werden sollen, und klicken Sie dann den Anzeigen-Button.',\r\n        en: 'Pick two food elements from the two selectors that should be compared with each other. Then click the Show button.'\r\n    },\r\n    home_button_info: {\r\n        de: 'Mehr zu den Features von Food Compare erfahren...',\r\n        en: 'Learn more about the features of Food Compare...'\r\n    },\r\n    home_carousel_0: {\r\n        de: 'Vitamingehalt von Äpfeln zum Tagesbedarf anzeigen',\r\n        en: 'Show vitamin content of apples compared to daily requirement'\r\n    },\r\n    home_carousel_1: {\r\n        de: 'Unterschied zwischen Zubereitungsart mit/ohne Schale anzeigen',\r\n        en: 'Show difference between potatoes cooked with or without skin'\r\n    },\r\n    home_carousel_2: {\r\n        de: 'Lebensmittel anzeigen, die viel Magnesium enthalten',\r\n        en: 'Show food that contains a lot of magnesium'\r\n    },\r\n    home_carousel_3: {\r\n        de: 'Mineralstoffgehalt von Spinat mit anderem Gemüse vergleichen',\r\n        en: 'Compare the amount of minerals in spinach with other vegetables'\r\n    },\r\n    home_carousel_4: {\r\n        de: 'Liste an Lebensmitteln zusammenstellen und Gesamtgehalt an Vitaminen anzeigen',\r\n        en: 'Create a list of foods and show the total amount of contained vitamins'\r\n    },\r\n    home_carousel_5: {\r\n        de: 'Verteilung von Fettsäuren zwischen zwei Lebensmitteln vergleichen',\r\n        en: 'Compare the distribution of fatty acids between two foods'\r\n    },\r\n    home_text_1: {\r\n        de: 'Food Compare ist ein Webprojekt zur grafischen Darstellung der Zusammensetzung von Lebensmitteln. Während klassische Quellen die enthaltenen Inhaltsstoffe meist nur in tabellarischer Form angeben, verwendet Food Compare Grafiken und Diagramme, um den Gehalt an Vitaminen und Mineralstoffen, Kohlenhydraten, Fettsäuren und Eiweißen (Proteinen) leichter und übersichtlich darzustellen.',\r\n        en: 'Food Compare is a web project to visually display information about food composition. While conventional resources commonly display nutrient data in tables, Food Compare provides charts and graphics to allow users a better understanding of the containing nutrients (carbohydrates, lipids, proteins) as well as vitamins and minerals.'\r\n    },\r\n    home_text_2: {\r\n        de: 'Das Hauptaugenmerk von Food Compare gilt jedoch nicht nur der Veranschaulichung einzelner Nahrungsmittel, sondern der Vergleichbarkeit von Nährstoffen, Vitaminen und Mineralen in Lebensmittels. Dazu können beliebig viele Tabs geöffnet und Lebensmittel damit leicht miteinander verglichen werden. So lassen sich bspw. auf einfache Weise der Vitamingehalt von einzelnen Obstsorten vergleichen, oder die Aufteilung von Kohlenhydraten, Fetten und Eiweißen zwischen Grundnahrungsmitteln. Dabei erlaubt die Anwendung auch das Zusammenstellen von komplexen Menüs, deren Gesamtgehalt an Nährstoffen, Vitaminen und Mineralstoffen dann berechnet wird.',\r\n        en: 'The primary focus of Food Compare is to visually compare the composition and contents of different food items, though. Food items can be opened in different tabs so that nutrients, vitamins or minerals can be easily compare. As an example, users can compare the containing vitamins between different fruits or the nutrient composition between staple foods. In addition, the application allows to aggregate foods to more complex menus and will then calculate the overall amount of nutrients, vitamins and minerals in that menu.'\r\n    },\r\n    home_text_3: {\r\n        de: 'Um die Nährstoffdiagramme zweier Lebensmittel auf einen Blick miteinander vergleichen zu können, gibt es seit der Version 1.2 nun auch einen zusätzlichen Bereich, in denen die Diagramme entsprechend nebeneinander angeordnet sind. Einige Datenseiten wie Vitamine und Mineralstoffe lassen sich dabei auch synchronisieren, so dass eine einheitliche Skalierung der Diagramme stattfindet und nur die Daten angezeigt werden, welche für beide Lebensmittel vorliegen.',\r\n        en: 'In order to compare nutrient charts of two food items at a glance, an additional page was added in version 1.2 where nutrient charts are placed next to each other. Some data pages like vitamins and minerals can also be synchronized, which means that the charts use a unique scaling and only display data that is available in both food elements.'\r\n    },\r\n    home_foodcompare_overview: {\r\n        de: 'Food Compare im Überblick',\r\n        en: 'Food Compare at a Glance'\r\n    },\r\n    info_button_back: {\r\n        de: 'Zurück zur Startseite',\r\n        en: 'Back to home page'\r\n    },\r\n    input_compositelist_title: {\r\n        de: 'Individuelle Liste',\r\n        en: 'Individual list'\r\n    },\r\n    label_amount: {\r\n        de: 'Menge (g)',\r\n        en: 'Amount (g)'\r\n    },\r\n    label_amount_short: {\r\n        de: 'Gramm',\r\n        en: 'Gram'\r\n    },\r\n    label_category: {\r\n        de: 'Kategorie',\r\n        en: 'Category'\r\n    },\r\n    label_categoryTree_checkbox: {\r\n        de: 'Nach Kategorien unterteilen',\r\n        en: 'Separate by categories'\r\n    },\r\n    label_categoryTree_title: {\r\n        de: 'Food Compare Kategoriebaum',\r\n        en: 'Food Compare Category Tree'\r\n    },\r\n    label_charttype: {\r\n        de: 'Anzeige',\r\n        en: 'Display'\r\n    },\r\n    label_charttype_bar: {\r\n        de: 'Balkendiagramm',\r\n        en: 'Bar chart'\r\n    },\r\n    label_charttype_energy_composition: {\r\n        de: 'Energiezusammensetzung',\r\n        en: 'Energy composition'\r\n    },\r\n    label_charttype_energy_level: {\r\n        de: 'Energielevel',\r\n        en: 'Energy level'\r\n    },\r\n    label_charttype_pie: {\r\n        de: 'Tortendiagramm',\r\n        en: 'Pie chart'\r\n    },\r\n    label_charttype_carbs_base: {\r\n        de: 'Allgemeine Werte',\r\n        en: 'Basic data'\r\n    },\r\n    label_charttype_carbs_detail: {\r\n        de: 'Detailwerte',\r\n        en: 'Detailed data'\r\n    },\r\n    label_charttype_energy: {\r\n        de: 'Grundumsatz und Gesamtumsatz (Energie)',\r\n        en: 'BMR and Energy Expenditure'\r\n    },\r\n    label_charttype_lipids_base: {\r\n        de: 'Allgemeine Werte',\r\n        en: 'Basic data'\r\n    },\r\n    label_charttype_lipids_base_title: {\r\n        de: 'Allgemeine Verteilung der Fettsäuren',\r\n        en: 'Basic distributions of fatty acids'\r\n    },\r\n    label_charttype_lipids_omega: {\r\n        de: 'Omega-Werte',\r\n        en: 'Omega data'\r\n    },\r\n    label_charttype_lipids_omega_title: {\r\n        de: 'Allgemeine Verteilung der Omega-3/6-Fettsäuren',\r\n        en: 'Basic distributions of Omega 3/6 acids'\r\n    },\r\n    label_charttype_minerals: {\r\n        de: 'Minerale (im Vgl. zum Tagesbedarf)',\r\n        en: 'Minerals (related to daily requirements)'\r\n    },\r\n    label_charttype_proteins: {\r\n        de: 'Aminosäuren (im Vgl. zum Tagesbedarf)',\r\n        en: 'Amino acids  (related to daily requirements)'\r\n    },\r\n    label_charttype_vitamins: {\r\n        de: 'Vitamine (im Vgl. zum Tagesbedarf)',\r\n        en: 'Vitamins (related to daily requirements)'\r\n    },\r\n    label_chart_bmr: {\r\n        de: 'Grundumsatz',\r\n        en: 'Basal Metabolic Rate (BMR)'\r\n    },\r\n    label_chart_energyExpenditure: {\r\n        de: 'Gesamtumsatz',\r\n        en: 'Energy Expenditure'\r\n    },\r\n    label_chart_proteins: {\r\n        de: 'Proteine',\r\n        en: 'Proteins'\r\n    },\r\n    label_chart_nutrientComposition: {\r\n        de: 'Nährstoffzusammensetzung',\r\n        en: 'Nutrient Composition'\r\n    },\r\n    label_chart_totalComposition: {\r\n        de: 'Gesamtzusammensetzung',\r\n        en: 'Total Composition'\r\n    },\r\n    label_chart_view: {\r\n        de: 'Zur Diagrammansicht wechseln',\r\n        en: 'Switch to chart view'\r\n    },\r\n    label_datatype: {\r\n        de: 'Datentyp',\r\n        en: 'Data type'\r\n    },\r\n    label_error: {\r\n        de: 'Eingabefehler',\r\n        en: 'Input error'\r\n    },\r\n    label_filterModal_add: {\r\n        de: 'Neue Bedingung',\r\n        en: 'New condition'\r\n    },\r\n    label_filterModal_note_addCondition: {\r\n        de: 'Fügen Sie eine Bedingung hinzu, um eine gefilterte Liste an Lebensmitteln zu erhalten.',\r\n        en: 'Add a condition to get a filtered list of foods.'\r\n    },\r\n    label_filterModal_note_noData: {\r\n        de: 'Keine Ergebnisse.',\r\n        en: 'No results.'\r\n    },\r\n    label_filterModal_selection: {\r\n        de: 'Bedingung festlegen',\r\n        en: 'Define condition'\r\n    },\r\n    label_filterModal_title: {\r\n        de: 'Lebensmittelfilter',\r\n        en: 'Food filter'\r\n    },\r\n    label_food: {\r\n        de: \"Lebensmittel\",\r\n        en: \"Food\"\r\n    },\r\n    label_foodclass: {\r\n        de: 'Lebensmittel',\r\n        en: 'Food class'\r\n    },\r\n    label_fooditem: {\r\n        de: 'Typ',\r\n        en: 'Food type'\r\n    },\r\n    label_foodselector: {\r\n        de: 'Lebensmittelauswahl',\r\n        en: 'Food Selector'\r\n    },\r\n    label_foodselector_composite: {\r\n        de: 'Zusammenstellung eines Lebensmittels',\r\n        en: 'Composite food generation'\r\n    },\r\n    label_group: {\r\n        de: 'Gruppe',\r\n        en: 'Group'\r\n    },\r\n    label_highlighting: {\r\n        de: 'Einfärben',\r\n        en: 'Highlighting'\r\n    },\r\n    label_highlighting_none: {\r\n        de: 'Nicht einfärben',\r\n        en: 'No highlighting'\r\n    },\r\n    label_highlighting_minmax: {\r\n        de: 'Minimum und Maximum',\r\n        en: 'Min and max'\r\n    },\r\n    label_highlighting_share_selection: {\r\n        de: 'Anteil im Lebensmittel im Bezug zur Auswahl',\r\n        en: 'Amount in food compared to the selection'\r\n    },\r\n    label_highlighting_share_database: {\r\n        de: 'Anteil im Lebensmittel im Bezug zur gesamten Datenbank',\r\n        en: 'Amount in food compared to the whole database'\r\n    },\r\n    label_home_slogan: {\r\n        de: \"Lebensmitteldaten grafisch darstellen\",\r\n        en: \"The Graphic Way of Displaying Food Data\"\r\n    },\r\n    label_juxtaposition: {\r\n        de: 'Vergleich',\r\n        en: 'Juxtaposition'\r\n    },\r\n    label_juxtaposition_settings_btn: {\r\n        de: 'Anzeigeoptionen',\r\n        en: 'Display settings'\r\n    },\r\n    label_juxtaposition_settings_chartsize: {\r\n        de: 'Diagrammgröße',\r\n        en: 'Chart size'\r\n    },\r\n    label_juxtaposition_settings_chartsize_s: {\r\n        de: 'Klein',\r\n        en: 'Small'\r\n    },\r\n    label_juxtaposition_settings_chartsize_m: {\r\n        de: 'Medium',\r\n        en: 'Medium'\r\n    },\r\n    label_juxtaposition_settings_chartsize_l: {\r\n        de: 'Groß',\r\n        en: 'Large'\r\n    },\r\n    label_juxtaposition_settings_showLabels: {\r\n        de: 'Labels anzeigen',\r\n        en: 'Show labels'\r\n    },\r\n    label_juxtaposition_table_avg: {\r\n        de: 'Mittel',\r\n        en: 'Average'\r\n    },\r\n    label_juxtaposition_table_max: {\r\n        de: 'Max',\r\n        en: 'Max'\r\n    },\r\n    label_juxtaposition_table_median: {\r\n        de: 'Median',\r\n        en: 'Median'\r\n    },\r\n    label_juxtaposition_table_min: {\r\n        de: 'Min',\r\n        en: 'Min'\r\n    },\r\n    label_juxtaposition_table_rank: {\r\n        de: 'Rang',\r\n        en: 'Rank'\r\n    },\r\n    label_juxtaposition_table_value: {\r\n        de: 'Wert',\r\n        en: 'Value'\r\n    },\r\n    label_juxtaposition_unavailable: {\r\n        de: 'Keine Anzeige möglich.',\r\n        en: 'Data cannot be displayed.'\r\n    },\r\n    label_info: {\r\n        de: 'Info',\r\n        en: 'Info'\r\n    },\r\n    label_info_calculation: {\r\n        de: 'Berechnung',\r\n        en: 'Calculation'\r\n    },\r\n    label_info_calculation_none: {\r\n        de: 'Standard',\r\n        en: 'Default'\r\n    },\r\n    label_info_calculation_combined: {\r\n        de: 'Daten kombiniert',\r\n        en: 'Combined data'\r\n    },\r\n    label_info_calculation_supplement_impossible: {\r\n        de: 'Standard (Ergänzung nicht möglich)',\r\n        en: 'Default (Supplement not possible)'\r\n    },\r\n    label_info_calculation_supplemented: {\r\n        de: 'Daten ergänzt',\r\n        en: 'Supplemented data'\r\n    },\r\n    label_info_calculation_supplemented_combined: {\r\n        de: 'Daten ergänzt und kombiniert',\r\n        en: 'Supplemented and combined data'\r\n    },\r\n    label_info_composite: {\r\n        de: 'Enthaltene Lebensmittel',\r\n        en: 'Contained food items'\r\n    },\r\n    label_info_category: {\r\n        de: 'Kategorie',\r\n        en: 'Category'\r\n    },\r\n    label_info_foodClass: {\r\n        de: 'Lebensmittel-Klasse',\r\n        en: 'Food Class'\r\n    },\r\n    label_info_foodId: {\r\n        de: 'Lebensmittel ID',\r\n        en: 'Food Id'\r\n    },\r\n    label_info_foodName: {\r\n        de: 'Lebensmittel',\r\n        en: 'Food'\r\n    },\r\n    label_info_portion: {\r\n        de: 'Portionsdaten',\r\n        en: 'Portion data'\r\n    },\r\n    label_info_portionType: {\r\n        de: 'Portionstyp',\r\n        en: 'Portion type'\r\n    },\r\n    label_info_preparation: {\r\n        de: 'Zubereitungsart',\r\n        en: 'Preparation type'\r\n    },\r\n    label_info_source: {\r\n        de: 'Quelle',\r\n        en: 'Source'\r\n    },\r\n    label_language: {\r\n        de: 'Sprache',\r\n        en: 'Language'\r\n    },\r\n    label_mail_name: {\r\n        de: \"Name\",\r\n        en: \"Name\"\r\n    },\r\n    label_mail_address: {\r\n        de: \"Mail-Adresse\",\r\n        en: \"Mail address\"\r\n    },\r\n    label_mail_message: {\r\n        de: \"Ihre Nachricht\",\r\n        en: \"Your message\"\r\n    },\r\n    label_mail_characters_left: {\r\n        de: \"Noch /xx/ Zeichen verbleibend\",\r\n        en: \"/xx/ characters left\"\r\n    },\r\n    label_mail_too_long: {\r\n        de: \"Nachricht ist zu lang\",\r\n        en: \"Message too long\"\r\n    },\r\n    label_mail_error_name: {\r\n        de: \"Geben Sie bitte einen gültigen Namen ein.\",\r\n        en: \"Please enter a valid name.\"\r\n    },\r\n    label_mail_error_mailaddress: {\r\n        de: \"Geben Sie bitte eine gültige Mail-Adresse ein.\",\r\n        en: \"Please enter a valid mail address.\"\r\n    },\r\n    label_mail_error_nocontent: {\r\n        de: \"Geben Sie bitte eine Nachricht ein.\",\r\n        en: \"Please specify a message.\"\r\n    },\r\n    label_mail_error_content_too_long: {\r\n        de: \"Die eingegebene Nachricht ist zu lang.\",\r\n        en: \"The specified message is too long.\"\r\n    },\r\n    label_mail_error_verification: {\r\n        de: \"Bitte verifizieren, dass Sie kein Roboter sind.\",\r\n        en: \"Please verify that you are not a robot.\"\r\n    },\r\n    label_mode_all: {\r\n      de: \"Alle\",\r\n      en: \"All\"\r\n    },\r\n    label_mode_any: {\r\n        de: \"Eine\",\r\n        en: \"Any\"\r\n    },\r\n    label_na: {\r\n        de: 'Keine Angabe',\r\n        en: 'Not available'\r\n    },\r\n    label_noData: {\r\n        de: 'Keine Daten vorhanden',\r\n        en: 'No data available'\r\n    },\r\n    label_nutrient_alcohol: {\r\n        de: 'Alkohol',\r\n        en: 'Alcohol'\r\n    },\r\n    label_nutrient_ash: {\r\n        de: 'Reststoffe',\r\n        en: 'Ash'\r\n    },\r\n    label_nutrient_ash_short: {\r\n        de: 'Rest',\r\n        en: 'Ash'\r\n    },\r\n    label_nutrient_caffeine: {\r\n        de: 'Koffein',\r\n        en: 'Caffeine'\r\n    },\r\n    label_nutrient_carbohydrates: {\r\n        de: 'Kohlenhydrate',\r\n        en: 'Carbohydrates'\r\n    },\r\n    label_nutrient_carbohydrates_plural: {\r\n        de: 'Kohlenhydraten',\r\n        en: 'Carbohydrates'\r\n    },\r\n    label_nutrient_carbohydrates_m: {\r\n        de: 'Kohlenhyd.',\r\n        en: 'Carbs'\r\n    },\r\n    label_nutrient_carbohydrates_short: {\r\n        de: 'Kohlenhyd.',\r\n        en: 'Carbs'\r\n    },\r\n    label_nutrient_carbohydrates_fructose: {\r\n        de: 'Fruktose',\r\n        en: 'Fructose'\r\n    },\r\n    label_nutrient_carbohydrates_galactose: {\r\n        de: 'Galaktose',\r\n        en: 'Galactose'\r\n    },\r\n    label_nutrient_carbohydrates_glucose: {\r\n        de: 'Glukose (Traubenzucker)',\r\n        en: 'Glucose'\r\n    },\r\n    label_nutrient_carbohydrates_lactose: {\r\n        de: 'Laktose',\r\n        en: 'Lactose'\r\n    },\r\n    label_nutrient_carbohydrates_maltose: {\r\n        de: 'Maltose',\r\n        en: 'Maltose'\r\n    },\r\n    label_nutrient_carbohydrates_starch: {\r\n        de: 'Stärke',\r\n        en: 'Starch'\r\n    },\r\n    label_nutrient_carbohydrates_sucrose: {\r\n        de: 'Sukrose',\r\n        en: 'Sucrose'\r\n    },\r\n    label_nutrient_dietaryFibers: {\r\n        de: 'Ballaststoffe',\r\n        en: 'Dietary fibers'\r\n    },\r\n    label_nutrient_dietaryFibers_plural: {\r\n        de: 'Ballaststoffen',\r\n        en: 'Dietary fibers'\r\n    },\r\n    label_nutrient_dietaryFibers_short: {\r\n        de: 'Ballastst.',\r\n        en: 'Dietary fib.'\r\n    },\r\n    label_nutrient_energy: {\r\n        de: 'Energie',\r\n        en: 'Energy'\r\n    },\r\n    label_nutrient_lipids: {\r\n        de: 'Fett',\r\n        en: 'Fats'\r\n    },\r\n    label_nutrient_lipids_long: {\r\n        de: 'Fettsäuren',\r\n        en: 'Fatty acids'\r\n    },\r\n    label_nutrient_lipids_saturated: {\r\n        de: 'Gesättigte Fettsäuren',\r\n        en: 'Saturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_saturated_short: {\r\n        de: 'Gesättigt',\r\n        en: 'Saturated'\r\n    },\r\n    label_nutrient_lipids_unsaturated: {\r\n        de: 'Ungesättigte Fettsäuren',\r\n        en: 'Unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_mono: {\r\n        de: 'Einfach ungesättigte Fettsäuren',\r\n        en: 'Mono-unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_mono_short: {\r\n        de: 'Einfach ungesättigt',\r\n        en: 'Mono-unsaturated'\r\n    },\r\n    label_nutrient_lipids_unsaturated_poly: {\r\n        de: 'Mehrfach ungesättigte Fettsäuren',\r\n        en: 'Poly-unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_poly_short: {\r\n        de: 'Mehrfach unges.',\r\n        en: 'Poly-unsaturated'\r\n    },\r\n    label_nutrient_lipids_transfattyAcids: {\r\n        de: 'Transfettsäuren',\r\n        en: 'Transfatty acids'\r\n    },\r\n    label_nutrient_lipids_omega3: {\r\n        de: 'Omega-3-Fettsäuren',\r\n        en: 'Omega-3 fatty acids'\r\n    },\r\n    label_nutrient_lipids_omega6: {\r\n        de: 'Omega-6-Fettsäuren',\r\n        en: 'Omega-6 fatty acids'\r\n    },\r\n    label_nutrient_lipids_cholesterol: {\r\n        de: 'Cholesterin',\r\n        en: 'Cholesterol'\r\n    },\r\n    label_nutrient_min: {\r\n        de: 'Mineralstoffe',\r\n        en: 'Minerals'\r\n    },\r\n    label_nutrient_min_m: {\r\n        de: 'Minerale',\r\n        en: 'Minerals'\r\n    },\r\n    label_nutrient_min_calcium: {\r\n        de: 'Kalzium',\r\n        en: 'Calcium'\r\n    },\r\n    label_nutrient_min_copper: {\r\n        de: 'Kupfer',\r\n        en: 'Copper'\r\n    },\r\n    label_nutrient_min_iron: {\r\n        de: 'Eisen',\r\n        en: 'Iron'\r\n    },\r\n    label_nutrient_min_magnesium: {\r\n        de: 'Magnesium',\r\n        en: 'Magnesium'\r\n    },\r\n    label_nutrient_min_manganese: {\r\n        de: 'Mangan',\r\n        en: 'Manganese'\r\n    },\r\n    label_nutrient_min_phosphorus: {\r\n        de: 'Phosphor',\r\n        en: 'Phosphorus'\r\n    },\r\n    label_nutrient_min_potassium: {\r\n        de: 'Kalium',\r\n        en: 'Potassium'\r\n    },\r\n    label_nutrient_min_selenium: {\r\n        de: 'Selen',\r\n        en: 'Selenium'\r\n    },\r\n    label_nutrient_min_sodium: {\r\n        de: 'Natrium',\r\n        en: 'Sodium'\r\n    },\r\n    label_nutrient_min_zinc: {\r\n        de: 'Zink',\r\n        en: 'Zinc'\r\n    },\r\n    label_nutrient_omega3: {\r\n        de: 'Omega-3-Fettsäuren',\r\n        en: 'Omega-3 Fatty acids'\r\n    },\r\n    label_nutrient_omega6: {\r\n        de: 'Omega-6-Fettsäuren',\r\n        en: 'Omega-6 Fatty acids'\r\n    },\r\n    label_nutrient_proteins: {\r\n        de: 'Eiweiß',\r\n        en: 'Proteins'\r\n    },\r\n    label_nutrient_proteins_alanine: {\r\n        de: 'Alanin',\r\n        en: 'Alanine'\r\n    },\r\n    label_nutrient_proteins_arginine: {\r\n        de: 'Arginin',\r\n        en: 'Arginine'\r\n    },\r\n    label_nutrient_proteins_asparticAcid: {\r\n        de: 'Asparaginsäure',\r\n        en: 'Aspartic acid'\r\n    },\r\n    label_nutrient_proteins_cystine: {\r\n        de: 'Cystein',\r\n        en: 'Cysteine'\r\n    },\r\n    label_nutrient_proteins_glysine: {\r\n        de: 'Glysin',\r\n        en: 'Glysine'\r\n    },\r\n    label_nutrient_proteins_glutamicAcid: {\r\n        de: 'Glutamin',\r\n        en: 'Glutamic acid'\r\n    },\r\n    label_nutrient_proteins_histidine: {\r\n        de: 'Histidin',\r\n        en: 'Histidine'\r\n    },\r\n    label_nutrient_proteins_isoleucine: {\r\n        de: 'Isoleucine',\r\n        en: 'Isoleucine'\r\n    },\r\n    label_nutrient_proteins_leucine: {\r\n        de: 'Leucin',\r\n        en: 'Leucine'\r\n    },\r\n    label_nutrient_proteins_lysine: {\r\n        de: 'Lysin',\r\n        en: 'Lysine'\r\n    },\r\n    label_nutrient_proteins_methionine: {\r\n        de: 'Methionin',\r\n        en: 'Methionine'\r\n    },\r\n    label_nutrient_proteins_phenylalanine: {\r\n        de: 'Phenylalanin',\r\n        en: 'Phenylalanine'\r\n    },\r\n    label_nutrient_proteins_proline: {\r\n        de: 'Prolin',\r\n        en: 'Proline'\r\n    },\r\n    label_nutrient_proteins_serine: {\r\n        de: 'Serin',\r\n        en: 'Serine'\r\n    },\r\n    label_nutrient_proteins_threonine: {\r\n        de: 'Threonin',\r\n        en: 'Threonine'\r\n    },\r\n    label_nutrient_proteins_tryptophan: {\r\n        de: 'Tryptophan',\r\n        en: 'Tryptophan'\r\n    },\r\n    label_nutrient_proteins_tyrosine: {\r\n        de: 'Tyrosin',\r\n        en: 'Tyrosine'\r\n    },\r\n    label_nutrient_proteins_valine: {\r\n        de: 'Valin',\r\n        en: 'Valine'\r\n    },\r\n    label_nutrient_remainder: {\r\n        de: 'Rest',\r\n        en: 'Remainder'\r\n    },\r\n    label_nutrient_sugar: {\r\n        de: 'Zucker',\r\n        en: 'Sugar'\r\n    },\r\n    label_nutrient_vit: {\r\n        de: 'Vitamine',\r\n        en: 'Vitamins'\r\n    },\r\n    label_nutrient_vit_a: {\r\n        de: 'Vitamin A (Retinol / Retinal)',\r\n        en: 'Vitamin A (Retinol / Retinal)'\r\n    },\r\n    label_nutrient_vit_b1: {\r\n        de: 'Vitamin B1 (Thiamin)',\r\n        en: 'Vitamin B1 (Thiamine)'\r\n    },\r\n    label_nutrient_vit_b2: {\r\n        de: 'Vitamin B2 (Riboflavin)',\r\n        en: 'Vitamin B2 (Riboflavin)'\r\n    },\r\n    label_nutrient_vit_b3: {\r\n        de: 'Vitamin B3 (Niacin)',\r\n        en: 'Vitamin B3 (Niacin)'\r\n    },\r\n    label_nutrient_vit_b5: {\r\n        de: 'Vitamin B5 (Pantothensäure)',\r\n        en: 'Vitamin B5 (Pantothenic acid)'\r\n    },\r\n    label_nutrient_vit_b6: {\r\n        de: 'Vitamin B6',\r\n        en: 'Vitamin B6'\r\n    },\r\n    label_nutrient_vit_b9: {\r\n        de: 'Vitamin B9 (Folsäure)',\r\n        en: 'Vitamin B9 (Folate)'\r\n    },\r\n    label_nutrient_vit_b12: {\r\n        de: 'Vitamin B12',\r\n        en: 'Vitamin B12'\r\n    },\r\n    label_nutrient_vit_c: {\r\n        de: 'Vitamin C',\r\n        en: 'Vitamin C'\r\n    },\r\n    label_nutrient_vit_d: {\r\n        de: 'Vitamin D',\r\n        en: 'Vitamin D'\r\n    },\r\n    label_nutrient_vit_e: {\r\n        de: 'Vitamin E (α-Tocopherol)',\r\n        en: 'Vitamin E (α-Tocopherol)'\r\n    },\r\n    label_nutrient_vit_e_ext: {\r\n        de: 'Weitere Vitamin-E-Formen',\r\n        en: 'Further forms of Vitamin E'\r\n    },\r\n    label_nutrient_vit_e_ext_tocopherolBeta: {\r\n        de: 'Beta-Tocopherol',\r\n        en: 'Beta-Tocopherol'\r\n    },\r\n    label_nutrient_vit_e_ext_tocopherolGamma: {\r\n        de: 'Gamma-Tocopherol',\r\n        en: 'Gamma-Tocopherol'\r\n    },\r\n    label_nutrient_vit_e_ext_tocopherolDelta: {\r\n        de: 'Delta-Tocopherol',\r\n        en: 'Delta-Tocopherol'\r\n    },\r\n    label_nutrient_vit_e_ext_tocotrienolAlpha: {\r\n        de: 'Alpha-Tocotrienol',\r\n        en: 'Alpha-Tocotrienol'\r\n    },\r\n    label_nutrient_vit_e_ext_tocotrienolBeta: {\r\n        de: 'Beta-Tocotrienol',\r\n        en: 'Beta-Tocotrienol'\r\n    },\r\n    label_nutrient_vit_e_ext_tocotrienolGamma: {\r\n        de: 'Gamma-Tocotrienol',\r\n        en: 'Gamma-Tocotrienol'\r\n    },\r\n    label_nutrient_vit_k: {\r\n        de: 'Vitamin K',\r\n        en: 'Vitamin K'\r\n    },\r\n    label_nutrient_vit_carotenoid: {\r\n        de: 'Provitamin A (Carotine)',\r\n        en: 'Carotene (total)'\r\n    },\r\n    label_nutrient_vit_carotenoid_alpha: {\r\n        de: 'Alpha-Carotin',\r\n        en: 'Alpha-Carotene'\r\n    },\r\n    label_nutrient_vit_carotenoid_beta: {\r\n        de: 'Beta-Carotin',\r\n        en: 'Beta-Carotene'\r\n    },\r\n    label_nutrient_vit_cryptoxanthin: {\r\n        de: 'Beta-Cryptoxanthin',\r\n        en: 'Beta-Cryptoxanthin'\r\n    },\r\n    label_nutrient_vit_scientific_a: {\r\n        de: 'inkl. Provitamin A / Carotine',\r\n        en: 'including Provitamin A / carotene'\r\n    },\r\n    label_nutrient_vit_scientific_b1: {\r\n        de: 'Thiamine',\r\n        en: 'Thiamine'\r\n    },\r\n    label_nutrient_vit_scientific_b2: {\r\n        de: 'Riboflavin',\r\n        en: 'Riboflavin'\r\n    },\r\n    label_nutrient_vit_scientific_b3: {\r\n        de: 'Niacin',\r\n        en: 'Niacin'\r\n    },\r\n    label_nutrient_vit_scientific_b5: {\r\n        de: 'Pantothensäure',\r\n        en: 'Pantothenic acid'\r\n    },\r\n    label_nutrient_vit_scientific_b9: {\r\n        de: 'Folsäure',\r\n        en: 'Folate'\r\n    },\r\n    label_nutrient_vit_scientific_b12: {\r\n        de: 'Cobalamin',\r\n        en: 'Cobalamin '\r\n    },\r\n    label_nutrient_vit_scientific_c: {\r\n        de: 'Ascorbinsäure',\r\n        en: 'Ascorbic acid'\r\n    },\r\n    label_nutrient_vit_scientific_d: {\r\n        de: 'Vitamin D',\r\n        en: 'Vitamin D'\r\n    },\r\n    label_nutrient_vit_scientific_e: {\r\n        de: 'inkl. Provitamin E / Tocopherol',\r\n        en: 'including provitamin E / Tocopherol'\r\n    },\r\n    label_nutrient_vit_scientific_k: {\r\n        de: 'Vitamin K',\r\n        en: 'Vitamin K'\r\n    },\r\n    label_nutrient_water: {\r\n        de: 'Wasser',\r\n        en: 'Water'\r\n    },\r\n    label_overview: {\r\n        de: 'Übersicht',\r\n        en: 'Overview'\r\n    },\r\n    label_overallview_avg: {\r\n        de: 'Mittelwert',\r\n        en: 'Average value'\r\n    },\r\n    label_overallview_avg_short: {\r\n        de: 'Mittel',\r\n        en: 'Mean'\r\n    },\r\n    label_overallview_compared: {\r\n        de: 'Vergleich zur Gesamtdatenbank',\r\n        en: 'Compared to Food Compare database'\r\n    },\r\n    label_overallview_max: {\r\n        de: 'Höchster Wert',\r\n        en: 'Highest value'\r\n    },\r\n    label_overallview_max_short: {\r\n        de: 'Max',\r\n        en: 'Max'\r\n    },\r\n    label_overallview_min: {\r\n        de: 'Niedrigster Wert',\r\n        en: 'Lowest value'\r\n    },\r\n    label_overallview_min_short: {\r\n        de: 'Min',\r\n        en: 'Min'\r\n    },\r\n    label_overallview_sum: {\r\n        de: 'Summe',\r\n        en: 'Sum'\r\n    },\r\n    label_overallview_title: {\r\n        de: 'Gesamtansicht der geladenen Daten',\r\n        en: 'Overall View of added food data'\r\n    },\r\n    label_per_100g: {\r\n        de: 'je 100 g',\r\n        en: 'per 100 g'\r\n    },\r\n    label_per_portion: {\r\n        de: 'je Portion',\r\n        en: 'per portion'\r\n    },\r\n    label_portion: {\r\n        de: 'Portion',\r\n        en: 'Portion'\r\n    },\r\n    label_portion_selected: {\r\n        de: 'Ausgewählte Portion',\r\n        en: 'Selected portion'\r\n    },\r\n    label_portion_common: {\r\n        de: 'Typische Portion',\r\n        en: 'Typical portion'\r\n    },\r\n    label_preferred_source: {\r\n        de: 'Bevorzugte Datenquelle',\r\n        en: 'Preferred data source'\r\n    },\r\n    label_prefix_energy_in: {\r\n        de: 'Energie in ',\r\n        en: 'Energy in '\r\n    },\r\n    label_prefix_hereof: {\r\n        de: 'davon',\r\n        en: 'hereof'\r\n    },\r\n    label_prefix_hereof_in: {\r\n        de: 'davon in ',\r\n        en: 'hereof in '\r\n    },\r\n    label_ranking_dietaryRequirements: {\r\n        de: 'Zeige Tagesbedarf',\r\n        en: 'Show dietary requirements'\r\n    },\r\n    label_reference: {\r\n        de: 'Bezug',\r\n        en: 'Reference'\r\n    },\r\n    label_reference_all: {\r\n        de: 'Alle Lebensmittel in Food Compare',\r\n        en: 'All foods in Food Compare'\r\n    },\r\n    label_reference_category: {\r\n        de: 'Alle Lebensmittel dieser Kategorie',\r\n        en: 'All foods in this category'\r\n    },\r\n    label_reference_panel: {\r\n        de: 'Alle hinzugefügten Lebensmittel im Datenbereich',\r\n        en: 'All foods added in the data panel'\r\n    },\r\n    label_requirement: {\r\n        de: 'Tagesbedarf',\r\n        en: 'Daily requirements'\r\n    },\r\n    label_requirement_chart: {\r\n        de: '% vom Tagesbedarf',\r\n        en: '% of daily requirement'\r\n    },\r\n    label_result: {\r\n        de: 'Ergebnis',\r\n        en: 'result'\r\n    },\r\n    label_results: {\r\n        de: 'Ergebnisse',\r\n        en: 'results'\r\n    },\r\n    label_selection: {\r\n        de: \"Auswahl:\",\r\n        en: \"Selection:\"\r\n    },\r\n    label_source: {\r\n        de: 'Datenquelle',\r\n        en: 'Data source'\r\n    },\r\n    label_source_supplement: {\r\n        de: \"Unvollständige Daten ergänzen\",\r\n        en: \"Supplement incomplete data\"\r\n    },\r\n    label_source_supplement_tooltip: {\r\n        de: \"Ergänzt fehlende Daten aus einer anderen Quelle, sofern diese die entsprechenden Daten enthält\",\r\n        en: \"Supplements missing data from another source in case that source contains the relevant data\"\r\n    },\r\n    label_source_combine: {\r\n        de: \"Datenquellen kombinieren\",\r\n        en: \"Combine data sources\"\r\n    },\r\n    label_source_combine_tooltip: {\r\n        de: \"Bildet den Daten-Mittelwert aus allen Datenquellen zu dem Lebensmittel\",\r\n        en: \"Create the average data out of all available data sources to this food\"\r\n    },\r\n    label_title: {\r\n        de: 'Titel',\r\n        en: 'Title'\r\n    },\r\n    label_tooltips: {\r\n        de: 'Tooltips anzeigen',\r\n        en: 'Show tool tips'\r\n    },\r\n    label_unit: {\r\n        de: 'Einheit',\r\n        en: 'Unit'\r\n    },\r\n    label_unit_conversion_title: {\r\n        de: 'Einheiten umwandeln',\r\n        en: 'Unit conversion'\r\n    },\r\n    label_unknown: {\r\n        de: 'Unbekannt',\r\n        en: 'Unknown'\r\n    },\r\n    label_usda_reference: {\r\n        de: 'Daten auf Food Data Central ansehen',\r\n        en: 'See the nutrient data at Food Data Central'\r\n    },\r\n    label_userSettings_age: {\r\n        de: 'Alter (Jahre)',\r\n        en: 'Age (years)'\r\n    },\r\n    label_userSettings_breastfeeding: {\r\n        de: 'stillend',\r\n        en: 'breast-feeding'\r\n    },\r\n    label_userSettings_intro: {\r\n        de: 'Die User-Einstellungen (Körpergröße, Gewicht, Geschlecht etc.) werden zur Berechnung bestimmter Werte verwendet, z.B. Grundumsatz oder Tagesbedarf an Vitaminen.',\r\n        en: 'User settings such as size, weight and sex are used for different nutrient calculations, e.g., basal metabolic rate or daily requirements of vitamins and the like.'\r\n    },\r\n    label_userSettings_leisureSports: {\r\n        de: 'Freizeitsport',\r\n        en: 'Leisure sports'\r\n    },\r\n    label_userSettings_leisureSports_tooltip: {\r\n        de: 'Angabe, ob Sie an dem betreffenden Tag zusätzlich zu Ihrer Tätigkeit nennenswert Sport ausgeübt haben, z.B. 30-45 min joggen oder 45-60 min Rad fahren (erhöht PAL-Wert um 0.3)',\r\n        en: 'Specifies whether you did some notable (leisure) sports or activity that day, like 30-45 minutes jogging or 45-60 minutes biking (increases PAL-value by 0.3)'\r\n    },\r\n    label_userSettings_palValue: {\r\n        de: 'PAL-Value',\r\n        en: 'Pal Value'\r\n    },\r\n    label_userSettings_pregnant: {\r\n        de: 'schwanger',\r\n        en: 'pregnant'\r\n    },\r\n    label_userSettings_sex: {\r\n        de: 'Geschlecht:',\r\n        en: 'Sex:'\r\n    },\r\n    label_userSettings_sex_male: {\r\n        de: 'männlich',\r\n        en: 'male'\r\n    },\r\n    label_userSettings_sex_female: {\r\n        de: 'weiblich',\r\n        en: 'female'\r\n    },\r\n    label_userSettings_size: {\r\n        de: 'Körpergröße (cm)',\r\n        en: 'Size (cm)'\r\n    },\r\n    label_userSettings_weight: {\r\n        de: 'Gewicht (kg)',\r\n        en: 'Weight (kg)'\r\n    },\r\n    label_value: {\r\n        de: 'Wert',\r\n        en: 'Value'\r\n    },\r\n    menu_food_data_panel: {\r\n        de: 'Lebensmittel analysieren',\r\n        en: 'Food analyzer'\r\n    },\r\n    menu_food_data_panel_m: {\r\n        de: 'Analyse',\r\n        en: 'Analyze'\r\n    },\r\n    menu_direct_compare: {\r\n        de: 'Direktvergleich',\r\n        en: 'Direct comparison'\r\n    },\r\n    menu_direct_compare_m: {\r\n        de: 'Vergleich',\r\n        en: 'Compare'\r\n    },\r\n    menu_home: {\r\n        de: 'Home',\r\n        en: 'Home'\r\n    },\r\n    menu_ranking: {\r\n        de: 'Ranking',\r\n        en: 'Food ranking'\r\n    },\r\n    menu_ranking_m: {\r\n        de: 'Ranking',\r\n        en: 'Ranking'\r\n    },\r\n    menu_settings: {\r\n        de: 'User Einstellungen',\r\n        en: 'User settings'\r\n    },\r\n    menu_settings_m: {\r\n        de: 'Optionen',\r\n        en: 'Settings'\r\n    },\r\n    menu_contact: {\r\n        de: 'Kontakt',\r\n        en: 'Contact'\r\n    },\r\n    menu_contact_sources: {\r\n        de: 'Quellen',\r\n        en: 'Sources'\r\n    },\r\n    menu_contact_dataprivacy: {\r\n        de: 'Datenschutz',\r\n        en: 'Data privacy'\r\n    },\r\n    menu_contact_versions: {\r\n        de: 'Versionen',\r\n        en: 'Versions'\r\n    },\r\n    menu_contact_impressum: {\r\n        de: 'Impressum',\r\n        en: 'Impressum'\r\n    },\r\n    message_email_success: {\r\n        de: 'Ihre Nachricht wurde versendet.',\r\n        en: 'Your message has been sent.'\r\n    },\r\n    message_email_error: {\r\n        de: 'Beim Versenden der Nachricht trat ein Fehler auf.',\r\n        en: 'Error while trying to send message.'\r\n    },\r\n    message_error_existing_element: {\r\n        de: 'Das ausgewählte Element befindet sich bereits im Datenbereich. Ein Lebensmittel kann nur einmal hinzugefügt werden.',\r\n        en: 'The selected food item already exists in your list. A food item can be added only once.'\r\n    },\r\n    message_error_incomplete_form: {\r\n        de: 'Das Formular ist unvollständig ausgefüllt.',\r\n        en: 'The form is incomplete.'\r\n    },\r\n    message_error_input: {\r\n        de: 'Der Wert liegt außerhalb des zulässiges Bereichs.',\r\n        en: 'The value is outside the permissible range.'\r\n    },\r\n    message_error_invalid_portion: {\r\n        de: 'Geben Sie bitte eine Portion zwischen 1 und 5000 Gramm an.',\r\n        en: 'Please specify a portion amount between 1 and 5000 gram.'\r\n    },\r\n    message_export_error: {\r\n        de: 'Export fehlgeschlagen: Fehler beim Serialisieren der Food Compare Daten.',\r\n        en: 'Export failed: Error while trying to serialize Food Compare data.'\r\n    },\r\n    message_filter_error_existing: {\r\n        de: 'Eine Bedingung zu diesem Nährstoff existiert bereits. Bitte wählen Sie einen anderen Wert aus.',\r\n        en: 'There already is a condition to this nutrient. Please select a different value.'\r\n    },\r\n    message_filter_error_range: {\r\n        de: 'Ungültige Eingabe! Das Minimum darf nicht größer als das Maximum sein.',\r\n        en: 'Invalid input! Minimum must not be above the maximum.'\r\n    },\r\n    message_filter_value_correction_min: {\r\n        de: 'Der Wert wurde an das Minimum des Wertebereichs angepasst.',\r\n        en: 'The value has been changed to the minimum of the data range.'\r\n    },\r\n    message_filter_value_correction_max: {\r\n        de: 'Der Wert wurde an das Maximum des Wertebereichs angepasst.',\r\n        en: 'The value has been changed to the maximum of the data range.'\r\n    },\r\n    message_import_error_invalidfile: {\r\n        de: 'Datei konnte nicht verarbeitet werden. Möglicherweise ist dies keine Food Compare Datei.',\r\n        en: 'Could not parse data file. Possibly this is not a Food Compare data file.'\r\n    },\r\n    message_import_error_parse: {\r\n        de: 'Fehler beim Deserialisieren der Food Compare Datei.',\r\n        en: 'Error while trying to deserialize Food Compare data file.'\r\n    },\r\n    message_import_question: {\r\n        de: 'Im Datenbereich befinden sich noch Datenobjekte, die mit den zu importierenden Daten überschrieben werden. Möchten Sie trotzdem fortfahren?',\r\n        en: 'The data panel still contains food data objects which will be overwritten by the imported data. Do you still want to proceed?'\r\n    },\r\n    menu_info: {\r\n        de: 'Info',\r\n        en: 'Info'\r\n    },\r\n    message_userdata_success: {\r\n        de: 'Änderungen wurden gespeichert.',\r\n        en: 'Saved changes.'\r\n    },\r\n    message_userdata_error_title: {\r\n        de: 'Fehlerhafte Eingabe',\r\n        en: 'Invalid input'\r\n    },\r\n    message_userdata_error_age: {\r\n        de: 'Geben Sie bitte ein Alter zwischen 15 und 100 Jahren ein.',\r\n        en: 'Please enter an age between 15 and 100 years.'\r\n    },\r\n    message_userdata_error_size: {\r\n        de: 'Geben Sie bitte eine Körpergröße zwischen 80 und 225 cm ein.',\r\n        en: 'Please enter a body height between 80 and 225 cm.'\r\n    },\r\n    message_userdata_error_weight: {\r\n        de: 'Geben Sie bitte ein Gewicht zwischen 30 und 250 kg ein.',\r\n        en: 'Please enter a body weight between 30 and 250 kg.'\r\n    },\r\n    modal_settings_title: {\r\n        de: \"Einstellungen\",\r\n        en: \"Settings\"\r\n    },\r\n    modal_settings_label_unit_vitamins: {\r\n        de: \"Einheit für Vitamine/Mineralstoffe\",\r\n        en: \"Unit of vitamins/minerals\"\r\n    },\r\n    modal_settings_label_unit_proteins: {\r\n        de: \"Einheit für Aminosäuren\",\r\n        en: \"Unit of amino acids:\"\r\n    },\r\n    modal_settings_label_provitamins: {\r\n        de: \"Provitamine in Berechnung berücksichtigen\",\r\n        en: \"Include provitamins in calculation:\"\r\n    },\r\n    modal_settings_label_dietaryRequirments: {\r\n        de: \"Anzeige des Tagesbedarfs\",\r\n        en: \"Display of daily requirement\"\r\n    },\r\n    palcat_name_1: {\r\n        de: 'Extrem niedrige Aktivität',\r\n        en: 'Extremely light activity.'\r\n    },\r\n    palcat_desc_1: {\r\n        de: 'Bspw. ans Bett gebundene Menschen.',\r\n        en: 'Such as bed-ridden people.'\r\n    },\r\n    palcat_name_2: {\r\n        de: 'Sehr nierdige Aktivität',\r\n        en: 'Very light activity'\r\n    },\r\n    palcat_desc_2: {\r\n        de: 'Bspw. sehr einfache Büroarbeit in permanent sitzender Haltung, Reisende in einem Flugzeug oder Zug (sitzend).',\r\n        en: 'Such as very light office work (permanently seated), passengers sitting in a train or airplane.'\r\n    },\r\n    palcat_name_3: {\r\n        de: 'Niedrige Aktivität',\r\n        en: 'Light activity'\r\n    },\r\n    palcat_desc_3: {\r\n        de: 'Überwiegend sitzende Tätigkeit, mit Phasen im stehenden Zustand (z.B. Berufsfahrer, Ärzte, Lehrer, Schüler) oder dem Ausführen zusätzlicher leichter Tätigkeiten (z.B. einfache Haushaltstätigkeiten).',\r\n        en: 'Mostly seated activity, with phases of standing activity (e.g., drivers, doctors, students, teachers...) or additional tasks like simple household chores.'\r\n    },\r\n    palcat_name_4: {\r\n        de: 'Mäßige Aktivität',\r\n        en: 'Mediocre Activity'\r\n    },\r\n    palcat_desc_4: {\r\n        de: 'Überwiegende stehende Tätigkeit (z.B. Handwerker, Verkäufer, Kellner, Krankenschwester).',\r\n        en: 'Mostly standing activity (e.g. shop assistants, waiters, craftsmen, nurses).'\r\n    },\r\n    palcat_name_5: {\r\n        de: 'Hohe Aktivität',\r\n        en: 'High activity'\r\n    },\r\n    palcat_desc_5: {\r\n        de: 'Körperlich schwere Arbeit, z.B. Bauarbeiter, Möbelpacker, Sportlehrer.',\r\n        en: 'Hard work, such as construction workers, movers, gym teachers etc.'\r\n    },\r\n    palcat_name_6: {\r\n        de: 'Sehr hohe Aktivität',\r\n        en: 'Very high activity'\r\n    },\r\n    palcat_desc_6: {\r\n        de: 'Körperlich sehr schwere Arbeit, z.B. Bauarbeiter, Möbelpacker, Fitnesstrainer, Bergarbeiter.',\r\n        en: 'Very hard work, such as construction workers, movers, fitness trainers, miners etc.'\r\n    },\r\n    palcat_name_7: {\r\n        de: 'Extrem hohe Aktivität',\r\n        en: 'Extremely high activity'\r\n    },\r\n    palcat_desc_7: {\r\n        de: 'Bspw. (Hoch-) Leistungssportler.',\r\n        en: 'Such as professional athletes.'\r\n    },\r\n    portion_100g: {\r\n        de: '100 Gramm',\r\n        en: '100 Gram'\r\n    },\r\n    portion_individual: {\r\n        de: 'Individuell',\r\n        en: 'Individual'\r\n    },\r\n    ranking_note: {\r\n        de: \"Die angezeigten Ergebnisse sind auf die 100 Lebensmittel mit den höchsten Anteilen begrenzt.\",\r\n        en: \"The results being displayed are limited to the top 100 food items of the selected category.\"\r\n    },\r\n    text_contact_disclaimer1: {\r\n        de: 'Alle Rechte vorbehalten.',\r\n        en: 'All rights reserved.'\r\n    },\r\n    text_contact_disclaimer2: {\r\n        de: 'Food Compare basiert auf freien Datenquellen, die im Quellen-Tab näher beschrieben sind. Die Lebensmitteldaten stammen von Food Data Central, einem Teilprojekt des United States Department of Agriculture. Im Info-Tab des Daten-Panels existiert für jedes Lebensmittel ein Link zu den abgegriffenen Daten.',\r\n        en: 'Food Compare is based upon free data sources specified in the sources tab. Food data used in the project originates from Food Data Central as part of the United States Department of Agriculture. There is a direct link to the original source data of each food element in the info data page of the food data panel.'\r\n    },\r\n    text_contact_disclaimer3: {\r\n        de: 'Die für die Berechnung des Tagesbedarfs verwendeten Einstellungen entstammen der Deutschen Gesellschaft für Ernährung (DGE).',\r\n        en: 'For the computation of daily dietary requirements, data from the German Nutrition Society (DGE) is used.'\r\n    },\r\n    text_contact_form: {\r\n        de: 'Bitte benutzen Sie das Kontaktformular, wenn Sie Fragen oder Feedback zu Food Compare haben.',\r\n        en: 'Please use the contact form below if you have questions of feedback about Food Compare.'\r\n    },\r\n    text_contact_source1: {\r\n        de: 'Quellen:',\r\n        en: 'Sources:',\r\n    },\r\n    text_contact_source2: {\r\n        de: 'Nährwert-Daten:',\r\n        en: 'Nutrient Data:',\r\n    },\r\n    text_contact_source3: {\r\n        de: 'Daten für Tagesbedarf von Vitaminen/Mineralstoffen:',\r\n        en: 'Source for Dietary Requirement of Minerals and Vitamins',\r\n    },\r\n    text_contact_source4: {\r\n        de: 'Berechnung von Grundumsatz und PAL:',\r\n        en: 'Calculation of BMR and PAL:',\r\n    },\r\n    text_empty_fooddatapanel: {\r\n        de: 'Klicken Sie links auf den Plus-Button, um Lebensmittel zum Analysebereich hinzufügen. Es können beliebig viele Lebensmittel hinzugefügt werden. Klicken Sie den Stapel-Button, um ein komplexes Lebensmittel bzw. ein Menü zusammenzustellen, dessen Gesamtwerte dann angezeigt werden.',\r\n        en: 'Click the plus button to add food elements to the analysis panel. You can add as many food elements as you like. Click the stack button if you want to create complex meals to show their total nutrient data.'\r\n    },\r\n    text_empty_fooddatapanel_mobileInfo: {\r\n        de: 'Das Erstellen komplexer Lebensmittel wird auf Mobilgeräten aktuell nicht unterstützt.',\r\n        en: 'Presently, complex menus cannot be created on mobile devices.'\r\n    },\r\n    text_ranking: {\r\n        de: \"Sie können in diesem Bereich Nahrungsmittel nach einem bestimmten Nährstoff, Vitamin oder Mineralstoff sortiert anzeigen lassen. Wählen Sie dazu eine Kategorie aus, eine Gruppe und eine bestimmte Nährstoffangabe (Wert).\",\r\n        en: \"In this section you may display food items sorted by a specific nutrient, vitamin or mineral. Please select a food category, nutrient group and value to display the corresponding ranking chart.\"\r\n    },\r\n    text_setUserdata_p1: {\r\n        de: 'Es werden aktuell Referenzwerte für einen durchschnittlichen Erwachsenen (männlich, 35 Jahre) angezeigt.',\r\n        en: 'You are currently seeing the reference data for an average adult (male, 35 years).'\r\n    },\r\n    text_setUserdata_p2: {\r\n        de: 'Geben Sie, bei Bedarf, in den Einstellungen Ihre eigenen Körperdaten für ein genaueres Ergebnis ein.',\r\n        en: 'For more accurate data, if necessary, please enter your personal body data in the settings menu.'\r\n    },\r\n    text_setUserdata_p3: {\r\n        de: 'Die Referenzwerte beziehen sich auf die eingestellten Nutzerdaten.',\r\n        en: 'The reference data refer to your entered body data.'\r\n    },\r\n    tooltip_category_tree: {\r\n        de: 'Kategoriebaum anzeigen',\r\n        en: 'Show category tree'\r\n    },\r\n    tooltip_filter: {\r\n        de: 'Lebensmittel filtern',\r\n        en: 'Food filter'\r\n    },\r\n    tooltip_filter_edit: {\r\n        de: 'Bedingung bearbeiten',\r\n        en: 'Edit condition'\r\n    },\r\n    tooltip_filter_option_all: {\r\n        de: 'Lebensmittel müssen alle Bedingungen erfüllen',\r\n        en: 'Food elements must fulfill all conditions'\r\n    },\r\n    tooltip_filter_option_any: {\r\n        de: 'Lebensmittel müssen eine der Bedingungen erfüllen',\r\n        en: 'Food elements must fulfill one of the conditions'\r\n    },\r\n    tooltip_filter_remove: {\r\n        de: 'Bedingung entfernen',\r\n        en: 'Remove condition'\r\n    },\r\n    tooltip_icon_charts: {\r\n        de: 'Diagramm-Modus',\r\n        en: 'Chart mode'\r\n    },\r\n    tooltip_icon_close: {\r\n        de: 'Tab schließen',\r\n        en: 'Close tab'\r\n    },\r\n    tooltip_icon_editFoodItem: {\r\n        de: 'Ausgewähltes Lebensmittel bearbeiten',\r\n        en: 'Edit selected food item'\r\n    },\r\n    tooltip_icon_export: {\r\n        de: 'Aktuelle Datenansicht speichern (Export)',\r\n        en: 'Save current data view to file (export)'\r\n    },\r\n    tooltip_icon_import: {\r\n        de: 'Food Compare Daten von Datei importieren',\r\n        en: 'Import Food Compare data from file'\r\n    },\r\n    tooltip_icon_minerals: {\r\n        de: 'Buch der Mineralstoffe öffnen',\r\n        en: 'Open minerals book'\r\n    },\r\n    tooltip_icon_newFoodItem: {\r\n        de: 'Lebensmittel hinzufügen',\r\n        en: 'Add food item'\r\n    },\r\n    tooltip_icon_newFoodItemStack: {\r\n        de: 'Kombinierte Liste an Lebensmitteln hinzufügen (aggregierte Daten)',\r\n        en: 'Add composite list of food items (aggregated data)'\r\n    },\r\n    tooltip_icon_overallView: {\r\n        de: 'Gesamtansicht aller Daten anzeigen',\r\n        en: 'Show overall data view'\r\n    },\r\n    tooltip_icon_proteins: {\r\n        de: 'Buch der essenziellen Aminosäuren öffnen',\r\n        en: 'Open book of essential amino acids'\r\n    },\r\n    tooltip_icon_removeAll: {\r\n        de: 'Alle Tabs schließen',\r\n        en: 'Close all data tabs'\r\n    },\r\n    tooltip_icon_settings: {\r\n        de: 'Einstellungen zu Diagrammen/Tabellendaten öffnen',\r\n        en: 'Open settings menu für chart and table data'\r\n    },\r\n    tooltip_icon_table: {\r\n        de: 'Tabellen-Modus',\r\n        en: 'Table mode'\r\n    },\r\n    tooltip_icon_vitamins: {\r\n        de: 'Vitaminbuch öffnen',\r\n        en: 'Open vitamins book'\r\n    },\r\n    tooltip_source: {\r\n        de: 'Verwendete Quelle: ',\r\n        en: 'Used source: '\r\n    },\r\n    vitamin_book_disclaimer: {\r\n        de: 'Die hier präsentierten Informationen wurden aus freien Quellen wie Wikipedia oder Websites zu Gesundheit und Ernährung zusammengetragen. Es besteht kein Anspruch auf Vollständigkeit oder Korrektheit.',\r\n        en: 'The informationed shown in this booklet originate from free sources such as Wikipedia or health- or nutrition-related websites. There is no claim to completeness or correctness.'\r\n    },\r\n}","export const color_yellow = \"rgba(255, 255, 153, 1.0)\";   // Default for Lipids\r\nexport const color_green = \"rgba(132, 225, 132, 1.0)\";   // Default for Carbs\r\n\r\nexport const color_green_light = \"rgba(196, 236, 193, 1.0)\";   // Default for Sugar (as part of carbs)\r\nexport const color_red = \"rgba(255, 204, 204, 1.0)\";   // Default for proteins\r\nexport const color_blue = \"rgba(133, 193, 233, 1.0)\";   // Default for Water\r\nexport const color_purple = \"rgba(213, 205, 237, 1.0)\"; // Default color for a blue line\r\n\r\nexport const color_chart_fawn = \"rgba(235, 232, 171, 1.0)\";\t\t// brown\r\n\r\nexport const color_gray = \"rgba(235, 235, 235, 1.0)\"; // Default color for a blue line\r\nexport const color_line_blue = \"rgba(0, 107, 215, 1.0)\"; // Default color for a blue line\r\nexport const color_line_red = \"rgba(255, 102, 102, 1.0)\"; // Default color for a red line\r\n\r\nexport const color_chart_green_1 = \"rgba(39, 177, 96)\";\t\t// Dark green\r\nexport const color_chart_green_2 = \"rgba(137, 238, 137)\";\t// Normal green\r\nexport const color_chart_green_3 = \"rgba(222, 245, 222)\";\t\t// Light green\r\n\r\nexport const color_chart_yellow_0 = \"rgba(190, 145, 0)\";\r\nexport const color_chart_yellow_1 = \"rgba(212, 172, 13)\";\t\t// Dark yellow\r\nexport const color_chart_yellow_2 = \"rgba(244, 208, 63)\";\t// Normal yellow\r\nexport const color_chart_yellow_3 = \"rgba(249, 231, 159)\";\t\t// Light yellow\r\nexport const color_chart_yellow_4 = \"rgba(255, 202, 40)\";\r\n\r\nexport const color_chart_yellow_green_1 =\"rgba(174, 213, 129)\"\r\nexport const color_chart_yellow_green_2 =\"rgba(76, 175, 80)\"\r\nexport const color_chart_yellow_green_3 =\"rgba(124, 179, 66)\"\r\n\r\nexport const color_chart_orange = \"rgba(230, 126, 34)\";\r\nexport const color_x = \"rgba(51, 204, 204)\"\r\n\r\nexport const color_chart_black = \"rgba(0, 0, 0)\";\r\n\r\nexport const color_chart_misc = color_gray;\r\n\r\n// Chart sizes:\r\n\r\nexport const default_chart_height = 380;\r\nexport const default_chart_height_m = 190;\r\n\r\nexport const basedata_piechart_width = 300;\r\nexport const basedata_piechart_width_m = 200;\r\n\r\nexport const basedata_barchart_width = 380;\r\nexport const basedata_barchart_width_m = 253;\r\n\r\nexport const max_portion = 5000;\r\n\r\nexport const color_water = color_blue;\r\nexport const color_lipids = color_yellow;\r\nexport const color_carbs = color_green;\r\nexport const color_carbs_sugar = color_green_light;\r\nexport const color_carbs_dietaryFibers = color_chart_fawn;\r\nexport const color_ash = color_gray;\r\nexport const color_caffeine = color_chart_yellow_0;\r\n\r\nexport const color_carbs_mono_glucose = color_chart_yellow_green_1\r\nexport const color_carbs_mono_fructose = color_chart_yellow_green_2\r\nexport const color_carbs_mono_galactose = color_chart_yellow_green_3\r\n\r\nexport const color_carbs_di_sucrose = color_chart_yellow_4\r\nexport const color_carbs_di_lactose = color_chart_yellow_3\r\nexport const color_carbs_di_maltose = color_chart_yellow_1\r\n\r\nexport const color_carbs_starch = color_chart_orange\r\n\r\nexport const color_alcohol = color_x;\r\n\r\nexport const color_proteins = color_red;\r\n\r\nexport const color_lipids_saturated = color_chart_yellow_4;\r\nexport const color_lipids_unsaturated_mono = color_chart_yellow_green_1;\r\nexport const color_lipids_unsaturated_poly = color_chart_yellow_green_2;\r\n\r\nexport const color_lipids_omega3 = color_chart_green_1;\r\nexport const color_lipids_omega6 = color_chart_yellow_2;\r\n\r\nexport const color_lipids_misc = color_gray;\r\n\r\nexport const direct_compare_color1 = \"#ffe085\"\r\nexport const direct_compare_color2 = \"#d9ecff\"","/**\r\n * Returns a default-styled configuration for a bar chart.\r\n *\r\n * title: The charts title.\r\n * unit: The unit to use for the axis title and tooltip.\r\n * minYValue: Optional, a pre-defined maxYValue for the Y axis (e.g. 100)\r\n */\r\n\r\nexport function getBarChartOptions(title: string, unit: string, maxYValue?: number | undefined) {\r\n    let yAxis: any = {\r\n        title: {\r\n            display: true,\r\n            text: unit\r\n        }\r\n    }\r\n\r\n    if (maxYValue) {\r\n        yAxis = {...yAxis, min: 0, max: maxYValue}\r\n    }\r\n    const scalesObject = {y: yAxis}\r\n    return getOptions(title, unit, scalesObject);\r\n}\r\n\r\n\r\nexport function getBarChartOptionsForRanking(title: string, unit: string) {\r\n    const scales = getScalesForRankingChart();\r\n    return getOptions(title, unit, scales);\r\n}\r\n\r\nexport function getBarChartOptionsForJuxtaposition(title: string, unit: string) {\r\n    const scales = getScalesForRankingChart();\r\n    return getOptions(title, unit, scales);\r\n}\r\n\r\n\r\n\r\nexport function getPieChartOptions(title: string, unit: string) {\r\n    return getOptions(title, unit);\r\n}\r\n\r\n\r\nfunction getOptions(title: string, unit: string, scalesObject?: any | undefined) {\r\n    const titleObj = title ? {display: true, text: title, fontSize: 18} : null;\r\n\r\n    let options: any = {\r\n        maintainAspectRatio: false,\r\n        responsive: true,\r\n        plugins: {\r\n            title: titleObj,\r\n            tooltip: getToolTips(unit),\r\n            legend: {\r\n                display: false\r\n            },\r\n        }\r\n    }\r\n\r\n    if (scalesObject !== undefined) {\r\n        options = {...options, scales: scalesObject}\r\n    }\r\n\r\n    return options;\r\n}\r\n\r\nfunction getToolTips(unit: string) {\r\n    return {\r\n        enabled: true,\r\n        maintainAspectRatio: true,\r\n        callbacks: {\r\n            label: tooltipItem => `${tooltipItem.label}: ${tooltipItem.formattedValue} ${unit}`\r\n        }\r\n    };\r\n}\r\n\r\n\r\nfunction getScalesForRankingChart() {\r\n    return {\r\n        x: {\r\n            ticks: {\r\n                autoSkip: false\r\n            },\r\n        }\r\n    };\r\n}","import React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE} from \"../../config/Constants\";\r\nimport {Form} from 'react-bootstrap';\r\nimport {PieChartConfigurationProps} from \"../../types/livedata/ChartPropsData\";\r\n\r\nexport function PieChartConfigurationForm(props: PieChartConfigurationProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <form className=\"form-inline form-group\">\r\n                    <Form.Label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_charttype[languageContext.language]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_charttype_pie[languageContext.language]}\r\n                                type=\"radio\"\r\n                                value={CHART_TYPE_PIE}\r\n                                checked={props.chartType === CHART_TYPE_PIE}\r\n                                onChange={props.handleRadioButtonClick}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton form-horizontal-separation\"\r\n                                label={applicationStrings.label_charttype_bar[languageContext.language]}\r\n                                type=\"radio\"\r\n                                value={CHART_TYPE_BAR}\r\n                                checked={props.chartType === CHART_TYPE_BAR}\r\n                                onChange={props.handleRadioButtonClick}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_chartoption_showLegend[languageContext.language]}\r\n                                defaultChecked={props.showLegend}\r\n                                disabled={props.chartType === CHART_TYPE_BAR}\r\n                                onClick={props.handleLegendCheckboxClick}>\r\n                    </Form.Check>\r\n                    {props.detailsCheckboxAvailable &&\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_chartoption_showDetails[languageContext.language]}\r\n                                defaultChecked={props.showDetails}\r\n                                onClick={props.handleDetailsCheckboxClick}>\r\n                    </Form.Check>\r\n                    }\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {useEffect, useState} from \"react\";\r\nimport {smallFormsScreenSize} from \"../config/ApplicationSetting\";\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\nexport interface WindowDimension {\r\n    width: number\r\n    height: number\r\n}\r\n\r\nfunction getCurrentWindowDimension() {\r\n    return {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight\r\n    }\r\n}\r\n\r\nexport function useWindowDimension() {\r\n    const [windowDimension, setWindowDimension] = useState(getCurrentWindowDimension())\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", () => setWindowDimension(getCurrentWindowDimension))\r\n        return () => window.removeEventListener(\"resize\", () => setWindowDimension(getCurrentWindowDimension))\r\n    }, [])\r\n\r\n    return windowDimension\r\n}\r\n\r\n\r\nexport function isSmallScreen(windowDimension: WindowDimension) {\r\n    return windowDimension.width < smallFormsScreenSize.width || windowDimension.height < smallFormsScreenSize.height\r\n}\r\n\r\nexport function isNarrowScreen(windowDimension: WindowDimension) {\r\n    return windowDimension.width < smallFormsScreenSize.width\r\n}\r\n\r\nexport function isMobileDevice() {\r\n    return isMobile\r\n}","import React, {ReactElement} from \"react\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\ninterface CustomLegendProps {\r\n    legendData: Array<any>\r\n}\r\n\r\nexport function CustomLegend(props: CustomLegendProps) {\r\n\r\n    const renderLegend = () => {\r\n        let legend: Array<ReactElement> = [];\r\n        const mobile = isMobileDevice()\r\n\r\n        for (let i = 0; i < props.legendData.length; i++) {\r\n            const element = props.legendData[i];\r\n            const indent = element.indent > 0 ? \"2ch\" : \"0ch\";\r\n            const id = `legendrow ${i}`;\r\n            const legendItemLabelClass = mobile ? \"legend-item-label\" : \"legend-item-label\"\r\n\r\n            legend.push(\r\n                <div key={id} className=\"row\" style={{marginLeft: indent}}>\r\n                    <div className={\"d-flex align-items-center\"}>\r\n                        <div className=\"legend-item\" style={{background: element.color}}></div>\r\n                        <span className={legendItemLabelClass}>{element.item}</span>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return legend;\r\n    }\r\n\r\n\r\n    return (\r\n        <div style={{borderLeft: \"1px solid #aaaaaa\"}}>\r\n            <div>\r\n                {renderLegend()}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n\r\n}","import FoodItem, {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\n\r\nexport function getSourceName(sourceId: number) {\r\n    switch (sourceId) {\r\n        case 0:\r\n            return \"SR Legacy\"\r\n        case 1:\r\n            return \"FNDDS\"\r\n        default:\r\n            return \"unknown\"\r\n    }\r\n}\r\n\r\nexport function getNutrientData(selectedFoodItem: SelectedFoodItem): NutrientData {\r\n    return getNutrientDataForFoodItem(selectedFoodItem.foodItem, selectedFoodItem.selectedSource,\r\n        selectedFoodItem.supplementData, selectedFoodItem.combineData)\r\n}\r\n\r\nexport function getNutrientDataForFoodItem(foodItem: FoodItem, sourceToUse?: number, supplementData?: boolean,\r\n                                           combineData?: boolean): NutrientData {\r\n    if (sourceToUse === null || sourceToUse === undefined || foodItem.nutrientDataList.length === 1) {\r\n        return foodItem.nutrientDataList[0]\r\n    } else {\r\n        const shouldSupplementData = supplementData && canSupplementData(foodItem.nutrientDataList)\r\n        const nutrientData = foodItem.nutrientDataList.find(\r\n            nutrientDataObject => nutrientDataObject.source.id === sourceToUse\r\n        )\r\n        if (nutrientData) {\r\n            if(shouldSupplementData || combineData) {\r\n                const complement = foodItem.nutrientDataList.find(\r\n                    nutrientDataObject => nutrientDataObject.source.id !== sourceToUse\r\n                )\r\n                if(complement) {\r\n                    if(supplementData && !combineData) {\r\n                        return supplementNutrientData(nutrientData, complement)\r\n                    }\r\n                    if(combineData) {\r\n                        return combineNutrientData(nutrientData, complement)\r\n                    }\r\n                }\r\n            }\r\n            return nutrientData\r\n        } else {\r\n            return foodItem.nutrientDataList[0]\r\n        }\r\n    }\r\n}\r\n\r\nexport function supplementNutrientData(selectedNutrientData: NutrientData, complementeNutrientData: NutrientData): NutrientData {\r\n    const supplementedBaseData = supplementCategory(selectedNutrientData.baseData, complementeNutrientData.baseData)\r\n    const supplementedVitaminData = supplementCategory(selectedNutrientData.vitaminData, complementeNutrientData.vitaminData)\r\n    const supplementedMineralData = supplementCategory(selectedNutrientData.mineralData, complementeNutrientData.mineralData)\r\n    const supplementedCarbsData = supplementCategory(selectedNutrientData.carbohydrateData, complementeNutrientData.carbohydrateData)\r\n    const supplementedProteinData = supplementCategory(selectedNutrientData.proteinData, complementeNutrientData.proteinData)\r\n\r\n    const supplementedOmegaData = supplementCategory(selectedNutrientData.lipidData.omegaData, complementeNutrientData.lipidData.omegaData)\r\n    let supplementedLipidData = supplementCategory(selectedNutrientData.lipidData, complementeNutrientData.lipidData)\r\n    supplementedLipidData.omegaData = supplementedOmegaData\r\n\r\n    return {\r\n        source: selectedNutrientData.source,\r\n        sourceItemId: selectedNutrientData.sourceItemId,\r\n        baseData: supplementedBaseData,\r\n        vitaminData: supplementedVitaminData,\r\n        mineralData: supplementedMineralData,\r\n        carbohydrateData: supplementedCarbsData,\r\n        proteinData: supplementedProteinData,\r\n        lipidData: supplementedLipidData\r\n    }\r\n}\r\n\r\n\r\nfunction supplementCategory(nutrientCategory1: any, nutrientCategory2: any): any {\r\n    if(!nutrientCategory2) {\r\n        return nutrientCategory1\r\n    }\r\n\r\n    // Clone to prevent overwriting the nutrient database elements!\r\n    const newDataObject = {...nutrientCategory1}\r\n\r\n    const keysComplement = Object.keys(nutrientCategory2)\r\n    keysComplement.forEach(key => {\r\n        if(newDataObject[key] === null) {\r\n            const objectHasChildren = nutrientCategory2[key] && Object.keys(nutrientCategory2[key]).length > 0\r\n            // Add value from source 2 to source 1 if it is not a sub-object (like Omega object on Lipids object):\r\n            if(nutrientCategory2[key] !== null && !objectHasChildren) {\r\n                newDataObject[key] = nutrientCategory2[key]\r\n            }\r\n        }\r\n    })\r\n\r\n    return newDataObject\r\n}\r\n\r\n\r\nexport function combineNutrientData(selectedNutrientData: NutrientData, complementeNutrientData: NutrientData): NutrientData {\r\n    const combinedBaseData = combineCategory(selectedNutrientData.baseData, complementeNutrientData.baseData)\r\n    const combinedVitaminData = combineCategory(selectedNutrientData.vitaminData, complementeNutrientData.vitaminData)\r\n    const combinedMineralData = combineCategory(selectedNutrientData.mineralData, complementeNutrientData.mineralData)\r\n    const combinedCarbsData = combineCategory(selectedNutrientData.carbohydrateData, complementeNutrientData.carbohydrateData)\r\n    const combinedProteinData = combineCategory(selectedNutrientData.proteinData, complementeNutrientData.proteinData)\r\n\r\n    const combinedOmegaData = combineCategory(selectedNutrientData.lipidData.omegaData, complementeNutrientData.lipidData.omegaData)\r\n    let combinedLipidData = combineCategory(selectedNutrientData.lipidData, complementeNutrientData.lipidData)\r\n    combinedLipidData.omegaData = combinedOmegaData\r\n\r\n    return {\r\n        source: selectedNutrientData.source,\r\n        sourceItemId: selectedNutrientData.sourceItemId,\r\n        baseData: combinedBaseData,\r\n        vitaminData: combinedVitaminData,\r\n        mineralData: combinedMineralData,\r\n        carbohydrateData: combinedCarbsData,\r\n        proteinData: combinedProteinData,\r\n        lipidData: combinedLipidData\r\n    }\r\n}\r\n\r\n\r\nfunction combineCategory(nutrientCategory1: any, nutrientCategory2: any): any {\r\n    if(!nutrientCategory1 && nutrientCategory2) {\r\n        return nutrientCategory2\r\n    } else if(nutrientCategory1 && !nutrientCategory2) {\r\n        return nutrientCategory1\r\n    } else if(!nutrientCategory1 && !nutrientCategory2) {\r\n        return null\r\n    }\r\n\r\n    const keys1: Array<string> = Object.keys(nutrientCategory1)\r\n    const keys2: Array<string> = Object.keys(nutrientCategory2)\r\n\r\n    // @ts-ignore\r\n    const allKeys = [...new Set<string>([...keys1, ...keys2])]\r\n    let finalObject = {}\r\n\r\n    allKeys.forEach(key => {\r\n        const value1 = nutrientCategory1[key] !== null\r\n            ? nutrientCategory1[key]\r\n            : null\r\n\r\n        const value2 = nutrientCategory2[key] !== null\r\n            ? nutrientCategory2[key]\r\n            : null\r\n\r\n        let finalValue\r\n\r\n        if(value1 !== null && value2 === null) {\r\n            finalValue = value1\r\n        } else if(value1 === null && value2 !== null) {\r\n            finalValue = value2\r\n        } else if(value1 === null && value2 === null) {\r\n            finalValue = null\r\n        } else {\r\n            finalValue = (value1 + value2) * 0.5\r\n        }\r\n\r\n        finalObject[key] = finalValue\r\n    })\r\n\r\n    return finalObject\r\n}\r\n\r\n/**\r\n * Determines whether supplementing data is possible. The basic criterion for supplementing missing values are similar base data\r\n * in the two data sources. If the deviation is too high, supplemention SHOULD not be carried out.\r\n * @param nutrientDataList A list of two nutrient data objects\r\n */\r\nexport function canSupplementData(nutrientDataList: Array<NutrientData>): boolean {\r\n    if(nutrientDataList.length < 2) {\r\n        return false\r\n    }\r\n\r\n    const energy1 = nutrientDataList[0].baseData.energy\r\n    const energy2 = nutrientDataList[1].baseData.energy\r\n\r\n    if(energy1 === null || energy2 === null) {\r\n        return false\r\n    } else if(Math.round(energy1) === Math.round(energy2)) {\r\n        return true\r\n    } else {\r\n        const energyDiff = Math.abs(energy2 - energy1)\r\n        if(energyDiff > 30) {\r\n            return false\r\n        }\r\n    }\r\n\r\n    return true;\r\n}","/**\r\n * Checks whether a value is a positive integer value.\r\n */\r\nexport function isPositiveIntegerValue(value) {\r\n    const number = Number(value);\r\n    return Number.isInteger(number) && number > 0;\r\n}\r\n\r\n/**\r\n * Checks whether a value is a positive integer value or 0.\r\n */\r\nexport function isPositiveIntegerValueOrZero(value) {\r\n    const number = Number(value);\r\n    return Number.isInteger(number) && number >= 0;\r\n}\r\n\r\n/**\r\n * Rounds a value between 0 and 100 automatically to a reasonable number of digits:\r\n *\r\n * - Generally the value is rounded to one digit.\r\n * - Between 1 and 10, the value is rounded to two digits.\r\n * - Between 0.1 and 1, the value is rounded to three digits.\r\n * - Between 0.01 and 0.1, the value is rounded to four digits.\r\n * - Otherwise it is rounded to five digits.\r\n *\r\n */\r\nexport function autoRound(value) {\r\n    let roundFactor: number;   // Default round factor\r\n\r\n    if(value >= 100) {\r\n        roundFactor = 0;\r\n    } else if(value < 100 && value >= 10) {\r\n        roundFactor = 1;\r\n    } else if(value < 10 && value >= 1) {\r\n        roundFactor = 2;\r\n    } else if(value < 1 && value >= 0.1) {\r\n        roundFactor = 3;\r\n    } else if(value < 0.1 && value >= 0.01) {\r\n        roundFactor = 4;\r\n    } else {\r\n        roundFactor = 5;\r\n    }\r\n\r\n    return round(value, roundFactor);\r\n}\r\n\r\n/**\r\n * Simple round function to round a number to a specific number of digits.\r\n */\r\nexport function round(value, digits) {\r\n    const roundFactor = Math.pow(10, digits);\r\n    return (Math.round(value * roundFactor)) / roundFactor;\r\n}\r\n\r\n/**\r\n * Rounds any given value to the next sensible round or half-round value. Between a range of 10 and 100, everything\r\n * below 30 will be rounded to the next odden number, everthing above 30 to the next 5-round number.\r\n * @param value The value to round\r\n *\r\n * Examples:\r\n * 22.5 -> 24\r\n * 61.3 -> 65\r\n *\r\n * 0.00232 -> 0.024\r\n * 1226 -> 1400\r\n */\r\nexport function roundToNextValue(value: number): number {\r\n    const multiplier = 10000000000\r\n    const nextEvenNumber = (number) => 2 * Math.ceil(number / 2)\r\n    const nextNumberFive = (number) => 5 * Math.ceil(number / 5)\r\n\r\n    // Multiply vylue with a high value to prevent logarithmiting illegal values below 1\r\n    const ordinaryValue = value * multiplier\r\n    const numberOfDigits = Math.ceil(Math.log10(ordinaryValue))\r\n    const standardValue = (ordinaryValue / Math.pow(10, numberOfDigits)) * 100\r\n\r\n    const nextRoundValue = standardValue < 30 ? nextEvenNumber(standardValue) : nextNumberFive(standardValue)\r\n    return nextRoundValue / Math.pow(10, 12-numberOfDigits)\r\n}\r\n\r\n/**\r\n * Returns a number of fixed length with leading zeros.\r\n */\r\nexport function getNumberOfFixedLength(number: number, digits: number): string {\r\n\tlet numberString = `${number}`\r\n\twhile(numberString.length < digits) {\r\n\t\tnumberString = `0${numberString}`\r\n\t}\r\n\treturn numberString\r\n}\r\n\r\n\r\nexport function convertBooleanToDigit(value: boolean) {\r\n\treturn value ? 1 : 0\r\n}\r\n\r\nexport function convertStringToBoolean(value: string) {\r\n\treturn value === \"1\"\r\n}\r\n\r\nexport function calculateMedian(values: Array<number>) {\r\n    const sorted = values.sort((a, b) => b-a)\r\n    const centerValue = sorted.length / 2\r\n    return values[Math.floor(centerValue)]\r\n}\r\n","import {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {autoRound} from \"../calculation/MathService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as ChartConfig from \"../../config/ChartConfig\";\r\nimport {ChartDisplayData, LegendData} from \"../../types/livedata/ChartDisplayData\";\r\n\r\nexport function getTotalChartData(nutrientData: NutrientData, language: string): ChartDisplayData {\r\n    const alcoholValuePercentage = nutrientData.baseData.alcohol !== null\r\n        ? autoRound(nutrientData.baseData.alcohol)\r\n        : null\r\n\r\n    // Caffeine unit is milligram and needs to be converted to gram to match the other nutrient values\r\n    const caffeine = nutrientData.baseData.caffeine ? nutrientData.baseData.caffeine / 1000 : null;\r\n\r\n    const data = [autoRound(nutrientData.baseData.water),\r\n        autoRound(nutrientData.baseData.carbohydrates),\r\n        autoRound(nutrientData.baseData.lipids),\r\n        autoRound(nutrientData.baseData.proteins),\r\n    ]\r\n\r\n    const labels: string[] = [applicationStrings.label_nutrient_water[language],\r\n        applicationStrings.label_nutrient_carbohydrates_short[language],\r\n        applicationStrings.label_nutrient_lipids[language],\r\n        applicationStrings.label_nutrient_proteins[language],\r\n    ]\r\n\r\n    const colors = [\r\n        ChartConfig.color_water,\r\n        ChartConfig.color_carbs,\r\n        ChartConfig.color_lipids,\r\n        ChartConfig.color_proteins,\r\n    ]\r\n\r\n    if (alcoholValuePercentage !== null) {\r\n        data.push(alcoholValuePercentage)\r\n        labels.push(applicationStrings.label_nutrient_alcohol[language])\r\n        colors.push(ChartConfig.color_alcohol)\r\n    }\r\n\r\n    if (caffeine !== null && caffeine > 0) {\r\n        data.push(autoRound(caffeine))\r\n        labels.push(applicationStrings.label_nutrient_caffeine[language])\r\n        colors.push(ChartConfig.color_caffeine)\r\n    }\r\n\r\n    // Add ash data at the end of the dataset (needed for bar chart display).\r\n    labels.push(applicationStrings.label_nutrient_ash_short[language]);\r\n    data.push(autoRound(nutrientData.baseData.ash));\r\n    colors.push(ChartConfig.color_ash);\r\n\r\n    return {\r\n        labels: labels,\r\n        values: data,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getNutrientChartData(nutrientData: NutrientData, language: string, showDetails: boolean): ChartDisplayData {\r\n    const totalValue = nutrientData.baseData.carbohydrates + nutrientData.baseData.lipids\r\n        + nutrientData.baseData.proteins + (nutrientData.baseData.alcohol ?? 0) + (nutrientData.baseData.caffeine ?? 0)\r\n\r\n    let sugar = nutrientData.carbohydrateData?.sugar ? nutrientData.carbohydrateData.sugar : 0\r\n    let dietaryFibers = nutrientData.baseData.dietaryFibers ? nutrientData.baseData.dietaryFibers : 0\r\n\r\n    // NOTE: Sometimes the sugar or dietary fibers value is above the carbs value, which is impossible (> 100 %)\r\n    if (sugar > totalValue) {\r\n        sugar = totalValue\r\n    }\r\n\r\n    if (dietaryFibers > totalValue) {\r\n        dietaryFibers = totalValue\r\n    }\r\n    if (sugar + dietaryFibers > totalValue) {  // Special case, where sug + fibers are above the 100 %\r\n        sugar = (sugar / (sugar + dietaryFibers)) * totalValue\r\n        dietaryFibers = (dietaryFibers / (sugar + dietaryFibers)) * totalValue\r\n    }\r\n\r\n    let carbValue = showDetails ? (nutrientData.baseData.carbohydrates - sugar - dietaryFibers)\r\n        : nutrientData.baseData.carbohydrates;\r\n\r\n    if (carbValue < 0) {\r\n        carbValue = 0\r\n    }\r\n\r\n    const carbValuePerc = autoRound(carbValue / totalValue * 100)\r\n    const sugarValuePerc = autoRound(sugar / totalValue * 100)\r\n    const dietaryFibersPerc = autoRound(dietaryFibers / totalValue * 100)\r\n    const lipidValuePerc = autoRound(nutrientData.baseData.lipids / totalValue * 100)\r\n    const proteinsValuePerc = autoRound(nutrientData.baseData.proteins / totalValue * 100)\r\n    const alcoholValuePerc = nutrientData.baseData.alcohol !== null\r\n        ? autoRound(nutrientData.baseData.alcohol / totalValue * 100)\r\n        : null\r\n\r\n    const caffeinePerc = nutrientData.baseData.caffeine !== null\r\n        ? autoRound((nutrientData.baseData.caffeine / 1000) / totalValue * 100)\r\n        : null\r\n\r\n    const labels = [\r\n        applicationStrings.label_nutrient_carbohydrates_short[language],\r\n        applicationStrings.label_nutrient_lipids[language],\r\n        applicationStrings.label_nutrient_proteins[language]\r\n    ]\r\n\r\n    const values = [carbValuePerc, lipidValuePerc, proteinsValuePerc];\r\n\r\n    const colors = [\r\n        ChartConfig.color_carbs,\r\n        ChartConfig.color_lipids,\r\n        ChartConfig.color_proteins\r\n    ];\r\n\r\n    if (alcoholValuePerc !== null) {\r\n        labels.push(applicationStrings.label_nutrient_alcohol[language])\r\n        values.push(alcoholValuePerc)\r\n        colors.push(ChartConfig.color_alcohol)\r\n    }\r\n\r\n    if (caffeinePerc !== null && caffeinePerc > 0) {\r\n        labels.push(applicationStrings.label_nutrient_caffeine[language])\r\n        values.push(caffeinePerc)\r\n        colors.push(ChartConfig.color_caffeine)\r\n    }\r\n\r\n    if (showDetails) {\r\n        if (sugarValuePerc > 0) {\r\n            labels.push(applicationStrings.label_nutrient_sugar[language]);\r\n            values.push(sugarValuePerc);\r\n            colors.push(ChartConfig.color_carbs_sugar);\r\n        }\r\n        if (dietaryFibersPerc > 0) {\r\n            labels.push(applicationStrings.label_nutrient_dietaryFibers_short[language]);\r\n            values.push(dietaryFibersPerc);\r\n            colors.push(ChartConfig.color_carbs_dietaryFibers);\r\n        }\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values,\r\n        colors: colors\r\n    }\r\n}\r\n\r\nexport function getBaseChartLegendData(lang: string, showDetails: boolean): LegendData[] {\r\n    const legendData: LegendData[] = [\r\n        {\r\n            item: applicationStrings.label_nutrient_water[lang],\r\n            color: ChartConfig.color_water,\r\n            separateNextElement: true\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids[lang],\r\n            color: ChartConfig.color_lipids\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_proteins[lang],\r\n            color: ChartConfig.color_proteins\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_carbohydrates[lang],\r\n            color: ChartConfig.color_carbs,\r\n        }\r\n    ];\r\n\r\n    if (showDetails) {\r\n        legendData.push(\r\n            {\r\n                item: applicationStrings.label_nutrient_sugar[lang],\r\n                color: ChartConfig.color_carbs_sugar,\r\n                indent: 1,\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_dietaryFibers[lang],\r\n                color: ChartConfig.color_carbs_dietaryFibers,\r\n                indent: 1,\r\n                separateNextElement: true\r\n            }\r\n        );\r\n    }\r\n\r\n    legendData.push({\r\n        item: applicationStrings.label_nutrient_alcohol[lang],\r\n        color: ChartConfig.color_alcohol,\r\n    })\r\n\r\n    legendData.push({\r\n        item: applicationStrings.label_nutrient_caffeine[lang],\r\n        color: ChartConfig.color_caffeine,\r\n    })\r\n\r\n    legendData.push({\r\n        item: applicationStrings.label_nutrient_ash[lang],\r\n        color: ChartConfig.color_ash\r\n    })\r\n\r\n    return legendData;\r\n}\r\n\r\n\r\nexport function showEnergyChartLegend(lang: string): LegendData[] {\r\n    const legendData: LegendData[] = [\r\n        {\r\n            item: applicationStrings.label_nutrient_carbohydrates[lang],\r\n            color: ChartConfig.color_carbs,\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_dietaryFibers[lang],\r\n            color: ChartConfig.color_carbs_dietaryFibers,\r\n            indent: 1\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids[lang],\r\n            color: ChartConfig.color_lipids\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_proteins[lang],\r\n            color: ChartConfig.color_proteins\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_alcohol[lang],\r\n            color: ChartConfig.color_alcohol\r\n        },\r\n    ];\r\n\r\n    return legendData\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE} from \"../../../config/Constants\";\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BaseDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {ChartDisplayData} from \"../../../types/livedata/ChartDisplayData\";\r\nimport {getBaseChartLegendData, getNutrientChartData, getTotalChartData} from \"../../../service/chartdata/BaseChartDataService\";\r\n\r\nexport default function BaseDataChart(props: BaseDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    useWindowDimension();\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.baseChartConfig\r\n            : initialChartConfigData.baseChartConfig\r\n\r\n    const showDetailsProp = chartConfig.showDetails !== undefined\r\n        ? chartConfig.showDetails\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.baseChartConfig.showDetails\r\n            : initialChartConfigData.baseChartConfig.showDetails\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [showDetails, setShowDetails] = useState<boolean>(showDetailsProp)\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setShowDetails(showDetailsProp)\r\n        }\r\n\r\n        updateChartConfig()\r\n    }, [chartType, showDetails, showLegend, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData\r\n            if (chartType !== currentConfig.baseChartConfig.chartType\r\n                || showDetails !== currentConfig.baseChartConfig.showDetails\r\n                || showLegend !== currentConfig.baseChartConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...currentConfig,\r\n                    baseChartConfig: {\r\n                        chartType: chartType,\r\n                        showDetails: showDetails,\r\n                        showLegend: showLegend\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const createTotalChartData = () => {\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const chartDisplayData: ChartDisplayData = getTotalChartData(nutrientData, lang)\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_chart_totalComposition[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n    const createNutrientChartData = () => {\r\n        const category = props.selectedFoodItem.foodClass?.category\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const chartDisplayData: ChartDisplayData = getNutrientChartData(nutrientData, lang, showDetails)\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_chart_nutrientComposition[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value\r\n        setChartType(value)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const handleLegendCheckboxClick = () => {\r\n        setShowLegend(!showLegend)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const handleDetailsCheckboxClick = () => {\r\n        setShowDetails(!showDetails)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const legendAllowed = showLegend && chartType === CHART_TYPE_PIE\r\n\r\n    const getOptions = (title) => {\r\n        return chartType === CHART_TYPE_BAR ? getBarChartOptions(title, \"%\") : getPieChartOptions(title, \"%\")\r\n    }\r\n\r\n\r\n    const renderSubChart = (title: string, chartData: any) => {\r\n        if (!chartData) {\r\n            return <div/>\r\n        }\r\n\r\n        const chartClass = props.directCompareUse ? \"chart-area-dc\" : \"chart-area\"\r\n\r\n        return (\r\n            <div className={chartClass}>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie\r\n                    data={chartData}\r\n                    key={'chart base ' + title}\r\n                    width={ChartConfig.basedata_piechart_width}\r\n                    options={getOptions(title)}/>\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar\r\n                    data={chartData}\r\n                    key={'chart base ' + title}\r\n                    width={ChartConfig.basedata_barchart_width}\r\n                    options={getOptions(title)}/>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const totalChartData = createTotalChartData();\r\n    const nutrientChartData = createNutrientChartData();\r\n\r\n    const totalChartDataTitle = applicationStrings.label_chart_totalComposition[lang]\r\n    const nutrientChartDataTitle = applicationStrings.label_chart_nutrientComposition[lang]\r\n\r\n    const justifyContent = props.directCompareUse ? \"center\" : \"left\"\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"d-flex text-align-center\" style={{justifyContent: justifyContent}}>\r\n                <div style={{width: \"100%\"}}>\r\n                    <div className=\"row\"\r\n                         key={\"base chart container\"}>\r\n                        <div className=\"col-6\">\r\n                            <div>{renderSubChart(totalChartDataTitle, totalChartData)}</div>\r\n                        </div>\r\n                        <div className=\"col-6\" >\r\n                            <div>{renderSubChart(nutrientChartDataTitle, nutrientChartData)}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {legendAllowed &&\r\n                <div className=\"d-inline-block float-right legend-container\">\r\n                    <CustomLegend legendData={getBaseChartLegendData(lang, showDetails)}/>\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareUse &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           showDetails={showDetails}\r\n                                           detailsCheckboxAvailable={true}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckboxClick}\r\n                                           handleDetailsCheckboxClick={handleDetailsCheckboxClick}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","export const PAL_CATEGORY_1 = 1.2;\r\nexport const PAL_CATEGORY_2 = 1.4;\r\nexport const PAL_CATEGORY_3 = 1.6;\r\nexport const PAL_CATEGORY_4 = 1.8;\r\nexport const PAL_CATEGORY_5 = 2.1;\r\nexport const PAL_CATEGORY_6 = 2.4;\r\nexport const PAL_CATEGORY_7 = 2.8;","import {SEX_MALE} from '../../config/Constants';\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as EnergyConstants from '../../config/EnergyConstants'\r\nimport {PalCategory} from \"../../types/livedata/PalCategory\";\r\nimport {BaseData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {EnergyData} from \"../../types/livedata/EnergyData\";\r\nimport {round} from \"./MathService\";\r\n\r\n\r\n/**\r\n * Creates a list of PAL categories with name and value for the user settings form.\r\n */\r\nexport function getPalCategories(language: string): Array<PalCategory> {\r\n    return [\r\n        {label: createPalCategoryName(language, 1), value: EnergyConstants.PAL_CATEGORY_1},\r\n        {label: createPalCategoryName(language, 2), value: EnergyConstants.PAL_CATEGORY_2},\r\n        {label: createPalCategoryName(language, 3), value: EnergyConstants.PAL_CATEGORY_3},\r\n        {label: createPalCategoryName(language, 4), value: EnergyConstants.PAL_CATEGORY_4},\r\n        {label: createPalCategoryName(language, 5), value: EnergyConstants.PAL_CATEGORY_5},\r\n        {label: createPalCategoryName(language, 6), value: EnergyConstants.PAL_CATEGORY_6},\r\n        {label: createPalCategoryName(language, 7), value: EnergyConstants.PAL_CATEGORY_7},\r\n    ];\r\n}\r\n\r\n/**\r\n * Returns the PAL category number of a PAL value.\r\n *\r\n * value: The PAL value, e.g. 1.4 or 1.6.\r\n */\r\nexport function getPalCategory(value: number): number {\r\n    switch (value) {\r\n        case EnergyConstants.PAL_CATEGORY_1:\r\n            return 1\r\n        case EnergyConstants.PAL_CATEGORY_2:\r\n            return 2\r\n        case EnergyConstants.PAL_CATEGORY_3:\r\n            return 3\r\n        case EnergyConstants.PAL_CATEGORY_4:\r\n            return 4\r\n        case EnergyConstants.PAL_CATEGORY_5:\r\n            return 5\r\n        case EnergyConstants.PAL_CATEGORY_6:\r\n            return 6\r\n        case EnergyConstants.PAL_CATEGORY_7:\r\n            return 7\r\n        default:\r\n            return 1\r\n    }\r\n}\r\n\r\n\r\nexport function getPalValue(palCategory: number): number {\r\n    switch (palCategory) {\r\n        case 1:\r\n            return EnergyConstants.PAL_CATEGORY_1\r\n        case 2:\r\n            return EnergyConstants.PAL_CATEGORY_2\r\n        case 3:\r\n            return EnergyConstants.PAL_CATEGORY_3\r\n        case 4:\r\n            return EnergyConstants.PAL_CATEGORY_4\r\n        case 5:\r\n            return EnergyConstants.PAL_CATEGORY_5\r\n        case 6:\r\n            return EnergyConstants.PAL_CATEGORY_6\r\n        case 7:\r\n            return EnergyConstants.PAL_CATEGORY_7\r\n        default:\r\n            return EnergyConstants.PAL_CATEGORY_1\r\n    }\r\n}\r\n\r\n\r\nfunction createPalCategoryName(language, category): string {\r\n    const languageLabel = `palcat_name_${category}`;\r\n    const name = applicationStrings[languageLabel][language]\r\n\r\n    const energyLabel = `PAL_CATEGORY_${category}`;\r\n    const value = EnergyConstants[energyLabel];\r\n    return `${name} (${value})`;\r\n}\r\n\r\n\r\n/**\r\n * Calculates the Basal Metabolic Rate (BMR) of a person.\r\n */\r\nexport function calculateBMR(age: number, size: number, weight: number, sex: string): number {\r\n    if (sex === SEX_MALE) {\r\n        const bmr = 3.4 * weight + 15.3 * size - 6.8 * age - 961;\r\n        return Math.round(bmr);\r\n    } else {\r\n        const bmr = 2.4 * weight + 9.0 * size - 4.7 * age - 65;\r\n        return Math.round(bmr);\r\n    }\r\n}\r\n\r\n/**\r\n * Calculates the total energy consumption of a person in one day.\r\n *\r\n * bmr: The bmr value.\r\n * palValue: The pal value\r\n * leisureSports: Specifies whether leisure sports is performed or not (+0.3 PAL).\r\n */\r\nexport function calculateTotalEnergyConsumption(bmr: number, palValue: number, leisureSports: boolean): number {\r\n    if (leisureSports) {\r\n        palValue += 0.3;\r\n    }\r\n\r\n    return bmr * palValue;\r\n}\r\n\r\n\r\n/**\r\n * Calculates the energy amount data for the different macro nutrients per 100 gram in kcal.\r\n * @param baseData Base data object containing the corresponding nutrient data.\r\n * @return Energy data object with the precise information about the energy composition.\r\n */\r\nexport function calculateEnergyData(baseData: BaseData): EnergyData | null {\r\n    const {energy, carbohydrates, lipids, proteins, alcohol} = baseData\r\n    const dietaryFibers = baseData.dietaryFibers !== null ? baseData.dietaryFibers : 0\r\n\r\n    if (energy === null || carbohydrates === null || lipids === null || proteins === null) {\r\n        return null\r\n    }\r\n\r\n    const getValueForPortion = (value: number | null, factor: number): number => {\r\n        if (value === undefined || value === null) {\r\n            return 0\r\n        }\r\n\r\n        return round((value * factor), 1);\r\n    }\r\n\r\n    return {\r\n        carbohydrates: getValueForPortion(carbohydrates - dietaryFibers, 4) + getValueForPortion( dietaryFibers, 2),\r\n        dietaryFibers: getValueForPortion( dietaryFibers, 2),\r\n        fat: getValueForPortion(lipids, 9),\r\n        proteins: getValueForPortion(proteins, 4),\r\n        alcohol: getValueForPortion(alcohol, 7),\r\n    }\r\n\r\n}","import * as ChartConfig from \"../../../../config/ChartConfig\";\r\nimport {isMobileDevice} from \"../../../../service/WindowDimension\";\r\nimport {applicationStrings} from \"../../../../static/labels\";\r\nimport {calculateBMR, calculateTotalEnergyConsumption} from \"../../../../service/calculation/EnergyService\";\r\nimport {getBarChartOptions} from \"../../../../service/ChartConfigurationService\";\r\nimport React, {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../../../contexts/LangContext\";\r\nimport {getNutrientData} from \"../../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {ChartProps} from \"../../../../types/livedata/ChartPropsData\";\r\nimport {Bar} from \"react-chartjs-2\";\r\n\r\nexport function EnergyLevelChart(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext).language\r\n    const nutrientData = getNutrientData(props.selectedFoodItem);\r\n\r\n    if (!applicationContext || !nutrientData.baseData.energy) {\r\n        return <div>No data.</div>\r\n    }\r\n\r\n    const energy100g = Math.round(nutrientData.baseData.energy);\r\n\r\n    const createEnergyLevelChart = () => {\r\n        const averagePortion = props.selectedFoodItem.portion.amount\r\n        const energyPortion = Math.round(energy100g / 100 * averagePortion);\r\n\r\n        return {\r\n            labels: [\"100 g\", \"Portion\"],\r\n            datasets: [{\r\n                data: [energy100g,\r\n                    energyPortion\r\n                ],\r\n                backgroundColor: [\r\n                    ChartConfig.color_yellow,\r\n                    ChartConfig.color_red,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n\r\n        }\r\n    }\r\n\r\n\r\n    const renderUserDataInfoPage = () => {\r\n        const showInfotext = !(isMobileDevice() && props.directCompareUse)\r\n\r\n        return (\r\n            <div style={{paddingLeft: \"2vw\", paddingTop: \"1vh\", maxWidth: \"90%\"}}>\r\n                {!isMobileDevice()\r\n                    ? <div className={\"header-label\"}><b>{`${energy100g}`} kcal / 100 g</b></div>\r\n                    : <p><b>{`${energy100g}`} kcal / 100 g</b></p>\r\n                }\r\n\r\n                {showInfotext &&\r\n                <div className=\"text-small\" style={{paddingTop: \"30px\"}}>\r\n                    {applicationContext.userData.initialValues ?\r\n                        (<div>\r\n                            <p>{applicationStrings.text_setUserdata_p1[language]}</p>\r\n                            <p>{applicationStrings.text_setUserdata_p2[language]}</p>\r\n                        </div>)\r\n                        :\r\n                        <p>{applicationStrings.text_setUserdata_p3[language]}</p>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const getOptions = () => {\r\n        const {age, size, weight, sex, palValue, leisureSports} = applicationContext.userData\r\n        const bmr = calculateBMR(age, size, weight, sex);\r\n        const totalEnergy = calculateTotalEnergyConsumption(bmr, palValue, leisureSports);\r\n\r\n        if (props.directCompareUse) {\r\n\r\n        }\r\n\r\n        const annotation1 = {\r\n            drawTime: 'afterDatasetsDraw',\r\n            type: 'line',\r\n            mode: 'horizontal',\r\n            scaleID: 'y-axis-0',\r\n            yMin: bmr,\r\n            yMax: bmr,\r\n            borderColor: ChartConfig.color_line_red,\r\n            borderWidth: 4,\r\n            label: {\r\n                enabled: true,\r\n                content: applicationStrings.label_chart_bmr[language]\r\n            },\r\n        }\r\n\r\n        const annotation2 =\r\n            {\r\n                drawTime: 'afterDatasetsDraw',\r\n                type: 'line',\r\n                mode: 'horizontal',\r\n                scaleID: 'y-axis-0',\r\n                yMin: totalEnergy,\r\n                yMax: totalEnergy,\r\n                borderColor: ChartConfig.color_line_blue,\r\n                borderWidth: 4,\r\n                label: {\r\n                    enabled: true,\r\n                    content: applicationStrings.label_chart_energyExpenditure[language]\r\n                }\r\n            }\r\n\r\n        const annotation = {\r\n            annotations: {\r\n                line1: annotation1,\r\n                line2: !(props.directCompareUse && isMobileDevice()) ? annotation2 : undefined,\r\n            }\r\n        }\r\n\r\n        let options: any = getBarChartOptions(applicationStrings.label_charttype_energy[language], \"kcal\");\r\n        options = {\r\n            ...options, plugins: {\r\n                ...options.plugins,\r\n                annotation: annotation\r\n            }\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    const data = createEnergyLevelChart();\r\n    if (!data) {\r\n        return <div>{applicationStrings.label_noData[language]}</div>\r\n    }\r\n\r\n    const chartClass = props.directCompareUse ? \"col-12 chart-area-dc\" : \"col-12 chart-area\"\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row \" key={\"energy container\"}>\r\n                <div className=\"col-7\">\r\n                    <div className={chartClass}>\r\n                        <Bar\r\n                            data={data}\r\n                            key={'chart energy'}\r\n                            options={getOptions()}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-5\">\r\n                    {renderUserDataInfoPage()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import {ChartProps} from \"../../../../types/livedata/ChartPropsData\";\r\nimport {applicationStrings} from \"../../../../static/labels\";\r\nimport {Pie} from \"react-chartjs-2\";\r\nimport React, {useContext} from \"react\";\r\nimport {getPieChartOptions} from \"../../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../../contexts/LangContext\";\r\nimport {getNutrientData} from \"../../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport * as ChartConfig from \"../../../../config/ChartConfig\";\r\nimport {calculateEnergyData} from \"../../../../service/calculation/EnergyService\";\r\nimport {CustomLegend} from \"../../../charthelper/CustomLegend\";\r\nimport {showEnergyChartLegend} from \"../../../../service/chartdata/BaseChartDataService\";\r\nimport {isMobileDevice} from \"../../../../service/WindowDimension\";\r\nimport {autoRound} from \"../../../../service/calculation/MathService\";\r\n\r\nexport function EnergyCompositionChart(props: ChartProps) {\r\n    const language = useContext(LanguageContext).language\r\n    const nutrientData = getNutrientData(props.selectedFoodItem);\r\n    const portionAmount = props.selectedFoodItem.portion.amount\r\n\r\n    if(!nutrientData.baseData.energy) {\r\n        return <div>No data</div>\r\n    }\r\n\r\n    const energy100g = Math.round(nutrientData.baseData.energy)\r\n\r\n    const transformToPortion = (value) => {\r\n        return autoRound((value * portionAmount) / 100)\r\n    }\r\n\r\n    const createData = () => {\r\n        const energyData = calculateEnergyData(nutrientData.baseData)\r\n\r\n        if (!energyData) {\r\n            return\r\n        }\r\n\r\n        const labels = [\r\n            applicationStrings.label_nutrient_carbohydrates[language],\r\n            applicationStrings.label_nutrient_dietaryFibers[language],\r\n            applicationStrings.label_nutrient_lipids[language],\r\n            applicationStrings.label_nutrient_proteins[language],\r\n            applicationStrings.label_nutrient_alcohol[language],\r\n        ]\r\n\r\n        const values = [\r\n            transformToPortion(energyData.carbohydrates),\r\n            transformToPortion(energyData.dietaryFibers),\r\n            transformToPortion(energyData.fat),\r\n            transformToPortion(energyData.proteins),\r\n            transformToPortion(energyData.alcohol),\r\n        ]\r\n\r\n        const colors = [\r\n            ChartConfig.color_carbs,\r\n            ChartConfig.color_carbs_dietaryFibers,\r\n            ChartConfig.color_lipids,\r\n            ChartConfig.color_proteins,\r\n            ChartConfig.color_alcohol,\r\n        ]\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                data: values,\r\n                backgroundColor: colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n    const data = createData()\r\n\r\n    const getOptions = () => {\r\n        let title = applicationStrings.label_charttype_energy_composition[language];\r\n        return getPieChartOptions(title, \"kcal\");\r\n    }\r\n\r\n    const chartClass = props.directCompareUse ? \"col-12 chart-area-dc\" : \"col-12 chart-area\"\r\n\r\n    if (!data) {\r\n        return (\r\n            <div className={chartClass}>\r\n                {applicationStrings.label_noData[language]}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const keyWordStyle = {minWidth: \"15ch\", fontWeight: \"bold\", fontSize: \"0.8rem\"}\r\n\r\n    const makeValue = (value: number) => {\r\n        return <span style={{fontSize: \"0.8rem\"}}>1 g ≈ {value} kcal</span>\r\n    }\r\n\r\n    const energyPerPortion = transformToPortion(nutrientData.baseData.energy)\r\n\r\n    return (\r\n        <div className={\"container row\"}>\r\n            <div className={\"col-7\"}>\r\n                <div className={chartClass}>\r\n                    <Pie data={data}\r\n                         key={'chart carbs'}\r\n                         options={getOptions()}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className={\"col-5\"}>\r\n                <div style={{paddingTop: \"1vh\", paddingBottom: \"1vh\"}}>\r\n                    {!isMobileDevice()\r\n                        ? <div className={\"header-label-small\"}>\r\n                            <span style={{paddingRight: \"1.25ch\"}}>\r\n                                <b>{energyPerPortion} kcal {applicationStrings.label_per_portion[language]}</b>\r\n                            </span>\r\n                            <span>\r\n                                <b>({energy100g} kcal / 100 g)</b>\r\n                            </span>\r\n                        </div>\r\n                        : <p><b>{energy100g} kcal / 100 g ({energyPerPortion} kcal {applicationStrings.label_per_portion[language]})</b></p>\r\n                    }\r\n                </div>\r\n                <div style={{borderLeft: \"1px solid #aaaaaa\", paddingLeft: \"0.5vw\", paddingBottom: \"2vh\"}}>\r\n                    <div className={\"d-flex flex-row align-items-baseline\"}>\r\n                        <div style={keyWordStyle}>{applicationStrings.label_nutrient_carbohydrates[language]}:</div>\r\n                        <div>{makeValue(4)}</div>\r\n                    </div>\r\n                    <div className={\"d-flex flex-row align-items-baseline\"}>\r\n                        <div style={keyWordStyle}>{applicationStrings.label_nutrient_dietaryFibers[language]}:</div>\r\n                        <div>{makeValue(2)}</div>\r\n                    </div>\r\n                    <div className={\"d-flex flex-row align-items-baseline\"}>\r\n                        <div style={keyWordStyle}>{applicationStrings.label_nutrient_lipids[language]}:</div>\r\n                        <div>{makeValue(9)}</div>\r\n                    </div>\r\n                    <div className={\"d-flex flex-row align-items-baseline\"}>\r\n                        <div style={keyWordStyle}>{applicationStrings.label_nutrient_proteins[language]}:</div>\r\n                        <div>{makeValue(4)}</div>\r\n                    </div>\r\n                    <div className={\"d-flex flex-row align-items-baseline\"}>\r\n                        <div style={keyWordStyle}>{applicationStrings.label_nutrient_alcohol[language]}:</div>\r\n                        <div>{makeValue(7)}</div>\r\n                    </div>\r\n                </div>\r\n                <CustomLegend legendData={showEnergyChartLegend(language)}/>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {ChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {EnergyLevelChart} from \"./energy/EnergyLevelChart\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {CHART_TYPE_BAR, CHART_TYPE_COMPOSITION, CHART_TYPE_ENERGY_LEVEL, CHART_TYPE_PIE} from \"../../../config/Constants\";\r\nimport {EnergyCompositionChart} from \"./energy/EnergyCompositionChart\";\r\n\r\nexport default function EnergyDataChart(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext).language\r\n    const nutrientData = getNutrientData(props.selectedFoodItem);\r\n    const energy100g = nutrientData.baseData.energy;\r\n\r\n    const initialChartType = props.directCompareUse\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.energyChartConfig.chartType ?? CHART_TYPE_COMPOSITION\r\n        : applicationContext?.applicationData.foodDataPanel.chartConfigData.energyChartConfig.chartType ?? CHART_TYPE_COMPOSITION\r\n\r\n    const [chartType, setChartType] = useState<string>(initialChartType)\r\n\r\n    useEffect(() => {\r\n        if (applicationContext) {\r\n            if (props.directCompareUse) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                    energyChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: true\r\n                    }\r\n                }\r\n                applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n            } else {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    energyChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: true\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n\r\n    }, [chartType])\r\n\r\n    if (!applicationContext || !energy100g) {\r\n        return <div>No data.</div>\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            {chartType === CHART_TYPE_COMPOSITION &&\r\n            <div>\r\n                <EnergyCompositionChart selectedFoodItem={props.selectedFoodItem}/>\r\n            </div>\r\n            }\r\n            {chartType === CHART_TYPE_ENERGY_LEVEL &&\r\n            <div>\r\n                <EnergyLevelChart selectedFoodItem={props.selectedFoodItem}></EnergyLevelChart>\r\n            </div>\r\n            }\r\n            <div className=\"row chart-control-button-bar\">\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <form className=\"form-inline form-group\">\r\n                            <Form.Label className=\"form-elements\">\r\n                                <b>{applicationStrings.label_charttype[language]}:</b>\r\n                            </Form.Label>\r\n                            <Form.Check inline={true}\r\n                                        className=\"form-radiobutton\"\r\n                                        label={applicationStrings.label_charttype_energy_composition[language]}\r\n                                        type=\"radio\"\r\n                                        value={CHART_TYPE_PIE}\r\n                                        checked={chartType === CHART_TYPE_COMPOSITION}\r\n                                        onChange={() => setChartType(CHART_TYPE_COMPOSITION)}>\r\n                            </Form.Check>\r\n                            <Form.Check inline={true}\r\n                                        className=\"form-radiobutton form-horizontal-separation\"\r\n                                        label={applicationStrings.label_charttype_energy_level[language]}\r\n                                        type=\"radio\"\r\n                                        value={CHART_TYPE_BAR}\r\n                                        checked={chartType === CHART_TYPE_ENERGY_LEVEL}\r\n                                        onChange={() => setChartType(CHART_TYPE_ENERGY_LEVEL)}>\r\n                            </Form.Check>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n\r\n}","import React, {useContext} from \"react\"\r\nimport {LanguageContext} from \"../../contexts/LangContext\"\r\nimport {Form} from \"react-bootstrap\"\r\nimport {applicationStrings} from \"../../static/labels\"\r\nimport {AMOUNT_100_GRAM, AMOUNT_PORTION} from \"../../config/Constants\"\r\nimport {BarChartConfigurationProps} from \"../../types/livedata/ChartPropsData\"\r\n\r\nexport function BarChartConfigurationForm(props: BarChartConfigurationProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const label_portion = props.selectedFoodItem\r\n        ? `${applicationStrings.label_portion[lang]} (${props.selectedFoodItem.portion.amount} g)`\r\n        : applicationStrings.label_portion_selected[lang]\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <form className=\"form-inline form-group\">\r\n                <Form.Label className={\"form-elements\"}>\r\n                    <b>{applicationStrings.label_reference[lang]}:</b>\r\n                </Form.Label>\r\n                <Form.Check className=\"form-radiobutton mr-4\"\r\n                            type=\"radio\"\r\n                            inline={true}\r\n                            label={\"100g\"}\r\n                            value={AMOUNT_100_GRAM}\r\n                            checked={(props.portionType === AMOUNT_100_GRAM)}\r\n                            onChange={props.handleRadioButtonClick}\r\n                />\r\n                <Form.Check className=\"form-radiobutton form-horizontal-separation\"\r\n                            type=\"radio\"\r\n                            inline={true}\r\n                            label={label_portion}\r\n                            value={AMOUNT_PORTION}\r\n                            checked={props.portionType === AMOUNT_PORTION}\r\n                            onChange={props.handleRadioButtonClick}\r\n                />\r\n                <Form.Check className=\"form-radiobutton\"\r\n                            inline={true}\r\n                            label={applicationStrings.checkbox_expand100g[lang]}\r\n                            checked={props.expand100}\r\n                            onChange={props.handleExpandCheckboxClick}>\r\n                </Form.Check>\r\n                {props.handleSynchronize !== undefined && props.synchronize !== undefined &&\r\n                < Form.Check className=\"form-radiobutton\"\r\n                             inline={true}\r\n                             label={applicationStrings.checkbox_synchronize[lang]}\r\n                             checked={props.synchronize}\r\n                             onChange={props.handleSynchronize}>\r\n                </Form.Check>\r\n                }\r\n            </form>\r\n        </div>\r\n    )\r\n\r\n}","import * as Constants from '../../config/Constants';\r\nimport DietaryRequirement, {\r\n    RequirementAgeGroupData,\r\n    RequirementData\r\n} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport {SEX_MALE} from \"../../config/Constants\";\r\n\r\n/*\r\n * Determines the daily requirements of a vitamin or mineral for a specific user.\r\n *\r\n * dailyRequirementObject: A vitamin or mineral requirement object (e.g. for Vitamin C or Iron).\r\n * userData: The user data object containing the user data.\r\n *\r\n * @return: The daily requirement (mg)\r\n */\r\nexport function determineDailyRequirement(dailyRequirementObject: RequirementData, userData: UserData): number {\r\n    let ageGroupRequirements: RequirementAgeGroupData\r\n\r\n    if (userData.age >= 65) {\r\n        ageGroupRequirements = dailyRequirementObject.senior;\r\n    } else if (userData.age >= 51) {\r\n        ageGroupRequirements = dailyRequirementObject.preSenior;\r\n    } else if (userData.age >= 26) {\r\n        ageGroupRequirements = dailyRequirementObject.midLifeAdult;\r\n    } else if (userData.age >= 19) {\r\n        ageGroupRequirements = dailyRequirementObject.youngAdult;\r\n    } else if (userData.age >= 15) {\r\n        ageGroupRequirements = dailyRequirementObject.youth;\r\n    } else {\r\n        ageGroupRequirements = dailyRequirementObject.youth;   // Default case (should not occur!)\r\n    }\r\n\r\n    let value: number\r\n    if (userData.sex === SEX_MALE) {\r\n        value = ageGroupRequirements.male;\r\n    } else {\r\n        if (userData.pregnant) {\r\n            value = ageGroupRequirements.femalePregnant ? ageGroupRequirements.femalePregnant : ageGroupRequirements.female;\r\n        } else if (userData.breastFeeding) {\r\n            value = ageGroupRequirements.femaleBreastFeeding ? ageGroupRequirements.femaleBreastFeeding : ageGroupRequirements.female;\r\n        } else {\r\n            value = ageGroupRequirements.female;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/*\r\n * Determines the ratio (percentage) of vitamins/minerals in food compared to the daily requirements of the user.\r\n * Example: The daily requirements of Vitamin C is 120 mg for the user. The food contains 24 mg C. The ratio is 0.2 (20 %).\r\n *\r\n * dailyRequirementObject: A vitamin or mineral requirement object (e.g. for Vitamin C or Iron).\r\n * userData: The user data object containing the user data.\r\n * portionSize: The portion size in gram (100 = default value, i.e., 100 gram).\r\n * amountInFood: The amount of the vitamin or mineral in the food (which is always 100 gram).\r\n */\r\nexport function determineFoodRequirementRatio(dailyRequirementObject: RequirementData, amountInFood: number,\r\n                                              portionSize: number, userData: UserData): number {\r\n    const dailyRequirement = determineDailyRequirement(dailyRequirementObject, userData);\r\n    if (portionSize === 100) {\r\n        return Math.round(amountInFood / dailyRequirement * 1000) / 10;\r\n    } else {   // Calculate ration for a special amount (portion):\r\n        return Math.round(amountInFood / dailyRequirement * (portionSize * 10)) / 10;\r\n    }\r\n}\r\n\r\n\r\n/*\r\n * Determines the ratio (percentage) of proteins in food compared to the daily requirements of the user.\r\n * Example: The daily requirements of Lysine is 30 mg per kg. The user weights 80 kg. His dietary requirement\r\n * is thus 30 * 80 = 2400 mg per day. The food contains 240 mg C. The ratio is 0.1 (10 %).\r\n *\r\n * dailyRequirementObject: A protein requirement object for a specific protein (e.g. for Lycin).\r\n * userData: The user data object containing the user data.\r\n * portionSize: The portion size in gram (100 = default value, i.e., 100 gram).\r\n * amountInFood: The amount of the vitamin or mineral in the food (which is always 100 gram).\r\n */\r\nexport function determineProteinRequirementRatio(requirement: number, amountInFood: number, portionSize: number, userData: UserData) {\r\n    const dailyRequirement = (requirement * userData.weight) / 1000;\r\n\r\n    if (portionSize === 100) {\r\n        return Math.round(amountInFood / dailyRequirement * 1000) / 10;\r\n    } else {   // Calculate ration for a special amount (portion):\r\n        return Math.round(amountInFood / dailyRequirement * (portionSize * 10)) / 10;\r\n    }\r\n}\r\n\r\n\r\nexport function convertAbsoluteValueToDailyRequirement(dailyRequirements: DietaryRequirement, item: string, amount: number, userData: UserData) {\r\n    let dailyRequirementObject\r\n\r\n    if (item === Constants.DATA_VITAMINS_A) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.a;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B1) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b1;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B2) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b2;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B3) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b3;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B5) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b5;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B6) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b6;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B9) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b9;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B12) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b12;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_C) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.c;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_D) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.d;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_E) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.e;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_K) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.k;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_CALCIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.calcium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_COPPER) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.copper;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_IRON) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.iron;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_MAGNESIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.magnesium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_MANGANESE) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.manganese;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_PHOSPHORUS) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.phosphorus;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_POTASSIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.potassium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_SELENIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.selenium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_SODIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.sodium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_ZINC) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.zinc;\r\n    }\r\n\r\n    if (!dailyRequirementObject) {\r\n        return 0\r\n    }\r\n\r\n    const dailyRequirement = determineDailyRequirement(dailyRequirementObject, userData);\r\n    return Math.round(amount / dailyRequirement * 1000) / 10;\r\n}","// Pro-vitamin A equivalent factors\r\nexport const EQ_FACTOR_BETA_CAROTENE = 0.08333\r\nexport const EQ_FACTOR_OTHER_CAROTENE = 0.04166\r\n\r\n// Pro-vitamin E equivalent factors\r\nexport const EQ_FACTOR_TOCOPHEROL_BETA = 0.5\r\nexport const EQ_FACTOR_TOCOPHEROL_GAMMA = 0.25\r\nexport const EQ_FACTOR_TOCOPHEROL_DELTA = 0.01\r\nexport const EC_FACTOR_TOCOTRIENOL_ALPHA = 0.3\r\nexport const EC_FACTOR_TOCOTRIENOL_BETA = 0.15\r\nexport const EC_FACTOR_TOCOTRIENOL_GAMMA = 0.0757","import {determineFoodRequirementRatio} from \"../calculation/DietaryRequirementService\";\r\nimport {MineralData, VitaminData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {MineralRequirementData, VitaminRequirementData} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport {ChartDisplayData} from \"../../types/livedata/ChartDisplayData\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {calculateVitaminAEquivalent} from \"../calculation/provitaminCalculation/CarotenoidCalculationService\";\r\nimport {calculateVitaminEEquivalent} from \"../calculation/provitaminCalculation/ExtendedVitaminECalculationService\";\r\nimport {DataSettings} from \"../../types/livedata/DataSettings\";\r\nimport {OPTION_YES} from \"../../config/Constants\";\r\n\r\nexport function getVitaminChartData(vitaminData: VitaminData, requirementData: VitaminRequirementData, userData: UserData,\r\n                                    dataSettings: DataSettings, portionAmount: number): ChartDisplayData {\r\n    const labels: Array<string> = [];\r\n    const values: Array<number> = [];\r\n\r\n    if (vitaminData.a !== null) {\r\n        let amountA = vitaminData.a\r\n        if(dataSettings.includeProvitamins === OPTION_YES) {\r\n            amountA += calculateVitaminAEquivalent(vitaminData.carotenoidData)\r\n        }\r\n        labels.push(\"A\");\r\n        values.push(determineFoodRequirementRatio(requirementData.a, amountA, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b1 !== null) {\r\n        labels.push(\"B1\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b1, vitaminData.b1, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b2 !== null) {\r\n        labels.push(\"B2\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b2, vitaminData.b2, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b3 !== null) {\r\n        labels.push(\"B3\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b3, vitaminData.b3, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b5 !== null) {\r\n        labels.push(\"B5\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b5, vitaminData.b5, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b6 !== null) {\r\n        labels.push(\"B6\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b6, vitaminData.b6, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b9 !== null) {\r\n        labels.push(\"B9\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b9, vitaminData.b9, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b12 !== null) {\r\n        labels.push(\"B12\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b12, vitaminData.b12, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.c !== null) {\r\n        labels.push(\"C\");\r\n        values.push(determineFoodRequirementRatio(requirementData.c, vitaminData.c, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.d !== null) {\r\n        labels.push(\"D\");\r\n        values.push(determineFoodRequirementRatio(requirementData.d, vitaminData.d, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.e !== null) {\r\n        let amountE = vitaminData.e\r\n        if(dataSettings.includeProvitamins === OPTION_YES) {\r\n            amountE += calculateVitaminEEquivalent(vitaminData.extendedVitaminE)\r\n        }\r\n        labels.push(\"E\");\r\n        values.push(determineFoodRequirementRatio(requirementData.e, amountE, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.k !== null) {\r\n        labels.push(\"K\");\r\n        values.push(determineFoodRequirementRatio(requirementData.k, vitaminData.k, portionAmount, userData));\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values\r\n    }\r\n}\r\n\r\n\r\nexport function getMineralsChartData(mineralData: MineralData, requirementData: MineralRequirementData, userData: UserData,\r\n                                     portionAmount: number, language: string): ChartDisplayData {\r\n    const labels: Array<string> = [];\r\n    const values: Array<number> = [];\r\n\r\n    if (mineralData.calcium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_calcium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.calcium, mineralData.calcium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.iron !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_iron[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.iron, mineralData.iron, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.magnesium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_magnesium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.magnesium, mineralData.magnesium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.phosphorus !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_phosphorus[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.phosphorus, mineralData.phosphorus, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.potassium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_potassium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.potassium, mineralData.potassium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.sodium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_sodium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.sodium, mineralData.sodium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.zinc !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_zinc[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.zinc, mineralData.zinc, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.copper !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_copper[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.copper, mineralData.copper, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.manganese !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_manganese[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.manganese, mineralData.manganese, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.selenium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_selenium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.selenium, mineralData.selenium, portionAmount, userData));\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values\r\n    }\r\n}","import {CarotenoidData} from \"../../../types/nutrientdata/FoodItem\";\r\nimport {EQ_FACTOR_BETA_CAROTENE, EQ_FACTOR_OTHER_CAROTENE} from \"./ProvitaminEquivalentFactors\";\r\n\r\nexport function getTotalAmountOfCarotenoids(carotenoidData: CarotenoidData): number | null {\r\n    if(carotenoidData === null) {\r\n        return null\r\n    }\r\n\r\n    let amount = 0;\r\n\r\n    if(carotenoidData.caroteneAlpha) {\r\n        amount += carotenoidData.caroteneAlpha\r\n    }\r\n    if(carotenoidData.caroteneBeta) {\r\n        amount += carotenoidData.caroteneBeta\r\n    }\r\n    if(carotenoidData.cryptoxanthin) {\r\n        amount += carotenoidData.cryptoxanthin\r\n    }\r\n\r\n    return amount\r\n}\r\n\r\n/**\r\n * Calculates the total vitamin A equivalent out of the different carotenoid values\r\n * @param carotenoidData\r\n */\r\nexport function calculateVitaminAEquivalent(carotenoidData: CarotenoidData | null): number {\r\n    if(carotenoidData === null) {\r\n        return 0\r\n    }\r\n\r\n    let amount = 0;\r\n\r\n    if(carotenoidData.caroteneAlpha) {\r\n        amount += (carotenoidData.caroteneAlpha * EQ_FACTOR_OTHER_CAROTENE)\r\n    }\r\n    if(carotenoidData.caroteneBeta) {\r\n        amount += (carotenoidData.caroteneBeta * EQ_FACTOR_BETA_CAROTENE)\r\n    }\r\n    if(carotenoidData.cryptoxanthin) {\r\n        amount += (carotenoidData.cryptoxanthin * EQ_FACTOR_OTHER_CAROTENE)\r\n    }\r\n\r\n    return amount\r\n}","import {ExtendedVitaminE} from \"../../../types/nutrientdata/FoodItem\";\r\nimport {\r\n    EQ_FACTOR_TOCOPHEROL_BETA,\r\n    EQ_FACTOR_TOCOPHEROL_DELTA,\r\n    EQ_FACTOR_TOCOPHEROL_GAMMA,\r\n    EC_FACTOR_TOCOTRIENOL_ALPHA,\r\n    EC_FACTOR_TOCOTRIENOL_BETA,\r\n    EC_FACTOR_TOCOTRIENOL_GAMMA\r\n} from \"./ProvitaminEquivalentFactors\";\r\n\r\nexport function getTotalAmountOfExtendedVitaminE(extendedVitaminE: ExtendedVitaminE): number | null {\r\n    if (extendedVitaminE === null) {\r\n        return null\r\n    }\r\n\r\n    let amount = 0;\r\n\r\n    if (extendedVitaminE.tocopherolBeta) {\r\n        amount += extendedVitaminE.tocopherolBeta\r\n    }\r\n    if (extendedVitaminE.tocopherolGamma) {\r\n        amount += extendedVitaminE.tocopherolGamma\r\n    }\r\n    if (extendedVitaminE.tocopherolDelta) {\r\n        amount += extendedVitaminE.tocopherolDelta\r\n    }\r\n    if (extendedVitaminE.tocotrienolAlpha) {\r\n        amount += extendedVitaminE.tocotrienolAlpha\r\n    }\r\n    if (extendedVitaminE.tocotrienolBeta) {\r\n        amount += extendedVitaminE.tocotrienolBeta\r\n    }\r\n    if (extendedVitaminE.tocotrienolGamma) {\r\n        amount += extendedVitaminE.tocotrienolGamma\r\n    }\r\n\r\n    return amount\r\n}\r\n\r\n/**\r\n * Calculates the total vitamin E equivalent out of the different forms of Vitamin E\r\n * @param extendedVitaminE Data object containing the additional Vitamin E forms\r\n */\r\nexport function calculateVitaminEEquivalent(extendedVitaminE: ExtendedVitaminE | null): number {\r\n    if (extendedVitaminE === null) {\r\n        return 0\r\n    }\r\n\r\n    let amount = 0;\r\n\r\n    if (extendedVitaminE.tocopherolBeta) {\r\n        amount += (extendedVitaminE.tocopherolBeta * EQ_FACTOR_TOCOPHEROL_BETA)\r\n    }\r\n    if (extendedVitaminE.tocopherolGamma) {\r\n        amount += (extendedVitaminE.tocopherolGamma * EQ_FACTOR_TOCOPHEROL_GAMMA)\r\n    }\r\n    if (extendedVitaminE.tocopherolDelta) {\r\n        amount += (extendedVitaminE.tocopherolDelta * EQ_FACTOR_TOCOPHEROL_DELTA)\r\n    }\r\n\r\n    if (extendedVitaminE.tocotrienolAlpha) {\r\n        amount += (extendedVitaminE.tocotrienolAlpha * EC_FACTOR_TOCOTRIENOL_ALPHA)\r\n    }\r\n\r\n    if (extendedVitaminE.tocotrienolBeta) {\r\n        amount += (extendedVitaminE.tocotrienolBeta * EC_FACTOR_TOCOTRIENOL_BETA)\r\n    }\r\n\r\n    if (extendedVitaminE.tocotrienolGamma) {\r\n        amount += (extendedVitaminE.tocotrienolGamma * EC_FACTOR_TOCOTRIENOL_GAMMA)\r\n    }\r\n\r\n    return amount\r\n}\r\n\r\n\r\nexport function hasExtendedData(extendedVitaminE: ExtendedVitaminE): boolean {\r\n    return extendedVitaminE.tocopherolBeta !== null\r\n        || extendedVitaminE.tocopherolGamma !== null\r\n        || extendedVitaminE.tocopherolDelta !== null\r\n        || extendedVitaminE.tocotrienolAlpha !== null\r\n        || extendedVitaminE.tocotrienolBeta !== null\r\n        || extendedVitaminE.tocotrienolGamma !== null\r\n}","const fontsize = \"calc(0.5rem + 0.3vw)\"\r\nconst selectHeight = \"calc(0.5rem + 0.3vw)*2.2\"\r\n\r\nexport const customSelectStyles = {\r\n    control: base => ({\r\n        ...base,\r\n        height: selectHeight,\r\n        minHeight: selectHeight,\r\n        fontSize: fontsize,\r\n    }),\r\n    valueContainer: (provided) => ({\r\n        ...provided,\r\n        height: selectHeight,\r\n        minHeight: selectHeight,\r\n        padding: '0 2px',\r\n        fontsize: fontsize\r\n    }),\r\n    dropdownIndicator: (styles) => ({\r\n        ...styles,\r\n        paddingTop: \"2px\",\r\n        paddingBottom: \"2px\",\r\n    }),\r\n    clearIndicator: (styles) => ({\r\n        ...styles,\r\n        height: selectHeight,\r\n        minHeight: selectHeight,\r\n        paddingTop: \"2px\",\r\n        paddingBottom: \"2px\",\r\n    }),\r\n};\r\n\r\n\r\nexport function getCustomSelectStyle(backgroundColor: string): any {\r\n    return {\r\n        ...customSelectStyles,\r\n        control: base => ({\r\n            ...base,\r\n            height: selectHeight,\r\n            minHeight: selectHeight,\r\n            fontSize: fontsize,\r\n            backgroundColor: backgroundColor\r\n        }),\r\n    }\r\n}\r\n\r\n\r\nexport const correspondingSelectElementStyle = {\r\n    height: selectHeight,\r\n    fontSize: fontsize\r\n}\r\n\r\nexport const COLOR_SELECTOR_CATEGORY = \" #fdebd0\"\r\nexport const COLOR_SELECTOR_FOODCLASS = \" #85c1e9\"\r\nexport const COLOR_SELECTOR_FOODITEM = \"#ebf5fb\"","import React, {ReactElement, useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {BookDataEntry, NamePair} from \"../../types/BookData\";\r\nimport {TAB_MINERAL_DATA, TAB_PROTEINS_DATA, TAB_VITAMIN_DATA} from \"../../config/Constants\";\r\nimport {isSmallScreen, useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {customSelectStyles} from \"../../config/UI_Config\";\r\nimport Select from 'react-select';\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport {Modal} from \"react-bootstrap\";\r\n\r\ninterface VitaminBookModalProps {\r\n    selectedDataTab: string\r\n    bookData: BookDataEntry[]\r\n    closeBookModal: () => void,\r\n    initiallySelectedItem?: string\r\n}\r\n\r\nexport function VitaminsBook(props: VitaminBookModalProps): ReactElement {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    const initialIndex = props.initiallySelectedItem === undefined\r\n        ? 0\r\n        : props.bookData.findIndex(entry => entry.name[languageContext.language].endsWith(props.initiallySelectedItem)) ?? 0\r\n\r\n    const [selectedEntry, setSelectedEntry] = useState<BookDataEntry>(props.bookData[initialIndex])\r\n\r\n    const handleEntryChange = (entry: ReactSelectOption) => {\r\n        const selection = props.bookData[entry.value]\r\n        setSelectedEntry(selection)\r\n    }\r\n\r\n    const windowSize = useWindowDimension()\r\n    const selectClass = isSmallScreen(windowSize) ? \"form-control-sm\" : \"\"\r\n\r\n    if (selectedEntry === null) {\r\n        setSelectedEntry(props.bookData[0])\r\n    }\r\n\r\n    const selectList = props.bookData.map((entry, index) => {\r\n        return {\r\n            label: entry.name[languageContext.language],\r\n            value: index\r\n        }\r\n    })\r\n\r\n    const renderSelectList = () => {\r\n        const label = applicationStrings.label_selection[languageContext.language]\r\n\r\n        return (\r\n            <div className={\"d-flex flex-row align-items-baseline\"} style={{paddingBottom: \"3vh\"}}>\r\n                <span className={\"form-text\"} style={{paddingRight: \"1ch\"}}>\r\n                    {label}\r\n                </span>\r\n                <div className={\"form-section\"} style={{width: \"70%\"}}>\r\n                    <Select className={selectClass}\r\n                            options={selectList}\r\n                            defaultValue={selectList[initialIndex]}\r\n                            onChange={handleEntryChange}\r\n                            styles={customSelectStyles}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderItemList = (items: NamePair[]) => {\r\n        return items.map(item => <li key={item[languageContext.language]}>{item[languageContext.language]}</li>)\r\n    }\r\n\r\n    const renderDailyRequirements = (dailyRequirementsText: string) => {\r\n        if (!dailyRequirementsText.includes(\"|\")) {\r\n            return <p>{dailyRequirementsText}</p>\r\n        } else {\r\n            const parts = dailyRequirementsText.split(\"|\");\r\n            if (parts[0].includes(\":\") && parts[1].includes(\":\")) {\r\n                const malePartsPrefix = parts[0].substring(0, parts[0].indexOf(\":\")).trim()\r\n                const malePartsData = parts[0].substring(parts[0].indexOf(\":\") + 1).trim()\r\n                const femalePartsPrefix = parts[1].substring(0, parts[1].indexOf(\":\")).trim()\r\n                const femalePartsData = parts[1].substring(parts[1].indexOf(\":\") + 1).trim()\r\n                return <span>\r\n                    <p>\r\n                        <span style={{display: \"inline-block\", minWidth: \"8ch\"}}><b>{malePartsPrefix}:</b></span>\r\n                        {malePartsData}\r\n                        <br/>\r\n                        <span style={{display: \"inline-block\", minWidth: \"8ch\"}}><b>{femalePartsPrefix}:</b></span>\r\n                        {femalePartsData}\r\n                    </p>\r\n                </span>\r\n            } else {\r\n                return <p>{dailyRequirementsText}</p>\r\n            }\r\n        }\r\n    }\r\n\r\n    const renderDataContent = () => {\r\n        if (!selectedEntry) {\r\n            return <div/>\r\n        }\r\n\r\n        const lang = languageContext.language\r\n        const title = selectedEntry.name[lang]\r\n        const scientificTitle = selectedEntry.scientificName !== undefined ? selectedEntry.scientificName[lang] : null\r\n\r\n        const hasFunctionality = selectedEntry.functionality?.length > 0\r\n        const hasDeficiencies = selectedEntry.deficiencies?.length > 0\r\n        const hasOverdose = selectedEntry.overdose !== undefined && selectedEntry.overdose !== null\r\n        const hasDependencies = selectedEntry.dependencies !== undefined && selectedEntry.dependencies !== null\r\n        const hasSources = selectedEntry.sources !== undefined && selectedEntry.sources !== null\r\n        const hasStorage = selectedEntry.storage !== undefined && selectedEntry.storage !== null\r\n\r\n        const hasDailyRequirements = selectedEntry.requirements !== undefined && selectedEntry.requirements !== null\r\n\r\n        return (\r\n            <div style={{margin: \"0.8vw\", height: \"50vh\"}} className={\"form-text\"}>\r\n                <h4>\r\n                    {title}\r\n                    {scientificTitle !== null &&\r\n                    <i style={{marginLeft: \"12px\"}}>{`(${scientificTitle})`}</i>\r\n                    }\r\n                </h4>\r\n                <p >\r\n                    {selectedEntry.description[lang]}\r\n                </p>\r\n                {hasFunctionality &&\r\n                <div>\r\n                    <h5>{applicationStrings.book_heading_functionality[lang]}</h5>\r\n                    <ul>\r\n                        {renderItemList(selectedEntry.functionality)}\r\n                    </ul>\r\n                </div>\r\n                }\r\n                {hasDeficiencies &&\r\n                <div>\r\n                    <h5>{applicationStrings.book_heading_deficiencies[lang]}</h5>\r\n                    <ul>\r\n                        {renderItemList(selectedEntry.deficiencies)}\r\n                    </ul>\r\n                </div>\r\n                }\r\n                {hasOverdose && selectedEntry.overdose &&\r\n                <div>\r\n                    <h5>{applicationStrings.book_heading_overdose[lang]}</h5>\r\n                    <p>{selectedEntry.overdose[lang]}</p>\r\n                </div>\r\n                }\r\n                {hasDependencies && selectedEntry.dependencies &&\r\n                <div>\r\n                    <h5>{applicationStrings.book_heading_dependencies[lang]}</h5>\r\n                    <p>{selectedEntry.dependencies[lang]}</p>\r\n                </div>\r\n                }\r\n                {hasStorage && selectedEntry.storage &&\r\n                <div>\r\n                    <h5>{applicationStrings.book_heading_storage[lang]}</h5>\r\n                    <p>{selectedEntry.storage[lang]}</p>\r\n                </div>\r\n                }\r\n                {hasSources && selectedEntry.sources &&\r\n                <div>\r\n                    <h5>{applicationStrings.book_heading_sources[lang]}</h5>\r\n                    <p>{selectedEntry.sources[lang]}</p>\r\n                </div>\r\n                }\r\n                {hasDailyRequirements &&\r\n                <div>\r\n                    <h5>{applicationStrings.book_heading_requirements[lang]}</h5>\r\n                    {renderDailyRequirements(selectedEntry.requirements[lang])}\r\n                </div>\r\n                }\r\n                <div className={\"pb-5\"}/>\r\n                <hr/>\r\n                <div>\r\n                    <p style={{\r\n                        fontWeight: 100,\r\n                        fontSize: \"0.9rem\",\r\n                        textAlign: \"center\"\r\n                    }}>{applicationStrings.vitamin_book_disclaimer[lang]}</p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    let title = null\r\n    switch (props.selectedDataTab) {\r\n        case TAB_VITAMIN_DATA:\r\n            title = applicationStrings.book_vitamins[languageContext.language]\r\n            break;\r\n        case TAB_MINERAL_DATA:\r\n            title = applicationStrings.book_minerals[languageContext.language]\r\n            break;\r\n        case TAB_PROTEINS_DATA:\r\n            title = applicationStrings.book_proteins[languageContext.language]\r\n            break;\r\n    }\r\n\r\n    return (\r\n        <Modal size={'lg'} show={true}>\r\n            <Modal.Header>\r\n                <h5 className=\"modal-title\"><b>{title}</b></h5>\r\n                <button type=\"button\"\r\n                        className=\"btn-close\"\r\n                        data-dismiss=\"modal\"\r\n                        aria-label=\"Close\"\r\n                        onClick={props.closeBookModal}>\r\n                </button>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div style={{overflowY: \"auto\"}}>\r\n                    {renderSelectList()}\r\n                    {renderDataContent()}\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button type=\"button\"\r\n                        className=\"btn btn-primary\"\r\n                        onClick={props.closeBookModal}>\r\n                    {applicationStrings.button_close[languageContext.language]}\r\n                </button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    OPTION_YES,\r\n    AMOUNT_100_GRAM\r\n} from \"../../../config/Constants\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\"\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../../charthelper/BarChartConfigurationForm\";\r\nimport {MineralVitaminChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {getMineralsChartData, getVitaminChartData} from \"../../../service/chartdata/VitaminsMineralsDataService\";\r\n\r\nimport {VitaminsBook} from \"../VitaminBook\";\r\nimport nutrientBook from \"../../../static/nutrientBook.json\";\r\n\r\n\r\nexport default function MineralVitaminChart(props: MineralVitaminChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    useWindowDimension();\r\n    const chartConfigVitamins = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.vitaminChartConfig\r\n            : initialChartConfigData.vitaminChartConfig\r\n\r\n    const chartConfigMinerals = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.mineralChartConfig\r\n            : initialChartConfigData.mineralChartConfig\r\n\r\n    const [portionType_vitamins, setPortionType_vitamins] = useState<string>(chartConfigVitamins.portionType)\r\n    const [expand100_vitamins, setExpand100_vitamins] = useState<boolean>(chartConfigVitamins.expand100)\r\n    const [portionType_minerals, setPortionType_minerals] = useState<string>(chartConfigMinerals.portionType)\r\n    const [expand100_minerals, setExpand100_minerals] = useState<boolean>(chartConfigMinerals.expand100)\r\n    const [showBookModal, setShowBookModal] = useState<boolean>(false)\r\n    const [selectedColumnLabel, setSelectedColumnLabel] = useState<string | undefined>(undefined)\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setPortionType_vitamins(chartConfigVitamins.portionType)\r\n            setExpand100_vitamins(chartConfigVitamins.expand100)\r\n            setPortionType_minerals(chartConfigMinerals.portionType)\r\n            setExpand100_minerals(chartConfigMinerals.expand100)\r\n        }\r\n\r\n        updateChartConfig()\r\n    }, [portionType_vitamins, portionType_minerals, expand100_vitamins, expand100_minerals, props])\r\n\r\n\r\n    if (!applicationContext || applicationContext.foodDataCorpus.dietaryRequirements === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const anyValueChanged = (): boolean => {\r\n        const config = props.selectedSubChart === CHART_VITAMINS\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.vitaminChartConfig\r\n            : applicationContext.applicationData.foodDataPanel.chartConfigData.mineralChartConfig\r\n\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            return portionType_vitamins !== config.portionType || expand100_vitamins !== config.expand100\r\n        } else {\r\n            return portionType_minerals !== config.portionType || expand100_minerals !== config.expand100\r\n        }\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (!props.directCompareConfig && anyValueChanged()) {\r\n            if (applicationContext) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    vitaminChartConfig: {\r\n                        portionType: portionType_vitamins,\r\n                        expand100: expand100_vitamins\r\n                    },\r\n                    mineralChartConfig: {\r\n                        portionType: portionType_minerals,\r\n                        expand100: expand100_minerals\r\n                    }\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const createVitaminChartData = () => {\r\n        const vitaminData = props.precalculatedData !== undefined\r\n            ? props.precalculatedData\r\n            : getNutrientData(props.selectedFoodItem).vitaminData;\r\n\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.vitaminRequirementData;\r\n        const userData = applicationContext.userData\r\n        const dataSettings = applicationContext.dataSettings\r\n        const portionAmount = portionType_vitamins === AMOUNT_100_GRAM ? 100 : props.selectedFoodItem.portion.amount\r\n\r\n        if (!vitaminData || !requirementData) {\r\n            return null\r\n        }\r\n\r\n        const chartDisplayData = getVitaminChartData(vitaminData, requirementData, userData, dataSettings, portionAmount)\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_chart_green_3\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_vitamins[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n    const createMineralChartData = () => {\r\n        const mineralData = props.precalculatedData !== undefined ? props.precalculatedData : getNutrientData(props.selectedFoodItem).mineralData;\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.mineralRequirementData;\r\n        const userData = applicationContext.userData\r\n        const portionAmount = portionType_minerals === AMOUNT_100_GRAM ? 100 : props.selectedFoodItem.portion.amount\r\n\r\n        if (!mineralData || !requirementData) {\r\n            return null\r\n        }\r\n\r\n        const chartDisplayData = getMineralsChartData(mineralData, requirementData, userData, portionAmount, lang)\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_purple\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_minerals[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value=event.target.value\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            setPortionType_vitamins(value)\r\n        } else if (props.selectedSubChart === CHART_MINERALS) {\r\n            setPortionType_minerals(value)\r\n        }\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            setExpand100_vitamins(!expand100_vitamins)\r\n        } else if (props.selectedSubChart === CHART_MINERALS) {\r\n            setExpand100_minerals(!expand100_minerals)\r\n        }\r\n    }\r\n\r\n    const openVitaminMineralBook = (selectedColumn: string) => {\r\n        setSelectedColumnLabel(selectedColumn)\r\n        setShowBookModal(true)\r\n    }\r\n\r\n    const getOptions = (title, maxValue, data) => {\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals;\r\n        const overallMaxValue = props.directCompareConfig && props.directCompareConfig.maxValue\r\n            ? props.directCompareConfig.maxValue\r\n            : maxValue\r\n\r\n        let maxYValue\r\n        if (!props.directCompareConfig) {\r\n            if (expand100 && overallMaxValue < 100) {\r\n                maxYValue = 100\r\n            }\r\n        } else {\r\n            if (props.directCompareConfig.maxValue) {\r\n                maxYValue = props.directCompareConfig.maxValue\r\n            }\r\n            if (expand100) {\r\n                if (maxYValue === undefined) {\r\n                    if (overallMaxValue < 100) {\r\n                        maxYValue = 100\r\n                    }\r\n                } else if (maxYValue < 100) {\r\n                    maxYValue = 100\r\n                }\r\n            }\r\n        }\r\n\r\n        const getScientificVitaminName = (vitamin: string): string | null => {\r\n            const includeProvitamins = applicationContext.dataSettings.includeProvitamins === OPTION_YES\r\n            if((vitamin.toLowerCase() === \"a\" || vitamin.toLowerCase() === \"e\") && !includeProvitamins) {\r\n                return null\r\n            }\r\n\r\n            const labelName = \"label_nutrient_vit_scientific_\" + vitamin.toLowerCase()\r\n            if(applicationStrings[labelName]) {\r\n                return applicationStrings[labelName][lang]\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n\r\n        let barChartOptions = getBarChartOptions(title, applicationStrings.label_requirement_chart[lang], maxYValue);\r\n\r\n        const handleChartClick = (c, i) => {\r\n            if(i && i[0]) {\r\n                const clickedColumnIndex = i[0].index;\r\n                const columnLabel = data.labels[clickedColumnIndex]\r\n                openVitaminMineralBook(columnLabel)\r\n            }\r\n        }\r\n\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            barChartOptions = {\r\n                ...barChartOptions, plugins: {\r\n                    ...barChartOptions.plugins, tooltip: {\r\n                        ...barChartOptions.plugins.tooltip, callbacks: {\r\n                            ...barChartOptions.plugins.tooltip.callbacks,\r\n                            title: function (context) {\r\n                                if (context && context.length > 0) {\r\n                                    const scientificName = getScientificVitaminName(context[0].label)\r\n                                    let title = `Vitamin ${context[0].label}`\r\n                                    if(scientificName) {\r\n                                        title = `${title}  (${scientificName})`\r\n                                    }\r\n                                    return title\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                onClick: handleChartClick\r\n            }\r\n        }\r\n\r\n        if (props.selectedSubChart === CHART_MINERALS) {\r\n            barChartOptions = {...barChartOptions, onClick: handleChartClick}\r\n        }\r\n\r\n        return barChartOptions\r\n    }\r\n\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const portionType = props.selectedSubChart === CHART_VITAMINS ? portionType_vitamins : portionType_minerals;\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals;\r\n\r\n        const barChartProps = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps} />\r\n    }\r\n\r\n\r\n    const data = props.selectedSubChart === CHART_VITAMINS ? createVitaminChartData() : createMineralChartData();\r\n\r\n    if (!data) {\r\n        return <div/>\r\n    }\r\n\r\n    const maxValue = (data && data.datasets && data.datasets.length > 0) ? Math.max(...data.datasets[0].data) : 0;\r\n\r\n    const title = props.selectedSubChart === CHART_VITAMINS ? applicationStrings.label_charttype_vitamins[lang] :\r\n        applicationStrings.label_charttype_minerals[lang];\r\n\r\n    const options = getOptions(title, maxValue, data);\r\n\r\n    const chartClass = props.directCompareUse ? \"col-12 chart-area-dc\" : \"col-12 chart-area\"\r\n    const bookData = props.selectedSubChart === CHART_VITAMINS ? nutrientBook.vitamins : nutrientBook.minerals\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            {showBookModal &&\r\n                <VitaminsBook selectedDataTab={props.selectedSubChart}\r\n                              bookData={bookData}\r\n                              initiallySelectedItem={selectedColumnLabel}\r\n                              closeBookModal={() => setShowBookModal(false)}/>\r\n            }\r\n            <div className=\"row\" key={\"base chart container vit-min\"}>\r\n                <div className={chartClass}>\r\n                    <Bar\r\n                        data={data}\r\n                        key={'chart min-vit'}\r\n                        options={options}\r\n                    />\r\n                </div>\r\n            </div>\r\n            {props.directCompareUse !== true &&\r\n            <div className=\"chart-control-button-bar\">\r\n                {renderChartConfigurationForm()}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {LipidData, OmegaData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {autoRound} from \"../calculation/MathService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as ChartConfig from \"../../config/ChartConfig\";\r\nimport {ChartDisplayData, LegendData} from \"../../types/livedata/ChartDisplayData\";\r\n\r\nexport function getTotalLipidsChartData(lipidsData: LipidData, hideRemainders: boolean, portionAmount: number,\r\n                                           language: string): ChartDisplayData {\r\n    const {saturated, unsaturatedMono, unsaturatedPoly} = lipidsData\r\n\r\n    let valueRemainder = portionAmount - (saturated!! + unsaturatedMono!! + unsaturatedPoly!!);\r\n    if (valueRemainder < 0) {\r\n        valueRemainder = 0\r\n    }\r\n\r\n    const portionAmountToUse = hideRemainders ? portionAmount - valueRemainder : portionAmount\r\n    valueRemainder = autoRound(valueRemainder / portionAmount * 100);\r\n\r\n    const valueSaturated = autoRound(saturated!! / portionAmountToUse * 100);\r\n    const valueUnsaturatedMono = autoRound(unsaturatedMono!! / portionAmountToUse * 100);\r\n    const valueUnsaturatedPoly = autoRound(unsaturatedPoly!! / portionAmountToUse * 100);\r\n\r\n    const labels: string[] = [applicationStrings.label_nutrient_lipids_saturated_short[language],\r\n        applicationStrings.label_nutrient_lipids_unsaturated_mono_short[language],\r\n        applicationStrings.label_nutrient_lipids_unsaturated_poly_short[language]]\r\n\r\n    const colors: string[] = [\r\n        ChartConfig.color_lipids_saturated,\r\n        ChartConfig.color_lipids_unsaturated_mono,\r\n        ChartConfig.color_lipids_unsaturated_poly]\r\n\r\n    const values: number[] = [valueSaturated,\r\n        valueUnsaturatedMono,\r\n        valueUnsaturatedPoly]\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_nutrient_remainder[language])\r\n        colors.push(ChartConfig.color_lipids_misc)\r\n        values.push(valueRemainder)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getOmegaChartData(omegaData: OmegaData, hideRemainders: boolean, totalAmount: number, lang: string): ChartDisplayData | null {\r\n    if (omegaData === null || omegaData.omega3 === null || omegaData.omega6 === null || omegaData.uncertain === null) {\r\n        return null;\r\n    }\r\n\r\n    const valueOmega3 = autoRound(omegaData.omega3 / totalAmount * 100);\r\n    const valueOmega6 = autoRound(omegaData.omega6 / totalAmount * 100);\r\n    const valueUncertain = autoRound(omegaData.uncertain / totalAmount * 100);\r\n\r\n    const labels: string[] = [applicationStrings.label_nutrient_omega3[lang],\r\n        applicationStrings.label_nutrient_omega6[lang]]\r\n\r\n    const values: number[] = [valueOmega3,\r\n        valueOmega6]\r\n\r\n    const colors: string[] = [\r\n        ChartConfig.color_lipids_omega3,\r\n        ChartConfig.color_lipids_omega6\r\n    ]\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_unknown[lang])\r\n        colors.push(ChartConfig.color_lipids_misc)\r\n        values.push(valueUncertain)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getLipidsBaseChartLegend(language: string): LegendData[] {\r\n    return [\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids_saturated[language],\r\n            color: ChartConfig.color_lipids_saturated,\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids_unsaturated_mono[language],\r\n            color: ChartConfig.color_lipids_unsaturated_mono\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids_unsaturated_poly[language],\r\n            color: ChartConfig.color_lipids_unsaturated_poly,\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_remainder[language],\r\n            color: ChartConfig.color_lipids_misc\r\n        },\r\n    ];\r\n}\r\n\r\nexport function getLipidsOmegaChartLegend(language: string): LegendData[] {\r\n    return [\r\n        {\r\n            item: applicationStrings.label_nutrient_omega3[language],\r\n            color: ChartConfig.color_lipids_omega3,\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_omega6[language],\r\n            color: ChartConfig.color_lipids_omega6\r\n        },\r\n        {\r\n            item: applicationStrings.label_unknown[language],\r\n            color: ChartConfig.color_lipids_misc,\r\n        },\r\n    ];\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\n\r\nimport * as Constants from \"../../../config/Constants\"\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE, LIPIDS_DATA_BASE} from \"../../../config/Constants\"\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {OmegaData} from \"../../../types/nutrientdata/FoodItem\";\r\nimport {initialChartConfigData, minimalOmegaRatio} from \"../../../config/ApplicationSetting\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {LipidsDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {\r\n    getLipidsBaseChartLegend,\r\n    getLipidsOmegaChartLegend,\r\n    getOmegaChartData,\r\n    getTotalLipidsChartData\r\n} from \"../../../service/chartdata/LipidsChartDataService\";\r\n\r\nexport default function LipidsDataChart(props: LipidsDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.lipidsChartConfig\r\n            : initialChartConfigData.lipidsChartConfig\r\n\r\n    const initialExpand100 =  props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.expand100\r\n        : chartConfig.expand100\r\n\r\n    const initialHideRemainders =  props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.hideRemainders\r\n        : chartConfig.hideRemainders\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [hideRemainders, setShowHideRemainders] = useState<boolean>(initialHideRemainders ? initialHideRemainders : true)\r\n    const [expand100, setExpand100] = useState<boolean>(initialExpand100 ? initialExpand100 : false)\r\n    const [subChart, setSubChart] = useState<string>(chartConfig.subChart ? chartConfig.subChart : LIPIDS_DATA_BASE)\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setSubChart(chartConfig.subChart ? chartConfig.subChart : LIPIDS_DATA_BASE)\r\n        }\r\n\r\n        updateChartConfig()\r\n    }, [chartType, showLegend, hideRemainders, expand100, subChart, windowSize, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData.lipidsChartConfig\r\n            if (chartType !== currentConfig.chartType\r\n                || hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100\r\n                || subChart !== currentConfig.subChart\r\n                || showLegend !== currentConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    lipidsChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: showLegend,\r\n                        subChart: subChart,\r\n                        hideRemainders: hideRemainders,\r\n                        expand100: expand100\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        } else if(applicationContext) {\r\n            const currentConfig = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n            if (hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100) {\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.expand100 = expand100\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.hideRemainders = hideRemainders\r\n            }\r\n        }\r\n    }\r\n\r\n    const totalLipidsAmount = getNutrientData(props.selectedFoodItem).baseData.lipids;\r\n\r\n    const handleChartSelectionChange = (event: any) => {\r\n        const value = event.target.value\r\n        if (props.directCompareConfig && props.directCompareConfig.handleSubchartChange) {\r\n            props.directCompareConfig.handleSubchartChange(event)\r\n        } else {\r\n            setSubChart(value)\r\n        }\r\n    }\r\n\r\n    const handleExpand100Change = () => {\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleHideRemaindersCheckbox = () => {\r\n        setShowHideRemainders(!hideRemainders)\r\n    }\r\n\r\n    const createTotalChartData = (totalAmount: number): any => {\r\n        const chartDisplayData  = getTotalLipidsChartData(lipidData, hideRemainders, totalAmount, lang)\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const createOmegaChartData = (totalAmount: number, omegaData: OmegaData) => {\r\n        const chartDisplayData = getOmegaChartData(omegaData, hideRemainders, totalAmount, lang)\r\n        if(!chartDisplayData) {\r\n            return null\r\n        }\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const lipidData = getNutrientData(props.selectedFoodItem).lipidData;\r\n\r\n    let omegaDataAvailabe = false\r\n    if (lipidData.omegaData && lipidData.omegaData.uncertainRatio && lipidData.omegaData.uncertainRatio <= minimalOmegaRatio) {\r\n        omegaDataAvailabe = true\r\n    }\r\n\r\n    const chartColType = chartType === CHART_TYPE_PIE ? \"col-6\" : \"col-8\";\r\n\r\n    const getOptions = () => {\r\n        let title;\r\n\r\n        if (subChart === Constants.LIPIDS_DATA_BASE) {\r\n            title = applicationStrings.label_charttype_lipids_base_title[lang]\r\n        } else if (subChart === Constants.LIPIDS_DATA_OMEGA) {\r\n            title = applicationStrings.label_charttype_lipids_omega_title[lang];\r\n        }\r\n\r\n        if (chartType === CHART_TYPE_BAR) {\r\n            return expand100 ? getBarChartOptions(title, \"%\", 100) : getBarChartOptions(title, \"%\");\r\n        } else {\r\n            return getPieChartOptions(title, \"%\");\r\n        }\r\n    }\r\n\r\n    const renderChartSelector = () => {\r\n        return (\r\n            <div>\r\n                <Form>\r\n                    <Form.Label>\r\n                        <b>{applicationStrings.label_datatype[languageContext.language]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_charttype_lipids_base[lang]}\r\n                                type=\"radio\"\r\n                                value={Constants.LIPIDS_DATA_BASE}\r\n                                checked={subChart === Constants.LIPIDS_DATA_BASE}\r\n                                onChange={handleChartSelectionChange}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_charttype_lipids_omega[lang]}\r\n                                type=\"radio\"\r\n                                value={Constants.LIPIDS_DATA_OMEGA}\r\n                                checked={subChart === Constants.LIPIDS_DATA_OMEGA}\r\n                                onChange={handleChartSelectionChange}>\r\n                    </Form.Check>\r\n                </Form>\r\n                <hr/>\r\n                <Form>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_expand100g[lang]}\r\n                                type=\"checkbox\"\r\n                                disabled={chartType === Constants.CHART_TYPE_PIE}\r\n                                checked={expand100}\r\n                                onChange={handleExpand100Change}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_chartoption_hideRemainders[lang]}\r\n                                type=\"checkbox\"\r\n                                disabled={subChart === Constants.LIPIDS_DATA_OMEGA}\r\n                                checked={hideRemainders}\r\n                                onChange={handleHideRemaindersCheckbox}>\r\n                    </Form.Check>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderChart = (lipidsType, omegaDataAvailable?) => {\r\n        const {saturated, unsaturatedMono, unsaturatedPoly, omegaData} = lipidData\r\n\r\n        const chartClass = props.directCompareUse ? \"col-12 chart-area-dc\" : \"col-12 chart-area\"\r\n\r\n        let data\r\n        if (lipidsType === Constants.LIPIDS_DATA_BASE) {\r\n            if (!saturated || !unsaturatedMono || !unsaturatedPoly) {\r\n                return <div className={chartClass}>{applicationStrings.label_noData[lang]}</div>\r\n            }\r\n            data = createTotalChartData(totalLipidsAmount);\r\n        } else if (lipidsType === Constants.LIPIDS_DATA_OMEGA) {\r\n            if (omegaData && omegaDataAvailable) {\r\n                data = createOmegaChartData(totalLipidsAmount, omegaData)\r\n            } else {\r\n                return <div className={chartClass}>{applicationStrings.label_noData[lang]}</div>\r\n            }\r\n        }\r\n\r\n        if (!data) {\r\n            return <div className={chartClass}>{applicationStrings.label_noData[lang]}</div>\r\n        }\r\n\r\n        return (\r\n            <div className={chartClass}>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie data={data}\r\n                     key={'chart lipids'}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar data={data}\r\n                     key={'chart lipids'}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" key={\"lipids container \"}>\r\n                <div className=\"col-3 text-align-center\">\r\n                    {renderChartSelector()}\r\n                </div>\r\n                <div className={chartColType}>\r\n                    {subChart === Constants.LIPIDS_DATA_BASE &&\r\n                    renderChart(Constants.LIPIDS_DATA_BASE)\r\n                    }\r\n                    {subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    renderChart(Constants.LIPIDS_DATA_OMEGA, omegaDataAvailabe)\r\n                    }\r\n                </div>\r\n\r\n                {showLegend && chartType === CHART_TYPE_PIE &&\r\n                <div className=\"col-3\">\r\n                    {subChart === Constants.LIPIDS_DATA_BASE &&\r\n                    <CustomLegend legendData={getLipidsBaseChartLegend(lang)}/>\r\n                    }\r\n                    {subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    <CustomLegend legendData={getLipidsOmegaChartLegend(lang)}/>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareConfig &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                <PieChartConfigurationForm key={\"Config Lipids Chart\"}\r\n                                           chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckbox}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {AMOUNT_PORTION} from \"../../../config/Constants\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\"\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../../charthelper/BarChartConfigurationForm\";\r\nimport {ProteinDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {getProteinChartData} from \"../../../service/chartdata/ProteinChartDataService\";\r\n\r\nexport default function ProteinDataChart(props: ProteinDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    useWindowDimension();\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.proteinChartConfig\r\n            : initialChartConfigData.proteinChartConfig\r\n\r\n    const [portionType, setPortionType] = useState<string>(chartConfig.portionType)\r\n    const [expand100, setExpand100] = useState<boolean>(chartConfig.expand100)\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setExpand100(chartConfig.expand100)\r\n            setPortionType(chartConfig.portionType)\r\n        }\r\n\r\n        updateChartConfig()\r\n    }, [portionType, expand100, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentSetting = applicationContext.applicationData.foodDataPanel.chartConfigData.proteinChartConfig\r\n            if (expand100 !== currentSetting.expand100 || portionType !== currentSetting.portionType) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    proteinChartConfig: {\r\n                        portionType: portionType,\r\n                        expand100: expand100\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const createProteinChartData = () => {\r\n        const proteinData = getNutrientData(props.selectedFoodItem).proteinData;\r\n        if (!proteinData || !applicationContext) {\r\n            return null;\r\n        }\r\n\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.proteinRequirementData;\r\n        if (!requirementData) {\r\n            return null;\r\n        }\r\n\r\n        const userData = applicationContext.userData;\r\n        const portionAmount = portionType === AMOUNT_PORTION ? props.selectedFoodItem.portion.amount : 100;\r\n        const chartDisplayData = getProteinChartData(proteinData, requirementData, userData, portionAmount, lang)\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_proteins\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_proteins[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value=event.target.value\r\n        setPortionType(value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const getOptions = (title, maxValue) => {\r\n        const overallMaxValue = props.directCompareConfig && props.directCompareConfig.maxValue\r\n            ? props.directCompareConfig.maxValue\r\n            : maxValue\r\n\r\n        let maxYValue\r\n        if (!props.directCompareConfig) {\r\n            if (expand100 && overallMaxValue < 100) {\r\n                maxYValue = 100\r\n            }\r\n        } else {\r\n            if (props.directCompareConfig.maxValue) {\r\n                maxYValue = props.directCompareConfig.maxValue\r\n            }\r\n            if (expand100) {\r\n                if (maxYValue === undefined) {\r\n                    if (overallMaxValue < 100) {\r\n                        maxYValue = 100\r\n                    }\r\n                } else if (maxYValue < 100) {\r\n                    maxYValue = 100\r\n                }\r\n            }\r\n        }\r\n\r\n        return getBarChartOptions(title, applicationStrings.label_requirement_chart[lang], maxYValue);\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const barChartProps = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps} />\r\n    }\r\n\r\n    const data = createProteinChartData();\r\n    if (!data) {\r\n        return <div/>\r\n    }\r\n\r\n    const maxValue = (data && data.datasets && data.datasets.length > 0) ? Math.max(...data.datasets[0].data) : 0;\r\n    const options = getOptions(applicationStrings.label_charttype_proteins[lang], maxValue);\r\n    const dataExists = data.datasets && data.datasets[0].data && data.datasets[0].data.length > 0\r\n\r\n    const chartClass = props.directCompareUse ? \"col-12 chart-area-dc\" : \"col-12 chart-area\"\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" key={\"base chart container proteins\"}>\r\n                <div className={chartClass}>\r\n                    {dataExists &&\r\n                    <Bar\r\n                        data={data}\r\n                        key={'chart proteins'}\r\n                        options={options}\r\n                    />\r\n                    }\r\n                    {!dataExists &&\r\n                    <p className=\"text-center\">\r\n                        {applicationStrings.label_noData[lang]}\r\n                    </p>\r\n                    }\r\n                </div>\r\n            </div>\r\n            {props.directCompareUse !== true &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                {renderChartConfigurationForm()}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {UserData} from \"../../types/livedata/UserData\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {determineProteinRequirementRatio} from \"../calculation/DietaryRequirementService\";\r\nimport {ProteinData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {ProteinRequirementData} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {ChartDisplayData} from \"../../types/livedata/ChartDisplayData\";\r\n\r\nexport function getProteinChartData(proteinData: ProteinData, requirementData: ProteinRequirementData,\r\n                                    userData: UserData, portionAmount: number, lang: string): ChartDisplayData {\r\n    const labels: Array<string> = [];\r\n    const values: Array<number> = [];\r\n\r\n    if (proteinData.histidine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_histidine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.histidine, proteinData.histidine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.isoleucine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_isoleucine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.isoleucine, proteinData.isoleucine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.leucine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_leucine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.leucine, proteinData.leucine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.lysine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_lysine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.lysine, proteinData.lysine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.methionine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_methionine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.methionine, proteinData.methionine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.phenylalanine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_phenylalanine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.phenylalanine, proteinData.phenylalanine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.threonine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_threonine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.threonine, proteinData.threonine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.tryptophan !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_tryptophan[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.tryptophan, proteinData.tryptophan, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.valine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_valine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.valine, proteinData.valine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.cystine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_cystine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.cystine, proteinData.cystine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values\r\n    }\r\n}","import {autoRound} from \"../calculation/MathService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as ChartConfig from \"../../config/ChartConfig\";\r\nimport {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {ChartDisplayData, LegendData} from \"../../types/livedata/ChartDisplayData\";\r\n\r\nexport function getCarbBaseChartData(nutrientData: NutrientData, hideRemainders: boolean, totalAmount: number,\r\n                                     language: string): ChartDisplayData | null {\r\n    let totalCarbsAmount = nutrientData.baseData.carbohydrates;\r\n    let dietaryFibers = nutrientData.baseData.dietaryFibers;\r\n    let sugar = nutrientData.carbohydrateData.sugar\r\n\r\n    // NOTE: Sometimes the sugar or dietary fibers value is above the carbs value, which is impossible (> 100 %)\r\n    if(sugar && (sugar > totalCarbsAmount)) {\r\n        sugar = totalCarbsAmount\r\n    }\r\n    if(dietaryFibers && (dietaryFibers > totalCarbsAmount)) {\r\n        dietaryFibers = totalCarbsAmount\r\n    }\r\n    if(sugar && dietaryFibers && (sugar + dietaryFibers > totalCarbsAmount)) {  // Special case, where sug + fibers are above the 100 %\r\n        sugar = (sugar / (sugar+dietaryFibers)) * totalCarbsAmount\r\n        dietaryFibers = (dietaryFibers / (sugar+dietaryFibers)) * totalCarbsAmount\r\n    }\r\n\r\n    if (!sugar || !dietaryFibers) {\r\n        return null\r\n    }\r\n\r\n    let valueRemainder = totalCarbsAmount - (sugar + dietaryFibers);\r\n    if (valueRemainder < 0) {\r\n        valueRemainder = 0\r\n    }\r\n\r\n    totalCarbsAmount = hideRemainders ? totalCarbsAmount - valueRemainder : totalCarbsAmount\r\n    valueRemainder = autoRound(valueRemainder / totalCarbsAmount * 100);\r\n\r\n    const valueSugar = autoRound(sugar / totalCarbsAmount * 100);\r\n    const valueDietaryFibers = autoRound(dietaryFibers / totalCarbsAmount * 100);\r\n\r\n    if (totalCarbsAmount === 0) {\r\n        return null;\r\n    }\r\n\r\n    const labels = [applicationStrings.label_nutrient_sugar[language],\r\n        applicationStrings.label_nutrient_dietaryFibers[language],\r\n    ]\r\n\r\n    const data = [valueSugar,\r\n        valueDietaryFibers]\r\n\r\n    const colors = [\r\n        ChartConfig.color_chart_green_3,\r\n        ChartConfig.color_chart_green_2,\r\n    ]\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_nutrient_remainder[language])\r\n        colors.push(ChartConfig.color_chart_misc)\r\n        data.push(valueRemainder)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: data,\r\n        colors: colors\r\n    }\r\n}\r\n\r\nexport function getCarbDetailsChartData(nutrientData: NutrientData, hideRemainders: boolean, totalAmount: number,\r\n                                        language: string): ChartDisplayData | null {\r\n    const {carbohydrateData, baseData} = nutrientData\r\n\r\n    const valueGlucose = carbohydrateData.glucose !== null ? autoRound(carbohydrateData.glucose / totalAmount * 100) : null;\r\n    const valueFructose = carbohydrateData.fructose !== null ? autoRound(carbohydrateData.fructose / totalAmount * 100) : null;\r\n    const valueGalactose = carbohydrateData.galactose !== null ? autoRound(carbohydrateData.galactose / totalAmount * 100) : null;\r\n    const valueSucrose = carbohydrateData.sucrose !== null ? autoRound(carbohydrateData.sucrose / totalAmount * 100) : null;\r\n    const valueLactose = carbohydrateData.lactose !== null ? autoRound(carbohydrateData.lactose / totalAmount * 100) : null;\r\n    const valueMaltose = carbohydrateData.maltose !== null ? autoRound(carbohydrateData.maltose / totalAmount * 100) : null;\r\n    const valueStarch = carbohydrateData.starch !== null ? autoRound(carbohydrateData.starch / totalAmount * 100) : null;\r\n\r\n    const valueDietaryFibers = baseData.dietaryFibers !== null ? autoRound(baseData.dietaryFibers / totalAmount * 100) : null;\r\n\r\n    if (!valueMaltose && !valueSucrose && !valueLactose && !valueGlucose && !valueFructose && !valueGalactose) {\r\n        return null\r\n    }\r\n\r\n    let valueRemainder = 100\r\n\r\n    const labels: string[] = []\r\n    const data: number[] = []\r\n    const colors: string[] = []\r\n\r\n    if (valueGlucose) {\r\n        valueRemainder -= valueGlucose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_glucose[language])\r\n        data.push(valueGlucose)\r\n        colors.push(ChartConfig.color_carbs_mono_glucose)\r\n    }\r\n    if (valueFructose) {\r\n        valueRemainder -= valueFructose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_fructose[language])\r\n        data.push(valueFructose)\r\n        colors.push(ChartConfig.color_carbs_mono_fructose)\r\n    }\r\n    if (valueGalactose) {\r\n        valueRemainder -= valueGalactose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_galactose[language])\r\n        data.push(valueGalactose)\r\n        colors.push(ChartConfig.color_carbs_mono_galactose)\r\n    }\r\n    if (valueSucrose) {\r\n        valueRemainder -= valueSucrose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_sucrose[language])\r\n        data.push(valueSucrose)\r\n        colors.push(ChartConfig.color_carbs_di_sucrose)\r\n    }\r\n    if (valueLactose) {\r\n        valueRemainder -= valueLactose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_lactose[language])\r\n        data.push(valueLactose)\r\n        colors.push(ChartConfig.color_carbs_di_lactose)\r\n    }\r\n    if (valueMaltose) {\r\n        valueRemainder -= valueMaltose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_maltose[language])\r\n        data.push(valueMaltose)\r\n        colors.push(ChartConfig.color_carbs_di_maltose)\r\n    }\r\n    if (valueStarch) {\r\n        valueRemainder -= valueStarch\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_starch[language])\r\n        data.push(valueStarch)\r\n        colors.push(ChartConfig.color_carbs_starch)\r\n    }\r\n\r\n    if (valueDietaryFibers) {\r\n        valueRemainder -= valueDietaryFibers\r\n        labels.push(applicationStrings.label_nutrient_dietaryFibers[language])\r\n        data.push(valueDietaryFibers)\r\n        colors.push(ChartConfig.color_carbs_dietaryFibers)\r\n    }\r\n\r\n    valueRemainder = autoRound(valueRemainder);\r\n    if (valueRemainder < 0) {\r\n        valueRemainder = 0;\r\n    }\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_nutrient_remainder[language])\r\n        data.push(valueRemainder)\r\n        colors.push(ChartConfig.color_chart_misc)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: data,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getCarbsBaseLegend(labels: string[], language: string): LegendData[] {\r\n    const legendData: Array<any> = []\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_sugar[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_sugar[language],\r\n            color: ChartConfig.color_chart_green_3,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_dietaryFibers[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_dietaryFibers[language],\r\n            color: ChartConfig.color_chart_green_2,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_remainder[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_remainder[language],\r\n            color: ChartConfig.color_chart_misc,\r\n        })\r\n    }\r\n\r\n    return legendData;\r\n}\r\n\r\n\r\nexport function getCarbsDetailsLegend(labels: string[], language: string): LegendData[] {\r\n    const legendData: Array<any> = []\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_glucose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_glucose[language],\r\n            color: ChartConfig.color_carbs_mono_glucose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_fructose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_fructose[language],\r\n            color: ChartConfig.color_carbs_mono_fructose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_galactose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_galactose[language],\r\n            color: ChartConfig.color_carbs_mono_galactose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_sucrose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_sucrose[language],\r\n            color: ChartConfig.color_carbs_di_sucrose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_lactose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_lactose[language],\r\n            color: ChartConfig.color_carbs_di_lactose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_maltose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_maltose[language],\r\n            color: ChartConfig.color_carbs_di_maltose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_starch[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_starch[language],\r\n            color: ChartConfig.color_carbs_starch,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_dietaryFibers[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_dietaryFibers[language],\r\n            color: ChartConfig.color_carbs_dietaryFibers,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_remainder[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_remainder[language],\r\n            color: ChartConfig.color_chart_misc,\r\n        })\r\n    }\r\n\r\n    return legendData;\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport * as Constants from \"../../../config/Constants\"\r\nimport {CARBS_DATA_BASE, CHART_TYPE_BAR, CHART_TYPE_PIE} from \"../../../config/Constants\"\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {CarbDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {GeneralChartConfigDirectCompareWithSubCharts} from \"../../../types/livedata/ChartConfigData\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {\r\n    getCarbBaseChartData,\r\n    getCarbDetailsChartData,\r\n    getCarbsBaseLegend,\r\n    getCarbsDetailsLegend\r\n} from \"../../../service/chartdata/CarbsChartDataService\";\r\n\r\nexport default function CarbsDataChart(props: CarbDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    let chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.carbsChartConfig\r\n            : initialChartConfigData.carbsChartConfig\r\n\r\n    const initialExpand100 = props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.expand100\r\n        : chartConfig.expand100\r\n\r\n    const initialHideRemainders = props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.hideRemainders\r\n        : chartConfig.hideRemainders\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [hideRemainders, setShowHideRemainders] = useState<boolean>(initialHideRemainders ? initialHideRemainders : false)\r\n    const [expand100, setExpand100] = useState<boolean>(initialExpand100 ? initialExpand100 : false)\r\n    const [subChart, setSubChart] = useState<string>(chartConfig.subChart ? chartConfig.subChart : CARBS_DATA_BASE)\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setSubChart(chartConfig.subChart ? chartConfig.subChart : CARBS_DATA_BASE)\r\n        }\r\n\r\n        updateChartConfig()\r\n    }, [chartType, showLegend, hideRemainders, expand100, subChart, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData.carbsChartConfig\r\n            if (chartType !== currentConfig.chartType\r\n                || subChart !== currentConfig.subChart\r\n                || hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100\r\n                || showLegend !== currentConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    carbsChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: showLegend,\r\n                        hideRemainders: hideRemainders,\r\n                        expand100: expand100,\r\n                        subChart: subChart\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        } else if (applicationContext) {\r\n            const currentConfig = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n            if (hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100) {\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.expand100 = expand100\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.hideRemainders = hideRemainders\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleExpand100Change = () => {\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleHideRemaindersCheckbox = () => {\r\n        setShowHideRemainders(!hideRemainders)\r\n    }\r\n\r\n    const handleChartSelectionChange = (event: any) => {\r\n        const value = event.target.value\r\n\r\n        if (applicationContext && props.directCompareConfig) {\r\n            const currentSettings = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n            const carbsChartConfig: GeneralChartConfigDirectCompareWithSubCharts = props.directCompareConfig.chartIndex === 1\r\n                ? {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    hideRemainders: true,\r\n                    expand100: true,\r\n                    subChart1: event.target.value,\r\n                    subChart2: currentSettings.carbsChartConfig.subChart2\r\n                }\r\n                : {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    hideRemainders: true,\r\n                    expand100: true,\r\n                    subChart1: currentSettings.carbsChartConfig.subChart1,\r\n                    subChart2: event.target.value\r\n                }\r\n\r\n            const newChartConfig = {\r\n                ...currentSettings,\r\n                carbsChartConfig: carbsChartConfig\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        } else {\r\n            setSubChart(value)\r\n        }\r\n    }\r\n\r\n    const createBasicChartData = () => {\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const totalAmount = getNutrientData(props.selectedFoodItem).baseData.carbohydrates;\r\n        const chartDisplayData = getCarbBaseChartData(nutrientData, hideRemainders, totalAmount, lang)\r\n\r\n        if (!chartDisplayData) {\r\n            return\r\n        }\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const createDetailChartData = () => {\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const totalAmount = getNutrientData(props.selectedFoodItem).baseData.carbohydrates;\r\n        const chartDisplayData = getCarbDetailsChartData(nutrientData, hideRemainders, totalAmount, lang)\r\n\r\n        if (!chartDisplayData) {\r\n            return\r\n        }\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value\r\n        setChartType(value)\r\n    }\r\n\r\n    const handleLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const getOptions = () => {\r\n        let title;\r\n\r\n        if (subChart === Constants.CARBS_DATA_BASE) {\r\n            title = applicationStrings.label_charttype_carbs_base[lang];\r\n        } else if (subChart === Constants.CARBS_DATA_DETAIL) {\r\n            title = applicationStrings.label_charttype_carbs_detail[lang];\r\n        }\r\n\r\n        if (chartType === CHART_TYPE_BAR) {\r\n            return expand100 ? getBarChartOptions(title, \"%\", 100) : getBarChartOptions(title, \"%\");\r\n        } else {\r\n            return getPieChartOptions(title, \"%\");\r\n        }\r\n    }\r\n\r\n\r\n    const renderChartSelector = () => {\r\n        return (\r\n            <Form>\r\n                <Form.Label>\r\n                    <b>{applicationStrings.label_datatype[lang]}:</b>\r\n                </Form.Label>\r\n                <Form.Check inline={false}\r\n                            className={\"form-radiobutton\"}\r\n                            label={applicationStrings.label_charttype_carbs_base[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.CARBS_DATA_BASE}\r\n                            checked={subChart === Constants.CARBS_DATA_BASE}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n                <Form.Check inline={false}\r\n                            className={\"form-radiobutton\"}\r\n                            label={applicationStrings.label_charttype_carbs_detail[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.CARBS_DATA_DETAIL}\r\n                            checked={subChart === Constants.CARBS_DATA_DETAIL}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n                <hr/>\r\n                <Form.Check inline={false}\r\n                            className=\"form-radiobutton\"\r\n                            label={applicationStrings.checkbox_expand100g[lang]}\r\n                            type=\"checkbox\"\r\n                            disabled={chartType === Constants.CHART_TYPE_PIE}\r\n                            checked={expand100}\r\n                            onChange={handleExpand100Change}>\r\n                </Form.Check>\r\n                <Form.Check inline={false}\r\n                            className=\"form-radiobutton\"\r\n                            label={applicationStrings.checkbox_chartoption_hideRemainders[lang]}\r\n                            type=\"checkbox\"\r\n                            disabled={subChart === Constants.CARBS_DATA_DETAIL}\r\n                            checked={hideRemainders}\r\n                            onChange={handleHideRemaindersCheckbox}>\r\n                </Form.Check>\r\n            </Form>\r\n        )\r\n    }\r\n\r\n\r\n    const renderChart = (data: any) => {\r\n        const chartClass = props.directCompareUse ? \"col-12 chart-area-dc\" : \"col-12 chart-area\"\r\n\r\n        if (!data) {\r\n            return (\r\n                <div className={chartClass}>\r\n                    {applicationStrings.label_noData[lang]}\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div className={chartClass}>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie data={data}\r\n                     key={'chart carbs'}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar data={data}\r\n                     key={'chart carbs'}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const chartColType = chartType === CHART_TYPE_PIE ? \"col-6\" : \"col-8\";\r\n    const detailChartData = createDetailChartData()\r\n    const basicChartData = createBasicChartData()\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" key={\"carbs container\"}>\r\n                <div className=\"col-3 text-align-center\">\r\n                    {renderChartSelector()}\r\n                </div>\r\n                <div className={chartColType}>\r\n                    {subChart === Constants.CARBS_DATA_BASE &&\r\n                    renderChart(basicChartData)\r\n                    }\r\n                    {subChart === Constants.CARBS_DATA_DETAIL &&\r\n                    renderChart(detailChartData)\r\n                    }\r\n                </div>\r\n\r\n                {showLegend && chartType === Constants.CHART_TYPE_PIE &&\r\n                <div className=\"col-3\">\r\n                    {subChart === Constants.CARBS_DATA_BASE && basicChartData &&\r\n                    <CustomLegend legendData={getCarbsBaseLegend(basicChartData.labels, lang)}/>\r\n                    }\r\n                    {subChart === Constants.CARBS_DATA_DETAIL && detailChartData &&\r\n                    <CustomLegend legendData={getCarbsDetailsLegend(detailChartData.labels, lang)}/>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareConfig &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckbox}/>\r\n\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n\r\n}","import * as Constants from \"../config/Constants\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {autoRound} from \"./calculation/MathService\";\r\nimport FoodItem from \"../types/nutrientdata/FoodItem\";\r\nimport FoodClass from \"../types/nutrientdata/FoodClass\";\r\nimport {getNameFromFoodNameList} from \"./nutrientdata/NameTypeService\";\r\nimport NameType from \"../types/nutrientdata/NameType\";\r\nimport {getNutrientDataForFoodItem} from \"./nutrientdata/NutrientDataRetriever\";\r\nimport getName from \"./LanguageService\";\r\nimport {\r\n    NUTRIENT_BASE_DATA_INDEX,\r\n    NUTRIENT_CARBS_INDEX,\r\n    NUTRIENT_LIPIDS_INDEX,\r\n    NUTRIENT_MINERAL_INDEX,\r\n    NUTRIENT_PROTEIN_INDEX,\r\n    NUTRIENT_VITAMIN_INDEX\r\n} from \"../config/Constants\";\r\nimport ReactSelectOption, {ReactSelectStringValueOption} from \"../types/ReactSelectOption\";\r\n\r\n\r\nexport interface ChartItem {\r\n    name: string\r\n    value: number\r\n    id?: number   // Possibly, the food item ID to which the bar refers to (juxtaposition chart)\r\n}\r\n\r\n/**\r\n * Returns a list of all ranking categories.\r\n */\r\nexport function getNutrientGroups(language: string): Array<ReactSelectOption> {\r\n    return [\r\n        {value: NUTRIENT_BASE_DATA_INDEX, label: applicationStrings.label_chart_nutrientComposition[language]},\r\n        {value: NUTRIENT_VITAMIN_INDEX, label: applicationStrings.label_nutrient_vit[language]},\r\n        {value: NUTRIENT_MINERAL_INDEX, label: applicationStrings.label_nutrient_min[language]},\r\n        {value: NUTRIENT_LIPIDS_INDEX, label: applicationStrings.label_nutrient_lipids_long[language]},\r\n        {value: NUTRIENT_CARBS_INDEX, label: applicationStrings.label_nutrient_carbohydrates[language]},\r\n        {value: NUTRIENT_PROTEIN_INDEX, label: applicationStrings.label_chart_proteins[language]},\r\n    ];\r\n}\r\n\r\n/**\r\n * Returns the nutrient group of a nutrient value.\r\n * @param groupIndex The group index (constant).\r\n * @param language The language to use.\r\n */\r\nexport function getNutrientGroup(nutrientValue: string, language: string): ReactSelectOption | undefined {\r\n    const groupIndex = getNutrientGroupFromValue(nutrientValue, language)\r\n    return getNutrientGroups(language).find(group => group.value === groupIndex)\r\n}\r\n\r\n/**\r\n * Given a nutrient value (constant), this function returns the nutrient group index to which the nutrient belongs.\r\n * @param nutrientValue A nutrient value (constant).\r\n * @return The nutrient group index (e.g. Base Data, Vitamin Data etc.).\r\n */\r\nexport function getNutrientGroupFromValue(nutrientValue: string, language: string): number {\r\n    const isNutrientInGroup = (nutrientValue: string, nutrientGroup: Array<ReactSelectStringValueOption>): boolean => {\r\n        return nutrientGroup.find(entry => entry.value === nutrientValue) !== undefined\r\n    }\r\n\r\n    if(isNutrientInGroup(nutrientValue, getVitaminCategoryValues(language))) {\r\n        return NUTRIENT_VITAMIN_INDEX\r\n    }\r\n\r\n    if(isNutrientInGroup(nutrientValue, getMineralCategoryValues(language))) {\r\n        return NUTRIENT_MINERAL_INDEX\r\n    }\r\n\r\n    if(isNutrientInGroup(nutrientValue, getLipidCategoryValues(language))) {\r\n        return NUTRIENT_LIPIDS_INDEX\r\n    }\r\n\r\n    if(isNutrientInGroup(nutrientValue, getCarbohydrateCategoryValues(language))) {\r\n        return NUTRIENT_CARBS_INDEX\r\n    }\r\n\r\n    if(isNutrientInGroup(nutrientValue, getProteinCategoryValues(language))) {\r\n        return NUTRIENT_PROTEIN_INDEX\r\n    }\r\n\r\n    return -1\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable vitamins.\r\n */\r\nexport function getBaseCategoryValues(language: string): Array<ReactSelectStringValueOption> {\r\n    return [\r\n        {value: Constants.DATA_ENERGY, label: applicationStrings.label_nutrient_energy[language]},\r\n        {value: Constants.DATA_WATER, label: applicationStrings.label_nutrient_water[language]},\r\n        {value: Constants.DATA_CARBS, label: applicationStrings.label_nutrient_carbohydrates[language]},\r\n        {value: Constants.DATA_LIPIDS, label: applicationStrings.label_nutrient_lipids_long[language]},\r\n        {value: Constants.DATA_PROTEINS, label: applicationStrings.label_nutrient_proteins[language]},\r\n        {value: Constants.DATA_CAFFEINE, label: applicationStrings.label_nutrient_caffeine[language]},\r\n        {value: Constants.DATA_ALCOHOL, label: applicationStrings.label_nutrient_alcohol[language]},\r\n        {value: Constants.DATA_ASH, label: applicationStrings.label_nutrient_ash[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable vitamin values.\r\n */\r\nexport function getVitaminCategoryValues(language: string): Array<ReactSelectStringValueOption> {\r\n    return [\r\n        {value: Constants.DATA_VITAMINS_A, label: applicationStrings.label_nutrient_vit_a[language]},\r\n        {value: Constants.DATA_VITAMINS_B1, label: applicationStrings.label_nutrient_vit_b1[language]},\r\n        {value: Constants.DATA_VITAMINS_B2, label: applicationStrings.label_nutrient_vit_b2[language]},\r\n        {value: Constants.DATA_VITAMINS_B3, label: applicationStrings.label_nutrient_vit_b3[language]},\r\n        {value: Constants.DATA_VITAMINS_B5, label: applicationStrings.label_nutrient_vit_b5[language]},\r\n        {value: Constants.DATA_VITAMINS_B6, label: applicationStrings.label_nutrient_vit_b6[language]},\r\n        {value: Constants.DATA_VITAMINS_B9, label: applicationStrings.label_nutrient_vit_b9[language]},\r\n        {value: Constants.DATA_VITAMINS_B12, label: applicationStrings.label_nutrient_vit_b12[language]},\r\n        {value: Constants.DATA_VITAMINS_C, label: applicationStrings.label_nutrient_vit_c[language]},\r\n        {value: Constants.DATA_VITAMINS_D, label: applicationStrings.label_nutrient_vit_d[language]},\r\n        {value: Constants.DATA_VITAMINS_E, label: applicationStrings.label_nutrient_vit_e[language]},\r\n        {value: Constants.DATA_VITAMINS_K, label: applicationStrings.label_nutrient_vit_k[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable mineral values.\r\n */\r\nexport function getMineralCategoryValues(language: string): Array<ReactSelectStringValueOption> {\r\n    return [\r\n        {value: Constants.DATA_MINERAL_CALCIUM, label: applicationStrings.label_nutrient_min_calcium[language]},\r\n        {value: Constants.DATA_MINERAL_IRON, label: applicationStrings.label_nutrient_min_iron[language]},\r\n        {value: Constants.DATA_MINERAL_MAGNESIUM, label: applicationStrings.label_nutrient_min_magnesium[language]},\r\n        {value: Constants.DATA_MINERAL_PHOSPHORUS, label: applicationStrings.label_nutrient_min_phosphorus[language]},\r\n        {value: Constants.DATA_MINERAL_POTASSIUM, label: applicationStrings.label_nutrient_min_potassium[language]},\r\n        {value: Constants.DATA_MINERAL_SODIUM, label: applicationStrings.label_nutrient_min_sodium[language]},\r\n        {value: Constants.DATA_MINERAL_ZINC, label: applicationStrings.label_nutrient_min_zinc[language]},\r\n        {value: Constants.DATA_MINERAL_SELENIUM, label: applicationStrings.label_nutrient_min_selenium[language]},\r\n        {value: Constants.DATA_MINERAL_MANGANESE, label: applicationStrings.label_nutrient_min_manganese[language]},\r\n        {value: Constants.DATA_MINERAL_COPPER, label: applicationStrings.label_nutrient_min_copper[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable mineral values.\r\n */\r\nexport function getLipidCategoryValues(language: string): Array<ReactSelectStringValueOption> {\r\n    return [\r\n        {value: Constants.DATA_LIPIDS_SATURATED, label: applicationStrings.label_nutrient_lipids_saturated[language]},\r\n        {\r\n            value: Constants.DATA_LIPIDS_MONO_UNSATURATED,\r\n            label: applicationStrings.label_nutrient_lipids_unsaturated_mono[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_LIPIDS_POLY_UNSATURATED,\r\n            label: applicationStrings.label_nutrient_lipids_unsaturated_poly[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_LIPIDS_TRANSFATTY_ACIDS,\r\n            label: applicationStrings.label_nutrient_lipids_unsaturated[language]\r\n        },\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable carbohydrate values.\r\n */\r\nexport function getCarbohydrateCategoryValues(language: string): Array<ReactSelectStringValueOption> {\r\n    return [\r\n        {value: Constants.DATA_CARBS_DIETARY_FIBERS, label: applicationStrings.label_nutrient_dietaryFibers[language]},\r\n        {value: Constants.DATA_CARBS_SUGAR, label: applicationStrings.label_nutrient_sugar[language]},\r\n        {value: Constants.DATA_CARBS_GLUCOSE, label: applicationStrings.label_nutrient_carbohydrates_glucose[language]},\r\n        {\r\n            value: Constants.DATA_CARBS_FRUCTOSE,\r\n            label: applicationStrings.label_nutrient_carbohydrates_fructose[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_CARBS_GALACTOSE,\r\n            label: applicationStrings.label_nutrient_carbohydrates_galactose[language]\r\n        },\r\n        {value: Constants.DATA_CARBS_SUCROSE, label: applicationStrings.label_nutrient_carbohydrates_sucrose[language]},\r\n        {value: Constants.DATA_CARBS_LACTOSE, label: applicationStrings.label_nutrient_carbohydrates_lactose[language]},\r\n        {value: Constants.DATA_CARBS_MALTOSE, label: applicationStrings.label_nutrient_carbohydrates_maltose[language]},\r\n        {value: Constants.DATA_CARBS_STARCH, label: applicationStrings.label_nutrient_carbohydrates_starch[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all protein values.\r\n */\r\nexport function getProteinCategoryValues(language: string): Array<ReactSelectStringValueOption> {\r\n    return [\r\n        {value: Constants.DATA_PROTEIN_ALANINE, label: applicationStrings.label_nutrient_proteins_alanine[language]},\r\n        {value: Constants.DATA_PROTEIN_ARGININE, label: applicationStrings.label_nutrient_proteins_arginine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_ASPARTIC_ACID,\r\n            label: applicationStrings.label_nutrient_proteins_asparticAcid[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_CYSTINE, label: applicationStrings.label_nutrient_proteins_cystine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_GLUTAMIC_ACID,\r\n            label: applicationStrings.label_nutrient_proteins_glutamicAcid[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_GLYCINE, label: applicationStrings.label_nutrient_proteins_glysine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_HISTIDINE,\r\n            label: applicationStrings.label_nutrient_proteins_histidine[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_PROTEIN_ISOLEUCINE,\r\n            label: applicationStrings.label_nutrient_proteins_isoleucine[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_LEUCINE, label: applicationStrings.label_nutrient_proteins_leucine[language]},\r\n        {value: Constants.DATA_PROTEIN_LYSINE, label: applicationStrings.label_nutrient_proteins_lysine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_METHIONINE,\r\n            label: applicationStrings.label_nutrient_proteins_methionine[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_PROTEIN_PHENYLALANINE,\r\n            label: applicationStrings.label_nutrient_proteins_phenylalanine[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_PROLINE, label: applicationStrings.label_nutrient_proteins_proline[language]},\r\n        {value: Constants.DATA_PROTEIN_SERINE, label: applicationStrings.label_nutrient_proteins_serine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_THREONINE,\r\n            label: applicationStrings.label_nutrient_proteins_threonine[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_PROTEIN_TRYPTOPHAN,\r\n            label: applicationStrings.label_nutrient_proteins_tryptophan[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_TYROSINE, label: applicationStrings.label_nutrient_proteins_tyrosine[language]},\r\n        {value: Constants.DATA_PROTEIN_VALINE, label: applicationStrings.label_nutrient_proteins_valine[language]},\r\n    ];\r\n}\r\n\r\n\r\nexport function getElementsOfRankingGroup(rankingGroup: number, language: string): Array<ReactSelectStringValueOption> {\r\n    switch (rankingGroup) {\r\n        case NUTRIENT_BASE_DATA_INDEX:\r\n            return getBaseCategoryValues(language)\r\n        case NUTRIENT_VITAMIN_INDEX:\r\n            return getVitaminCategoryValues(language)\r\n        case NUTRIENT_MINERAL_INDEX:\r\n            return getMineralCategoryValues(language)\r\n        case NUTRIENT_LIPIDS_INDEX:\r\n            return getLipidCategoryValues(language)\r\n        case NUTRIENT_CARBS_INDEX:\r\n            return getCarbohydrateCategoryValues(language)\r\n        case NUTRIENT_PROTEIN_INDEX:\r\n            return getProteinCategoryValues(language)\r\n        default:\r\n            return getBaseCategoryValues(language)  // Fallback\r\n    }\r\n}\r\n\r\n\r\nexport function getOrderedFoodList(foodList: Array<FoodItem>, foodClassesList: Array<FoodClass>, selectedCategory: number,\r\n                                   selectedValue: any, use100gram: number, language: string, foodNamesList: Array<NameType>,\r\n                                   conditions: Array<NameType>): Array<ChartItem> {\r\n    let chartItems: Array<ChartItem> = [];\r\n\r\n    for (let i = 0; i < foodList.length; i++) {\r\n        let foodItem: FoodItem = foodList[i];\r\n        const foodClassId = foodClassesList.find(foodClass => foodClass.id === foodItem.foodClass)\r\n        const category = foodClassId ? foodClassId.category : foodClassId\r\n\r\n        if (selectedCategory !== 0 && (category !== selectedCategory)) {\r\n            continue;  // Skip this food item, as it does not belong to the selected category\r\n        }\r\n\r\n        let value = getValueOfFoodItem(foodItem, selectedValue);\r\n        if (value === null || value === 0) {\r\n            continue;  // Skip all food items, which do not have the specified value\r\n        }\r\n\r\n        let portionAmount\r\n\r\n        if (!use100gram) {\r\n            const defaultPortion = foodItem.defaultPortionId\r\n            const portionObject = foodItem.portionData?.find(portionObject => portionObject.portionType === defaultPortion)\r\n            portionAmount = portionObject ? portionObject.amount : 100\r\n            value = getPortionValue(value, portionAmount);\r\n        } else {\r\n            value = autoRound(value)\r\n        }\r\n\r\n        let name = getNameFromFoodNameList(foodNamesList, foodItem.nameId!!, language)\r\n\r\n        if(foodItem.conditionId !== 100) {\r\n            const condition = conditions.find(condition => condition.id === foodItem.conditionId)\r\n            if(condition) {\r\n                const conditionName = getName(condition, language)\r\n                name = name + \", \" + conditionName\r\n            }\r\n        }\r\n\r\n        if(!use100gram) {\r\n            name = name + \" (\" + portionAmount + \"g )\"\r\n        }\r\n\r\n        const chartItem: ChartItem = {\r\n            name: name ? name : \"\",\r\n            value: value\r\n        };\r\n\r\n        chartItems.push(chartItem);\r\n    }\r\n\r\n    return sortChartItems(chartItems);\r\n}\r\n\r\n\r\nexport function sortChartItems(chartItems: Array<ChartItem>): Array<ChartItem> {\r\n    return chartItems.sort((obj1, obj2) => {\r\n        if (obj1.value > obj2.value) {\r\n            return -1;\r\n        } else if (obj1.value < obj2.value) {\r\n            return 1;\r\n        } else {\r\n            return 0;\r\n        }\r\n    });\r\n}\r\n\r\n\r\nexport function getValueOfFoodItem(foodItem: FoodItem, selectedValue: string, sourceToUse = 0, supplementData = false): number | null {\r\n    let value\r\n    const nutrientData = getNutrientDataForFoodItem(foodItem, sourceToUse, supplementData)\r\n\r\n    const { baseData, vitaminData, mineralData, lipidData, carbohydrateData, proteinData} = nutrientData;\r\n\r\n    if (proteinData === null) {\r\n        return 0;\r\n    }\r\n\r\n    // Base Data\r\n\r\n    if (selectedValue === Constants.DATA_ENERGY) {\r\n        value = baseData.energy;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_WATER) {\r\n        value = baseData.water;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS) {\r\n        value = baseData.carbohydrates;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS) {\r\n        value = baseData.lipids;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEINS) {\r\n        value = baseData.proteins;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_ASH) {\r\n        value = baseData.ash;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CAFFEINE) {\r\n        value = baseData.caffeine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_ALCOHOL) {\r\n        value = baseData.alcohol;\r\n    }\r\n\r\n\r\n    // Vitamins\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_A) {\r\n        value = vitaminData.a;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B1) {\r\n        value = vitaminData.b1;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B2) {\r\n        value = vitaminData.b2;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B3) {\r\n        value = vitaminData.b3;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B5) {\r\n        value = vitaminData.b5;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B6) {\r\n        value = vitaminData.b6;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B9) {\r\n        value = vitaminData.b9;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B12) {\r\n        value = vitaminData.b12;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_C) {\r\n        value = vitaminData.c;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_D) {\r\n        value = vitaminData.d;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_E) {\r\n        value = vitaminData.e;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_K) {\r\n        value = vitaminData.k;\r\n    }\r\n\r\n\r\n    // Minerals\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_CALCIUM) {\r\n        value = mineralData.calcium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_IRON) {\r\n        value = mineralData.iron;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_MAGNESIUM) {\r\n        value = mineralData.magnesium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_PHOSPHORUS) {\r\n        value = mineralData.phosphorus;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_POTASSIUM) {\r\n        value = mineralData.potassium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_SODIUM) {\r\n        value = mineralData.sodium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_ZINC) {\r\n        value = mineralData.zinc;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_SELENIUM) {\r\n        value = mineralData.selenium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_COPPER) {\r\n        value = mineralData.copper;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_MANGANESE) {\r\n        value = mineralData.manganese;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_SATURATED) {\r\n        value = lipidData.saturated;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_MONO_UNSATURATED) {\r\n        value = lipidData.unsaturatedMono;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_POLY_UNSATURATED) {\r\n        value = lipidData.unsaturatedPoly;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_TRANSFATTY_ACIDS) {\r\n        value = lipidData.transFattyAcids;\r\n    }\r\n\r\n    // Carbohydrates\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_DIETARY_FIBERS) {\r\n        value = baseData.dietaryFibers;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_SUGAR) {\r\n        value = carbohydrateData.sugar;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_GLUCOSE) {\r\n        value = carbohydrateData.glucose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_FRUCTOSE) {\r\n        value = carbohydrateData.fructose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_GALACTOSE) {\r\n        value = carbohydrateData.galactose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_SUCROSE) {\r\n        value = carbohydrateData.sucrose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_LACTOSE) {\r\n        value = carbohydrateData.lactose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_MALTOSE) {\r\n        value = carbohydrateData.maltose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_STARCH) {\r\n        value = carbohydrateData.starch;\r\n    }\r\n\r\n\r\n    // Proteins\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ALANINE) {\r\n        value = proteinData.alanine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ARGININE) {\r\n        value = proteinData.arginine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ASPARTIC_ACID) {\r\n        value = proteinData.asparticAcid;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_CYSTINE) {\r\n        value = proteinData.cystine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_GLUTAMIC_ACID) {\r\n        value = proteinData.glutamicAcid;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_GLYCINE) {\r\n        value = proteinData.glycine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_HISTIDINE) {\r\n        value = proteinData.histidine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ISOLEUCINE) {\r\n        value = proteinData.isoleucine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_LEUCINE) {\r\n        value = proteinData.leucine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_LYSINE) {\r\n        value = proteinData.lysine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_METHIONINE) {\r\n        value = proteinData.methionine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_PHENYLALANINE) {\r\n        value = proteinData.phenylalanine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_PROLINE) {\r\n        value = proteinData.proline;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_SERINE) {\r\n        value = proteinData.serine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_THREONINE) {\r\n        value = proteinData.threonine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_TRYPTOPHAN) {\r\n        value = proteinData.tryptophan;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_TYROSINE) {\r\n        value = proteinData.tyrosine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_VALINE) {\r\n        value = proteinData.valine;\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\nfunction getPortionValue(value, portionSize) {\r\n    const portionValue = value / 100 * portionSize;\r\n    return autoRound(portionValue);\r\n}","import {determineFoodRequirementRatio, determineProteinRequirementRatio} from \"./DietaryRequirementService\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport * as Constants from \"../../config/Constants\";\r\n\r\n/**\r\n * Determines the maximum vitamin or mineral or protein value of a food item (referring to the daily dietary requirements).\r\n */\r\nexport function getMaximumValue(dataSet: any, amount: number, requirementData: any, userData: UserData, proteins?: boolean) {\r\n    let maxValue = 0\r\n    for (let dataSetKey in dataSet) {\r\n        if (requirementData[dataSetKey]) {\r\n            const ratioValue = proteins === true\r\n                ? determineProteinRequirementRatio(requirementData[dataSetKey], dataSet[dataSetKey], amount, userData)\r\n                : determineFoodRequirementRatio(requirementData[dataSetKey], dataSet[dataSetKey], amount, userData)\r\n            if (ratioValue > maxValue) {\r\n                maxValue = ratioValue\r\n            }\r\n        }\r\n    }\r\n    return maxValue\r\n}\r\n\r\n\r\n/**\r\n * Given two data sets of values, this method determines the attributes that has values for both objects. It\r\n * can be used to remove all data attributes (columns) where at least one of the two data sets does not provide\r\n * a value.\r\n * @param dataSet1\r\n * @param dataSet2\r\n */\r\nexport function getOverlappingValues(dataSet1: any, dataSet2: any): string[] {\r\n    const overlapping: string[] = []\r\n    for (const dataSetKey in dataSet1) {\r\n        const value = dataSet1[dataSetKey]\r\n        if((value !== null && value !== undefined) && (dataSet2[dataSetKey] !== null && dataSet2[dataSetKey] !== undefined)) {\r\n            overlapping.push(dataSetKey)\r\n        }\r\n    }\r\n\r\n    return overlapping\r\n}\r\n\r\n\r\nexport function nullifyNonOverlappingValues(dataSet: any, overlappingAttributes: string[]): any {\r\n    const newDataset: any = {}\r\n    for (const dataSetKey in dataSet) {\r\n        if(!overlappingAttributes.includes(dataSetKey)) {\r\n            newDataset[dataSetKey] = null\r\n        } else {\r\n            newDataset[dataSetKey] = dataSet[dataSetKey]\r\n        }\r\n    }\r\n\r\n    return newDataset\r\n}\r\n\r\n/**\r\n * Returns the unit of a nutrient. This unit refers to the default unit of the Food Data Central data sheets (resp.\r\n * the Food Compare Catalog)\r\n * @param selectedValue The selected nutrient\r\n * @param transformToDietaryRequirements Optionally, the specification that the daily requirements are used as unit\r\n * @return The unit (g, mg or %).\r\n */\r\nexport const getUnit = (selectedValue: string, transformToDietaryRequirements?: boolean) => {\r\n    if (selectedValue === Constants.DATA_ENERGY) {\r\n        return \"kcal\";\r\n    } else if (selectedValue === Constants.DATA_WATER\r\n        || selectedValue === Constants.DATA_LIPIDS\r\n        || selectedValue === Constants.DATA_CARBS\r\n        || selectedValue === Constants.DATA_CARBS_SUGAR\r\n        || selectedValue === Constants.DATA_PROTEINS\r\n        || selectedValue === Constants.DATA_ASH\r\n        || selectedValue === Constants.DATA_CARBS_DIETARY_FIBERS\r\n        || selectedValue === Constants.DATA_LIPIDS_SATURATED\r\n        || selectedValue === Constants.DATA_LIPIDS_MONO_UNSATURATED\r\n        || selectedValue === Constants.DATA_LIPIDS_POLY_UNSATURATED\r\n        || selectedValue === Constants.DATA_LIPIDS_TRANSFATTY_ACIDS) {\r\n        return \"g\";\r\n    } else if (transformToDietaryRequirements) {\r\n        return \"%\";\r\n    } else {\r\n        return \"mg\";\r\n    }\r\n}","import {JuxtapositionChartProps} from \"../../types/livedata/ChartPropsData\";\r\nimport FoodDataCorpus from \"../../types/nutrientdata/FoodDataCorpus\";\r\nimport {ChartItem, getElementsOfRankingGroup, getValueOfFoodItem, sortChartItems} from \"../RankingService\";\r\nimport {\r\n    COMPARISON_REFERENCE_ALL,\r\n    COMPARISON_REFERENCE_ALL_IN_CATEGORY,\r\n    COMPARISON_REFERENCE_SELECTED_TABS,\r\n    LANGUAGE_DE\r\n} from \"../../config/Constants\";\r\nimport FoodItem from \"../../types/nutrientdata/FoodItem\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {getUnit} from \"../calculation/NutrientCalculationService\";\r\nimport {JuxtapositionTableEntry} from \"../../types/livedata/JuxtapositionTableEntry\";\r\nimport {autoRound, calculateMedian} from \"../calculation/MathService\";\r\n\r\nexport interface JuxtapostionChartData {\r\n    chartItems: Array<ChartItem>\r\n    nutrientName: string\r\n    unit: string\r\n}\r\n\r\n/**\r\n * Creates the chart data for a set of nutrient data. The set comprises the chart data for exactly one\r\n * group, such as base data, vitamins, lipids etc.\r\n * @param props The juxtaposition chart props containing settings information for chart data creation.\r\n * @param foodDataCorpus An instance of the Food Compare food data corpus.\r\n * @param referenceData The reference data to use.\r\n * @param language The currently set language.\r\n * @return A list of juxtaposition chart data objects that are used to create the different juxtaposition charts\r\n * for each nutrient in the selected group.\r\n */\r\nexport function createChartDataForJuxtapostionChart(props: JuxtapositionChartProps, foodDataCorpus: FoodDataCorpus,\r\n                                                    referenceData: Array<FoodItem>, language: string): Array<JuxtapostionChartData> {\r\n        const chartData: Array<JuxtapostionChartData> = []\r\n        const valuesInGroup = getElementsOfRankingGroup(props.selectedGroup, language)\r\n\r\n        if (!valuesInGroup) {\r\n            throw new Error(\"No group values available\")\r\n        }\r\n\r\n        valuesInGroup.forEach(valueInGroup => {\r\n            let chartItems: Array<ChartItem> = []\r\n            const nutrientName = valueInGroup.label\r\n            const unit = getUnit(valueInGroup.value)\r\n            referenceData.forEach(foodItem => {\r\n                const value = getValueOfFoodItem(foodItem, valueInGroup.value)\r\n                const nameKey = foodDataCorpus.foodNames.find(foodName => foodName.id === foodItem.nameId)\r\n                const name = language === LANGUAGE_DE ? nameKey?.germanName : nameKey?.englishName\r\n                const fooditemCondition = props.selectedFoodItem.foodItem.conditionId\r\n                const condition = foodDataCorpus.conditions.find(condition => condition.id === fooditemCondition)\r\n                const conditionName = condition !== undefined && condition.id !== 100\r\n                    ? language === LANGUAGE_DE\r\n                        ? condition.germanName\r\n                        : condition.englishName\r\n                    : null\r\n                const fullName = conditionName !== null ? `${name} (${conditionName})` : name\r\n                if (value !== null && value !== undefined) {\r\n                    chartItems.push({\r\n                        name: fullName ?? '',\r\n                        value: value,\r\n                        id: foodItem.id\r\n                    })\r\n                }\r\n            })\r\n\r\n            chartItems = sortChartItems(chartItems)\r\n            const atLeastOneValueAboveZero = Math.max(...chartItems.map(item => item.value)) > 0\r\n\r\n            if(atLeastOneValueAboveZero) {\r\n                chartData.push({\r\n                    nutrientName: nutrientName,\r\n                    unit: unit,\r\n                    chartItems: chartItems\r\n                })\r\n            }\r\n        })\r\n\r\n    return chartData\r\n}\r\n\r\n/**\r\n * Creates the table data for a set of nutrient data. The set comprises the chart data for exactly one\r\n * group, such as base data, vitamins, lipids etc.\r\n * @param props The juxtaposition chart props containing settings information for chart data creation.\r\n * @param foodDataCorpus An instance of the Food Compare food data corpus.\r\n * @param referenceData The reference data to use.\r\n * @param language The currently set language.\r\n * @return The data table object ready for the table to display (a list of JuxtapositionTableEntry objects, each\r\n * object representing one row in the table).\r\n */\r\nexport function createJuxtapositionTableData(props: JuxtapositionChartProps, foodDataCorpus: FoodDataCorpus,\r\n                                             referenceData: Array<FoodItem>, language: string): Array<JuxtapositionTableEntry> {\r\n    const tableData: Array<JuxtapositionTableEntry> = []\r\n    const valuesInGroup = getElementsOfRankingGroup(props.selectedGroup, language)\r\n\r\n    if (!valuesInGroup) {\r\n        throw new Error(\"No group values available\")\r\n    }\r\n\r\n    valuesInGroup.forEach(valueInGroup => {\r\n        const value = getValueOfFoodItem(props.selectedFoodItem.foodItem, valueInGroup.value)\r\n        const allValues: Array<number> = []\r\n        referenceData.forEach(foodItem => {\r\n            const value = getValueOfFoodItem(foodItem, valueInGroup.value)\r\n            if(value !== null) {\r\n                allValues.push(value)\r\n            }\r\n        })\r\n\r\n        // Do not show nutrient elements, if the selected food item does not have this value.\r\n        if(allValues.length === 0 || value === null) {\r\n            return\r\n        }\r\n\r\n        const minValue = Math.min(...allValues)\r\n        const maxValue = Math.max(...allValues)\r\n        const averageValue = allValues.reduce((a,b) => a + b, 0) / allValues.length\r\n\r\n        const sorted = allValues.sort((a, b) => b-a)\r\n        const centerValue = sorted.length / 2\r\n        const medianValue = calculateMedian(allValues)\r\n\r\n        const rank = sorted.findIndex(num => num === value) + 1\r\n\r\n        const label = valueInGroup.label\r\n        const unit = getUnit(valueInGroup.value)\r\n\r\n        const tableRow: JuxtapositionTableEntry = {\r\n            label: label,\r\n            value: `${value} ${unit}`,\r\n            rank: `${rank} / ${allValues.length}`,\r\n            min: `${minValue} ${unit}`,\r\n            max: `${maxValue} ${unit}`,\r\n            average: `${autoRound(averageValue)} ${unit}`,\r\n            median: `${medianValue} ${unit}`,\r\n        }\r\n\r\n        tableData.push(tableRow)\r\n    })\r\n\r\n    return tableData\r\n}\r\n\r\n/**\r\n * Returns a set of food items that serve as database for the juxtaposition chart (comparison base).\r\n * @param selectedReference The selected reference value, indicating which data reference should be used.\r\n * @param foodDataCorpus The food data corpus of Food Compare.\r\n * @param selectedFoodItem The selected food item in the data panel.\r\n * @param selectedFoodItemsInPanel All food items currently added to the data panel.\r\n * @return A list of food items that serve as data basis for the juxtaposition charts.\r\n */\r\nexport function getFoodItemsForComparison(selectedReference: number,\r\n                                          foodDataCorpus: FoodDataCorpus,\r\n                                          selectedFoodItem: SelectedFoodItem,\r\n                                          selectedFoodItemsInPanel: Array<SelectedFoodItem>): Array<FoodItem> {\r\n    const allFoodItems = foodDataCorpus.foodItems\r\n\r\n    switch (selectedReference) {\r\n        case COMPARISON_REFERENCE_ALL_IN_CATEGORY:\r\n            const selectedFoodClass = foodDataCorpus.foodClasses.find(\r\n                foodClass => foodClass.id === selectedFoodItem.foodItem.foodClass\r\n            )\r\n            if(selectedFoodClass === undefined) {\r\n                return allFoodItems\r\n            }\r\n            const category = selectedFoodClass.category\r\n            return foodDataCorpus.foodItems.filter(foodItem => {\r\n                const foodClass = foodDataCorpus.foodClasses.find(foodClass => foodClass.id === foodItem.foodClass)\r\n                return foodClass !== undefined ? foodClass.category === category : false\r\n            })\r\n        case COMPARISON_REFERENCE_SELECTED_TABS:\r\n            return selectedFoodItemsInPanel.map(selectedFoodItem => selectedFoodItem.foodItem)\r\n        case COMPARISON_REFERENCE_ALL:\r\n        default:\r\n            return allFoodItems\r\n    }\r\n}\r\n","import {JuxtapositionChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {color_chart_black, color_line_blue, color_line_red} from \"../../../config/ChartConfig\";\r\nimport React, {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {\r\n    createChartDataForJuxtapostionChart, getFoodItemsForComparison,\r\n    JuxtapostionChartData\r\n} from \"../../../service/chartdata/JuxtapositionDataService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {\r\n    getBarChartOptionsForJuxtaposition\r\n} from \"../../../service/ChartConfigurationService\";\r\nimport {CHART_SIZE_LARGE, CHART_SIZE_MEDIUM, CHART_SIZE_SMALL} from \"../../../config/Constants\";\r\nimport {shortenName} from \"../../../service/nutrientdata/NameTypeService\";\r\n\r\n\r\nexport function JuxtapositionChart(props: JuxtapositionChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext).language\r\n\r\n    if (applicationContext === null) {\r\n        throw new Error(\"Application context is unavailable.\")\r\n    }\r\n\r\n    const calculateChartData = (): Array<JuxtapostionChartData> => {\r\n        const selectedFoodItemsInPanel = applicationContext.applicationData.foodDataPanel.selectedFoodItems\r\n        const foodDataCorpus = applicationContext.foodDataCorpus\r\n        const {selectedReference, selectedFoodItem} = props\r\n        const referenceData = getFoodItemsForComparison(selectedReference, foodDataCorpus, selectedFoodItem,\r\n            selectedFoodItemsInPanel)\r\n\r\n        return createChartDataForJuxtapostionChart(props, foodDataCorpus, referenceData, language)\r\n    }\r\n\r\n    const chartData = calculateChartData()\r\n\r\n    const showLabels = applicationContext.applicationData.foodDataPanel.juxtapositionConfigData.showLabels\r\n\r\n    const getOptions = (title: string, unit: string, nutrientIndex: number) => {\r\n        let options = getBarChartOptionsForJuxtaposition(title, unit)\r\n\r\n        const barIndexOfSelectedFoodItem = chartData[nutrientIndex].chartItems.findIndex(\r\n            chartItem => chartItem.id === props.selectedFoodItem.id\r\n        )\r\n\r\n        const color = showLabels ? color_chart_black : color_line_red\r\n        const maxRotation = showLabels ? 90 : 0\r\n        const minRotation = showLabels ? 90 : 0\r\n\r\n        const numberOfItemsInChart = chartData[nutrientIndex].chartItems.length\r\n        const maxNumberOfTicks = 60\r\n\r\n        const ticks = {\r\n            autoSkip: false,\r\n            color: color,\r\n            minRotation: minRotation,\r\n            maxRotation: maxRotation,\r\n            callback: function (value, index) {\r\n                const label = showLabels ? chartData[nutrientIndex].chartItems[index].name : \"\"\r\n                const marker = showLabels ? \"►\" : \"▲\"\r\n\r\n                if(numberOfItemsInChart <= maxNumberOfTicks) {   // Not too many bars in chart => you can print any label then\r\n                    return index === barIndexOfSelectedFoodItem ? marker : shortenName(label, 18)\r\n                } else { // Too many bars in chart => print only every nth label\r\n                    const skip = Math.ceil(numberOfItemsInChart / maxNumberOfTicks)\r\n                    return (index % skip === 0 || index === barIndexOfSelectedFoodItem)\r\n                        ? index === barIndexOfSelectedFoodItem\r\n                            ? marker\r\n                            : shortenName(label, 18)\r\n                        : \"\"\r\n                }\r\n            }\r\n        }\r\n\r\n        options = {\r\n            ...options, scales: {\r\n                ...options.scales, x: {\r\n                    ...options.scales.x,\r\n                    ticks: ticks\r\n                }\r\n            },\r\n            animation: false\r\n        }\r\n\r\n        return options\r\n    }\r\n\r\n\r\n    const chartHeightCategory = applicationContext.applicationData.foodDataPanel.juxtapositionConfigData.chartSize\r\n    let height\r\n    switch (chartHeightCategory) {\r\n        case CHART_SIZE_SMALL:\r\n            height = 11\r\n            break\r\n        default:\r\n        case CHART_SIZE_MEDIUM:\r\n            height = 19\r\n            break\r\n        case CHART_SIZE_LARGE:\r\n            height = 27\r\n            break\r\n    }\r\n\r\n    if(showLabels) {\r\n        height += 11\r\n    }\r\n\r\n    const renderChartsOfGroup = () => {\r\n        return chartData.map((chartData, nutrientIndex) => {\r\n            const labels: string[] = []\r\n            const data: number[] = []\r\n            const colors: string[] = []\r\n            chartData.chartItems.forEach((chartItem) => {\r\n                const name = chartItem.name\r\n                const color = chartItem.id === props.selectedFoodItem.id ? color_line_red : color_line_blue\r\n                labels.push(name);\r\n                data.push(chartItem.value);\r\n                colors.push(color)\r\n            })\r\n\r\n            const chartDataObj = {\r\n                labels: labels,\r\n                datasets: [{\r\n                    label: \"\",\r\n                    data: data,\r\n                    backgroundColor: colors,\r\n                    borderWidth: 2,\r\n                    maxBarThickness: 50\r\n                }]\r\n            }\r\n\r\n            const options = getOptions(chartData.nutrientName, chartData.unit, nutrientIndex)\r\n\r\n            return (\r\n                <div key={`juxchartdiv-${chartData.nutrientName}`}>\r\n                    <div className=\"smooth-scroll\">\r\n                        <div>\r\n                            <div style={{height: `${height}vh`}}>\r\n                                <Bar key={`juxchart-${chartData.nutrientName}`}\r\n                                     data={chartDataObj}\r\n                                     options={options}\r\n                                />\r\n                            </div>\r\n                            <hr/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div>{renderChartsOfGroup()}</div>\r\n        </div>\r\n    )\r\n\r\n}","import {JuxtapositionChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {isMobileDevice} from \"../../../service/WindowDimension\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {JuxtapositionTableEntry} from \"../../../types/livedata/JuxtapositionTableEntry\";\r\nimport {\r\n    createJuxtapositionTableData,\r\n    getFoodItemsForComparison\r\n} from \"../../../service/chartdata/JuxtapositionDataService\";\r\n\r\nexport function JuxtapositionTable(props: JuxtapositionChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext).language\r\n\r\n    if (applicationContext === null) {\r\n        throw new Error(\"Application context is unavailable.\")\r\n    }\r\n\r\n    const [tableData, setTableData] = useState<Array<JuxtapositionTableEntry>>([])\r\n\r\n    useEffect(() => {\r\n        updateTable()\r\n    }, [applicationContext.applicationData.foodDataPanel.juxtapositionConfigData, props.selectedFoodItem])\r\n\r\n    const updateTable = () => {\r\n        const selectedFoodItemsInPanel = applicationContext.applicationData.foodDataPanel.selectedFoodItems\r\n        const foodDataCorpus = applicationContext.foodDataCorpus\r\n        const {selectedReference, selectedFoodItem} = props\r\n        const referenceData = getFoodItemsForComparison(selectedReference, foodDataCorpus, selectedFoodItem,\r\n            selectedFoodItemsInPanel)\r\n\r\n        const newTableData = createJuxtapositionTableData(props, foodDataCorpus, referenceData, language)\r\n        setTableData(newTableData)\r\n    }\r\n\r\n    const dataExists = tableData.length > 0\r\n    const tableClass = isMobileDevice() ? \"table-style-m\" : \"table-style\"\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                {dataExists &&\r\n                <BootstrapTable trClassName={tableClass} data={tableData} striped hover>\r\n                    <TableHeaderColumn isKey dataField='label' width={\"220px\"}>Element</TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='value'>{applicationStrings.label_juxtaposition_table_value[language]}\r\n                    </TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='rank'>\r\n                        {applicationStrings.label_juxtaposition_table_rank[language]}\r\n                    </TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='min'>\r\n                        {applicationStrings.label_juxtaposition_table_min[language]}\r\n                    </TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='max'>\r\n                        {applicationStrings.label_juxtaposition_table_max[language]}\r\n                    </TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='average'>\r\n                        {applicationStrings.label_juxtaposition_table_avg[language]}\r\n                    </TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='median'>\r\n                        {applicationStrings.label_juxtaposition_table_median[language]}\r\n                    </TableHeaderColumn>\r\n                </BootstrapTable>\r\n                }\r\n                {!dataExists &&\r\n                <div className=\"text-center\">{applicationStrings.label_noData[language]}</div>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {useContext, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {Form, FormGroup, Modal} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {\r\n    CHART_SIZE_LARGE,\r\n    CHART_SIZE_MEDIUM,\r\n    CHART_SIZE_SMALL,\r\n} from \"../../../config/Constants\";\r\nimport {isMobileDevice} from \"../../../service/WindowDimension\";\r\nimport Select from 'react-select';\r\nimport ReactSelectOption from \"../../../types/ReactSelectOption\";\r\n\r\nexport interface JuxtapositionSettingsProps {\r\n    onHide: () => void,\r\n}\r\n\r\nexport function JustapositionSettings(props: JuxtapositionSettingsProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext).language\r\n\r\n    if(!applicationContext) {\r\n        throw Error(\"Application context is unavailable.\")\r\n    }\r\n\r\n    const currentSettings = applicationContext.applicationData.foodDataPanel.juxtapositionConfigData\r\n    const [chartSize, setChartSize] = useState<number>(currentSettings.chartSize)\r\n    const [showLabels, setShowLabels] = useState<boolean>(currentSettings.showLabels)\r\n\r\n    const saveData = () => {\r\n        const newJuxtapositionConfigData = {\r\n            ...applicationContext.applicationData.foodDataPanel.juxtapositionConfigData,\r\n            chartSize: chartSize,\r\n            showLabels: showLabels\r\n        }\r\n\r\n        applicationContext.setFoodDataPanelData.updateJuxtapositionConfig(newJuxtapositionConfigData)\r\n        props.onHide()\r\n    }\r\n\r\n    const renderMenu = () => {\r\n        const optionsChartSize: Array<ReactSelectOption> = [\r\n            {label: applicationStrings.label_juxtaposition_settings_chartsize_s[language], value: CHART_SIZE_SMALL},\r\n            {label: applicationStrings.label_juxtaposition_settings_chartsize_m[language], value: CHART_SIZE_MEDIUM},\r\n            {label: applicationStrings.label_juxtaposition_settings_chartsize_l[language], value: CHART_SIZE_LARGE},\r\n        ]\r\n\r\n        const chartSizeOption = optionsChartSize[chartSize]\r\n\r\n        const classRow = isMobileDevice() ? \"form-row-m\" : \"form-row\"\r\n\r\n        return <div>\r\n            <form>\r\n                <FormGroup controlId=\"formBasicText\">\r\n                    <div className=\"row\">\r\n                        <div className={classRow}>\r\n                            <Form.Label>\r\n                                {applicationStrings.label_juxtaposition_settings_chartsize[language]}:\r\n                            </Form.Label>\r\n                            <Select options={optionsChartSize}\r\n                                    value={chartSizeOption}\r\n                                    isSearchable={false}\r\n                                    onChange={(option) => setChartSize(option.value)}\r\n                            />\r\n                        </div>\r\n                        <div className={classRow}>\r\n                            <Form.Check inline className=\"form-radiobutton\"\r\n                                        checked={showLabels}\r\n                                        label={applicationStrings.label_juxtaposition_settings_showLabels[language]}\r\n                                        onChange={() => setShowLabels(!showLabels)}>\r\n                            </Form.Check>\r\n                        </div>\r\n                    </div>\r\n                </FormGroup>\r\n            </form>\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        <Modal show={true}>\r\n            <Modal.Header>\r\n                <h5 className=\"modal-title\"><b>{applicationStrings.modal_settings_title[language]}</b></h5>\r\n                <button type=\"button\"\r\n                        className=\"btn-close\"\r\n                        data-dismiss=\"modal\"\r\n                        aria-label=\"Close\"\r\n                        onClick={() => saveData()}>\r\n                </button>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div style={{padding: \"20px\"}}>\r\n                    {renderMenu()}\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button type=\"button\"\r\n                        className=\"btn btn-primary\"\r\n                        onClick={() => saveData()}>\r\n                    {applicationStrings.button_close[language]}\r\n                </button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n\r\n}","import {ChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {getNutrientGroups} from \"../../../service/RankingService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {customSelectStyles} from \"../../../config/UI_Config\";\r\nimport Select from 'react-select';\r\nimport {\r\n    COMPARISON_REFERENCE_ALL,\r\n    COMPARISON_REFERENCE_ALL_IN_CATEGORY, COMPARISON_REFERENCE_SELECTED_TABS, DISPLAYMODE_CHART\r\n} from \"../../../config/Constants\";\r\nimport {JuxtapositionChart} from \"./JuxtapositionChart\";\r\nimport {JuxtapositionTable} from \"./JuxtapositionTable\";\r\nimport {JustapositionSettings} from \"./JustapositionSettings\";\r\n\r\nexport default function JuxtapostionContainer(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext).language\r\n\r\n    if (!applicationContext) {\r\n        throw new Error(\"ApplicationContext unavailable.\")\r\n    }\r\n\r\n    const [showSettingsModal, setShowSettingsModal] = useState<boolean>(false)\r\n\r\n    const referenceList = [\r\n        {value: COMPARISON_REFERENCE_ALL, label: applicationStrings.label_reference_all[language]},\r\n        {value: COMPARISON_REFERENCE_ALL_IN_CATEGORY, label: applicationStrings.label_reference_category[language]}\r\n    ]\r\n\r\n    const numberOfTabs = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length\r\n    if(numberOfTabs > 1) {\r\n        referenceList.push({value: COMPARISON_REFERENCE_SELECTED_TABS, label: applicationStrings.label_reference_panel[language]})\r\n    }\r\n\r\n    const updateQueryParam = (): void => {\r\n        const selectedGroup = applicationContext.applicationData.foodDataPanel.juxtapositionConfigData?.selectedGroup?.value\r\n        if (selectedGroup && window.history.replaceState) {  // Update Query string without triggering a re-render caused by the react router\r\n            const url = window.location.protocol + \"//\" + window.location.host + window.location.pathname + window.location.search\r\n            let newUrl = url\r\n            if(url.includes(\"group=\")) {  // Replace the group part at the end of the search string\r\n                newUrl = url.substring(0, url.indexOf(\"group=\")-1)\r\n            }\r\n            newUrl = `${newUrl}&group=${selectedGroup}`\r\n            window.history.replaceState({path: newUrl},'', newUrl);\r\n        }\r\n    }\r\n\r\n    const handleGroupChange = (selectedOption: any) => {\r\n        const newJuxtapositionConfigData = {\r\n            ...applicationContext.applicationData.foodDataPanel.juxtapositionConfigData,\r\n            selectedGroup: selectedOption\r\n        }\r\n        applicationContext.setFoodDataPanelData.updateJuxtapositionConfig(newJuxtapositionConfigData)\r\n    }\r\n\r\n    const handleComparisonReferenceChange = (selectedOption) => {\r\n        const newJuxtapositionConfigData = {\r\n            ...applicationContext.applicationData.foodDataPanel.juxtapositionConfigData,\r\n            selectedComparisonReference: selectedOption\r\n        }\r\n        applicationContext.setFoodDataPanelData.updateJuxtapositionConfig(newJuxtapositionConfigData)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const numberOfFoodItemsInPanel = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length\r\n        const {juxtapositionConfigData} =  applicationContext.applicationData.foodDataPanel\r\n        const compareToFoodItemsInPanel =\r\n            juxtapositionConfigData.selectedComparisonReference?.value === COMPARISON_REFERENCE_SELECTED_TABS\r\n        if(numberOfFoodItemsInPanel === 1 && compareToFoodItemsInPanel) {\r\n            const newJuxtapositionConfigData = {\r\n                ...applicationContext.applicationData.foodDataPanel.juxtapositionConfigData,\r\n                selectedComparisonReference: referenceList[0]\r\n            }\r\n            applicationContext.setFoodDataPanelData.updateJuxtapositionConfig(newJuxtapositionConfigData)\r\n        }\r\n        updateQueryParam()\r\n    }, [applicationContext.applicationData.foodDataPanel.selectedFoodItems.length,\r\n        applicationContext.applicationData.foodDataPanel.juxtapositionConfigData])\r\n\r\n    useEffect(() => {\r\n        const params = new URLSearchParams(window.location.search);\r\n        const groupParam = params.get('group');\r\n        if(groupParam !== null) {\r\n            const group = rankingList.find(entry => entry.value === Number(groupParam))\r\n            if(group) {\r\n                handleGroupChange(group)\r\n            }\r\n        }\r\n    }, [])\r\n\r\n    const getRankingGroupsList = () => {\r\n        return getNutrientGroups(language);\r\n    }\r\n\r\n    const {\r\n        selectedGroup,\r\n        selectedComparisonReference\r\n    } = applicationContext.applicationData.foodDataPanel.juxtapositionConfigData\r\n\r\n    const rankingList = getRankingGroupsList()\r\n    const group = selectedGroup ?? rankingList[0]\r\n\r\n    const reference = selectedComparisonReference ?? referenceList[1]\r\n\r\n    if(props.selectedFoodItem.aggregated === true) {\r\n        return <div>\r\n            <p style={{maxHeight: \"437px\", minHeight: \"437px\", textAlign: \"center\"}}>{applicationStrings.label_juxtaposition_unavailable[language]}</p>\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        <div className={\"juxtaposition-data\"}>\r\n            {showSettingsModal &&\r\n                <JustapositionSettings onHide={() => setShowSettingsModal(false)}/>\r\n            }\r\n            <div className={\"container row align-items-end\"}>\r\n                <div className={\"col-4\"}>\r\n                    <span className={\"form-label\"}>{applicationStrings.label_reference[language]}:</span>\r\n                    <Select className=\"form-control-sm\"\r\n                            options={referenceList}\r\n                            value={reference}\r\n                            defaultValue={referenceList[0]}\r\n                            styles={customSelectStyles}\r\n                            onChange={handleComparisonReferenceChange}\r\n                    />\r\n                </div>\r\n                <div className={\"col-4\"}>\r\n                    <span className={\"form-label\"}>{applicationStrings.label_group[language]}:</span>\r\n                    <Select className=\"form-control-sm\"\r\n                            options={rankingList}\r\n                            value={group}\r\n                            defaultValue={rankingList[0]}\r\n                            styles={customSelectStyles}\r\n                            onChange={handleGroupChange}\r\n                    />\r\n                </div>\r\n                <div className={\"col-2\"}>\r\n                    <button className={\"btn btn-link\"} onClick={() => setShowSettingsModal(true)}>\r\n                        {applicationStrings.label_juxtaposition_settings_btn[language]}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <hr/>\r\n            <div style={{paddingTop: \"1vh\", paddingBottom: \"1vh\", paddingLeft: \"1vw\", paddingRight: \"0.75vw\"}}>\r\n                {props.displayMode === DISPLAYMODE_CHART ?\r\n                    <JuxtapositionChart selectedGroup={group.value} selectedReference={reference.value} selectedFoodItem={props.selectedFoodItem}/>\r\n                    :\r\n                    <JuxtapositionTable selectedGroup={group.value} selectedReference={reference.value} selectedFoodItem={props.selectedFoodItem}/>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import BaseDataChart from \"./charts/BaseDataChart\";\r\nimport EnergyDataChart from \"./charts/EnergyDataChart\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA, TAB_JUXTAPOSITION,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport MineralVitaminChart from \"./charts/MineralVitaminChart\";\r\nimport LipidsDataChart from \"./charts/LipidsDataChart\";\r\nimport ProteinDataChart from \"./charts/ProteinDataChart\";\r\nimport CarbsDataChart from \"./charts/CarbsDataChart\";\r\nimport {ChartProps} from \"../../types/livedata/ChartPropsData\";\r\nimport React, {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport JuxtapostionContainer from \"./juxtaposition/JuxtapositionContainer\";\r\n\r\nexport function ChartPanel(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const selectedDataTab = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n\r\n    let chart = <div>Nothing to show</div>;\r\n    if (selectedDataTab === TAB_BASE_DATA) {\r\n        chart = <BaseDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_ENERGY_DATA) {\r\n        chart = <EnergyDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_VITAMIN_DATA) {\r\n        chart = <MineralVitaminChart selectedFoodItem={props.selectedFoodItem} selectedSubChart={CHART_VITAMINS}/>\r\n    } else if (selectedDataTab === TAB_MINERAL_DATA) {\r\n        chart = <MineralVitaminChart selectedFoodItem={props.selectedFoodItem} selectedSubChart={CHART_MINERALS}/>\r\n    } else if (selectedDataTab === TAB_LIPIDS_DATA) {\r\n        chart = <LipidsDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_CARBS_DATA) {\r\n        chart = <CarbsDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_PROTEINS_DATA) {\r\n        chart = <ProteinDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    }  else if (selectedDataTab === TAB_JUXTAPOSITION) {\r\n        chart = <JuxtapostionContainer selectedFoodItem={props.selectedFoodItem} displayMode={props.displayMode}/>\r\n    }\r\n\r\n    return (\r\n        <div style={{paddingTop: \"2vh\"}}>\r\n            {chart}\r\n        </div>\r\n    )\r\n}","import {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport 'react-bootstrap-table/dist/react-bootstrap-table-all.min.css';\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {DISPLAYMODE_CHART, TAB_MINERAL_DATA, TAB_PROTEINS_DATA, TAB_VITAMIN_DATA} from \"../../config/Constants\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\ninterface FoodDataTableProps {\r\n    tableData: Array<FoodTableDataObject>\r\n    portionSize: number\r\n    dataPage: string\r\n}\r\n\r\nexport function FoodDataTable(props: FoodDataTableProps) {\r\n    const dataExists = props.tableData && props.tableData.length > 0;\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext)\r\n\r\n    const changeToChartMode = () => {\r\n        applicationContext?.setFoodDataPanelData.setSelectedDisplayMode(DISPLAYMODE_CHART)\r\n    }\r\n\r\n    const formatDataCell = (cell, row) => {\r\n        if(!cell) {\r\n            return cell\r\n        }\r\n\r\n        if (!cell.includes(\"&&\")) {\r\n            return cell\r\n        }\r\n\r\n        const firstLineStype = {paddingBottom: \"6px\", display: 'block'}\r\n        const indentStyle = {paddingLeft: \"8px\"}\r\n\r\n        return <div>{cell.split(\"&&\").map((element, index) => (\r\n            <div key={`table-inner-cell-${row.label}-${index}`}>\r\n                {index > 0 ?\r\n                    <span style={indentStyle}>\r\n                    {element}\r\n                    </span>\r\n                    :\r\n                    <span style={firstLineStype}>\r\n                    {element}\r\n                </span>\r\n                }\r\n            </div>)\r\n        )}</div>\r\n    }\r\n\r\n    const labelPortion = `${applicationStrings.label_per_portion[language.language]} (${props.portionSize} g)`\r\n    const tableClass = isMobileDevice() ? \"table-style-m\" : \"table-style\"\r\n\r\n    const shouldShowDietaryRequirements = props.dataPage === TAB_VITAMIN_DATA || props.dataPage === TAB_MINERAL_DATA\r\n        || props.dataPage === TAB_PROTEINS_DATA\r\n\r\n    return (\r\n        <div className={\"table-data\"}>\r\n            <div>\r\n                {dataExists &&\r\n                <BootstrapTable trClassName={tableClass} data={props.tableData} striped hover>\r\n                    <TableHeaderColumn isKey dataField='label' dataFormat={formatDataCell}>Element</TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='value_100g'\r\n                                       width={\"9vw\"}\r\n                                       dataFormat={formatDataCell}>{applicationStrings.label_per_100g[language.language]}\r\n                    </TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='value_portion'\r\n                                       width={\"10vw\"}\r\n                                       dataFormat={formatDataCell}>{labelPortion}\r\n                    </TableHeaderColumn>\r\n                    {shouldShowDietaryRequirements &&\r\n                    <TableHeaderColumn dataField='dailyRequirement'\r\n                                       width={\"12vw\"}\r\n                                       dataFormat={formatDataCell}>{applicationStrings.label_requirement[language.language]}\r\n                    </TableHeaderColumn>\r\n                    }\r\n                </BootstrapTable>\r\n                }\r\n                {!dataExists &&\r\n                <div className=\"text-center\">{applicationStrings.label_noData[language.language]}</div>\r\n                }\r\n            </div>\r\n            <div style={{paddingTop: \"25px\"}}>\r\n                <button className={\"btn btn-link\"} onClick={changeToChartMode}>\r\n                    {applicationStrings.label_chart_view[language.language]}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {ReactSelectFoodItemOption} from \"../../types/ReactSelectOption\";\r\nimport getName, {} from \"../LanguageService\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\n\r\n\r\n/**\r\n * Auxiliary method to get the food item from a given food list or null.\r\n * @param foodItemId Food Item Id\r\n * @param foodItems The list of food items\r\n */\r\nexport function getFoodItem(foodItemId: number, foodItems: Array<FoodItem>): FoodItem | null {\r\n    const index = foodItems.findIndex(foodItem => foodItem.id === foodItemId)\r\n    if(index >= 0) {\r\n        return foodItems[index]\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\n/**\r\n * Makes the select list (component) for food items.\r\n * @param foodItems The list of all food items.\r\n * @param foodClass The selected food class.\r\n * @param foodNames The list of all food names.\r\n * @param conditions The list of all conditions.\r\n * @param language The given language.\r\n */\r\nexport function getFoodItemsSelectList(foodItems: Array<FoodItem>, foodClass: number, foodNames: Array<NameType>,\r\n                                       conditions: Array<NameType>, language: string): Array<ReactSelectFoodItemOption> {\r\n    const filteredFoodItems = getFoodItemsOfFoodClass(foodItems, foodClass)\r\n    const reactSelectOptions: Array<ReactSelectFoodItemOption> = []\r\n\r\n    if(filteredFoodItems && filteredFoodItems.length > 0) {\r\n        filteredFoodItems.forEach(foodItem => {\r\n            let foodName = getFoodItemName(foodItem, foodNames, language)\r\n            const condition = conditions.find(condition => condition.id === foodItem.conditionId)\r\n            const conditionName = condition ? getName(condition, language) : null\r\n\r\n            if(conditionName && foodItem.conditionId !== 100) {   // Exclude the \"general\" condition\r\n                foodName = `${foodName} (${conditionName})`\r\n            }\r\n\r\n            reactSelectOptions.push({\r\n                value: foodItem,\r\n                label: foodName ?? ''\r\n            })\r\n        })\r\n    }\r\n\r\n    // If more than 5 items are in the list, we sort them lexicographically (otherwise by default).\r\n    if(reactSelectOptions.length > 5) {\r\n        reactSelectOptions.sort((obj1, obj2) => obj1.label.localeCompare(obj2.label))\r\n    }\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n/**\r\n * Central method to retrieve the food name of an food item in a given language.\r\n * @param foodItem The food item object.\r\n * @param foodNames The list of food items.\r\n * @param language The given language.\r\n * @param verbose Specifies whether the verbose name should be returned or just the simple one.\r\n */\r\nexport function getFoodItemName(foodItem: FoodItem, foodNames: Array<NameType>, language: string, verbose = false): string | null {\r\n    const nameId = foodItem.nameId\r\n    if(!nameId || nameId > foodNames.length) {\r\n        return null\r\n    }\r\n    const nameType = foodNames[nameId-1]\r\n    return getName(nameType, language, verbose)\r\n}\r\n\r\n\r\n/**\r\n * Returns all food items that belong to a food class.\r\n * @param foodItems The list of all food items.\r\n * @param foodClassId The ID of the selected food class.\r\n */\r\nexport function getFoodItemsOfFoodClass(foodItems: Array<FoodItem>, foodClassId: number): Array<FoodItem> {\r\n    return foodItems.filter(foodItem => {\r\n        if(foodItem.foodClass === foodClassId) {\r\n            return foodItem\r\n        } else {\r\n            return null\r\n        }\r\n    })\r\n}\r\n\r\n\r\n/**\r\n * Creates a selected food item object (an object selected from the food selector modal and displayed on the food data panel) out of\r\n * a food item, a food class and a portion data object.\r\n * @param foodItem\r\n * @param foodClass\r\n * @param portion\r\n */\r\nexport function makeSelectedFoodItemObject(\r\n    foodItem: FoodItem | undefined,\r\n    foodClass: FoodClass | undefined,\r\n    portion: PortionData | undefined,\r\n    portionAmount: number,\r\n    supplementData: boolean,\r\n    combineData: boolean,\r\n    selectedSource?: number\r\n): SelectedFoodItem | null  {\r\n    if (!foodItem || !foodClass || !portion) {\r\n        return null\r\n    }\r\n\r\n    if (portion.portionType === 0) {\r\n        portion.amount = portionAmount\r\n    }\r\n\r\n    return {\r\n        foodItem: foodItem,\r\n        foodClass: foodClass,\r\n        portion: {...portion},\r\n        selectedSource: selectedSource ? selectedSource : foodItem.nutrientDataList[0].source.id,\r\n        supplementData: supplementData,\r\n        combineData: combineData\r\n    }\r\n}","import NutrientStatistics, {FoodItemStatistics} from \"../../types/livedata/NutrientStatistics\";\r\nimport FoodItem from \"../../types/nutrientdata/FoodItem\";\r\nimport {getElementsOfRankingGroup, getNutrientGroups, getValueOfFoodItem} from \"../RankingService\";\r\nimport {\r\n    NUTRIENT_BASE_DATA_INDEX,\r\n    NUTRIENT_CARBS_INDEX,\r\n    NUTRIENT_LIPIDS_INDEX,\r\n    NUTRIENT_MINERAL_INDEX,\r\n    NUTRIENT_PROTEIN_INDEX,\r\n    NUTRIENT_VITAMIN_INDEX,\r\n} from \"../../config/Constants\";\r\n\r\nexport function getStatisticalNutrientInformation(nutrient: string, foodItems: Array<FoodItem>, preferredSource):\r\n    NutrientStatistics {\r\n    let min: number | null = null\r\n    let max: number | null = null\r\n    let sum: number | null = null\r\n    let allValues: Array<number> = []\r\n\r\n    foodItems.forEach(foodItem => {\r\n        const value = getValueOfFoodItem(foodItem, nutrient, preferredSource, true)\r\n        if(value !== null) {\r\n            allValues.push(value)\r\n            if(min === null || value < min) {\r\n                min = value\r\n            }\r\n            if(max === null || value > max) {\r\n                max =  value\r\n            }\r\n            if(sum === null) {\r\n                sum = value\r\n            } else {\r\n                sum += value\r\n            }\r\n        }\r\n    })\r\n\r\n    const averageAmount = sum ? sum / allValues.length : null\r\n    const sortedValues = allValues.sort((a, b) => a-b)\r\n    const centerValue = sortedValues.length / 2\r\n    const median = sortedValues[Math.floor(centerValue)]\r\n\r\n    return {\r\n        minimumAmount: min,\r\n        maximumAmount: max,\r\n        averageAmount: averageAmount,\r\n        median: median,\r\n        allValuesSorted: sortedValues\r\n    }\r\n\r\n}\r\n\r\nexport function countNumberOfAvailableValues(foodItem: FoodItem, sourceId: number): FoodItemStatistics {\r\n    const lang = \"en\" // Language does not matter when we count nutrient values\r\n    const groups = getNutrientGroups(lang)\r\n\r\n    let baseValues = 0\r\n    let carbValues = 0\r\n    let lipidValues = 0\r\n    let proteinValues = 0\r\n    let vitaminValues = 0\r\n    let mineralValues = 0\r\n\r\n    groups.forEach(group => {\r\n        const valuesInGroup = getElementsOfRankingGroup(group.value, lang)\r\n        if(!valuesInGroup) {\r\n            return\r\n        }\r\n\r\n        const nutrientValuesInFoodItem = valuesInGroup.filter((nutrient ) => {\r\n            const value = getValueOfFoodItem(foodItem, nutrient.value, sourceId, false)\r\n            return value !== null\r\n        })\r\n\r\n        switch (group.value) {\r\n            case NUTRIENT_BASE_DATA_INDEX:\r\n                baseValues = nutrientValuesInFoodItem ? nutrientValuesInFoodItem.length : 0\r\n                break;\r\n            case NUTRIENT_LIPIDS_INDEX:\r\n                lipidValues = nutrientValuesInFoodItem ? nutrientValuesInFoodItem.length : 0\r\n                break;\r\n            case NUTRIENT_CARBS_INDEX:\r\n                carbValues = nutrientValuesInFoodItem ? nutrientValuesInFoodItem.length : 0\r\n                break;\r\n            case NUTRIENT_PROTEIN_INDEX:\r\n                proteinValues = nutrientValuesInFoodItem ? nutrientValuesInFoodItem.length : 0\r\n                break;\r\n            case NUTRIENT_VITAMIN_INDEX:\r\n                vitaminValues = nutrientValuesInFoodItem ? nutrientValuesInFoodItem.length : 0\r\n                break;\r\n            case NUTRIENT_MINERAL_INDEX:\r\n                mineralValues = nutrientValuesInFoodItem ? nutrientValuesInFoodItem.length : 0\r\n                break;\r\n        }\r\n    })\r\n\r\n    return {\r\n        baseDataValues: baseValues,\r\n        carbDataValues: carbValues,\r\n        lipidDataValues: lipidValues,\r\n        proteinDataValues: proteinValues,\r\n        vitaminDataValues: vitaminValues,\r\n        mineralDataValues: mineralValues,\r\n        getTotalNumberOfValues: () => {return baseValues + carbValues + lipidValues + proteinValues + vitaminValues + mineralValues}\r\n    }\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport SelectedFoodItem from \"../../../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {getNameFromFoodNameList} from \"../../../service/nutrientdata/NameTypeService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport getName from \"../../../service/LanguageService\";\r\nimport {isMobileDevice} from \"../../../service/WindowDimension\";\r\nimport {canSupplementData, getNutrientData, getSourceName} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {getFoodItemName} from \"../../../service/nutrientdata/FoodItemsService\";\r\nimport {NutrientData} from \"../../../types/nutrientdata/FoodItem\";\r\nimport {round} from \"../../../service/calculation/MathService\";\r\nimport {countNumberOfAvailableValues} from \"../../../service/nutrientdata/NutrientStatisticsService\";\r\n\r\ninterface InfoDataProps {\r\n    selectedFoodItem: SelectedFoodItem,\r\n    directCompare?: boolean\r\n}\r\n\r\ninterface RowElement {\r\n    key: string,\r\n    value: string\r\n}\r\n\r\nexport function InfoData(props: InfoDataProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const createRow = (key: string, value: any): RowElement => {\r\n        return {\r\n            key: key,\r\n            value: value\r\n        }\r\n    }\r\n\r\n    const getGeneralTableData = (): Array<RowElement> => {\r\n        if (!applicationContext) {\r\n            return []\r\n        }\r\n\r\n        const foodNameId = props.selectedFoodItem.foodItem.nameId\r\n        const foodName = foodNameId ? getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, foodNameId, lang, true) : ''\r\n\r\n        const foodClass = props.selectedFoodItem.foodClass;\r\n        const foodClassNameId = foodClass ? foodClass.nameKey : null\r\n\r\n        const sourceName = getSourceName(props.selectedFoodItem.selectedSource)\r\n        const sourceItemId = getNutrientData(props.selectedFoodItem).sourceItemId\r\n\r\n        const source = `United States Department of Agriculture (USDA)`;\r\n        const sourceLine2 = `${sourceName}, ID = ${sourceItemId}`;\r\n        const foodClassName = foodClassNameId ? getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, foodClassNameId, lang) : null;\r\n\r\n        const categoryId = foodClass ? foodClass.category : null\r\n        const category = categoryId ? applicationContext.foodDataCorpus.categories.find(category => category.id === categoryId) : null\r\n        const categoryName = category ? getName(category, lang) : null;\r\n\r\n        const conditionId = props.selectedFoodItem.foodItem.conditionId\r\n        const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === conditionId)\r\n        const conditionName = condition ? getName(condition, lang) : null;\r\n\r\n        const tableDataGeneral: Array<RowElement> = [];\r\n\r\n        const canSupplement = canSupplementData(props.selectedFoodItem.foodItem.nutrientDataList)\r\n        let calculationLabel = applicationStrings.label_info_calculation_none;\r\n\r\n        if(props.selectedFoodItem.supplementData && props.selectedFoodItem.combineData) {\r\n            calculationLabel = applicationStrings.label_info_calculation_supplemented_combined\r\n        } else {\r\n            if(props.selectedFoodItem.supplementData) {\r\n                if(canSupplement) {\r\n                    calculationLabel = applicationStrings.label_info_calculation_supplemented\r\n                } else {\r\n                    calculationLabel = applicationStrings.label_info_calculation_supplement_impossible\r\n                }\r\n            }\r\n            if(props.selectedFoodItem.combineData) {\r\n                calculationLabel = applicationStrings.label_info_calculation_combined\r\n            }\r\n        }\r\n\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodName[lang]}:`, foodName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_preparation[lang]}:`, conditionName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodId[lang]}:`, props.selectedFoodItem.foodItem.id)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodClass[lang]}:`, foodClassName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_category[lang]}:`, categoryName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_source[lang]}:`, source)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(\"\", sourceLine2)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_calculation[lang]}:`, calculationLabel[lang])\r\n        );\r\n\r\n        return tableDataGeneral;\r\n    }\r\n\r\n    const getTableDataPortion = () => {\r\n        const foodPortion = props.selectedFoodItem.portion;\r\n        const portionValue = `${foodPortion.amount} g`;\r\n\r\n        const portionObject = applicationContext?.foodDataCorpus.portionTypes.find(portion => portion.id === foodPortion.portionType)\r\n        if (portionObject) {\r\n            const portionName = foodPortion.portionType !== 0 ? getName(portionObject, lang) : applicationStrings.portion_individual[lang];\r\n            const tableDataPortion: Array<RowElement> = [];\r\n\r\n            tableDataPortion.push(\r\n                createRow(`${applicationStrings.label_info_portionType[lang]}:`, portionName)\r\n            );\r\n\r\n            tableDataPortion.push(\r\n                createRow(`${applicationStrings.label_portion[lang]}:`, portionValue)\r\n            );\r\n\r\n            return tableDataPortion\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n\r\n    const getDebugData = () => {\r\n        const nutrientData = props.selectedFoodItem.foodItem.nutrientDataList\r\n        const source1 = nutrientData[0]\r\n        const source2 = nutrientData.length == 2 ? nutrientData[1] : null\r\n\r\n        const makeNutrientValuesLine = (dataObj: NutrientData) => {\r\n            return \"E: \" + round(dataObj.baseData.energy, 1) + \", \"\r\n                + \"W: \" + round(dataObj.baseData.water, 1) + \", \"\r\n                + \"C: \" + round(dataObj.baseData.carbohydrates, 1) + \", \"\r\n                + \"L: \" + round(dataObj.baseData.lipids, 1) + \", \"\r\n                + \"P: \" + round(dataObj.baseData.proteins, 1)\r\n        }\r\n\r\n        const makeAvailableNutrientValuesLine = (nutrientData: NutrientData) => {\r\n            const valuesStatistics = countNumberOfAvailableValues(props.selectedFoodItem.foodItem, nutrientData.source.id)\r\n            return `B: ${valuesStatistics.baseDataValues}, \r\n                L: ${valuesStatistics.lipidDataValues},\r\n                C: ${valuesStatistics.carbDataValues},\r\n                P: ${valuesStatistics.proteinDataValues},\r\n                V: ${valuesStatistics.vitaminDataValues},\r\n                M: ${valuesStatistics.mineralDataValues},\r\n                SUM: ${valuesStatistics.getTotalNumberOfValues()}`\r\n        }\r\n\r\n        const tableDataDebug: Array<RowElement> = [];\r\n        tableDataDebug.push(createRow(`Key data ${source1.source.name}`, makeNutrientValuesLine(source1)))\r\n        if (source2) {\r\n            tableDataDebug.push(createRow(`Key data ${source2.source.name}`, makeNutrientValuesLine(source2)))\r\n\r\n        }\r\n\r\n        if (source2) {  // Empty line between the two sources if two sources exist\r\n            tableDataDebug.push(createRow(\" \", \" \"))\r\n        }\r\n\r\n        tableDataDebug.push(createRow(`Avail. data ${source1.source.name}`, makeAvailableNutrientValuesLine(source1)))\r\n        if (source2) {\r\n            tableDataDebug.push(createRow(`Avail. data ${source2.source.name}`, makeAvailableNutrientValuesLine(source2)))\r\n        }\r\n\r\n        return tableDataDebug\r\n    }\r\n\r\n\r\n    const makeTableDataCombinedFood = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const compositeList = props.selectedFoodItem?.compositeSubElements ?? []\r\n        const tableData: Array<RowElement> = []\r\n        const {foodNames} = applicationContext.foodDataCorpus\r\n\r\n        for (let i = 0; i < compositeList.length; i++) {\r\n            const foodItem = compositeList[i].foodItem\r\n            let name = getFoodItemName(foodItem, foodNames, lang)\r\n            const portion = compositeList[i].portion.amount\r\n            const conditionId = compositeList[i].foodItem.conditionId\r\n\r\n            if (conditionId !== 100) {\r\n                const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === conditionId)\r\n                const conditionName = condition ? getName(condition, lang) : null;\r\n                name += `(${conditionName})`\r\n            }\r\n            tableData.push(\r\n                createRow(`${name}\r\n        :\r\n            `, `${portion}\r\n            g`)\r\n            )\r\n        }\r\n\r\n        return tableData;\r\n    }\r\n\r\n    const tableClass = isMobileDevice() ? \"table-style-m\" : \"table-style\"\r\n\r\n    const renderSubTable = (data) => {\r\n        return (\r\n            <div>\r\n                <BootstrapTable trClassName={tableClass} bordered={false} data={data}>\r\n                    <TableHeaderColumn className=\"table-header-no-top-border\" dataField='key' isKey width=\"20vw\"/>\r\n                    <TableHeaderColumn className=\"table-header-no-top-border\" dataField='value'/>\r\n                </BootstrapTable>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const onLinkClick = () => {\r\n        const sourceItemId = getNutrientData(props.selectedFoodItem).sourceItemId\r\n        const usdaLink = `\r\n            https://fdc.nal.usda.gov/fdc-app.html#/food-details/${sourceItemId}/nutrients`\r\n        const link = window.open(usdaLink, '_blank')\r\n        if (link) {\r\n            link.focus()\r\n        } else {\r\n            window.location.href = usdaLink\r\n        }\r\n    }\r\n\r\n    const isCompositeFoodElement = props.selectedFoodItem.aggregated === true\r\n    const containerClass = props.directCompare ? \"tab-info-directcompare\" : \"tab-info\"\r\n\r\n    return (\r\n        <div className={containerClass}>\r\n            <div>\r\n                {!isCompositeFoodElement &&\r\n                <div>\r\n                    <div>\r\n                        {applicationContext?.debug &&\r\n                        <div style={{paddingBottom: \"4vh\"}}>\r\n                            {renderSubTable(getDebugData())}\r\n                        </div>\r\n                        }\r\n                        <div>\r\n                            {renderSubTable(getGeneralTableData())}\r\n                        </div>\r\n                        <div style={{paddingTop: \"3vh\"}}>\r\n                            <h5>{applicationStrings.label_info_portion[lang]}</h5>\r\n                            {renderSubTable(getTableDataPortion())}\r\n                        </div>\r\n                    </div>\r\n                    <div style={{paddingTop: \"2vh\", paddingBottom: \"1.2vh\"}}>\r\n                        <Button variant={'link'} active={true} onClick={onLinkClick}>\r\n                            {applicationStrings.label_usda_reference[lang]}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n                }\r\n                {isCompositeFoodElement &&\r\n                <div>\r\n                    <h5>{applicationStrings.label_info_composite[lang]}</h5>\r\n                    {renderSubTable(makeTableDataCombinedFood())}\r\n                </div>\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {DISPLAYMODE_TABLE, TAB_INFO, TAB_JUXTAPOSITION} from \"../../config/Constants\";\r\nimport {ChartPanel} from \"./ChartPanel\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {FoodDataTable} from \"./FoodDataTable\";\r\nimport {InfoData} from \"./charts/InfoData\";\r\nimport React, {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\ninterface FoodDataPageBodyProps {\r\n    tableData: Array<FoodTableDataObject>\r\n    selectedFoodItem: SelectedFoodItem,\r\n    dataPage: string\r\n}\r\n\r\nexport default function FoodDataPageBody(props: FoodDataPageBodyProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    if(!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const {displayMode, selectedDataPage}  = applicationContext.applicationData.foodDataPanel\r\n\r\n    const renderDataPage = () => {\r\n        return (\r\n            <div className=\"d-flex flex-column\">\r\n                {(displayMode === DISPLAYMODE_TABLE && selectedDataPage !== TAB_JUXTAPOSITION) ?\r\n                <div >\r\n                    <FoodDataTable tableData={props.tableData}\r\n                                   portionSize={props.selectedFoodItem.portion.amount}\r\n                                   dataPage={props.dataPage}\r\n                    />\r\n                </div>\r\n                :\r\n                <div>\r\n                    <ChartPanel selectedFoodItem={props.selectedFoodItem} displayMode={displayMode} />\r\n                </div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={\"food-analyzer-chartpanel\"}>\r\n            {selectedDataPage === TAB_INFO &&\r\n                 <InfoData selectedFoodItem={props.selectedFoodItem}/>\r\n            }\r\n            {selectedDataPage !== TAB_INFO &&\r\n                renderDataPage()\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import React, {ReactElement, useContext} from \"react\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {HelpText} from \"../service/HelpService\";\r\nimport {Modal} from \"react-bootstrap\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\n\r\ninterface HelpModalProps {\r\n    helpText: HelpText,\r\n    size?,\r\n    style?,\r\n    closeHelpModal: () => void\r\n}\r\n\r\nexport function HelpModal(props: HelpModalProps): ReactElement {\r\n    const language = useContext(LanguageContext).language\r\n\r\n    if (!props.helpText) {\r\n        return (<div>No data available.</div>);\r\n    }\r\n\r\n    return (\r\n        <Modal className={\"help-modal\"}\r\n               size={props.size ? props.size : \"sm\"}\r\n               show={true}\r\n               onHide={props.closeHelpModal}\r\n               backdrop=\"static\"\r\n               style={props.style ? props.style : {}}\r\n        >\r\n            <Modal.Header>\r\n                <h5 className=\"modal-title\">{props.helpText.title}</h5>\r\n                <button type=\"button\"\r\n                        className=\"btn-close\"\r\n                        data-dismiss=\"modal\"\r\n                        aria-label=\"Close\"\r\n                        onClick={props.closeHelpModal}>\r\n                </button>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div dangerouslySetInnerHTML={{__html: props.helpText.content}}\r\n                      style={{overflowY: \"auto\", maxHeight: \"66vh\"}}\r\n                />\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button type=\"button\"\r\n                        className=\"btn btn-primary\"\r\n                        onClick={props.closeHelpModal}>\r\n                    {applicationStrings.button_close[language]}\r\n                </button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}","import {LANGUAGE_EN} from \"../config/Constants\";\r\n\r\nexport interface HelpText {\r\n    title: string,\r\n    content: string\r\n}\r\n\r\nexport function getHelpText(helpModalId: number, languageId: string): HelpText | null {\r\n    const helpFile = require(\"../static/help/help.json\");\r\n    const entry = helpFile.entries.find( (entry) => entry.id === helpModalId);\r\n\r\n    if(entry) {\r\n        const languageSection = languageId === LANGUAGE_EN ? entry.en : entry.de;\r\n        const title = languageSection.title;\r\n        const contentArray = languageSection.content;\r\n\r\n        let content = \"\";\r\n        for(let i=0; i < contentArray.length; i++) {\r\n            content += contentArray[i];\r\n            if(i < (contentArray.length-1)) {\r\n                content += \"<br />\"\r\n            }\r\n        }\r\n\r\n        return {\r\n            title: title,\r\n            content: content\r\n        };\r\n    }\r\n\r\n    return null\r\n}","import {Button, ButtonGroup} from \"react-bootstrap\";\r\nimport {\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO, TAB_JUXTAPOSITION,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\ninterface ChartMenuPanelProps {\r\n    dataPage: string\r\n    setDataPage: (id: string) => void\r\n    verticalArrangement: boolean\r\n}\r\n\r\nexport function ChartMenuPanel(props: ChartMenuPanelProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const handlePageButtonClick = (value: string) => {\r\n        props.setDataPage(value)\r\n    }\r\n\r\n    const variant = \"link\"\r\n\r\n    const makeButtonLabel = (buttonText): JSX.Element => {\r\n        const classNameSpan = props.verticalArrangement ? \"float-start\" : \"\"\r\n        return <span className={classNameSpan}>{buttonText}</span>\r\n    }\r\n\r\n    const rowClass = props.verticalArrangement ? \"d-flex\" : \"d-flex flex-row flex-wrap\"\r\n\r\n    const labelMinerals = isMobileDevice()\r\n        ? applicationStrings.label_nutrient_min_m[languageContext.language]\r\n        : applicationStrings.label_nutrient_min[languageContext.language]\r\n\r\n    const labelCarbs = isMobileDevice()\r\n        ? applicationStrings.label_nutrient_carbohydrates_m[languageContext.language]\r\n        : applicationStrings.label_nutrient_carbohydrates[languageContext.language]\r\n\r\n    return (\r\n        <div>\r\n            <ButtonGroup className={rowClass} vertical={props.verticalArrangement}>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_BASE_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_BASE_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_overview[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_ENERGY_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_ENERGY_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_energy[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_VITAMIN_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_VITAMIN_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_vit[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_MINERAL_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_MINERAL_DATA}>\r\n                    {makeButtonLabel(labelMinerals)}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_LIPIDS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_LIPIDS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_lipids[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_CARBS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_CARBS_DATA}>\r\n                    {makeButtonLabel(labelCarbs)}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_PROTEINS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_PROTEINS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_proteins[languageContext.language])}\r\n                </Button>\r\n                {props.verticalArrangement &&\r\n                    <Button className=\"btn sidebar-link\"\r\n                            onClick={() => handlePageButtonClick(TAB_JUXTAPOSITION)}\r\n                            variant={variant}\r\n                            active={props.dataPage === TAB_JUXTAPOSITION}>\r\n                        {makeButtonLabel(applicationStrings.label_juxtaposition[languageContext.language])}\r\n                    </Button>\r\n                }\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_INFO)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_INFO}>\r\n                    {makeButtonLabel(applicationStrings.label_info[languageContext.language])}\r\n                </Button>\r\n            </ButtonGroup>\r\n        </div>\r\n    );\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {Form, FormGroup, Modal} from \"react-bootstrap\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport {\r\n    OPTION_NO,\r\n    OPTION_YES,\r\n    UNIT_GRAM,\r\n    UNIT_MICROGRAM,\r\n    UNIT_MILLIGRAM\r\n} from \"../../config/Constants\";\r\nimport Select from 'react-select';\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\n\r\ninterface SettingsProps {\r\n    onHide: () => void\r\n}\r\n\r\nexport default function SettingsModal(props: SettingsProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext).language\r\n\r\n    const handleUnitVitaminsChange = (selectionOption: ReactSelectOption) => {\r\n        if (applicationContext) {\r\n            let dataSettings = {...applicationContext.dataSettings, unitVitamins: selectionOption.value}\r\n            applicationContext.setDataSettings(dataSettings)\r\n        }\r\n    }\r\n\r\n    const handleUnitProteinsChange = (selectionOption: ReactSelectOption) => {\r\n        if (applicationContext) {\r\n            let dataSettings = {...applicationContext.dataSettings, unitProteins: selectionOption.value}\r\n            applicationContext.setDataSettings(dataSettings)\r\n        }\r\n    }\r\n\r\n    const handleIncludeProvitaminsChange = (selectionOption: ReactSelectOption) => {\r\n        if (applicationContext) {\r\n            let dataSettings = {...applicationContext.dataSettings, includeProvitamins: selectionOption.value}\r\n            applicationContext.setDataSettings(dataSettings)\r\n        }\r\n    }\r\n\r\n    const renderMenu = () => {\r\n        const optionsVitamins: Array<ReactSelectOption> = [\r\n            {label: applicationStrings._milligram[language], value: UNIT_MILLIGRAM},\r\n            {label: applicationStrings._microgram[language], value: UNIT_MICROGRAM},\r\n        ]\r\n        const selectedUnitVitamins = applicationContext?.dataSettings.unitVitamins\r\n        const selectedOptionVitamins = optionsVitamins.find(option => option.value === selectedUnitVitamins)\r\n\r\n        const optionsProteins: Array<ReactSelectOption> = [\r\n            {label: applicationStrings._gram[language], value: UNIT_GRAM},\r\n            {label: applicationStrings._milligram[language], value: UNIT_MILLIGRAM},\r\n        ]\r\n        const selectedUnitProteins = applicationContext?.dataSettings.unitProteins\r\n        const selectedOptionProteins = optionsProteins.find(option => option.value === selectedUnitProteins)\r\n\r\n        const optionsProvitamins: Array<ReactSelectOption> = [\r\n            {label: applicationStrings._option_yes[language], value: OPTION_YES},\r\n            {label: applicationStrings._option_no[language], value: OPTION_NO},\r\n        ]\r\n        const includeProvitamins = applicationContext?.dataSettings.includeProvitamins\r\n        const selectedOptionProvitamins = optionsProvitamins.find(option => option.value === includeProvitamins)\r\n\r\n        const classRow = isMobileDevice() ? \"form-row-m\" : \"form-row\"\r\n\r\n        return <div>\r\n            <form>\r\n                <FormGroup controlId=\"formBasicText\">\r\n                    <div className=\"row\">\r\n                        <div className={classRow}>\r\n                            <Form.Label>\r\n                                {applicationStrings.modal_settings_label_unit_vitamins[language]}:\r\n                            </Form.Label>\r\n                            <Select options={optionsVitamins}\r\n                                    value={selectedOptionVitamins}\r\n                                    isSearchable={false}\r\n                                    onChange={(value) => handleUnitVitaminsChange(value)}\r\n                            />\r\n                        </div>\r\n                        <div className={classRow}>\r\n                            <Form.Label>\r\n                                {applicationStrings.modal_settings_label_unit_proteins[language]}:\r\n                            </Form.Label>\r\n                            <Select options={optionsProteins}\r\n                                    value={selectedOptionProteins}\r\n                                    isSearchable={false}\r\n                                    onChange={(value) => handleUnitProteinsChange(value)}\r\n                            />\r\n                        </div>\r\n                        <div className={classRow}>\r\n                            <Form.Label>\r\n                                {applicationStrings.modal_settings_label_provitamins[language]}:\r\n                            </Form.Label>\r\n                            <Select options={optionsProvitamins}\r\n                                    value={selectedOptionProvitamins}\r\n                                    isSearchable={false}\r\n                                    onChange={(value) => handleIncludeProvitaminsChange(value)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </FormGroup>\r\n            </form>\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        <Modal show={true}>\r\n            <Modal.Header>\r\n                <h5 className=\"modal-title\"><b>{applicationStrings.modal_settings_title[language]}</b></h5>\r\n                <button type=\"button\"\r\n                        className=\"btn-close\"\r\n                        data-dismiss=\"modal\"\r\n                        aria-label=\"Close\"\r\n                        onClick={props.onHide}>\r\n                </button>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div style={{padding: \"20px\"}}>\r\n                    {renderMenu()}\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button type=\"button\"\r\n                        className=\"btn btn-primary\"\r\n                        onClick={props.onHide}>\r\n                    {applicationStrings.button_close[language]}\r\n                </button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n\r\n}","import React, {useContext, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {FaBookOpen, FaChartBar, FaQuestionCircle, FaThList, FaTimes, FaTools} from \"react-icons/fa\";\r\nimport {\r\n    DISPLAYMODE_CHART,\r\n    DISPLAYMODE_TABLE,\r\n    PATH_FOODDATA_PANEL,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO, TAB_JUXTAPOSITION,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {getNameFromFoodNameList, shortenName} from \"../../service/nutrientdata/NameTypeService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodDataPageBody from \"./FoodDataPageBody\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {HelpModal} from \"../HelpModal\";\r\nimport {getHelpText, HelpText} from \"../../service/HelpService\";\r\nimport getName from \"../../service/LanguageService\";\r\nimport {ChartMenuPanel} from \"./ChartMenuPanel\";\r\nimport {getSourceName} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport SettingsModal from \"./SettingsModal\";\r\n\r\nimport {VitaminsBook} from \"./VitaminBook\";\r\nimport nutrientBook from \"../../static/nutrientBook.json\";\r\nimport {BookDataEntry} from \"../../types/BookData\";\r\n\r\n\r\ninterface FoodDataPageHeaderProps {\r\n    setDisplayMode: (id: string) => void\r\n    setDataPage: (id: string) => void\r\n    selectedFoodItem: SelectedFoodItem\r\n    tableData: Array<FoodTableDataObject>\r\n}\r\n\r\nexport default function FoodDataPageHeader(props: FoodDataPageHeaderProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const [helpModalId, setHelpModalId] = useState<number>(0)\r\n    const [showBookModal, setShowBookModal] = useState<boolean>(false)\r\n    const [showSettingsModal, setShowSettingsModal] = useState<boolean>(false)\r\n\r\n    if (applicationContext === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const displayMode = applicationContext.applicationData.foodDataPanel.displayMode\r\n    const dataPage = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n\r\n    const handleRadioButtonClick = (value: string) => {\r\n        props.setDisplayMode(value)\r\n    }\r\n\r\n    const closeTab = () => {\r\n        const id = (props.selectedFoodItem.foodItem.id)\r\n        const remainingItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length - 1\r\n        applicationContext.setFoodDataPanelData.removeItemFromFoodDataPanel(id)\r\n\r\n        if (remainingItems === 0) {\r\n            history.push({pathName: PATH_FOODDATA_PANEL})\r\n        }\r\n    }\r\n\r\n    const openHelpMenu = () => {\r\n        switch (dataPage) {\r\n            case TAB_BASE_DATA:\r\n                setHelpModalId(1)\r\n                return;\r\n            case TAB_ENERGY_DATA:\r\n                setHelpModalId(2)\r\n                return;\r\n            case TAB_VITAMIN_DATA:\r\n                setHelpModalId(3)\r\n                return;\r\n            case TAB_MINERAL_DATA:\r\n                setHelpModalId(4)\r\n                return;\r\n            case TAB_LIPIDS_DATA:\r\n                setHelpModalId(5)\r\n                return;\r\n            case TAB_INFO:\r\n                setHelpModalId(6)\r\n                return;\r\n            case TAB_CARBS_DATA:\r\n                setHelpModalId(7)\r\n                return;\r\n            case TAB_PROTEINS_DATA:\r\n                setHelpModalId(8)\r\n                return;\r\n            case TAB_JUXTAPOSITION:\r\n                setHelpModalId(11)\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    const openSettingsMenu = () => {\r\n        setShowSettingsModal(true)\r\n    }\r\n\r\n    const openVitaminMineralBook = () => {\r\n        setShowBookModal(true)\r\n    }\r\n\r\n    const enabledDisplayButtonClasses = \"button-displaymode-enabled\"\r\n    const disabledDisplayButtonClasses = \"button-displaymode-disabled\"\r\n\r\n    const chartButtonClasses = displayMode === DISPLAYMODE_CHART ? enabledDisplayButtonClasses\r\n        : disabledDisplayButtonClasses;\r\n\r\n    const tablesButtonClasses = displayMode === DISPLAYMODE_TABLE ? enabledDisplayButtonClasses\r\n        : disabledDisplayButtonClasses;\r\n\r\n    const foodNamesList = applicationContext.foodDataCorpus.foodNames;\r\n\r\n\r\n    let foodName\r\n    if (props.selectedFoodItem.foodItem.nameId) {\r\n        foodName = getNameFromFoodNameList(foodNamesList, props.selectedFoodItem.foodItem.nameId, languageContext.language)\r\n    } else {\r\n        foodName = props.selectedFoodItem.title !== undefined ? props.selectedFoodItem.title : 'Individual'\r\n    }\r\n\r\n    let fullName\r\n    const portionSize = props.selectedFoodItem.portion.amount\r\n\r\n    if (!props.selectedFoodItem.foodItem.aggregated) {\r\n        const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === props.selectedFoodItem.foodItem.conditionId)\r\n        const conditionName = condition ? getName(condition, languageContext.language) : \"\"\r\n        if (isMobileDevice()) {\r\n            foodName = shortenName(foodName, 16)\r\n        }\r\n        fullName = condition?.id !== 100\r\n            ? `${foodName} (${conditionName}, ${portionSize} g)`\r\n            : `${foodName} (${portionSize} g)`\r\n    } else {\r\n        fullName = `${foodName} (${portionSize} g)`\r\n    }\r\n\r\n    const helpText: HelpText | null = helpModalId > 0 ? getHelpText(helpModalId, languageContext.language) : null\r\n    const sourceString = getSourceName(props.selectedFoodItem.selectedSource)\r\n    const selectedDataPage = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n    const sourceToolTip = `${applicationStrings.tooltip_source[languageContext.language]} ${sourceString}`\r\n\r\n    let bookToolTip = null\r\n    let bookData: BookDataEntry[] = []\r\n    switch (selectedDataPage) {\r\n        case TAB_VITAMIN_DATA:\r\n            bookToolTip = applicationStrings.tooltip_icon_vitamins[languageContext.language]\r\n            bookData = nutrientBook.vitamins\r\n            break;\r\n        case TAB_MINERAL_DATA:\r\n            bookToolTip = applicationStrings.tooltip_icon_minerals[languageContext.language]\r\n            bookData = nutrientBook.minerals\r\n            break;\r\n    }\r\n\r\n    const shouldShowBookIcon = selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage == TAB_MINERAL_DATA\r\n\r\n    const smallHelpDialogTabs = [TAB_BASE_DATA, TAB_INFO, TAB_VITAMIN_DATA, TAB_MINERAL_DATA]\r\n\r\n    const helpModalSize = smallHelpDialogTabs.includes(selectedDataPage)\r\n        ? \"sm\"\r\n        : \"lg\"\r\n\r\n    const headerLabelClass = fullName.length <= 48\r\n        ? \"header-label\"\r\n        : \"header-label-small\"\r\n\r\n    return (\r\n        <div style={{paddingBottom: \"6px\"}}>\r\n            {helpText !== null &&\r\n            <HelpModal helpText={helpText}\r\n                       size={helpModalSize}\r\n                       closeHelpModal={() => setHelpModalId(0)}\r\n            />\r\n            }\r\n            {showBookModal &&\r\n            <VitaminsBook selectedDataTab={selectedDataPage} bookData={bookData}\r\n                          closeBookModal={() => setShowBookModal(false)}/>\r\n            }\r\n            {showSettingsModal &&\r\n            <SettingsModal onHide={() => setShowSettingsModal(false)}/>\r\n            }\r\n            <div className={\"d-flex flex-nowrap\"}>\r\n                <div className=\"col-2\">\r\n                    <div className={\"card\"}>\r\n                        <div className=\"card-body\" style={{paddingLeft: \"0.65vw\"}}>\r\n                            <ChartMenuPanel verticalArrangement={true} setDataPage={props.setDataPage}\r\n                                            dataPage={selectedDataPage}/>\r\n                            <div className={\"d-flex card\"} style={{marginTop: \"2vh\", backgroundColor: \"#eeeeee\"}}>\r\n                                <div className={\"text-center food-analyzer-sourcebox\"} data-tip={sourceToolTip}>\r\n                                    {sourceString}\r\n                                    <ReactTooltip/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={\"col-10\"}>\r\n                    <div className=\"d-flex flex-row justify-content-between\" style={{marginTop: \"1vh\"}}>\r\n                        <div style={{paddingTop: \"0.75vh\", paddingLeft: \"1vw\"}}>\r\n                            <div className={headerLabelClass}>\r\n                                <b>{fullName}</b>\r\n                            </div>\r\n                        </div>\r\n                        <div className={\"d-flex flex-row align-items-start\"} style={{paddingLeft: \"0.75vw\", paddingRight: \"0.25vw\"}}>\r\n                            {shouldShowBookIcon &&\r\n                            <Button className={\"button-foodPanelHead\"}\r\n                                    onClick={() => openVitaminMineralBook()}\r\n                                    data-tip={bookToolTip}>\r\n                                <ReactTooltip/>\r\n                                <FaBookOpen/>\r\n                            </Button>\r\n                            }\r\n                            <div className=\"btn-group\" role=\"group\">\r\n                                <Button className={chartButtonClasses}\r\n                                        onClick={() => handleRadioButtonClick(DISPLAYMODE_CHART)}\r\n                                        active={displayMode === DISPLAYMODE_CHART}\r\n                                        data-for={\"datapanel-chart\"}\r\n                                        data-tip={applicationStrings.tooltip_icon_charts[languageContext.language]}>\r\n                                    <ReactTooltip id={\"datapanel-chart\"}/>\r\n                                    <FaChartBar/>\r\n                                </Button>\r\n                                <Button className={tablesButtonClasses}\r\n                                        onClick={() => handleRadioButtonClick(DISPLAYMODE_TABLE)}\r\n                                        active={displayMode === DISPLAYMODE_TABLE}\r\n                                        data-for={\"datapanel-table\"}\r\n                                        data-tip={applicationStrings.tooltip_icon_table[languageContext.language]}>\r\n                                    <ReactTooltip id=\"datapanel-table\"/>\r\n                                    <FaThList/>\r\n                                </Button>\r\n                            </div>\r\n                            <div className={\"d-flex flex-row\"} style={{paddingLeft: \"0.5vw\"}}>\r\n                                <Button className={\"button-foodPanelHead\"}\r\n                                        onClick={openSettingsMenu}\r\n                                        data-for={\"datapanel-settings\"}\r\n                                        data-tip={applicationStrings.tooltip_icon_settings[languageContext.language]}>\r\n                                    <ReactTooltip id=\"datapanel-settings\" globalEventOff=\"click\"/>\r\n                                    <FaTools/>\r\n                                </Button>\r\n                                <Button className={\"button-foodPanelHead\"}\r\n                                        onClick={openHelpMenu}>\r\n                                    <FaQuestionCircle/>\r\n                                </Button>\r\n                                <Button className={\"button-foodPanelHead\"}\r\n                                        onClick={closeTab}\r\n                                        data-for={\"datapanel-close\"}\r\n                                        data-tip={applicationStrings.tooltip_icon_close[languageContext.language]}>\r\n                                    <ReactTooltip id=\"datapanel-close\"/>\r\n                                    <FaTimes/>\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <FoodDataPageBody selectedFoodItem={props.selectedFoodItem}\r\n                                      tableData={props.tableData}\r\n                                      dataPage={dataPage}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import * as MathService from './calculation/MathService';\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {FoodTableDataObject} from \"../types/livedata/SelectedFoodItemData\";\r\nimport {getNutrientData} from \"./nutrientdata/NutrientDataRetriever\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {getTotalAmountOfCarotenoids} from \"./calculation/provitaminCalculation/CarotenoidCalculationService\";\r\nimport {OPTION_YES, UNIT_GRAM, UNIT_MICROGRAM, UNIT_MILLIGRAM} from \"../config/Constants\";\r\nimport {\r\n    getTotalAmountOfExtendedVitaminE,\r\n    hasExtendedData\r\n} from \"./calculation/provitaminCalculation/ExtendedVitaminECalculationService\";\r\nimport DietaryRequirement, {RequirementData} from \"../types/nutrientdata/DietaryRequirement\";\r\nimport {determineDailyRequirement} from \"./calculation/DietaryRequirementService\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    EC_FACTOR_TOCOTRIENOL_ALPHA, EC_FACTOR_TOCOTRIENOL_BETA, EC_FACTOR_TOCOTRIENOL_GAMMA,\r\n    EQ_FACTOR_BETA_CAROTENE,\r\n    EQ_FACTOR_OTHER_CAROTENE, EQ_FACTOR_TOCOPHEROL_BETA, EQ_FACTOR_TOCOPHEROL_DELTA, EQ_FACTOR_TOCOPHEROL_GAMMA\r\n} from \"./calculation/provitaminCalculation/ProvitaminEquivalentFactors\";\r\nimport {autoRound} from \"./calculation/MathService\";\r\nimport {DataSettings} from \"../types/livedata/DataSettings\";\r\nimport {calculateEnergyData} from \"./calculation/EnergyService\";\r\n\r\nexport interface TableCalculationParams {\r\n    selectedFoodItem: SelectedFoodItem\r\n    portion: number\r\n    language: string\r\n    preferredSource: string\r\n    dietaryRequirement?: DietaryRequirement\r\n    userData?: UserData\r\n    dataSettings: DataSettings\r\n}\r\n\r\nexport function createBaseDataTable(params: TableCalculationParams): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const {selectedFoodItem, portion, language} = params\r\n\r\n    const {\r\n        water,\r\n        carbohydrates,\r\n        lipids,\r\n        proteins,\r\n        dietaryFibers,\r\n        ash,\r\n        alcohol,\r\n        caffeine\r\n    } = getNutrientData(selectedFoodItem).baseData\r\n    const {sugar} = getNutrientData(selectedFoodItem).carbohydrateData\r\n\r\n    if (water !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_water[language],\r\n            water,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (carbohydrates !== null) {\r\n        const carbObject = makeCarbsTableObject(carbohydrates, sugar, dietaryFibers, portion, language)\r\n        tableData.push(carbObject)\r\n    }\r\n\r\n    if (lipids !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids[language],\r\n            lipids,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteins !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins[language],\r\n            proteins,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (alcohol !== null) {\r\n        tableData.push(createTableObjectAlcohol(\r\n            applicationStrings.label_nutrient_alcohol[language],\r\n            alcohol,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (caffeine !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_caffeine[language],\r\n            caffeine / 1000,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (ash !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_ash[language],\r\n            ash,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createVitaminTable(params: TableCalculationParams): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const {selectedFoodItem, portion, language, dietaryRequirement, userData, dataSettings} = params\r\n    const vitRequirementData = dietaryRequirement?.vitaminRequirementData ?? null\r\n\r\n    const nutrientData = getNutrientData(selectedFoodItem)\r\n    const unit = params.dataSettings.unitVitamins === UNIT_MILLIGRAM ? \"mg\" : \"µg\"\r\n\r\n    if(!vitRequirementData || !userData) {\r\n        throw new Error(\"Vitamin Requirement Data or User Data is not available\")\r\n    }\r\n\r\n    if (nutrientData.vitaminData.a != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.a, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_a[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.a, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    const {carotenoidData} = nutrientData.vitaminData\r\n\r\n    if (carotenoidData != null && dataSettings.includeProvitamins === OPTION_YES) {\r\n        let totalCarotenoid = getTotalAmountOfCarotenoids(carotenoidData)\r\n\r\n        if (totalCarotenoid !== null) {\r\n            if(dataSettings.unitVitamins === UNIT_MICROGRAM) {\r\n                totalCarotenoid *= 1000\r\n            }\r\n\r\n            let reqString\r\n            let requirementVitaminA = determineDailyRequirement(vitRequirementData.a, userData)\r\n            if(dataSettings.unitVitamins === UNIT_MICROGRAM) {\r\n                requirementVitaminA *= 1000\r\n            }\r\n\r\n            reqString = `${requirementVitaminA} ${unit} Vit. A ≙`\r\n\r\n            let carotenoidTableObject = createTableObject(\r\n                applicationStrings.label_nutrient_vit_carotenoid[language],\r\n                totalCarotenoid,\r\n                portion, unit, reqString\r\n            )\r\n\r\n            if (carotenoidData.caroteneAlpha !== null) {\r\n                let reqString = \"\"\r\n                if (vitRequirementData && userData) {\r\n                    const equivalentVitA = calculateProvitaminEquivalent(\r\n                        vitRequirementData.a,\r\n                        EQ_FACTOR_OTHER_CAROTENE,\r\n                        userData,\r\n                        dataSettings\r\n                    )\r\n                    reqString = `... ${applicationStrings.label_prefix_hereof[language]} ${equivalentVitA} ${unit}`\r\n                }\r\n\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_carotenoid_alpha[language]}`\r\n\r\n                carotenoidTableObject = appendTableDataObject(\r\n                    carotenoidTableObject,\r\n                    language,\r\n                    label,\r\n                    getVitaminOrMineralAmount(carotenoidData.caroteneAlpha, dataSettings),\r\n                    portion,\r\n                    unit,\r\n                    reqString\r\n                )\r\n            }\r\n\r\n            if (carotenoidData.caroteneBeta !== null) {\r\n                let reqString = \"\"\r\n                if (vitRequirementData && userData) {\r\n                    const equivalentVitA = calculateProvitaminEquivalent(\r\n                        vitRequirementData.a,\r\n                        EQ_FACTOR_BETA_CAROTENE,\r\n                        userData,\r\n                        dataSettings\r\n                    )\r\n                    reqString = `... ${applicationStrings.label_prefix_hereof[language]} ${equivalentVitA} ${unit}`\r\n                }\r\n\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_carotenoid_beta[language]}`\r\n                carotenoidTableObject = appendTableDataObject(\r\n                    carotenoidTableObject,\r\n                    language,\r\n                    label,\r\n                    getVitaminOrMineralAmount(carotenoidData.caroteneBeta, dataSettings),\r\n                    portion,\r\n                    unit,\r\n                    reqString\r\n                )\r\n            }\r\n\r\n            if (carotenoidData.cryptoxanthin !== null) {\r\n                let reqString = \"\"\r\n                if (vitRequirementData && userData) {\r\n                    const equivalentVitA = calculateProvitaminEquivalent(\r\n                        vitRequirementData.a,\r\n                        EQ_FACTOR_OTHER_CAROTENE,\r\n                        userData,\r\n                        dataSettings\r\n                    )\r\n                    reqString = `... ${applicationStrings.label_prefix_hereof[language]} ${equivalentVitA} ${unit}`\r\n                }\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_cryptoxanthin[language]}`\r\n                carotenoidTableObject = appendTableDataObject(\r\n                    carotenoidTableObject,\r\n                    language,\r\n                    label,\r\n                    getVitaminOrMineralAmount(carotenoidData.cryptoxanthin, dataSettings),\r\n                    portion,\r\n                    unit,\r\n                    reqString\r\n                )\r\n            }\r\n\r\n            tableData.push(carotenoidTableObject)\r\n        }\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b1 != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.b1, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_b1[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.b1, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b2 != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.b2, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_b2[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.b2, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b3 != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.b3, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_b3[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.b3, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b5 != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.b5, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_b5[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.b5, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b6 != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.b6, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_b6[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.b6, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b9 != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.b9, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_b9[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.b9, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b12 != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.b12, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_b12[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.b12, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.c != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.c, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_c[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.c, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.d != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.d, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_d[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.d, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.e != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.e, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_e[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.e, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    const {extendedVitaminE} = nutrientData.vitaminData\r\n\r\n    if (nutrientData.vitaminData.e !== null && extendedVitaminE !== null && hasExtendedData(extendedVitaminE)\r\n            && dataSettings.includeProvitamins === OPTION_YES) {\r\n        let totalExtensions = getTotalAmountOfExtendedVitaminE(extendedVitaminE)\r\n\r\n        if (totalExtensions !== null) {\r\n            if(dataSettings.unitVitamins === UNIT_MICROGRAM) {\r\n                totalExtensions *= 1000\r\n            }\r\n\r\n            let reqString = \"\"\r\n            if (vitRequirementData && userData) {\r\n                const requirementVitaminE = determineDailyRequirement(vitRequirementData.e, userData)\r\n                reqString = `${requirementVitaminE} mg Vit. E ≙`\r\n            }\r\n\r\n            let extendedVitaminETable = createTableObject(\r\n                applicationStrings.label_nutrient_vit_e_ext[language],\r\n                totalExtensions,\r\n                portion,\r\n                unit,\r\n                reqString\r\n            )\r\n\r\n            if (extendedVitaminE.tocopherolBeta !== null) {\r\n                let reqString = \"\"\r\n                if (vitRequirementData?.e && userData) {\r\n                    const equivalentVitE = calculateProvitaminEquivalent(\r\n                        vitRequirementData.e,\r\n                        EQ_FACTOR_TOCOPHEROL_BETA,\r\n                        userData,\r\n                        dataSettings\r\n                    )\r\n                    reqString = `... ${applicationStrings.label_prefix_hereof[language]} ${equivalentVitE} ${unit}`\r\n                }\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_e_ext_tocopherolBeta[language]}`\r\n                extendedVitaminETable = appendTableDataObject(\r\n                    extendedVitaminETable,\r\n                    language,\r\n                    label,\r\n                    getVitaminOrMineralAmount(extendedVitaminE.tocopherolBeta, dataSettings),\r\n                    portion,\r\n                    unit,\r\n                    reqString\r\n                )\r\n            }\r\n\r\n            if (extendedVitaminE.tocopherolGamma !== null) {\r\n                let reqString = \"\"\r\n                if (vitRequirementData?.e && userData) {\r\n                    const equivalentVitE = calculateProvitaminEquivalent(\r\n                        vitRequirementData.e,\r\n                        EQ_FACTOR_TOCOPHEROL_GAMMA,\r\n                        userData,\r\n                        dataSettings\r\n                    )\r\n                    reqString = `... ${applicationStrings.label_prefix_hereof[language]} ${equivalentVitE} ${unit}`\r\n                }\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_e_ext_tocopherolGamma[language]}`\r\n                extendedVitaminETable = appendTableDataObject(\r\n                    extendedVitaminETable,\r\n                    language,\r\n                    label,\r\n                    getVitaminOrMineralAmount(extendedVitaminE.tocopherolGamma, dataSettings),\r\n                    portion,\r\n                    unit,\r\n                    reqString)\r\n            }\r\n\r\n            if (extendedVitaminE.tocopherolDelta !== null) {\r\n                let reqString = \"\"\r\n                if (vitRequirementData?.e && userData) {\r\n                    const equivalentVitE = calculateProvitaminEquivalent(\r\n                        vitRequirementData.e,\r\n                        EQ_FACTOR_TOCOPHEROL_DELTA,\r\n                        userData,\r\n                        dataSettings\r\n                    )\r\n                    reqString = `... ${applicationStrings.label_prefix_hereof[language]} ${equivalentVitE} ${unit}`\r\n                }\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_e_ext_tocopherolDelta[language]}`\r\n                extendedVitaminETable = appendTableDataObject(\r\n                    extendedVitaminETable,\r\n                    language,\r\n                    label,\r\n                    getVitaminOrMineralAmount(extendedVitaminE.tocopherolDelta, dataSettings),\r\n                    portion,\r\n                    unit,\r\n                    reqString\r\n                )\r\n            }\r\n\r\n            if (extendedVitaminE.tocotrienolAlpha !== null) {\r\n                let reqString = \"\"\r\n                if (vitRequirementData?.e && userData) {\r\n                    const equivalentVitE = calculateProvitaminEquivalent(\r\n                        vitRequirementData.e,\r\n                        EC_FACTOR_TOCOTRIENOL_ALPHA,\r\n                        userData,\r\n                        dataSettings\r\n                    )\r\n                    reqString = `... ${applicationStrings.label_prefix_hereof[language]} ${equivalentVitE} ${unit}`\r\n                }\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_e_ext_tocotrienolAlpha[language]}`\r\n                extendedVitaminETable = appendTableDataObject(\r\n                    extendedVitaminETable,\r\n                    language,\r\n                    label,\r\n                    getVitaminOrMineralAmount(extendedVitaminE.tocotrienolAlpha, dataSettings),\r\n                    portion,\r\n                    unit,\r\n                    reqString\r\n                )\r\n            }\r\n\r\n            if (extendedVitaminE.tocotrienolBeta !== null) {\r\n                let reqString = \"\"\r\n                if (vitRequirementData?.e && userData) {\r\n                    const equivalentVitE = calculateProvitaminEquivalent(\r\n                        vitRequirementData.e,\r\n                        EC_FACTOR_TOCOTRIENOL_BETA,\r\n                        userData,\r\n                        dataSettings\r\n                    )\r\n                    reqString = `... ${applicationStrings.label_prefix_hereof[language]} ${equivalentVitE} ${unit}`\r\n                }\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_e_ext_tocotrienolBeta[language]}`\r\n                extendedVitaminETable = appendTableDataObject(\r\n                    extendedVitaminETable,\r\n                    language,\r\n                    label,\r\n                    getVitaminOrMineralAmount(extendedVitaminE.tocotrienolBeta, dataSettings),\r\n                    portion,\r\n                    unit,\r\n                    reqString\r\n                )\r\n            }\r\n\r\n            if (extendedVitaminE.tocotrienolGamma !== null) {\r\n                let reqString = \"\"\r\n                if (vitRequirementData?.e && userData) {\r\n                    const equivalentVitE = calculateProvitaminEquivalent(\r\n                        vitRequirementData.e,\r\n                        EC_FACTOR_TOCOTRIENOL_GAMMA,\r\n                        userData,\r\n                        dataSettings\r\n                    )\r\n                    reqString = `... ${applicationStrings.label_prefix_hereof[language]} ${equivalentVitE} ${unit}`\r\n                }\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_e_ext_tocotrienolGamma[language]}`\r\n                extendedVitaminETable = appendTableDataObject(\r\n                    extendedVitaminETable,\r\n                    language,\r\n                    label,\r\n                    getVitaminOrMineralAmount(extendedVitaminE.tocotrienolGamma, dataSettings),\r\n                    portion,\r\n                    unit,\r\n                    reqString\r\n                )\r\n            }\r\n\r\n            tableData.push(extendedVitaminETable)\r\n        }\r\n    }\r\n\r\n    if (nutrientData.vitaminData.k != null) {\r\n        const requirement = makeDietaryRequirementString(vitRequirementData.k, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_vit_k[language],\r\n                getVitaminOrMineralAmount(nutrientData.vitaminData.k, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createMineralTable(params: TableCalculationParams): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const {selectedFoodItem, portion, language, dietaryRequirement, userData, dataSettings} = params\r\n    const minRequirementData = dietaryRequirement?.mineralRequirementData\r\n\r\n    if(!minRequirementData || !userData) {\r\n        throw new Error(\"Mineral Requirement Data or User Data is not available\")\r\n    }\r\n\r\n    const unit = params.dataSettings.unitVitamins === UNIT_MILLIGRAM ? \"mg\" : \"µg\"\r\n\r\n    const firstNutrientData = getNutrientData(selectedFoodItem);\r\n\r\n    if (firstNutrientData.mineralData.calcium != null) {\r\n        const requirement = makeDietaryRequirementString(minRequirementData.calcium, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_min_calcium[language],\r\n                getVitaminOrMineralAmount(firstNutrientData.mineralData.calcium, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.iron != null) {\r\n        const requirement = makeDietaryRequirementString(minRequirementData.iron, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_min_iron[language],\r\n                getVitaminOrMineralAmount(firstNutrientData.mineralData.iron, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.magnesium != null) {\r\n        const requirement = makeDietaryRequirementString(minRequirementData.magnesium, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_min_magnesium[language],\r\n                getVitaminOrMineralAmount(firstNutrientData.mineralData.magnesium, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.phosphorus != null) {\r\n        const requirement = makeDietaryRequirementString(minRequirementData.phosphorus, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_min_phosphorus[language],\r\n                getVitaminOrMineralAmount(firstNutrientData.mineralData.phosphorus, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.potassium != null) {\r\n        const requirement = makeDietaryRequirementString(minRequirementData.potassium, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_min_potassium[language],\r\n                getVitaminOrMineralAmount(firstNutrientData.mineralData.potassium, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.sodium != null) {\r\n        const requirement = makeDietaryRequirementString(minRequirementData.sodium, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_min_sodium[language],\r\n                getVitaminOrMineralAmount(firstNutrientData.mineralData.sodium, dataSettings),\r\n                portion, unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.zinc != null) {\r\n        const requirement = makeDietaryRequirementString(minRequirementData.zinc, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_min_zinc[language],\r\n                getVitaminOrMineralAmount(firstNutrientData.mineralData.zinc, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.copper != null) {\r\n        const requirement = makeDietaryRequirementString(minRequirementData.copper, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_min_copper[language],\r\n                getVitaminOrMineralAmount(firstNutrientData.mineralData.copper, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.manganese != null) {\r\n        const requirement = makeDietaryRequirementString(minRequirementData.manganese, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_min_manganese[language],\r\n                getVitaminOrMineralAmount(firstNutrientData.mineralData.manganese, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.selenium != null) {\r\n        const requirement = makeDietaryRequirementString(minRequirementData.selenium, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_min_selenium[language],\r\n                getVitaminOrMineralAmount(firstNutrientData.mineralData.selenium, dataSettings),\r\n                portion,\r\n                unit,\r\n                requirement\r\n            )\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createLipidsTable(params: TableCalculationParams): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const {selectedFoodItem, portion, language} = params\r\n    const firstNutrientData = getNutrientData(selectedFoodItem);\r\n\r\n    if (firstNutrientData.lipidData.saturated != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_saturated[language],\r\n            firstNutrientData.lipidData.saturated,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.unsaturatedMono != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_unsaturated_mono[language],\r\n            firstNutrientData.lipidData.unsaturatedMono,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.unsaturatedPoly != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_unsaturated_poly[language],\r\n            firstNutrientData.lipidData.unsaturatedPoly,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.omegaData) {\r\n        if (firstNutrientData.lipidData.omegaData.omega3 != null) {\r\n            tableData.push(createTableObject(\r\n                ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_lipids_omega3[language]}`,\r\n                firstNutrientData.lipidData.omegaData.omega3,\r\n                portion, \"g\")\r\n            );\r\n        }\r\n\r\n        if (firstNutrientData.lipidData.omegaData.omega6 != null) {\r\n            tableData.push(createTableObject(\r\n                ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_lipids_omega6[language]}`,\r\n                firstNutrientData.lipidData.omegaData.omega6,\r\n                portion, \"g\")\r\n            );\r\n        }\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.transFattyAcids != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_transfattyAcids[language],\r\n            firstNutrientData.lipidData.transFattyAcids,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.cholesterol != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_cholesterol[language],\r\n            firstNutrientData.lipidData.cholesterol,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createEnergyTable(params: TableCalculationParams): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const {selectedFoodItem, portion, language} = params\r\n\r\n    const nutrientData = getNutrientData(selectedFoodItem)\r\n    const energy = nutrientData.baseData.energy !== null ? nutrientData.baseData.energy : 0;\r\n    const energyData = calculateEnergyData(nutrientData.baseData)\r\n\r\n    const energyKj = MathService.round(4.186 * energy, 1)\r\n\r\n    let energyObject = createTableObjectEnergy(\r\n        \"Energie\",\r\n        energy,\r\n        energyKj,\r\n        portion\r\n    );\r\n\r\n    const makeBaseLabel = (key) => {\r\n        return `${applicationStrings.label_prefix_energy_in[language]} ${key}`\r\n    }\r\n\r\n    if(energyData) {\r\n        let label = makeBaseLabel(applicationStrings.label_nutrient_carbohydrates_plural[language])\r\n        const carbEnergy = energyData.carbohydrates + energyData.dietaryFibers\r\n        energyObject = appendTableDataObject(energyObject, language, label, carbEnergy, portion, \"kcal\")\r\n\r\n        label = ` ... ${applicationStrings.label_prefix_hereof_in[language]} ${applicationStrings.label_nutrient_dietaryFibers_plural[language]}`\r\n        energyObject = appendTableDataObject(energyObject, language, label, energyData.dietaryFibers, portion, \"kcal\")\r\n\r\n        label = makeBaseLabel(applicationStrings.label_nutrient_lipids[language])\r\n        energyObject = appendTableDataObject(energyObject, language, label, energyData.fat, portion, \"kcal\")\r\n\r\n        label = makeBaseLabel(applicationStrings.label_nutrient_proteins[language])\r\n        energyObject = appendTableDataObject(energyObject, language, label, energyData.proteins, portion, \"kcal\")\r\n\r\n        if(energyData.alcohol) {\r\n            label = makeBaseLabel(applicationStrings.label_nutrient_alcohol[language])\r\n            energyObject = appendTableDataObject(energyObject, language, label, energyData.alcohol, portion, \"kcal\")\r\n        }\r\n    }\r\n\r\n    tableData.push(energyObject)\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createCarbsTable(params: TableCalculationParams): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const {selectedFoodItem, portion, language} = params\r\n\r\n    const firstNutrientData = getNutrientData(selectedFoodItem);\r\n    const {carbohydrates, dietaryFibers} = firstNutrientData.baseData\r\n    const {sugar} = firstNutrientData.carbohydrateData\r\n\r\n    if (carbohydrates) {\r\n        const carbObject = makeCarbsTableObject(carbohydrates, sugar, dietaryFibers, portion, language)\r\n        tableData.push(carbObject)\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.glucose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_glucose[language],\r\n            firstNutrientData.carbohydrateData.glucose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.fructose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_fructose[language],\r\n            firstNutrientData.carbohydrateData.fructose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.galactose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_galactose[language],\r\n            firstNutrientData.carbohydrateData.galactose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.sucrose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_sucrose[language],\r\n            firstNutrientData.carbohydrateData.sucrose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.lactose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_lactose[language],\r\n            firstNutrientData.carbohydrateData.lactose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.maltose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_maltose[language],\r\n            firstNutrientData.carbohydrateData.maltose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.starch != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_starch[language],\r\n            firstNutrientData.carbohydrateData.starch,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createProteinTable(params: TableCalculationParams): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const {selectedFoodItem, portion, language, dietaryRequirement, userData, dataSettings} = params\r\n    const protRequirementData = dietaryRequirement?.proteinRequirementData ?? null\r\n\r\n    const unit = params.dataSettings.unitProteins === UNIT_MILLIGRAM ? \"mg\" : \"g\"\r\n\r\n    const proteinData = getNutrientData(selectedFoodItem).proteinData;\r\n    if (!proteinData) {\r\n        return tableData;\r\n    }\r\n\r\n    if(!protRequirementData || !userData) {\r\n        throw new Error(\"Protein Requirement Data or User Data is not available\")\r\n    }\r\n\r\n    if (proteinData.tryptophan != null) {\r\n        const requirement = calculateProteinRequirement(protRequirementData.tryptophan, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_tryptophan[language],\r\n                getProteinAmount(proteinData.tryptophan, dataSettings),\r\n                portion,\r\n                unit,\r\n                protRequirementData ? `${requirement} ${unit}` : \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.threonine != null) {\r\n        const requirement = calculateProteinRequirement(protRequirementData.threonine, userData, dataSettings)\r\n        tableData.push(\r\n                createTableObject(\r\n                applicationStrings.label_nutrient_proteins_threonine[language],\r\n                getProteinAmount(proteinData.threonine, dataSettings),\r\n                portion,\r\n                    unit,\r\n                    protRequirementData ? `${requirement} ${unit}` : \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.isoleucine != null) {\r\n        const requirement = calculateProteinRequirement(protRequirementData.isoleucine, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_isoleucine[language],\r\n                getProteinAmount(proteinData.isoleucine, dataSettings),\r\n                portion, unit,\r\n                protRequirementData ? `${requirement} ${unit}` : \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.leucine != null) {\r\n        const requirement = calculateProteinRequirement(protRequirementData.leucine, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_leucine[language],\r\n                getProteinAmount(proteinData.leucine, dataSettings),\r\n                portion, unit,\r\n                protRequirementData ? `${requirement} ${unit}` : \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.lysine != null) {\r\n        const requirement = calculateProteinRequirement(protRequirementData.lysine, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_lysine[language],\r\n                getProteinAmount(proteinData.lysine, dataSettings),\r\n                portion, unit,\r\n                protRequirementData ? `${requirement} ${unit}` : \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.methionine != null) {\r\n        const requirement = calculateProteinRequirement(protRequirementData.methionine, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_methionine[language],\r\n                getProteinAmount(proteinData.methionine, dataSettings),\r\n                portion,\r\n                unit,\r\n                protRequirementData ? `${requirement} ${unit}` : \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.cystine != null) {\r\n        const requirement = calculateProteinRequirement(protRequirementData.cystine, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_cystine[language],\r\n                getProteinAmount(proteinData.cystine, dataSettings),\r\n                portion,\r\n                unit,\r\n                protRequirementData ? `${requirement} ${unit}` : \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.phenylalanine != null) {\r\n        const requirement = calculateProteinRequirement(protRequirementData.phenylalanine, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_phenylalanine[language],\r\n                getProteinAmount(proteinData.phenylalanine, dataSettings),\r\n                portion,\r\n                unit,\r\n                protRequirementData ? `${requirement} ${unit}` : \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.tyrosine != null) {\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_tyrosine[language],\r\n                getProteinAmount(proteinData.tyrosine, dataSettings),\r\n                portion,\r\n                unit,\r\n                \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.valine != null) {\r\n        const requirement = calculateProteinRequirement(protRequirementData.valine, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_valine[language],\r\n                getProteinAmount(proteinData.valine, dataSettings),\r\n                portion,\r\n                unit,\r\n                protRequirementData ? `${requirement} ${unit}` : \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.arginine != null) {\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_arginine[language],\r\n                getProteinAmount(proteinData.arginine, dataSettings),\r\n                portion,\r\n                unit,\r\n                \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.histidine != null) {\r\n        const requirement = calculateProteinRequirement(protRequirementData.histidine, userData, dataSettings)\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_histidine[language],\r\n                getProteinAmount(proteinData.histidine, dataSettings),\r\n                portion,\r\n                unit,\r\n                protRequirementData ? `${requirement} ${unit}` : \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.alanine != null) {\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_alanine[language],\r\n                getProteinAmount(proteinData.alanine, dataSettings),\r\n                portion, unit,\r\n                \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.asparticAcid != null) {\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_asparticAcid[language],\r\n                getProteinAmount(proteinData.asparticAcid, dataSettings),\r\n                portion,\r\n                unit,\r\n                \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.glutamicAcid != null) {\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_glutamicAcid[language],\r\n                getProteinAmount(proteinData.glutamicAcid, dataSettings),\r\n                portion,\r\n                unit,\r\n                \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.glycine != null) {\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_glysine[language],\r\n                getProteinAmount(proteinData.glycine, dataSettings),\r\n                portion,\r\n                unit,\r\n                \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.proline != null) {\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_proline[language],\r\n                getProteinAmount(proteinData.proline, dataSettings),\r\n                portion,\r\n                unit,\r\n                \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    if (proteinData.serine != null) {\r\n        tableData.push(\r\n            createTableObject(\r\n                applicationStrings.label_nutrient_proteins_serine[language],\r\n                getProteinAmount(proteinData.serine, dataSettings),\r\n                portion,\r\n                unit,\r\n                \"\"\r\n            )\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nfunction createTableObject(label: string, value_100g: number, portion: number, unit: String, requirement?: string): FoodTableDataObject {\r\n    const valuePortion = calculatePortionData(value_100g, portion);\r\n    return {\r\n        label: label,\r\n        value_100g: `${MathService.autoRound(value_100g)} ${unit}`,\r\n        value_portion: `${MathService.autoRound(valuePortion)} ${unit}`,\r\n        dailyRequirement: requirement ?? \"\"\r\n    }\r\n}\r\n\r\nfunction createTableObjectEnergy(label: string, value_100g_kcal: number, value_100g_kj: number, portion: number): FoodTableDataObject {\r\n    const valuePortionKcal = calculatePortionData(value_100g_kcal, portion);\r\n    const valuePortionKj = calculatePortionData(value_100g_kj, portion);\r\n\r\n    return {\r\n        label: label,\r\n        value_100g: `${MathService.autoRound(value_100g_kcal)} kcal  (${MathService.autoRound(value_100g_kj)} kJ)`,\r\n        value_portion: `${MathService.autoRound(valuePortionKcal)} kcal  (${MathService.autoRound(valuePortionKj)} kJ)`\r\n    }\r\n}\r\n\r\nfunction createTableObjectAlcohol(label: string, value_100g: number, portion: number, unit: String): FoodTableDataObject {\r\n    const valuePortion = calculatePortionData(value_100g, portion);\r\n    if (valuePortion === null) {\r\n        return {\r\n            label: label,\r\n            value_100g: \"n/a\",\r\n            value_portion: \"n/a\",\r\n        }\r\n    }\r\n\r\n    const valueVolume100gram = value_100g * 1.267\r\n\r\n    return {\r\n        label: label,\r\n        value_100g: `${MathService.autoRound(value_100g)} ${unit}   ( = ${MathService.autoRound(valueVolume100gram)} Vol % )`,\r\n        value_portion: `${MathService.autoRound(valuePortion)} ${unit}   ( = ${MathService.autoRound(valueVolume100gram)} Vol % )`\r\n    }\r\n}\r\n\r\n\r\nexport function calculatePortionData(value: number | null, portionSize: number): number | null {\r\n    if (value === null || value === undefined) {\r\n        return null;\r\n    } else if (value === 0) {\r\n        return 0;\r\n    }\r\n    return (value / 100) * portionSize;\r\n}\r\n\r\n\r\nfunction makeCarbsTableObject(carbohydrates: number, sugar: number | null, dietaryFibers: number | null,\r\n                              portion: number, language: string): FoodTableDataObject {\r\n\r\n    // NOTE: Sometimes the sugar or dietary fibers value is above the carbs value, which is impossible (> 100 %)\r\n    if(sugar && (sugar > carbohydrates)) {\r\n        sugar = carbohydrates\r\n    }\r\n    if(dietaryFibers && (dietaryFibers > carbohydrates)) {\r\n        dietaryFibers = carbohydrates\r\n    }\r\n    if(sugar && dietaryFibers && (sugar + dietaryFibers > carbohydrates)) {  // Special case, where sug + fibers are above the 100 %\r\n        sugar = (sugar / (sugar+dietaryFibers)) * carbohydrates\r\n        dietaryFibers = (dietaryFibers / (sugar+dietaryFibers)) * carbohydrates\r\n    }\r\n\r\n    let carbObject = createTableObject(\r\n        applicationStrings.label_nutrient_carbohydrates[language],\r\n        carbohydrates,\r\n        portion, \"g\")\r\n\r\n    if (sugar !== null) {\r\n        const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_sugar[language]}`\r\n        carbObject = appendTableDataObject(carbObject, language, label, sugar, portion, \"g\")\r\n    }\r\n\r\n    if (dietaryFibers !== null) {\r\n        const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_dietaryFibers[language]}`\r\n        carbObject = appendTableDataObject(carbObject, language, label, dietaryFibers, portion, \"g\")\r\n    }\r\n\r\n    return carbObject\r\n}\r\n\r\n\r\nfunction appendTableDataObject(object: FoodTableDataObject, language: string, label: string, value: number,\r\n                               portion: number, unit: string, reqString?: string): FoodTableDataObject {\r\n    const appendedObject = {...object}\r\n    const extension = createTableObject(label, value, portion, unit, reqString)\r\n\r\n    appendedObject.label = appendedObject.label + '&&' + extension.label\r\n    appendedObject.value_100g = appendedObject.value_100g + '&&' + extension.value_100g\r\n    appendedObject.value_portion = appendedObject.value_portion + '&&' + extension.value_portion\r\n\r\n    if (reqString) {\r\n        appendedObject.dailyRequirement = appendedObject.dailyRequirement + '&&' + extension.dailyRequirement\r\n    }\r\n\r\n    return appendedObject\r\n}\r\n\r\nfunction getVitaminOrMineralAmount(amountInMg: number, dataSettings: DataSettings) {\r\n    return dataSettings.unitVitamins === UNIT_MILLIGRAM ? amountInMg : amountInMg * 1000;\r\n}\r\n\r\nfunction getProteinAmount(amountInGram: number, dataSettings: DataSettings) {\r\n    return dataSettings.unitProteins === UNIT_GRAM ? amountInGram : amountInGram * 1000;\r\n}\r\n\r\nfunction makeDietaryRequirementString(requirementData: RequirementData, userData: UserData, dataSettings: DataSettings): string {\r\n    let requirement = determineDailyRequirement(requirementData, userData)\r\n    const unit = dataSettings.unitVitamins === UNIT_MILLIGRAM ? \"mg\" : \"µg\";\r\n    if(dataSettings.unitVitamins === UNIT_MICROGRAM) {\r\n        requirement *= 1000\r\n    }\r\n\r\n    return `${requirement} ${unit}`\r\n}\r\n\r\nfunction calculateProteinRequirement(requirementMg: number, userData: UserData | undefined, dataSettings: DataSettings) {\r\n    if(userData === undefined) {\r\n        return 0\r\n    }\r\n    const requirement = (requirementMg * userData.weight)\r\n    return dataSettings.unitProteins === UNIT_MILLIGRAM ? requirement : autoRound(requirement / 1000)\r\n}\r\n\r\nfunction calculateProvitaminEquivalent(referenceVitaminRequriemtnAmount: RequirementData, equivalenceFactor: number,\r\n                                       userData: UserData, dataSettings: DataSettings): number {\r\n    const requirementVitaminA = determineDailyRequirement(referenceVitaminRequriemtnAmount, userData)\r\n    let equivalentVitA = autoRound(requirementVitaminA / equivalenceFactor)\r\n    if(dataSettings.unitVitamins === UNIT_MICROGRAM) {\r\n        equivalentVitA *= 1000;\r\n    }\r\n    return equivalentVitA\r\n}","import SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport FoodDataPageHeader from \"./FoodDataPageHeader\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {\r\n    SOURCE_SRLEGACY,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {\r\n    createBaseDataTable,\r\n    createCarbsTable,\r\n    createEnergyTable,\r\n    createLipidsTable,\r\n    createMineralTable,\r\n    createProteinTable,\r\n    createVitaminTable, TableCalculationParams\r\n} from \"../../service/TableService\";\r\n\r\ninterface FoodDataPageProps {\r\n    selectedFoodItem: SelectedFoodItem,\r\n    dataPage?: string\r\n}\r\n\r\nexport default function FoodDataPage(props: FoodDataPageProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    if(applicationContext === null) {\r\n        throw new Error(\"ApplicationContext is null\")\r\n    }\r\n\r\n    useEffect(() => {\r\n        updatePage()\r\n    }, [applicationContext.dataSettings])\r\n\r\n    const selectedDataTab = applicationContext\r\n        ? applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n        : TAB_BASE_DATA\r\n\r\n    const [tableData, setTableData] = useState<Array<FoodTableDataObject>>([])\r\n\r\n    const updatePage = () => {   // Central update method when any (radio) button was clicked\r\n        let tableDataList: Array<FoodTableDataObject> = [];\r\n        const {portion} = props.selectedFoodItem\r\n\r\n        const preferredSource = applicationContext ? applicationContext.applicationData.preferredSource : SOURCE_SRLEGACY\r\n        const dietaryRequirement = applicationContext?.foodDataCorpus.dietaryRequirements ?? undefined\r\n        const userData = applicationContext?.userData\r\n\r\n        const tableCalculationParams: TableCalculationParams = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portion: portion.amount,\r\n            language: language,\r\n            preferredSource: preferredSource,\r\n            dataSettings: applicationContext.dataSettings\r\n        }\r\n\r\n        const extendedParams = {...tableCalculationParams,\r\n            dietaryRequirement: dietaryRequirement,\r\n            userData: userData\r\n        }\r\n\r\n        if (selectedDataTab === TAB_BASE_DATA) {\r\n            tableDataList = createBaseDataTable(tableCalculationParams);\r\n        } else if (selectedDataTab === TAB_ENERGY_DATA) {\r\n            tableDataList = createEnergyTable(tableCalculationParams);\r\n        } else if (selectedDataTab === TAB_VITAMIN_DATA) {\r\n            tableDataList = createVitaminTable(extendedParams);\r\n        } else if (selectedDataTab === TAB_MINERAL_DATA) {\r\n            tableDataList = createMineralTable(extendedParams);\r\n        } else if (selectedDataTab === TAB_LIPIDS_DATA) {\r\n            tableDataList = createLipidsTable(tableCalculationParams);\r\n        } else if (selectedDataTab === TAB_CARBS_DATA) {\r\n            tableDataList = createCarbsTable(tableCalculationParams);\r\n        } else if (selectedDataTab === TAB_PROTEINS_DATA) {\r\n            tableDataList = createProteinTable(extendedParams);\r\n        }\r\n\r\n        setTableData(tableDataList)\r\n    }\r\n\r\n    useEffect(() => {\r\n            updatePage()\r\n        }, [props.selectedFoodItem,\r\n            applicationContext?.applicationData.preferredSource,\r\n            applicationContext?.applicationData.foodDataPanel.selectedDataPage,\r\n            applicationContext?.applicationData.foodDataPanel.displayMode,\r\n            applicationContext?.userData]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onNewDataPage = (datapage: string) => {\r\n        applicationContext.setFoodDataPanelData.setSelectedDataPage(datapage)\r\n        updatePage()\r\n    }\r\n\r\n    const onDisplayModeChange = (newMode: string) => {\r\n        applicationContext.setFoodDataPanelData.setSelectedDisplayMode(newMode)\r\n        updatePage()\r\n    }\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('FoodDataPage: Render, tabledata = ', tableData)\r\n    }\r\n\r\n    return <div>\r\n        <FoodDataPageHeader setDisplayMode={onDisplayModeChange}\r\n                            setDataPage={onNewDataPage}\r\n                            selectedFoodItem={props.selectedFoodItem}\r\n                            tableData={tableData}\r\n        />\r\n    </div>\r\n\r\n}","import NameType from \"../types/nutrientdata/NameType\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {getNameFromFoodNameList} from \"./nutrientdata/NameTypeService\";\r\nimport FoodDataPage from \"../components/fooddatapanel/FoodDataPage\";\r\nimport React from \"react\";\r\n\r\n/**\r\n * Enriches a selected food item by its JSX container to be displayed as a tab in the food data panel\r\n * @param selectedFoodItem The already initialized selected food item\r\n * @param foodNamesList The food names list\r\n * @param language The selected language\r\n */\r\nexport function makeFoodDataPanelComponent(selectedFoodItem: SelectedFoodItem, foodNamesList: Array<NameType>, \r\n\t\tlanguage: string): SelectedFoodItem | null {\r\n    let foodName\r\n    if(selectedFoodItem.foodItem.nameId) {\r\n        foodName = getNameFromFoodNameList(foodNamesList, selectedFoodItem.foodItem.nameId, language)\r\n    } else {\r\n        foodName = selectedFoodItem.title ?? 'Unknown'\r\n    }\r\n\r\n    if (foodName === null) {\r\n        return null\r\n    }\r\n\r\n    selectedFoodItem.component = <FoodDataPage key={`page component ${selectedFoodItem.id}`} selectedFoodItem={selectedFoodItem}/>\r\n    selectedFoodItem.tab = foodName\r\n    selectedFoodItem.id = selectedFoodItem.foodItem.id\r\n\r\n    return selectedFoodItem\r\n}\r\n\r\n/**\r\n * Sets the food data page component on a given food item and returns a new copy of it.\r\n * @param foodItem A copy of a selected food item, containing the JSX Food Data Page component.\r\n */\r\nexport function setFoodDataPageComponent(foodItem: SelectedFoodItem): SelectedFoodItem {\r\n    const component = <FoodDataPage key={`page component ${foodItem.id}`} selectedFoodItem={foodItem}/>\r\n    return {...foodItem, component: component}\r\n}\r\n","import React, {Component, createContext, ReactElement} from \"react\";\r\nimport * as NutrientDataImportService from \"../service/NutrientDataImportService\";\r\nimport FoodDataCorpus from \"../types/nutrientdata/FoodDataCorpus\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationData, FoodDataPanelData, RankingPanelData} from \"../types/livedata/ApplicationData\";\r\nimport {\r\n    DISPLAYMODE_CHART, OPTION_YES,\r\n    SOURCE_SRLEGACY,\r\n    TAB_BASE_DATA, UNIT_GRAM,\r\n    UNIT_MILLIGRAM\r\n} from \"../config/Constants\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    initialChartConfigData,\r\n    initialDirectCompareConfigData, initialJuxtapositionConfigData,\r\n    initialUserDataAge,\r\n    initialUserDataBreastfeeding,\r\n    initialUserDataLeisureSports,\r\n    initialUserDataPalValue,\r\n    initialUserDataPregnant,\r\n    initialUserDataSex,\r\n    initialUserDataSize,\r\n    initialUserDataWeight\r\n} from \"../config/ApplicationSetting\";\r\nimport {getNameFromFoodNameList} from \"../service/nutrientdata/NameTypeService\";\r\nimport NameType from \"../types/nutrientdata/NameType\";\r\nimport {ChartConfigData, DirectCompareChartConfigData, JuxtapositionConfig} from \"../types/livedata/ChartConfigData\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\nimport {parseFoodCompareUri} from \"../service/uri/BaseUriService\";\r\nimport {DataSettings} from \"../types/livedata/DataSettings\";\r\nimport {setFoodDataPageComponent} from \"../service/FoodDataPanelService\";\r\nimport {NutrientCondition} from \"../types/livedata/NutrientCondition\";\r\n\r\nexport interface ApplicationDataContext {\r\n    foodDataCorpus: FoodDataCorpus\r\n    applicationData: ApplicationData\r\n    userData: UserData\r\n    dataSettings: DataSettings,\r\n    debug: boolean\r\n    ready: boolean\r\n    useAsMobile: Boolean | null\r\n}\r\n\r\nexport interface ApplicationContext extends ApplicationDataContext {\r\n    setUserData: (userData: UserData) => void\r\n    setDataSettings: (dataSettings: DataSettings) => void\r\n    setPreferredSource: (string) => void\r\n    setMobileUsage: (boolean) => void\r\n    setFoodSelectorConfig: (selectedCategory: ReactSelectOption | null, sourceSupplement: boolean, sourceCombine: boolean) => void\r\n    setDirectCompareFoodSelector1: (sourceSupplement: boolean, sourceCombine: boolean) => void\r\n    setDirectCompareFoodSelector2: (sourceSupplement: boolean, sourceCombine: boolean) => void\r\n    setFoodDataPanelData: {\r\n        setCompleteData: (FoodDataPanelData) => void\r\n        setSelectedFoodTab: (number) => void\r\n        setSelectedDataPage: (string) => void\r\n        setSelectedDisplayMode: (string) => void\r\n        addItemToFoodDataPanel: (selectedFoodItem: SelectedFoodItem) => void\r\n        setItemOfFoodDataPanel: (selectedFoodItem: SelectedFoodItem, index: number) => void\r\n        removeItemFromFoodDataPanel: (number) => void\r\n        removeAllItemsFromFoodDataPanel: () => void\r\n        updateAllFoodItemNames: (foodNames: Array<NameType>, newLanguage: string) => void\r\n        updateFoodDataPanelChartConfig: (chartConfig: ChartConfigData) => void\r\n        updateJuxtapositionConfig: (juxtapositionConfig: JuxtapositionConfig) => void\r\n    }\r\n    setDirectCompareData: {\r\n        updateDirectCompareChartConfig: (chartConfig: DirectCompareChartConfigData) => void\r\n        setSelectedDirectCompareItems: (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => void\r\n        setSelectedDirectCompareDataPage: (selectedPage: string) => void\r\n    }\r\n    setRankingPanelData: (RankingPanelData) => void\r\n    setNutrientFilter: (nutrientFilter: Array<NutrientCondition>) => void\r\n}\r\n\r\nexport const ApplicationDataContextStore = createContext<ApplicationContext | null>(null)\r\n\r\nexport default class ApplicationDataContextProvider extends Component<any, ApplicationDataContext> {\r\n    setDebugState = (debug: boolean) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                    debug: debug\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedFoodDataPanelTab = (selectedTab: number) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItemIndex: selectedTab}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedDisplayMode = (displayMode: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, displayMode: displayMode}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedFoodDataPanelPage = (selectedPage: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedDataPage: selectedPage}\r\n            }\r\n        }))\r\n    }\r\n\r\n    addItemToFoodDataPanel = (foodItem: SelectedFoodItem) => {\r\n        const newItems = Object.assign(this.state.applicationData.foodDataPanel.selectedFoodItems)\r\n        newItems.push(foodItem)\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItems: newItems}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setItemOfFoodDataPanel = (updatedSelectedFoodItem: SelectedFoodItem, selectedIndex: number) => {\r\n        const updatedItems = this.state.applicationData.foodDataPanel.selectedFoodItems.map((item, index) => {\r\n                if(selectedIndex === index) {\r\n                    const updatedElement = {...item,\r\n                        portion: updatedSelectedFoodItem.portion,\r\n                        selectedSource: updatedSelectedFoodItem.selectedSource,\r\n                        supplementData: updatedSelectedFoodItem.supplementData,\r\n                        combineData: updatedSelectedFoodItem.combineData,\r\n                        compositeSubElements: updatedSelectedFoodItem.compositeSubElements\r\n                    }\r\n\r\n                    // Need to make a new instance of the component on the food item, as it also contains an instance of selected food item\r\n                    return setFoodDataPageComponent(updatedElement)\r\n                } else {\r\n                    return item\r\n                }\r\n            }\r\n        )\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItems: updatedItems}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setCompleteFoodDataPanel = (foodDataPanelData: FoodDataPanelData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: foodDataPanelData\r\n            }\r\n        }))\r\n    }\r\n\r\n    removeItemFromFoodDataPanel = (foodItemId: number) => {\r\n        const newItems = this.state.applicationData.foodDataPanel.selectedFoodItems.filter(\r\n            selectedFoodItem => selectedFoodItem.foodItem.id !== foodItemId\r\n        )\r\n\r\n        let newIndex = 0\r\n        let currentIndex = this.state.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n        if (newItems.length > 0) {\r\n            if (currentIndex < newItems.length) {\r\n                newIndex = currentIndex\r\n            } else {\r\n                newIndex = newItems.length - 1\r\n            }\r\n        }\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: newItems,\r\n                    selectedFoodItemIndex: newIndex\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    removeAllItemsFromFoodDataPanel = () => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: [],\r\n                    selectedFoodItemIndex: 0\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateAllFoodItemNames = (foodNames: Array<NameType>, newLanguage: string) => {\r\n        const selectedFoodItems = this.state.applicationData.foodDataPanel.selectedFoodItems\r\n        const newFoodItems = selectedFoodItems.map(selectedFoodItem => {\r\n            const foodName = selectedFoodItem.foodItem.nameId\r\n                ? getNameFromFoodNameList(foodNames, selectedFoodItem.foodItem.nameId, newLanguage)\r\n                : \"Individual\"\r\n            if (foodName) {\r\n                selectedFoodItem = {...selectedFoodItem, tab: foodName}\r\n            }\r\n            return selectedFoodItem\r\n        })\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: newFoodItems,\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateFoodDataPanelChartConfig = (chartConfig: ChartConfigData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    chartConfigData: chartConfig\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateJuxtaPositionConfig = (juxtapositionConfigData: JuxtapositionConfig) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    juxtapositionConfigData: juxtapositionConfigData\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n\r\n    setSelectedDirectCompareItems = (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...prevState.applicationData.directCompareDataPanel,\r\n                    selectedFoodItem1: selectedFoodItem1,\r\n                    selectedFoodItem2: selectedFoodItem2\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedDirectCompareDataPage = (selectedPage: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...prevState.applicationData.directCompareDataPanel,\r\n                    selectedDataPage: selectedPage\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateDirectCompareChartConfig = (chartConfig: DirectCompareChartConfigData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...this.state.applicationData.directCompareDataPanel,\r\n                    directCompareConfigChart: chartConfig\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    setUserData = (userData: UserData) => {\r\n        this.setState(() => ({\r\n            userData: {\r\n                ...userData\r\n            }\r\n        }))\r\n    }\r\n\r\n    setFoodDataPanelData = (foodDataPanelData: FoodDataPanelData) => {\r\n        this.setState( ()=> ({\r\n            applicationData: {...this.state.applicationData, foodDataPanel: foodDataPanelData}\r\n        }))\r\n    }\r\n\r\n    setDataSettings = (dataSettings: DataSettings) => {\r\n        this.setState(() => ({\r\n            dataSettings: {\r\n                ...dataSettings\r\n            }\r\n        }))\r\n    }\r\n\r\n    setPreferredSource = (source: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData, preferredSource: source\r\n            }\r\n        }))\r\n    }\r\n\r\n    setFoodSelectorConfig = (selectedCategory: ReactSelectOption | null, sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, foodSelector: {\r\n                        ...prevState.applicationData.foodSelector,\r\n                        selectedCategory: selectedCategory,\r\n                        sourceSupplement: sourceSupplement,\r\n                        sourceCombine: sourceCombine\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n    setDirectCompareFoodSelectorConfig1 = (sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, directCompareDataPanel: {\r\n                        ...prevState.applicationData.directCompareDataPanel,\r\n                        foodSelector1: {\r\n                            sourceSupplement: sourceSupplement,\r\n                            sourceCombine: sourceCombine\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n    setDirectCompareFoodSelectorConfig2 = (sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, directCompareDataPanel: {\r\n                        ...prevState.applicationData.directCompareDataPanel,\r\n                        foodSelector2: {\r\n                            sourceSupplement: sourceSupplement,\r\n                            sourceCombine: sourceCombine\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n    setRankingPanelData = (rankingPanelData: RankingPanelData): void => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, rankingPanelData: rankingPanelData\r\n                }\r\n            })\r\n        )\r\n    }\r\n\r\n    setNutrientFilter = (nutrientFilter: Array<NutrientCondition>): void => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, nutrientFilter: nutrientFilter\r\n                }\r\n            })\r\n        )\r\n    }\r\n\r\n    isDebugMode(): boolean {\r\n        const uriData: string | null = parseFoodCompareUri()\r\n        return !(uriData !== \"test\" && uriData !== \"debug\")\r\n    }\r\n\r\n    state: ApplicationDataContext = {\r\n        foodDataCorpus: {\r\n            categories: [],\r\n            conditions: [],\r\n            portionTypes: [],\r\n            sources: [],\r\n            foodNames: [],\r\n            foodClasses: [],\r\n            foodItems: [],\r\n            dietaryRequirements: null,\r\n        },\r\n        applicationData: {\r\n            foodDataPanel: {\r\n                selectedFoodItems: [],\r\n                selectedDataPage: TAB_BASE_DATA,\r\n                displayMode: DISPLAYMODE_CHART,\r\n                selectedFoodItemIndex: 0,\r\n                chartConfigData: initialChartConfigData,\r\n                juxtapositionConfigData: initialJuxtapositionConfigData\r\n            },\r\n            directCompareDataPanel: {\r\n                selectedFoodItem1: null,\r\n                selectedFoodItem2: null,\r\n                selectedDataPage: TAB_BASE_DATA,\r\n                directCompareConfigChart: initialDirectCompareConfigData,\r\n                foodSelector1: {\r\n                    sourceSupplement: true,\r\n                    sourceCombine: false\r\n                },\r\n                foodSelector2: {\r\n                    sourceSupplement: true,\r\n                    sourceCombine: false\r\n                }\r\n            },\r\n            rankingPanelData: {\r\n                selectedFoodCategory: null,\r\n                selectedGroup: null,\r\n                selectedElement: null,\r\n                use100gram: true,\r\n                showDietaryRequirements: false\r\n            },\r\n            foodSelector: {\r\n                selectedCategory: null,\r\n                sourceSupplement: true,\r\n                sourceCombine: false,\r\n            },\r\n            preferredSource: SOURCE_SRLEGACY,\r\n            nutrientFilter: []\r\n        },\r\n        userData: {\r\n            age: initialUserDataAge,\r\n            size: initialUserDataSize,\r\n            weight: initialUserDataWeight,\r\n            sex: initialUserDataSex,\r\n            pregnant: initialUserDataPregnant,\r\n            breastFeeding: initialUserDataBreastfeeding,\r\n            palValue: initialUserDataPalValue,\r\n            leisureSports: initialUserDataLeisureSports,\r\n            initialValues: true\r\n        },\r\n        dataSettings: {\r\n          unitVitamins: UNIT_MILLIGRAM,\r\n          unitProteins: UNIT_GRAM,\r\n          includeProvitamins: OPTION_YES\r\n        },\r\n        debug: this.isDebugMode(),\r\n        ready: false,\r\n        useAsMobile: null\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        const foodDataCorpus = NutrientDataImportService.loadFoodDataCorpus()\r\n        this.setState({\r\n            foodDataCorpus: foodDataCorpus,\r\n            ready: true\r\n        })\r\n    }\r\n\r\n    render(): ReactElement {\r\n        const value = {\r\n            applicationData: this.state.applicationData,\r\n            foodDataCorpus: this.state.foodDataCorpus,\r\n            userData: this.state.userData,\r\n            dataSettings: this.state.dataSettings,\r\n            debug: this.state.debug,\r\n            ready: this.state.ready,\r\n            useAsMobile: this.state.useAsMobile,\r\n            setUserData: this.setUserData,\r\n            setDataSettings: this.setDataSettings,\r\n            setPreferredSource: this.setPreferredSource,\r\n            setMobileUsage: (usage: boolean) => {\r\n                this.setState({...this.state, useAsMobile: usage})\r\n            },\r\n            setFoodDataPanelData: {\r\n                setCompleteData: this.setCompleteFoodDataPanel,\r\n                setSelectedFoodTab: this.setSelectedFoodDataPanelTab,\r\n                setSelectedDataPage: this.setSelectedFoodDataPanelPage,\r\n                setSelectedDisplayMode: this.setSelectedDisplayMode,\r\n                addItemToFoodDataPanel: this.addItemToFoodDataPanel,\r\n                setItemOfFoodDataPanel: this.setItemOfFoodDataPanel,\r\n                removeItemFromFoodDataPanel: this.removeItemFromFoodDataPanel,\r\n                removeAllItemsFromFoodDataPanel: this.removeAllItemsFromFoodDataPanel,\r\n                updateAllFoodItemNames: this.updateAllFoodItemNames,\r\n                updateFoodDataPanelChartConfig: this.updateFoodDataPanelChartConfig,\r\n                updateJuxtapositionConfig: this.updateJuxtaPositionConfig\r\n            },\r\n            setDirectCompareData: {\r\n                updateDirectCompareChartConfig: this.updateDirectCompareChartConfig,\r\n                setSelectedDirectCompareDataPage: this.setSelectedDirectCompareDataPage,\r\n                setSelectedDirectCompareItems: this.setSelectedDirectCompareItems\r\n            },\r\n            setFoodSelectorConfig: this.setFoodSelectorConfig,\r\n            setRankingPanelData: this.setRankingPanelData,\r\n            setDirectCompareFoodSelector1: this.setDirectCompareFoodSelectorConfig1,\r\n            setDirectCompareFoodSelector2: this.setDirectCompareFoodSelectorConfig2,\r\n            setNutrientFilter: this.setNutrientFilter\r\n        }\r\n\r\n        return (\r\n            <ApplicationDataContextStore.Provider value={value}>\r\n                {this.props.children}\r\n            </ApplicationDataContextStore.Provider>\r\n        )\r\n    }\r\n\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.9db91515.png\";","export default __webpack_public_path__ + \"static/media/text.1276973d.png\";","import logo from '../static/image/logo.png'\r\nimport text from '../static/image/text.png'\r\nimport {Button, Form} from \"react-bootstrap\";\r\nimport {\r\n    LANGUAGE_DE,\r\n    LANGUAGE_EN,\r\n    PATH_FOODDATA_PANEL,\r\n    PATH_HOME,\r\n    PATH_CONTACT,\r\n    PATH_USERSETTINGS,\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODCOMPARE,\r\n    SOURCE_SRLEGACY,\r\n    PATH_RANKING,\r\n    SOURCE_FNDDS, PATH_INFO\r\n} from \"../config/Constants\";\r\nimport React, {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {Link} from 'react-router-dom';\r\nimport {useLocation} from 'react-router-dom';\r\nimport {isMobileDevice} from \"../service/WindowDimension\";\r\n\r\n\r\nexport default function Header() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language, userLanguageChange} = useContext(LanguageContext)\r\n    const location = useLocation();\r\n\r\n    if (applicationContext === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleLanguageButtonClick = (event: any): void => {\r\n        userLanguageChange(event.target.value)\r\n        applicationContext.setFoodDataPanelData.updateAllFoodItemNames(applicationContext.foodDataCorpus.foodNames, event.target.value)\r\n    }\r\n\r\n    const handleSourceButtonClick = (event: any): void => {\r\n        applicationContext.setPreferredSource(event.target.value)\r\n    }\r\n\r\n    let activePath = location.pathname && location.pathname !== \"/\" ? location.pathname : PATH_HOME\r\n    if (activePath.endsWith(\"/\") && activePath.length > 1) {\r\n        activePath = activePath.substring(0, activePath.length - 1)\r\n    }\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('Path:', activePath)\r\n    }\r\n\r\n    const renderMenus = () => {\r\n        const menuNameAnalyze = isMobileDevice() ? applicationStrings.menu_food_data_panel_m[language] : applicationStrings.menu_food_data_panel[language]\r\n        const menuNameDirectCompare = isMobileDevice() ? applicationStrings.menu_direct_compare_m[language] : applicationStrings.menu_direct_compare[language]\r\n        const menuNameRanking = isMobileDevice() ? applicationStrings.menu_ranking_m[language] : applicationStrings.menu_ranking[language]\r\n        const menuNameSettings = isMobileDevice() ? applicationStrings.menu_settings_m[language] : applicationStrings.menu_settings[language]\r\n\r\n        const buttonContainerClass = isMobileDevice() ? \"link header-link-mobile\" : \"link header-link\"\r\n\r\n        return (\r\n            <div className={\"btn-group flex flex-wrap\"}>\r\n                <Link to={PATH_HOME}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_HOME}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_HOME || activePath === PATH_FOODCOMPARE}>\r\n                        {applicationStrings.menu_home[language]}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_FOODDATA_PANEL}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_FOODDATA_PANEL}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_FOODDATA_PANEL}>\r\n                        {menuNameAnalyze}\r\n                    </Button>\r\n                </Link>\r\n                {!isMobileDevice() &&\r\n                <Link to={PATH_DIRECT_COMPARE}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_DIRECT_COMPARE}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_DIRECT_COMPARE}>\r\n                        {menuNameDirectCompare}\r\n                    </Button>\r\n                </Link>\r\n                }\r\n                <Link to={PATH_RANKING}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_RANKING}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_RANKING}>\r\n                        {menuNameRanking}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_USERSETTINGS}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_USERSETTINGS}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_USERSETTINGS}>\r\n                        {menuNameSettings}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_INFO}>\r\n                    <Button className={buttonContainerClass}\r\n                            variant={'link'}\r\n                            value={PATH_INFO}\r\n                            active={activePath === PATH_INFO}>\r\n                        {applicationStrings.menu_info[language]}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_CONTACT}>\r\n                    <Button className={buttonContainerClass}\r\n                            variant={'link'}\r\n                            value={PATH_CONTACT}\r\n                            active={activePath === PATH_CONTACT}>\r\n                        {applicationStrings.menu_contact[language]}\r\n                    </Button>\r\n                </Link>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const language_en = isMobileDevice() ? applicationStrings.checkbox_english_m[language] : applicationStrings.checkbox_english[language]\r\n    const language_de = isMobileDevice() ? applicationStrings.checkbox_german_m[language] : applicationStrings.checkbox_german[language]\r\n\r\n    const labelClass = isMobileDevice() ? \"header-form-label-m\" : \"header-form-label\"\r\n\r\n    const renderLanguageButtons = () => {\r\n        return (\r\n            <div className=\"header-form\" style={{paddingRight: \"1vw\"}}>\r\n                <span className={labelClass}>\r\n                    {applicationStrings.label_language[language]}:\r\n                </span>\r\n                <Form.Check inline={true}\r\n                            className=\"form-radiobutton\"\r\n                            label={language_en}\r\n                            type=\"radio\"\r\n                            value={LANGUAGE_EN}\r\n                            checked={language === LANGUAGE_EN}\r\n                            onChange={handleLanguageButtonClick}>\r\n                </Form.Check>\r\n                <Form.Check inline={true}\r\n                            className=\"form-radiobutton\"\r\n                            label={language_de}\r\n                            type=\"radio\"\r\n                            value={LANGUAGE_DE}\r\n                            checked={language === LANGUAGE_DE}\r\n                            onChange={handleLanguageButtonClick}>\r\n                </Form.Check>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderSourceButtons = () => {\r\n        const preferredSource = applicationContext.applicationData.preferredSource\r\n\r\n        return (\r\n            <div className=\"header-form text-right\" style={{paddingRight: \"1vw\"}}>\r\n                <span className=\"header-form-label\">\r\n                    {applicationStrings.label_preferred_source[language]}:\r\n                </span>\r\n                <Form.Check inline={true}\r\n                            className=\"form-radiobutton\"\r\n                            label={\"SR Legacy\"}\r\n                            type=\"radio\"\r\n                            value={SOURCE_SRLEGACY}\r\n                            checked={preferredSource === SOURCE_SRLEGACY}\r\n                            onChange={handleSourceButtonClick}>\r\n                </Form.Check>\r\n                <Form.Check inline={true}\r\n                            className=\"form-radiobutton\"\r\n                            label={\"FNDDS (Survey)\"}\r\n                            type=\"radio\"\r\n                            value={SOURCE_FNDDS}\r\n                            checked={preferredSource === SOURCE_FNDDS}\r\n                            onChange={handleSourceButtonClick}>\r\n                </Form.Check>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const headerClass = isMobileDevice() ? \"header-m\" : \"header\"\r\n\r\n    return (\r\n        <div className={`d-flex flex-row ${headerClass}`}>\r\n            <img src={logo} className=\"header-logo\" alt={\"Food Compare Logo\"}/>\r\n            <div className={\"d-flex flex-column w-100\"} style={{paddingTop: \"0.8vh\", paddingLeft: \"0.2vw\"}}>\r\n                <div className=\"d-flex flex-row align-items-center justify-content-between\">\r\n                    <div>\r\n                        <img src={text} className=\"header-logo-text\" alt={\"Food Compare Logo Text\"}/>\r\n                    </div>\r\n                    <div className=\"d-flex flex-row justify-content-end\">\r\n                        {!isMobileDevice() &&\r\n                        renderSourceButtons()\r\n                        }\r\n                        {renderLanguageButtons()}\r\n                    </div>\r\n                </div>\r\n                <div className=\"d-flex flex-row align-items-end\" style={{height: \"100%\"}}>\r\n                    <div className=\"flex-column text-start\">\r\n                        {renderMenus()}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import React, {useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {Carousel} from 'react-responsive-carousel';\r\nimport {applicationStrings} from \"../static/labels\";\r\n\r\nimport homeText1 from \"../static/hometext1.json\";\r\nimport {FaExternalLinkAlt} from \"react-icons/fa\";\r\n\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport {\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODDATA_PANEL, PATH_INFO,\r\n    PATH_RANKING\r\n} from \"../config/Constants\";\r\nimport {isMobileDevice} from \"../service/WindowDimension\";\r\n\r\nconst carouselImages = require.context('../static/image/carousel-samples', true);\r\nconst startButtonImages = require.context('../static/image/start-buttons', true);\r\n\r\nconst startImg1 = startButtonImages(`./StartImg1.jpg`).default\r\nconst startImg2 = startButtonImages(`./StartImg2.jpg`).default\r\nconst startImg3 = startButtonImages(`./StartImg3.jpg`).default\r\nconst startImg4 = startButtonImages(`./StartImg4.jpg`).default\r\n\r\n\r\n/**\r\n * Home component (not including Header or Info page).\r\n * @constructor\r\n */\r\nexport function Home() {\r\n    const {language} = useContext(LanguageContext)\r\n    const [displayedImage, setDisplayedImage] = useState<number>(0)\r\n    const history = useHistory()\r\n\r\n    const imageChanged = (image) => {\r\n        setDisplayedImage(image)\r\n    }\r\n\r\n    const onClickCarouselImage = (index: number) => {\r\n        let route: string | null = null;\r\n\r\n        switch (index) {\r\n            case 0:\r\n                route = \"datapanel?item=1;0;102_169;10;vitamindata;dct;075035175031000;01000000\";\r\n                break;\r\n            case 1:\r\n                route = \"directcompare?item=124;0;200_136;10;123;0;202_167;10;vitamindata;075035175031000;02000001\"\r\n                break;\r\n            case 2:\r\n                route = \"ranking?ranking=0;2;d_magnesium;11\"\r\n                break;\r\n            case 3:\r\n                route = \"datapanel?item=63;0;300_180;10;juxtaposition;dct;075035175031000;00000000&group=2\"\r\n                break;\r\n            case 4:\r\n                route = `${PATH_FOODDATA_PANEL}?composite=1`\r\n                break;\r\n            case 5:\r\n                route = \"directcompare?item=159;0;999_100;10;194;0;999_150;10;lipidsdata;075035175031000;10000030\"\r\n                break;\r\n        }\r\n\r\n        if (route) {\r\n            history.push(route);\r\n        }\r\n    }\r\n\r\n    const renderCarousel = () => {\r\n        const pic1 = carouselImages(`./img-1-${language}.png`).default;\r\n        const pic2 = carouselImages(`./img-2-${language}.png`).default;\r\n        const pic3 = carouselImages(`./img-3-${language}.png`).default;\r\n        const pic4 = carouselImages(`./img-4-${language}.png`).default;\r\n        const pic5 = carouselImages(`./img-5-${language}.png`).default;\r\n        const pic6 = carouselImages(`./img-6-${language}.png`).default;\r\n\r\n        const captionAttribute = `home_carousel_${displayedImage}`;\r\n        const imageCaption = applicationStrings[captionAttribute][language];\r\n\r\n        return (\r\n            <div style={{height: \"60%\"}}>\r\n                <Carousel className={\"home-header-carousel\"}\r\n                          showArrows={false}\r\n                          infiniteLoop={true}\r\n                          autoPlay={true}\r\n                          interval={8000}\r\n                          transitionTime={1000}\r\n                          selectedItem={displayedImage}\r\n                          showThumbs={false}\r\n                          showStatus={false}\r\n                          showIndicators={false}\r\n                          onClickItem={onClickCarouselImage}\r\n                          onChange={imageChanged}>\r\n                    <img src={pic1} alt={\"Carousel 1\"}/>\r\n                    <div>\r\n                        <img src={pic2} alt={\"Carousel 2\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic3} alt={\"Carousel 3\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic4} alt={\"Carousel 4\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic5} alt={\"Carousel 5\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic6} alt={\"Carousel 6\"}/>\r\n                    </div>\r\n                </Carousel>\r\n                <div style={{textAlign: \"center\", fontStyle: \"oblique\"}}\r\n                     onClick={() => onClickCarouselImage(displayedImage)}>\r\n                    <span style={{paddingRight: \"1ch\"}}>{imageCaption}</span>\r\n                    <span>\r\n                        <FaExternalLinkAlt/>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const renderHomeHeaderDesktop = () => {\r\n        return <div className={\"d-flex flex-row home-header align-items-center\"}>\r\n            <div className={\"d-flex flex-column w-50\"}>\r\n                <div style={{paddingLeft: \"1vw\"}}>\r\n                    <div className={\"home-header-slogan mb-2\"}>{applicationStrings.label_home_slogan[language]}</div>\r\n                    <div>{homeText1[language]}</div>\r\n                </div>\r\n            </div>\r\n            <div className={\"d-flex flex-column w-50\"}>\r\n                {renderCarousel()}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    const renderHomeHeaderMobile = () => {\r\n        return <div className={\" home-header-mobile align-items-center\"}>\r\n            <div className={\"\"}>\r\n                <div className={\"home-header-slogan mb-2\"}>{applicationStrings.label_home_slogan[language]}</div>\r\n                <div>{homeText1[language]}</div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    const renderStartButtonsDesktop = () => {\r\n        return (\r\n            <div>\r\n                <div className={\"d-flex flex-row justify-content-center\"}>\r\n                    <div className={\"mr-5\"}>\r\n                        <Link to={PATH_FOODDATA_PANEL + \"?add=1\"}>\r\n                            {renderStartButton(applicationStrings.button_getstarted_1[language], startImg1)}\r\n                        </Link>\r\n                    </div>\r\n                    {!isMobileDevice() &&\r\n                    <div>\r\n                        <Link to={PATH_FOODDATA_PANEL + \"?composite=1\"}>\r\n                            {renderStartButton(applicationStrings.button_getstarted_2[language], startImg2)}\r\n                        </Link>\r\n                    </div>\r\n                    }\r\n                    {!isMobileDevice() &&\r\n                    <div>\r\n                        <Link to={PATH_DIRECT_COMPARE}>\r\n                            {renderStartButton(applicationStrings.button_getstarted_3[language], startImg3)}\r\n                        </Link>\r\n                    </div>\r\n                    }\r\n                    <div>\r\n                        <Link to={PATH_RANKING}>\r\n                            {renderStartButton(applicationStrings.button_getstarted_4[language], startImg4)}\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderStartButton = (label: string, srcImage: string): any => {\r\n        const buttonClass = !isMobileDevice() ? \"home-startbutton\" : \"home-startbutton-mobile\"\r\n        return <button type=\"button\" className={`btn btn-small btn-outline-dark ${buttonClass}`}>\r\n            <div className={\"d-flex flex-column h-100\"}>\r\n                <div className={\"flex-row\"}>\r\n                    <img src={srcImage} style={{maxWidth: \"95%\"}} alt={\"Start btn img\"}/>\r\n                </div>\r\n                <div className=\"container d-flex flex-row align-items-center home-startbutton-label\">\r\n                    {label}\r\n                </div>\r\n            </div>\r\n        </button>\r\n    }\r\n\r\n    const gotoInfoPage = () => {\r\n        history.push(PATH_INFO);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"media\">\r\n                <div className={\"container-fluid\"}>\r\n                    <div className=\"row\">\r\n                        {!isMobileDevice() ?\r\n                            renderHomeHeaderDesktop()\r\n                            :\r\n                            renderHomeHeaderMobile()\r\n                        }\r\n                    </div>\r\n                    {renderStartButtonsDesktop()}\r\n                    <hr/>\r\n                    <div className={\"d-flex justify-content-center\"}>\r\n                        <button className={\"btn btn-link\"} onClick={() => {gotoInfoPage()}}>{applicationStrings.home_button_info[language]}</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {getReactSelectOptionsList} from \"./NameTypeService\";\r\n\r\nexport function getCategorySelectList(categories: Array<NameType>, language: string): Array<ReactSelectOption> {\r\n    return getReactSelectOptionsList(categories, language)\r\n}\r\n\r\n","import {ReactSelectFoodClassOption} from \"../../types/ReactSelectOption\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport getName from \"../LanguageService\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {getFoodItemName, getFoodItemsOfFoodClass} from \"./FoodItemsService\";\r\nimport FoodDataCorpus from \"../../types/nutrientdata/FoodDataCorpus\";\r\n\r\nexport const foodClassLabelSeparator = \"||\"\r\n\r\nexport function getFoodClassSelectList(foodDataCorpus: FoodDataCorpus, category: number,\r\n                                       foodNames: Array<NameType>, language: string): ReactSelectFoodClassOption[] {\r\n    const {foodClasses, foodItems} = foodDataCorpus\r\n    const filteredFoodClasses = getFoodClassesOfCategory(foodClasses, category)\r\n\r\n    if (!filteredFoodClasses || filteredFoodClasses.length === 0) {\r\n        return []\r\n    }\r\n\r\n    const reactSelectOptions: Array<ReactSelectFoodClassOption> = []\r\n    filteredFoodClasses.forEach(foodClass => {\r\n        const nameId = foodClass.nameKey\r\n        if (nameId > foodNames.length) {\r\n            return\r\n        }\r\n        const nameType = foodNames[nameId - 1]\r\n        const foodName = getName(nameType, language, true)\r\n\r\n        /*\r\n         * In order to find food items in the select menu, which do not match the food class name, the food class\r\n         * label will be extended by the food item names of their class. A special formatting function is used in\r\n         * the list to convert the name back to the original food class name.\r\n         *\r\n         * Syntax: <food class name> || <name of food items (deduplicated)>\r\n         */\r\n\r\n        const foodItemsOfFoodClass = getFoodItemsOfFoodClass(foodItems, foodClass.id)\r\n        const foodItemNames: string[] = foodItemsOfFoodClass.map(foodItem => getFoodItemName(foodItem, foodNames, language)).filter(name => name !== null) as string[]\r\n        const label = foodName + foodClassLabelSeparator + foodItemNames.filter((element, index) => {\r\n            return foodItemNames.indexOf(element) === index;\r\n        }).join()   // Remove duplicates and then add all remaining food item names to the food class label\r\n\r\n        reactSelectOptions.push({\r\n            value: foodClass,\r\n            label: label\r\n        })\r\n    })\r\n\r\n    // Bugfix-187: Replace spaces in a word by a letter so that they WONT appear before the actual word (e.g. potato)\r\n    reactSelectOptions.sort((obj1, obj2) =>\r\n        (obj1.label).replace(\" \", \"x\").localeCompare(obj2.label.replace(\" \", \"x\"))\r\n    )\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getFoodClassesOfCategory(foodClasses: Array<FoodClass>, category: number): Array<FoodClass> {\r\n    return foodClasses.filter(foodClass => {\r\n        if (category === 0) {\r\n            return foodClass\r\n        } else if (foodClass.category === category) {\r\n            return foodClass\r\n        } else {\r\n            return null\r\n        }\r\n    })\r\n}","import NameType from \"../../types/nutrientdata/NameType\";\r\nimport {ReactSelectPortionOption} from \"../../types/ReactSelectOption\";\r\nimport FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport getName from \"../LanguageService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {PORTION_KEY_100, PORTION_KEY_INDIVIDUAL} from \"../../config/Constants\";\r\n\r\n\r\nexport function getPortionReactSelectList(portionData: Array<PortionData>, portionTypes: Array<NameType>, language: string): Array<ReactSelectPortionOption> {\r\n    const reactSelectOptions: Array<ReactSelectPortionOption> = []\r\n    portionData.forEach(portionElement => {\r\n        const portionTypeIndex = portionTypes.findIndex(portionType => {\r\n             return portionType.id === portionElement.portionType\r\n        })\r\n\r\n        const portionType = portionTypes[portionTypeIndex]\r\n        const portionName = getName(portionType, language)\r\n        reactSelectOptions.push({\r\n            value: portionElement,\r\n            label: portionName\r\n        })\r\n    })\r\n\r\n    reactSelectOptions.push({\r\n        value: {amount: 100, portionType: PORTION_KEY_100},\r\n        label: applicationStrings.portion_100g[language]\r\n    })\r\n\r\n    reactSelectOptions.push({\r\n        value: {amount: 0, portionType: PORTION_KEY_INDIVIDUAL},\r\n        label: applicationStrings.portion_individual[language]\r\n    })\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getDefaultPortionData(foodItem: FoodItem, portionDataList: Array<ReactSelectPortionOption>): ReactSelectPortionOption {\r\n    let defaultPortionIndex = portionDataList.findIndex(portionData => {\r\n        return portionData.value.portionType === foodItem.defaultPortionId\r\n    })\r\n\r\n    if (defaultPortionIndex < 0 || defaultPortionIndex >= portionDataList.length) {\r\n        defaultPortionIndex = 0;\r\n    }\r\n\r\n    return portionDataList[defaultPortionIndex]\r\n}","import React, {ReactElement, useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\nimport {isSmallScreen, useWindowDimension} from \"../service/WindowDimension\";\r\nimport {NotificationManager} from 'react-notifications'\r\nimport Select from 'react-select';\r\nimport {Modal} from \"react-bootstrap\";\r\n\r\nexport interface Unit {\r\n    factor: number,\r\n    labelKey: string\r\n}\r\n\r\ninterface UnitConversionProps {\r\n    sourceUnits: Array<Unit>\r\n    targetUnitLabelKey: string\r\n    allowedMinimumTargetValue: number\r\n    allowedMaximumTargetValue: number\r\n    initialValue?: number\r\n    onSubmit: (value) => void\r\n    closeModal: () => void\r\n}\r\n\r\nexport const UnitConversionModal: React.FC<UnitConversionProps> = (props: UnitConversionProps): ReactElement => {\r\n    const language = useContext(LanguageContext).language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const unitOptions = props.sourceUnits.map((sourceUnit, index) => {\r\n        return {\r\n            value: index,\r\n            label: applicationStrings[sourceUnit.labelKey][language]\r\n        }\r\n    })\r\n\r\n    const [selectedUnitOption, setSelectedUnitOption] = useState<ReactSelectOption>(unitOptions[0])\r\n    const [inputValue, setInputValue] = useState<number>(props.initialValue ? props.initialValue : 1)\r\n    const [convertedValue, setConvertedValue] = useState<number | null>(null)\r\n\r\n    useEffect(() => {\r\n        if (!isNaN(inputValue)) {\r\n            const unit = props.sourceUnits[selectedUnitOption.value]\r\n            setConvertedValue(Math.round(inputValue * unit.factor))\r\n        } else {\r\n            setConvertedValue(null)\r\n        }\r\n    }, [inputValue, selectedUnitOption])\r\n\r\n    const onInputChange = (event) => {\r\n        const val = event.target.value\r\n        setInputValue(val)\r\n    }\r\n\r\n    const isValidConversion = () => {\r\n        return convertedValue !== null && convertedValue >= props.allowedMinimumTargetValue\r\n            && convertedValue <= props.allowedMaximumTargetValue\r\n    }\r\n\r\n    const submit = () => {\r\n        if (isValidConversion()) {\r\n            props.onSubmit(convertedValue)\r\n            props.closeModal()\r\n        } else {\r\n            NotificationManager.error(applicationStrings.message_error_input[language])\r\n        }\r\n    }\r\n\r\n    const makeForm = () => {\r\n        const inputClass = isSmallScreen(windowSize)\r\n            ? \"form-control form-control-sm input-sm w-50\"\r\n            : \"form-control input\"\r\n\r\n        const fontColor = isValidConversion()\r\n            ? \"black\"\r\n            : \"#cc0000\"\r\n\r\n        return (\r\n            <div>\r\n                <div className={\"form-section\"}>\r\n                    <div className={\"d-flex flex-row\"}>\r\n                        <input className={inputClass}\r\n                               style={{width: \"30%\"}}\r\n                               value={inputValue}\r\n                               onChange={onInputChange}\r\n                        />\r\n                        <div style={{width: \"70%\"}}>\r\n                            <Select options={unitOptions}\r\n                                    value={selectedUnitOption}\r\n                                    isSearchable={false}\r\n                                    onChange={(value) => setSelectedUnitOption(value)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style={{paddingTop: \"2vh\", paddingLeft: \"1vw\", color: fontColor}}>\r\n                    {convertedValue !== null ?\r\n                        (\r\n                            <span>\r\n                                <span><b>{convertedValue}</b></span>\r\n                                <span style={{paddingLeft: \"0.75ch\"}}>\r\n                                    <b>{applicationStrings[props.targetUnitLabelKey][language]}</b>\r\n                                </span>\r\n                            </span>\r\n                        )\r\n                        :\r\n                        (\r\n                            <span><b>{applicationStrings.label_error[language]}</b></span>\r\n                        )\r\n                    }\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Modal className={\"unit-modal\"}\r\n               size={\"sm\"}\r\n               show={true}\r\n               onHide={props.closeModal}\r\n               backdrop=\"static\"\r\n        >\r\n            <Modal.Header>\r\n                <h5 className=\"modal-title\">{applicationStrings.label_unit_conversion_title[language]}</h5>\r\n                <button type=\"button\"\r\n                        className=\"btn-close\"\r\n                        data-dismiss=\"modal\"\r\n                        aria-label=\"Close\"\r\n                        onClick={props.closeModal}>\r\n                </button>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                {makeForm()}\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button type=\"button\"\r\n                        className=\"btn btn-secondary\"\r\n                        onClick={props.closeModal}>\r\n                    {applicationStrings.button_close[language]}\r\n                </button>\r\n                <button type=\"button\"\r\n                        className=\"btn btn-primary\"\r\n                        onClick={() => submit()}>\r\n                    {applicationStrings.button_submit[language]}\r\n                </button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport Select from 'react-select';\r\nimport ReactSelectOption, {\r\n    ReactSelectFoodClassOption,\r\n    ReactSelectFoodItemOption,\r\n    ReactSelectPortionOption\r\n} from \"../../types/ReactSelectOption\";\r\nimport {getCategorySelectList} from \"../../service/nutrientdata/CategoryService\";\r\nimport {foodClassLabelSeparator, getFoodClassSelectList} from \"../../service/nutrientdata/FoodClassService\";\r\nimport {getFoodItemsSelectList, makeSelectedFoodItemObject} from \"../../service/nutrientdata/FoodItemsService\";\r\nimport FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {getDefaultPortionData, getPortionReactSelectList} from \"../../service/nutrientdata/PortionDataService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {isMobileDevice, isSmallScreen, useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {MODE_EDIT, PORTION_KEY_INDIVIDUAL, SOURCE_FNDDS, SOURCE_SRLEGACY} from \"../../config/Constants\";\r\nimport {getSourceName} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {Button, Form} from \"react-bootstrap\";\r\nimport {\r\n    COLOR_SELECTOR_CATEGORY,\r\n    COLOR_SELECTOR_FOODCLASS, COLOR_SELECTOR_FOODITEM,\r\n    correspondingSelectElementStyle,\r\n    customSelectStyles,\r\n    getCustomSelectStyle\r\n} from \"../../config/UI_Config\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport {FaSlidersH} from \"react-icons/fa\";\r\nimport {Unit, UnitConversionModal} from \"../UnitConversionModal\";\r\nimport {max_portion} from \"../../config/ChartConfig\";\r\n\r\nexport interface FoodSelectorProps {\r\n    updateSelectedFoodItem: (selectedFoodItem: SelectedFoodItem) => void\r\n    updateFoodSelectorConfig: (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => void\r\n    updateCompositeTitle?: (compositeTitle: string) => void\r\n    compositeSelector: boolean\r\n    directCompareSelector?: boolean\r\n    initialFoodClassToSet?: number\r\n    selectedFoodItem?: SelectedFoodItem | null\r\n    defaultFoodClass?: number\r\n    defaultFoodItem?: number\r\n    directCompareSelectorNumber?: number\r\n    mode?: string\r\n}\r\n\r\n/**\r\n * Component to select a food element. The component can optionally show the category list and can be initialized\r\n * with an already existing selected food item (in case of component re-rendering).\r\n */\r\nexport default function FoodSelector(props: FoodSelectorProps): JSX.Element {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const initialCategory = applicationContext?.applicationData.foodSelector.selectedCategory\r\n        ? applicationContext.applicationData.foodSelector.selectedCategory\r\n        : null\r\n\r\n    const foodSelectorConfig = applicationContext?.applicationData.foodSelector\r\n    const directCompareSelectorConfig1 = applicationContext?.applicationData.directCompareDataPanel.foodSelector1\r\n    const directCompareSelectorConfig2 = applicationContext?.applicationData.directCompareDataPanel.foodSelector2\r\n\r\n    const initialSupplementValue = props.directCompareSelectorNumber === undefined\r\n        ? foodSelectorConfig?.sourceSupplement || false\r\n        : props.directCompareSelectorNumber === 1\r\n            ? directCompareSelectorConfig1?.sourceSupplement || false\r\n            : directCompareSelectorConfig2?.sourceSupplement || false\r\n\r\n    const initialCombineValue = props.directCompareSelectorNumber === undefined\r\n        ? foodSelectorConfig?.sourceCombine || false\r\n        : props.directCompareSelectorNumber === 1\r\n            ? directCompareSelectorConfig1?.sourceCombine || false\r\n            : directCompareSelectorConfig2?.sourceCombine || false\r\n\r\n    const [selectedCategory, setSelectedCategory] = useState<ReactSelectOption | null>(initialCategory)\r\n    const [selectedFoodClass, setSelectedFoodClass] = useState<ReactSelectFoodClassOption | null>(null)\r\n    const [selectedFoodItem, setSelectedFoodItem] = useState<ReactSelectFoodItemOption | null>(null)\r\n    const [selectedPortion, setSelectedPortion] = useState<ReactSelectPortionOption | null>(null)\r\n    const [portionAmount, setPortionAmount] = useState<number>(0)\r\n    const [title, setTitle] = useState<string>(applicationStrings.input_compositelist_title[language])\r\n    const [selectedSource, setSelectedSource] = useState<ReactSelectOption | null>(null)\r\n    const [supplementData, setSupplementData] = useState<boolean>(initialSupplementValue)\r\n    const [combineData, setCombineData] = useState<boolean>(initialCombineValue)\r\n    const [initialized, setInitialized] = useState<boolean>(false)\r\n\r\n    const [categoriesList, setCategoriesList] = useState<Array<ReactSelectOption>>([])\r\n    const [foodClassesList, setFoodClassesList] = useState<Array<ReactSelectFoodClassOption>>([])\r\n    const [foodClassesTypeaheadList, setFoodClassesTypeaheadList] = useState<Array<ReactSelectFoodClassOption>>([])\r\n\r\n    const [foodItemsList, setFoodItemsList] = useState<Array<ReactSelectFoodItemOption>>([])\r\n    const [portionsList, setPortionsList] = useState<Array<ReactSelectPortionOption>>([])\r\n    const [sourcesList, setSourcesList] = useState<Array<ReactSelectOption>>([])\r\n\r\n    const [unitModalOpen, setUnitModalOpen] = useState<boolean>(false)\r\n\r\n    // The food class search key entered by the user:\r\n    const [foodClassSearchTerm, setFoodClassSearchTerm] = useState<string>(\"\")\r\n\r\n    // The selected food item object, from which the selector has once been created.\r\n    const initiallySetFoodItem = props.selectedFoodItem !== undefined ? props.selectedFoodItem : null\r\n    const [initiallySetSelectedFoodItem, setInitiallySetSelectedFoodItem] = useState<SelectedFoodItem | null>(initiallySetFoodItem)\r\n\r\n    const windowSize = useWindowDimension()\r\n\r\n    const getInitialFoodClassNumber = (foodClassOptions: ReactSelectFoodClassOption[]): number => {\r\n        if (props.initialFoodClassToSet !== undefined && props.initialFoodClassToSet !== null) {\r\n            return props.initialFoodClassToSet\r\n        }\r\n\r\n        if (props.defaultFoodClass !== undefined) {\r\n            const index = foodClassOptions.findIndex(foodClassOption => foodClassOption.value.id === props.defaultFoodClass)\r\n            if (index !== -1) {\r\n                return index\r\n            }\r\n        }\r\n\r\n        return 0   // Use the first food class in the list if no other parameter indicates the food class to select\r\n    }\r\n\r\n    useEffect(() => {\r\n            if (applicationContext && applicationContext.foodDataCorpus && categoriesList.length === 0) {\r\n                const foodDataCorpus = applicationContext.foodDataCorpus\r\n\r\n                if (foodDataCorpus.categories) {\r\n                    const categoryItems = getCategorySelectList(foodDataCorpus.categories, language)\r\n                    setCategoriesList(categoryItems)\r\n                }\r\n\r\n                if (foodDataCorpus.foodClasses) {\r\n                    const category = selectedCategory ? selectedCategory.value : 0\r\n                    const foodClasses = getFoodClassSelectList(foodDataCorpus, category, applicationContext.foodDataCorpus.foodNames, language)\r\n                    setFoodClassesList(foodClasses)\r\n                    setFoodClassesTypeaheadList(foodClasses)  // Initially, the typeahead-list is identical with the food classes list\r\n\r\n                    const initialFoodClass = getInitialFoodClassNumber(foodClasses)\r\n                    const foodClass = foodClasses[initialFoodClass]\r\n                    setSelectedFoodClass(foodClass)\r\n\r\n                    if (foodDataCorpus.foodItems && foodClasses) {\r\n                        const foodItemsOfFoodClass = getFoodItemsSelectList(\r\n                            foodDataCorpus.foodItems,\r\n                            foodClasses[initialFoodClass].value.id,\r\n                            foodDataCorpus.foodNames,\r\n                            foodDataCorpus.conditions, language\r\n                        )\r\n\r\n                        setFoodItemsList(foodItemsOfFoodClass)\r\n                        setSelectedFoodItem(foodItemsOfFoodClass[0])\r\n                        const foodItem = foodItemsOfFoodClass[0].value\r\n\r\n                        if (foodItem && foodItem.portionData) {\r\n                            const portionDataList = getPortionReactSelectList(foodItem.portionData, foodDataCorpus.portionTypes, language)\r\n                            setPortionsList(portionDataList)\r\n\r\n                            updateSourcesList(foodItem)\r\n\r\n                            const defaultPortion = getDefaultPortionData(foodItem, portionDataList)\r\n                            setSelectedPortion(defaultPortion)\r\n                            setPortionAmount(defaultPortion.value.amount)\r\n\r\n                            if (!props.selectedFoodItem) {\r\n                                makeSelectedFoodItemObject(foodItem, foodClass.value, defaultPortion.value, portionAmount, supplementData,\r\n                                    combineData, selectedSource ? selectedSource.value : 0)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                // Update data for outer component whenever render is triggered\r\n                const source = selectedSource ? selectedSource.value : 0\r\n                if (selectedFoodItem && selectedFoodClass && selectedPortion) {\r\n                    const newFoodItem = makeSelectedFoodItemObject(selectedFoodItem.value, selectedFoodClass.value, selectedPortion.value,\r\n                        portionAmount, supplementData, combineData, source)\r\n                    if (newFoodItem) {\r\n                        props.updateSelectedFoodItem(newFoodItem)\r\n                        props.updateFoodSelectorConfig(selectedCategory, supplementData, combineData)\r\n                    }\r\n                } else if (props.selectedFoodItem) {\r\n                    const {foodItem, foodClass, portion} = props.selectedFoodItem\r\n                    makeSelectedFoodItemObject(foodItem, foodClass, portion, portionAmount, supplementData,\r\n                        combineData, source)\r\n                }\r\n            }\r\n\r\n        }, [selectedFoodItem,\r\n            selectedPortion,\r\n            selectedFoodClass,\r\n            selectedCategory,\r\n            selectedSource,\r\n            portionAmount,\r\n            title,\r\n            supplementData,\r\n            combineData\r\n        ]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleCategoryChange = (category: ReactSelectOption) => {\r\n        setSelectedCategory(category)\r\n        updateFoodClasses(category)\r\n    }\r\n\r\n    const handleFoodClassChange = (foodClass: ReactSelectFoodClassOption) => {\r\n        setSelectedFoodClass(foodClass)\r\n        updateFoodItem(foodClass)\r\n        resetTypeaheadFilter()\r\n    }\r\n\r\n    const resetTypeaheadFilter = () => {\r\n        setFoodClassesTypeaheadList(foodClassesList)\r\n    }\r\n\r\n    const handleFoodItemChange = (foodItem: ReactSelectFoodItemOption) => {\r\n        setSelectedFoodItem(foodItem)\r\n        updatePortionsList(foodItem.value)\r\n        updateSourcesList(foodItem.value)\r\n    }\r\n\r\n    const handlePortionChange = (portion: ReactSelectPortionOption) => {\r\n        setSelectedPortion(portion)\r\n        setPortionAmount(portion.value.amount)\r\n    }\r\n\r\n    const handleTitleChange = (event) => {\r\n        setTitle((event.target.value))\r\n        if (props.updateCompositeTitle !== undefined) {\r\n            props.updateCompositeTitle(event.target.value)\r\n        }\r\n    }\r\n\r\n    const handleSourceChange = (source: ReactSelectOption) => {\r\n        setSelectedSource(source)\r\n    }\r\n\r\n    const handlePortionAmountChange = (e) => {\r\n        if (!e.target.value) {\r\n            setPortionAmount(0)\r\n            return\r\n        }\r\n\r\n        const amount = parseInt(e.target.value)\r\n\r\n        if (!isNaN(amount)) {\r\n            setPortionAmount(amount)\r\n        }\r\n    }\r\n\r\n    const updateFoodClasses = (category: ReactSelectOption) => {\r\n        const foodDataCorpus = applicationContext.foodDataCorpus\r\n\r\n        if (foodDataCorpus) {\r\n            const foodClassItems = getFoodClassSelectList(foodDataCorpus, category.value, applicationContext.foodDataCorpus.foodNames, language)\r\n            setFoodClassesList(foodClassItems)\r\n            setFoodClassesTypeaheadList(foodClassItems)\r\n            setSelectedFoodClass(foodClassItems[0])\r\n            updateFoodItem(foodClassItems[0])\r\n        }\r\n    }\r\n\r\n    const updateFoodItem = (foodClass: ReactSelectFoodClassOption) => {\r\n        const {foodItems, foodNames, conditions} = applicationContext.foodDataCorpus\r\n\r\n        if (foodItems) {\r\n            let selectedFoodItemIndex;\r\n\r\n            const foodClassItems = getFoodItemsSelectList(foodItems, foodClass.value.id, foodNames, conditions, language)\r\n            setFoodItemsList(foodClassItems)\r\n\r\n            if (foodClassItems && foodClassItems.length > 0) {\r\n                const firstFoodClassItem = foodClassItems[0]\r\n                const nameId = firstFoodClassItem.value.nameId ?? -1\r\n                const firstFoodItemName = getNameFromFoodNameList(foodNames, nameId, language, false)\r\n\r\n                // The first food item in the list starts with the food class search string entered by the user\r\n                if (firstFoodItemName\r\n                    && (firstFoodItemName.startsWith(foodClassSearchTerm)\r\n                        || firstFoodItemName.includes(\" \" + foodClassSearchTerm))) {\r\n                    selectedFoodItemIndex = 0;\r\n                } else {   // Search for a food item in the list that starts with the food class search string\r\n                    const matchingIndex = foodClassItems.findIndex(item => {\r\n                        const nameId = item.value.nameId ?? -1\r\n                        const foodItemName = getNameFromFoodNameList(foodNames, nameId, language, false)\r\n                        return foodItemName && foodItemName.startsWith(foodClassSearchTerm)\r\n                    })\r\n                    if (matchingIndex >= 0) {  // Found one item in the list -> Select this item\r\n                        selectedFoodItemIndex = matchingIndex\r\n                    } else {   // Found no item in the list -> Just select the first food item\r\n                        selectedFoodItemIndex = 0\r\n                    }\r\n                }\r\n            }\r\n\r\n            const foodItemToSelect = foodClassItems[selectedFoodItemIndex]\r\n            setSelectedFoodItem(foodItemToSelect)\r\n\r\n            const foodItemValue = foodItemToSelect.value\r\n            if (foodItemValue) {\r\n                updatePortionsList(foodItemValue)\r\n                updateSourcesList(foodItemValue)\r\n            }\r\n        }\r\n    }\r\n\r\n    const updatePortionsList = (foodItem: FoodItem) => {\r\n        const portionDataList = getPortionReactSelectList(foodItem.portionData!!, applicationContext.foodDataCorpus.portionTypes, language)\r\n        setPortionsList(portionDataList)\r\n        const defaultPortion = getDefaultPortionData(foodItem, portionDataList)\r\n        setSelectedPortion(defaultPortion)\r\n        setPortionAmount(defaultPortion.value.amount)\r\n    }\r\n\r\n\r\n    const updateSourcesList = (foodItem: FoodItem) => {\r\n        const sourceNames = getSourceNames(foodItem)\r\n        setSourcesList(sourceNames)\r\n\r\n        if (sourceNames.length === 1) {\r\n            setSelectedSource(sourceNames[0])\r\n        } else {\r\n            const preferredSource = applicationContext.applicationData.preferredSource\r\n            const matchingSource = sourceNames.find(sourceObject => {\r\n                if (sourceObject.value === 0 && preferredSource === SOURCE_SRLEGACY) {\r\n                    return sourceObject\r\n                } else if (sourceObject.value === 1 && preferredSource === SOURCE_FNDDS) {\r\n                    return sourceObject\r\n                } else {\r\n                    return null\r\n                }\r\n            })\r\n            if (matchingSource) {\r\n                setSelectedSource(matchingSource)\r\n            } else {\r\n                setSelectedSource(sourceNames[0])\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const getSourceNames = (foodItem: FoodItem) => {\r\n        return foodItem.nutrientDataList.map(nutrientDataObject => {\r\n            const SourceName = getSourceName(nutrientDataObject.source.id)\r\n            return {label: SourceName, value: nutrientDataObject.source.id}\r\n        })\r\n    }\r\n\r\n    const setInitialFoodElement = () => {\r\n        if (!foodClassesList || foodClassesList.length === 0) {\r\n            return\r\n        }\r\n\r\n        if (!props.selectedFoodItem || !props.selectedFoodItem.foodClass) {\r\n            return\r\n        }\r\n\r\n        const predefinedFoodObject = props.selectedFoodItem\r\n\r\n        // @ts-ignore\r\n        const foodClassOption = foodClassesList.find(foodClass => foodClass.value.id === predefinedFoodObject.foodClass.id)\r\n        const {foodItems, foodNames, conditions, portionTypes} = applicationContext.foodDataCorpus\r\n\r\n        if (foodClassOption) {\r\n            setSelectedFoodClass(foodClassOption)\r\n            const foodClassItems = getFoodItemsSelectList(foodItems, foodClassOption.value.id, foodNames, conditions, language)\r\n\r\n            if (foodClassItems) {\r\n                setFoodItemsList(foodClassItems)\r\n                const foodItem = foodClassItems.find(foodItem => foodItem.value.id === predefinedFoodObject.foodItem.id)\r\n\r\n                if (foodItem && foodItem.value && foodItem.value.portionData) {\r\n                    setSelectedFoodItem(foodItem)\r\n\r\n                    const sourceNames = getSourceNames(foodItem.value)\r\n                    setSourcesList(sourceNames)\r\n                    const selected = sourceNames.find(sourceElement => sourceElement.value === props.selectedFoodItem?.selectedSource)\r\n                    if (selected) {\r\n                        setSelectedSource(selected)\r\n                    }\r\n\r\n                    const portionDataList = getPortionReactSelectList(foodItem.value.portionData, portionTypes, language)\r\n                    setPortionsList(portionDataList)\r\n\r\n                    const portionType = predefinedFoodObject.portion.portionType\r\n                    const portionObject = portionDataList.find(portion => portion.value.portionType === portionType)\r\n                    if (portionObject) {\r\n                        setSelectedPortion(portionObject)\r\n\r\n                        //@ts-ignore\r\n                        const amount = predefinedFoodObject.portion.amount\r\n                        setPortionAmount(amount)\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        setInitialized(true)\r\n    }\r\n\r\n    const onCheckSupplementCheckbox = () => {\r\n        setSupplementData(!supplementData)\r\n    }\r\n\r\n    const onCheckCombineCheckbox = () => {\r\n        setCombineData(!combineData)\r\n    }\r\n\r\n    /**\r\n     * Manually creates a sorted typeahead list which will favor food classes starting with the search term\r\n     * against food classes not starting (but including) the search term. Also, the food class is favored\r\n     * against the food items of it, which may also include the search term (like \"Cheese\" is shown if \"Gouda\"\r\n     * is entered).\r\n     * @param value The value entered in the select input field\r\n     * @param action The event action\r\n     */\r\n    const handleFoodClassInputChange = (value, {action}) => {\r\n        if (action === 'input-change') {\r\n            setFoodClassSearchTerm(value.trim())\r\n\r\n            if (value.trim().length === 0) {\r\n                setFoodClassesTypeaheadList(foodClassesList)\r\n                return\r\n            }\r\n\r\n            let resultList: ReactSelectFoodClassOption[] = []\r\n            let dictionary: string[] = []\r\n\r\n            value = value.toLowerCase().trim()\r\n\r\n            // Find all food class elements to the typeahead list that start with the search term\r\n            foodClassesList.forEach(entry => {\r\n                let label = entry.label.toLowerCase()\r\n                if (label.includes(foodClassLabelSeparator)) {\r\n                    label = label.substring(0, label.indexOf(foodClassLabelSeparator)).trim()\r\n                }\r\n                if (label.startsWith(value)) {\r\n                    resultList.push(entry)\r\n                    dictionary.push(entry.label)\r\n                }\r\n            })\r\n\r\n            // Now add all food class elements to the typeahead list that match the search term (yet do not start with it)\r\n            foodClassesList.forEach(entry => {\r\n                let label = entry.label.toLowerCase()\r\n                if (label.includes(foodClassLabelSeparator)) {\r\n                    label = label.substring(0, label.indexOf(foodClassLabelSeparator)).trim()\r\n                }\r\n                if (label.includes(value) && !label.startsWith(value)) {\r\n                    resultList.push(entry)\r\n                    dictionary.push(entry.label)\r\n                }\r\n            })\r\n\r\n            // Finally add all labels (class or items) that contain the search term\r\n            foodClassesList.forEach(entry => {\r\n                const label = entry.label.toLowerCase()\r\n                if (label.includes(value) && !dictionary.includes(entry.label)) {\r\n                    resultList.push(entry)\r\n                }\r\n            })\r\n\r\n            setFoodClassesTypeaheadList(resultList)\r\n        }\r\n    }\r\n\r\n    if (props.selectedFoodItem) {\r\n        if (!initialized) {\r\n            setInitialFoodElement()\r\n        } else {\r\n            if (initiallySetSelectedFoodItem === null || (initiallySetSelectedFoodItem.foodItem.id !== props.selectedFoodItem.foodItem.id)\r\n            ) {  // Selecting an element from the category tree => reset category to \"all\" and load all food classes\r\n                setInitiallySetSelectedFoodItem(props.selectedFoodItem)\r\n                setInitialFoodElement()\r\n            }\r\n        }\r\n    }\r\n\r\n    const renderSourceLine = () => {\r\n        const sourceSelectBox = (\r\n            <Select className={selectClass}\r\n                    options={sourcesList}\r\n                    isDisabled={sourcesList.length <= 1 || combineData}\r\n                    value={selectedSource ? selectedSource : sourcesList[0]}\r\n                    onChange={handleSourceChange}\r\n                    styles={customSelectStyles}\r\n            />\r\n        )\r\n\r\n        const checkboxes = (\r\n            <div>\r\n                <label className=\"form-elements\"\r\n                       data-for={\"selector-supplement\"}\r\n                       data-tip={applicationStrings.label_source_supplement_tooltip[language]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_source_supplement[language]}\r\n                                checked={supplementData}\r\n                                disabled={sourcesList.length <= 1}\r\n                                onChange={onCheckSupplementCheckbox}>\r\n                    </Form.Check>\r\n                    <ReactTooltip id={\"selector-supplement\"}/>\r\n                </label>\r\n                <label className=\"form-elements\"\r\n                       data-for={\"selector-combine\"}\r\n                       data-tip={applicationStrings.label_source_combine_tooltip[language]}>\r\n                    <ReactTooltip id={\"selector-combine\"}/>\r\n                    <Form.Check className=\"form-radiobutton\"\r\n                                style={{minHeight: \"1rem\"}}\r\n                                label={applicationStrings.label_source_combine[language]}\r\n                                checked={combineData}\r\n                                disabled={sourcesList.length <= 1}\r\n                                onChange={onCheckCombineCheckbox}>\r\n                    </Form.Check>\r\n                </label>\r\n            </div>\r\n        )\r\n\r\n        if (props.directCompareSelector && !isMobileDevice()) {  // Direct Compare Selector uses column layout for Checkboxes/Source box\r\n            return <div>\r\n                <span className={'form-label'}>{applicationStrings.label_source[language]}:</span>\r\n                <div className={\"d-flex row\"}>\r\n                    <div className=\"col-4 column select-menu form-section-small\">\r\n                        {sourceSelectBox}\r\n                    </div>\r\n                    <div className={\"col-8\"}>\r\n                        {checkboxes}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        } else {\r\n            return <div>\r\n                <span className={'form-label'}>{applicationStrings.label_source[language]}:</span>\r\n                <div className=\"select-menu form-section\">\r\n                    {sourceSelectBox}\r\n                </div>\r\n                <div>\r\n                    {checkboxes}\r\n                </div>\r\n            </div>\r\n        }\r\n    }\r\n\r\n\r\n    const amount_label = props.compositeSelector\r\n        ? `${applicationStrings.label_amount_short[language]}:`\r\n        : `${applicationStrings.label_amount[language]}:`\r\n    const initialFoodClass = getInitialFoodClassNumber(foodClassesList)\r\n\r\n    const selectClass = isSmallScreen(windowSize) ? \"form-control-sm\" : \"\"\r\n    const inputClass = isSmallScreen(windowSize) ? \"form-control form-control-sm\" : \"form-control\"\r\n\r\n    const formClass = props.directCompareSelector ? \"form-section-small\" : \"form-section\"\r\n\r\n    // Remove hidden food class information in the label, which is only used to facilitate user search (e.g. find 'Cheese' for term 'Gouda')\r\n    const foodclassFormatter = (option) => {\r\n        let label = option.label\r\n\r\n        if (label.includes(foodClassLabelSeparator)) {\r\n            const pos = label.indexOf(foodClassLabelSeparator)\r\n            label = label.substring(0, pos)\r\n        }\r\n\r\n        if (label.includes(\"[\")) {\r\n            const pos = label.indexOf(\"[\")\r\n            label = label.substring(0, pos)\r\n        }\r\n\r\n        return label\r\n    }\r\n\r\n    const stylesCategory = !props.directCompareSelector\r\n        ? getCustomSelectStyle(COLOR_SELECTOR_CATEGORY)\r\n        : customSelectStyles\r\n    const stylesFoodClass = !props.directCompareSelector\r\n        ? getCustomSelectStyle(COLOR_SELECTOR_FOODCLASS)\r\n        : customSelectStyles\r\n    const stylesFoodItem = !props.directCompareSelector\r\n        ? getCustomSelectStyle(COLOR_SELECTOR_FOODITEM)\r\n        : customSelectStyles\r\n\r\n    const onSubmitUnit = (value) => {\r\n        setPortionAmount(value)\r\n    }\r\n\r\n\r\n    const sourceUnits: Array<Unit> = [\r\n        {\r\n            labelKey: \"_ounces\",\r\n            factor: 28.413062\r\n        },\r\n        {\r\n            labelKey: \"_fl_ounces\",\r\n            factor: 29.573529\r\n        },\r\n        {\r\n            labelKey: \"_pounds\",\r\n            factor: 453.59237\r\n        },\r\n    ]\r\n\r\n    return <div>\r\n        <div className=\"container\">\r\n            {props.compositeSelector &&\r\n            <div>\r\n                <span className={'form-label'}>{applicationStrings.label_title[language]}:</span>\r\n                <input className={inputClass}\r\n                       value={title}\r\n                       style={correspondingSelectElementStyle}\r\n                       onChange={handleTitleChange}\r\n                />\r\n            </div>\r\n            }\r\n            {props.directCompareSelector !== true &&\r\n            <div className={formClass}>\r\n                <span className={'form-label'}>{applicationStrings.label_category[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={categoriesList}\r\n                        isDisabled={props.mode === MODE_EDIT}\r\n                        value={selectedCategory ? selectedCategory : categoriesList[0]}\r\n                        onChange={(value) => handleCategoryChange(value)}\r\n                        styles={stylesCategory}\r\n                />\r\n            </div>\r\n            }\r\n            {unitModalOpen &&\r\n                <UnitConversionModal sourceUnits={sourceUnits}\r\n                                     targetUnitLabelKey={\"_gram\"}\r\n                                     allowedMinimumTargetValue={1}\r\n                                     allowedMaximumTargetValue={max_portion}\r\n                                     initialValue={1}\r\n                                     onSubmit={onSubmitUnit}\r\n                                     closeModal={() => setUnitModalOpen(false)}>\r\n                </UnitConversionModal>\r\n            }\r\n            <div className={formClass}>\r\n                <span className={'form-label'}>{applicationStrings.label_foodclass[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={foodClassesTypeaheadList}\r\n                        isDisabled={props.mode === MODE_EDIT}\r\n                        onInputChange={handleFoodClassInputChange}\r\n                        formatOptionLabel={foodclassFormatter}\r\n                        value={selectedFoodClass ? selectedFoodClass : foodClassesList[initialFoodClass]}\r\n                        onChange={(value) => handleFoodClassChange(value)}\r\n                        onMenuClose={() => resetTypeaheadFilter()}\r\n                        styles={stylesFoodClass}\r\n                />\r\n            </div>\r\n            <div className={formClass}>\r\n                <span className={'form-label'}>{applicationStrings.label_fooditem[language]}:</span>\r\n                <Select className={selectClass}\r\n                        isDisabled={props.mode === MODE_EDIT}\r\n                        options={foodItemsList}\r\n                        value={selectedFoodItem ? selectedFoodItem : foodItemsList[0]}\r\n                        onChange={handleFoodItemChange}\r\n                        styles={stylesFoodItem}\r\n                />\r\n            </div>\r\n            <div className={formClass}>\r\n                <div className={\"row\"}>\r\n                    <div className={\"col-8\"}>\r\n                        <span\r\n                            className={'form-label'}>{applicationStrings.label_portion[language]}:</span>\r\n                        <Select className={selectClass}\r\n                                options={portionsList}\r\n                                styles={customSelectStyles}\r\n                                value={selectedPortion ? selectedPortion : portionsList[0]}\r\n                                onChange={(value) => handlePortionChange(value)}/>\r\n                    </div>\r\n                    <div className={\"col-4\"}>\r\n                        <div className={\"d-flex flex-row align-items-end\"}>\r\n                            <div>\r\n                                <span className={'form-label'}>{amount_label}</span>\r\n                                <input className={inputClass}\r\n                                       disabled={selectedPortion?.value.portionType !== 0}\r\n                                       value={portionAmount}\r\n                                       style={correspondingSelectElementStyle}\r\n                                       onChange={handlePortionAmountChange}\r\n                                />\r\n                            </div>\r\n                            <Button className={\"btn btn-secondary\"}\r\n                                    disabled={!selectedPortion || selectedPortion.value.portionType !== PORTION_KEY_INDIVIDUAL}\r\n                                    style={{marginLeft: \"1vw\"}}\r\n                                    onClick={() => setUnitModalOpen(true)}>\r\n                                <FaSlidersH/>\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {renderSourceLine()}\r\n        </div>\r\n    </div>\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {FaTrash} from \"react-icons/fa\";\r\n\r\nexport interface CompositeFoodListProps {\r\n    selectedFoodItems: Array<SelectedFoodItem>\r\n    deleteItem: (index: number) => void\r\n}\r\n\r\nexport function CompositeFoodList(props: CompositeFoodListProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const onDeleteItem = (index: number) => {\r\n        props.deleteItem(index)\r\n    }\r\n\r\n    const renderLine = (selectedFoodItem: SelectedFoodItem, index: number) => {\r\n        if(applicationContext) {\r\n            const name = getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, selectedFoodItem.foodItem.nameId!!, languageContext.language)\r\n\r\n            return <div className={\"row\"}\r\n                        key={`composite food list ${index}`}\r\n                        style={{borderBottom: \"1px solid #dddddd\", paddingTop: \"6px\"}}>\r\n                <div className={\"col-1\"}>\r\n                    <b>{index+1}.</b>\r\n                </div>\r\n                <div className={\"col-8\"}>\r\n                    {name}\r\n                    <br/>\r\n                    {selectedFoodItem.portion.amount} g\r\n                </div>\r\n                <div className={\"col-3\"}>\r\n                    <Button onClick={() => onDeleteItem(index)}>\r\n                        <FaTrash/>\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        return <div/>\r\n    }\r\n\r\n    return <div className={\"container\"} style={{maxHeight: \"300px\", overflowY: \"auto\"}}>\r\n        {props.selectedFoodItems.map((selectedFoodItem, index) => renderLine(selectedFoodItem, index))}\r\n    </div>\r\n\r\n}","import SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodItem, {\r\n    BaseData,\r\n    CarbohydrateData,\r\n    CarotenoidData,\r\n    ExtendedVitaminE,\r\n    LipidData,\r\n    MineralData,\r\n    NutrientData,\r\n    ProteinData,\r\n    VitaminData\r\n} from \"../../types/nutrientdata/FoodItem\";\r\nimport {getNutrientData} from \"../nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function combineFoodItems(compositeList: Array<SelectedFoodItem>): SelectedFoodItem {\r\n    let portionSize = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        portionSize += selectedFoodItem.portion.amount\r\n    })\r\n\r\n    const nutrientDataList = buildAggregatedNutrientDataList(compositeList, portionSize);\r\n    const id = new Date().getTime();\r\n\r\n    const aggreatedFoodItem: FoodItem = {\r\n        id: id,\r\n        nutrientDataList: nutrientDataList,\r\n        aggregated: true\r\n    }\r\n\r\n    return {\r\n        id: id,\r\n        foodItem: aggreatedFoodItem,\r\n        portion: {\r\n            portionType: 999,\r\n            amount: portionSize\r\n        },\r\n        compositeSubElements: compositeList,\r\n        selectedSource: -1,\r\n        supplementData: true,\r\n        combineData: false\r\n    };\r\n}\r\n\r\n\r\nfunction buildAggregatedNutrientDataList(compositeList: Array<SelectedFoodItem>, portionSize: number): Array<NutrientData> {\r\n    const baseData = buildBaseDataObject(compositeList, portionSize);\r\n    const vitaminData = buildVitaminDataObject(compositeList, portionSize);\r\n    const mineralData = buildMineralDataObject(compositeList, portionSize);\r\n    const carbohydrateData = buildCarbohydrateData(compositeList, portionSize);\r\n    const lipidData = buildLipidData(compositeList, portionSize);\r\n    const proteinData = buildProteinData(compositeList, portionSize);\r\n\r\n    let nutrientObject: NutrientData = {\r\n        sourceItemId: \"0\",\r\n        source: {id: 0, url: \"\", name: \"\"},\r\n        baseData: baseData,\r\n        vitaminData: vitaminData,\r\n        mineralData: mineralData,\r\n        carbohydrateData: carbohydrateData,\r\n        lipidData: lipidData,\r\n        proteinData: proteinData\r\n    }\r\n\r\n    nutrientObject = removeNutrientObjectsWithNullValues(nutrientObject, compositeList);\r\n\r\n    const nutrientDataList: Array<NutrientData> = [];\r\n    nutrientDataList.push(nutrientObject);\r\n\r\n    return nutrientDataList;\r\n}\r\n\r\n\r\n/**\r\n * Removes all nutrient data elements that do not exist in ALL of the food elements within the list.\r\n * @param nutrientObject\r\n * @param compositeList\r\n */\r\nfunction removeNutrientObjectsWithNullValues(nutrientObject: NutrientData, compositeList: Array<SelectedFoodItem>) {\r\n    if (!compositeList) {\r\n        return nutrientObject;\r\n    }\r\n\r\n    for (let i = 0; i < compositeList.length; i++) {\r\n        let selectedFoodItem = compositeList[i]\r\n        const nutrientData = getNutrientData(selectedFoodItem)\r\n        const threshold = 0.1;   // Defines the amount of base data which must exist to set a sub-value to null.\r\n\r\n        // Remove base data\r\n        if (nutrientData.baseData.carbohydrates >= threshold) {\r\n            if (nutrientData.baseData.dietaryFibers == null) {\r\n                nutrientObject.baseData.dietaryFibers = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Lipid data\r\n        if (nutrientData.baseData.lipids >= threshold) {\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.saturated == null) {\r\n                nutrientObject.lipidData.saturated = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.unsaturatedMono == null) {\r\n                nutrientObject.lipidData.unsaturatedMono = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.unsaturatedPoly == null) {\r\n                nutrientObject.lipidData.unsaturatedPoly = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.transFattyAcids == null) {\r\n                nutrientObject.lipidData.transFattyAcids = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.cholesterol == null) {\r\n                nutrientObject.lipidData.cholesterol = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData.omegaData &&\r\n                (nutrientData.lipidData && nutrientData.lipidData.unsaturatedPoly && nutrientData.lipidData.unsaturatedPoly > threshold)) {\r\n                nutrientObject.lipidData.omegaData = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Carbohydrate data\r\n        if (nutrientData.baseData.carbohydrates >= threshold) {\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.sugar == null) {\r\n                nutrientObject.carbohydrateData.sugar = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.glucose == null) {\r\n                nutrientObject.carbohydrateData.glucose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.fructose == null) {\r\n                nutrientObject.carbohydrateData.fructose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.galactose == null) {\r\n                nutrientObject.carbohydrateData.galactose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.sucrose == null) {\r\n                nutrientObject.carbohydrateData.sucrose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.lactose == null) {\r\n                nutrientObject.carbohydrateData.lactose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.maltose == null) {\r\n                nutrientObject.carbohydrateData.maltose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.starch == null) {\r\n                nutrientObject.carbohydrateData.starch = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Vitamins:\r\n        if (nutrientData.vitaminData.a === null) {\r\n            nutrientObject.vitaminData.a = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.b1 === null) {\r\n            nutrientObject.vitaminData.b1 = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.b2 === null) {\r\n            nutrientObject.vitaminData.b2 = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.b3 === null) {\r\n            nutrientObject.vitaminData.b3 = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.b5 === null) {\r\n            nutrientObject.vitaminData.b5 = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.b6 === null) {\r\n            nutrientObject.vitaminData.b6 = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.b7 === null) {\r\n            nutrientObject.vitaminData.b7 = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.b9 === null) {\r\n            nutrientObject.vitaminData.b9 = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.b12 === null) {\r\n            nutrientObject.vitaminData.b12 = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.c === null) {\r\n            nutrientObject.vitaminData.c = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.d === null) {\r\n            nutrientObject.vitaminData.d = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.e === null) {\r\n            nutrientObject.vitaminData.e = null\r\n        }\r\n\r\n        if (nutrientData.vitaminData.k === null) {\r\n            nutrientObject.vitaminData.k = null\r\n        }\r\n\r\n\r\n        // Minerals:\r\n        if (nutrientData.mineralData.calcium === null) {\r\n            nutrientObject.mineralData.calcium = null\r\n        }\r\n\r\n        if (nutrientData.mineralData.copper === null) {\r\n            nutrientObject.mineralData.copper = null\r\n        }\r\n\r\n        if (nutrientData.mineralData.iron === null) {\r\n            nutrientObject.mineralData.iron = null\r\n        }\r\n\r\n        if (nutrientData.mineralData.magnesium === null) {\r\n            nutrientObject.mineralData.magnesium = null\r\n        }\r\n\r\n        if (nutrientData.mineralData.manganese === null) {\r\n            nutrientObject.mineralData.manganese = null\r\n        }\r\n\r\n        if (nutrientData.mineralData.phosphorus === null) {\r\n            nutrientObject.mineralData.phosphorus = null\r\n        }\r\n\r\n        if (nutrientData.mineralData.potassium === null) {\r\n            nutrientObject.mineralData.potassium = null\r\n        }\r\n\r\n        if (nutrientData.mineralData.selenium === null) {\r\n            nutrientObject.mineralData.selenium = null\r\n        }\r\n\r\n        if (nutrientData.mineralData.sodium === null) {\r\n            nutrientObject.mineralData.sodium = null\r\n        }\r\n\r\n        if (nutrientData.mineralData.zinc === null) {\r\n            nutrientObject.mineralData.zinc = null\r\n        }\r\n\r\n\r\n        // Proteins:\r\n\r\n        if (nutrientData.proteinData.alanine === null) {\r\n            nutrientObject.proteinData.alanine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.arginine === null) {\r\n            nutrientObject.proteinData.arginine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.asparticAcid === null) {\r\n            nutrientObject.proteinData.asparticAcid = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.cystine === null) {\r\n            nutrientObject.proteinData.cystine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.glutamicAcid === null) {\r\n            nutrientObject.proteinData.glutamicAcid = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.glycine === null) {\r\n            nutrientObject.proteinData.glycine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.histidine === null) {\r\n            nutrientObject.proteinData.histidine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.isoleucine === null) {\r\n            nutrientObject.proteinData.isoleucine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.leucine === null) {\r\n            nutrientObject.proteinData.leucine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.lysine === null) {\r\n            nutrientObject.proteinData.lysine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.methionine === null) {\r\n            nutrientObject.proteinData.methionine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.phenylalanine === null) {\r\n            nutrientObject.proteinData.phenylalanine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.proline === null) {\r\n            nutrientObject.proteinData.proline = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.serine === null) {\r\n            nutrientObject.proteinData.serine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.threonine === null) {\r\n            nutrientObject.proteinData.threonine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.tryptophan === null) {\r\n            nutrientObject.proteinData.tryptophan = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.tyrosine === null) {\r\n            nutrientObject.proteinData.tyrosine = null\r\n        }\r\n\r\n        if (nutrientData.proteinData.valine === null) {\r\n            nutrientObject.proteinData.valine = null\r\n        }\r\n\r\n    }\r\n\r\n    return nutrientObject;\r\n}\r\n\r\n\r\nfunction buildBaseDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number): BaseData {\r\n    let energy = 0;\r\n    let carbohydrates = 0;\r\n    let lipids = 0;\r\n    let proteins = 0;\r\n    let water = 0;\r\n    let dietaryFibers = 0;\r\n    let alcohol = 0;\r\n    let ash = 0;\r\n    let caffeine = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const baseData = getNutrientData(selectedFoodItem).baseData;\r\n        const userSetPortion = selectedFoodItem.portion.amount;\r\n        const portionFactor = userSetPortion / 100;\r\n\r\n        energy += (baseData.energy ? baseData.energy : 0) * portionFactor;\r\n        carbohydrates += baseData.carbohydrates * portionFactor;\r\n        lipids += baseData.lipids * portionFactor;\r\n        proteins += baseData.proteins * portionFactor;\r\n        water += baseData.water * portionFactor;\r\n        dietaryFibers += (baseData.dietaryFibers ? baseData.dietaryFibers : 0) * portionFactor;\r\n        alcohol += (baseData.alcohol ? baseData.alcohol : 0) * portionFactor;\r\n        ash += (baseData.ash ? baseData.ash : 0) * portionFactor;\r\n        caffeine += (baseData.caffeine ? baseData.caffeine : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        energy: createFinalValue(energy, portionSize),\r\n        carbohydrates: createFinalValue(carbohydrates, portionSize),\r\n        lipids: createFinalValue(lipids, portionSize),\r\n        proteins: createFinalValue(proteins, portionSize),\r\n        water: createFinalValue(water, portionSize),\r\n        dietaryFibers: createFinalValue(dietaryFibers, portionSize),\r\n        alcohol: alcohol,\r\n        ash: ash,\r\n        caffeine: caffeine\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction buildVitaminDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number): VitaminData {\r\n    let a = 0\r\n    let b1 = 0\r\n    let b2 = 0\r\n    let b3 = 0\r\n    let b5 = 0\r\n    let b6 = 0\r\n    let b7 = 0\r\n    let b9 = 0\r\n    let b12 = 0\r\n    let c = 0\r\n    let d = 0\r\n    let e = 0\r\n    let k = 0\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const vitaminData = getNutrientData(selectedFoodItem).vitaminData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        a += (vitaminData.a ? vitaminData.a : 0) * portionFactor\r\n        b1 += (vitaminData.b1 ? vitaminData.b1 : 0) * portionFactor\r\n        b2 += (vitaminData.b2 ? vitaminData.b2 : 0) * portionFactor\r\n        b3 += (vitaminData.b3 ? vitaminData.b3 : 0) * portionFactor\r\n        b5 += (vitaminData.b5 ? vitaminData.b5 : 0) * portionFactor\r\n        b6 += (vitaminData.b6 ? vitaminData.b6 : 0) * portionFactor\r\n        b7 += (vitaminData.b7 ? vitaminData.b7 : 0) * portionFactor\r\n        b9 += (vitaminData.b9 ? vitaminData.b9 : 0) * portionFactor\r\n        b12 += (vitaminData.b12 ? vitaminData.b12 : 0) * portionFactor\r\n        c += (vitaminData.c ? vitaminData.c : 0) * portionFactor\r\n        d += (vitaminData.d ? vitaminData.d : 0) * portionFactor\r\n        e += (vitaminData.e ? vitaminData.e : 0) * portionFactor\r\n        k += (vitaminData.k ? vitaminData.k : 0) * portionFactor\r\n    })\r\n\r\n    return {\r\n        a: createFinalValue(a, portionSize),\r\n        b1: createFinalValue(b1, portionSize),\r\n        b2: createFinalValue(b2, portionSize),\r\n        b3: createFinalValue(b3, portionSize),\r\n        b5: createFinalValue(b5, portionSize),\r\n        b6: createFinalValue(b6, portionSize),\r\n        b7: createFinalValue(b7, portionSize),\r\n        b9: createFinalValue(b9, portionSize),\r\n        b12: createFinalValue(b12, portionSize),\r\n        c: createFinalValue(c, portionSize),\r\n        d: createFinalValue(d, portionSize),\r\n        e: createFinalValue(e, portionSize),\r\n        k: createFinalValue(k, portionSize),\r\n        carotenoidData: buildCarotenoidDataObject(compositeList, portionSize),\r\n        extendedVitaminE: buildExtendedVitaminEObject(compositeList, portionSize)\r\n    }\r\n}\r\n\r\n\r\nfunction buildCarotenoidDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number): CarotenoidData {\r\n    let alpha = 0\r\n    let beta = 0\r\n    let cryptoxanthin = 0\r\n    let lycopene = 0\r\n    let lutein = 0\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const carotenoidData = getNutrientData(selectedFoodItem).vitaminData.carotenoidData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        if (carotenoidData !== null) {\r\n            alpha += (carotenoidData.caroteneAlpha ? carotenoidData.caroteneAlpha : 0) * portionFactor\r\n            beta += (carotenoidData.caroteneBeta ? carotenoidData.caroteneBeta : 0) * portionFactor\r\n            cryptoxanthin += (carotenoidData.cryptoxanthin ? carotenoidData.cryptoxanthin : 0) * portionFactor\r\n            lycopene += (carotenoidData.lycopene ? carotenoidData.lycopene : 0) * portionFactor\r\n            lutein += (carotenoidData.lutein ? carotenoidData.lutein : 0) * portionFactor\r\n        }\r\n    })\r\n\r\n    return {\r\n        caroteneAlpha: createFinalValue(alpha, portionSize),\r\n        caroteneBeta: createFinalValue(beta, portionSize),\r\n        cryptoxanthin: createFinalValue(cryptoxanthin, portionSize),\r\n        lycopene: createFinalValue(lycopene, portionSize),\r\n        lutein: createFinalValue(lutein, portionSize)\r\n    }\r\n}\r\n\r\nfunction buildExtendedVitaminEObject(compositeList: Array<SelectedFoodItem>, portionSize: number): ExtendedVitaminE {\r\n    let tocopherolBeta = 0\r\n    let tocopherolGamma = 0\r\n    let tocopherolDelta = 0\r\n    let tocotrienolAlpha = 0\r\n    let tocotrienolBeta = 0\r\n    let tocotrienolGamma = 0\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const extendedVitaminEData = getNutrientData(selectedFoodItem).vitaminData.extendedVitaminE\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        if (extendedVitaminEData !== null) {\r\n            tocopherolBeta += (extendedVitaminEData.tocopherolBeta ? extendedVitaminEData.tocopherolBeta : 0) * portionFactor\r\n            tocopherolGamma += (extendedVitaminEData.tocopherolGamma ? extendedVitaminEData.tocopherolGamma : 0) * portionFactor\r\n            tocopherolDelta += (extendedVitaminEData.tocopherolDelta ? extendedVitaminEData.tocopherolDelta : 0) * portionFactor\r\n            tocotrienolAlpha += (extendedVitaminEData.tocotrienolAlpha ? extendedVitaminEData.tocotrienolAlpha : 0) * portionFactor\r\n            tocotrienolBeta += (extendedVitaminEData.tocotrienolBeta ? extendedVitaminEData.tocotrienolBeta : 0) * portionFactor\r\n            tocotrienolGamma += (extendedVitaminEData.tocotrienolGamma ? extendedVitaminEData.tocotrienolGamma : 0) * portionFactor\r\n        }\r\n    })\r\n\r\n    return {\r\n        tocopherolBeta: createFinalValue(tocopherolBeta, portionSize),\r\n        tocopherolGamma: createFinalValue(tocopherolGamma, portionSize),\r\n        tocopherolDelta: createFinalValue(tocopherolDelta, portionSize),\r\n        tocotrienolAlpha: createFinalValue(tocotrienolAlpha, portionSize),\r\n        tocotrienolBeta: createFinalValue(tocotrienolBeta, portionSize),\r\n        tocotrienolGamma: createFinalValue(tocotrienolGamma, portionSize)\r\n    }\r\n}\r\n\r\n\r\nfunction buildMineralDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number): MineralData {\r\n    let calcium = 0;\r\n    let iron = 0;\r\n    let magnesium = 0;\r\n    let phosphorus = 0;\r\n    let potassium = 0;\r\n    let sodium = 0;\r\n    let zinc = 0;\r\n    let copper = 0;\r\n    let manganese = 0;\r\n    let selenium = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const mineralData = getNutrientData(selectedFoodItem).mineralData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        calcium += (mineralData.calcium ? mineralData.calcium : 0) * portionFactor;\r\n        iron += (mineralData.iron ? mineralData.iron : 0) * portionFactor;\r\n        magnesium += (mineralData.magnesium ? mineralData.magnesium : 0)\r\n        phosphorus += (mineralData.phosphorus ? mineralData.phosphorus : 0)\r\n        potassium += (mineralData.potassium ? mineralData.potassium : 0)\r\n        sodium += (mineralData.sodium ? mineralData.sodium : 0)\r\n        zinc += (mineralData.zinc ? mineralData.zinc : 0)\r\n        copper += (mineralData.copper ? mineralData.copper : 0)\r\n        manganese += (mineralData.manganese ? mineralData.manganese : 0)\r\n        selenium += (mineralData.selenium ? mineralData.selenium : 0)\r\n    })\r\n\r\n    return {\r\n        calcium: createFinalValue(calcium, portionSize),\r\n        iron: createFinalValue(iron, portionSize),\r\n        magnesium: createFinalValue(magnesium, portionSize),\r\n        phosphorus: createFinalValue(phosphorus, portionSize),\r\n        potassium: createFinalValue(potassium, portionSize),\r\n        sodium: createFinalValue(sodium, portionSize),\r\n        zinc: createFinalValue(zinc, portionSize),\r\n        copper: createFinalValue(copper, portionSize),\r\n        manganese: createFinalValue(manganese, portionSize),\r\n        selenium: createFinalValue(selenium, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildCarbohydrateData(compositeList: Array<SelectedFoodItem>, portionSize: number): CarbohydrateData {\r\n    let glucose = 0;\r\n    let fructose = 0;\r\n    let galactose = 0;\r\n    let sucrose = 0;\r\n    let maltose = 0;\r\n    let lactose = 0;\r\n    let starch = 0;\r\n    let sugar = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const carbohydrateData = getNutrientData(selectedFoodItem).carbohydrateData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        glucose += (carbohydrateData.glucose ? carbohydrateData.glucose : 0) * portionFactor;\r\n        fructose += (carbohydrateData.fructose ? carbohydrateData.fructose : 0) * portionFactor;\r\n        galactose += (carbohydrateData.galactose ? carbohydrateData.galactose : 0) * portionFactor;\r\n        sucrose += (carbohydrateData.sucrose ? carbohydrateData.sucrose : 0) * portionFactor;\r\n        maltose += (carbohydrateData.maltose ? carbohydrateData.maltose : 0) * portionFactor;\r\n        lactose += (carbohydrateData.lactose ? carbohydrateData.lactose : 0) * portionFactor;\r\n        starch += (carbohydrateData.starch ? carbohydrateData.starch : 0) * portionFactor;\r\n        sugar += (carbohydrateData.sugar ? carbohydrateData.sugar : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        glucose: createFinalValue(glucose, portionSize),\r\n        fructose: createFinalValue(fructose, portionSize),\r\n        galactose: createFinalValue(galactose, portionSize),\r\n        sucrose: createFinalValue(sucrose, portionSize),\r\n        maltose: createFinalValue(maltose, portionSize),\r\n        lactose: createFinalValue(lactose, portionSize),\r\n        starch: createFinalValue(starch, portionSize),\r\n        sugar: createFinalValue(sugar, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildProteinData(compositeList: Array<SelectedFoodItem>, portionSize: number): ProteinData {\r\n    let tryptophan = 0;\r\n    let threonine = 0;\r\n    let isoleucine = 0;\r\n    let leucine = 0;\r\n    let lysine = 0;\r\n    let methionine = 0;\r\n    let cystine = 0;\r\n    let phenylalanine = 0;\r\n    let tyrosine = 0;\r\n    let valine = 0;\r\n    let arginine = 0;\r\n    let histidine = 0;\r\n    let alanine = 0;\r\n    let asparticAcid = 0;\r\n    let glutamicAcid = 0;\r\n    let glycine = 0;\r\n    let proline = 0;\r\n    let serine = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const proteinData = getNutrientData(selectedFoodItem).proteinData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        tryptophan += (proteinData.tryptophan ? proteinData.tryptophan : 0) * portionFactor;\r\n        threonine += (proteinData.threonine ? proteinData.threonine : 0) * portionFactor;\r\n        isoleucine += (proteinData.isoleucine ? proteinData.isoleucine : 0) * portionFactor;\r\n        leucine += (proteinData.leucine ? proteinData.leucine : 0) * portionFactor;\r\n        lysine += (proteinData.lysine ? proteinData.lysine : 0) * portionFactor;\r\n        methionine += (proteinData.methionine ? proteinData.methionine : 0) * portionFactor;\r\n        cystine += (proteinData.cystine ? proteinData.cystine : 0) * portionFactor;\r\n        phenylalanine += (proteinData.phenylalanine ? proteinData.phenylalanine : 0) * portionFactor;\r\n        tyrosine += (proteinData.tyrosine ? proteinData.tyrosine : 0) * portionFactor;\r\n        valine += (proteinData.valine ? proteinData.valine : 0) * portionFactor;\r\n        arginine += (proteinData.arginine ? proteinData.arginine : 0) * portionFactor;\r\n        histidine += (proteinData.histidine ? proteinData.histidine : 0) * portionFactor;\r\n        alanine += (proteinData.alanine ? proteinData.alanine : 0) * portionFactor;\r\n        asparticAcid += (proteinData.asparticAcid ? proteinData.asparticAcid : 0) * portionFactor;\r\n        glutamicAcid += (proteinData.glutamicAcid ? proteinData.glutamicAcid : 0) * portionFactor;\r\n        glycine += (proteinData.glycine ? proteinData.glycine : 0) * portionFactor;\r\n        proline += (proteinData.proline ? proteinData.proline : 0) * portionFactor;\r\n        serine += (proteinData.serine ? proteinData.serine : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        tryptophan: createFinalValue(tryptophan, portionSize),\r\n        threonine: createFinalValue(threonine, portionSize),\r\n        isoleucine: createFinalValue(isoleucine, portionSize),\r\n        leucine: createFinalValue(leucine, portionSize),\r\n        lysine: createFinalValue(lysine, portionSize),\r\n        methionine: createFinalValue(methionine, portionSize),\r\n        cystine: createFinalValue(cystine, portionSize),\r\n        phenylalanine: createFinalValue(phenylalanine, portionSize),\r\n        tyrosine: createFinalValue(tyrosine, portionSize),\r\n        valine: createFinalValue(valine, portionSize),\r\n        arginine: createFinalValue(arginine, portionSize),\r\n        histidine: createFinalValue(histidine, portionSize),\r\n        alanine: createFinalValue(alanine, portionSize),\r\n        asparticAcid: createFinalValue(asparticAcid, portionSize),\r\n        glutamicAcid: createFinalValue(glutamicAcid, portionSize),\r\n        glycine: createFinalValue(glycine, portionSize),\r\n        proline: createFinalValue(proline, portionSize),\r\n        serine: createFinalValue(serine, portionSize),\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction buildLipidData(compositeList: Array<SelectedFoodItem>, portionSize: number): LipidData {\r\n    let unsaturatedMono = 0;\r\n    let unsaturatedPoly = 0;\r\n    let saturated = 0;\r\n    let omega3 = 0;\r\n    let omega6 = 0;\r\n    let omegaUncertain = 0;\r\n    let cholesterol = 0;\r\n    let transFattyAcids = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const lipidData = getNutrientData(selectedFoodItem).lipidData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        unsaturatedMono += (lipidData.unsaturatedMono ? lipidData.unsaturatedMono : 0) * portionFactor;\r\n        unsaturatedPoly += (lipidData.unsaturatedPoly ? lipidData.unsaturatedPoly : 0) * portionFactor;\r\n        saturated += (lipidData.saturated ? lipidData.saturated : 0) * portionFactor;\r\n        omega3 += (lipidData.omegaData?.omega3 ? lipidData.omegaData.omega3 : 0) * portionFactor;\r\n        omega6 += (lipidData.omegaData?.omega6 ? lipidData.omegaData.omega6 : 0) * portionFactor;\r\n        omegaUncertain += (lipidData.omegaData?.uncertain ? lipidData.omegaData.uncertain : 0) * portionFactor;\r\n        cholesterol += (lipidData.cholesterol ? lipidData.cholesterol : 0) * portionFactor;\r\n        transFattyAcids += (lipidData.transFattyAcids ? lipidData.transFattyAcids : 0) * portionFactor;\r\n    })\r\n\r\n    const omegaRatio = (omega3 + omega6) / (omega3 + omega6 + omegaUncertain)\r\n\r\n    return {\r\n        unsaturatedMono: createFinalValue(unsaturatedMono, portionSize),\r\n        unsaturatedPoly: createFinalValue(unsaturatedPoly, portionSize),\r\n        saturated: createFinalValue(saturated, portionSize),\r\n        omegaData: {\r\n            omega3: createFinalValue(omega3, portionSize),\r\n            omega6: createFinalValue(omega6, portionSize),\r\n            uncertain: createFinalValue(omegaUncertain, portionSize),\r\n            uncertainRatio: omegaRatio\r\n        },\r\n        cholesterol: createFinalValue(cholesterol, portionSize),\r\n        transFattyAcids: createFinalValue(transFattyAcids, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction createFinalValue(value, totalPortionAmount) {\r\n    return (value / totalPortionAmount) * 100;\r\n}","import React, {ReactElement, useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport getName from \"../../service/LanguageService\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport {getFoodClassesOfCategory} from \"../../service/nutrientdata/FoodClassService\";\r\nimport {getFoodItemsSelectList} from \"../../service/nutrientdata/FoodItemsService\";\r\nimport {Form, Modal} from \"react-bootstrap\";\r\n\r\ninterface CategoryTreeModalProps {\r\n    selectedCategory: number,\r\n    closeModal: () => void\r\n    selectFoodItemFromCategoryTree: (number) => void\r\n}\r\n\r\nexport function CategoryTreeModal(props: CategoryTreeModalProps): ReactElement {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext).language\r\n\r\n    const [separateByCategory, setSeparateByCategory] = useState(true)\r\n\r\n    if(!applicationContext) {\r\n        return <div>No content.</div>\r\n    }\r\n\r\n    const foodDataCorpus = applicationContext.foodDataCorpus\r\n    const { foodNames, conditions, foodClasses, foodItems } = foodDataCorpus\r\n\r\n    const onClickFoodItem = (foodItemId) => {\r\n        props.selectFoodItemFromCategoryTree(foodItemId)\r\n        props.closeModal()\r\n    }\r\n\r\n    const renderCategoryTree = () => {\r\n        const categories = props.selectedCategory === 0\r\n            ? foodDataCorpus.categories.slice(1)\r\n            : foodDataCorpus.categories.filter(category => category.id === props.selectedCategory)\r\n\r\n        if(props.selectedCategory !== 0 || separateByCategory) {  // Separate by category\r\n            return categories.map((category, index) => {\r\n                const name = getName(category, language)\r\n                const categoryHeading = props.selectedCategory === 0\r\n                    ? `${index+1}. ${name}`\r\n                    : name;\r\n                return <div style={{paddingBottom: \"4ch\"}} key={`tree-category-${index}`}>\r\n                    <h4>{categoryHeading}</h4>\r\n                    {renderFoodClasses(category.id)}\r\n                </div>\r\n            })\r\n        } else {   // List all food classes\r\n            return <div>\r\n                {renderFoodClasses(0)}\r\n            </div>\r\n        }\r\n    }\r\n\r\n    const renderFoodClasses = (categoryId) => {\r\n        const foodClassesOfCategory = getFoodClassesOfCategory(foodClasses, categoryId)\r\n        foodClassesOfCategory.sort((obj1, obj2) => {\r\n            const nameA = getNameFromFoodNameList(foodNames, obj1.nameKey, language, false) ?? ''\r\n            const nameB = getNameFromFoodNameList(foodNames, obj2.nameKey, language, false) ?? ''\r\n            return nameA.localeCompare(nameB)\r\n        })\r\n\r\n        return foodClassesOfCategory.map(foodClass => {\r\n            const foodClassName = getNameFromFoodNameList(foodNames, foodClass.nameKey ?? -1, language, false)\r\n            return <div style={{paddingLeft: \"2ch\", paddingBottom: \"1ch\"}} key={`tree-foodclass-${foodClass.id}`}>\r\n                <div className={\"form-text\"} style={{fontWeight: \"bold\"}}>{foodClassName}</div>\r\n                <div>{renderFoodItems(foodClass.id)}</div>\r\n            </div>\r\n        })\r\n    }\r\n\r\n    const renderFoodItems = (foodClassId) => {\r\n        const foodItemsSelectList = getFoodItemsSelectList(foodItems, foodClassId, foodNames, conditions, language)\r\n\r\n        return foodItemsSelectList.map(foodItemSelectOption => {\r\n            const foodItemId = foodItemSelectOption.value.id\r\n            return <div style={{paddingLeft: \"4ch\"}}  key={`tree-foodclass-${foodItemId}`}>\r\n                <button className={\"btn btn-link\"}\r\n                        onClick={() => onClickFoodItem(foodItemId)}>\r\n                    {foodItemSelectOption.label}\r\n                </button>\r\n            </div>\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Modal size={'lg'} show={true}>\r\n            <Modal.Header>\r\n                <h5 className=\"modal-title\">{applicationStrings.label_categoryTree_title[language]}</h5>\r\n                <button type=\"button\"\r\n                        className=\"btn-close\"\r\n                        data-dismiss=\"modal\"\r\n                        aria-label=\"Close\"\r\n                        onClick={props.closeModal}>\r\n                </button>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className=\"modal-body\" style={{height: \"70vh\", overflowY: \"auto\"}}>\r\n                    {renderCategoryTree()}\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <div className={\"d-flex flex-row justify-content-between w-100\"}>\r\n                    <div>\r\n                        {props.selectedCategory === 0 &&\r\n                            <Form.Check inline className=\"form-radiobutton\"\r\n                                        checked={separateByCategory}\r\n                                        label={applicationStrings.label_categoryTree_checkbox[language]}\r\n                                        onChange={() => setSeparateByCategory(!separateByCategory)}>\r\n                            </Form.Check>\r\n                        }\r\n                    </div>\r\n                    <div>\r\n                        <button type=\"button\"\r\n                                className=\"btn btn-primary\"\r\n                                onClick={props.closeModal}>\r\n                            {applicationStrings.button_close[language]}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}","import {SOURCE_FNDDS, SOURCE_SRLEGACY} from \"../config/Constants\";\r\n\r\nexport function getSourceId(source: string) {\r\n    switch(source) {\r\n        case SOURCE_FNDDS:\r\n            return 1;\r\n        default:\r\n        case SOURCE_SRLEGACY:\r\n            return 0;\r\n    }\r\n}","import React, {ReactElement, useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {Form, FormControl, FormGroup, Modal} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {NutrientCondition} from \"../../../types/livedata/NutrientCondition\";\r\nimport {customSelectStyles} from \"../../../config/UI_Config\";\r\nimport Select from 'react-select';\r\nimport {getElementsOfRankingGroup, getNutrientGroup, getNutrientGroups} from \"../../../service/RankingService\";\r\nimport ReactSelectOption from \"../../../types/ReactSelectOption\";\r\nimport {getStatisticalNutrientInformation} from \"../../../service/nutrientdata/NutrientStatisticsService\";\r\nimport {getSourceId} from \"../../../service/Source\";\r\nimport {getUnit} from \"../../../service/calculation/NutrientCalculationService\";\r\nimport {autoRound} from \"../../../service/calculation/MathService\";\r\nimport NutrientStatistics from \"../../../types/livedata/NutrientStatistics\";\r\nimport {SOURCE_SRLEGACY} from \"../../../config/Constants\";\r\nimport {NotificationManager} from 'react-notifications'\r\nimport {FaLightbulb} from \"react-icons/fa\";\r\n\r\ninterface NutrientFilterSelectionProps {\r\n    closeModal: () => void\r\n    existingCondition?: NutrientCondition,\r\n    addCondition?: (condition: NutrientCondition) => void\r\n    editCondition?: (condition: NutrientCondition) => void\r\n}\r\n\r\nexport function NutrientFilterSelectionModal(props: NutrientFilterSelectionProps): ReactElement {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext).language\r\n\r\n    const nutrientGroups = getNutrientGroups(language);\r\n\r\n    const initialElementsList = getElementsOfRankingGroup(nutrientGroups[0].value, language)\r\n    const initialElement = props.existingCondition\r\n        ? props.existingCondition.nutrient\r\n        : initialElementsList && initialElementsList.length > 0\r\n            ? initialElementsList[0]\r\n            : null  // Fallback\r\n\r\n\r\n    const initialGroup = props.existingCondition\r\n        ? initialElement\r\n            ? getNutrientGroup(initialElement.value, language) !== undefined\r\n                ? getNutrientGroup(initialElement.value, language)!!\r\n                : nutrientGroups[0] // Fallback\r\n            : nutrientGroups[0] // Fallback\r\n        : nutrientGroups[0]\r\n\r\n    const foodItems = applicationContext?.foodDataCorpus.foodItems ?? []\r\n    const preferredSourceId = getSourceId(applicationContext?.applicationData.preferredSource ?? SOURCE_SRLEGACY)\r\n    const initialStatistics = initialElement ? getStatisticalNutrientInformation(initialElement.value, foodItems, preferredSourceId) : null\r\n\r\n    const [elementsList, setElementsList] = useState<Array<any>>(initialElementsList ?? [])\r\n    const [selectedGroup, setSelectedGroup] = useState<ReactSelectOption>(initialGroup)\r\n    const [selectedElement, setSelectedElement] = useState<any>(initialElement)\r\n    const [nutrientStatistics, setNutrientStatistics] = useState<NutrientStatistics | null>(null)\r\n\r\n    const initialMin = props.existingCondition\r\n        ? props.existingCondition.min\r\n        : initialStatistics\r\n            ? initialStatistics.minimumAmount ?? 0\r\n            : 0\r\n\r\n    const initialMax = props.existingCondition\r\n        ? props.existingCondition.max\r\n        : initialStatistics\r\n            ? initialStatistics.maximumAmount ?? 999\r\n            : 999\r\n\r\n    const [minValue, setMinValue] = useState<number>(initialMin)\r\n    const [maxValue, setMaxValue] = useState<number>(initialMax)\r\n\r\n    useEffect(() => {\r\n        if (applicationContext) {\r\n            if (!props.existingCondition) {\r\n                const statisticalNutrientInformation = getStatisticalNutrientInformation(selectedElement.value, foodItems, preferredSourceId)\r\n                setNutrientStatistics(statisticalNutrientInformation)\r\n                setMinValue(statisticalNutrientInformation.minimumAmount ?? 0)\r\n                setMaxValue(statisticalNutrientInformation.maximumAmount ?? 999)\r\n            } else {\r\n                const statisticalNutrientInformation = getStatisticalNutrientInformation(props.existingCondition.nutrient.value,\r\n                    foodItems, preferredSourceId)\r\n                setNutrientStatistics(statisticalNutrientInformation)\r\n            }\r\n        }\r\n    }, [selectedElement])\r\n\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleGroupChange = (selectedOption) => {\r\n        setSelectedGroup(selectedOption)\r\n        const newElementsList = getElementsOfRankingGroup(selectedOption.value, language)\r\n        setElementsList(newElementsList)\r\n        setSelectedElement(newElementsList[0])\r\n    }\r\n\r\n    const handleValueChange = (selectedOption) => {\r\n        setSelectedElement(selectedOption)\r\n    }\r\n\r\n    const setMinimum = (event: any) => {\r\n        const min = event.target.value\r\n\r\n        if (isNaN(min)) {\r\n            return\r\n        }\r\n\r\n        const minValue = parseFloat(min)\r\n        if(isNaN(minValue)) {\r\n            setMinValue(0)\r\n            return\r\n        }\r\n\r\n        if (nutrientStatistics && nutrientStatistics.minimumAmount !== null && minValue < nutrientStatistics.minimumAmount) {\r\n            NotificationManager.info(applicationStrings.message_filter_value_correction_min[language])\r\n            setMinValue(nutrientStatistics.minimumAmount)\r\n        } else if (nutrientStatistics && nutrientStatistics.maximumAmount !== null && minValue > nutrientStatistics.maximumAmount) {\r\n            NotificationManager.info(applicationStrings.message_filter_value_correction_max[language])\r\n            setMinValue(nutrientStatistics.maximumAmount)\r\n            setMaxValue(nutrientStatistics.maximumAmount)\r\n        } else {\r\n            setMinValue(minValue)\r\n        }\r\n    }\r\n\r\n    const setMaximum = (event: any) => {\r\n        const max = event.target.value\r\n\r\n        if (isNaN(max)) {\r\n            return\r\n        }\r\n\r\n        const maxValue = parseFloat(max)\r\n        if(isNaN(maxValue)) {\r\n            setMaxValue(0)\r\n            return\r\n        }\r\n\r\n        if (nutrientStatistics && nutrientStatistics.maximumAmount !== null && maxValue > nutrientStatistics.maximumAmount) {\r\n            NotificationManager.info(applicationStrings.message_filter_value_correction_max[language])\r\n            setMaxValue(nutrientStatistics.maximumAmount)\r\n        } else if (nutrientStatistics && nutrientStatistics.minimumAmount !== null && maxValue < nutrientStatistics.minimumAmount) {\r\n            NotificationManager.info(applicationStrings.message_filter_value_correction_min[language])\r\n            setMinValue(nutrientStatistics.minimumAmount)\r\n            setMaxValue(nutrientStatistics.minimumAmount)\r\n        } else {\r\n            setMaxValue(maxValue)\r\n        }\r\n    }\r\n\r\n    const onAddCondition = () => {\r\n        const nutrient = selectedElement.value\r\n\r\n        if (applicationContext.applicationData.nutrientFilter.find(condition => condition.nutrient.value === nutrient) !== undefined) {\r\n            NotificationManager.error(applicationStrings.message_filter_error_existing[language])\r\n            return\r\n        }\r\n\r\n        if (minValue > maxValue) {\r\n            NotificationManager.error(applicationStrings.message_filter_error_range[language])\r\n            return\r\n        }\r\n\r\n        const condition: NutrientCondition = {\r\n            nutrient: selectedElement,\r\n            min: minValue,\r\n            max: maxValue,\r\n        }\r\n\r\n        if (props.addCondition) {\r\n            props.addCondition(condition)\r\n        } else {\r\n            props.closeModal()\r\n        }\r\n    }\r\n\r\n    const onEditCondition = () => {\r\n        if (minValue > maxValue) {\r\n            NotificationManager.error(applicationStrings.message_filter_error_range[language])\r\n            return\r\n        }\r\n\r\n        const changedCondition: NutrientCondition = {...props.existingCondition!!, min: minValue, max: maxValue}\r\n        if (props.editCondition) {\r\n            props.editCondition(changedCondition)\r\n        } else {\r\n            props.closeModal()\r\n        }\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (props.existingCondition) {\r\n            onEditCondition()\r\n        } else {\r\n            onAddCondition()\r\n        }\r\n    }\r\n\r\n\r\n    const renderForm = () => {\r\n        const inputFieldStyle = {padding: \"0.3ch\", margin: \"0ch\"}\r\n\r\n        return (\r\n            <div>\r\n                <div className={\"select-menu form-section\"}>\r\n                    <span className={\"form-label\"}>{applicationStrings.label_group[language]}:</span>\r\n                    <Select className=\"form-control-sm\"\r\n                            options={nutrientGroups}\r\n                            isDisabled={props.existingCondition}\r\n                            value={selectedGroup}\r\n                            styles={customSelectStyles}\r\n                            onChange={handleGroupChange}\r\n                    />\r\n                </div>\r\n                <div className={\"select-menu form-section\"}>\r\n                    <span className={\"form-label\"}>{applicationStrings.label_value[language]}:</span>\r\n                    <Select className=\"form-control-sm\"\r\n                            options={elementsList}\r\n                            isDisabled={props.existingCondition}\r\n                            value={selectedElement}\r\n                            styles={customSelectStyles}\r\n                            onChange={handleValueChange}\r\n                    />\r\n                </div>\r\n                <div className={\"d-flex flex-row\"}>\r\n                    <FormGroup>\r\n                        <div className={\"d-flex flex-row\"}>\r\n                            <Form className={\"form-elements\"}>\r\n                                <Form.Label style={{margin: \"0\"}}>Min:</Form.Label>\r\n                                <FormControl\r\n                                    className={\"form-control input\"}\r\n                                    style={inputFieldStyle}\r\n                                    type=\"number\"\r\n                                    value={`${minValue}`}\r\n                                    onChange={setMinimum}\r\n                                />\r\n                            </Form>\r\n                            <Form className={\"form-elements\"}>\r\n                                <Form.Label style={{margin: \"0\"}}>Max:</Form.Label>\r\n                                <FormControl\r\n                                    className={\"form-control input\"}\r\n                                    style={inputFieldStyle}\r\n                                    type=\"number\"\r\n                                    value={`${maxValue}`}\r\n                                    onChange={setMaximum}\r\n                                />\r\n                            </Form>\r\n                        </div>\r\n                    </FormGroup>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderInfoPane = () => {\r\n        if (!nutrientStatistics) {\r\n            return <div/>\r\n        }\r\n\r\n        const foodItems = applicationContext.foodDataCorpus.foodItems\r\n\r\n        const getInfoHeaderText = (): string => {\r\n            const allValues = foodItems.length\r\n            const availableValues = nutrientStatistics.allValuesSorted.length\r\n            const nutrientName = selectedElement.label\r\n\r\n            const inRange = nutrientStatistics.allValuesSorted.filter(val => val >= minValue && val <= maxValue).length\r\n\r\n            /*\r\n             * MANUAL TRANSLATION because of the text complexity.\r\n             */\r\n\r\n            let infoText = language === \"de\"\r\n                ? `Von den ${allValues} vorhandenen Lebensmitteln haben ${availableValues} Angaben zu ${nutrientName}.`\r\n                : `Out of ${allValues} available foods ${availableValues} contain information about ${nutrientName}.`\r\n\r\n            if (inRange < availableValues) {\r\n                if (inRange > 1) {\r\n                    infoText += language === \"de\"\r\n                        ? ` Insgesamt liegen im eingegebenen Wertebereich ${inRange} verschiedene Lebensmittel.`\r\n                        : ` The specified data range altogether contains ${inRange} different food items.`\r\n                } else if (inRange === 1) {\r\n                    infoText += language === \"de\"\r\n                        ? ` In dem eingegebenen Wertebereich befindet sich 1 Lebensmittel.`\r\n                        : ` The specified data range contains 1 food items.`\r\n                } else {\r\n                    infoText += language === \"de\"\r\n                        ? ` In dem eingegeben Wertebereich befindet sich kein Lebensmittel!`\r\n                        : ` No food item is in the specified data range.`\r\n                }\r\n            }\r\n\r\n            return infoText\r\n        }\r\n\r\n        const unit = getUnit(selectedElement.value)\r\n        const keyStyle = {minWidth: \"12ch\"}\r\n\r\n        return (\r\n            <div className={\"form-text\"} style={{paddingLeft: \"2ch\"}}>\r\n                <div>\r\n                    <div style={{minHeight: \"15vh\"}}>\r\n                        <FaLightbulb/> {getInfoHeaderText()}\r\n                    </div>\r\n                </div>\r\n                <div style={{paddingLeft: \"3.5ch\"}}>\r\n                    <div className={\"d-flex flex-row\"}>\r\n                        <div style={keyStyle}><b>Minimum:</b></div>\r\n                        <div>{nutrientStatistics.minimumAmount} {unit}</div>\r\n                    </div>\r\n                    <div className={\"d-flex flex-row\"}>\r\n                        <div style={keyStyle}><b>Maximum:</b></div>\r\n                        <div>{nutrientStatistics.maximumAmount} {unit}</div>\r\n                    </div>\r\n                    <div className={\"d-flex flex-row\"}>\r\n                        <div style={keyStyle}><b>{applicationStrings.label_overallview_avg[language]}:</b></div>\r\n                        <div>{autoRound(nutrientStatistics.averageAmount)} {unit}</div>\r\n                    </div>\r\n                    <div className={\"d-flex flex-row\"}>\r\n                        <div style={keyStyle}><b>Median:</b></div>\r\n                        <div>{autoRound(nutrientStatistics.median)} {unit}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Modal className={\"filter-selection-modal\"}\r\n               size={'lg'}\r\n               show={true}\r\n               backdrop=\"static\">\r\n            <Modal.Header>\r\n                <h5 className=\"modal-title\">{applicationStrings.label_filterModal_selection[language]}</h5>\r\n                <button type=\"button\"\r\n                        className=\"btn-close\"\r\n                        data-dismiss=\"modal\"\r\n                        aria-label=\"Close\"\r\n                        onClick={props.closeModal}>\r\n                </button>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className={\"container row\"} style={{height: \"38vh\"}}>\r\n                    <div className={\"col-6\"}>\r\n                        {renderForm()}\r\n                    </div>\r\n                    <div className={\"col-6\"}>\r\n                        {renderInfoPane()}\r\n                    </div>\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer className={\"justify-content-end\"}>\r\n                <div>\r\n                    <button type=\"button\"\r\n                            className=\"btn btn-secondary\"\r\n                            onClick={props.closeModal}>\r\n                        {applicationStrings.button_close[language]}\r\n                    </button>\r\n                </div>\r\n                <div>\r\n                    <span>\r\n                        <button type=\"button\"\r\n                                className=\"btn btn-primary\"\r\n                                onClick={onSubmit}>\r\n                            {applicationStrings.button_add[language]}\r\n                        </button>\r\n                    </span>\r\n                </div>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}","import FoodItem from \"../../types/nutrientdata/FoodItem\";\r\nimport {NutrientCondition} from \"../../types/livedata/NutrientCondition\";\r\nimport {FilteredFoodItem} from \"../../types/livedata/SelectedFoodItem\";\r\nimport {OPERATOR_ALL, OPERATOR_ANY} from \"../../config/Constants\";\r\nimport {getValueOfFoodItem} from \"../RankingService\";\r\n\r\nexport function filterFoodItems(foodItems: Array<FoodItem>, conditions: Array<NutrientCondition>, operator: number,\r\n                                preferredSource: number): Array<FilteredFoodItem> {\r\n    const resultList: Array<FilteredFoodItem> = [];\r\n\r\n    const addResultObject = (foodItem, source) => {\r\n        resultList.push({\r\n            foodItem: foodItem,\r\n            source: source\r\n        })\r\n    }\r\n\r\n    foodItems.forEach((foodItem) => {\r\n        const matchingSources: Array<number> = []\r\n        foodItem.nutrientDataList.forEach((nutrientData) => {\r\n            let failedCondition = false\r\n            let successfulCondition = false\r\n            conditions.forEach(condition => {\r\n                const match = checkCondition(condition, foodItem, nutrientData.source.id)\r\n                if(match) {\r\n                    successfulCondition = true\r\n                    if(operator === OPERATOR_ANY) {\r\n                        return // Nutrient data matched one condition => no need to check further conditions\r\n                    }\r\n                } else if(!match && operator === OPERATOR_ALL) { // Nutrient data failed one condition => total fail => no need to go on\r\n                    failedCondition = true\r\n                    return\r\n                }\r\n            })\r\n\r\n            // Food item is a match if it succeeded at least one condition (OR mode) and never failed any condition (AND mode)\r\n            if(successfulCondition && !failedCondition) {\r\n                matchingSources.push(nutrientData.source.id)\r\n            }\r\n        })\r\n\r\n        if(matchingSources.length == 2) {  // We have two matching sources => take the preferred source\r\n            const source = matchingSources.filter(source => source === preferredSource)\r\n            if(source) {\r\n                addResultObject(foodItem, source)\r\n            }\r\n        } else if(matchingSources.length === 1) {\r\n            addResultObject(foodItem, matchingSources[0])\r\n        }\r\n    })\r\n\r\n    return resultList\r\n}\r\n\r\n\r\nfunction checkCondition(condition: NutrientCondition, foodItem: FoodItem, sourceId: number): boolean {\r\n    const value = getValueOfFoodItem(foodItem, condition.nutrient.value, sourceId, false)\r\n\r\n    if(!value) {\r\n        return false\r\n    }\r\n\r\n    return value >= condition.min && value <= condition.max\r\n}","import React, {ReactElement, useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {Button, Form, ListGroup, ListGroupItem, Modal} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {FaEdit, FaQuestionCircle, FaTrash} from \"react-icons/fa\";\r\nimport {getHelpText} from \"../../../service/HelpService\";\r\nimport {HelpModal} from \"../../HelpModal\";\r\nimport {NutrientFilterSelectionModal} from \"./NutrientFilterSelection\";\r\nimport {NutrientCondition} from \"../../../types/livedata/NutrientCondition\";\r\nimport {getUnit} from \"../../../service/calculation/NutrientCalculationService\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {filterFoodItems} from \"../../../service/nutrientdata/FilterService\";\r\nimport {FilteredFoodItem} from \"../../../types/livedata/SelectedFoodItem\";\r\nimport Select from 'react-select';\r\nimport {getFoodItemName} from \"../../../service/nutrientdata/FoodItemsService\";\r\nimport ReactSelectOption from \"../../../types/ReactSelectOption\";\r\nimport {OPERATOR_ALL, OPERATOR_ANY} from \"../../../config/Constants\";\r\nimport {getSourceId} from \"../../../service/Source\";\r\nimport getName from \"../../../service/LanguageService\";\r\n\r\ninterface FilterModalProps {\r\n    closeModal: () => void\r\n    selectFoodItemFromFilterModal: (selectedFilterResult: FilteredFoodItem) => void\r\n}\r\n\r\nexport function FilterModal(props: FilterModalProps): ReactElement {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext).language\r\n\r\n    const [showHelpModal, setShowHelpModal] = useState<boolean>(false)\r\n    const [showNutrientFilterModal, setShowNutrientFilterModal] = useState<boolean>(false)\r\n    const [editingCondition, setEditingCondition] = useState<NutrientCondition | null>(null)\r\n    const [filterResult, setFilterResult] = useState<Array<FilteredFoodItem>>([])\r\n    const [selectList, setSelectList] = useState<Array<ReactSelectOption>>([])\r\n    const [selectedFilterResult, setSelectedFilterResult] = useState<ReactSelectOption | null>(null)\r\n    const [calculationTypeAny, setCalculationTypeAny] = useState<boolean>(false)\r\n\r\n    useEffect(() => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n        const {foodItems} = applicationContext.foodDataCorpus\r\n        const filterConditions = applicationContext?.applicationData.nutrientFilter\r\n        const preferredSource = applicationContext.applicationData.preferredSource\r\n        const preferredSourceId = getSourceId(preferredSource)\r\n\r\n        const operator = calculationTypeAny ? OPERATOR_ANY : OPERATOR_ALL\r\n\r\n        if (foodItems && filterConditions) {\r\n            const filterData = filterFoodItems(foodItems, filterConditions, operator, preferredSourceId)\r\n            setFilterResult(filterData)\r\n            const {foodNames} = applicationContext.foodDataCorpus\r\n            const selectList = filterData.map((filterResult) => {\r\n                const foodName = getFoodItemName(filterResult.foodItem, foodNames, language)\r\n                const condition = applicationContext.foodDataCorpus.conditions.find(\r\n                    condition => condition.id === filterResult.foodItem.conditionId\r\n                )\r\n                const conditionName = condition && filterResult.foodItem.conditionId !== 100 ? `[${getName(condition, language)}]` : \"\"\r\n                return {\r\n                    value: filterResult.foodItem.id,\r\n                    label: `${foodName} ${conditionName}` ?? \"\"\r\n                }\r\n            })\r\n\r\n            if (selectList && selectList.length > 1) {\r\n                selectList.sort((obj1, obj2) => obj1.label.localeCompare(obj2.label))\r\n            }\r\n\r\n            setSelectList(selectList)\r\n            if (selectList.length > 0) {\r\n                setSelectedFilterResult(selectList[0])\r\n            } else {\r\n                setSelectedFilterResult(null)\r\n            }\r\n        }\r\n        if (filterConditions.length === 0) {\r\n            setSelectedFilterResult(null)\r\n        }\r\n    }, [applicationContext?.applicationData.nutrientFilter, calculationTypeAny])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onOpenHelpModal = () => {\r\n        setShowHelpModal(true)\r\n    }\r\n\r\n    const onOpenNutrientSelectorModal = () => {\r\n        setShowNutrientFilterModal(true)\r\n    }\r\n\r\n    const addCondition = (condition: NutrientCondition) => {\r\n        const filter = [...applicationContext.applicationData.nutrientFilter]\r\n        filter.push(condition)\r\n        applicationContext.setNutrientFilter(filter)\r\n        setShowNutrientFilterModal(false)\r\n    }\r\n\r\n    const editCondition = (editCondition: NutrientCondition) => {\r\n        const filter = [...applicationContext.applicationData.nutrientFilter].map(existingCondition => {\r\n            return existingCondition.nutrient.value !== editCondition.nutrient.value\r\n                ? existingCondition\r\n                : editCondition\r\n        })\r\n        applicationContext.setNutrientFilter(filter)\r\n        setEditingCondition(null)\r\n        setShowNutrientFilterModal(false)\r\n    }\r\n\r\n    const onEditCondition = (condition: NutrientCondition) => {\r\n        setEditingCondition(condition)\r\n        setShowNutrientFilterModal(true)\r\n    }\r\n\r\n    const onRemoveCondition = (condition: NutrientCondition) => {\r\n        const filter = [...applicationContext.applicationData.nutrientFilter].filter(c => c.nutrient.value !== condition.nutrient.value)\r\n        applicationContext.setNutrientFilter(filter)\r\n    }\r\n\r\n    const closeFilterSelectionModal = () => {\r\n        setEditingCondition(null) // Reset the Edit-state under all circumstances\r\n        setShowNutrientFilterModal(false)\r\n    }\r\n\r\n    const selectFoodItem = () => {\r\n        const result = filterResult.find(entry => entry.foodItem.id === selectedFilterResult?.value)\r\n\r\n        if (result) {\r\n            props.selectFoodItemFromFilterModal(result);\r\n        }\r\n        props.closeModal()\r\n    }\r\n\r\n    const handleSelectionClick = (selection: ReactSelectOption) => {\r\n        setSelectedFilterResult(selection)\r\n    }\r\n\r\n    const helpText = getHelpText(13, language)\r\n\r\n    const renderFilterListEntry = (condition: NutrientCondition) => {\r\n        const nutrient = condition.nutrient.value\r\n        const unit = getUnit(nutrient)\r\n\r\n        return (\r\n            <ListGroupItem key={`lg-${condition.nutrient.value}`}>\r\n                <div><b>{condition.nutrient.label}</b></div>\r\n                <div className={\"d-flex flex-row justify-content-between align-items-middle\"}>\r\n                    <div className={\"d-flex flex-row\"}>\r\n                        <div style={{marginRight: \"1ch\"}}><i>Min:</i></div>\r\n                        <div style={{marginRight: \"3ch\"}}><i>{condition.min} {unit}</i></div>\r\n                        <div style={{marginRight: \"1ch\"}}><i>Max:</i></div>\r\n                        <div style={{marginRight: \"3ch\"}}><i>{condition.max} {unit}</i></div>\r\n                    </div>\r\n                    <div>\r\n                        <Button onClick={() => onEditCondition(condition)}\r\n                                style={{marginRight: \"1ch\"}}\r\n                                className={\"btn btn-secondary\"}\r\n                                data-for={\"fa-btn-edit\"}\r\n                                data-tip={applicationStrings.tooltip_filter_edit[language]}>\r\n                            <FaEdit/>\r\n                            <ReactTooltip id={\"fa-btn-edit\"} globalEventOff=\"click\"/>\r\n                        </Button>\r\n                        <Button onClick={() => onRemoveCondition(condition)}\r\n                                className={\"btn btn-secondary\"}\r\n                                data-for={\"fa-btn-close\"}\r\n                                data-tip={applicationStrings.tooltip_filter_remove[language]}>\r\n                            <FaTrash/>\r\n                            <ReactTooltip id={\"fa-btn-close\"}/>\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </ListGroupItem>\r\n        )\r\n    }\r\n\r\n    const renderFilterList = () => {\r\n        return (\r\n            <div style={{height: \"50vh\", overflowY: \"auto\"}}>\r\n                {applicationContext.applicationData.nutrientFilter.length > 0\r\n                    ?\r\n                    (\r\n                        <ListGroup>\r\n                            {applicationContext.applicationData.nutrientFilter.map(condition => renderFilterListEntry(condition))}\r\n                        </ListGroup>\r\n                    ) :\r\n                    (\r\n                        <div>\r\n                            {applicationStrings.label_filterModal_note_addCondition[language]}\r\n                        </div>\r\n                    )\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderResultList = () => {\r\n        if (applicationContext.applicationData.nutrientFilter.length === 0) {\r\n            return <div/>\r\n        }\r\n\r\n        if (filterResult.length === 0) {\r\n            return <div>\r\n                {applicationStrings.label_filterModal_note_noData[language]}\r\n            </div>\r\n        }\r\n\r\n        const resultMessage = filterResult.length === 1\r\n            ? `${filterResult.length} ${applicationStrings.label_result[language]}`\r\n            : `${filterResult.length} ${applicationStrings.label_results[language]}`\r\n\r\n        return (\r\n            <div>\r\n                <div className={\"form-section\"}>\r\n                    <span className={'form-label'}>{applicationStrings.label_selection[language]}:</span>\r\n                    <Select options={selectList}\r\n                            value={selectedFilterResult ? selectedFilterResult : selectList[0]}\r\n                            onChange={handleSelectionClick}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    {resultMessage}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const radioButtonDisabled = applicationContext.applicationData.nutrientFilter.length <= 1\r\n\r\n    const renderLeftFooterPart = () => {\r\n        return (\r\n            <div>\r\n                <span style={{paddingRight: \"2ch\"}}>\r\n                    <Button className={\"btn btn-secondary\"} onClick={onOpenHelpModal}>\r\n                        <FaQuestionCircle/>\r\n                    </Button>\r\n                </span>\r\n                <span>\r\n                        <button type=\"button\"\r\n                                className=\"btn btn-primary\"\r\n                                onClick={onOpenNutrientSelectorModal}>\r\n                            {applicationStrings.label_filterModal_add[language]}\r\n                        </button>\r\n                    </span>\r\n                <span style={{paddingLeft: \"5ch\"}}>\r\n                        <Form.Label className={\"form-elements\"}>\r\n                            <b>{applicationStrings.button_mode[language]}:</b>\r\n                        </Form.Label>\r\n                        <Form.Check className=\"form-radiobutton mr-4\"\r\n                                    type=\"radio\"\r\n                                    inline={true}\r\n                                    label={applicationStrings.label_mode_all[language]}\r\n                                    data-for={\"rb-option-all\"}\r\n                                    data-tip={applicationStrings.tooltip_filter_option_all[language]}\r\n                                    disabled={radioButtonDisabled}\r\n                                    checked={!calculationTypeAny}\r\n                                    onChange={() => setCalculationTypeAny(false)}\r\n                        />\r\n                        <ReactTooltip id={\"rb-option-all\"} globalEventOff=\"click\"/>\r\n                        <Form.Check className=\"form-radiobutton form-horizontal-separation\"\r\n                                    type=\"radio\"\r\n                                    inline={true}\r\n                                    label={applicationStrings.label_mode_any[language]}\r\n                                    data-for={\"rb-option-any\"}\r\n                                    data-tip={applicationStrings.tooltip_filter_option_any[language]}\r\n                                    disabled={radioButtonDisabled}\r\n                                    checked={calculationTypeAny}\r\n                                    onChange={() => setCalculationTypeAny(true)}\r\n                        />\r\n                        <ReactTooltip id={\"rb-option-any\"} globalEventOff=\"click\"/>\r\n                    </span>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderRightFooterPart = () => {\r\n        return (\r\n            <div className={\"d-flex flex-row justify-content-end\"}>\r\n                <div style={{paddingRight: \"2ch\"}}>\r\n                    <button type=\"button\"\r\n                            className=\"btn btn-secondary\"\r\n                            onClick={props.closeModal}>\r\n                        {applicationStrings.button_close[language]}\r\n                    </button>\r\n                </div>\r\n                <div>\r\n                    <button type=\"button\"\r\n                            className=\"btn btn-primary\"\r\n                            disabled={selectedFilterResult === null}\r\n                            onClick={selectFoodItem}>\r\n                        {applicationStrings.button_select[language]}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Modal className={\"filter-modal\"}\r\n               size={'xl'}\r\n               show={true}\r\n               backdrop=\"static\">\r\n            <Modal.Header>\r\n                <h5 className=\"modal-title\">{applicationStrings.label_filterModal_title[language]}</h5>\r\n                <button type=\"button\"\r\n                        className=\"btn-close\"\r\n                        data-dismiss=\"modal\"\r\n                        aria-label=\"Close\"\r\n                        onClick={props.closeModal}>\r\n                </button>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                {showHelpModal && helpText !== null &&\r\n                <HelpModal helpText={helpText}\r\n                           style={{top: \"12vh\"}}\r\n                           size={\"lg\"}\r\n                           closeHelpModal={() => setShowHelpModal(false)}/>\r\n                }\r\n                {showNutrientFilterModal && editingCondition === null &&\r\n                <NutrientFilterSelectionModal closeModal={closeFilterSelectionModal}\r\n                                              addCondition={addCondition}\r\n                />\r\n                }\r\n                {showNutrientFilterModal && editingCondition !== null &&\r\n                <NutrientFilterSelectionModal closeModal={closeFilterSelectionModal}\r\n                                              existingCondition={editingCondition}\r\n                                              editCondition={editCondition}\r\n                />\r\n                }\r\n                <div className={\"container row\"}>\r\n                    <div className={\"col-6\"}>\r\n                        {renderFilterList()}\r\n                    </div>\r\n                    <div className={\"col-6\"}>\r\n                        {renderResultList()}\r\n                    </div>\r\n                </div>\r\n\r\n            </Modal.Body>\r\n            <Modal.Footer className={\"d-flex flex-row justify-content-between\"}>\r\n                <div>\r\n                    {renderLeftFooterPart()}\r\n                </div>\r\n                <div>\r\n                    {renderRightFooterPart()}\r\n                </div>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}","import React, {useContext, useState} from 'react'\r\n\r\nimport {Button, Modal} from 'react-bootstrap'\r\n\r\nimport {NotificationManager} from 'react-notifications'\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\nimport FoodSelector from \"./FoodSelector\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport SelectedFoodItem, {FilteredFoodItem} from \"../../types/livedata/SelectedFoodItem\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {CompositeFoodList} from \"./CompositeFoodList\";\r\nimport {initialFoodClassId, maximalPortionSize} from \"../../config/ApplicationSetting\";\r\nimport combineFoodItems from \"../../service/calculation/FoodDataAggregationService\";\r\nimport {FaQuestionCircle, FaList, FaFilter} from \"react-icons/fa\";\r\nimport {HelpModal} from \"../HelpModal\";\r\nimport {getHelpText} from \"../../service/HelpService\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport {MODE_EDIT, SOURCE_FNDDS} from \"../../config/Constants\";\r\nimport {CategoryTreeModal} from \"./CategoryTreeModal\";\r\nimport {FilterModal} from \"./filter/FilterModal\";\r\nimport {makeSelectedFoodItemObject} from \"../../service/nutrientdata/FoodItemsService\";\r\nimport ReactTooltip from \"react-tooltip\";\r\n\r\nexport interface FoodSelectorModalProps {\r\n    onHide: () => void,\r\n    selectedFoodItemCallback: (selectedFoodItem: SelectedFoodItem) => void\r\n    compositeSelector: boolean\r\n    selectedFoodItem?: SelectedFoodItem,\r\n    mode?: string\r\n}\r\n\r\n\r\nconst FoodSelectorModal: React.FC<FoodSelectorModalProps> = (props: FoodSelectorModalProps) => {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const initialFoodItem = props.selectedFoodItem ? props.selectedFoodItem : null\r\n    const initialCompositeList = props.selectedFoodItem && props.selectedFoodItem.compositeSubElements\r\n        ? props.selectedFoodItem.compositeSubElements\r\n        : []\r\n\r\n    const [selectedFoodItem, setSelectedFoodItem] = useState<SelectedFoodItem | null>(initialFoodItem)\r\n    const [compositeTitle, setCompositeTitle] = useState<string | null>(null)\r\n    const [compositeList, setCompositeList] = useState<Array<SelectedFoodItem>>(initialCompositeList ?? [])\r\n    const [showHelpModal, setShowHelpModal] = useState<boolean>(false)\r\n    const [showCategoryTreeModal, setShowCategoryTreeModal] = useState<boolean>(false)\r\n    const [showFilterModal, setShowFilterModal] = useState<boolean>(false)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const {foodItems, foodClasses} = applicationContext.foodDataCorpus\r\n\r\n    const updateSelectedFoodItem = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem(selectedFoodItem)\r\n    }\r\n\r\n    const updateCompositeTitle = (title: string): void => {\r\n        setCompositeTitle(title)\r\n    }\r\n\r\n    const addCompositeElement = () => {\r\n        if (selectedFoodItem !== null) {\r\n            if (selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n                NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n                return;\r\n            }\r\n\r\n            const newList: Array<SelectedFoodItem> = [...compositeList]\r\n            newList.push(selectedFoodItem)\r\n            setCompositeList(newList)\r\n        }\r\n    }\r\n\r\n    const deleteCompositeElement = (index: number) => {\r\n        const newList: Array<SelectedFoodItem> = [...compositeList]\r\n        newList.splice(index, 1)\r\n        setCompositeList(newList)\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (props.compositeSelector) {\r\n            onSubmitComposite()\r\n        } else {\r\n            onSubmitSingleItem()\r\n        }\r\n    }\r\n\r\n    const onSubmitSingleItem = () => {\r\n        if (props.mode === MODE_EDIT) {\r\n            if (selectedFoodItem) {\r\n                if (selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n                    NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n                    return\r\n                }\r\n                props.selectedFoodItemCallback(selectedFoodItem)\r\n                props.onHide()\r\n            }\r\n            return;\r\n        }\r\n\r\n        const foodItemId = selectedFoodItem ? selectedFoodItem.foodItem.id : null\r\n        if (foodItemId) {\r\n            const existingItemInList = applicationContext?.applicationData.foodDataPanel.selectedFoodItems.find(foodItem => foodItem.id === foodItemId)\r\n\r\n            if (existingItemInList) {\r\n                NotificationManager.error(applicationStrings.message_error_existing_element[language])\r\n                return\r\n            }\r\n        }\r\n\r\n        if (!selectedFoodItem || !selectedFoodItem.foodItem || !selectedFoodItem.foodClass || !selectedFoodItem.portion) {\r\n            NotificationManager.error(applicationStrings.message_error_incomplete_form[language])\r\n        } else if (selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n            NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n        } else {\r\n            props.selectedFoodItemCallback(selectedFoodItem)\r\n            props.onHide()\r\n        }\r\n    }\r\n\r\n    const onSubmitComposite = () => {\r\n        let aggregatedSelectedFoodItem = combineFoodItems(compositeList)\r\n\r\n        if (compositeTitle !== null && compositeTitle.trim().length > 0) {\r\n            aggregatedSelectedFoodItem.title = compositeTitle.length < 24\r\n                ? compositeTitle.trim()\r\n                : compositeTitle.substring(0, 21).trim() + \"...\"\r\n        } else {\r\n            aggregatedSelectedFoodItem.title = applicationStrings.input_compositelist_title[language]\r\n        }\r\n\r\n        if (!aggregatedSelectedFoodItem) {\r\n            return\r\n        }\r\n\r\n        aggregatedSelectedFoodItem = {...aggregatedSelectedFoodItem, aggregated: true}\r\n        props.selectedFoodItemCallback(aggregatedSelectedFoodItem)\r\n        props.onHide()\r\n    }\r\n\r\n    const updateFoodSelectorConfig = (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => {\r\n        if (applicationContext) {\r\n            const currentSelectorSetting = applicationContext.applicationData.foodSelector\r\n            if (selectedCategory !== currentSelectorSetting.selectedCategory || supplementData !== currentSelectorSetting.sourceSupplement\r\n                || combineData !== currentSelectorSetting.sourceCombine) {\r\n                applicationContext.setFoodSelectorConfig(selectedCategory, supplementData, combineData)\r\n            }\r\n        }\r\n    }\r\n\r\n    const onCancel = () => {\r\n        props.onHide()\r\n    }\r\n\r\n    const onOpenHelpModal = () => {\r\n        setShowHelpModal(true)\r\n    }\r\n\r\n    const onOpenCategoryTreeModal = () => {\r\n        setShowCategoryTreeModal(true)\r\n    }\r\n\r\n    const onOpenFilterModal = () => {\r\n        setShowFilterModal(true)\r\n    }\r\n\r\n    const title = props.compositeSelector\r\n        ? applicationStrings.label_foodselector_composite[language]\r\n        : applicationStrings.label_foodselector[language]\r\n    const helpText = props.compositeSelector ? getHelpText(10, language) : getHelpText(9, language)\r\n\r\n    const selectFoodItemFromCategoryTree = (foodItemId) => {\r\n        const foodItemToSelect = foodItems.find(foodItem => foodItem.id === foodItemId)\r\n\r\n        if (foodItemToSelect && foodItemToSelect.portionData && foodItemToSelect.portionData.length > 0) {\r\n            let selectedSource = 0;  // SR Legacy = Default source\r\n            if (applicationContext.applicationData.preferredSource === SOURCE_FNDDS && foodItemToSelect.fnddsId) {\r\n                selectedSource = 1;\r\n            }\r\n\r\n            const foodClass = foodClasses.find(foodClass => foodClass.id === foodItemToSelect.foodClass)\r\n\r\n            const selectedObject: SelectedFoodItem = {\r\n                foodClass: foodClass,\r\n                foodItem: foodItemToSelect,\r\n                portion: foodItemToSelect.portionData[0],\r\n                selectedSource,\r\n                supplementData: applicationContext.applicationData.foodSelector.sourceSupplement,\r\n                combineData: applicationContext.applicationData.foodSelector.sourceCombine,\r\n            }\r\n\r\n            setSelectedFoodItem(selectedObject)\r\n        }\r\n    }\r\n\r\n    const selectFoodItemFromFilterModal = (selectedFilterResult: FilteredFoodItem): void => {\r\n        console.log('STUB: I will set', selectedFilterResult)\r\n\r\n        const {foodItem} = selectedFilterResult\r\n        const foodClass = applicationContext.foodDataCorpus.foodClasses.find(foodClass => foodClass.id === foodItem.foodClass)\r\n        const portionData = foodItem.portionData ? foodItem.portionData[0] : undefined\r\n\r\n        const selectedFoodItem = makeSelectedFoodItemObject(foodItem, foodClass, portionData, 0, false, false,\r\n            selectedFilterResult.source)\r\n\r\n        setSelectedFoodItem(selectedFoodItem)\r\n    }\r\n\r\n    const category = applicationContext.applicationData.foodSelector.selectedCategory\r\n        ? applicationContext.applicationData.foodSelector.selectedCategory.value : 0\r\n\r\n    const canAccessCategoryTree = !props.compositeSelector && props.mode !== MODE_EDIT\r\n    const size = props.compositeSelector ? \"xl\" : \"lg\"\r\n\r\n    return (\r\n        <Modal size={size} show={true} onHide={props.onHide} backdrop=\"static\">\r\n            <Modal.Header>\r\n                <b>{title}</b>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                {showHelpModal && helpText !== null &&\r\n                <HelpModal helpText={helpText}\r\n                           size={\"lg\"}\r\n                           closeHelpModal={() => setShowHelpModal(false)}/>\r\n                }\r\n                {showCategoryTreeModal &&\r\n                <CategoryTreeModal selectedCategory={category}\r\n                                   closeModal={() => setShowCategoryTreeModal(false)}\r\n                                   selectFoodItemFromCategoryTree={selectFoodItemFromCategoryTree}\r\n                />\r\n                }\r\n                {showFilterModal &&\r\n                <FilterModal closeModal={() => setShowFilterModal(false)}\r\n                             selectFoodItemFromFilterModal={selectFoodItemFromFilterModal}/>\r\n                }\r\n                <div>\r\n                    {!props.compositeSelector ?\r\n                        <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                      defaultFoodClass={initialFoodClassId}\r\n                                      compositeSelector={false}\r\n                                      selectedFoodItem={selectedFoodItem}\r\n                                      updateFoodSelectorConfig={updateFoodSelectorConfig}\r\n                                      mode={props.mode}\r\n                        />\r\n                        :\r\n                        <div className={\"container\"}>\r\n                            <div className={\"row\"}>\r\n                                <div className={\"col-6\"}>\r\n                                    <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                                  updateFoodSelectorConfig={updateFoodSelectorConfig}\r\n                                                  defaultFoodClass={initialFoodClassId}\r\n                                                  updateCompositeTitle={updateCompositeTitle}\r\n                                                  compositeSelector={true}\r\n                                    />\r\n                                </div>\r\n                                <div className={\"col-6\"}>\r\n                                    <CompositeFoodList selectedFoodItems={compositeList}\r\n                                                       deleteItem={deleteCompositeElement}/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer className={\"justify-content-between\"}>\r\n                <div>\r\n                    <span style={{paddingRight: \"2ch\"}}>\r\n                        <Button className={\"btn btn-secondary\"} onClick={onOpenHelpModal}>\r\n                            <FaQuestionCircle/>\r\n                        </Button>\r\n                    </span>\r\n                    {canAccessCategoryTree &&\r\n                    <span style={{paddingRight: \"2ch\"}}>\r\n                        <Button className={\"btn btn-secondary\"}\r\n                                onClick={onOpenCategoryTreeModal}\r\n                                data-for={\"fa-btn-categorytree\"}\r\n                                data-tip={applicationStrings.tooltip_category_tree[language]}>\r\n                            <FaList/>\r\n                               <ReactTooltip id={\"fa-btn-categorytree\"}/>\r\n                        </Button>\r\n                    </span>\r\n                    }\r\n                    {canAccessCategoryTree &&\r\n                    <Button className={\"btn btn-secondary\"}\r\n                            onClick={onOpenFilterModal}\r\n                            data-for={\"fa-btn-filter\"}\r\n                            data-tip={applicationStrings.tooltip_filter[language]}>\r\n                        <FaFilter/>\r\n                        <ReactTooltip id={\"fa-btn-filter\"}/>\r\n                    </Button>\r\n                    }\r\n                </div>\r\n                <div className={\"d-flex d-row justify-content-end\"}>\r\n                    <Button className={\"btn-secondary form-button\"} onClick={onCancel}>\r\n                        {applicationStrings.button_cancel[language]}\r\n                    </Button>\r\n                    {props.compositeSelector ?\r\n                        <Button className={\"form-button\"}\r\n                                onClick={onSubmit}\r\n                                disabled={!compositeList || compositeList.length < 1}>\r\n                            {applicationStrings.button_show[language]}\r\n                        </Button>\r\n                        :\r\n                        <Button className={\"form-button\"} onClick={onSubmit}>\r\n                            {applicationStrings.button_select[language]}\r\n                        </Button>\r\n                    }\r\n\r\n                    {props.compositeSelector &&\r\n                    <Button className={\"form-button\"} onClick={addCompositeElement}>\r\n                        {applicationStrings.button_add[language]}\r\n                    </Button>\r\n                    }\r\n                </div>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n\r\n}\r\n\r\nexport default FoodSelectorModal","import React from \"react\";\r\n\r\nimport {confirmable, createConfirmation} from \"react-confirm\";\r\nimport {Button, Modal} from \"react-bootstrap\";\r\n\r\ninterface ConfirmationDialogProps {\r\n    okLabel: string,\r\n    cancelLabel: string,\r\n    title: string,\r\n    confirmation: string,\r\n    show: boolean,\r\n    proceed: (proceed: boolean) => void, // called when ok button is clicked.\r\n    enableEscape: boolean,\r\n    small?: boolean\r\n}\r\n\r\nclass ConfirmationDialog extends React.Component<ConfirmationDialogProps> {\r\n\r\n    render() {\r\n        const {\r\n            okLabel,\r\n            cancelLabel,\r\n            title,\r\n            confirmation,\r\n            show,\r\n            proceed,\r\n            enableEscape = true,\r\n        } = this.props;\r\n\r\n        return (\r\n            <Modal\r\n                show={show}\r\n                onHide={() => proceed(false)}\r\n                backdrop={enableEscape ? true : \"static\"}\r\n                keyboard={enableEscape}\r\n                fullscreen={true}>\r\n                <Modal.Header>\r\n                    <Modal.Title>{title}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>{confirmation}</Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button style={{minWidth: \"80px\"}}\r\n                            onClick={() => proceed(false)}>\r\n                        {cancelLabel}\r\n                    </Button>\r\n                    <Button\r\n                        style={{minWidth: \"80px\"}}\r\n                        className=\"primary button-l\"\r\n                        onClick={() => proceed(true)}>\r\n                        {okLabel}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function confirmAction(\r\n    confirmation,\r\n    okLabel,\r\n    cancelLabel,\r\n    options = {},\r\n    small?\r\n) {\r\n    return createConfirmation(confirmable(ConfirmationDialog))({\r\n        confirmation,\r\n        okLabel,\r\n        cancelLabel,\r\n        ...options,\r\n        small\r\n    });\r\n}\r\n","import React, {useContext, useEffect, useRef, useState} from 'react'\r\nimport {Button, Form, Modal} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {customSelectStyles} from \"../../config/UI_Config\";\r\nimport {getElementsOfRankingGroup, getNutrientGroups, getValueOfFoodItem} from \"../../service/RankingService\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport Select from 'react-select';\r\nimport {\r\n    HIGHLIGHTING_MIN_MAX,\r\n    HIGHLIGHTING_NONE, HIGHLIGHTING_SHARE_ALL, HIGHLIGHTING_SHARE_SELECTION, NUTRIENT_VITAMIN_INDEX,\r\n} from \"../../config/Constants\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {getFoodItemName} from \"../../service/nutrientdata/FoodItemsService\";\r\nimport {calculatePortionData} from \"../../service/TableService\";\r\nimport {autoRound} from \"../../service/calculation/MathService\";\r\nimport {getUnit} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {getStatisticalNutrientInformation} from \"../../service/nutrientdata/NutrientStatisticsService\";\r\nimport {shortenName} from \"../../service/nutrientdata/NameTypeService\";\r\nimport getName from \"../../service/LanguageService\";\r\nimport {FaQuestionCircle} from \"react-icons/fa\";\r\nimport {HelpModal} from \"../HelpModal\";\r\nimport {getHelpText} from \"../../service/HelpService\";\r\n\r\nconst WEIGHT_PORTION = 0\r\nconst WEIGHT_100 = 1\r\n\r\nconst TABLE_CELL_PADDING = \"0.75ch\"\r\n\r\nconst COLOR_MIN = \"rgb(255, 200, 200)\"\r\nconst COLOR_MAX = \"rgb(255, 0, 0)\"\r\nconst COLOR_EMPTY = \"#fff\"\r\n\r\n/**\r\n * Calculates the color linearly between the minimum and maximum value. This function is used if only a few\r\n * items are compared with each other (i.e. the mode 'compare to tabs in data panel'), since otherwise outliers\r\n * could totally distort the color scheme (like values 1, 1, 2, 5, 40).\r\n */\r\nconst getColorCodeForMinMaxRange = (min: number | null, max: number | null, value: number) => {\r\n    if (min === null || max === null || !value) {\r\n        return COLOR_EMPTY\r\n    }\r\n\r\n    const rgbStep = (max - min) / 256\r\n    let redValue = 255 - ((value - min) / rgbStep)\r\n    let greenValue = 127 + (redValue / 2)\r\n\r\n    if (redValue < 0) {\r\n        redValue = 0\r\n    }\r\n    if (greenValue > 255) {\r\n        greenValue = 255\r\n    }\r\n    return `rgb(${redValue}, ${greenValue}, 255)`;\r\n}\r\n\r\n/**\r\n * Calculates the color linearly based on the sorted list of all values. In this case, the higher the position\r\n * of the value is in the sorted list, the darker the color would be. This approach is rather stable against\r\n * outliers and deviating medians or averages. It is used to calculate the colors in the mode of comparing the\r\n * value to the whole Food Compare database, where we often have a min of 0 and a max of 100, but a median like 2.\r\n */\r\nconst getColorCodeForFoodCompareRange = (sortedValues: Array<number>, value: number) => {\r\n    if (sortedValues.length <= 2 || !value) {\r\n        return COLOR_EMPTY\r\n    }\r\n\r\n    const index = sortedValues.findIndex(val => val === value);\r\n    const position = index / sortedValues.length\r\n\r\n    let redValue = 255 - (position * 255);\r\n    let greenValue = 127 + (redValue / 2);\r\n    if (redValue < 0) {\r\n        redValue = 0\r\n    }\r\n    if (greenValue > 255) {\r\n        greenValue = 255\r\n    }\r\n\r\n    return `rgb(${redValue}, ${greenValue}, 255)`;\r\n}\r\n\r\n\r\nexport const OverallView = (props) => {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const nutrientGroups = getNutrientGroups(language)\r\n    let highlighters: Array<ReactSelectOption> = [\r\n        {value: HIGHLIGHTING_NONE, label: applicationStrings.label_highlighting_none[language]},\r\n        {value: HIGHLIGHTING_MIN_MAX, label: applicationStrings.label_highlighting_minmax[language]},\r\n    ]\r\n\r\n    const weightReferences = [\r\n        {value: WEIGHT_PORTION, label: applicationStrings.label_per_portion[language]},\r\n        {value: WEIGHT_100, label: applicationStrings.label_per_100g[language]}\r\n    ]\r\n\r\n    const [selectedGroup, setSelectedGroup] = useState<ReactSelectOption>(nutrientGroups[0])\r\n    const [selectedHighlighter, setSelectedHighlighter] = useState<ReactSelectOption | null>(null)\r\n    const [selectedWeightReference, setSelectedWeightReference] = useState<ReactSelectOption>(weightReferences[0])\r\n\r\n    const [showHelpModal, setShowHelpModal] = useState<boolean>(false)\r\n    const [showToolTips, setShowToolTips] = useState<boolean>(true)\r\n\r\n    // Canvas for drawing legend\r\n    const canvas = useRef<HTMLCanvasElement | null>(null);\r\n\r\n    // Draw color highlighting legend\r\n    useEffect(() => {\r\n        const canvasElement = canvas.current;\r\n        if (canvasElement) {\r\n            canvasElement.width = canvasElement.clientWidth;\r\n            canvasElement.height = canvasElement.clientHeight;\r\n\r\n            const startPointX = 50\r\n            const ctx = canvasElement.getContext(\"2d\");\r\n            if (ctx) {\r\n                const grd = ctx.createLinearGradient(0, 0, 200, 0);\r\n                grd.addColorStop(0, getColorCodeForMinMaxRange(0, 255, 0));\r\n                grd.addColorStop(1, getColorCodeForMinMaxRange(0, 255, 255));\r\n                ctx.fillStyle = grd;\r\n                ctx.fillRect(50, 35, 255, 30);\r\n                ctx.strokeStyle = \"#000\";\r\n                ctx.strokeText(\"Min\", startPointX - 5, 80);\r\n                ctx.strokeText(\"Max\", startPointX + 240, 80);\r\n                if (selectedHighlighter && selectedHighlighter.value === HIGHLIGHTING_SHARE_SELECTION) {\r\n                    const offset = language === \"de\" ? 115 : 110\r\n                    ctx.strokeText(applicationStrings.label_juxtaposition_table_avg[language], startPointX + offset, 80);\r\n                } else {\r\n                    ctx.strokeText(applicationStrings.label_juxtaposition_table_median[language], startPointX + 115, 80);\r\n                }\r\n            }\r\n        }\r\n    }, [selectedHighlighter]);\r\n\r\n    useEffect(() => {\r\n        if (selectedHighlighter === null) {\r\n            // @ts-ignore\r\n            if (applicationContext?.applicationData.foodDataPanel.selectedFoodItems.length > 3) {\r\n                setSelectedHighlighter(highlighters[HIGHLIGHTING_SHARE_SELECTION])\r\n            } else {\r\n                setSelectedHighlighter(highlighters[HIGHLIGHTING_MIN_MAX])\r\n            }\r\n        }\r\n    }, [])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const foodItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems\r\n\r\n\r\n    const buildHighlightSelectOptions = () => {\r\n        // Range coloring is only reasonable for at least 3 selected foods\r\n        if (foodItems.length > 2) {\r\n            highlighters.push({\r\n                value: HIGHLIGHTING_SHARE_SELECTION,\r\n                label: applicationStrings.label_highlighting_share_selection[language]\r\n            })\r\n        }\r\n\r\n        // Range coloring compared to FC database is only possible if a 100 g basis is selected\r\n        if (selectedWeightReference.value === WEIGHT_100) {\r\n            highlighters.push({\r\n                value: HIGHLIGHTING_SHARE_ALL,\r\n                label: applicationStrings.label_highlighting_share_database[language]\r\n            })\r\n        } else {\r\n            highlighters = highlighters.filter(highlighter => highlighter.value !== HIGHLIGHTING_SHARE_ALL)\r\n            if (selectedHighlighter && selectedHighlighter.value === HIGHLIGHTING_SHARE_ALL) {\r\n                const altOption = highlighters.find(highlighter => highlighter.value === HIGHLIGHTING_SHARE_SELECTION)\r\n                setSelectedHighlighter(altOption!!)\r\n            }\r\n        }\r\n    }\r\n\r\n    buildHighlightSelectOptions()\r\n\r\n    const handleGroupChange = (selectedOption) => {\r\n        setSelectedGroup(selectedOption)\r\n    }\r\n\r\n    const handleHighlighterChange = (selectedOption) => {\r\n        setSelectedHighlighter(selectedOption)\r\n    }\r\n\r\n    const handleWeightReferenceChange = (selectedOption) => {\r\n        setSelectedWeightReference(selectedOption)\r\n    }\r\n\r\n    const makeFormHeader = () => {\r\n        return <div className={\"d-flex flex-row justify-content-between\"}>\r\n            <div style={{width: \"25%\"}}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_group[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={nutrientGroups}\r\n                        value={selectedGroup}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleGroupChange}\r\n                />\r\n            </div>\r\n            <div style={{width: \"15%\"}}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_reference[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={weightReferences}\r\n                        value={selectedWeightReference}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleWeightReferenceChange}\r\n                />\r\n            </div>\r\n            <div style={{width: \"55%\"}}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_highlighting[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={highlighters}\r\n                        value={selectedHighlighter}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleHighlighterChange}\r\n                />\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    const makeTableHead = () => {\r\n        const thStyle = {padding: TABLE_CELL_PADDING}\r\n\r\n        return (\r\n            <thead>\r\n            <tr>\r\n                <th/>\r\n                <th/>\r\n                {\r\n                    foodItems.map(foodItem => {\r\n                        const foodName = foodItem.aggregated\r\n                            ? foodItem.title\r\n                            : getFoodItemName(foodItem.foodItem, applicationContext.foodDataCorpus.foodNames, language)\r\n                        const shortenedFoodName = shortenName(foodName, 15)\r\n                        const portion = selectedWeightReference.value === WEIGHT_100\r\n                            ? \"100 g\"\r\n                            : `${foodItem.portion.amount} g`\r\n                        const conditionId = foodItem.foodItem.conditionId\r\n                        const condition = applicationContext.foodDataCorpus.conditions.find(\r\n                            condition => condition.id === conditionId\r\n                        )\r\n                        const conditionName = condition ? getName(condition, language) : null;\r\n                        return (\r\n                            <th key={`tab-head-${foodItem.id}`}\r\n                                style={{padding: TABLE_CELL_PADDING}}\r\n                                className={\"toolTipTableCell\"}>\r\n                                {shortenedFoodName}\r\n                                <span style={{fontSize: \"0.9rem\", fontWeight: \"normal\"}}>\r\n                                    <br/>\r\n                                    <span style={{fontStyle: \"italic\"}}>\r\n                                        {conditionName}\r\n                                    </span>\r\n                                    <br/>\r\n                                    {portion}\r\n                                    </span>\r\n                                {showToolTips &&\r\n                                <span className={\"toolTipCellContentHeader\"}>\r\n                                    {foodName}\r\n                                    <br/>\r\n                                    {conditionName}\r\n                                    <br/>\r\n                                    {portion}\r\n                                    </span>\r\n                                }\r\n                            </th>\r\n                        )\r\n                    })\r\n                }\r\n                <th style={thStyle}/>\r\n                <th style={thStyle}>{applicationStrings.label_overallview_min_short[language]}</th>\r\n                <th style={thStyle}>{applicationStrings.label_overallview_max_short[language]}</th>\r\n                <th style={thStyle}>{applicationStrings.label_overallview_avg_short[language]}</th>\r\n                <th style={thStyle}>{applicationStrings.label_overallview_sum[language]}</th>\r\n            </tr>\r\n            </thead>\r\n        )\r\n    }\r\n\r\n    const makeTableBody = () => {\r\n        const elements = getElementsOfRankingGroup(selectedGroup.value, language)\r\n        if (!elements) {\r\n            return <tbody/>\r\n        }\r\n\r\n        const aggregatedColumnStyle = {\r\n            minWidth: \"3vw\",\r\n            background: \"#ffe6e6\",\r\n            padding: TABLE_CELL_PADDING\r\n        }\r\n\r\n        return (\r\n            <tbody>\r\n            {\r\n                elements.map(element => {\r\n                    let min: number | null = null;\r\n                    let max: number | null = null;\r\n                    let sum: number | null = null;\r\n\r\n                    const foodItemValues = foodItems.map(foodItem => {\r\n                        let value = getValueOfFoodItem(foodItem.foodItem, element.value, foodItem.selectedSource)\r\n                        const portion = foodItem.portion.amount\r\n                        if (selectedWeightReference.value === WEIGHT_PORTION) {\r\n                            value = calculatePortionData(value, portion)\r\n                        }\r\n\r\n                        if (value !== null) {\r\n                            if (min === null || value < min) {\r\n                                min = value\r\n                            }\r\n                            if (max === null || value > max) {\r\n                                max = value\r\n                            }\r\n                            if (sum === null) {\r\n                                sum = value\r\n                            } else {\r\n                                sum += value\r\n                            }\r\n                        }\r\n                        return value\r\n                    })\r\n\r\n                    const avg = sum\r\n                        ? sum / foodItemValues.length\r\n                        : null\r\n\r\n                    const nutrientStatData = getStatisticalNutrientInformation(\r\n                        element.value,\r\n                        applicationContext.foodDataCorpus.foodItems,\r\n                        applicationContext.applicationData.preferredSource\r\n                    )\r\n\r\n                    const getCellColor = (value) => {\r\n                        let bgColor = COLOR_EMPTY\r\n\r\n                        const colorSelection = selectedHighlighter ? selectedHighlighter.value : HIGHLIGHTING_NONE\r\n\r\n                        if (colorSelection == HIGHLIGHTING_MIN_MAX) {\r\n                            if (value === min) {\r\n                                bgColor = COLOR_MIN\r\n                            } else if (value === max) {\r\n                                bgColor = COLOR_MAX\r\n                            }\r\n                        } else if (colorSelection == HIGHLIGHTING_SHARE_SELECTION) {\r\n                            if (max === null || min === null || value === null) {\r\n                                bgColor = COLOR_EMPTY\r\n                            } else {\r\n                                bgColor = getColorCodeForMinMaxRange(min, max, value)\r\n                            }\r\n                        } else if (colorSelection == HIGHLIGHTING_SHARE_ALL) {\r\n                            if (value === null) {\r\n                                bgColor = COLOR_EMPTY\r\n                            } else {\r\n                                if (nutrientStatData.allValuesSorted.length > 2) {\r\n                                    bgColor = getColorCodeForFoodCompareRange(nutrientStatData.allValuesSorted, value)\r\n                                }\r\n                            }\r\n                        }\r\n                        return bgColor\r\n                    }\r\n\r\n                    let nutrientName = element.label\r\n\r\n                    // Remove the scientific name from the vitamin labels\r\n                    if (selectedGroup.value === NUTRIENT_VITAMIN_INDEX && nutrientName.includes(\"(\")) {\r\n                        nutrientName = nutrientName.substring(0, nutrientName.indexOf(\"(\") - 1).trim()\r\n                    }\r\n\r\n                    const unit = getUnit(element.value);\r\n\r\n                    const makeToolTipLine = (value) => {\r\n                        return <span><b>{nutrientName}: </b>{value} {unit}</span>\r\n                    }\r\n\r\n                    const makeAggegrationCell = (value) => {\r\n                        return <td style={aggregatedColumnStyle}\r\n                                   className={\"toolTipTableCell\"}>\r\n                            {value !== null ? autoRound(value) : \"\"}\r\n                            {showToolTips &&\r\n                            <span className={\"toolTipCellContentTable\"} style={{left: \"-14.5vw\"}}>\r\n                                {makeToolTipLine(\r\n                                    value !== null ? autoRound(value) : applicationStrings.label_na[language]\r\n                                )}\r\n                            </span>\r\n                            }\r\n                        </td>\r\n                    }\r\n\r\n                    return <tr key={`tab-cont-tr-${element.value}`}>\r\n                        <td style={{minWidth: \"8vw\", padding: TABLE_CELL_PADDING}}>{nutrientName}</td>\r\n                        <td style={{minWidth: \"3.5vw\", padding: TABLE_CELL_PADDING}}>{unit}</td>\r\n                        {foodItemValues.map((value, index) => {\r\n                            const tdStyle = {\r\n                                minWidth: \"8vw\",\r\n                                padding: TABLE_CELL_PADDING,\r\n                                background: getCellColor(value)\r\n                            }\r\n                            const valueTable = value !== null ? autoRound(value) : \"\"\r\n                            const valueToolTip = value !== null ? valueTable : applicationStrings.label_na[language]\r\n                            return <td className={\"toolTipTableCell\"}\r\n                                       key={`tab-cont-${element.value}-${index}`}\r\n                                       style={tdStyle}>\r\n                                {valueTable}\r\n                                {showToolTips &&\r\n                                <span className={\"toolTipCellContentTable\"}\r\n                                      style={{top: selectedWeightReference.value === WEIGHT_100 ? \"-8vh\" : \"-2.5vh\"}}>\r\n                                    {makeToolTipLine(valueToolTip)}\r\n                                    {selectedWeightReference.value === WEIGHT_100 &&\r\n                                    <span>\r\n                                        <hr/>\r\n                                        {applicationStrings.label_overallview_compared[language]}:\r\n                                        <br/>\r\n                                        <span className={\"tooltipKeyWord\"}>\r\n                                            {applicationStrings.label_overallview_min[language]}:\r\n                                        </span>\r\n                                        {autoRound(nutrientStatData.minimumAmount)} {unit}\r\n                                        <br/>\r\n                                        <span className={\"tooltipKeyWord\"}>\r\n                                            {applicationStrings.label_overallview_max[language]}:\r\n                                        </span>\r\n                                        {autoRound(nutrientStatData.maximumAmount)} {unit}\r\n                                        <br/>\r\n                                        <span className={\"tooltipKeyWord\"}>\r\n                                            {applicationStrings.label_overallview_avg[language]}:\r\n                                        </span>\r\n                                        {autoRound(nutrientStatData.averageAmount)} {unit}\r\n                                        <span className={\"tooltipKeyWord\"}>\r\n                                            {applicationStrings.label_juxtaposition_table_median[language]}:\r\n                                        </span>\r\n                                        {autoRound(nutrientStatData.median)} {unit}\r\n                                    </span>\r\n                                    }\r\n                                </span>\r\n                                }\r\n                            </td>\r\n                        })\r\n                        }\r\n                        <td/>\r\n                        {makeAggegrationCell(min)}\r\n                        {makeAggegrationCell(max)}\r\n                        {makeAggegrationCell(avg)}\r\n                        {makeAggegrationCell(sum)}\r\n                    </tr>\r\n                })\r\n            }\r\n            </tbody>\r\n        )\r\n    }\r\n\r\n    const makeTable = () => {\r\n        return (\r\n            <div className={\"overallview-table\"}>\r\n                <table>\r\n                    {makeTableHead()}\r\n                    {makeTableBody()}\r\n                </table>\r\n                {makeColorLegend()}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const onOpenHelpModal = () => {\r\n        setShowHelpModal(true)\r\n    }\r\n\r\n    const helpText = getHelpText(12, language)\r\n\r\n    const selection = selectedHighlighter ? selectedHighlighter.value : HIGHLIGHTING_NONE\r\n    const makeColorLegend = () => {\r\n        const showCanvas = canvas && (selection === HIGHLIGHTING_SHARE_SELECTION || selection == HIGHLIGHTING_SHARE_ALL)\r\n        return <div className={\"d-flex flex-row justify-content-center\"} style={{height: \"110px\"}}>\r\n            {showCanvas &&\r\n            <canvas ref={canvas} width={400} height={110} style={{border: \"1x solid #000000\"}}/>\r\n            }\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        <Modal size={'xl'}\r\n               show={true}\r\n               onHide={props.onHide}\r\n               backdrop=\"static\"\r\n        >\r\n            {showHelpModal && helpText &&\r\n            <HelpModal helpText={helpText}\r\n                       size={\"lg\"}\r\n                       closeHelpModal={() => setShowHelpModal(false)}\r\n            />\r\n            }\r\n            <Modal.Header>\r\n                <h5 className=\"modal-title\"><b>{applicationStrings.label_overallview_title[language]}</b></h5>\r\n                <button type=\"button\"\r\n                        className=\"btn-close\"\r\n                        data-dismiss=\"modal\"\r\n                        aria-label=\"Close\"\r\n                        onClick={props.onHide}>\r\n                </button>\r\n            </Modal.Header>\r\n            <Modal.Body style={{minHeight: \"75vh\", maxHeight: \"75vh\", overflowY: \"auto\"}}>\r\n                <div>\r\n                    {makeFormHeader()}\r\n                </div>\r\n                <div className={\"m-4\"}>\r\n                    {makeTable()}\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <div className={\"d-flex flex-row justify-content-between w-100\"}>\r\n                    <div>\r\n                        <Form.Check inline={true}\r\n                                    className=\"form-radiobutton\"\r\n                                    label={applicationStrings.label_tooltips[language]}\r\n                                    type=\"checkbox\"\r\n                                    checked={showToolTips}\r\n                                    onChange={() => setShowToolTips(!showToolTips)}>\r\n                        </Form.Check>\r\n                    </div>\r\n                    <div>\r\n                        <Button className={\"btn btn-primary\"} onClick={onOpenHelpModal}>\r\n                            <FaQuestionCircle/>\r\n                        </Button>\r\n                        <Button className={\"btn-secondary form-button\"} onClick={props.onHide}>\r\n                            {applicationStrings.button_close[language]}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n\r\n}","import React, {useContext, useState} from 'react'\r\nimport {Button} from 'react-bootstrap'\r\nimport {NotificationManager} from 'react-notifications'\r\n\r\nimport FoodSelectorModal from '../foodselector/FoodSelectorModal'\r\nimport {FaDownload, FaEdit, FaLayerGroup, FaPlusSquare, FaTable, FaTrash, FaUpload} from \"react-icons/fa\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {confirmAction} from \"../ConfirmationDialog\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {MODE_EDIT, MODE_NEW, PATH_FOODDATA_PANEL} from '../../config/Constants';\r\nimport {makeFoodDataPanelComponent} from \"../../service/FoodDataPanelService\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport FoodDataPage from \"./FoodDataPage\";\r\nimport {OverallView} from \"./OverallView\";\r\n\r\nconst {compress, decompress} = require('shrink-string')\r\n\r\n\r\ninterface FoodAnalyzerContainerProps {\r\n    openSelectorModal?: boolean\r\n    openCompositeSelectorModal?: boolean\r\n    onNewFoodItemSelected: () => void\r\n}\r\n\r\nexport default function FoodAnalyzerContainer(props: FoodAnalyzerContainerProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const showFoodSelectorInitialState = props.openSelectorModal === true\r\n    const showCompositeFoodSelectorInitialState = props.openCompositeSelectorModal === true\r\n\r\n    const [showFoodSelector, setShowFoodSelector] = useState<Boolean>(showFoodSelectorInitialState)\r\n    const [showFoodAggregatedFoodSelector, setShowAggregatedFoodSelector] = useState<Boolean>(showCompositeFoodSelectorInitialState)\r\n    const [showOverallView, setShowOverallView] = useState<Boolean>(false)\r\n    const [foodSelectorEditMode, setFoodSelectorEditMode] = useState<Boolean>(false)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onAddNewFoodItem = (aggregateSelector: boolean) => {\r\n        setFoodSelectorEditMode(false)\r\n        if (aggregateSelector) {\r\n            setShowAggregatedFoodSelector(!showFoodAggregatedFoodSelector)\r\n        } else {\r\n            setShowFoodSelector(!showFoodSelector)\r\n        }\r\n    }\r\n\r\n    const onEditSelectedFoodItem = () => {\r\n        const {selectedFoodItems, selectedFoodItemIndex} = applicationContext.applicationData.foodDataPanel;\r\n        const selectedFoodItem = selectedFoodItems[selectedFoodItemIndex];\r\n\r\n        setFoodSelectorEditMode(true)\r\n        if (selectedFoodItem.aggregated) {\r\n            setShowAggregatedFoodSelector(!showFoodAggregatedFoodSelector)\r\n        } else {\r\n            setShowFoodSelector(!showFoodSelector)\r\n        }\r\n    }\r\n\r\n    const onOpenFileUpload = async () => {\r\n        const startUpload = () => {\r\n            const uploadElement = document.getElementById('importFileInput')\r\n            if (uploadElement) {\r\n                uploadElement.click();\r\n            }\r\n        }\r\n\r\n        if (applicationContext.applicationData.foodDataPanel?.selectedFoodItems?.length > 0) {\r\n            if (await confirmAction(\r\n                applicationStrings.message_import_question[language],\r\n                applicationStrings.button_yes[language],\r\n                applicationStrings.button_no[language],\r\n                {}\r\n            )) {\r\n                startUpload()\r\n            }\r\n        } else {\r\n            startUpload()\r\n        }\r\n    }\r\n\r\n    const onOpenOverallView = () => {\r\n        setShowOverallView(!showOverallView)\r\n    }\r\n\r\n    const onImport = (event) => {\r\n        const files = event.target.files;\r\n        if (!files || files.lenth === 0) {\r\n            return;\r\n        }\r\n\r\n        const file = files[0];\r\n        const fileReader = new FileReader();\r\n        fileReader.readAsText(file);\r\n        fileReader.onloadend = async () => {\r\n            const content = fileReader.result as string;\r\n            if (!content) {\r\n                return;\r\n            }\r\n            const decompressedContent = await decompress(content)\r\n            const expectedStartOfContent = \"{\\\"selectedFoodItems\\\":[\";\r\n            if (decompressedContent.startsWith(expectedStartOfContent)) {\r\n                try {\r\n                    let foodDataPanelData = JSON.parse(decompressedContent);\r\n                    foodDataPanelData = {\r\n                        ...foodDataPanelData, selectedFoodItems: foodDataPanelData.selectedFoodItems.map(item => {\r\n                            return {\r\n                                ...item,\r\n                                component: <FoodDataPage key={`page component ${item.id}`} selectedFoodItem={item}/>\r\n                            }\r\n                        })\r\n                    }\r\n                    applicationContext.setFoodDataPanelData.setCompleteData(foodDataPanelData);\r\n                } catch (e) {\r\n                    NotificationManager.error(applicationStrings.message_import_error_invalidfile[language])\r\n                }\r\n            } else {\r\n                NotificationManager.error(applicationStrings.message_import_error_parse[language])\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const onExport = async () => {\r\n        let dataObj = applicationContext.applicationData.foodDataPanel;\r\n\r\n        /*\r\n         * We need to remove the component data object from each item, as it contains the food item object again\r\n         * (cyclic reference), causing errors in the serializiation process. On import, we have to re-define the\r\n         * components again.\r\n         */\r\n        dataObj = {\r\n            ...dataObj, selectedFoodItems: dataObj.selectedFoodItems.map(item => {\r\n                return {...item, component: undefined}\r\n            })\r\n        }\r\n\r\n        try {\r\n            const fileContent = JSON.stringify(dataObj);\r\n            const compressedContent = await compress(fileContent)\r\n\r\n            // Create pseudo-element representing a download element\r\n            const element = document.createElement('a');\r\n            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(compressedContent));\r\n            element.setAttribute('download', \"food-compare_dataexport.json\");\r\n            element.style.display = 'none';\r\n            document.body.appendChild(element);\r\n            element.click();\r\n            document.body.removeChild(element);\r\n        } catch (e) {\r\n            NotificationManager.error(applicationStrings.message_export_error[language])\r\n        }\r\n\r\n    }\r\n\r\n    const onHideSelector = (): void => {\r\n        setShowFoodSelector(false)\r\n        setShowAggregatedFoodSelector(false)\r\n    }\r\n\r\n    const onHideOverallView = (): void => {\r\n        setShowOverallView(false)\r\n    }\r\n\r\n    const onSelectFoodItemSubmit = (selectedFoodItem: SelectedFoodItem): void => {\r\n        if (applicationContext === null) {\r\n            return\r\n        }\r\n\r\n        const selectedIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n        if (foodSelectorEditMode) {\r\n            // ToDo: Anpassen bei aggregated -> composite list clonen\r\n            applicationContext.setFoodDataPanelData.setItemOfFoodDataPanel(selectedFoodItem, selectedIndex)\r\n        } else {\r\n            const selectedFoodItemWithComponent = makeFoodDataPanelComponent(\r\n                selectedFoodItem, applicationContext.foodDataCorpus.foodNames, language)\r\n\r\n            if (selectedFoodItemWithComponent !== null) {\r\n                applicationContext.setFoodDataPanelData.addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n            }\r\n\r\n            if (applicationContext?.debug) {\r\n                console.log('FoodAnalyzerContainer: Set new selected item and execute callback. Selected item = ', selectedFoodItemWithComponent)\r\n            }\r\n\r\n            props.onNewFoodItemSelected()\r\n        }\r\n\r\n    }\r\n\r\n    const onCloseAllTabs = async () => {\r\n        if (await confirmAction(\r\n            applicationStrings.confirm_close_all_tabs[language],\r\n            applicationStrings.button_yes[language],\r\n            applicationStrings.button_no[language],\r\n            {}\r\n        )) {\r\n            history.push(PATH_FOODDATA_PANEL)\r\n            applicationContext?.setFoodDataPanelData.removeAllItemsFromFoodDataPanel()\r\n        }\r\n    }\r\n\r\n    if (applicationContext?.debug) {\r\n        console.log('FoodAnalyzerContainer: Render')\r\n    }\r\n\r\n    const {selectedFoodItems, selectedFoodItemIndex} = applicationContext.applicationData.foodDataPanel\r\n    const isFoodItemSelected = selectedFoodItems && selectedFoodItems.length > 0\r\n    const buttonClass = isMobileDevice() ? \"btn m-2\" : \"btn foodanalyzer-button-normal\"\r\n    const buttonClassWithExtraSpace = isMobileDevice() ? \"btn m-2\" : \"btn foodanalyzer-button-separator\"\r\n\r\n    const divButtonClass = \"d-flex flex-column align-items-left\"\r\n\r\n    const selectedFoodItem = isFoodItemSelected ? selectedFoodItems[selectedFoodItemIndex] : undefined\r\n    const existingFoodItem = foodSelectorEditMode ? selectedFoodItem : undefined\r\n    const mode = foodSelectorEditMode ? MODE_EDIT : MODE_NEW\r\n\r\n    return (\r\n        <div className={\"foodanalyzer-buttonbar\"}>\r\n            {showFoodSelector &&\r\n                <FoodSelectorModal onHide={onHideSelector}\r\n                                   selectedFoodItemCallback={onSelectFoodItemSubmit}\r\n                                   compositeSelector={false}\r\n                                   selectedFoodItem={existingFoodItem}\r\n                                   mode={mode}\r\n                />\r\n            }\r\n            {showFoodAggregatedFoodSelector &&\r\n                <FoodSelectorModal onHide={onHideSelector}\r\n                                   selectedFoodItemCallback={onSelectFoodItemSubmit}\r\n                                   compositeSelector={true}\r\n                                   selectedFoodItem={existingFoodItem}\r\n                                   mode={mode}\r\n                />\r\n            }\r\n            {showOverallView &&\r\n                <OverallView onHide={onHideOverallView} />\r\n            }\r\n            <div className={divButtonClass}>\r\n                <Button onClick={() => onAddNewFoodItem(false)}\r\n                        className={buttonClass}\r\n                        data-for={\"fa-btn-add\"}\r\n                        data-tip={applicationStrings.tooltip_icon_newFoodItem[language]}>\r\n                    <FaPlusSquare/>\r\n                    <ReactTooltip id={\"fa-btn-add\"} globalEventOff=\"click\"/>\r\n                </Button>\r\n                <Button onClick={() => onAddNewFoodItem(true)}\r\n                        className={buttonClass}\r\n                        disabled={isMobileDevice()}\r\n                        data-for={\"fa-btn-aggregate\"}\r\n                        data-tip={applicationStrings.tooltip_icon_newFoodItemStack[language]}>\r\n                    <FaLayerGroup/>\r\n                    <ReactTooltip id={\"fa-btn-aggregate\"} globalEventOff=\"click\"/>\r\n                </Button>\r\n                <Button onClick={() => onEditSelectedFoodItem()}\r\n                        className={buttonClassWithExtraSpace}\r\n                        disabled={!isFoodItemSelected}\r\n                        data-for={\"fa-btn-edit\"}\r\n                        data-tip={applicationStrings.tooltip_icon_editFoodItem[language]}>\r\n                    <FaEdit/>\r\n                    <ReactTooltip id={\"fa-btn-edit\"} globalEventOff=\"click\"/>\r\n                </Button>\r\n                <Button onClick={() => onExport()}\r\n                        className={buttonClass}\r\n                        disabled={!isFoodItemSelected || isMobileDevice()}\r\n                        data-for={\"fa-btn-export\"}\r\n                        data-tip={applicationStrings.tooltip_icon_export[language]}>\r\n                    <FaDownload/>\r\n                    <ReactTooltip id={\"fa-btn-export\"} globalEventOff=\"click\"/>\r\n                </Button>\r\n                <input type=\"file\"\r\n                       id=\"importFileInput\"\r\n                       style={{visibility: \"hidden\", maxWidth: \"1px\", maxHeight: \"1px\"}}\r\n                       accept={\".json\"}\r\n                       onChange={onImport}/>\r\n                <Button onClick={() => onOpenFileUpload()}\r\n                        className={buttonClass}\r\n                        disabled={isMobileDevice()}\r\n                        data-for={\"fa-btn-import\"}\r\n                        data-tip={applicationStrings.tooltip_icon_import[language]}>\r\n                    <FaUpload/>\r\n                    <ReactTooltip id={\"fa-btn-import\"} globalEventOff=\"click\"/>\r\n                </Button>\r\n                <Button onClick={() => onOpenOverallView()}\r\n                        className={buttonClassWithExtraSpace}\r\n                        disabled={isMobileDevice() || !isFoodItemSelected || selectedFoodItems.length <= 1}\r\n                        data-for={\"fa-btn-overallview\"}\r\n                        data-tip={applicationStrings.tooltip_icon_overallView[language]}>\r\n                    <FaTable/>\r\n                    <ReactTooltip id={\"fa-btn-overallview\"} globalEventOff=\"click\"/>\r\n                </Button>\r\n                <Button onClick={() => onCloseAllTabs()}\r\n                        disabled={!isFoodItemSelected}\r\n                        className={buttonClass + \" btn-secondary\"}\r\n                        data-for={\"fa-btn-close\"}\r\n                        data-tip={applicationStrings.tooltip_icon_removeAll[language]}>\r\n                    <FaTrash/>\r\n                    <ReactTooltip id={\"fa-btn-close\"}/>\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport CloseableTabs from 'react-closeable-tabs';\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\ninterface TabContainerProps {\r\n    onTabChange: (id: number) => void\r\n    indexToSet: number\r\n}\r\n\r\n// Origin: Vinus Online\r\nexport default function TabContainer(props: TabContainerProps) {\r\n    const applicationData = useContext(ApplicationDataContextStore)\r\n\r\n    const style = {\r\n        buttonTab: {\r\n            border: \"border border-secondary\",\r\n            background: \"none\",\r\n            display: \"inline-flex\",\r\n            verticalAlign: \"middle\",\r\n            minHeight: \"30px\",\r\n            alignItems: \"center\",\r\n            cursor: \"pointer\",\r\n            marginTop: \"-12px\",\r\n            borderBottom: \"2px solid transparent\"\r\n        }\r\n    }\r\n\r\n    if(applicationData?.debug) {\r\n        console.log('TabContainer: Render, food panel data = ', applicationData.applicationData.foodDataPanel.selectedFoodItems)\r\n    }\r\n\r\n    if (!applicationData || !applicationData.applicationData.foodDataPanel.selectedFoodItems) {\r\n        return <div/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <CloseableTabs\r\n                data={applicationData.applicationData.foodDataPanel.selectedFoodItems}\r\n                tabPanelClass=\"tab-panel\"\r\n                tabContentClass=\"tab-content mainPanel\"\r\n                style={style}\r\n                onTabClick={(id) => props.onTabChange(id)}\r\n                activeIndex={applicationData.applicationData.foodDataPanel.selectedFoodItemIndex}\r\n            />\r\n        </div>\r\n    )\r\n}","import {\r\n    AMOUNT_PORTION,\r\n    CARBS_DATA_BASE,\r\n    CARBS_DATA_DETAIL,\r\n    CHART_TYPE_BAR,\r\n    CHART_TYPE_PIE,\r\n    AMOUNT_100_GRAM,\r\n    LIPIDS_DATA_BASE,\r\n    LIPIDS_DATA_OMEGA,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA,\r\n    TAB_ENERGY_DATA, CHART_TYPE_COMPOSITION, CHART_TYPE_ENERGY_LEVEL\r\n} from \"../../config/Constants\"\r\nimport {ChartConfigData, DirectCompareChartConfigData, GeneralizedChartConfig} from \"../../types/livedata/ChartConfigData\"\r\nimport {convertBooleanToDigit, convertStringToBoolean} from \"../calculation/MathService\"\r\n\r\n/**\r\n * Converts/encodes a food data panel chart config sub-element into the corresponding URI query string.\r\n */\r\nexport function makeChartConfigUriString(chartConfigData: ChartConfigData | DirectCompareChartConfigData, selectedDataPage: string): string {\r\n    let chartObject: any\r\n    switch (selectedDataPage) {\r\n        case TAB_BASE_DATA:\r\n            chartObject = chartConfigData.baseChartConfig\r\n            break\r\n        case TAB_ENERGY_DATA:\r\n            chartObject = chartConfigData.energyChartConfig\r\n            break\r\n        case TAB_LIPIDS_DATA:\r\n            chartObject = chartConfigData.lipidsChartConfig\r\n            break\r\n        case TAB_CARBS_DATA:\r\n            chartObject = chartConfigData.carbsChartConfig\r\n            break\r\n        case TAB_VITAMIN_DATA:\r\n            chartObject = chartConfigData.vitaminChartConfig\r\n            break\r\n        case TAB_MINERAL_DATA:\r\n            chartObject = chartConfigData.mineralChartConfig\r\n            break\r\n        case TAB_PROTEINS_DATA:\r\n            chartObject = chartConfigData.proteinChartConfig\r\n            break\r\n        default:\r\n            chartObject = {}\r\n    }\r\n\r\n    const generalizedChartConfig = makeGeneralizedChartConfig(chartObject)\r\n    return convertGeneralizedChartConfigToString(generalizedChartConfig)\r\n}\r\n\r\n\r\n/**\r\n * Converts/decodes a URI query string to get the encoded chart config data of the currently selected data page\r\n * in the food data panel.\r\n * The resulting chart config will be added to the existing chart configuration data object passed to this method.\r\n */\r\nexport function getUpdatedChartConfig(chartConfigData: ChartConfigData, chartConfigUriString: string, selectedDataPage: string): ChartConfigData {\r\n    const chartConfigFromUri = convertGeneralizedChartConfigStringToObject(chartConfigUriString)\r\n    const {chartType, expand100, showDetails, showLegend, portionType, subChart} = chartConfigFromUri\r\n\r\n    if (selectedDataPage === TAB_BASE_DATA) {\r\n        if (!chartType || showLegend === undefined || showDetails === undefined) {\r\n            return chartConfigData\r\n        }\r\n\r\n        return {\r\n            ...chartConfigData, baseChartConfig: {\r\n                chartType: chartType,\r\n                showLegend: showLegend,\r\n                showDetails: showDetails\r\n            }\r\n        }\r\n    }\r\n\r\n    if (selectedDataPage === TAB_ENERGY_DATA) {\r\n        if (!chartType) {\r\n            return chartConfigData\r\n        }\r\n\r\n        return {\r\n            ...chartConfigData, energyChartConfig: {\r\n                chartType: chartType,\r\n                showLegend: true,\r\n            }\r\n        }\r\n    }\r\n\r\n    if (selectedDataPage === TAB_LIPIDS_DATA) {\r\n        if (!chartType || showLegend === undefined || subChart === undefined) {\r\n            return chartConfigData\r\n        }\r\n\r\n        return {\r\n            ...chartConfigData, lipidsChartConfig: {\r\n                ...chartConfigData.lipidsChartConfig,\r\n                chartType: chartType,\r\n                showLegend: showLegend,\r\n                subChart: subChart\r\n            }\r\n        }\r\n    }\r\n\r\n    if (selectedDataPage === TAB_CARBS_DATA) {\r\n        if (!chartType || showLegend === undefined || subChart === undefined) {\r\n            return chartConfigData\r\n        }\r\n\r\n        return {\r\n            ...chartConfigData, carbsChartConfig: {\r\n                ...chartConfigData.carbsChartConfig,\r\n                chartType: chartType,\r\n                showLegend: showLegend,\r\n                subChart: subChart\r\n            }\r\n        }\r\n    }\r\n\r\n    if (selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage === TAB_MINERAL_DATA || selectedDataPage === TAB_PROTEINS_DATA) {\r\n        if (portionType === undefined || expand100 === undefined) {\r\n            return chartConfigData\r\n        }\r\n\r\n        const barChartConfig = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n        }\r\n\r\n        if (selectedDataPage === TAB_VITAMIN_DATA) {\r\n            return {...chartConfigData, vitaminChartConfig: barChartConfig}\r\n        }\r\n\r\n        if (selectedDataPage === TAB_MINERAL_DATA) {\r\n            return {...chartConfigData, mineralChartConfig: barChartConfig}\r\n        }\r\n\r\n        if (selectedDataPage === TAB_PROTEINS_DATA) {\r\n            return {...chartConfigData, proteinChartConfig: barChartConfig}\r\n        }\r\n\r\n    }\r\n\r\n    return chartConfigData\r\n}\r\n\r\n\r\nexport function getUpdatedDirectCompareChartConfig(chartConfigData: DirectCompareChartConfigData,\r\n                                                   chartConfigUriString: string, selectedDataPage: string): DirectCompareChartConfigData {\r\n    const chartConfigFromUri = convertGeneralizedChartConfigStringToObject(chartConfigUriString)\r\n    const {chartType, expand100, showDetails, showLegend, portionType, subChart, subChart2, synchronize} = chartConfigFromUri\r\n\r\n    if (selectedDataPage === TAB_BASE_DATA) {\r\n        if (!chartType || showLegend === undefined || showDetails === undefined) {\r\n            return chartConfigData\r\n        }\r\n\r\n        return {\r\n            ...chartConfigData, baseChartConfig: {\r\n                chartType: chartType,\r\n                showLegend: showLegend,\r\n                showDetails: showDetails\r\n            }\r\n        }\r\n    }\r\n\r\n    if (selectedDataPage === TAB_LIPIDS_DATA) {\r\n        if (!chartType || showLegend === undefined || subChart === undefined || subChart2 === undefined) {\r\n            return chartConfigData\r\n        }\r\n\r\n        return {\r\n            ...chartConfigData, lipidsChartConfig: {\r\n                ...chartConfigData.lipidsChartConfig,\r\n                chartType: chartType,\r\n                showLegend: showLegend,\r\n                subChart1: subChart,\r\n                subChart2: subChart2,\r\n            }\r\n        }\r\n    }\r\n\r\n    if (selectedDataPage === TAB_CARBS_DATA) {\r\n        if (!chartType || showLegend === undefined || subChart === undefined || subChart2 === undefined) {\r\n            return chartConfigData\r\n        }\r\n\r\n        return {\r\n            ...chartConfigData, carbsChartConfig: {\r\n                ...chartConfigData.carbsChartConfig,\r\n                chartType: chartType,\r\n                showLegend: showLegend,\r\n                subChart1: subChart,\r\n                subChart2: subChart2,\r\n                hideRemainders: false\r\n            }\r\n        }\r\n    }\r\n\r\n    if (selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage === TAB_MINERAL_DATA || selectedDataPage === TAB_PROTEINS_DATA) {\r\n        if (portionType === undefined || expand100 === undefined || synchronize === undefined) {\r\n            return chartConfigData\r\n        }\r\n\r\n        const barChartConfig = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize\r\n        }\r\n\r\n        if (selectedDataPage === TAB_VITAMIN_DATA) {\r\n            return {...chartConfigData, vitaminChartConfig: barChartConfig}\r\n        }\r\n\r\n        if (selectedDataPage === TAB_MINERAL_DATA) {\r\n            return {...chartConfigData, mineralChartConfig: barChartConfig}\r\n        }\r\n\r\n        if (selectedDataPage === TAB_PROTEINS_DATA) {\r\n            return {...chartConfigData, proteinChartConfig: barChartConfig}\r\n        }\r\n\r\n    }\r\n\r\n    return chartConfigData\r\n}\r\n\r\n\r\nexport function makeGeneralizedChartConfig(chartObject: any): GeneralizedChartConfig {\r\n    const generalizedChartObject: GeneralizedChartConfig = {}\r\n    if (chartObject.chartType) {\r\n        generalizedChartObject.chartType = chartObject.chartType\r\n    }\r\n\r\n    if (chartObject.expand100) {\r\n        generalizedChartObject.expand100 = chartObject.expand100\r\n    }\r\n\r\n    if (chartObject.showDetails) {\r\n        generalizedChartObject.showDetails = chartObject.showDetails\r\n    }\r\n\r\n    if (chartObject.showLegend) {\r\n        generalizedChartObject.showLegend = chartObject.showLegend\r\n    }\r\n\r\n    if (chartObject.portionType) {\r\n        generalizedChartObject.portionType = chartObject.portionType\r\n    }\r\n\r\n    if (chartObject.subChart) {\r\n        generalizedChartObject.subChart = chartObject.subChart\r\n    }\r\n\r\n    if (chartObject.subChart2) {\r\n        generalizedChartObject.subChart2 = chartObject.subChart2\r\n    }\r\n\r\n    if (chartObject.synchronize) {\r\n        generalizedChartObject.synchronize = chartObject.synchronize\r\n    }\r\n\r\n    return generalizedChartObject\r\n}\r\n\r\n\r\nexport function convertGeneralizedChartConfigToString(chartObject: GeneralizedChartConfig) {\r\n    const {chartType, expand100, showDetails, showLegend, portionType, subChart, subChart2, synchronize} = chartObject\r\n\r\n    const chartTypeKey = chartType === undefined || chartType === null ? 0 : chartType\r\n    const portionTypeKey = portionType === undefined || portionType === null ? 0 : portionType === AMOUNT_PORTION ? 1 : 2\r\n\r\n    const expand100Key = expand100 ? convertBooleanToDigit(expand100) : 0\r\n    const showLegendKey = showLegend ? convertBooleanToDigit(showLegend) : 0\r\n    const showDetailsKey = showDetails ? convertBooleanToDigit(showDetails) : 0\r\n\r\n    const subChartKey = subChart ? getSubChartKey(subChart) : 0\r\n    const subChartKey2 = subChart2 ? getSubChartKey(subChart2) : 0\r\n    const synchronizeKey = synchronize ? convertBooleanToDigit(synchronize) : 0\r\n\r\n    return `${chartTypeKey}${portionTypeKey}${expand100Key}${showLegendKey}${showDetailsKey}${subChartKey}${subChartKey2}${synchronizeKey}`\r\n}\r\n\r\n\r\nexport function convertGeneralizedChartConfigStringToObject(uriString: string): GeneralizedChartConfig {\r\n    if (!uriString) {\r\n        return {}\r\n    }\r\n\r\n    const stringToParse = uriString.trim()\r\n    if (stringToParse.length !== 8) {\r\n        return {}\r\n    }\r\n\r\n    const chartTypeKey = stringToParse.substring(0, 1)\r\n    const portionTypeKey = stringToParse.substring(1, 2)\r\n    const expand100Key = stringToParse.substring(2, 3)\r\n    const showLegendKey = stringToParse.substring(3, 4)\r\n    const showDetailsKey = stringToParse.substring(4, 5)\r\n    const subChartKey = stringToParse.substring(5, 6)\r\n    const subChartKey2 = stringToParse.substring(6, 7)\r\n    const synchronizeKey = stringToParse.substring(7, 8)\r\n\r\n    const chartTypeNumber = chartTypeKey\r\n    const portionTypeNumber = parseInt(portionTypeKey)\r\n    const subChartNumber = parseInt(subChartKey)\r\n    const subChartNumber2 = parseInt(subChartKey2)\r\n\r\n    let chartType = \"0\"\r\n    switch (chartTypeNumber) {\r\n        case \"1\":\r\n            chartType = CHART_TYPE_PIE\r\n            break;\r\n        case \"2\":\r\n            chartType = CHART_TYPE_BAR\r\n            break;\r\n        case \"3\":\r\n            chartType = CHART_TYPE_COMPOSITION\r\n            break;\r\n        case \"4\":\r\n            chartType = CHART_TYPE_ENERGY_LEVEL\r\n            break;\r\n    }\r\n\r\n    const portionType = portionTypeNumber === 0 || isNaN(portionTypeNumber)\r\n        ? undefined\r\n        : portionTypeNumber === 1 ? AMOUNT_PORTION : AMOUNT_100_GRAM\r\n\r\n    const subChart = subChartNumber === 0 || isNaN(subChartNumber) ? undefined : getSubChartFromKey(subChartNumber)\r\n    const subChart2 = subChartNumber2 === 0 || isNaN(subChartNumber2) ? undefined : getSubChartFromKey(subChartNumber2)\r\n\r\n    return {\r\n        chartType: chartType,\r\n        portionType: portionType,\r\n        expand100: convertStringToBoolean(expand100Key),\r\n        showLegend: convertStringToBoolean(showLegendKey),\r\n        showDetails: convertStringToBoolean(showDetailsKey),\r\n        subChart: subChart ? subChart : undefined,\r\n        subChart2: subChart2 ? subChart2 : undefined,\r\n        synchronize: convertStringToBoolean(synchronizeKey)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function getSubChartKey(subChart: string): number {\r\n    switch (subChart) {\r\n        case CARBS_DATA_BASE:\r\n            return 1\r\n        case CARBS_DATA_DETAIL:\r\n            return 2\r\n        case LIPIDS_DATA_BASE:\r\n            return 3\r\n        case LIPIDS_DATA_OMEGA:\r\n            return 4\r\n        default:\r\n            return 0\r\n    }\r\n}\r\n\r\nexport function getSubChartFromKey(key: number): string | null {\r\n    switch (key) {\r\n        case 1:\r\n            return CARBS_DATA_BASE\r\n        case 2:\r\n            return CARBS_DATA_DETAIL\r\n        case 3:\r\n            return LIPIDS_DATA_BASE\r\n        case 4:\r\n            return LIPIDS_DATA_OMEGA\r\n        default:\r\n            return null\r\n    }\r\n}\r\n","import {SEX_FEMALE, SEX_MALE} from \"../../config/Constants\"\r\nimport {ChartConfigData} from \"../../types/livedata/ChartConfigData\"\r\nimport {FoodItemUriData, SimpleFoodItemUriData} from \"../../types/livedata/UriData\"\r\nimport {UserData} from \"../../types/livedata/UserData\"\r\nimport {PortionData} from \"../../types/nutrientdata/FoodItem\"\r\nimport {getPalCategory, getPalValue} from \"../calculation/EnergyService\"\r\nimport {convertBooleanToDigit, convertStringToBoolean, getNumberOfFixedLength} from \"../calculation/MathService\"\r\nimport {getUpdatedChartConfig, makeChartConfigUriString} from \"./ChartConfigConverter\"\r\nimport {prepareUriForParsing} from \"./BaseUriService\";\r\n\r\n\r\nexport function makeFoodDataPanelDefaultUri(foodItemData: FoodItemUriData,\r\n\t\tuserData: UserData, selectedDataPage: string, selectedDisplayMode: string, chartConfigData: ChartConfigData) {\r\n\tconst foodItemDataString = makeFoodItemDefaultUri(foodItemData)\r\n\tconst userDataString = convertUserDataObjectToString(userData)\r\n\tconst chartConfigString = makeChartConfigUriString(chartConfigData, selectedDataPage)\r\n\treturn `${foodItemDataString};${selectedDataPage};${selectedDisplayMode};${userDataString};${chartConfigString}`\r\n}\r\n\r\nexport function makeFoodItemDefaultUri(foodItemData: FoodItemUriData) {\r\n\t\tconst portionString = convertPortionDataObjectToString(foodItemData.portionData)\t\r\n\t\tconst supplementValue = convertBooleanToDigit(foodItemData.supplementData)\r\n\t\tconst combineValue = convertBooleanToDigit(foodItemData.combineData)\r\n\t\t\r\n\t\treturn `${foodItemData.foodItemId};${foodItemData.source};${portionString};${supplementValue}${combineValue}`\r\n}\r\n\r\nexport function parseFoodDataPanelDefaultUri(uri: string, chartConfigData: ChartConfigData): SimpleFoodItemUriData | null {\r\n\tconst fragments = prepareUriForParsing(uri).split(\";\")\r\n\tif(fragments.length !== 8) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst selectedDataPage = fragments[4]\r\n\tconst displayMode = fragments[5]\r\n\tconst userData = convertUserDataStringToObject(fragments[6])\r\n\tconst chartConfigString = fragments[7]\r\n\tconst foodItemUriData = getFoodItemUriData(fragments)\r\n\t\r\n\tif(!userData || !foodItemUriData) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst newChartConfigData = getUpdatedChartConfig(chartConfigData, chartConfigString, selectedDataPage)\r\n\t\r\n\treturn {\r\n\t\tselectedFoodItem: foodItemUriData,\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tdisplayMode: displayMode,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Retrieves the food item uri data from a fragments string. It will always extract those\r\n * data objects from the beginning of the array, no matter how long it is.\r\n */\r\nexport function getFoodItemUriData(fragments: Array<string>): FoodItemUriData | null {\r\n\tconst foodItemId = parseInt(fragments[0])\r\n\tconst source = parseInt(fragments[1])\r\n\tconst portionData = convertPortionDataStringToObject(fragments[2])\r\n\tconst booleanData = fragments[3]\r\n\t\r\n\tconst supplementData = convertStringToBoolean(booleanData.substring(0,1))\r\n\tconst combineData = convertStringToBoolean(booleanData.substring(1,2))\r\n\t\r\n\tif(!portionData || booleanData.length < 2) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\treturn {\r\n\t\tfoodItemId: foodItemId,\r\n\t\tsource: source,\r\n\t\tportionData: portionData,\r\n\t\tsupplementData: supplementData,\r\n\t\tcombineData: combineData\r\n\t}\r\n}\r\n\r\nexport function convertUserDataObjectToString(userData: UserData): string {\r\n\tconst weight = getNumberOfFixedLength(userData.weight, 3)\r\n\tconst age = getNumberOfFixedLength(userData.age, 3)\r\n\tconst size = getNumberOfFixedLength(userData.size, 3)\r\n\r\n\tconst palValue = getNumberOfFixedLength( getPalCategory(userData.palValue), 2)\r\n\tconst sex = userData.sex === SEX_MALE ? 1 : 0\r\n\t\r\n\tconst pregnant = convertBooleanToDigit(userData.pregnant)\r\n\tconst breastFeeding = convertBooleanToDigit(userData.breastFeeding)\r\n\tconst leisureSports = convertBooleanToDigit(userData.leisureSports)\r\n\t\t\r\n\treturn `${weight}${age}${size}${palValue}${sex}${pregnant}${breastFeeding}${leisureSports}`\r\n}\r\n\r\n\r\nexport function convertUserDataStringToObject(userDataString: string): UserData | null {\r\n\tif(userDataString.length < 15) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst weight = userDataString.substring(0,3)\r\n\tconst age = userDataString.substring(3,6)\r\n\tconst size = userDataString.substring(6,9)\r\n\tconst palValueInt = userDataString.substring(9,11)\r\n\tconst sex = userDataString.substring(11,12)\r\n\tconst pregnant = userDataString.substring(12,13)\r\n\tconst breastFeeding = userDataString.substring(13,14)\r\n\tconst leisureSports = userDataString.substring(14,15)\r\n\t\r\n\tconst palValue = getPalValue(parseInt(palValueInt))\r\n\t\r\n\treturn {\r\n\t\tweight: parseInt(weight),\r\n\t\tage: parseInt(age),\r\n\t\tsize: parseInt(size),\r\n\t\tpalValue: palValue,\r\n\t\tsex: sex === \"1\" ? SEX_MALE : SEX_FEMALE,\r\n\t\tpregnant: convertStringToBoolean(pregnant),\r\n\t\tbreastFeeding: convertStringToBoolean(breastFeeding),\r\n\t\tleisureSports: convertStringToBoolean(leisureSports),\r\n\t\tinitialValues: false\r\n\t}\r\n}\r\n\r\n\r\nexport function convertPortionDataObjectToString(portionData: PortionData): string {\r\n\treturn `${portionData.portionType}_${portionData.amount}`\r\n}\r\n\r\nexport function convertPortionDataStringToObject(portionDataString: string): PortionData | null {\r\n\tconst fragments = portionDataString.split(\"_\")\r\n\tif(fragments.length !== 2) {\r\n\t\treturn null\r\n\t}\r\n\treturn {\r\n\t\tportionType: parseInt(fragments[0]),\r\n\t\tamount: parseInt(fragments[1])\r\n\t}\r\n}\r\n\r\n\r\n","import { ChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\"\r\nimport { AggregatedFoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { getUpdatedChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\nimport {\r\n\tconvertUserDataObjectToString,\r\n\tconvertUserDataStringToObject\r\n} from \"./FoodDataPanelUriService\"\r\nimport {prepareUriForParsing} from \"./BaseUriService\";\r\n\r\n\r\ninterface Replacemet {\r\n\tkey: string\r\n\tshort: string\r\n}\r\n\r\nconst separator = \"++\"\r\n\r\nconst metaDataReplacement: Array<Replacemet> = [\r\n\t{key: \"nutrientDataList\", short: \"_mA\"},\r\n\t{key: \"foodItem\", short: \"_mB\"},\r\n\t{key: \"sourceItemId\", short: \"_mC\"},\r\n\t{key: \"source\", short: \"_mD\"},\r\n\t{key: \"url\", short: \"_mE\"},\r\n\t{key: \"name\", short: \"_mF\"},\r\n\t{key: \"id\", short: \"_mG\"},\r\n]\r\n\t\r\nconst nutrientCategoryReplacement: Array<Replacemet> = [\r\n\t{key: \"baseData\", short: \"_nA\"},\r\n\t{key: \"carbohydrateData\", short: \"_nB\"},\r\n\t{key: \"vitaminData\", short: \"_nC\"},\r\n\t{key: \"mineralData\", short: \"_nD\"},\r\n\t{key: \"lipidData\", short: \"_nE\"},\r\n\t{key: \"proteinData\", short: \"_nF\"},\r\n]\r\n\r\nconst baseDataReplacements: Array<Replacemet> = [\r\n\t{key: \"energy\", short: \"_bA\"},\r\n\t{key: \"water\", short: \"_bB\"},\r\n\t{key: \"carbohydrates\", short: \"_bC\"},\r\n\t{key: \"lipids\", short: \"_bD\"},\r\n\t{key: \"proteins\", short: \"_bE\"},\r\n\t{key: \"dietaryFibers\", short: \"_bF\"},\r\n\t{key: \"ash\", short: \"_bG\"},\r\n\t{key: \"alcohol\", short: \"_bH\"},\r\n\t{key: \"caffeine\", short: \"_bI\"},\r\n]\r\n\r\nconst carbsDataReplacements: Array<Replacemet> = [\r\n\t{key: \"sugar\", short: \"_cA\"},\r\n\t{key: \"sucrose\", short: \"_cB\"},\r\n\t{key: \"glucose\", short: \"_cC\"},\r\n\t{key: \"lactose\", short: \"_cD\"},\r\n\t{key: \"fructose\", short: \"_cE\"},\r\n\t{key: \"galactose\", short: \"_cF\"},\r\n\t{key: \"maltose\", short: \"_cG\"},\r\n\t{key: \"starch\", short: \"_cH\"}\r\n]\r\n\r\nconst lipidsDataReplacements: Array<Replacemet> = [\r\n\t{key: \"saturated\", short: \"_lA\"},\r\n\t{key: \"unsaturatedMono\", short: \"_lB\"},\r\n\t{key: \"unsaturatedPoly\", short: \"_lC\"},\r\n\t{key: \"transFattyAcids\", short: \"_lD\"},\r\n\t{key: \"cholesterol\", short: \"_lE\"},\r\n\t{key: \"galactose\", short: \"_lF\"},\r\n\t{key: \"omegaData\", short: \"_lG\"},\r\n\t{key: \"omega3\", short: \"_lH\"},\r\n\t{key: \"omega6\", short: \"_li\"},\r\n\t{key: \"uncertain\", short: \"_lj\"},\r\n\t{key: \"uncertainRatio\", short: \"_li\"}\r\n]\r\n\r\nconst mineralDataReplacement: Array<Replacemet> = [\r\n\t{key: \"calcium\", short: \"_bA\"},\r\n\t{key: \"iron\", short: \"_bB\"},\r\n\t{key: \"magnesium\", short: \"_bC\"},\r\n\t{key: \"phosphorus\", short: \"_bD\"},\r\n\t{key: \"potassium\", short: \"_bE\"},\r\n\t{key: \"sodium\", short: \"_bF\"},\r\n\t{key: \"zinc\", short: \"_bG\"},\r\n\t{key: \"selenium\", short: \"_bH\"},\r\n\t{key: \"manganese\", short: \"_bI\"},\r\n\t{key: \"copper\", short: \"_bJ\"}\r\n]\r\n\r\nconst vitaminDataReplacement: Array<Replacemet> = [\r\n\t{key: \"a\", short: \"_vA\"},\r\n\t{key: \"b1\", short: \"_vB\"},\r\n\t{key: \"b2\", short: \"_vC\"},\r\n\t{key: \"b3\", short: \"_vD\"},\r\n\t{key: \"b5\", short: \"_vE\"},\r\n\t{key: \"b7\", short: \"_vF\"},\r\n\t{key: \"b9\", short: \"_vG\"},\r\n\t{key: \"b12\", short: \"_vH\"},\r\n\t{key: \"c\", short: \"_vI\"},\r\n\t{key: \"d\", short: \"_vJ\"},\r\n\t{key: \"e\", short: \"_vK\"},\r\n\t{key: \"k\", short: \"_vL\"}\r\n]\r\n\r\nconst carotenoidDataReplacement: Array<Replacemet> = [\r\n\t{key: \"caroteneAlpha\", short: \"_xA\"},\r\n\t{key: \"caroteneBeta\", short: \"_xB\"},\r\n\t{key: \"cryptoxanthin\", short: \"_xC\"},\r\n\t{key: \"lycopene\", short: \"_xD\"},\r\n\t{key: \"lutein\", short: \"_xE\"},\r\n]\r\n\r\nconst proteinDataReplacement: Array<Replacemet> = [\r\n\t{key: \"tryptophan\", short: \"_bA\"},\r\n\t{key: \"threonine\", short: \"_bB\"},\r\n\t{key: \"isoleucine\", short: \"_bC\"},\r\n\t{key: \"leucine\", short: \"_bD\"},\r\n\t{key: \"lysine\", short: \"_bE\"},\r\n\t{key: \"methionine\", short: \"_bF\"},\r\n\t{key: \"cystine\", short: \"_bG\"},\r\n\t{key: \"phenylalanine\", short: \"_bH\"},\r\n\t{key: \"tyrosine\", short: \"_bI\"},\r\n\t{key: \"arginine\", short: \"_bJ\"},\r\n\t{key: \"histidine\", short: \"_bK\"},\r\n\t{key: \"alanine\", short: \"_bL\"},\r\n\t{key: \"asparticAcid\", short: \"_bM\"},\r\n\t{key: \"glycine\", short: \"_bN\"},\r\n\t{key: \"proline\", short: \"_bO\"},\r\n\t{key: \"serine\", short: \"_bP\"},\r\n]\r\n\r\nconst replacements: Array<Array<Replacemet>> = [\r\n\tmetaDataReplacement,\r\n\tnutrientCategoryReplacement,\r\n\tbaseDataReplacements,\r\n\tcarbsDataReplacements,\r\n\tlipidsDataReplacements,\r\n\tmineralDataReplacement,\r\n\tvitaminDataReplacement,\r\n\tcarotenoidDataReplacement,\r\n\tproteinDataReplacement\r\n]\r\n\r\n\r\nexport function convertAggregatedDataJsonToUriString(uriData: AggregatedFoodItemUriData): string {\t\r\n\tconst objectToParse: SelectedFoodItem = {...uriData.selectedFoodItem, compositeSubElements: undefined, component: undefined, foodClass: undefined}\r\n\tlet selectedFoodItemString = JSON.stringify(objectToParse)\r\n\t\r\n\treplacements.forEach(replacementArray => {\r\n\t\treplacementArray.forEach(replacement => selectedFoodItemString = selectedFoodItemString.replace(`\"${replacement.key}\"`, replacement.short))\r\n\t})\r\n\t\r\n\tconst userDataString = convertUserDataObjectToString(uriData.userData)\r\n\tconst chartConfigString = makeChartConfigUriString(uriData.chartConfigData, uriData.selectedDataPage)\r\n\t\r\n\treturn `${uriData.selectedDataPage}${separator}${selectedFoodItemString}${separator}${userDataString}${separator}${chartConfigString}`\r\n}\r\n\r\nexport function convertAggregatedUriStringToObject(chartConfigData: ChartConfigData, uriString: string): AggregatedFoodItemUriData | null {\r\n\tconst fragments = uriString.split(separator)\r\n\tif(fragments.length !== 4) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\tconst selectedDataPage = fragments[0]\r\n\tlet selectedFoodItem: SelectedFoodItem = convertUriStringToSelectedFoodItem( fragments[1])\r\n\tselectedFoodItem = {...selectedFoodItem, aggregated: true}\r\n\t\r\n\tconst userData: UserData | null = convertUserDataStringToObject(fragments[2])\r\n\tconst newChartConfigData: ChartConfigData = getUpdatedChartConfig(chartConfigData, fragments[3], selectedDataPage)\r\n\t\r\n\tif(!userData) {\r\n\t\treturn null\r\n\t}\r\n\t\t\r\n\treturn {\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tselectedFoodItem: selectedFoodItem,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n}\r\n\r\n\r\nexport function convertUriStringToSelectedFoodItem(uriString: string): SelectedFoodItem {\r\n\tlet stringToParse = prepareUriForParsing(uriString).trim()\r\n\tstringToParse = stringToParse.replace(/%22/g, \"\\\"\")\r\n\tstringToParse = stringToParse.replace(/%20/g, \" \")\r\n\t\r\n\treplacements.forEach(replacementArray => {\r\n\t\treplacementArray.forEach(replacement => stringToParse = stringToParse.replace(replacement.short, `\"${replacement.key}\"`))\r\n\t})\r\n\t\r\n\treturn JSON.parse(stringToParse)\r\n}","import { UserData } from \"../types/livedata/UserData\";\r\n\r\nexport const USERDATA_ERROR_AGE = \"userdata error age\"\r\nexport const USERDATA_ERROR_WEIGHT = \"userdata error weight\"\r\nexport const USERDATA_ERROR_SIZE = \"userdata error size\"\r\nexport const USERDATA_OK = \"userdata ok\"\r\n\r\nexport function checkUserDataValidity(userData: UserData): string {\r\n\tconst {age, size, weight} = userData\r\n\r\n\tif (age != null && (age < 15 || age > 100 || isNaN(age))) {\r\n\t\treturn USERDATA_ERROR_AGE\r\n    } else if (size != null && (size < 80 || size > 225 || isNaN(size))) {\r\n\t\treturn USERDATA_ERROR_SIZE\r\n\t} else if (weight != null && (weight < 30 || weight > 250 || isNaN(weight))) {\r\n\t\treturn USERDATA_ERROR_WEIGHT\r\n    }\r\n\r\n    return USERDATA_OK\r\n}","import FoodAnalyzerContainer from \"./FoodAnalyzerContainer\";\r\nimport React, {useContext, useEffect} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport TabContainer from \"./TabContainer\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {\r\n    PATH_FOODDATA_PANEL,\r\n    QUERYKEY_DATAPANEL_ADD, QUERYKEY_DATAPANEL_ADD_COMPOSITE,\r\n    QUERYKEY_DATAPANEL_AGGREGATED,\r\n    QUERYKEY_DATAPANEL_ITEM\r\n} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {makeFoodDataPanelComponent} from \"../../service/FoodDataPanelService\";\r\nimport {AggregatedFoodItemUriData, FoodItemUriData} from \"../../types/livedata/UriData\";\r\nimport {makeFoodDataPanelDefaultUri, parseFoodDataPanelDefaultUri} from \"../../service/uri/FoodDataPanelUriService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {\r\n    convertAggregatedDataJsonToUriString,\r\n    convertAggregatedUriStringToObject\r\n} from \"../../service/uri/FoodDataPanelAggregatedUriService\";\r\nimport {checkUserDataValidity, USERDATA_OK} from \"../../service/UserDataService\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport {FaExclamationTriangle} from \"react-icons/fa\";\r\nimport {prepareUriForParsing} from \"../../service/uri/BaseUriService\";\r\n\r\nexport default function FoodDataPanelContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const queryString = window.location.search.substring(1)\r\n    const equalOperator = queryString.indexOf(\"=\")\r\n    const key = queryString.substring(0, equalOperator)\r\n    const value = prepareUriForParsing(queryString.substring(equalOperator + 1))\r\n\r\n    const openSelectorModal = key === QUERYKEY_DATAPANEL_ADD && value === \"1\"\r\n    const openCompositeSelectorModal = key === QUERYKEY_DATAPANEL_ADD_COMPOSITE && value === \"1\"\r\n\r\n    useEffect(() => {\r\n        buildDataPanelPageFromURI()\r\n    }, [applicationContext?.applicationData.foodDataPanel.selectedFoodItemIndex,\r\n        applicationContext?.applicationData.foodDataPanel.selectedFoodItems,\r\n        applicationContext?.applicationData.foodDataPanel.selectedDataPage,\r\n        applicationContext?.applicationData.foodDataPanel.displayMode,\r\n        applicationContext?.applicationData.foodDataPanel.chartConfigData,\r\n        applicationContext?.userData])\r\n\r\n    const buildDataPanelPageFromURI = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const {selectedFoodItemIndex, selectedFoodItems} = applicationContext.applicationData.foodDataPanel\r\n\r\n        if (selectedFoodItemIndex === null || !selectedFoodItems || selectedFoodItems.length === 0) {\r\n            createDataFromUriQuery()\r\n        } else {   // Set new URI Query\r\n            updateUriQuery(selectedFoodItemIndex)\r\n        }\r\n    }\r\n\r\n    if (!applicationContext || !applicationContext.ready) {\r\n        return <div/>\r\n    }\r\n\r\n    const chartConfigData = applicationContext.applicationData.foodDataPanel.chartConfigData\r\n\r\n    const updateUriQuery = (selectedFoodItemIndex: number) => {\r\n        const selectedFoodItem = selectedFoodItems[selectedFoodItemIndex]\r\n        const userData = applicationContext.userData\r\n        const {\r\n            selectedDataPage,\r\n            displayMode,\r\n            chartConfigData\r\n        } = applicationContext.applicationData.foodDataPanel\r\n\r\n        // New query for aggregated food item\r\n        if (selectedFoodItem.aggregated) {\r\n            const uriDataObject: AggregatedFoodItemUriData = {\r\n                selectedFoodItem: {...selectedFoodItem, component: undefined},\r\n                selectedDataPage: selectedDataPage,\r\n                userData: userData,\r\n                chartConfigData: chartConfigData\r\n            }\r\n\r\n            const query = convertAggregatedDataJsonToUriString(uriDataObject)\r\n\r\n            history.push({\r\n                pathName: PATH_FOODDATA_PANEL,\r\n                search: `${QUERYKEY_DATAPANEL_AGGREGATED}=${query}`\r\n            })\r\n        } else {   // New query for a default food item\r\n            const {portion, selectedSource, supplementData, combineData} = selectedFoodItem\r\n            const foodItemData: FoodItemUriData = {\r\n                foodItemId: selectedFoodItem.foodItem.id,\r\n                portionData: portion,\r\n                source: selectedSource,\r\n                supplementData: supplementData,\r\n                combineData: combineData\r\n            }\r\n            let query = makeFoodDataPanelDefaultUri(foodItemData, userData, selectedDataPage, displayMode,\r\n                chartConfigData)\r\n\r\n            const currentQuery = window.location.search\r\n            if (currentQuery.includes(\"&group=\")) {\r\n                const groupFragment = currentQuery.substring(currentQuery.indexOf(\"&group=\"));\r\n                query += groupFragment;\r\n            }\r\n\r\n            history.push({\r\n                pathName: PATH_FOODDATA_PANEL,\r\n                search: `${QUERYKEY_DATAPANEL_ITEM}=${query}`\r\n            })\r\n        }\r\n    }\r\n\r\n    const createDataFromUriQuery = () => {\r\n        const {\r\n            addItemToFoodDataPanel,\r\n            setSelectedDataPage,\r\n            setSelectedDisplayMode\r\n        } = applicationContext.setFoodDataPanelData\r\n\r\n        // Set data from an aggregated food item query\r\n        if (key === QUERYKEY_DATAPANEL_AGGREGATED && value.length > 1) {\r\n            try {\r\n                const uriDataObject: AggregatedFoodItemUriData | null = convertAggregatedUriStringToObject(chartConfigData, value)\r\n                if (!uriDataObject) {\r\n                    return\r\n                }\r\n\r\n                if (checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n                    return\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(uriDataObject.chartConfigData)\r\n                setSelectedDataPage(uriDataObject.selectedDataPage)\r\n                applicationContext.setUserData(uriDataObject.userData)\r\n\r\n                const selectedFoodItemWithComponent = makeFoodDataPanelComponent(uriDataObject.selectedFoodItem,\r\n                    applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n                if (selectedFoodItemWithComponent) {\r\n                    selectedFoodItemWithComponent.aggregated = true\r\n                    addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n                }\r\n            } catch (e) {\r\n                if (applicationContext.debug) {\r\n                    console.log(e)\r\n                }\r\n            }\r\n        }\r\n\r\n        // Set data from a simple food item (create data from query parameters)\r\n        if (key === QUERYKEY_DATAPANEL_ITEM && value.length > 1) {\r\n            const uriDataObject = parseFoodDataPanelDefaultUri(value, chartConfigData)\r\n            if (uriDataObject) {\r\n                const foodItem = applicationContext.foodDataCorpus.foodItems.find(\r\n                    foodItem => foodItem.id === uriDataObject.selectedFoodItem.foodItemId\r\n                )\r\n\r\n                if (!foodItem) {\r\n                    return\r\n                }\r\n\r\n                if (checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n                    return\r\n                }\r\n\r\n                applicationContext.setUserData(uriDataObject.userData)\r\n                const foodClass = applicationContext.foodDataCorpus.foodClasses.find(\r\n                    foodClass => foodClass.id === foodItem.foodClass\r\n                )\r\n\r\n                const selectedFoodItem: SelectedFoodItem = {\r\n                    id: 1,\r\n                    foodItem: foodItem,\r\n                    foodClass: foodClass,\r\n                    portion: uriDataObject.selectedFoodItem.portionData,\r\n                    selectedSource: uriDataObject.selectedFoodItem.source,\r\n                    combineData: uriDataObject.selectedFoodItem.combineData,\r\n                    supplementData: uriDataObject.selectedFoodItem.supplementData\r\n                }\r\n\r\n                setSelectedDataPage(uriDataObject.selectedDataPage)\r\n                setSelectedDisplayMode(uriDataObject.displayMode)\r\n\r\n                const selectedFoodItemWithComponent = makeFoodDataPanelComponent(selectedFoodItem,\r\n                    applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n                if (selectedFoodItemWithComponent) {\r\n                    addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(uriDataObject.chartConfigData)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const selectedFoodItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems\r\n\r\n    const onTabChange = (foodId) => {\r\n        buildDataPanelPageFromURI()\r\n        for (let i = 0; i < selectedFoodItems.length; i++) {\r\n            if (selectedFoodItems[i].id === foodId) {\r\n                applicationContext.setFoodDataPanelData.setSelectedFoodTab(i)\r\n            }\r\n        }\r\n    }\r\n\r\n    const onNewFoodItemSelected = (): void => {\r\n        buildDataPanelPageFromURI()\r\n        const newTabIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length - 1\r\n        applicationContext.setFoodDataPanelData.setSelectedFoodTab(newTabIndex)\r\n    }\r\n\r\n    const selectedTabIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n    if (!(selectedTabIndex >= 0)) {\r\n        return <div/>\r\n    }\r\n\r\n    const selectedFoodItem = applicationContext.applicationData.foodDataPanel.selectedFoodItems[selectedTabIndex]\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('FoodDataPanelContainer: Render, selected food item = ', selectedFoodItem)\r\n    }\r\n\r\n    const containerDivClass = isMobileDevice() ? \"\" : \"d-flex flex-row justify-content-center\"\r\n    const basepanelClass = selectedFoodItems && selectedFoodItems.length\r\n        ? \"d-flex flex-row foodanalyzer-basepanel\"\r\n        : \"d-flex flex-row foodanalyzer-basepanel-empty\";\r\n\r\n    return <div className={\"container-scroll container-fluid\"}>\r\n        {selectedFoodItem !== null &&\r\n            <div style={{paddingTop: \"4vh\"}}>\r\n                <div className={containerDivClass} >\r\n                    <div className={basepanelClass}>\r\n                        <div>\r\n                            <FoodAnalyzerContainer onNewFoodItemSelected={onNewFoodItemSelected}\r\n                                                   openSelectorModal={openSelectorModal}\r\n                                                   openCompositeSelectorModal={openCompositeSelectorModal}\r\n                            />\r\n                        </div>\r\n                        <div className={\"d-flex flex-row\"}>\r\n                            <div className=\"col foodanalyzer-inner-container\">\r\n                                {selectedFoodItems && selectedFoodItems.length > 0 ?\r\n                                    <div>\r\n                                        <TabContainer indexToSet={selectedTabIndex} onTabChange={onTabChange}/>\r\n                                    </div>\r\n                                    :\r\n                                    <div className={\"form-text\"} style={{margin: \"1.2vw\"}}>\r\n                                        <p>\r\n                                            <i>\r\n                                                {applicationStrings.text_empty_fooddatapanel[languageContext.language]}\r\n                                            </i>\r\n                                        </p>\r\n                                        {isMobileDevice() &&\r\n                                        <p>\r\n                                            <FaExclamationTriangle/> {applicationStrings.text_empty_fooddatapanel_mobileInfo[languageContext.language]}\r\n                                        </p>\r\n                                        }\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        }\r\n    </div>\r\n\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport FoodSelector from \"./FoodSelector\";\r\nimport {Button, Card, CardDeck} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {initialComparisonFoodClassId, initialFoodClassId} from \"../../config/ApplicationSetting\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\n\r\ninterface DirectCompareSelectorProps {\r\n    updateSelectedFoodItems: (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => void\r\n}\r\n\r\nconst STATUS_FIRST_TIME = \"first time\"\r\nconst STATUS_NOT_UPDATED = \"not updated\"\r\nconst STATUS_UPDATED = \"updated\"\r\n\r\nexport function DirectCompareSelector(props: DirectCompareSelectorProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const language = languageContext.language\r\n\r\n    // Checkbox states (needed to update global configuration)\r\n    const [supplementData1, setSupplementData1] = useState<boolean>(true)\r\n    const [combineData1, setCombineData1] = useState<boolean>(false)\r\n\r\n    const [supplementData2, setSupplementData2] = useState<boolean>(true)\r\n    const [combineData2, setCombineData2] = useState<boolean>(false)\r\n\r\n    const initialItem1 = applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem1 !== null\r\n        ? applicationContext.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        : null\r\n\r\n    const initialItem2 = applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2 !== null\r\n        ? applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        : null\r\n\r\n    const [selectedFoodItem1, setSelectedFoodItem1] = useState<SelectedFoodItem | null>(initialItem1)\r\n    const [selectedFoodItem2, setSelectedFoodItem2] = useState<SelectedFoodItem | null>(initialItem2)\r\n    const [displayStatus, setDisplayStatus] = useState<string>(STATUS_FIRST_TIME)\r\n\r\n    useEffect(() => {\r\n        if(applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2) {\r\n            const {selectedFoodItem1, selectedFoodItem2} = applicationContext.applicationData.directCompareDataPanel\r\n            if(selectedFoodItem1 && selectedFoodItem2) {\r\n                updateSelectedFoodItem1(selectedFoodItem1)\r\n                updateSelectedFoodItem2(selectedFoodItem2)\r\n            }\r\n        }\r\n\r\n    }, [applicationContext?.applicationData.directCompareDataPanel, supplementData1, combineData1, supplementData2, combineData2 ])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateSelectedFoodItem1 = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem1({...selectedFoodItem})\r\n        if (displayStatus !== STATUS_FIRST_TIME) {\r\n            setDisplayStatus(STATUS_UPDATED)\r\n        }\r\n    }\r\n\r\n    const updateSelectedFoodItem2 = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem2(selectedFoodItem)\r\n        if (displayStatus !== STATUS_FIRST_TIME) {\r\n            setDisplayStatus(STATUS_UPDATED)\r\n        }\r\n    }\r\n\r\n    const updateFoodSelectorConfig1 = (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => {\r\n        setSupplementData1(supplementData)\r\n        setCombineData1(combineData)\r\n    }\r\n\r\n    const updateFoodSelectorConfig2 = (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => {\r\n        setSupplementData2(supplementData)\r\n        setCombineData2(combineData)\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (selectedFoodItem1 && selectedFoodItem2) {\r\n            props.updateSelectedFoodItems(selectedFoodItem1, selectedFoodItem2)\r\n\r\n            if (applicationContext) {\r\n                const currentSelectorSetting1 = applicationContext.applicationData.directCompareDataPanel.foodSelector1\r\n                if (supplementData1 !== currentSelectorSetting1.sourceSupplement\r\n                    || combineData1 !== currentSelectorSetting1.sourceCombine) {\r\n                    applicationContext.setDirectCompareFoodSelector1(supplementData1, combineData1)\r\n                }\r\n\r\n                const currentSelectorSetting2 = applicationContext.applicationData.directCompareDataPanel.foodSelector2\r\n                if (supplementData2 !== currentSelectorSetting2.sourceSupplement\r\n                    || combineData2 !== currentSelectorSetting2.sourceCombine) {\r\n                    applicationContext.setDirectCompareFoodSelector2(supplementData2, combineData2)\r\n                }\r\n            }\r\n        }\r\n\r\n        setDisplayStatus(STATUS_NOT_UPDATED)\r\n    }\r\n\r\n\r\n    const renderFoodSelectorCard = (foodSelectorNumber: number) => {\r\n        const updateSelectedFoodItem = foodSelectorNumber === 1 ? updateSelectedFoodItem1 : updateSelectedFoodItem2\r\n        const styleClass = foodSelectorNumber === 1 ? {backgroundColor: direct_compare_color1} : {backgroundColor: direct_compare_color2}\r\n        const initialFoodClassToSet = foodSelectorNumber === 1 ? initialFoodClassId : initialComparisonFoodClassId\r\n\r\n        const selectedFoodItem = foodSelectorNumber === 1 ? selectedFoodItem1 : selectedFoodItem2\r\n        const updateFoodSelectorConfig = foodSelectorNumber === 1 ? updateFoodSelectorConfig1 : updateFoodSelectorConfig2\r\n\r\n        return <div style={{paddingTop: \"3.5vh\"}}>\r\n            <Card style={styleClass} >\r\n                <Card.Header>\r\n                    <div className={\"form-label-dc-selector\"}>\r\n                        {applicationStrings.label_food[language]} {foodSelectorNumber}\r\n                    </div>\r\n                </Card.Header>\r\n                <CardDeck>\r\n                    <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                  updateFoodSelectorConfig={updateFoodSelectorConfig}\r\n                                  compositeSelector={false}\r\n                                  directCompareSelector={true}\r\n                                  selectedFoodItem={selectedFoodItem}\r\n                                  defaultFoodClass={initialFoodClassToSet}\r\n                                  directCompareSelectorNumber={foodSelectorNumber}\r\n                    />\r\n                </CardDeck>\r\n            </Card>\r\n        </div>\r\n    }\r\n\r\n    const buttonName = displayStatus === STATUS_FIRST_TIME ? applicationStrings.button_show[language] : applicationStrings.button_update[language]\r\n\r\n    return <div>\r\n        {renderFoodSelectorCard(1)}\r\n        {renderFoodSelectorCard(2)}\r\n        <div style={{paddingTop: \"2vh\"}}>\r\n            <Button className={\"form-button float-end\"}\r\n                    disabled={displayStatus === STATUS_NOT_UPDATED}\r\n                    onClick={onSubmit}>\r\n                {buttonName}\r\n            </Button>\r\n        </div>\r\n    </div>\r\n}","import {isMobileDevice, WindowDimension} from \"./WindowDimension\";\r\nimport {\r\n    basedata_piechart_width,\r\n    basedata_piechart_width_m,\r\n    default_chart_height,\r\n    default_chart_height_m\r\n} from \"../config/ChartConfig\";\r\nimport {TAB_BASE_DATA} from \"../config/Constants\";\r\n\r\nexport function calculateChartHeight(currentDimension: WindowDimension, directCompare?: boolean, dataPage?: string): number {\r\n    const mobile = isMobileDevice()\r\n\r\n    // Mobile devices don't need to be regarded in direct compare menu, as the functionality is disabled\r\n    if(directCompare) {\r\n        return currentDimension.height / 3\r\n    } else {\r\n        return dataPage === TAB_BASE_DATA\r\n            ? mobile\r\n                ? basedata_piechart_width_m\r\n                : basedata_piechart_width\r\n            : mobile\r\n                ? default_chart_height_m\r\n                : default_chart_height\r\n    }\r\n}\r\n\r\nexport function calculateChartContainerHeight(currentDimension: WindowDimension, directCompare?: boolean): number {\r\n    return directCompare === true\r\n        ? calculateChartHeight(currentDimension, directCompare) + 24\r\n        : calculateChartHeight(currentDimension, directCompare) + 10\r\n}\r\n","import React, {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport getName from \"../../service/LanguageService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\n\r\nexport interface VerticalLabelProps {\r\n    selectedFoodItem: SelectedFoodItem\r\n}\r\n\r\nexport function VerticalLabel(props: VerticalLabelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if(applicationContext === null) {\r\n        return null\r\n    }\r\n\r\n    const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === props.selectedFoodItem.foodItem.conditionId)\r\n    const conditionName = condition ? getName(condition, languageContext.language) : \"\"\r\n\r\n    return (\r\n        <>\r\n            <div className={\"vertical-label-small\"}>{conditionName}</div>\r\n            <div className={\"vertical-label\"}>{props.selectedFoodItem.resolvedName}</div>\r\n        </>\r\n    )\r\n}","import MineralVitaminChart from \"../fooddatapanel/charts/MineralVitaminChart\";\r\nimport {AMOUNT_PORTION, CHART_VITAMINS} from \"../../config/Constants\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {BarChartConfigurationForm} from \"../charthelper/BarChartConfigurationForm\";\r\nimport {roundToNextValue} from \"../../service/calculation/MathService\";\r\nimport {\r\n    getMaximumValue,\r\n    getOverlappingValues,\r\n    nullifyNonOverlappingValues\r\n} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport {DC_MineralVitaminChartProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight} from \"../../service/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\n\r\nexport function DcMineralVitaminChart(props: DC_MineralVitaminChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfigVitamins = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.vitaminChartConfig\r\n        : initialDirectCompareConfigData.vitaminChartConfig\r\n\r\n    const chartConfigMinerals = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.mineralChartConfig\r\n        : initialDirectCompareConfigData.mineralChartConfig\r\n\r\n    const [portionType_vitamins, setPortionType_vitamins] = useState<string>(chartConfigVitamins.portionType)\r\n    const [portionType_minerals, setPortionType_minerals] = useState<string>(chartConfigMinerals.portionType)\r\n    const [expand100_vitamins, setExpand100_vitamins] = useState<boolean>(chartConfigVitamins.expand100)\r\n    const [expand100_minerals, setExpand100_minerals] = useState<boolean>(chartConfigMinerals.expand100)\r\n    const [synchronizeVitamins, setSynchronizeVitamins] = useState<boolean>(chartConfigVitamins.synchronize)\r\n    const [synchronizeMinerals, setSynchronizeMinerals] = useState<boolean>(chartConfigMinerals.synchronize)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n            updateChartConfig()\r\n            setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n        }, [portionType_minerals,\r\n            portionType_vitamins,\r\n            synchronizeVitamins,\r\n            synchronizeMinerals,\r\n            expand100_vitamins,\r\n            expand100_minerals,\r\n            containerHeight,\r\n            windowSize]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            const newChartConfig = {\r\n                ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                vitaminChartConfig: {\r\n                    portionType: portionType_vitamins,\r\n                    expand100: expand100_vitamins,\r\n                    synchronize: synchronizeVitamins\r\n                },\r\n                mineralChartConfig: {\r\n                    portionType: portionType_minerals,\r\n                    expand100: expand100_minerals,\r\n                    synchronize: synchronizeMinerals\r\n                }\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        }\r\n    }\r\n\r\n    const requirementData = props.selectedSubChart === CHART_VITAMINS\r\n        ? applicationContext.foodDataCorpus.dietaryRequirements?.vitaminRequirementData\r\n        : applicationContext.foodDataCorpus.dietaryRequirements?.mineralRequirementData\r\n\r\n    if (!requirementData) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value = event.target.value\r\n        props.selectedSubChart === CHART_VITAMINS\r\n            ? setPortionType_vitamins(value)\r\n            : setPortionType_minerals(value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        props.selectedSubChart === CHART_VITAMINS\r\n            ? setExpand100_vitamins(!expand100_vitamins)\r\n            : setExpand100_minerals(!expand100_minerals)\r\n    }\r\n\r\n    const handleSynchronize = () => {\r\n        props.selectedSubChart === CHART_VITAMINS\r\n            ? setSynchronizeVitamins(!synchronizeVitamins)\r\n            : setSynchronizeMinerals(!synchronizeMinerals)\r\n    }\r\n\r\n    const portionType = props.selectedSubChart === CHART_VITAMINS\r\n        ? portionType_vitamins\r\n        : portionType_minerals\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS\r\n            ? expand100_vitamins\r\n            : expand100_minerals\r\n        const synchronize = props.selectedSubChart === CHART_VITAMINS\r\n            ? synchronizeVitamins\r\n            : synchronizeMinerals\r\n\r\n        const barChartProps = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox,\r\n            handleSynchronize: handleSynchronize\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps}/>\r\n    }\r\n\r\n    const nutrientData1 = getNutrientData(props.selectedFoodItem1)\r\n    const nutrientData2 = getNutrientData(props.selectedFoodItem2)\r\n\r\n    let dataSet1 = props.selectedSubChart === CHART_VITAMINS ? nutrientData1.vitaminData : nutrientData1.mineralData\r\n    let dataSet2 = props.selectedSubChart === CHART_VITAMINS ? nutrientData2.vitaminData : nutrientData2.mineralData\r\n\r\n    const synchronize = props.selectedSubChart === CHART_VITAMINS ? synchronizeVitamins : synchronizeMinerals\r\n\r\n    if (synchronize) {\r\n        const overlappingAttributes = getOverlappingValues(dataSet1, dataSet2)\r\n        dataSet1 = nullifyNonOverlappingValues(dataSet1, overlappingAttributes)\r\n        dataSet2 = nullifyNonOverlappingValues(dataSet2, overlappingAttributes)\r\n    }\r\n\r\n    const portion1 = portionType === AMOUNT_PORTION ? props.selectedFoodItem1.portion.amount : 100\r\n    const portion2 = portionType === AMOUNT_PORTION ? props.selectedFoodItem2.portion.amount : 100\r\n\r\n    const maxValue1 = getMaximumValue(dataSet1, portion1, requirementData, applicationContext.userData)\r\n    const maxValue2 = getMaximumValue(dataSet2, portion2, requirementData, applicationContext.userData)\r\n    const maxValue = Math.max(maxValue1, maxValue2)\r\n\r\n    const maxY = synchronize\r\n        ? roundToNextValue(maxValue) : undefined\r\n\r\n    const preConfigVitamins = {\r\n        maxValue: maxY,\r\n        portionType: portionType_vitamins,\r\n        expand100: expand100_vitamins,\r\n        synchronize: synchronizeVitamins\r\n    }\r\n\r\n    const preconfigMinerals = {\r\n        maxValue: maxY,\r\n        portionType: portionType_minerals,\r\n        expand100: expand100_minerals,\r\n        synchronize: synchronizeMinerals\r\n    }\r\n\r\n    const preconfig = props.selectedSubChart === CHART_VITAMINS ? preConfigVitamins : preconfigMinerals\r\n\r\n    const preconfigFoodItem1 = {...preconfig, barChartColor: direct_compare_color1}\r\n    const preconfigFoodItem2 = {...preconfig, barChartColor: direct_compare_color2}\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}/>\r\n                <MineralVitaminChart selectedSubChart={props.selectedSubChart}\r\n                                     selectedFoodItem={props.selectedFoodItem1}\r\n                                     precalculatedData={dataSet1}\r\n                                     directCompareUse={true} directCompareConfig={preconfigFoodItem1}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}/>\r\n                <MineralVitaminChart selectedSubChart={props.selectedSubChart}\r\n                                     selectedFoodItem={props.selectedFoodItem2}\r\n                                     precalculatedData={dataSet2}\r\n                                     directCompareUse={true} directCompareConfig={preconfigFoodItem2}/>\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {PieChartConfigurationForm} from \"../charthelper/PieChartConfigurationForm\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport BaseDataChart from \"../fooddatapanel/charts/BaseDataChart\";\r\nimport {\r\n    CARBS_DATA_BASE,\r\n    LIPIDS_DATA_BASE,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_LIPIDS_DATA\r\n} from \"../../config/Constants\";\r\nimport LipidsDataChart from \"../fooddatapanel/charts/LipidsDataChart\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {\r\n    PieChartConfigurationProps,\r\n    PieChartDirectCompareConfig,\r\n    PieChartDirectCompareProp\r\n} from \"../../types/livedata/ChartPropsData\";\r\nimport CarbsDataChart from \"../fooddatapanel/charts/CarbsDataChart\";\r\nimport {\r\n    GeneralChartConfigDirectCompareWithSubCharts,\r\n    GeneralChartConfigWithDetails\r\n} from \"../../types/livedata/ChartConfigData\";\r\nimport {calculateChartContainerHeight} from \"../../service/ChartSizeCalculation\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\n\r\n/**\r\n * Re-usable direct compare chart component for pie-chart data pages (Lipids, Carbs, Base Data)\r\n */\r\nexport function DcPieChart(props: PieChartDirectCompareProp) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    let initialConfig\r\n    switch (props.dataPage) {\r\n        case TAB_BASE_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.baseChartConfig\r\n                ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.baseChartConfig\r\n                : initialDirectCompareConfigData.baseChartConfig\r\n            break\r\n        case TAB_LIPIDS_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n                ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n                : initialDirectCompareConfigData.lipidsChartConfig\r\n            break\r\n        case TAB_CARBS_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n                ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n                : initialDirectCompareConfigData.carbsChartConfig\r\n            break\r\n    }\r\n\r\n    const [chartType, setChartType] = useState<string>(initialConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(initialConfig.showLegend)\r\n    const [showDetails, setShowDetails] = useState<boolean>(initialConfig.showDetails)\r\n    const [subChart1, setSubChart1] = useState<string>(initialConfig.subChart1)\r\n    const [subChart2, setSubChart2] = useState<string>(initialConfig.subChart2)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        const currentConfig = applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n        if (!currentConfig) {\r\n            return\r\n        }\r\n\r\n        if (props.dataPage === TAB_LIPIDS_DATA || props.dataPage === TAB_CARBS_DATA) {\r\n            const configObject: GeneralChartConfigDirectCompareWithSubCharts = props.dataPage === TAB_LIPIDS_DATA\r\n                ? currentConfig.lipidsChartConfig\r\n                : currentConfig.carbsChartConfig\r\n\r\n            if (chartType !== configObject.chartType || showLegend !== configObject.showLegend\r\n                 || subChart1 !== configObject.subChart1 || subChart2 !== configObject.subChart2) {\r\n                updateChartConfig()\r\n            }\r\n        } else if (props.dataPage === TAB_BASE_DATA) {\r\n            const configObject: GeneralChartConfigWithDetails = currentConfig.baseChartConfig\r\n            if (chartType !== configObject.chartType || showLegend !== configObject.showLegend || showDetails !== configObject?.showDetails) {\r\n                updateChartConfig()\r\n            }\r\n        }\r\n\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [chartType, showDetails, showLegend, subChart1, subChart2, containerHeight, windowSize.height])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            let newChartConfig\r\n\r\n            if (props.dataPage === TAB_BASE_DATA) {\r\n                const pieChartConfig: GeneralChartConfigWithDetails = {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    showDetails: showDetails\r\n                }\r\n\r\n                newChartConfig = {\r\n                    ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                    baseChartConfig: pieChartConfig\r\n                }\r\n            } else {\r\n                if (props.dataPage === TAB_LIPIDS_DATA) {\r\n                    newChartConfig = {\r\n                        ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                        lipidsChartConfig: {\r\n                            ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig,\r\n                            chartType: chartType,\r\n                            showLegend: showLegend,\r\n                            subChart1: subChart1,\r\n                            subChart2: subChart2\r\n                        }\r\n                    }\r\n                } else if (props.dataPage === TAB_CARBS_DATA) {\r\n                    newChartConfig = {\r\n                        ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                        carbsChartConfig: {\r\n                            ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig,\r\n                            chartType: chartType,\r\n                            showLegend: showLegend,\r\n                            subChart1: subChart1,\r\n                            subChart2: subChart2\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (newChartConfig) {\r\n                applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value = event.target.value\r\n        setChartType(value)\r\n    }\r\n\r\n    const handleShowLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const handleShowDetailsCheckbox = () => {\r\n        setShowDetails(!showDetails)\r\n    }\r\n\r\n    const handleSubchart1Change = (event: any): void => {\r\n        setSubChart1(event.target.value)\r\n    }\r\n\r\n    const handleSubchart2Change = (event: any): void => {\r\n        setSubChart2(event.target.value)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const chartProps = getConfigurationProps()\r\n        return <PieChartConfigurationForm key={`Config DirectCompare ${props.dataPage}`} {...chartProps}/>\r\n    }\r\n\r\n    const getConfigurationProps = (): PieChartConfigurationProps => {\r\n        let chartProps: PieChartConfigurationProps = {\r\n            chartType: chartType,\r\n            showLegend: showLegend,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleLegendCheckboxClick: handleShowLegendCheckbox,\r\n        }\r\n\r\n        if (props.dataPage === TAB_BASE_DATA) {\r\n            chartProps = {\r\n                ...chartProps,\r\n                detailsCheckboxAvailable: true,\r\n                showDetails: showDetails,\r\n                handleDetailsCheckboxClick: handleShowDetailsCheckbox\r\n            }\r\n        }\r\n\r\n        return chartProps\r\n    }\r\n\r\n\r\n    const getChartComponent = (selectedFoodItem: SelectedFoodItem, index: number) => {\r\n        let preconfig: PieChartDirectCompareConfig = {\r\n            chartType: chartType,\r\n            showLegend: showLegend,\r\n            showDetails: showDetails,\r\n        }\r\n\r\n        if (props.dataPage === TAB_BASE_DATA) {\r\n            return <BaseDataChart key={`${TAB_BASE_DATA} ${index}`} selectedFoodItem={selectedFoodItem}\r\n                                  directCompareUse={true}\r\n                                  directCompareConfig={preconfig}/>\r\n        }\r\n\r\n        if (props.dataPage === TAB_LIPIDS_DATA) {\r\n            const selectedSubChart = applicationContext\r\n                ? index === 1\r\n                    ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart1\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart1\r\n                        : LIPIDS_DATA_BASE\r\n                    : applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart2\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart2\r\n                        : LIPIDS_DATA_BASE\r\n                : LIPIDS_DATA_BASE\r\n\r\n            preconfig = {\r\n                ...preconfig,\r\n                subChart: selectedSubChart,\r\n                handleSubchartChange: index === 1 ? handleSubchart1Change : handleSubchart2Change,\r\n                chartIndex: index\r\n            }\r\n\r\n            return <LipidsDataChart key={`${TAB_LIPIDS_DATA} ${index}`} selectedFoodItem={selectedFoodItem}\r\n                                    directCompareUse={true}\r\n                                    directCompareConfig={preconfig}/>\r\n        }\r\n\r\n        if (props.dataPage === TAB_CARBS_DATA) {\r\n            const selectedSubChart = applicationContext\r\n                ? index === 1\r\n                    ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart1\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart1\r\n                        : CARBS_DATA_BASE\r\n                    : applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart2\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart2\r\n                        : CARBS_DATA_BASE\r\n                : CARBS_DATA_BASE\r\n\r\n            preconfig = {\r\n                ...preconfig,\r\n                subChart: selectedSubChart,\r\n                chartIndex: index,\r\n                handleSubchartChange: index === 1 ? handleSubchart1Change : handleSubchart2Change\r\n            }\r\n\r\n            return <CarbsDataChart key={`${TAB_CARBS_DATA} ${index}`} selectedFoodItem={selectedFoodItem}\r\n                                   directCompareUse={true}\r\n                                   directCompareConfig={preconfig}/>\r\n        }\r\n    }\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight, marginBottom: \"2vh\"}}\r\n                 key={\"directcompare container\" + containerHeight}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}/>\r\n                {getChartComponent(props.selectedFoodItem1, 1)}\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight, marginBottom: \"2vh\"}}\r\n                 key={\"directcompare container\" + containerHeight}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}/>\r\n                {getChartComponent(props.selectedFoodItem2, 2)}\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../charthelper/BarChartConfigurationForm\";\r\nimport {roundToNextValue} from \"../../service/calculation/MathService\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport ProteinDataChart from \"../fooddatapanel/charts/ProteinDataChart\";\r\nimport {BarChartDirectCompareConfig, DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight} from \"../../service/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {\r\n    getMaximumValue,\r\n    getOverlappingValues,\r\n    nullifyNonOverlappingValues\r\n} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\n\r\nexport function DcProteinDataChart(props: DirectCompareDataPanelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.proteinChartConfig\r\n        : initialDirectCompareConfigData.proteinChartConfig\r\n\r\n    const [portionType, setPortionType] = useState<string>(chartConfig.portionType)\r\n    const [expand100, setExpand100] = useState<boolean>(chartConfig.expand100)\r\n    const [synchronize, setSynchronize] = useState<boolean>(chartConfig.synchronize)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        updateChartConfig()\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [portionType, expand100, synchronize, containerHeight, windowSize.height])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            const newChartConfig = {\r\n                ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                proteinChartConfig: {\r\n                    portionType: portionType,\r\n                    expand100: expand100,\r\n                    synchronize: synchronize\r\n                }\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        }\r\n    }\r\n\r\n    const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.proteinRequirementData\r\n    if (!requirementData) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value = event.target.value\r\n        setPortionType(value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleSynchronize = () => {\r\n        setSynchronize(!synchronize)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const barChartProps = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox,\r\n            handleSynchronize: handleSynchronize\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps}/>\r\n    }\r\n\r\n    let dataSet1 = getNutrientData(props.selectedFoodItem1).proteinData\r\n    let dataSet2 = getNutrientData(props.selectedFoodItem2).proteinData\r\n\r\n    if (synchronize) {\r\n        const overlappingAttributes = getOverlappingValues(dataSet1, dataSet2)\r\n        dataSet1 = nullifyNonOverlappingValues(dataSet1, overlappingAttributes)\r\n        dataSet2 = nullifyNonOverlappingValues(dataSet2, overlappingAttributes)\r\n    }\r\n\r\n    const maxValue1 = getMaximumValue(dataSet1, props.selectedFoodItem1.portion.amount, requirementData, applicationContext.userData, true)\r\n    const maxValue2 = getMaximumValue(dataSet2, props.selectedFoodItem2.portion.amount, requirementData, applicationContext.userData, true)\r\n    const maxValue = Math.max(maxValue1, maxValue2)\r\n    const maxY = synchronize ? roundToNextValue(maxValue) : undefined\r\n\r\n    const preconfig: BarChartDirectCompareConfig = {\r\n        maxValue: maxY,\r\n        portionType: portionType,\r\n        expand100: expand100,\r\n        synchronize: synchronize,\r\n        barChartColor: ''\r\n    }\r\n\r\n    const preconfigFoodItem1 = {...preconfig, barChartColor: direct_compare_color1}\r\n    const preconfigFoodItem2 = {...preconfig, barChartColor: direct_compare_color2}\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}/>\r\n                <ProteinDataChart selectedFoodItem={props.selectedFoodItem1}\r\n                                  precalculatedData={dataSet1}\r\n                                  directCompareUse={true} directCompareConfig={preconfigFoodItem1}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}/>\r\n                <ProteinDataChart selectedFoodItem={props.selectedFoodItem2}\r\n                                  precalculatedData={dataSet2}\r\n                                  directCompareUse={true} directCompareConfig={preconfigFoodItem2}/>\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {Card} from \"react-bootstrap\";\r\nimport EnergyDataChart from \"../fooddatapanel/charts/EnergyDataChart\";\r\nimport {DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {calculateChartContainerHeight} from \"../../service/ChartSizeCalculation\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\n\r\nexport function DcEnergyChart(props: DirectCompareDataPanelProps) {\r\n    const windowSize = useWindowDimension()\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [containerHeight, windowSize])\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight, marginBottom: \"2vh\"}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}/>\r\n                <EnergyDataChart selectedFoodItem={props.selectedFoodItem1} directCompareUse={true}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight, marginBottom: \"2vh\"}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}/>\r\n                <EnergyDataChart selectedFoodItem={props.selectedFoodItem2} directCompareUse={true}/>\r\n            </div>\r\n        </Card>\r\n    </div>\r\n\r\n}","import {ChartMenuPanel} from \"../fooddatapanel/ChartMenuPanel\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {useContext} from \"react\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {DcMineralVitaminChart} from \"./DcMineralVitaminChart\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport {DcPieChart} from \"./DcPieChart\";\r\nimport {DcProteinDataChart} from \"./DcProteinDataChart\";\r\nimport {DcEnergyChart} from \"./DcEnergyChart\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {InfoData} from \"../fooddatapanel/charts/InfoData\";\r\n\r\nexport function DirectCompareDataPanel(props: DirectCompareDataPanelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const setDataPage = (datapage: string) => {\r\n        applicationContext.setDirectCompareData.setSelectedDirectCompareDataPage(datapage)\r\n    }\r\n\r\n    const foodNames = applicationContext.foodDataCorpus.foodNames\r\n\r\n    const nameId1 = props.selectedFoodItem1.foodItem.nameId ? props.selectedFoodItem1.foodItem.nameId : null\r\n    const nameId2 = props.selectedFoodItem2.foodItem.nameId ? props.selectedFoodItem2.foodItem.nameId : null\r\n\r\n    const name1 = nameId1 ? getNameFromFoodNameList(foodNames, nameId1, languageContext.language) : \"\"\r\n    const name2 = nameId2 ? getNameFromFoodNameList(foodNames, nameId2, languageContext.language) : \"\"\r\n\r\n    const selectedFoodItem1: SelectedFoodItem = {...props.selectedFoodItem1, resolvedName: name1}\r\n    const selectedFoodItem2: SelectedFoodItem = {...props.selectedFoodItem2, resolvedName: name2}\r\n\r\n    const selectedDataPage = applicationContext.applicationData.directCompareDataPanel.selectedDataPage\r\n\r\n    const renderCharts = () => {\r\n        switch (selectedDataPage) {\r\n            case TAB_BASE_DATA:\r\n                return <DcPieChart key={TAB_BASE_DATA}\r\n                                   selectedFoodItem1={selectedFoodItem1}\r\n                                   selectedFoodItem2={selectedFoodItem2}\r\n                                   dataPage={TAB_BASE_DATA}\r\n                />\r\n            case TAB_ENERGY_DATA:\r\n                return <DcEnergyChart selectedFoodItem1={selectedFoodItem1}\r\n                                      selectedFoodItem2={selectedFoodItem2}\r\n                />\r\n\r\n            case TAB_VITAMIN_DATA:\r\n                return <DcMineralVitaminChart key={TAB_VITAMIN_DATA}\r\n                                              selectedFoodItem1={selectedFoodItem1}\r\n                                              selectedFoodItem2={selectedFoodItem2}\r\n                                              selectedSubChart={CHART_VITAMINS}\r\n                />\r\n            case TAB_MINERAL_DATA:\r\n                return <DcMineralVitaminChart key={TAB_MINERAL_DATA}\r\n                                              selectedFoodItem1={selectedFoodItem1}\r\n                                              selectedFoodItem2={selectedFoodItem2}\r\n                                              selectedSubChart={CHART_MINERALS}\r\n                />\r\n            case TAB_LIPIDS_DATA:\r\n                return <DcPieChart key={TAB_LIPIDS_DATA}\r\n                                   selectedFoodItem1={selectedFoodItem1}\r\n                                   selectedFoodItem2={selectedFoodItem2}\r\n                                   dataPage={TAB_LIPIDS_DATA}\r\n                />\r\n            case TAB_CARBS_DATA:\r\n                return <DcPieChart key={TAB_CARBS_DATA}\r\n                                   selectedFoodItem1={selectedFoodItem1}\r\n                                   selectedFoodItem2={selectedFoodItem2}\r\n                                   dataPage={TAB_CARBS_DATA}\r\n                />\r\n            case TAB_PROTEINS_DATA:\r\n                return <DcProteinDataChart selectedFoodItem1={selectedFoodItem1}\r\n                                           selectedFoodItem2={selectedFoodItem2}\r\n                />\r\n            case TAB_INFO:\r\n                return <div>\r\n                    <Card>\r\n                        <InfoData selectedFoodItem={props.selectedFoodItem1} directCompare={true}/>\r\n                    </Card>\r\n                    <Card>\r\n                        <InfoData selectedFoodItem={props.selectedFoodItem2} directCompare={true}/>\r\n                    </Card>\r\n                </div>\r\n\r\n        }\r\n\r\n        return <div/>\r\n    }\r\n\r\n    return <div>\r\n        <Card.Header>\r\n            <ChartMenuPanel dataPage={selectedDataPage} verticalArrangement={false} setDataPage={setDataPage}/>\r\n        </Card.Header>\r\n        {renderCharts()}\r\n    </div>\r\n\r\n}","import { DirectCompareChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\"\r\nimport { DirectCompareUriData, FoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { getUpdatedDirectCompareChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\nimport {\r\n\tconvertUserDataObjectToString,\r\n\tconvertUserDataStringToObject,\r\n\tgetFoodItemUriData,\r\n\tmakeFoodItemDefaultUri\r\n} from \"./FoodDataPanelUriService\"\r\nimport {prepareUriForParsing} from \"./BaseUriService\";\r\n\r\nexport function makeDirectCompareDataUri(selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem, \r\n\t\tuserData: UserData, selectedDataPage: string, chartConfigData: DirectCompareChartConfigData): string {\r\n\tconst foodItemUriData1 = makeFoodItemUriData(selectedFoodItem1)\r\n\tconst foodItemUriData2 = makeFoodItemUriData(selectedFoodItem2)\r\n\t\r\n\tconst foodItem1DataUri = makeFoodItemDefaultUri(foodItemUriData1)\r\n\tconst foodItem2DataUri = makeFoodItemDefaultUri(foodItemUriData2)\r\n\t\r\n\tconst userDataUri = convertUserDataObjectToString(userData)\r\n\tconst chartConfigUri = makeChartConfigUriString(chartConfigData, selectedDataPage)\r\n\t\r\n\treturn `${foodItem1DataUri};${foodItem2DataUri};${selectedDataPage};${userDataUri};${chartConfigUri}`\r\n}\r\n\r\n\r\nfunction makeFoodItemUriData(selectedFoodItem: SelectedFoodItem): FoodItemUriData {\r\n\treturn {\r\n\t\tfoodItemId: selectedFoodItem.foodItem.id,\r\n\t\tportionData: selectedFoodItem.portion,\r\n\t\tsource: selectedFoodItem.selectedSource,\r\n\t\tcombineData: selectedFoodItem.combineData,\r\n\t\tsupplementData: selectedFoodItem.supplementData\r\n\t}\r\n}\r\n\r\n\r\nexport function parseDirectComparetUri(uri: string, chartConfigData: DirectCompareChartConfigData): DirectCompareUriData | null {\r\n\tconst fragments = prepareUriForParsing(uri).split(\";\")\r\n\tif(fragments.length !== 11) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst selectedDataPage = fragments[8]\r\n\tconst userData = convertUserDataStringToObject(fragments[9])\r\n\tconst chartConfigString = fragments[10]\r\n\t\r\n\tconst foodItemUriData1 = getFoodItemUriData(fragments)\r\n\tconst remainingFragments = fragments.slice(4)\r\n\tconst foodItemUriData2 = getFoodItemUriData(remainingFragments)\r\n\t\r\n\tif(!userData || !foodItemUriData1 || !foodItemUriData2) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst newChartConfigData = getUpdatedDirectCompareChartConfig(chartConfigData, chartConfigString, selectedDataPage)\r\n\t\r\n\treturn {\r\n\t\tselectedFoodItem1: foodItemUriData1,\r\n\t\tselectedFoodItem2: foodItemUriData2,\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n\t\r\n}","import {DirectCompareSelector} from \"../foodselector/DirectCompareSelector\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {DirectCompareDataPanel} from \"./DirectCompareDataPanel\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {PATH_DIRECT_COMPARE, QUERYKEY_DATAPANEL_ITEM} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {makeDirectCompareDataUri, parseDirectComparetUri} from \"../../service/uri/DirectCompareUriService\";\r\nimport {checkUserDataValidity, USERDATA_OK} from \"../../service/UserDataService\";\r\n\r\nexport default function DirectCompareContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const initialFoodItem1 = applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        : null\r\n\r\n    const initialFoodItem2 = applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        : null\r\n\r\n    const [selectedFoodItem1, setSelectedFoodItem1] = useState<SelectedFoodItem | null>(initialFoodItem1)\r\n    const [selectedFoodItem2, setSelectedFoodItem2] = useState<SelectedFoodItem | null>(initialFoodItem2)\r\n\r\n\tuseEffect(() => {\r\n        buildDataObjectsFromURI()\r\n    }, [applicationContext?.applicationData.directCompareDataPanel])\r\n\r\n\t\r\n    if (applicationContext === null || !applicationContext.ready) {\r\n        return <div/>\r\n    }\r\n\r\n\tconst buildDataObjectsFromURI = () => {\r\n\t\tif(!applicationContext) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tif(!selectedFoodItem1 || !selectedFoodItem2) {\t\t\t\r\n\t\t\tcreateDataFromUriQuery()\t\t\r\n\t\t} else {   // Set new URI Query\t\t\r\n\t\t\tupdateUriQuery()\r\n\t\t}\r\n    }\r\n\r\n\tconst chartConfigData = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n\tconst updateUriQuery = () => {\r\n\t\tconst userData = applicationContext.userData\r\n\t\tconst selectedDataPage = applicationContext.applicationData.directCompareDataPanel.selectedDataPage\r\n\r\n\t\tif(selectedFoodItem1 && selectedFoodItem2) {\r\n\t\t\tconst query = makeDirectCompareDataUri(selectedFoodItem1, selectedFoodItem2, userData, selectedDataPage, \r\n\t\t\t\tchartConfigData)\r\n\t\t\t\t\r\n\t\t\thistory.push({\r\n\t\t\t\tpathName: PATH_DIRECT_COMPARE,\r\n\t\t\t\tsearch: `${QUERYKEY_DATAPANEL_ITEM}=${query}`\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst createDataFromUriQuery = () => {\r\n\t\t\tconst queryString = window.location.search.substring(1)\r\n\t\t\tconst equalOperator = queryString.indexOf(\"=\")\r\n            const key = queryString.substring(0, equalOperator)\r\n            const value = queryString.substring(equalOperator+1)\r\n\r\n\t\t\t// Set data from a simple food item (create data from query parameters)\r\n\t\t\tif(key === QUERYKEY_DATAPANEL_ITEM && value.length > 1) {\r\n\t\t\t\tconst uriDataObject = parseDirectComparetUri(value, chartConfigData)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tif(uriDataObject) {\r\n\t\t\t\t\tconst foodItem1 = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem1.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tconst foodItem2 = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem2.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif(!foodItem1 || !foodItem2) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tapplicationContext.setUserData(uriDataObject.userData)\t\r\n\t\t\t\t\tapplicationContext.setDirectCompareData.updateDirectCompareChartConfig(uriDataObject.chartConfigData)\r\n\t\t\t\t\tapplicationContext.setDirectCompareData.setSelectedDirectCompareDataPage(uriDataObject.selectedDataPage)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst foodClass1 = applicationContext.foodDataCorpus.foodClasses.find(\r\n\t\t\t\t\t\tfoodClass => foodClass.id === foodItem1.foodClass)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tconst foodClass2 = applicationContext.foodDataCorpus.foodClasses.find(\r\n\t\t\t\t\t\tfoodClass => foodClass.id === foodItem2.foodClass)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem1: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1000,\r\n\t\t\t\t\t\tfoodItem: foodItem1,\r\n\t\t\t\t\t\tfoodClass: foodClass1,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem1.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem1.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem1.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem1.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem2: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1001,\r\n\t\t\t\t\t\tfoodItem: foodItem2,\r\n\t\t\t\t\t\tfoodClass: foodClass2,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem2.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem2.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem2.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem2.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tupdateSelectedFoodItems(selectedFoodItem1, selectedFoodItem2)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n    const updateSelectedFoodItems = (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => {\r\n    \tconst foodClassNameKey1 = selectedFoodItem1.foodClass?.nameKey\r\n\t\tapplicationContext.foodDataCorpus.foodNames.find(entry => entry.id === foodClassNameKey1);\r\n\t\tconst foodClassNameKey2 = selectedFoodItem2.foodClass?.nameKey\r\n\t\tapplicationContext.foodDataCorpus.foodNames.find(entry => entry.id === foodClassNameKey2);\r\n\t\tsetSelectedFoodItem1(selectedFoodItem1)\r\n        setSelectedFoodItem2(selectedFoodItem2)\r\n        applicationContext.setDirectCompareData.setSelectedDirectCompareItems(selectedFoodItem1, selectedFoodItem2)\r\n    }\r\n\r\n    return (\r\n        <div className={\"container-fluid\"}>\r\n            <div className={\"row\"}>\r\n                <div className={\"col-4\"} style={{paddingBottom: \"2vh\"}}>\r\n                    <DirectCompareSelector updateSelectedFoodItems={updateSelectedFoodItems}/>\r\n                </div>\r\n                <div className={\"col-8\"} style={{paddingTop: \"1vh\", paddingLeft: \"3vw\", paddingRight: \"3vw\"}}>\r\n                    {selectedFoodItem1 !== null && selectedFoodItem2 !== null ?\r\n                    <DirectCompareDataPanel selectedFoodItem1={selectedFoodItem1}\r\n                                            selectedFoodItem2={selectedFoodItem2}/>\r\n                        : <div className={\"form-text\"}><i>{applicationStrings.direct_compare_text[languageContext.language]}</i></div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {SEX_FEMALE, SEX_MALE} from \"../config/Constants\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    initialUserDataAge,\r\n    initialUserDataBreastfeeding,\r\n    initialUserDataLeisureSports,\r\n    initialUserDataPregnant,\r\n    initialUserDataSex,\r\n    initialUserDataSize,\r\n    initialUserDataWeight\r\n} from \"../config/ApplicationSetting\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {NotificationManager} from 'react-notifications'\r\nimport 'react-notifications/lib/notifications.css';\r\nimport {Form, FormControl, FormGroup} from \"react-bootstrap\";\r\nimport Select from 'react-select';\r\nimport {getPalCategories, getPalCategory} from \"../service/calculation/EnergyService\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\nimport {isMobileDevice, isSmallScreen, useWindowDimension} from \"../service/WindowDimension\";\r\nimport {\r\n    checkUserDataValidity,\r\n    USERDATA_ERROR_AGE,\r\n    USERDATA_ERROR_SIZE,\r\n    USERDATA_ERROR_WEIGHT\r\n} from \"../service/UserDataService\";\r\nimport {customSelectStyles} from \"../config/UI_Config\";\r\nimport {FaLightbulb} from \"react-icons/fa\";\r\n\r\nexport function UserSettings() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const [age, setAge] = useState<number>(initialUserDataAge)\r\n    const [size, setSize] = useState<number>(initialUserDataSize)\r\n    const [weight, setWeight] = useState<number>(initialUserDataWeight)\r\n    const [sex, setSex] = useState<string>(initialUserDataSex)\r\n    const [pregnant, setPregnant] = useState<boolean>(initialUserDataPregnant)\r\n    const [breastFeeding, setBreastFeeding] = useState<boolean>(initialUserDataBreastfeeding)\r\n    const [palValue, setPalValue] = useState<ReactSelectOption | null>(null)\r\n    const [leisureSport, setLeisureSport] = useState<boolean>(initialUserDataLeisureSports)\r\n\r\n    const windowSize = useWindowDimension()\r\n\r\n    useEffect(() => {\r\n        if (applicationContext) {\r\n            setAge(applicationContext.userData.age)\r\n            setSize(applicationContext.userData.size)\r\n            setWeight(applicationContext.userData.weight)\r\n            setSex(applicationContext.userData.sex)\r\n            setPregnant(applicationContext.userData.pregnant)\r\n            setBreastFeeding(applicationContext.userData.breastFeeding)\r\n            setLeisureSport(applicationContext.userData.leisureSports)\r\n        }\r\n    }, [applicationContext])\r\n\r\n    const changeAge = (event: any) => {\r\n        setAge(event.target.value)\r\n    }\r\n\r\n    const changeSize = (event: any) => {\r\n        setSize(event.target.value)\r\n    }\r\n\r\n    const changeWeight = (event: any) => {\r\n        setWeight(event.target.value)\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value;\r\n        const sex = value === SEX_MALE ? SEX_MALE : SEX_FEMALE;\r\n        if (sex === SEX_MALE) {\r\n            setPregnant(false)\r\n            setBreastFeeding(false)\r\n        }\r\n        setSex(sex)\r\n    }\r\n\r\n    const changePregnant = () => {\r\n        setPregnant(!pregnant)\r\n    }\r\n\r\n    const changeBreastFeeding = () => {\r\n        setBreastFeeding(!breastFeeding)\r\n    }\r\n\r\n    const changeAdditionalPalPorts = () => {\r\n        setLeisureSport(!leisureSport)\r\n    }\r\n\r\n    const changePalValue = (value: ReactSelectOption) => {\r\n        setPalValue(value)\r\n    }\r\n\r\n    const submitUserData = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const userData: UserData = {\r\n            age: age,\r\n            size: size,\r\n            weight: weight,\r\n            sex: sex,\r\n            pregnant: pregnant,\r\n            breastFeeding: breastFeeding,\r\n            palValue: palValue ? palValue.value : applicationContext.userData.palValue,\r\n            leisureSports: leisureSport,\r\n            initialValues: false\r\n        }\r\n\r\n        const inputOk = checkInputValidity(userData)\r\n\r\n        if (inputOk) {\r\n            applicationContext.setUserData(userData)\r\n            NotificationManager.success(applicationStrings.message_userdata_success[lang])\r\n        }\r\n    }\r\n\r\n\r\n    const checkInputValidity = (userData: UserData) => {\r\n        const validationResult = checkUserDataValidity(userData)\r\n\r\n        if (validationResult === USERDATA_ERROR_AGE) {\r\n            showMessage(applicationStrings.message_userdata_error_age[lang]);\r\n            return false;\r\n        } else if (validationResult === USERDATA_ERROR_SIZE) {\r\n            showMessage(applicationStrings.message_userdata_error_size[lang]);\r\n            return false;\r\n        } else if (validationResult === USERDATA_ERROR_WEIGHT) {\r\n            showMessage(applicationStrings.message_userdata_error_weight[lang]);\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    const showMessage = (message: string) => {\r\n        NotificationManager.error(message)\r\n    }\r\n\r\n    const inputClass = isSmallScreen(windowSize) ? \"form-control form-control-sm input-sm\" : \"form-control input\"\r\n\r\n    const renderTextField = (label, value, callback) => {\r\n        return (\r\n            <Form className={\"form-elements\"}>\r\n                <Form.Label>{label}:</Form.Label>\r\n                <FormControl\r\n                    className={inputClass}\r\n                    type=\"text\"\r\n                    value={value}\r\n                    onChange={callback}\r\n                />\r\n            </Form>\r\n        );\r\n    }\r\n\r\n    const renderSexRadioButtons = () => {\r\n        const classRow = isMobileDevice() ? \"form-row-indent-m\" : \"form-row-indent\"\r\n\r\n        return (\r\n            <div className={classRow}>\r\n                <Form.Check type=\"radio\"\r\n                            className=\"form-label\"\r\n                            inline={true}\r\n                            label={applicationStrings.label_userSettings_sex_male[lang]}\r\n                            value={SEX_MALE}\r\n                            checked={(sex === SEX_MALE)}\r\n                            onChange={handleRadioButtonClick}\r\n                />\r\n                <Form.Check type=\"radio\"\r\n                            className=\"form-label\"\r\n                            inline={true}\r\n                            label={applicationStrings.label_userSettings_sex_female[lang]}\r\n                            value={SEX_FEMALE}\r\n                            checked={(sex !== SEX_MALE)}\r\n                            onChange={handleRadioButtonClick}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderFemaleCheckboxes = () => {\r\n        return (\r\n            <div className=\"form\">\r\n                <div>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                checked={pregnant}\r\n                                disabled={sex === SEX_MALE}\r\n                                label={applicationStrings.label_userSettings_pregnant[lang]}\r\n                                onClick={changePregnant}>\r\n                    </Form.Check>\r\n                </div>\r\n                <div>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                disabled={sex === SEX_MALE}\r\n                                label={applicationStrings.label_userSettings_breastfeeding[lang]}\r\n                                onClick={changeBreastFeeding}>\r\n                    </Form.Check>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const renderPalList = (userData: UserData) => {\r\n        const palCategories = getPalCategories(lang);\r\n        if (!palCategories) {\r\n            return <div/>\r\n        }\r\n\r\n        if (!palValue) {   // Initialize pal value first time\r\n            let userDataPalValue = palCategories.find(palObject => palObject.value === userData.palValue)\r\n            if (!userDataPalValue) {\r\n                userDataPalValue = palCategories[0]\r\n            }\r\n            setPalValue(userDataPalValue)\r\n        }\r\n\r\n        if (!palValue) {\r\n            return <div/>\r\n        }\r\n\r\n        const descriptionCode = `palcat_desc_${getPalCategory(palValue.value)}`\r\n        const description = applicationStrings[descriptionCode][lang];\r\n\r\n        return (\r\n            <div>\r\n                <div className={\"usersettings-pal\"}>\r\n                    <label className=\"form-label\">{applicationStrings.label_userSettings_palValue[lang]}:</label>\r\n                    <Select className=\"form-control-sm\"\r\n                            options={palCategories}\r\n                            value={palValue}\r\n                            isSearchable={false}\r\n                            styles={customSelectStyles}\r\n                            onChange={(value) => changePalValue(value)}\r\n                    />\r\n                </div>\r\n                <p className=\"usersettings-pal-text\">\r\n                    {description}\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderActivityCheckboxes = () => {\r\n        return (\r\n            <div className=\"form-row-indent\">\r\n                <label className=\"form-elements\"\r\n                       data-for={\"us-leisure\"}\r\n                       data-tip={applicationStrings.label_userSettings_leisureSports_tooltip[lang]}>\r\n                    <ReactTooltip id={\"us-leisure\"} place={\"right\"}/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_userSettings_leisureSports[lang]}\r\n                                checked={leisureSport}\r\n                                onChange={changeAdditionalPalPorts}>\r\n                    </Form.Check>\r\n                </label>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderSubmitButton = () => {\r\n        return (\r\n            <div className=\"text-center pt-4\">\r\n                <button type=\"button\"\r\n                        className=\"btn btn-primary\"\r\n                        onClick={() => submitUserData()}>\r\n                    {applicationStrings.button_submit[lang]}\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const value_age = (age != null) ? age : initialUserDataAge\r\n    const value_size = (size != null) ? size : initialUserDataSize\r\n    const value_weight = (weight != null) ? weight : initialUserDataWeight\r\n\r\n    return (\r\n        <div className={\"usersettings-form flex-column\"}>\r\n            <div>\r\n                <FaLightbulb/> <span className={\"form-text\"}>{applicationStrings.label_userSettings_intro[lang]}</span>\r\n            </div>\r\n            <div style={{paddingTop: \"4vh\"}}>\r\n                <div>\r\n                    <FormGroup>\r\n                        <div className={\"d-flex flex-row\"} style={{paddingBottom: \"3vh\"}}>\r\n                            {renderTextField(applicationStrings.label_userSettings_age[lang], value_age, changeAge)}\r\n                            {renderTextField(applicationStrings.label_userSettings_size[lang], value_size, changeSize)}\r\n                            {renderTextField(applicationStrings.label_userSettings_weight[lang], value_weight, changeWeight)}\r\n                        </div>\r\n                        <div className={\"d-flex flex-row align-items-baseline\"}>\r\n                            <Form.Label>\r\n                                {applicationStrings.label_userSettings_sex[lang]}\r\n                            </Form.Label>\r\n                            {renderSexRadioButtons()}\r\n                            {renderFemaleCheckboxes()}\r\n                        </div>\r\n                        <div>\r\n                            {renderPalList(applicationContext.userData)}\r\n                            {renderActivityCheckboxes()}\r\n                        </div>\r\n                    </FormGroup>\r\n                    {renderSubmitButton()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","export const MAIL_INVALID_NAME = \"mail invalid name\"\r\nexport const MAIL_NO_CONTENT = \"no content\"\r\nexport const MAIL_CONTENT_TO_LONG = \"content too long\"\r\nexport const MAIL_INVALID_ADDRESS = \"invalid address\"","import {MailData} from \"../types/livedata/MailData\";\r\nimport {\r\n    MAIL_INVALID_ADDRESS,\r\n    MAIL_CONTENT_TO_LONG,\r\n    MAIL_INVALID_NAME,\r\n    MAIL_NO_CONTENT\r\n} from \"../config/ErrorMessageCodes\";\r\nimport {maxMessageCharacters} from \"../config/ApplicationSetting\";\r\n\r\n\r\nconst mailRegex = '(?:[a-z0-9!#$%&\\'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&\\'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\\\])'\r\n\r\nexport function checkMailValidity(mail: MailData): string[] {\r\n    const errors: string[] = []\r\n\r\n    if (!checkName(mail.name)) {\r\n        errors.push(MAIL_INVALID_NAME)\r\n    }\r\n\r\n    if (!checkMailAddress(mail.address)) {\r\n        errors.push(MAIL_INVALID_ADDRESS)\r\n    }\r\n\r\n    if (!checkContent(mail.message)) {\r\n        errors.push(MAIL_NO_CONTENT)\r\n    }\r\n\r\n    if (!checkLength(mail.message)) {\r\n        errors.push(MAIL_CONTENT_TO_LONG)\r\n    }\r\n\r\n    return errors\r\n}\r\n\r\nfunction checkName(name: string): boolean {\r\n    return name.length >= 3 && name.length <= 50\r\n}\r\n\r\nfunction checkContent(content: string): boolean {\r\n    return content.length >= 30\r\n}\r\n\r\nfunction checkLength(content: string): boolean {\r\n    return content.length <= maxMessageCharacters\r\n}\r\n\r\nfunction checkMailAddress(mailAddress: string): boolean {\r\n    return mailAddress.match(mailRegex) !== null\r\n}\r\n","// Google:\r\nexport const ANALYTICS_MESS_ID = 'G-DXHX3Y13KZ'\r\nexport const ADSENSE_TRACKING_ID = 'ca-pub-2335013571820161'\r\nexport const RECAPTCHA_KEY = '6LdVyyMcAAAAACXul89K-Epl2dQu3XOvOo1bTIg3'\r\n\r\n// Emailjs:\r\nexport const SERVICE_ID = 'service_608vcxh'\r\nexport const TEMPLATE_ID = 'template_nledi86'\r\nexport const USER_ID = 'user_8TjzzLK0ZdfUQd7h7cieX'\r\n\r\n","import React, {useContext, useState} from \"react\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {maxMessageCharacters} from \"../../config/ApplicationSetting\";\r\nimport {MailData} from \"../../types/livedata/MailData\";\r\nimport {checkMailValidity} from \"../../service/MailService\";\r\nimport {NotificationManager} from 'react-notifications'\r\n\r\nimport {\r\n    MAIL_CONTENT_TO_LONG,\r\n    MAIL_INVALID_ADDRESS,\r\n    MAIL_INVALID_NAME,\r\n    MAIL_NO_CONTENT\r\n} from \"../../config/ErrorMessageCodes\";\r\nimport {SERVICE_ID, TEMPLATE_ID, USER_ID} from \"../../config/ApplicationKeys\";\r\nimport emailjs from \"emailjs-com\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\nexport function ContactForm() {\r\n    const language = useContext(LanguageContext).language\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [mailAddress, setMailAdress] = useState(\"\")\r\n    const [message, setMessage] = useState(\"\")\r\n    const [characters, setCharacters] = useState(0)\r\n\r\n    const updateName = (event) => {\r\n        setName(event.target.value)\r\n    }\r\n\r\n    const updateMailAddress = (event) => {\r\n        setMailAdress(event.target.value)\r\n    }\r\n\r\n    const updateMessage = (event) => {\r\n        setMessage(event.target.value)\r\n        setCharacters(event.target.value.length)\r\n    }\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n\r\n        const mailData: MailData = {\r\n            name: name.trim(),\r\n            address: mailAddress.trim(),\r\n            message: message.trim()\r\n        }\r\n\r\n        const validationErrors = checkMailValidity(mailData)\r\n        if(validationErrors.length > 0) {\r\n            const firstError = validationErrors[0]\r\n            let errorMessage = ''\r\n            switch(firstError) {\r\n                case MAIL_INVALID_NAME:\r\n                    errorMessage = applicationStrings.label_mail_error_name[language]\r\n                    break\r\n                case MAIL_INVALID_ADDRESS:\r\n                    errorMessage = applicationStrings.label_mail_error_mailaddress[language]\r\n                    break\r\n                case MAIL_NO_CONTENT:\r\n                    errorMessage = applicationStrings.label_mail_error_nocontent[language]\r\n                    break\r\n                case MAIL_CONTENT_TO_LONG:\r\n                    errorMessage = applicationStrings.label_mail_error_content_too_long[language]\r\n                    break\r\n            }\r\n\r\n            NotificationManager.error(errorMessage)\r\n            return\r\n        }\r\n\r\n        sendMail(mailData, language)\r\n    }\r\n\r\n    const sendMail = (mail: MailData, language: string) => {\r\n        const options = {\r\n            reply_to: mail.address,\r\n            from_name: mail.name,\r\n            message: mail.message,\r\n        }\r\n\r\n        emailjs.send(SERVICE_ID, TEMPLATE_ID, options, USER_ID)\r\n            .then((result) => {\r\n                NotificationManager.info(applicationStrings.message_email_success[language])\r\n                setName(\"\")\r\n                setMessage(\"\")\r\n                setMailAdress(\"\")\r\n                setCharacters(0)\r\n                if(applicationContext?.debug) {\r\n                    console.log('RESULT FROM EMAIL JS', result)\r\n                }\r\n            }, (error) => {\r\n                if(applicationContext?.debug) {\r\n                    console.log(error.text);\r\n                }\r\n                NotificationManager.info(applicationStrings.message_email_error[language])\r\n            });\r\n    }\r\n\r\n    const charactersLeft = maxMessageCharacters - characters\r\n    const charactersMessage = maxMessageCharacters >= 0\r\n        ? applicationStrings.label_mail_characters_left[language].replace(\"/xx/\", charactersLeft)\r\n        : applicationStrings.label_mail_too_long[language]\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className={\"container\"} style={{paddingBottom: \"30px\"}}>\r\n                <p>{applicationStrings.text_contact_form[language]}</p>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_name[language]}</span>\r\n                    <input className={\"form-control input\"}\r\n                           value={name}\r\n                           onChange={updateName}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_address[language]}</span>\r\n                    <input className={\"form-control input\"}\r\n                           value={mailAddress}\r\n                           onChange={updateMailAddress}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_message[language]}</span>\r\n                    <textarea className={\"form-control input\"}\r\n                              rows={8}\r\n                              value={message}\r\n                              onChange={updateMessage}\r\n                    />\r\n                </div>\r\n                <div><p style={{fontSize: \"0.8em\"}}>{charactersMessage}</p></div>\r\n                <button className={\"btn btn-primary\"} type=\"submit\">{applicationStrings.button_send[language]}</button>\r\n            </div>\r\n        </form>\r\n    );\r\n}","import {applicationStrings} from \"../../static/labels\";\r\nimport React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\nexport function Sources() {\r\n    const language = useContext(LanguageContext).language\r\n\r\n    return (\r\n        <div className={\"container\"}>\r\n            <h4><b>{applicationStrings.text_contact_source1[language]}</b></h4>\r\n            <h5>{applicationStrings.text_contact_source2[language]}</h5>\r\n            <p>U.S. Department of Agriculture, Agricultural Research Service.<br/>\r\n                FoodData Central, 2021-2023.</p>\r\n            <p>\r\n                Website: <a href={\"https://fdc.nal.usda.gov/\"}>Food Data Central</a>\r\n            </p>\r\n            <h5>{applicationStrings.text_contact_source3[language]}</h5>\r\n            <p>Deutsche Gesellschaft für Ernährung e.V.</p>\r\n            <p>\r\n                Website: <a href={\"https://www.dge.de/\"}>DGE</a>\r\n            </p>\r\n            <h5>{applicationStrings.text_contact_source4[language]}</h5>\r\n            <p>Prakash S. Shetty, Christiani J. K. Henry, Alison E. Black and A. M. Prentice:<br/>\r\n                \"Energy requirements of adults: an update on basal metabolic rates (BMRs) and physical activity\r\n                levels (PALs).\",<br/>\r\n                European journal of clinical nutrition (1996), Volume 50, Suppl 1, pp. 11-23\r\n            </p>\r\n        </div>\r\n    );\r\n\r\n}","import {buildDate, release} from \"../../config/ApplicationSetting\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport React from \"react\";\r\n\r\nexport function Versions() {\r\n    return <div className={\"container\"}>\r\n        {isMobileDevice() ?\r\n            <h3>\r\n                Food Compare\r\n            </h3>\r\n            :\r\n            <h1>\r\n                Food Compare\r\n            </h1>\r\n        }\r\n\r\n        <h6>\r\n            Version {release}\r\n        </h6>\r\n        <h6>\r\n            Build time: {buildDate}\r\n        </h6>\r\n\r\n        <p style={{paddingTop: \"24px\"}}>\r\n            <b>Changes in Version {release}</b>\r\n            <ul>\r\n                <li>Overall data view has been added.</li>\r\n                <li>Unit conversion between US weights and gram is now possible in the food selector.</li>\r\n                <li>Improved naming suggestions in the food selector typeahead field.</li>\r\n                <li>Food items in larger food classes (e.g. cheese) are now sorted lexicographically.</li>\r\n                <li>The calculation type of data calculation is now also shown on the info page of a selected food item.</li>\r\n                <li>Fixes: supplementing was sometimes carried out even when the corresponding option was disabled.</li>\r\n                <li>Several display bugs have been fixed.</li>\r\n                <li>Food Compare will no longer supplement data between two data sources of a food item if they differ too much in key\r\n                    parameters.</li>\r\n            </ul>\r\n        </p>\r\n\r\n    </div>\r\n}","export default __webpack_public_path__ + \"static/media/impressum-german.92ba80d6.png\";","export default __webpack_public_path__ + \"static/media/impressum-english.1bd33956.png\";","import React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\nimport impressum_de from '../../static/image/impressum-german.png';\r\nimport impressum_en from '../../static/image/impressum-english.png';\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LANGUAGE_DE} from \"../../config/Constants\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\nexport function Impressum() {\r\n    const lang = useContext(LanguageContext).language\r\n\r\n    const impressumPath = lang === LANGUAGE_DE ? impressum_de : impressum_en;\r\n    const columnClass = isMobileDevice() ? \"col-10\" : \"col-6\"\r\n\r\n    return (\r\n        <div className={\"container\"} style={{paddingBottom: \"30px\"}}>\r\n            <div className={columnClass}>\r\n                <p>\r\n                    <b>{applicationStrings.text_contact_disclaimer1[lang]}</b>\r\n                </p>\r\n                <p>\r\n                    <i>\r\n                        {applicationStrings.text_contact_disclaimer2[lang]}\r\n                    </i>\r\n                </p>\r\n                <p>\r\n                    <i>\r\n                        {applicationStrings.text_contact_disclaimer3[lang]}\r\n                    </i>\r\n                </p>\r\n            </div>\r\n            <div style={{paddingTop: \"20px\"}}>\r\n                <div style={{height: '180px'}}>\r\n                    <img src={impressumPath} alt={\"Impressumtext\"} style={{height: '180px'}}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\nimport dataprivacy from \"../../static/dataprivacy.json\";\r\n\r\nexport function DataPrivacy() {\r\n\r\n    const language = useContext(LanguageContext).language\r\n\r\n    return (\r\n        <div className={\"container\"}>\r\n            <p>\r\n                {dataprivacy[0][language]}\r\n            </p>\r\n            <p>\r\n                {dataprivacy[1][language]}\r\n            </p>\r\n            <p>\r\n                <a href=\"https://www.fastcounter.de/de/privacy/40519.htm\">https://www.fastcounter.de/de/privacy/40519.htm</a>.\r\n            </p>\r\n            <p>\r\n                {dataprivacy[2][language]}\r\n            </p>\r\n            <p>\r\n                <a href=\"https://www.fastcounter.de/datenschutz.html\">https://www.fastcounter.de/datenschutz.html</a>\r\n            </p>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {ToggleButton, ToggleButtonGroup} from \"react-bootstrap\";\r\nimport {ContactForm} from \"./ContactForm\";\r\nimport {Sources} from \"./Sources\";\r\nimport {Versions} from \"./Versions\";\r\nimport {Impressum} from \"./Impressum\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {DataPrivacy} from \"./DataPrivacy\";\r\n\r\nexport function ContactContainer() {\r\n    const languageContext = useContext(LanguageContext)\r\n    useContext(ApplicationDataContextStore);\r\n    const menu_contact = 1\r\n    const menu_sources = 2\r\n    const menu_privacy = 3\r\n    const menu_versions = 4\r\n    const menu_impressum = 5\r\n\r\n\r\n    const [selectedMenu, setSelectedMenu] = useState(menu_contact)\r\n    const buttonStyle = {width: \"175px\"}\r\n\r\n    const renderSubMenu = () => {\r\n        switch (selectedMenu) {\r\n            case menu_contact:\r\n                return <ContactForm/>\r\n            case menu_sources:\r\n                return <Sources/>\r\n            case menu_privacy:\r\n                return <DataPrivacy/>\r\n            case menu_versions:\r\n                return <Versions/>\r\n            case menu_impressum:\r\n                return <Impressum/>\r\n            default:\r\n                return <div/>\r\n        }\r\n    }\r\n\r\n    const onChangeSubmenu = (selectedMenu) => {\r\n        setSelectedMenu(selectedMenu)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={\"text-center\"} style={{paddingTop: \"25px\", paddingBottom: \"50px\"}}>\r\n                <ToggleButtonGroup className={\"contact\"}\r\n                                   type={\"radio\"}\r\n                                   name={\"contact menus\"}\r\n                                   defaultValue={menu_contact}>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_contact}\r\n                                  checked={selectedMenu === menu_contact}\r\n                                  onChange={() => onChangeSubmenu(menu_contact)}>\r\n                        {applicationStrings.menu_contact[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_sources}\r\n                                  checked={selectedMenu === menu_sources}\r\n                                  onChange={() => onChangeSubmenu(menu_sources)}>\r\n                        {applicationStrings.menu_contact_sources[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_privacy}\r\n                                  checked={selectedMenu === menu_privacy}\r\n                                  onChange={() => onChangeSubmenu(menu_privacy)}>\r\n                        {applicationStrings.menu_contact_dataprivacy[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_versions}\r\n                                  checked={selectedMenu === menu_versions}\r\n                                  onChange={() => onChangeSubmenu(menu_versions)}>\r\n                        {applicationStrings.menu_contact_versions[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_impressum}\r\n                                  checked={selectedMenu === menu_impressum}\r\n                                  onChange={() => onChangeSubmenu(menu_impressum)}>\r\n                        {applicationStrings.menu_contact_impressum[languageContext.language]}\r\n                    </ToggleButton>\r\n                </ToggleButtonGroup>\r\n            </div>\r\n            <div>\r\n                {renderSubMenu()}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {getCategorySelectList} from \"../../service/nutrientdata/CategoryService\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {getElementsOfRankingGroup, getNutrientGroups} from \"../../service/RankingService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport Select from 'react-select';\r\nimport {\r\n    NUTRIENT_MINERAL_INDEX,\r\n    PATH_RANKING,\r\n    QUERYKEY_DATAPANEL_RANKING,\r\n    NUTRIENT_VITAMIN_INDEX\r\n} from \"../../config/Constants\";\r\nimport {makeRankingPanelDataUri, parseRankingPanelDataUri} from \"../../service/uri/RankingPanelUriService\";\r\nimport {RankingPanelData} from \"../../types/livedata/ApplicationData\";\r\nimport {customSelectStyles} from \"../../config/UI_Config\";\r\nimport {FaLightbulb} from \"react-icons/fa\";\r\n\r\ninterface RankingSelectorProps {\r\n    openChart: (selectedCategory, selectedValue, use100gram, transformToDietaryRequirements) => void,\r\n    useHorizontalLayout: boolean,\r\n    numberOfChartItems: number\r\n}\r\n\r\nexport function RankingSelector(props: RankingSelectorProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const rankingPanelData = applicationContext?.applicationData.rankingPanelData\r\n\r\n    const initializeState = !!(rankingPanelData && rankingPanelData.selectedFoodCategory\r\n        && rankingPanelData.selectedGroup && rankingPanelData.selectedElement)\r\n\r\n    const [elementsList, setElementsList] = useState<any>()\r\n    const [initialized, setInitialized] = useState<boolean>(initializeState)\r\n\r\n    useEffect(() => {\r\n        if (applicationContext) {\r\n            const newElements = buildElementsList(applicationContext.applicationData.rankingPanelData.selectedGroup)\r\n            setElementsList(newElements)\r\n        }\r\n    }, [applicationContext?.applicationData.rankingPanelData.selectedGroup])\r\n\r\n    useEffect(() => {\r\n        if (selectedFoodCategory && selectedGroup && selectedElement && initialized) {\r\n            updateUriQuery()\r\n            openChart()\r\n        } else if (!initialized) {\r\n            buildRankingPanelPageFromURI()\r\n        }\r\n    }, [applicationContext?.applicationData.rankingPanelData.selectedFoodCategory,\r\n        applicationContext?.applicationData.rankingPanelData.selectedElement,\r\n        applicationContext?.applicationData.rankingPanelData.use100gram,\r\n        applicationContext?.applicationData.rankingPanelData.showDietaryRequirements,\r\n        elementsList\r\n    ])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const {\r\n        selectedFoodCategory,\r\n        selectedGroup,\r\n        selectedElement,\r\n        use100gram,\r\n        showDietaryRequirements\r\n    } = applicationContext.applicationData.rankingPanelData\r\n\r\n    const buildRankingPanelPageFromURI = () => {\r\n        const queryString = window.location.search.substring(1)\r\n        const equalOperator = queryString.indexOf(\"=\")\r\n        const key = queryString.substring(0, equalOperator)\r\n        const value = queryString.substring(equalOperator + 1)\r\n\r\n        if (key === QUERYKEY_DATAPANEL_RANKING && value.length > 1) {\r\n            const uriData: RankingPanelData | null = parseRankingPanelDataUri(value, applicationContext.foodDataCorpus,\r\n                language)\r\n            if (!uriData) {\r\n                return\r\n            }\r\n\r\n            const {selectedFoodCategory, selectedGroup, selectedElement} = uriData\r\n            if (selectedFoodCategory === null || selectedGroup === null || selectedElement === null) {\r\n                return\r\n            } else {   // Set new URI Query\r\n                applicationContext.setRankingPanelData(uriData)\r\n                openChart()\r\n                setInitialized(true)\r\n            }\r\n        }\r\n    }\r\n\r\n    const updateUriQuery = () => {\r\n        const query = makeRankingPanelDataUri(applicationContext.applicationData.rankingPanelData)\r\n\r\n        history.push({\r\n            pathName: PATH_RANKING,\r\n            search: `${QUERYKEY_DATAPANEL_RANKING}=${query}`\r\n        })\r\n    }\r\n\r\n    const handleFoodCategoryChange = (selectedOption) => {\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            selectedFoodCategory: selectedOption\r\n        }\r\n\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const handleGroupChange = (selectedOption) => {\r\n        setInitialized(true)\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            selectedGroup: selectedOption,\r\n            selectedElement: null\r\n        }\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n        props.openChart(null, null, false, false);\r\n    }\r\n\r\n    const handleValueChange = (selectedOption) => {\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            selectedElement: selectedOption\r\n        }\r\n\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const handlePortionAmountChange = () => {\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            use100gram: !use100gram\r\n        }\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const handleDietaryRequirementsCheckbox = () => {\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            showDietaryRequirements: !showDietaryRequirements\r\n        }\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const getFoodCategoryList = () => {\r\n        return getCategorySelectList(applicationContext.foodDataCorpus.categories, language)\r\n    }\r\n\r\n    const buildElementsList = (selectedGroup) => {\r\n        if (!selectedGroup) {\r\n            return;\r\n        }\r\n\r\n        return getElementsOfRankingGroup(selectedGroup.value, language)\r\n    }\r\n\r\n    const openChart = () => {\r\n        if (!selectedFoodCategory || !selectedGroup || !selectedElement) {\r\n            return\r\n        }\r\n\r\n        const rankingCategory = selectedGroup ? selectedGroup.value : null\r\n        const mineralOrVitaminCategory = (rankingCategory === NUTRIENT_VITAMIN_INDEX)\r\n            || (rankingCategory === NUTRIENT_MINERAL_INDEX);\r\n        const transformToDietaryRequirements = mineralOrVitaminCategory ? showDietaryRequirements : false;\r\n\r\n        props.openChart(selectedFoodCategory, selectedElement, use100gram, transformToDietaryRequirements);\r\n    }\r\n\r\n    const renderPortionForm = () => {\r\n        const rankingCategory = selectedGroup ? selectedGroup.value : null;\r\n\r\n        return (\r\n            <div className=\"column select-menu\" style={{paddingLeft: \"20px\", paddingTop: \"10px\"}}>\r\n                <form className=\"form-inline form-group\">\r\n                    <label className=\"form-elements form-label\">\r\n                        <input className={\"form-input\"}\r\n                               type=\"radio\"\r\n                               checked={(use100gram)}\r\n                               onChange={handlePortionAmountChange}\r\n                        />\r\n                        100 g\r\n                    </label>\r\n                    <label className=\"form-elements-largespace form-label\">\r\n                        <input className={\"form-input\"}\r\n                               type=\"radio\"\r\n                               checked={!use100gram}\r\n                               onChange={handlePortionAmountChange}\r\n                        />\r\n                        {applicationStrings.label_portion_common[language]}\r\n                    </label>\r\n                    {(rankingCategory === NUTRIENT_VITAMIN_INDEX || rankingCategory === NUTRIENT_MINERAL_INDEX) &&\r\n                    <Form.Label className=\"form-elements\">\r\n                        <Form.Check className=\"form-radiobutton\"\r\n                                    inline={true}\r\n                                    label={applicationStrings.label_ranking_dietaryRequirements[language]}\r\n                                    defaultChecked={showDietaryRequirements}\r\n                                    onClick={handleDietaryRequirementsCheckbox}>\r\n                        </Form.Check>\r\n                    </Form.Label>\r\n                    }\r\n                </form>\r\n                {props.numberOfChartItems > 100 &&\r\n                <div style={{paddingTop: \"20px\"}}>\r\n                    <FaLightbulb/> <span className={\"form-text\"}>{applicationStrings.ranking_note[language]}</span>\r\n                </div>\r\n                }\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n    const nutrientGroups = getNutrientGroups(language);\r\n\r\n    const containerClass = props.useHorizontalLayout ? \"container row\" : \"container\"\r\n    const selectorClass = props.useHorizontalLayout\r\n        ? \"col-4 select-menu form-section\"\r\n        : \"column select-menu form-section\"\r\n\r\n    return (\r\n        <div className={containerClass}>\r\n            <div className={selectorClass}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_category[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={getFoodCategoryList()}\r\n                        value={selectedFoodCategory}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleFoodCategoryChange}\r\n                />\r\n            </div>\r\n            <div className={selectorClass}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_group[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={nutrientGroups}\r\n                        value={selectedGroup}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleGroupChange}\r\n                />\r\n            </div>\r\n            <div className={selectorClass}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_value[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={elementsList}\r\n                        value={selectedElement}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleValueChange}\r\n                />\r\n            </div>\r\n            {renderPortionForm()}\r\n        </div>\r\n    )\r\n\r\n}","import {RankingPanelData} from \"../../types/livedata/ApplicationData\";\r\nimport {getCategorySelectList} from \"../nutrientdata/CategoryService\";\r\nimport FoodDataCorpus from \"../../types/nutrientdata/FoodDataCorpus\";\r\nimport {getElementsOfRankingGroup, getNutrientGroups} from \"../RankingService\";\r\nimport {prepareUriForParsing} from \"./BaseUriService\";\r\n\r\nexport function makeRankingPanelDataUri(rankingPanelData: RankingPanelData) {\r\n    const selectedCategory = rankingPanelData.selectedFoodCategory?.value\r\n    const selectedGroup = rankingPanelData.selectedGroup?.value\r\n    const selectedElement = rankingPanelData.selectedElement?.value\r\n\r\n    const use100gram = rankingPanelData.use100gram ? \"1\" : \"0\"\r\n    const showDailyRequirements = rankingPanelData.showDietaryRequirements ? \"1\" : \"0\"\r\n\r\n    return `${selectedCategory};${selectedGroup};${selectedElement};${use100gram}${showDailyRequirements}`\r\n}\r\n\r\nexport function parseRankingPanelDataUri(uri: string, foodDataCorpus: FoodDataCorpus, language: string): RankingPanelData | null {\r\n    const fragments = prepareUriForParsing(uri).split(\";\")\r\n    if(fragments.length !== 4) {\r\n        return null\r\n    }\r\n\r\n    if(fragments[3].length !== 2) {\r\n        return null\r\n    }\r\n\r\n    const selectedCategory = parseInt(fragments[0])\r\n    const selectedGroup = parseInt(fragments[1])\r\n    const selectedElement = fragments[2]\r\n\r\n    const foodCategories = getCategorySelectList(foodDataCorpus.categories, language)\r\n    const groups = getNutrientGroups(language)\r\n    const elements = getElementsOfRankingGroup(selectedGroup, language)\r\n\r\n    const selectedFoodCategoryOption = foodCategories.find(foodCategory => foodCategory.value === selectedCategory)\r\n    const selectedGroupOption = groups.find(group => group.value === selectedGroup)\r\n    const selectedElementOption: any = elements ? elements.find(element => element.value === selectedElement) : null\r\n\r\n    const use100g = fragments[3].substring(0, 1) !== \"0\"\r\n    const showDietaryRequirements = fragments[3].substring(1, 2) !== \"0\"\r\n\r\n    if(selectedFoodCategoryOption && selectedGroupOption && selectedElementOption) {\r\n        return {\r\n            selectedFoodCategory: selectedFoodCategoryOption,\r\n            selectedGroup: selectedGroupOption,\r\n            selectedElement: selectedElementOption,\r\n            use100gram: use100g,\r\n            showDietaryRequirements: showDietaryRequirements\r\n        }\r\n    } else {\r\n        return null\r\n    }\r\n}","import {ChartItem} from \"../../service/RankingService\";\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {color_green} from \"../../config/ChartConfig\";\r\nimport {getBarChartOptionsForRanking} from \"../../service/ChartConfigurationService\";\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\ninterface RankingChartProps {\r\n    chartItems: Array<ChartItem>\r\n    unit: string\r\n    selectedElement: string\r\n}\r\n\r\nexport function RankingChart(props: RankingChartProps) {\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const createChartData = () => {\r\n        const labels: Array<String> = [];\r\n        const data: Array<number> = [];\r\n\r\n        for (let i = 0; i < props.chartItems.length; i++) {\r\n            const chartItem = props.chartItems[i];\r\n\r\n            const name = chartItem.name\r\n            labels.push(name);\r\n            data.push(chartItem.value);\r\n        }\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                data: data,\r\n                backgroundColor: color_green,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const getOptions = () => {\r\n        let options = getBarChartOptionsForRanking(props.selectedElement, props.unit)\r\n        const unit = props.unit !== \"%\" ? props.unit : applicationStrings.label_requirement_chart[language]\r\n        options = {\r\n            ...options, plugins: {\r\n                ...options.plugins, title: {\r\n                    ...options.plugins.title,\r\n                    position: \"left\",\r\n                    align: \"center\",\r\n                    text: unit,\r\n                    padding: {\r\n                        bottom: \"20\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return options\r\n    }\r\n\r\n\r\n    const chartData: any = createChartData();\r\n    const options = getOptions();\r\n    const dataAvailable = chartData.datasets.length > 0 && chartData.datasets[0].data.length > 0;\r\n\r\n    const width = isMobileDevice()\r\n        ? 40 * props.chartItems.length + 150\r\n        : 50 * props.chartItems.length + 150\r\n\r\n    let containerStyle: any = {\r\n        position: \"relative\",\r\n        width: `${width}px`,\r\n        height: \"60vh\"\r\n    }\r\n\r\n    if (isMobileDevice()) {\r\n        containerStyle.height = `90vh`\r\n    }\r\n\r\n    const chartClass = isMobileDevice() ? \"ranking-chart-m\" : \"ranking-chart\";\r\n\r\n    return (\r\n        <div>\r\n            <p className={\"form-text\"} style={{fontWeight: \"bold\"}}>{props.selectedElement}</p>\r\n            <div className={`smooth-scroll ${chartClass}`}>\r\n                {dataAvailable ?\r\n                    <div style={containerStyle}>\r\n                        <Bar id=\"chart\"\r\n                             data={chartData}\r\n                             options={options}\r\n                        />\r\n                    </div>\r\n                    :\r\n                    <div>{applicationStrings.label_noData[language]}</div>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {ChartItem, getOrderedFoodList} from \"../../service/RankingService\";\r\nimport {convertAbsoluteValueToDailyRequirement} from \"../../service/calculation/DietaryRequirementService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {RankingSelector} from \"./RankingSelector\";\r\nimport {RankingChart} from \"./RankingChart\";\r\nimport {maxElementsInRankingChart} from \"../../config/ApplicationSetting\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport {getUnit} from \"../../service/calculation/NutrientCalculationService\";\r\n\r\nexport function RankingContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const [chartItems, setChartItems] = useState<Array<ChartItem>>([])\r\n    const [unit, setUnit] = useState<string>(\"g\")\r\n    const [selectedValue, setSelectedValue] = useState<ReactSelectOption | null>(null)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const openChart = (selectedCategory, selectedValue, use100gram, transformToDietaryRequirements) => {\r\n        if (!selectedValue) {\r\n            setChartItems([])\r\n            return\r\n        }\r\n\r\n        let category = 0;\r\n        if (selectedCategory) {\r\n            category = selectedCategory.value;\r\n        }\r\n\r\n        setSelectedValue(selectedValue)\r\n        const {foodItems, foodClasses, dietaryRequirements} = applicationContext.foodDataCorpus\r\n        const userData = applicationContext.userData\r\n\r\n        let orderedChartItems = getOrderedFoodList(foodItems, foodClasses, category,\r\n            selectedValue.value, use100gram, language, applicationContext?.foodDataCorpus.foodNames,\r\n            applicationContext?.foodDataCorpus.conditions);\r\n\r\n        if (transformToDietaryRequirements && dietaryRequirements) {\r\n            for (let i = 0; i < orderedChartItems.length; i++) {\r\n                orderedChartItems[i].value = convertAbsoluteValueToDailyRequirement(\r\n                    dietaryRequirements,\r\n                    selectedValue.value,\r\n                    orderedChartItems[i].value,\r\n                    userData\r\n                );\r\n            }\r\n        }\r\n\r\n        const unit = getUnit(selectedValue.value, transformToDietaryRequirements)\r\n\r\n        if (orderedChartItems.length > maxElementsInRankingChart) {\r\n            orderedChartItems = orderedChartItems.slice(0, maxElementsInRankingChart + 1)\r\n        }\r\n\r\n        setChartItems(orderedChartItems)\r\n        setUnit(unit)\r\n    }\r\n\r\n    const renderHelpText = () => {\r\n        const helpText = applicationStrings.text_ranking[language];\r\n\r\n        return (\r\n            <div className=\"col-md-6 col-lg-5 infotextMenus\" style={{padding: \"24px\"}}>\r\n                <i>{helpText}</i>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderEmptyDatapage = () => {\r\n        return (\r\n            <span>\r\n                {selectedValue === null ?\r\n                    <div>{renderHelpText()}</div>\r\n                    :\r\n                    <p>{applicationStrings.label_noData[language]}</p>\r\n                }\r\n            </span>\r\n        )\r\n    }\r\n\r\n    const numberOfChartItems = chartItems ? chartItems.length : 0;\r\n\r\n    // Note: The chart will only be displayed if at least 2 (!) items are in the result set.\r\n\r\n    const renderWebsite = () => (\r\n        <div className=\"container-fluid\" style={{paddingTop: \"24px\"}}>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <RankingSelector openChart={openChart}\r\n                                     useHorizontalLayout={false}\r\n                                     numberOfChartItems={numberOfChartItems}/>\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    {chartItems && chartItems.length > 1 ?\r\n                        <RankingChart chartItems={chartItems}\r\n                                      unit={unit}\r\n                                      selectedElement={selectedValue ? selectedValue.label : \"\"}/>\r\n                        :\r\n                        <div>{renderEmptyDatapage()}</div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const renderMobile = () => {\r\n        return (\r\n            <div className=\"container-fluid\" style={{paddingTop: \"24px\"}}>\r\n                <div>\r\n                    <RankingSelector openChart={openChart}\r\n                                     useHorizontalLayout={isMobileDevice()}\r\n                                     numberOfChartItems={numberOfChartItems}\r\n                    />\r\n                </div>\r\n                <hr/>\r\n                {chartItems && chartItems.length > 0 ?\r\n                    <RankingChart chartItems={chartItems}\r\n                                  unit={unit}\r\n                                  selectedElement={selectedValue ? selectedValue.label : \"\"}/>\r\n                    :\r\n                    <div>{renderEmptyDatapage()}</div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return isMobileDevice() ? renderMobile() : renderWebsite()\r\n}","import React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\n\r\nimport homeText3 from \"../static/hometext3.json\";\r\nimport {LANGUAGE_DE, PATH_HOME} from \"../config/Constants\";\r\nimport {isMobileDevice} from \"../service/WindowDimension\";\r\nimport {FaAngleDoubleRight} from \"react-icons/fa\";\r\nimport {useHistory} from 'react-router-dom';\r\n\r\ninterface HomeTextElement {\r\n    type: string\r\n    de: string\r\n    en: string\r\n}\r\n\r\ninterface HomeTextParagraph {\r\n    id: string,\r\n    img: string,\r\n    text: HomeTextElement[]\r\n}\r\n\r\n/**\r\n * Site displaying general information about food compare\r\n */\r\nexport function InfoContainer() {\r\n    const {language} = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const introImages = require.context('../static/image/intro-screens', true);\r\n\r\n    const renderTextElement = (textElement: HomeTextElement, index: number): JSX.Element => {\r\n        const text = language === LANGUAGE_DE ? textElement.de : textElement.en\r\n\r\n        switch (textElement.type) {\r\n            case \"paragraph\":\r\n                return <p key={`homeitem ${index}`}>{text}</p>\r\n            case \"subheading\":\r\n                return (\r\n                    <div key={`homeitem ${index}`}>\r\n                        <br/>\r\n                        <h4>\r\n                            {text}\r\n                        </h4>\r\n                        <hr/>\r\n                    </div>\r\n                )\r\n            case \"paragraph-before-itemization\":\r\n                return <p key={`homeitem ${index}`}><b>{text}</b></p>\r\n            case \"fancy-item\":\r\n                return (\r\n                    <div key={`homeitem ${index}`}>\r\n                        {!isMobileDevice()\r\n                            ? <span style={{paddingLeft: \"10px\", paddingRight: \"10px\"}}>\r\n                                    <FaAngleDoubleRight/>\r\n                                </span>\r\n                            : <span>\r\n                                    <FaAngleDoubleRight/>\r\n                            </span>\r\n                        }\r\n                        {text}\r\n                    </div>\r\n                )\r\n            default:\r\n                return <p>{text}</p>\r\n        }\r\n    }\r\n\r\n    const renderHomeText = (textElements: HomeTextParagraph[]): any => {\r\n        const renderImage = (index) => {\r\n            const imageSrc = introImages(`./img-${index + 1}-${language}.png`).default;\r\n            return <div className={\"d-flex justify-content-center\"}>\r\n                <img src={imageSrc} style={{width: \"90%\", margin: \"auto\", maxHeight: \"100%\"}}\r\n                     alt={`Intro Image ${index}`}/>\r\n            </div>\r\n        }\r\n\r\n        return textElements.map((textParagraph, index) => {\r\n            if (isMobileDevice()) {\r\n                if (index === 1) {   // Do not show information about features not provided on mobile devices\r\n                    return <></>\r\n                }\r\n\r\n                return <div style={{paddingBottom: \"5vh\"}}\r\n                            key={`home-text-${textParagraph.id}`}>\r\n                    <div>{textParagraph.text.map((text, index) => renderTextElement(text, index))}</div>\r\n                    <div className={\"d-flex align-items-center justify-content-center\"}>{renderImage(index)}</div>\r\n                </div>\r\n            }\r\n\r\n            return <div className={\"d-flex flex-row\"} style={{paddingBottom: \"15vh\"}}\r\n                        key={`home-text-${textParagraph.id}`}>\r\n                <div className={\"w-50 pr-3\"}>\r\n                    {index % 2 === 0 ?\r\n                        <div className={\"d-flex align-items-center justify-content-center\"}\r\n                             style={{height: \"100%\"}}>{renderImage(index)}</div>\r\n                        :\r\n                        <div>{textParagraph.text.map((text, index) => renderTextElement(text, index))}</div>\r\n                    }\r\n                </div>\r\n                <div className={\"w-50 pl-3\"}>\r\n                    {index % 2 === 1 ?\r\n                        <div className={\"d-flex align-items-center justify-content-center\"}\r\n                             style={{height: \"100%\"}}>{renderImage(index)}</div>\r\n                        :\r\n                        <div>{textParagraph.text.map((text, index) => renderTextElement(text, index))}</div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        })\r\n    }\r\n\r\n    const gotoHomePage = () => {\r\n        history.push(PATH_HOME);\r\n    }\r\n\r\n    return <div style={{paddingTop: \"5vh\", paddingBottom: \"5vh\", paddingLeft: \"2vw\"}}>\r\n        <div>\r\n            <h3>{applicationStrings.home_foodcompare_overview[language]}</h3>\r\n        </div>\r\n        <div className=\"container-fluid\" style={{maxWidth: \"1600px\"}}>\r\n            <div style={{paddingBottom: \"20px\", marginBottom: \"50px\", marginTop: \"5vh\"}}>\r\n                {renderHomeText(homeText3)}\r\n            </div>\r\n        </div>\r\n        <hr/>\r\n        <div className={\"d-flex justify-content-center\"}>\r\n            <button className={\"btn btn-link\"} onClick={() => {\r\n                gotoHomePage()\r\n            }}>{applicationStrings.info_button_back[language]}</button>\r\n        </div>\r\n    </div>\r\n}","import Header from \"./Header\";\r\nimport Switch from \"react-bootstrap/Switch\";\r\nimport {\r\n    PATH_CONTACT,\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODCOMPARE,\r\n    PATH_FOODDATA_PANEL,\r\n    PATH_HOME, PATH_INFO,\r\n    PATH_RANKING,\r\n    PATH_USERSETTINGS\r\n} from \"../config/Constants\";\r\nimport {Home} from \"./Home\";\r\nimport FoodDataPanelContainer from \"./fooddatapanel/FoodDataPanelContainer\";\r\nimport DirectCompareContainer from \"./directcompare/DirectCompareContainer\";\r\nimport {UserSettings} from \"./UserSettings\";\r\nimport {ContactContainer} from \"./contact/ContactContainer\";\r\nimport React, {useContext} from \"react\";\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom'\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {RankingContainer} from \"./ranking/RankingContainer\";\r\nimport {Chart, ArcElement} from 'chart.js'\r\nimport annotationPlugin from \"chartjs-plugin-annotation\";\r\nimport {InfoContainer} from \"./InfoSiteContainer\";\r\n\r\nexport function WebPageContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    // Registering requires some time and should only be performed when the real site is loaded.\r\n    if(applicationContext.debug) {\r\n        console.log('Start annotation plugin registration...')\r\n    }\r\n    Chart.register(annotationPlugin)\r\n    Chart.register(ArcElement);\r\n    if(applicationContext.debug) {\r\n        console.log('...done.')\r\n    }\r\n\r\n    if(applicationContext.debug) {\r\n        //require('./../App-debug.scss');\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Router>\r\n                    <Header/>\r\n                    <Switch>\r\n                        <Route path={PATH_FOODCOMPARE} component={Home}/>\r\n                        <Route path={PATH_HOME} component={Home}/>\r\n                        <Route path={PATH_FOODDATA_PANEL} component={FoodDataPanelContainer}/>\r\n                        <Route path={PATH_DIRECT_COMPARE} component={DirectCompareContainer}/>\r\n                        <Route path={PATH_RANKING} component={RankingContainer}/>\r\n                        <Route path={PATH_USERSETTINGS} component={UserSettings}/>\r\n                        <Route path={PATH_CONTACT} component={ContactContainer}/>\r\n                        <Route path={PATH_INFO} component={InfoContainer}/>\r\n                        <Route exact path={\"/\"} component={Home}/>\r\n                    </Switch>\r\n                </Router>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {isMobileDevice} from \"../service/WindowDimension\";\r\n\r\nexport default function MobileDeviceCheck() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const setMobileStatus = (status: boolean) => {\r\n        applicationContext?.setMobileUsage(status)\r\n    }\r\n\r\n    const showMobileInformationModal = () => {\r\n        return <div className={\"mobile-device-message\"}>\r\n            <div style={{margin: \"15px\"}}>\r\n                {applicationStrings.device_detection_hint[language]}\r\n            </div>\r\n            <div className={\"d-flex justify-content-center\"}>\r\n                <Button\r\n                    style={{minWidth: \"80px\"}}\r\n                    className=\"primary button-l\"\r\n                    onClick={() => setMobileStatus(false)}>\r\n                    OK\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    return <div>\r\n        {applicationContext?.useAsMobile === null && isMobileDevice() &&\r\n        < div>\r\n            {showMobileInformationModal()}\r\n        </div>\r\n        }\r\n    </div>\r\n\r\n}","import './App.scss';\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"bootstrap/dist/js/bootstrap.min.js\";\r\nimport {NotificationContainer} from 'react-notifications'\r\nimport ApplicationDataContextProvider from \"./contexts/ApplicationDataContext\";\r\nimport React, {useEffect} from \"react\";\r\n\r\nimport {LanguageProvider} from \"./contexts/LangContext\";\r\nimport ReactTooltip from \"react-tooltip\";\r\n\r\nimport {WebPageContainer} from \"./components/WebPageContainer\";\r\nimport MobileDeviceCheck from \"./components/MobileDeviceCheck\";\r\n\r\n\r\nfunction App(): JSX.Element {\r\n    useEffect(() => {\r\n        ReactTooltip.rebuild()\r\n    })\r\n\r\n    return (\r\n        <div id=\"root\" className=\"App debug\">\r\n            <NotificationContainer/>\r\n            <LanguageProvider>\r\n                <ApplicationDataContextProvider>\r\n                    <MobileDeviceCheck/>\r\n                    <WebPageContainer/>\r\n                </ApplicationDataContextProvider>\r\n            </LanguageProvider>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport {hydrate, render} from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\n\r\n/* if (rootElement && rootElement.hasChildNodes()) {\r\n    hydrate(<div><App/></div>, rootElement);\r\n} else {\r\n    render(\r\n        <div><App/></div>, rootElement);\r\n} */\r\n\r\nrender(<div><App/></div>, rootElement);\r\n\r\n\r\n// reportWebVitals();\r\n\r\n\r\n"],"sourceRoot":""}