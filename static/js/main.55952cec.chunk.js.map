{"version":3,"sources":["static/image/carousel sync /^/.*$","static/image/carousel/Img-de-1.png","static/image/carousel/Img-de-2.png","static/image/carousel/Img-de-3.png","static/image/carousel/Img-de-4.png","static/image/carousel/Img-de-5.png","static/image/carousel/Img-de-6.png","static/image/carousel/Img-en-1.png","static/image/carousel/Img-en-2.png","static/image/carousel/Img-en-3.png","static/image/carousel/Img-en-4.png","static/image/carousel/Img-en-5.png","static/image/carousel/Img-en-6.png","service/NutrientDataImportService.ts","config/Constants.ts","config/ApplicationSetting.ts","service/LanguageService.ts","service/nutrientdata/NameTypeService.ts","contexts/ApplicationDataContext.tsx","static/labels.ts","service/nutrientdata/CategoryService.ts","service/nutrientdata/FoodClassService.ts","service/nutrientdata/FoodItemsService.ts","service/nutrientdata/PortionDataService.ts","contexts/LangContext.tsx","service/WindowDimension.ts","service/nutrientdata/NutrientDataRetriever.ts","components/foodselector/FoodSelector.tsx","components/foodselector/CompositeFoodList.tsx","service/calculation/FoodDataAggregationService.ts","components/foodselector/FoodSelectorModal.tsx","components/ConfirmationDialog.tsx","service/calculation/MathService.ts","config/ChartConfig.ts","service/ChartConfigurationService.ts","components/charthelper/PieChartConfigurationForm.tsx","components/charthelper/CustomLegend.tsx","service/nutrientdata/ChartSizeCalculation.tsx","components/fooddatapanel/charts/BaseDataChart.tsx","config/EnergyConstants.ts","service/calculation/EnergyService.ts","components/fooddatapanel/charts/EnergyDataChart.tsx","service/calculation/DietaryRequirementService.ts","components/charthelper/BarChartConfigurationForm.tsx","components/fooddatapanel/charts/MineralVitaminChart.tsx","components/fooddatapanel/charts/LipidsDataChart.tsx","components/fooddatapanel/charts/ProteinDataChart.tsx","components/fooddatapanel/charts/CarbsDataChart.tsx","components/fooddatapanel/ChartPanel.tsx","components/fooddatapanel/FoodDataTable.tsx","components/fooddatapanel/charts/InfoData.tsx","components/fooddatapanel/FoodDataPageBody.tsx","components/HelpModal.tsx","components/fooddatapanel/ChartMenuPanel.tsx","components/fooddatapanel/FoodDataPageHeader.tsx","service/HelpService.ts","service/TableService.ts","components/fooddatapanel/FoodDataPage.tsx","service/FoodDataPanelService.tsx","components/fooddatapanel/FoodAnalyzerContainer.tsx","components/fooddatapanel/TabContainer.tsx","service/uri/ChartConfigConverter.ts","service/uri/FoodDataPanelUriService.ts","service/uri/FoodDataPanelAggregatedUriService.ts","service/UserDataService.ts","components/fooddatapanel/FoodDataPanelContainer.tsx","static/image/logo.png","components/Header.tsx","static/image/text.png","components/UserSettings.tsx","static/image/impressum-german.png","static/image/impressum-english.png","components/Contact.tsx","components/Home.tsx","static/image/app.png","components/FoodCompareApp.tsx","components/foodselector/DirectCompareSelector.tsx","service/calculation/NutrientCalculationService.ts","components/directcompare/DC_MineralVitaminChart.tsx","components/directcompare/DC_PieChart.tsx","components/directcompare/DC_ProteinDataChart.tsx","components/directcompare/DC_EnergyChart.tsx","components/directcompare/DirectCompareDataPanel.tsx","service/uri/DirectCompareUriService.ts","components/directcompare/DirectCompareContainer.tsx","App.tsx","config/GoogleTools.ts","reportWebVitals.ts","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","loadFoodDataCorpus","categories","nutrientdata","conditions","portionTypes","sources","foodNames","foodClasses","foodItems","dietaryRequirements","AMOUNT_PORTION","GRAM","CHART_TYPE_PIE","CHART_TYPE_BAR","CHART_VITAMINS","CHART_MINERALS","DISPLAYMODE_TABLE","DISPLAYMODE_CHART","CARBS_DATA_BASE","CARBS_DATA_DETAIL","LIPIDS_DATA_BASE","LIPIDS_DATA_OMEGA","PATH_DIRECT_COMPARE","PATH_FOODCOMPARE","PATH_FOODDATA_PANEL","PATH_FOODDATA_PANEL_ADD","PATH_HOME","PATH_CONTACT","PATH_MOBILE_APP","PATH_USERSETTINGS","LANGUAGE_DE","LANGUAGE_EN","SEX_MALE","SEX_FEMALE","SOURCE_SRLEGACY","SOURCE_FNDDS","TAB_BASE_DATA","TAB_ENERGY_DATA","TAB_VITAMIN_DATA","TAB_MINERAL_DATA","TAB_LIPIDS_DATA","TAB_CARBS_DATA","TAB_PROTEINS_DATA","TAB_INFO","QUERYKEY_DATAPANEL_ITEM","QUERYKEY_DATAPANEL_AGGREGATED","mobileAppPath","smallFormsScreenSize","initialUserDataSize","initialUserDataSex","initialUserDataPregnant","initialUserDataBreastfeeding","initialUserDataLeisureSports","initialChartConfigData","baseChartConfig","chartType","showLegend","showDetails","vitaminChartConfig","portionType","expand100","mineralChartConfig","lipidsChartConfig","subChart","carbsChartConfig","proteinChartConfig","initialDirectCompareConfigData","synchronize","subChart1","subChart2","getName","nameType","language","germanName","englishName","getNameFromFoodNameList","foodNameList","find","ApplicationDataContextStore","createContext","ApplicationDataContextProvider","setSelectedFoodDataPanelTab","selectedTab","setState","prevState","applicationData","foodDataPanel","selectedFoodItemIndex","setSelectedFoodDataPanelPage","selectedPage","selectedDataPage","addItemToFoodDataPanel","foodItem","newItems","assign","state","selectedFoodItems","push","removeItemFromFoodDataPanel","foodItemId","filter","selectedFoodItem","newIndex","currentIndex","length","removeAllItemsFromFoodDataPanel","updateAllFoodItemNames","newLanguage","newFoodItems","foodName","nameId","tab","updateFoodDataPanelChartConfig","chartConfig","chartConfigData","setSelectedDirectCompareItems","selectedFoodItem1","selectedFoodItem2","directCompareDataPanel","setSelectedDirectCompareDataPage","updateDirectCompareChartConfig","directCompareConfigChart","setUserData","userData","setPreferredSource","source","preferredSource","setFoodSelectorConfig","selectedCategory","sourceSupplement","sourceCombine","foodSelector","foodDataCorpus","displayMode","age","size","weight","sex","pregnant","breastFeeding","palValue","leisureSports","initialValues","debug","ready","NutrientDataImportService","this","value","setFoodDataPanelData","setSelectedFoodTab","setSelectedDataPage","setDirectCompareData","Provider","props","children","Component","applicationStrings","button_add","de","en","button_cancel","button_close","button_getstarted","button_no","button_select","button_show","button_submit","button_update","button_yes","checkbox_chartoption_showLegend","checkbox_chartoption_showDetails","checkbox_english","checkbox_expand100g","checkbox_german","checkbox_synchronize","confirm_close_all_tabs","direct_compare_text","home_carousel_0","home_carousel_1","home_carousel_2","home_carousel_3","home_carousel_4","home_carousel_5","home_text_1","home_text_2","home_text_3","label_amount","label_amount_short","label_category","label_charttype","label_charttype_pie","label_charttype_bar","label_charttype_carbs_base","label_charttype_carbs_detail","label_charttype_energy","label_charttype_lipids_base","label_charttype_lipids_base_title","label_charttype_lipids_omega","label_charttype_lipids_omega_title","label_charttype_minerals","label_charttype_proteins","label_charttype_vitamins","label_chart_bmr","label_chart_energyExpenditure","label_chart_nutrientComposition","label_chart_totalComposition","label_datatype","label_food","label_foodclass","label_fooditem","label_foodselector","label_foodselector_composite","label_info","label_info_category","label_info_foodClass","label_info_foodId","label_info_foodName","label_info_portion","label_info_portionType","label_info_preparation","label_info_source","label_language","label_noData","label_nutrient_ash","label_nutrient_carbohydrates","label_nutrient_carbohydrates_short","label_nutrient_carbohydrates_fructose","label_nutrient_carbohydrates_galactose","label_nutrient_carbohydrates_glucose","label_nutrient_carbohydrates_lactose","label_nutrient_carbohydrates_maltose","label_nutrient_carbohydrates_starch","label_nutrient_carbohydrates_sucrose","label_nutrient_dietaryFibers","label_nutrient_dietaryFibers_short","label_nutrient_energy","label_nutrient_lipids","label_nutrient_lipids_saturated","label_nutrient_lipids_unsaturated","label_nutrient_lipids_unsaturated_mono","label_nutrient_lipids_unsaturated_poly","label_nutrient_lipids_transfattyAcids","label_nutrient_lipids_omega3","label_nutrient_lipids_omega6","label_nutrient_lipids_cholesterol","label_nutrient_min","label_nutrient_min_calcium","label_nutrient_min_copper","label_nutrient_min_iron","label_nutrient_min_magnesium","label_nutrient_min_manganese","label_nutrient_min_phosphorus","label_nutrient_min_potassimum","label_nutrient_min_selenium","label_nutrient_min_sodium","label_nutrient_min_zinc","label_nutrient_omega3","label_nutrient_omega6","label_nutrient_proteins","label_nutrient_proteins_alanine","label_nutrient_proteins_arginine","label_nutrient_proteins_asparticAcid","label_nutrient_proteins_cystine","label_nutrient_proteins_glysine","label_nutrient_proteins_glutamicAcid","label_nutrient_proteins_histidine","label_nutrient_proteins_isoleucine","label_nutrient_proteins_leucine","label_nutrient_proteins_lysine","label_nutrient_proteins_methionine","label_nutrient_proteins_phenylalanine","label_nutrient_proteins_proline","label_nutrient_proteins_serine","label_nutrient_proteins_threonine","label_nutrient_proteins_tryptophan","label_nutrient_proteins_tyrosine","label_nutrient_proteins_valine","label_nutrient_remainder","label_nutrient_sugar","label_nutrient_vit","label_nutrient_vit_a","label_nutrient_vit_b1","label_nutrient_vit_b2","label_nutrient_vit_b3","label_nutrient_vit_b5","label_nutrient_vit_b6","label_nutrient_vit_b9","label_nutrient_vit_b12","label_nutrient_vit_c","label_nutrient_vit_d","label_nutrient_vit_e","label_nutrient_vit_k","label_nutrient_water","label_overview","label_portion","label_prefix_hereof","label_reference","label_preferred_source","label_source","label_source_supplement","label_source_supplement_tooltip","label_source_combine","label_source_combine_tooltip","label_unknown","label_userSettings_age","label_userSettings_breastfeeding","label_userSettings_leisureSports","label_userSettings_leisureSports_tooltip","label_userSettings_palValue","label_userSettings_pregnant","label_userSettings_sex","label_userSettings_sex_male","label_userSettings_sex_female","label_userSettings_size","label_userSettings_weight","menu_food_data_panel","menu_direct_compare","menu_home","menu_mobile_app","menu_ranking","menu_settings","menu_contact","message_error_existing_element","message_error_incomplete_form","message_error_invalid_portion","message_userdata_success","message_userdata_error_title","message_userdata_error_age","message_userdata_error_size","message_userdata_error_weight","palcat_name_1","palcat_desc_1","palcat_name_2","palcat_desc_2","palcat_name_3","palcat_desc_3","palcat_name_4","palcat_desc_4","palcat_name_5","palcat_desc_5","palcat_name_6","palcat_desc_6","palcat_name_7","palcat_desc_7","portion_100g","portion_individual","text_contact_disclaimer1","text_contact_disclaimer2","text_contact_source1","text_contact_source2","text_contact_source3","text_contact_source4","text_empty_fooddatapanel","text_foodcompareapp_1","text_foodcompareapp_2","text_setUserdata_p1","text_setUserdata_p2","text_setUserdata_p3","tooltip_icon_charts","tooltip_icon_close","tooltip_icon_newFoodItem","tooltip_icon_newFoodItemStack","tooltip_icon_removeAll","tooltip_icon_table","getCategorySelectList","nameTypeList","sort","names","forEach","reactSelectOptions","name","index","label","getReactSelectOptionsList","getFoodClassSelectList","category","filteredFoodClasses","foodClass","getFoodClassesOfCategory","nameKey","console","error","obj1","obj2","localeCompare","getFoodItemsSelectList","filteredFoodItems","foodClassId","getFoodItemsOfFoodclass","condition","conditionId","conditionName","getPortionReactSelectList","portionData","portionElement","portionTypeIndex","findIndex","portionName","amount","getDefaultPortionData","portionDataList","defaultPortionIndex","defaultPortionId","LanguageContext","userLanguageChange","selectedLanguage","LanguageProvider","preferredLanguage","navigator","useState","setLanguage","provider","selectedLanaguage","getCurrentWindowDimension","width","window","innerWidth","height","innerHeight","useWindowDimension","windowDimension","setWindowDimension","useEffect","addEventListener","removeEventListener","isSmallScreen","getSourceName","sourceId","getNutrientData","sourceToUse","supplementData","combineData","undefined","nutrientDataList","nutrientData","nutrientDataObject","complement","selectedNutrientData","complementeNutrientData","supplementedBaseData","supplementCategory","baseData","supplementedVitaminData","vitaminData","supplementedMineralData","mineralData","supplementedCarbsData","carbohydrateData","supplementedProteinData","proteinData","supplementedOmegaData","lipidData","omegaData","supplementedLipidData","sourceItemId","supplementNutrientData","combinedBaseData","combineCategory","combinedVitaminData","combinedMineralData","combinedCarbsData","combinedProteinData","combinedOmegaData","combinedLipidData","combineNutrientData","getNutrientDataForFoodItem","selectedSource","nutrientCategory1","nutrientCategory2","key","objectHasChildren","keys1","keys2","allKeys","Set","finalObject","finalValue","value1","value2","FoodSelector","applicationContext","useContext","initialCategory","initialSupplementValue","initialCombineValue","setSelectedCategory","selectdFoodClass","setSelectedFoodClass","setSelectedFoodItem","selectedPortion","setSelectedPortion","portionAmount","setPortionAmount","setSelectedSource","setSupplementData","setCombineData","initialized","setInitialized","categoriesList","setCategoriesList","foodClassesList","setFoodClassesList","foodItemsList","setFoodItemsList","portionsList","setPortionsList","sourcesList","setSourcesList","windowSize","currentSelectorSetting","initialFoodClass","initialFoodClassToSet","categoryItems","foodItemsOfFoodClass","updateSourcesList","defaultPortion","makeSelectedFoodItemObject","newFoodItem","updateSelectedFoodItem","portion","handleSourceChange","updateFoodClasses","foodClassItems","updateFoodItem","updatePortionsList","sourceNames","getSourceNames","matchingSource","sourceObject","onCheckSupplementCheckbox","onCheckCombineCheckbox","predefinedFoodObject","foodClassOption","selected","sourceElement","portionObject","setInitialFoodElement","amount_label","smallVariant","selectClass","inputClass","className","noCategorySelect","options","onChange","disabled","target","parseInt","isNaN","sourceSelectBox","isDisabled","checkboxes","data-tip","Form","Check","inline","checked","onClick","style","paddingLeft","paddingTop","renderSourceLine","CompositeFoodList","languageContext","renderLine","borderBottom","Button","deleteItem","onDeleteItem","maxHeight","overflowY","combineFoodItems","compositeList","portionSize","energy","carbohydrates","lipids","proteins","water","dietaryFibers","alcohol","ash","portionFactor","createFinalValue","buildBaseDataObject","a","b1","b2","b3","b5","b6","b7","b9","b12","c","d","k","buildVitaminDataObject","calcium","iron","magnesium","phosphorus","potassium","sodium","zinc","copper","manganese","selenium","buildMineralDataObject","glucose","fructose","galactose","sucrose","maltose","lactose","starch","sugar","buildCarbohydrateData","unsaturatedMono","unsaturatedPoly","saturated","omega3","omega6","omegaUncertain","cholesterol","transFattyAcids","uncertain","omegaRatio","uncertainRatio","buildLipidData","tryptophan","threonine","isoleucine","leucine","lysine","methionine","cystine","phenylalanine","tyrosine","valine","arginine","histidine","alanine","asparticAcid","glutamicAcid","glycine","proline","serine","buildProteinData","nutrientObject","url","i","threshold","removeNutrientObjectsWithNullValues","buildAggregatedNutrientDataList","Date","getTime","aggregated","compositeSubElements","totalPortionAmount","FoodSelectorModal","setCompositeList","onSubmit","compositeSelector","onSubmitComposite","onSubmitSingleItem","NotificationManager","selectedFoodItemCallback","onHide","aggregatedSelectedFoodItem","title","Modal","show","Header","Body","newList","splice","Footer","ConfirmationDialog","okLabel","cancelLabel","confirmation","proceed","enableEscape","backdrop","keyboard","Title","React","confirmAction","createConfirmation","confirmable","autoRound","round","digits","roundFactor","Math","pow","roundToNextValue","chartMaxValue","multiple","remainder","roundUp","getNumberOfFixedLength","number","numberString","convertBooleanToDigit","convertStringToBoolean","color_yellow","color_red","color_brown","color_gray","color_chart_green_1","color_chart_green_2","color_chart_green_3","color_chart_yellow_1","color_chart_yellow_2","color_chart_yellow_3","color_chart_orange","color_chart_misc","default_chart_height","color_water","color_lipids","color_carbs","color_carbs_sugar","color_carbs_dietaryFibers","color_proteins","color_lipids_saturated","color_lipids_unsaturated_mono","color_lipids_unsaturated_poly","color_lipids_omega3","color_lipids_omega6","color_lipids_misc","color_ash","direct_compare_color1","direct_compare_color2","getBarChartOptions","unit","maxYValue","yAxis","display","text","min","max","getOptions","y","getPieChartOptions","scalesObject","maintainAspectRatio","responsive","plugins","fontSize","tooltip","getToolTips","legend","scales","enabled","callbacks","tooltipItem","formattedValue","PieChartConfigurationForm","Label","type","handleRadioButtonClick","paddingRight","defaultChecked","handleLegendCheckboxClick","detailsCheckboxAvailable","handleDetailsCheckboxClick","CustomLegend","borderLeft","legendData","element","indent","verticalSpace","separateNextElement","marginLeft","marginBottom","background","color","marginTop","item","renderLegend","calculateChartHeight","currentDimension","directCompare","dataPage","calculateChartContainerHeight","BaseDataChart","lang","directCompareConfig","showDetailsProp","setChartType","setShowLegend","setShowDetails","directCompareUse","chartHeight","setChartHeight","updateChartConfig","currentConfig","newChartConfig","legendAllowed","renderSubChart","chartData","data","totalChartData","labels","datasets","backgroundColor","ChartConfig","borderWidth","borderColor","createTotalChartData","nutrientChartData","totalValue","carbValue","carbValuePerc","sugarValuePerc","dietaryFibersPerc","lipidValuePerc","proteinsValuePerc","values","backgroundColors","createNutrientChartData","totalChartDataTitle","nutrientChartDataTitle","containerHeight","justifyContent","getLegendData","event","PAL_CATEGORY_1","PAL_CATEGORY_2","PAL_CATEGORY_3","PAL_CATEGORY_4","PAL_CATEGORY_5","PAL_CATEGORY_6","PAL_CATEGORY_7","getPalCategory","EnergyConstants","createPalCategoryName","languageLabel","energyLabel","EnergyDataChart","energy100g","Chart","register","annotationPlugin","averagePortion","energyPortion","createEnergyLevelChart","bmr","calculateBMR","totalEnergy","calculateTotalEnergyConsumption","annotation","annotations","line1","mode","scaleID","yMin","yMax","content","line2","determineDailyRequirement","dailyRequirementObject","ageGroupRequirements","senior","preSenior","midLifeAdult","youngAdult","youth","male","femalePregnant","female","femaleBreastFeeding","determineFoodRequirementRatio","amountInFood","dailyRequirement","determineProteinRequirementRatio","requirement","BarChartConfigurationForm","handleExpandCheckboxClick","handleSynchronize","MineralVitaminChart","chartConfigVitamins","chartConfigMinerals","portionType_vitamins","setPortionType_vitamins","expand100_vitamins","setExpand100_vitamins","chartType_minerals","setChartType_minerals","expand100_minerals","setExpand100_minerals","config","selectedSubChart","anyValueChanged","handleExpandCheckbox","requirementData","vitaminRequirementData","chartColor","barChartColor","createVitaminChartData","mineralRequirementData","createMineralChartData","maxValue","overallMaxValue","barChartProps","renderChartConfigurationForm","LipidsDataChart","setSubChart","lipidsData","totalLipidsAmount","handleChartSelectionChange","handleSubchartChange","omegaDataAvailabe","chartColType","Constants","renderChart","lipidsType","totalAmount","valueSaturated","valueUnsaturatedMono","valueUnsaturatedPoly","valueRemainder","valueOmega3","valueOmega6","valueUncertain","createOmegaChartData","ProteinDataChart","setPortionType","setExpand100","currentSetting","proteinRequirementData","createProteinChartData","dataExists","CarbsDataChart","currentSettings","chartIndex","detailChartData","valueGlucose","valueFructose","valueGalactose","valueSucrose","valueLactose","valueMaltose","valueStarch","valueMisc","createDetailChartData","basicChartData","totalCarbsAmount","valueSugar","valueDietaryFibers","warn","createBasicChartData","includes","getLegendBaseChart","getLegendDetailsChart","ChartPanel","chart","selectedDataTab","FoodDataTable","tableData","margin","striped","hover","isKey","dataField","InfoData","setContainerHeight","createRow","renderSubTable","bordered","padding","foodNameId","foodClassNameId","sourceName","sourceLine2","foodClassName","categoryId","categoryName","tableDataGeneral","getGeneralTableData","foodPortion","portionValue","tableDataPortion","getTableDataPortion","getTableDataCombinedFood","paddingBottom","variant","active","usdaLink","link","open","focus","location","href","FoodDataPageBody","maxWidth","minWidth","HelpModal","helpText","role","data-dismiss","aria-label","closeHelpModal","dangerouslySetInnerHTML","__html","ChartMenuPanel","handlePageButtonClick","setDataPage","makeButtonLabel","buttonText","verticalArrangement","ButtonGroup","vertical","FoodDataPageHeader","history","useHistory","helpModalId","setHelpModalId","fullName","setDisplayMode","enabledDisplayButtonClasses","disabledDisplayButtonClasses","chartButtonClasses","tablesButtonClasses","foodNamesList","languageId","entry","require","entries","languageSection","contentArray","getHelpText","sourceString","remainingItems","pathName","createTableObject","value_100g","valuePortion","calculatePortionData","MathService","value_portion","FoodDataPage","setTableData","updatePage","tableDataList","createBaseDataTable","createEnergyTable","createVitaminTable","firstNutrientData","createMineralTable","createLipidsTable","createCarbsTable","createProteinTable","log","newMode","datapage","makeFoodDataPanelComponent","component","FoodAnalyzerContainer","openSelectorModal","showFoodSelector","setShowFoodSelector","showFoodAggregatedFoodSelector","setShowAggregatedFoodSelector","onSelectFoodItemSubmit","selectedFoodItemWithComponent","onNewFoodItemSelected","onCloseAllTabs","deleteIconEnabled","ReactTooltip","rebuild","marginRight","TabContainer","tabPanelClass","tabContentClass","buttonTab","border","verticalAlign","minHeight","alignItems","cursor","onTabClick","onTabChange","activeIndex","makeChartConfigUriString","chartObject","chartTypeKey","portionTypeKey","expand100Key","showLegendKey","showDetailsKey","subChartKey","getSubChartKey","subChartKey2","synchronizeKey","convertGeneralizedChartConfigToString","generalizedChartObject","makeGeneralizedChartConfig","getUpdatedChartConfig","chartConfigUriString","chartConfigFromUri","convertGeneralizedChartConfigStringToObject","barChartConfig","uriString","stringToParse","trim","substring","chartTypeNumber","portionTypeNumber","subChartNumber","subChartNumber2","getSubChartFromKey","makeFoodItemDefaultUri","foodItemData","portionString","supplementValue","combineValue","getFoodItemUriData","fragments","portionDataString","split","convertPortionDataStringToObject","booleanData","convertUserDataObjectToString","convertUserDataStringToObject","userDataString","palValueInt","palCategory","getPalValue","prepareUriForParsing","uri","preparedUri","replace","separator","replacements","short","convertAggregatedUriStringToObject","replacementArray","replacement","JSON","parse","convertUriStringToSelectedFoodItem","newChartConfigData","USERDATA_ERROR_AGE","USERDATA_ERROR_WEIGHT","USERDATA_ERROR_SIZE","USERDATA_OK","checkUserDataValidity","FoodDataPanelContainer","buildDataPanelPageFromURI","updateUriQuery","createDataFromUriQuery","query","uriData","objectToParse","selectedFoodItemString","stringify","chartConfigString","convertAggregatedDataJsonToUriString","search","foodItemDataString","makeFoodDataPanelDefaultUri","queryString","equalOperator","indexOf","uriDataObject","foodItemUriData","parseFoodDataPanelDefaultUri","selectedTabIndex","newTabIndex","indexToSet","foodId","useLocation","handleLanguageButtonClick","handleSourceButtonClick","activePath","pathname","endsWith","src","float-start","renderSourceButtons","to","UserSettings","setAge","setSize","setWeight","setSex","setPregnant","setBreastFeeding","setPalValue","leisureSport","setLeisureSport","changePregnant","changeBreastFeeding","changeAdditionalPalPorts","checkInputValidity","validationResult","showMessage","message","renderTextField","callback","FormControl","value_age","value_size","value_weight","FormGroup","controlId","palCategories","userDataPalValue","palObject","descriptionCode","description","changePalValue","renderPalList","success","submitUserData","Contact","impressumPath","impressum_de","impressum_en","images","Home","displayedImage","setDisplayedImage","imageChanged","image","fontWeight","langKey","pic1","default","pic2","pic3","pic4","pic5","pic6","captionAttribute","imageCaption","showArrows","infiniteLoop","autoPlay","interval","transitionTime","selectedItem","textAlign","fontStyle","renderCarousel","FoodCompareApp","appPath","STATUS_FIRST_TIME","STATUS_NOT_UPDATED","STATUS_UPDATED","DirectCompareSelector","initialItem1","initialItem2","setSelectedFoodItem1","setSelectedFoodItem2","displayStatus","setDisplayStatus","updateSelectedFoodItem1","updateSelectedFoodItem2","renderFoodSelectorCard","foodSelectorNumber","styleClass","Card","CardDeck","buttonName","updateSelectedFoodItems","getMaximumValue","dataSet","dataSetKey","ratioValue","nullifyIncompleValues","dataSet1","dataSet2","DC_MineralVitaminChart","portionType_minerals","setPortionType_minerals","synchronizeVitamins","setSynchronizeVitamins","synchronizeMinerals","setSynchronizeMinerals","nutrientData1","nutrientData2","maxValue1","maxValue2","maxY","preconfigVitamins","preconfigMinerals","preconfig","preconfigFoodItem1","preconfigFoodItem2","DC_PieChart","initialConfig","setSubChart1","setSubChart2","configObject","pieChartConfig","handleShowLegendCheckbox","handleShowDetailsCheckbox","handleSubchart1Change","handleSubchart2Change","getConfigurationProps","chartProps","getChartComponent","resolvedName","DC_ProteinDataChart","setSynchronize","DC_EnergyChart","DirectCompareDataPanel","initialPage","setSelectedDataTab","nameId1","nameId2","name1","name2","renderCharts","makeFoodItemUriData","parseDirectComparetUri","foodItemUriData1","foodItemUriData2","slice","getUpdatedDirectCompareChartConfig","DirectCompareContainer","initialFoodItem1","initialFoodItem2","buildDataObjectsFromURI","foodItem1DataUri","foodItem2DataUri","userDataUri","chartConfigUri","makeDirectCompareDataUri","foodItem1","foodItem2","foodClass1","foodClass2","ga4react","GA4React","App","Switch","path","render","exact","initialize","StrictMode","document","getElementById","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","rootElement","hasChildNodes","hydrate"],"mappings":"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","file":"static/js/main.55952cec.chunk.js","sourcesContent":["var map = {\n\t\"./Img-de-1.png\": 371,\n\t\"./Img-de-2.png\": 372,\n\t\"./Img-de-3.png\": 373,\n\t\"./Img-de-4.png\": 374,\n\t\"./Img-de-5.png\": 375,\n\t\"./Img-de-6.png\": 376,\n\t\"./Img-en-1.png\": 377,\n\t\"./Img-en-2.png\": 378,\n\t\"./Img-en-3.png\": 379,\n\t\"./Img-en-4.png\": 380,\n\t\"./Img-en-5.png\": 381,\n\t\"./Img-en-6.png\": 382\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 370;","export default __webpack_public_path__ + \"static/media/Img-de-1.f461d8cb.png\";","export default __webpack_public_path__ + \"static/media/Img-de-2.6f0bfc36.png\";","export default __webpack_public_path__ + \"static/media/Img-de-3.f67e30a1.png\";","export default __webpack_public_path__ + \"static/media/Img-de-4.fd525cd7.png\";","export default __webpack_public_path__ + \"static/media/Img-de-5.4b2dfd28.png\";","export default __webpack_public_path__ + \"static/media/Img-de-6.0a5a2015.png\";","export default __webpack_public_path__ + \"static/media/Img-en-1.e75dca7d.png\";","export default __webpack_public_path__ + \"static/media/Img-en-2.ad08b464.png\";","export default __webpack_public_path__ + \"static/media/Img-en-3.f117714f.png\";","export default __webpack_public_path__ + \"static/media/Img-en-4.ec0ccf6b.png\";","export default __webpack_public_path__ + \"static/media/Img-en-5.afac79a2.png\";","export default __webpack_public_path__ + \"static/media/Img-en-6.3238f1c7.png\";","import NameType from '../types/nutrientdata/NameType'\r\nimport Source from '../types/nutrientdata/Source'\r\nimport FoodItem from '../types/nutrientdata/FoodItem'\r\nimport DietaryRequirement from '../types/nutrientdata/DietaryRequirement'\r\n\r\nimport nutrientdata from \"./../static/data/nutrientdata_foodcompare_2.json\";\r\nimport FoodDataCorpus from \"../types/nutrientdata/FoodDataCorpus\"\r\nimport FoodClass from \"../types/nutrientdata/FoodClass\";\r\n\r\nexport function loadFoodDataCorpus(): FoodDataCorpus {\r\n\tconst categories = loadCategories()\r\n\tconst conditions = loadConditions()\r\n\tconst portionTypes = loadPortionTypes()\r\n\tconst sources = loadSources()\r\n\tconst foodNames = loadFoodNames()\r\n\tconst foodClasses = loadFoodClasses()\r\n\tconst nutrientData = loadFoodItems()\r\n\tconst dietaryRequirements = loadDietaryRequirements()\r\n\r\n\treturn {\r\n\t\tcategories: categories,\r\n\t\tconditions: conditions,\r\n\t\tportionTypes: portionTypes,\r\n\t\tsources: sources,\r\n\t\tfoodNames: foodNames,\r\n\t\tfoodClasses: foodClasses,\r\n\t\tfoodItems: nutrientData,\r\n\t\tdietaryRequirements: dietaryRequirements\r\n\t}\r\n}\r\n\r\nexport function loadConditions(): Array<NameType> {\r\n\treturn nutrientdata.conditions;\r\n}\r\n\r\nexport function loadPortionTypes(): Array<NameType> {\r\n\treturn nutrientdata.portionTypes;\r\n}\r\n\r\nexport function loadFoodNames(): Array<NameType> {\r\n\treturn nutrientdata.foodNames;\r\n}\r\n\r\nexport function loadSources(): Array<Source> {\r\n\treturn nutrientdata.sources;\r\n}\r\n\r\nexport function loadCategories(): Array<NameType> {\r\n\treturn nutrientdata.categories;\r\n}\r\n\r\nexport function loadFoodClasses(): Array<FoodClass> {\r\n\treturn nutrientdata.foodClasses;\r\n}\r\n\r\nexport function loadFoodItems(): Array<FoodItem> {\r\n\treturn nutrientdata.foodItems;\r\n}\r\n\r\nexport function loadDietaryRequirements(): DietaryRequirement {\r\n\treturn nutrientdata.dietaryRequirements;\r\n}","export const AMOUNT_PORTION = \"amount portion\"\r\nexport const GRAM = \"100 gram\"\r\n\r\nexport const CHART_TYPE_PIE = \"pie chart\"\r\nexport const CHART_TYPE_BAR = \"bar chart\"\r\n\r\nexport const CHART_VITAMINS = \"chart vitamins\"\r\nexport const CHART_MINERALS = \"chart minerals\"\r\n\r\nexport const DATA_MINERAL_CALCIUM = \"data calcium\";\r\nexport const DATA_MINERAL_IRON = \"data iron\";\r\nexport const DATA_MINERAL_MAGNESIUM = \"data magnesium\";\r\nexport const DATA_MINERAL_PHOSPHORUS = \"data phosphorous\";\r\nexport const DATA_MINERAL_POTASSIUM = \"data potassium\";\r\nexport const DATA_MINERAL_SODIUM = \"data sodium\";\r\nexport const DATA_MINERAL_ZINC = \"data zinc\";\r\nexport const DATA_MINERAL_SELENIUM = \"data selenium\";\r\nexport const DATA_MINERAL_MANGANESE = \"data manganese\";\r\nexport const DATA_MINERAL_COPPER = \"data copper\";\r\n\r\nexport const DATA_VITAMINS_A = \"data a\";\r\nexport const DATA_VITAMINS_B1 = \"data b1\";\r\nexport const DATA_VITAMINS_B2 = \"data b2\";\r\nexport const DATA_VITAMINS_B3 = \"data b3\";\r\nexport const DATA_VITAMINS_B5 = \"data b5\";\r\nexport const DATA_VITAMINS_B6 = \"data b6\";\r\nexport const DATA_VITAMINS_B9 = \"data b9\";\r\nexport const DATA_VITAMINS_B12 = \"data b12\";\r\nexport const DATA_VITAMINS_C = \"data c\";\r\nexport const DATA_VITAMINS_D = \"data d\";\r\nexport const DATA_VITAMINS_E = \"data e\";\r\nexport const DATA_VITAMINS_K = \"data k\";\r\n\r\nexport const DISPLAYMODE_TABLE = \"displaymode table\"\r\nexport const DISPLAYMODE_CHART = \"displaymode chart\"\r\n\r\nexport const CARBS_DATA_BASE = \"carbs data base chart\";\r\nexport const CARBS_DATA_DETAIL = \"carbs data detail chart\"\r\n\r\nexport const LIPIDS_DATA_BASE = \"lipids data base chart\";\r\nexport const LIPIDS_DATA_OMEGA = \"lipids data omega chart\"\r\n\r\nexport const PATH_DIRECT_COMPARE = \"/directcompare\";\r\nexport const PATH_FOODCOMPARE = \"/foodcompare\"\r\nexport const PATH_FOODDATA_PANEL = \"/datapanel\";\r\nexport const PATH_FOODDATA_PANEL_ADD = \"/datapanel_add\";\r\nexport const PATH_HOME = \"/home\";\r\nexport const PATH_CONTACT = \"/contact\";\r\nexport const PATH_MOBILE_APP = \"/mobileapp\";\r\nexport const PATH_USERSETTINGS = \"/usersettings\";\r\n\r\nexport const PORTION_KEY_INDIVIDUAL = 0\r\nexport const PORTION_KEY_100 = 1\r\n\r\nexport const LANGUAGE_DE = \"de\";\r\nexport const LANGUAGE_EN = \"en\";\r\n\r\nexport const SEX_MALE = \"sex male\"\r\nexport const SEX_FEMALE = \"sex female\"\r\n\r\nexport const SOURCE_SRLEGACY = \"srlegacy\"\r\nexport const SOURCE_FNDDS = \"fndds\"\r\n\r\n\r\nexport const TAB_BASE_DATA = \"basedata\"\r\nexport const TAB_ENERGY_DATA = \"energydata\"\r\nexport const TAB_VITAMIN_DATA = \"vitamindata\"\r\nexport const TAB_MINERAL_DATA = \"mineraldata\"\r\nexport const TAB_LIPIDS_DATA = \"lipidsdata\"\r\nexport const TAB_CARBS_DATA = \"carbsdata\"\r\nexport const TAB_PROTEINS_DATA = \"proteinsdata\"\r\nexport const TAB_INFO = \"infodata\"\r\n\r\nexport const QUERYKEY_DATAPANEL_ITEM = \"item\"\r\nexport const QUERYKEY_DATAPANEL_AGGREGATED = \"aggregated\"\r\n\r\nexport const TAB_LIST = [TAB_BASE_DATA, TAB_ENERGY_DATA, TAB_VITAMIN_DATA, TAB_MINERAL_DATA, TAB_LIPIDS_DATA, TAB_CARBS_DATA, TAB_PROTEINS_DATA, TAB_INFO]","import {AMOUNT_PORTION, CARBS_DATA_BASE, CHART_TYPE_PIE, LIPIDS_DATA_BASE, SEX_MALE} from \"./Constants\";\r\nimport {ChartConfigData, DirectCompareChartConfigData} from \"../types/livedata/ChartConfigData\";\r\nimport {WindowDimension} from \"../service/WindowDimension\";\r\n\r\nexport const release = \"1.3\"\r\nexport const buildDate = \"2021-08-17\"\r\n\r\nexport const mobileAppPath = \"https://play.google.com/store/apps/details?id=com.parapps.foodcompareapp\"\r\n\r\nexport const minimalOmegaRatio = 0.3\r\nexport const maximalPortionSize = 5000\r\nexport const defaultPanelHeight = '468px'\r\n\r\nexport const smallFormsScreenSize: WindowDimension = {\r\n    width: 1200,\r\n    height: 800\r\n}\r\n\r\nexport const initialUserDataAge = 35\r\nexport const initialUserDataSize = 175\r\nexport const initialUserDataWeight = 75\r\nexport const initialUserDataSex = SEX_MALE\r\nexport const initialUserDataPregnant = false\r\nexport const initialUserDataBreastfeeding = false\r\nexport const initialUserDataPalValue = 1.6\r\nexport const initialUserDataLeisureSports = false\r\n\r\nexport const initialChartConfigData: ChartConfigData = {\r\n    baseChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        showDetails: false\r\n    },\r\n    vitaminChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    },\r\n    mineralChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    },\r\n    lipidsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        subChart: LIPIDS_DATA_BASE\r\n    },\r\n    carbsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        subChart: CARBS_DATA_BASE\r\n    },\r\n    proteinChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    }\r\n}\r\n\r\nexport const initialDirectCompareConfigData: DirectCompareChartConfigData = {\r\n    baseChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        showDetails: false\r\n    },\r\n    vitaminChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    },\r\n    mineralChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    },\r\n    lipidsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        subChart1: LIPIDS_DATA_BASE,\r\n        subChart2: LIPIDS_DATA_BASE\r\n    },\r\n    carbsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        subChart1: CARBS_DATA_BASE,\r\n        subChart2: CARBS_DATA_BASE\r\n    },\r\n    proteinChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    }\r\n}","import NameType from \"../types/nutrientdata/NameType\";\r\n\r\nexport default function getName(nameType: NameType, language: string): string {\r\n    if(language === 'de') {\r\n        return nameType.germanName\r\n    } else {\r\n        return nameType.englishName\r\n    }\r\n}\r\n\r\n\r\n","import NameType from \"../../types/nutrientdata/NameType\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport getName from \"../LanguageService\";\r\n\r\nexport function getReactSelectOptionsList(nameTypeList: Array<NameType>, language: string, sort?: boolean): Array<ReactSelectOption> {\r\n    const names: Array<string> = []\r\n\r\n    if(nameTypeList && nameTypeList.length > 0) {\r\n        nameTypeList.forEach(nameType => names.push(getName(nameType, language)))\r\n    }\r\n\r\n    if(sort) {\r\n        names.sort()\r\n    }\r\n\r\n    const reactSelectOptions: Array<ReactSelectOption> = []\r\n    names.forEach((name, index) => {\r\n        reactSelectOptions.push({\r\n            value: index,\r\n            label: name\r\n        })\r\n    })\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getNameFromFoodNameList(foodNameList: Array<NameType>, id: number, language: string): string | null {\r\n    const nameType = foodNameList.find(nameType => nameType.id === id)\r\n\r\n    if(nameType) {\r\n        return getName(nameType, language)\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\n/*\r\n * General method to shorten the name of long food name.\r\n * name: The food name, e.g. \"Linen oil (at least 60 % lineul acid)\"\r\n * maxLength: The maximum length of the food name.\r\n */\r\nexport function shortenName(name, maxLength) {\r\n    if(name.length <= maxLength) {\r\n        return name;\r\n    }\r\n\r\n    if(name.includes(\"(\")) {\r\n        const indexOfBrace = name.indexOf(\"(\");\r\n        if(indexOfBrace >= maxLength-6) {\r\n            return name.substring(0, indexOfBrace-1).trim() + \"...\";\r\n        }\r\n    }\r\n\r\n    return name.substring(0, maxLength-3).trim() + \"...\";\r\n}","import {Component, createContext, ReactElement} from \"react\";\r\nimport * as NutrientDataImportService from \"../service/NutrientDataImportService\";\r\nimport FoodDataCorpus from \"../types/nutrientdata/FoodDataCorpus\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationData} from \"../types/livedata/ApplicationData\";\r\nimport {DISPLAYMODE_CHART, SOURCE_SRLEGACY, TAB_BASE_DATA} from \"../config/Constants\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    initialChartConfigData,\r\n    initialDirectCompareConfigData,\r\n    initialUserDataAge,\r\n    initialUserDataBreastfeeding,\r\n    initialUserDataLeisureSports,\r\n    initialUserDataPalValue,\r\n    initialUserDataPregnant,\r\n    initialUserDataSex,\r\n    initialUserDataSize,\r\n    initialUserDataWeight\r\n} from \"../config/ApplicationSetting\";\r\nimport {getNameFromFoodNameList} from \"../service/nutrientdata/NameTypeService\";\r\nimport NameType from \"../types/nutrientdata/NameType\";\r\nimport {ChartConfigData, DirectCompareChartConfigData} from \"../types/livedata/ChartConfigData\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\n\r\nexport interface ApplicationDataContext {\r\n    foodDataCorpus: FoodDataCorpus\r\n    applicationData: ApplicationData\r\n    userData: UserData\r\n    debug: boolean\r\n    ready: boolean\r\n}\r\n\r\nexport interface ApplicationContext extends ApplicationDataContext {\r\n\tsetUserData: (userData: UserData) => void\r\n\tsetPreferredSource: (string) => void\r\n\tsetFoodSelectorConfig: (selectedCategory: ReactSelectOption | null, sourceSupplement: boolean, sourceCombine: boolean) => void\r\n\tsetFoodDataPanelData: {\r\n\t\tsetSelectedFoodTab: (number) => void\r\n\t\tsetSelectedDataPage: (string) => void\r\n\t\taddItemToFoodDataPanel: (selectedFoodItem: SelectedFoodItem) => void\r\n\t\tremoveItemFromFoodDataPanel: (number) => void\r\n\t\tremoveAllItemsFromFoodDataPanel: () => void\r\n\t\tupdateAllFoodItemNames: (foodNames: Array<NameType>, newLanguage: string) => void\r\n\t\tupdateFoodDataPanelChartConfig: (chartConfig: ChartConfigData) => void\r\n\t}\r\n\tsetDirectCompareData: {\r\n\t\tupdateDirectCompareChartConfig: (chartConfig: DirectCompareChartConfigData) => void\r\n    \tsetSelectedDirectCompareItems: (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => void\r\n    \tsetSelectedDirectCompareDataPage: (selectedPage: string) => void\r\n\t}\r\n\t\r\n}\r\n\r\nexport const ApplicationDataContextStore = createContext<ApplicationContext | null>(null)\r\n\r\nexport default class ApplicationDataContextProvider extends Component<any, ApplicationDataContext> {\r\n\r\n    setSelectedFoodDataPanelTab = (selectedTab: number) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItemIndex: selectedTab}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedFoodDataPanelPage = (selectedPage: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedDataPage: selectedPage}\r\n            }\r\n        }))\r\n    }\r\n\r\n    addItemToFoodDataPanel = (foodItem: SelectedFoodItem) => {\r\n        const newItems = Object.assign(this.state.applicationData.foodDataPanel.selectedFoodItems)\r\n        newItems.push(foodItem)\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItems: newItems}\r\n            }\r\n        }))\r\n    }\r\n\r\n    removeItemFromFoodDataPanel = (foodItemId: number) => {\r\n        const newItems = this.state.applicationData.foodDataPanel.selectedFoodItems.filter(\r\n            selectedFoodItem => selectedFoodItem.foodItem.id !== foodItemId\r\n        )\r\n\r\n        let newIndex = 0\r\n        let currentIndex = this.state.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n        if (newItems.length > 0) {\r\n            if (currentIndex < newItems.length) {\r\n                newIndex = currentIndex\r\n            } else {\r\n                newIndex = newItems.length - 1\r\n            }\r\n        }\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: newItems,\r\n                    selectedFoodItemIndex: newIndex\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    removeAllItemsFromFoodDataPanel = () => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: [],\r\n                    selectedFoodItemIndex: 0\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateAllFoodItemNames = (foodNames: Array<NameType>, newLanguage: string) => {\r\n        const selectedFoodItems = this.state.applicationData.foodDataPanel.selectedFoodItems\r\n        const newFoodItems = selectedFoodItems.map(selectedFoodItem => {\r\n            const foodName = selectedFoodItem.foodItem.nameId\r\n                ? getNameFromFoodNameList(foodNames, selectedFoodItem.foodItem.nameId, newLanguage)\r\n                : \"Individual\"\r\n            if (foodName) {\r\n                selectedFoodItem = {...selectedFoodItem, tab: foodName}\r\n            }\r\n            return selectedFoodItem\r\n        })\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: newFoodItems,\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateFoodDataPanelChartConfig = (chartConfig: ChartConfigData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    chartConfigData: chartConfig\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n\r\n    setSelectedDirectCompareItems = (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...prevState.applicationData.directCompareDataPanel,\r\n                    selectedFoodItem1: selectedFoodItem1,\r\n                    selectedFoodItem2: selectedFoodItem2\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedDirectCompareDataPage = (selectedPage: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...prevState.applicationData.directCompareDataPanel,\r\n                    selectedDataPage: selectedPage\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateDirectCompareChartConfig = (chartConfig: DirectCompareChartConfigData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...this.state.applicationData.directCompareDataPanel,\r\n                    directCompareConfigChart: chartConfig\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    setUserData = (userData: UserData) => {\r\n        this.setState(() => ({\r\n            userData: {\r\n\t\t\t\t...userData\r\n\t\t\t}\r\n        }))\r\n    }\r\n\r\n\r\n    setPreferredSource = (source: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData, preferredSource: source\r\n            }\r\n        }))\r\n    }\r\n\r\n\r\n    setFoodSelectorConfig = (selectedCategory: ReactSelectOption | null, sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData, foodSelector: {\r\n                        ...prevState.applicationData.foodSelector,\r\n                        selectedCategory: selectedCategory,\r\n                        sourceSupplement: sourceSupplement,\r\n                        sourceCombine: sourceCombine\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n\r\n    state: ApplicationDataContext = {\r\n        foodDataCorpus: {\r\n            categories: [],\r\n            conditions: [],\r\n            portionTypes: [],\r\n            sources: [],\r\n            foodNames: [],\r\n            foodClasses: [],\r\n            foodItems: [],\r\n            dietaryRequirements: null,\r\n        },\r\n        applicationData: {\r\n            foodDataPanel: {\r\n                selectedFoodItems: [],\r\n                selectedDataPage: TAB_BASE_DATA,\r\n                displayMode: DISPLAYMODE_CHART,\r\n                selectedFoodItemIndex: 0,\r\n                chartConfigData: initialChartConfigData,\r\n            },\r\n            directCompareDataPanel: {\r\n                selectedFoodItem1: null,\r\n                selectedFoodItem2: null,\r\n                selectedDataPage: TAB_BASE_DATA,\r\n                directCompareConfigChart: initialDirectCompareConfigData\r\n            },\r\n            foodSelector: {\r\n                selectedCategory: null,\r\n                sourceSupplement: true,\r\n                sourceCombine: false,\r\n            },\r\n            preferredSource: SOURCE_SRLEGACY,\r\n        },\r\n        userData: {\r\n            age: initialUserDataAge,\r\n            size: initialUserDataSize,\r\n            weight: initialUserDataWeight,\r\n            sex: initialUserDataSex,\r\n            pregnant: initialUserDataPregnant,\r\n            breastFeeding: initialUserDataBreastfeeding,\r\n            palValue: initialUserDataPalValue,\r\n            leisureSports: initialUserDataLeisureSports,\r\n            initialValues: true\r\n        },\r\n        debug: true,\r\n        ready: false\r\n    }\r\n\r\n    componentWillMount() {\r\n        const foodDataCorpus = NutrientDataImportService.loadFoodDataCorpus()\r\n        this.setState({\r\n            foodDataCorpus: foodDataCorpus,\r\n            ready: true\r\n        })\r\n    }\r\n\r\n    render(): ReactElement {\r\n\t\tconst value = {\r\n\t\t\tapplicationData: this.state.applicationData,\r\n\t\t\tfoodDataCorpus: this.state.foodDataCorpus,\r\n\t\t\tuserData: this.state.userData,\r\n\t\t\tdebug: this.state.debug,\r\n\t\t\tready: this.state.ready,\r\n\t\t\tsetUserData: this.setUserData,\r\n\t\t\tsetPreferredSource: this.setPreferredSource,\r\n\t\t\tsetFoodDataPanelData: {\r\n                setSelectedFoodTab: this.setSelectedFoodDataPanelTab,\r\n                setSelectedDataPage: this.setSelectedFoodDataPanelPage,\r\n                addItemToFoodDataPanel: this.addItemToFoodDataPanel,\r\n                removeItemFromFoodDataPanel: this.removeItemFromFoodDataPanel,\r\n                removeAllItemsFromFoodDataPanel: this.removeAllItemsFromFoodDataPanel,\r\n                updateAllFoodItemNames: this.updateAllFoodItemNames,\r\n                updateFoodDataPanelChartConfig: this.updateFoodDataPanelChartConfig\r\n\t\t\t},\r\n\t\t\tsetDirectCompareData: {\r\n                updateDirectCompareChartConfig: this.updateDirectCompareChartConfig,\r\n                setSelectedDirectCompareDataPage: this.setSelectedDirectCompareDataPage,\r\n                setSelectedDirectCompareItems: this.setSelectedDirectCompareItems\t\t\t\t\r\n\t\t\t},\r\n\t\t\tsetFoodSelectorConfig: this.setFoodSelectorConfig\r\n\t\t}\r\n\t\t\r\n        return (\r\n            <ApplicationDataContextStore.Provider value={value}>\r\n                {this.props.children}\r\n            </ApplicationDataContextStore.Provider>\r\n        )\r\n    }\r\n\r\n}\r\n","export const applicationStrings = {\r\n    button_add: {\r\n        de: 'Hinzufgen',\r\n        en: 'Add'\r\n    },\r\n    button_cancel: {\r\n        de: 'Abbrechen',\r\n        en: 'Cancel'\r\n    },\r\n    button_close: {\r\n        de: 'Schlieen',\r\n        en: 'Close'\r\n    },\r\n    button_getstarted: {\r\n        de: 'Lebensmittel analysieren',\r\n        en: 'Get started'\r\n    },\r\n    button_no: {\r\n        de: 'Nein',\r\n        en: 'No'\r\n    },\r\n    button_select: {\r\n        de: 'Auswhlen',\r\n        en: 'Show'\r\n    },\r\n    button_show: {\r\n        de: 'Anzeigen',\r\n        en: 'Show'\r\n    },\r\n    button_submit: {\r\n        de: 'bernehmen',\r\n        en: 'Submit'\r\n    },\r\n    button_update: {\r\n        de: \"Aktualisieren\",\r\n        en: \"Update\"\r\n    },\r\n    button_yes: {\r\n        de: 'Ja',\r\n        en: 'Yes'\r\n    },\r\n    checkbox_chartoption_showLegend: {\r\n        de: 'Legende anzeigen',\r\n        en: 'Show legend'\r\n    },\r\n    checkbox_chartoption_showDetails: {\r\n        de: 'Details anzeigen',\r\n        en: 'Show details'\r\n    },\r\n    checkbox_english: {\r\n        de: 'Englisch',\r\n        en: 'English'\r\n    },\r\n    checkbox_expand100g: {\r\n        de: 'Auf 100 % erweitern',\r\n        en: 'Expand to 100 %'\r\n    },\r\n    checkbox_german: {\r\n        de: 'Deutsch',\r\n        en: 'German'\r\n    },\r\n    checkbox_synchronize: {\r\n        de: 'Synchronisieren',\r\n        en: 'Synchronize'\r\n    },\r\n    confirm_close_all_tabs: {\r\n        de: 'Sollen wirklich alle Lebensmittel-Tabs geschlossen werden?',\r\n        en: 'Really close all food tabs?'\r\n    },\r\n    direct_compare_text: {\r\n        de: 'Whlen Sie zwei Lebensmittel aus den beiden Auswahlboxen, um diese miteinander zu vergleichen.',\r\n        en: 'Pick two food elements from the two selectors in order to compare them with each other.'\r\n      },\r\n    home_carousel_0: {\r\n        de: 'Vitamine in Lebensmitteln im Vergleich zum Tagesbedarf',\r\n        en: 'Vitamins in food compared to daily requirements'\r\n    },\r\n    home_carousel_1: {\r\n        de: 'Mineralstoffe in Lebensmitteln im Vergleich zum Tagesbedarf',\r\n        en: 'Minerals in food compared to daily requirements'\r\n    },\r\n    home_carousel_2: {\r\n        de: 'Nhrstoffzusammensetzung in einem Lebensmittel',\r\n        en: 'Food composition of nutrients'\r\n    },\r\n    home_carousel_3: {\r\n        de: 'Verteilung der Fettsuren (gesttigt / ungesttigt)',\r\n        en: 'Distribution of fatty acids (saturated / unsaturated)'\r\n    },\r\n    home_carousel_4: {\r\n        de: 'In Nahrungsmitteln enthaltene Aminosuren',\r\n        en: 'Amino acids conainted in foods'\r\n    },\r\n    home_carousel_5: {\r\n        de: 'Zusammenstellung von Mens (aggregierte Daten)',\r\n        en: 'Composite menus (aggregated data)'\r\n    },\r\n    home_text_1: {\r\n        de: 'Food Compare ist ein Webprojekt zur grafischen Darstellung der Zusammensetzung von Lebensmitteln. Whrend klassische Quellen die enthaltenen Inhaltsstoffe meist nur in tabellarischer Form angeben, verwendet Food Compare Grafiken und Diagramme, um den Gehalt an Vitaminen und Mineralstoffen, Kohlenhydraten, Fettsuren und Eiweien (Proteinen) leichter und bersichtlich darzustellen.',\r\n        en: 'FoodCompare is a web project to visually display information about food composition. While conventional resources commonly display nutrient data in tables, Food Compare provides charts and graphics to allow users a better understanding of the containing nutrients (carbohydrates, lipids, proteins) as well as vitamins and minerals.'\r\n    },\r\n    home_text_2: {\r\n        de: 'Das Hauptaugenmerk von Food Compare gilt jedoch nicht nur der Veranschaulichung einzelner Nahrungsmittel, sondern der Vergleichbarkeit von Nhrstoffen, Vitaminen und Mineralen in Lebensmittels. Dazu knnen beliebig viele Tabs geffnet und Lebensmittel damit leicht miteinander verglichen werden. So lassen sich bspw. auf einfache Weise der Vitamingehalt von einzelnen Obstsorten vergleichen, oder die Aufteilung von Kohlenhydraten, Fetten und Eiweien zwischen Grundnahrungsmitteln. Dabei erlaubt die Anwendung auch das Zusammenstellen von komplexen Mens, deren Gesamtgehalt an Nhrstoffen, Vitaminen und Mineralstoffen dann berechnet wird.',\r\n        en: 'The primary focus of Food Compare is to visually compare the composition and contents of different foods, though. Food items can be opened in different tabs so that nutrients, vitamins or minerals can be easily compare. As an example, users can compare the containing vitamins between different fruits or the nutrient composition between staple foods. In addition, the application allows to aggregate foods to more complex menus and will then calculate the overall amount of nutrients, vitamins and minerals in that menu.'\r\n    },\r\n    home_text_3: {\r\n        de: 'Um die Nhrstoffdiagramme zweier Lebensmittel auf einen Blick miteinander vergleichen zu knnen, gibt es seit der Version 1.2 nun auch einen zustzlichen Bereich, in denen die Diagramme entsprechend nebeneinander angeordnet sind. Einige Datenseiten wie Vitamine und Mineralstoffe lassen sich dabei auch synchronisieren, so dass eine einheitliche Skalierung der Diagramme stattfindet und nur die Daten angezeigt werden, welche fr beide Lebensmittel vorliegen.',\r\n        en: 'In order to compare nutrient charts of two foods at a glance, an additional page was added in version 1.2 where nutrient charts are placed next to each other. Some data pages like vitamins and minerals can also be synchronized, which means that the charts use a unique scaling and only display data that is available in both food elements.'\r\n    },\r\n    label_amount: {\r\n        de: 'Menge (Gramm)',\r\n        en: 'Amount (gram)'\r\n    },\r\n    label_amount_short: {\r\n        de: 'Gramm',\r\n        en: 'Gram'\r\n    },\r\n    label_category: {\r\n        de: 'Kategorie',\r\n        en: 'Category'\r\n    },\r\n    label_charttype: {\r\n        de: 'Diagrammart',\r\n        en: 'Chart type'\r\n    },\r\n    label_charttype_pie: {\r\n        de: 'Tortendiagramm',\r\n        en: 'Pie chart'\r\n    },\r\n    label_charttype_bar: {\r\n        de: 'Balkendiagramm',\r\n        en: 'Bar chart'\r\n    },\r\n    label_charttype_carbs_base: {\r\n        de: 'Allgemeine Werte',\r\n        en: 'Basic data'\r\n    },\r\n    label_charttype_carbs_detail: {\r\n        de: 'Detailwerte',\r\n        en: 'Detailed data'\r\n    },\r\n    label_charttype_energy: {\r\n        de: 'Grundumsatz und Gesamtumsatz (Energie)',\r\n        en: 'BMR and Energy Expenditure'\r\n    },\r\n    label_charttype_lipids_base: {\r\n        de: 'Allgemeine Werte',\r\n        en: 'Basic data'\r\n    },\r\n    label_charttype_lipids_base_title: {\r\n        de: 'Allgemeine Verteilung der Fettsuren',\r\n        en: 'Basic distributions of fatty acids'\r\n    },\r\n    label_charttype_lipids_omega: {\r\n        de: 'Omega-Werte',\r\n        en: 'Omega data'\r\n    },\r\n    label_charttype_lipids_omega_title: {\r\n        de: 'Allgemeine Verteilung der Omega-3/6-Fettsuren',\r\n        en: 'Basic distributions of Omega 3/6 acids'\r\n    },\r\n    label_charttype_minerals: {\r\n        de: 'Minerale (im Vgl. zum Tagesbedarf)',\r\n        en: 'Minerals (compared to dietary requirements)'\r\n    },\r\n    label_charttype_proteins: {\r\n        de: 'Proteine (im Vgl. zum Tagesbedarf)',\r\n        en: 'Proteins  (compared to dietary requirements)'\r\n    },\r\n    label_charttype_vitamins: {\r\n        de: 'Vitamine (im Vgl. zum Tagesbedarf)',\r\n        en: 'Vitamins (compared to dietary requirements)'\r\n    },\r\n    label_chart_bmr: {\r\n        de: 'Grundumsatz',\r\n        en: 'Basal Metabolic Rate (BMR)'\r\n    },\r\n    label_chart_energyExpenditure: {\r\n        de: 'Gesamtumsatz',\r\n        en: 'Energy Expenditure'\r\n    },\r\n    label_chart_nutrientComposition: {\r\n        de: 'Nhrstoffzusammensetzung',\r\n        en: 'Nutrient Composition'\r\n    },\r\n    label_chart_totalComposition: {\r\n        de: 'Gesamtzusammensetzung',\r\n        en: 'Total Composition'\r\n    },\r\n    label_datatype: {\r\n        de: 'Datentyp',\r\n        en: 'Data type'\r\n    },\r\n    label_food: {\r\n        de: \"Lebensmittel\",\r\n        en: \"Food\"\r\n    },\r\n    label_foodclass: {\r\n        de: 'Lebensmittel',\r\n        en: 'Food Class'\r\n    },\r\n    label_fooditem: {\r\n        de: 'Typ',\r\n        en: 'Food type'\r\n    },\r\n    label_foodselector: {\r\n        de: 'Lebensmittelauswahl',\r\n        en: 'Food Selector'\r\n    },\r\n    label_foodselector_composite: {\r\n        de: 'Zusammenstellung eines Lebensmittels',\r\n        en: 'Composite food generation'\r\n    },\r\n    label_info: {\r\n        de: 'Info',\r\n        en: 'Info'\r\n    },\r\n    label_info_category: {\r\n        de: 'Kategorie',\r\n        en: 'Category'\r\n    },\r\n    label_info_foodClass: {\r\n        de: 'Lebensmittel-Klasse',\r\n        en: 'Food Class'\r\n    },\r\n    label_info_foodId: {\r\n        de: 'Lebensmittel ID',\r\n        en: 'Food Id'\r\n    },\r\n    label_info_foodName: {\r\n        de: 'Lebensmittel',\r\n        en: 'Food'\r\n    },\r\n    label_info_portion: {\r\n        de: 'Portionsdaten',\r\n        en: 'Portion data'\r\n    },\r\n    label_info_portionType: {\r\n        de: 'Portionstyp',\r\n        en: 'Portion type'\r\n    },\r\n    label_info_preparation: {\r\n        de: 'Zubereitungsart',\r\n        en: 'Preparation type'\r\n    },\r\n    label_info_source: {\r\n        de: 'Quelle',\r\n        en: 'Source'\r\n    },\r\n    label_language: {\r\n        de: 'Sprache',\r\n        en: 'Language'\r\n    },\r\n    label_noData: {\r\n        de: 'Keine Daten vorhanden',\r\n        en: 'No data available'\r\n    },\r\n    label_nutrient_ash: {\r\n        de: 'Reststoffe',\r\n        en: 'Ash'\r\n    },\r\n    label_nutrient_carbohydrates: {\r\n        de: 'Kohlenhydrate',\r\n        en: 'Carbohydrates'\r\n    },\r\n    label_nutrient_carbohydrates_short: {\r\n        de: 'Kohlenhyd.',\r\n        en: 'Carbs'\r\n    },\r\n    label_nutrient_carbohydrates_fructose: {\r\n        de: 'Fruktose',\r\n        en: 'Fructose'\r\n    },\r\n    label_nutrient_carbohydrates_galactose: {\r\n        de: 'Galaktose',\r\n        en: 'Galactose'\r\n    },\r\n    label_nutrient_carbohydrates_glucose: {\r\n        de: 'Glukose (Traubenzucker)',\r\n        en: 'Glucose'\r\n    },\r\n    label_nutrient_carbohydrates_lactose: {\r\n        de: 'Laktose',\r\n        en: 'Lactose'\r\n    },\r\n    label_nutrient_carbohydrates_maltose: {\r\n        de: 'Maltose',\r\n        en: 'Maltose'\r\n    },\r\n    label_nutrient_carbohydrates_starch: {\r\n        de: 'Strke',\r\n        en: 'Starch'\r\n    },\r\n    label_nutrient_carbohydrates_sucrose: {\r\n        de: 'Sukrose',\r\n        en: 'Sucrose'\r\n    },\r\n    label_nutrient_dietaryFibers: {\r\n        de: 'Ballaststoffe',\r\n        en: 'Dietary fibers'\r\n    },\r\n    label_nutrient_dietaryFibers_short: {\r\n        de: 'Ballastst.',\r\n        en: 'Dietary fib.'\r\n    },\r\n    label_nutrient_energy: {\r\n        de: 'Energie',\r\n        en: 'Energy'\r\n    },\r\n    label_nutrient_lipids: {\r\n        de: 'Fett',\r\n        en: 'Fats'\r\n    },\r\n    label_nutrient_lipids_saturated: {\r\n        de: 'Gesttigte Fettsuren',\r\n        en: 'Saturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated: {\r\n        de: 'Ungesttigte Fettsuren',\r\n        en: 'Unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_mono: {\r\n        de: 'Einfach ungesttigte Fettsuren',\r\n        en: 'Mono-unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_poly: {\r\n        de: 'Mehrfach ungesttigte Fettsuren',\r\n        en: 'Poly-unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_transfattyAcids: {\r\n        de: 'Transfettsuren',\r\n        en: 'Transfatty acids'\r\n    },\r\n    label_nutrient_lipids_omega3: {\r\n        de: 'Omega-3-Fettsuren',\r\n        en: 'Omega-3 fatty acids'\r\n    },\r\n    label_nutrient_lipids_omega6: {\r\n        de: 'Omega-6-Fettsuren',\r\n        en: 'Omega-6 fatty acids'\r\n    },\r\n    label_nutrient_lipids_cholesterol: {\r\n        de: 'Cholesterin',\r\n        en: 'Cholesterol'\r\n    },\r\n    label_nutrient_min: {\r\n        de: 'Mineralstoffe',\r\n        en: 'Minerals'\r\n    },\r\n    label_nutrient_min_calcium: {\r\n        de: 'Kalzium',\r\n        en: 'Calcium'\r\n    },\r\n    label_nutrient_min_copper: {\r\n        de: 'Kupfer',\r\n        en: 'Copper'\r\n    },\r\n    label_nutrient_min_iron: {\r\n        de: 'Eisen',\r\n        en: 'Iron'\r\n    },\r\n    label_nutrient_min_magnesium: {\r\n        de: 'Magnesium',\r\n        en: 'Magnesium'\r\n    },\r\n    label_nutrient_min_manganese: {\r\n        de: 'Mangan',\r\n        en: 'Manganese'\r\n    },\r\n    label_nutrient_min_phosphorus: {\r\n        de: 'Phosphor',\r\n        en: 'Phosphorus'\r\n    },\r\n    label_nutrient_min_potassimum: {\r\n        de: 'Kalium',\r\n        en: 'Potassimum'\r\n    },\r\n    label_nutrient_min_selenium: {\r\n        de: 'Selen',\r\n        en: 'Selenium'\r\n    },\r\n    label_nutrient_min_sodium: {\r\n        de: 'Natrium',\r\n        en: 'Sodium'\r\n    },\r\n    label_nutrient_min_zinc: {\r\n        de: 'Zink',\r\n        en: 'Zinc'\r\n    },\r\n    label_nutrient_omega3: {\r\n        de: 'Omega-3-Fettsuren',\r\n        en: 'Omega-3 Fatty acids'\r\n    },\r\n    label_nutrient_omega6: {\r\n        de: 'Omega-6-Fettsuren',\r\n        en: 'Omega-6 Fatty acids'\r\n    },\r\n    label_nutrient_proteins: {\r\n        de: 'Eiwei',\r\n        en: 'Proteins'\r\n    },\r\n    label_nutrient_proteins_alanine: {\r\n        de: 'Alanin',\r\n        en: 'Alanine'\r\n    },\r\n    label_nutrient_proteins_arginine: {\r\n        de: 'Arginin',\r\n        en: 'Arginin'\r\n    },\r\n    label_nutrient_proteins_asparticAcid: {\r\n        de: 'Asparaginsure',\r\n        en: 'Aspartic acid'\r\n    },\r\n    label_nutrient_proteins_cystine: {\r\n        de: 'Cystein',\r\n        en: 'Cystein'\r\n    },\r\n    label_nutrient_proteins_glysine: {\r\n        de: 'Glysin',\r\n        en: 'Glysine'\r\n    },\r\n    label_nutrient_proteins_glutamicAcid: {\r\n        de: 'Glutamin',\r\n        en: 'Glutamic acid'\r\n    },\r\n    label_nutrient_proteins_histidine: {\r\n        de: 'Histidin',\r\n        en: 'Histidine'\r\n    },\r\n    label_nutrient_proteins_isoleucine: {\r\n        de: 'Isoleucin',\r\n        en: 'Isoleucin'\r\n    },\r\n    label_nutrient_proteins_leucine: {\r\n        de: 'Leucin',\r\n        en: 'Leucin'\r\n    },\r\n    label_nutrient_proteins_lysine: {\r\n        de: 'Lysin',\r\n        en: 'Lysine'\r\n    },\r\n    label_nutrient_proteins_methionine: {\r\n        de: 'Methionin',\r\n        en: 'Methionin'\r\n    },\r\n    label_nutrient_proteins_phenylalanine: {\r\n        de: 'Phenylalanin',\r\n        en: 'Phenylalanin'\r\n    },\r\n    label_nutrient_proteins_proline: {\r\n        de: 'Prolin',\r\n        en: 'Proline'\r\n    },\r\n    label_nutrient_proteins_serine: {\r\n        de: 'Serin',\r\n        en: 'Serine'\r\n    },\r\n    label_nutrient_proteins_threonine: {\r\n        de: 'Threonin',\r\n        en: 'Threonine'\r\n    },\r\n    label_nutrient_proteins_tryptophan: {\r\n        de: 'Tryptophan',\r\n        en: 'Tryptophan'\r\n    },\r\n    label_nutrient_proteins_tyrosine: {\r\n        de: 'Tyrosin',\r\n        en: 'Tyrosin'\r\n    },\r\n    label_nutrient_proteins_valine: {\r\n        de: 'Valin',\r\n        en: 'Valin'\r\n    },\r\n    label_nutrient_remainder: {\r\n        de: 'Rest',\r\n        en: 'Remainder'\r\n    },\r\n    label_nutrient_sugar: {\r\n        de: 'Zucker',\r\n        en: 'Sugar'\r\n    },\r\n    label_nutrient_vit: {\r\n        de: 'Vitamine',\r\n        en: 'Vitamins'\r\n    },\r\n    label_nutrient_vit_a: {\r\n        de: 'Vitamin A (Retinol, Retinal, ...)',\r\n        en: 'Vitamin A (Retinol, Retinal, ...)'\r\n    },\r\n    label_nutrient_vit_b1: {\r\n        de: 'Vitamin B1 (Thiamine)',\r\n        en: 'Vitamin B1 (Thiamine)'\r\n    },\r\n    label_nutrient_vit_b2: {\r\n        de: 'Vitamin B2 (Riboflavin)',\r\n        en: 'Vitamin B2 (Riboflavin)'\r\n    },\r\n    label_nutrient_vit_b3: {\r\n        de: 'Vitamin B3 (Niacin)',\r\n        en: 'Vitamin B3 (Niacin)'\r\n    },\r\n    label_nutrient_vit_b5: {\r\n        de: 'Vitamin B5 (Pantothensure)',\r\n        en: 'Vitamin B5 (Pantothenic acid)'\r\n    },\r\n    label_nutrient_vit_b6: {\r\n        de: 'Vitamin B6',\r\n        en: 'Vitamin B6'\r\n    },\r\n    label_nutrient_vit_b9: {\r\n        de: 'Vitamin B9 (Folsure)',\r\n        en: 'Vitamin B9 (Folate)'\r\n    },\r\n    label_nutrient_vit_b12: {\r\n        de: 'Vitamin B12',\r\n        en: 'Vitamin B12'\r\n    },\r\n    label_nutrient_vit_c: {\r\n        de: 'Vitamin C',\r\n        en: 'Vitamin C'\r\n    },\r\n    label_nutrient_vit_d: {\r\n        de: 'Vitamin D',\r\n        en: 'Vitamin D'\r\n    },\r\n    label_nutrient_vit_e: {\r\n        de: 'Vitamin E',\r\n        en: 'Vitamin E'\r\n    },\r\n    label_nutrient_vit_k: {\r\n        de: 'Vitamin K',\r\n        en: 'Vitamin K'\r\n    },\r\n    label_nutrient_water: {\r\n        de: 'Wasser',\r\n        en: 'Water'\r\n    },\r\n    label_overview: {\r\n        de: 'bersicht',\r\n        en: 'Overview'\r\n    },\r\n    label_portion: {\r\n        de: 'Portion',\r\n        en: 'Portion'\r\n    },\r\n    label_prefix_hereof: {\r\n        de: 'davon',\r\n        en: 'hereof'\r\n    },\r\n    label_reference: {\r\n        de: 'Bezug',\r\n        en: 'Reference'\r\n    },\r\n    label_preferred_source: {\r\n        de: 'Bevorzugte Datenquelle',\r\n        en: 'Preferred data source'\r\n    },\r\n    label_source: {\r\n        de: 'Datenquelle',\r\n        en: 'Data source'\r\n    },\r\n    label_source_supplement: {\r\n      de: \"Unvollstndige Daten ergnzen\",\r\n      en: \"Supplement incomplete data\"\r\n    },\r\n    label_source_supplement_tooltip: {\r\n        de: \"Ergnzt fehlende Daten aus einer anderen Quelle, sofern diese die entsprechenden Daten enthlt\",\r\n        en: \"Supplements missing data from another source in case that source contains the relevant data\"\r\n    },\r\n    label_source_combine: {\r\n        de: \"Datenquellen kombinieren\",\r\n        en: \"Combine data sources\"\r\n    },\r\n    label_source_combine_tooltip: {\r\n        de: \"Bildet den Daten-Mittelwert aus allen Datenquellen zu dem Lebensmittel\",\r\n        en: \"Create the average data out of all available data sources to this food\"\r\n    },\r\n    label_unknown: {\r\n        de: 'Unbekannt',\r\n        en: 'Unknown'\r\n    },\r\n    label_userSettings_age: {\r\n        de: 'Alter',\r\n        en: 'Age'\r\n    },\r\n    label_userSettings_breastfeeding: {\r\n        de: 'stillend',\r\n        en: 'breast-feeding'\r\n    },\r\n    label_userSettings_leisureSports: {\r\n        de: 'Freizeitsport',\r\n        en: 'Leisure sports'\r\n    },\r\n    label_userSettings_leisureSports_tooltip: {\r\n        de: 'Angabe, ob Sie an dem betreffenden Tag zustzlich zu Ihrer Ttigkeit nennenswert Sport ausgebt haben, z.B. 30-45 min joggen oder 45-60 min Rad fahren (erhht PAL-Wert um 0.3)',\r\n        en: 'Specifies whether you did some notable (leisure) sports or activity that day, like 30-45 minutes jogging or 45-60 minutes biking (increases PAL-value by 0.3)'\r\n    },\r\n    label_userSettings_palValue: {\r\n        de: 'PAL-Value',\r\n        en: 'Pal Value'\r\n    },\r\n    label_userSettings_pregnant: {\r\n        de: 'schwanger',\r\n        en: 'pregnant'\r\n    },\r\n    label_userSettings_sex: {\r\n        de: 'Geschlecht:',\r\n        en: 'Sex:'\r\n    },\r\n    label_userSettings_sex_male: {\r\n        de: 'mnnlich',\r\n        en: 'male'\r\n    },\r\n    label_userSettings_sex_female: {\r\n        de: 'weiblich',\r\n        en: 'female'\r\n    },\r\n    label_userSettings_size: {\r\n        de: 'Krpergre',\r\n        en: 'Size'\r\n    },\r\n    label_userSettings_weight: {\r\n        de: 'Gewicht',\r\n        en: 'Weight'\r\n    },\r\n    menu_food_data_panel: {\r\n        de: 'Lebensmittel analysieren',\r\n        en: 'Food data analyzer'\r\n    },\r\n    menu_direct_compare: {\r\n        de: 'Direktvergleich',\r\n        en: 'Direct comparison'\r\n    },\r\n    menu_home: {\r\n        de: 'Home',\r\n        en: 'Home'\r\n    },\r\n    menu_mobile_app: {\r\n        de: 'Mobile App',\r\n        en: 'Mobile App'\r\n    },\r\n    menu_ranking: {\r\n        de: 'Lebensmittel Ranking',\r\n        en: 'Food ranking'\r\n    },\r\n    menu_settings: {\r\n        de: 'User Einstellungen',\r\n        en: 'User settings'\r\n    },\r\n    menu_contact: {\r\n        de: 'Kontakt',\r\n        en: 'Contact'\r\n    },\r\n    message_error_existing_element: {\r\n        de: 'Das ausgewhlte Element befindet sich bereits im Datenbereich. Ein Lebensmittel darf nur einmal hinzugefgt werden.',\r\n        en: 'The selected food item already exists in your list. A food item can be added only once.'\r\n    },\r\n    message_error_incomplete_form: {\r\n        de: 'Das Formular ist unvollstndig ausgefllt.',\r\n        en: 'The form is incomplete.'\r\n    },\r\n    message_error_invalid_portion: {\r\n        de: 'Geben Sie bitte eine Portion zwischen 1 und 5000 Gramm an.',\r\n        en: 'Please specify a portion amount between 1 and 5000 gram.'\r\n    },\r\n    message_userdata_success: {\r\n        de: 'nderungen wurden gespeichert.',\r\n        en: 'Saved changes.'\r\n    },\r\n    message_userdata_error_title: {\r\n        de: 'Fehlerhafte Eingabe',\r\n        en: 'Invalid input'\r\n    },\r\n    message_userdata_error_age: {\r\n        de: 'Geben Sie bitte ein Alter zwischen 15 und 100 Jahren ein.',\r\n        en: 'Please enter an age between 15 and 100 years.'\r\n    },\r\n    message_userdata_error_size: {\r\n        de: 'Geben Sie bitte eine Krpergre zwischen 80 und 225 cm ein.',\r\n        en: 'Please enter a body height between 80 and 225 cm.'\r\n    },\r\n    message_userdata_error_weight: {\r\n        de: 'Geben Sie bitte ein Gewicht zwischen 30 und 250 kg ein.',\r\n        en: 'Please enter a body weight between 30 and 250 kg.'\r\n    },\r\n    palcat_name_1: {\r\n        de: 'Extrem niedrige Aktivitt',\r\n        en: 'Extremely light activity.'\r\n    },\r\n    palcat_desc_1: {\r\n        de: 'Bspw. ans Bett gebundene Menschen.',\r\n        en: 'Such as bed-ridden people.'\r\n    },\r\n    palcat_name_2: {\r\n        de: 'Sehr nierdige Aktivitt',\r\n        en: 'Very light activity'\r\n    },\r\n    palcat_desc_2: {\r\n        de: 'Bspw. sehr einfache Broarbeit in permanent sitzender Haltung, Reisende in einem Flugzeug oder Zug (sitzend).',\r\n        en: 'Such as very light office work (permanently seated), passengers sitting in a train or airplane.'\r\n    },\r\n    palcat_name_3: {\r\n        de: 'Niedrige Aktivitt',\r\n        en: 'Light activity'\r\n    },\r\n    palcat_desc_3: {\r\n        de: 'berwiegend sitzende Ttigkeit, mit Phasen im stehenden Zustand (z.B. Berufsfahrer, rzte, Lehrer, Schler) oder dem Ausfhren zustzlicher leichter Ttigkeiten (z.B. einfache Haushaltsttigkeiten).',\r\n        en: 'Mostly seated activity, with phases of standing activity (e.g., drivers, doctors, students, teachers...) or additional tasks like simple household chores.'\r\n    },\r\n    palcat_name_4: {\r\n        de: 'Mige Aktivitt',\r\n        en: 'Mediocre Activity'\r\n    },\r\n    palcat_desc_4: {\r\n        de: 'berwiegende Stehende Ttigkeit (z.B. Handwerker, Verkufer, Kellner, Krankenschwester).',\r\n        en: 'Mostly standing activity (e.g. shop assistants, waiters, craftsmen, nurses).'\r\n    },\r\n    palcat_name_5: {\r\n        de: 'Hohe Aktivitt',\r\n        en: 'High activity'\r\n    },\r\n    palcat_desc_5: {\r\n        de: 'Krperlich schwere Arbeit, z.B. Bauarbeiter, Mbelpacker, Sportlehrer.',\r\n        en: 'Hard work, such as construction workers, movers, gym teachers etc.'\r\n    },\r\n    palcat_name_6: {\r\n        de: 'Sehr hohe Aktivitt',\r\n        en: 'Very high activity'\r\n    },\r\n    palcat_desc_6: {\r\n        de: 'Krperlich sehr schwere Arbeit, z.B. Bauarbeiter, Mbelpacker, Fitnesstrainer, Bergarbeiter.',\r\n        en: 'Very hard work, such as construction workers, movers, fitness trainers, miners etc.'\r\n    },\r\n    palcat_name_7: {\r\n        de: 'Extrem hohe Aktivitt',\r\n        en: 'Extremely high activity'\r\n    },\r\n    palcat_desc_7: {\r\n        de: 'Bspw. (Hoch-) Leistungssportler.',\r\n        en: 'Such as professional athletes.'\r\n    },\r\n    portion_100g: {\r\n        de: '100 Gramm',\r\n        en: '100 Gram'\r\n    },\r\n    portion_individual: {\r\n        de: 'Individuell',\r\n        en: 'Individual'\r\n    },\r\n    text_contact_disclaimer1: {\r\n        de: 'Alle Rechte vorbehalten.',\r\n        en: 'All rights reserved.'\r\n    },\r\n    text_contact_disclaimer2: {\r\n        de: 'Food Compare basiert auf freien Datenquellen, die im Quellenabschnitt weiter unten aufgelistet sind. Es besteht keinerlei Garantie fr die Korrektheit oder Zuverlssigkeit der ins Projekt geladenen und im Projekt verwendeten Daten. Food Compare ist ein freies Programm zur Visualisierung von Nhrwerten in Lebensmitteln, das in keiner Weise medizinische oder biologische Befunde ersetzt, sondern lediglich bestehende Nhrwertdaten und -quellen grafisch aufbereitet darstellt.',\r\n        en: 'Food Compare is based upon free data sources listed in the sources section below. There is no warranty for the correctness or reliability of the data imported to and used within the project. Food Compare is a free visualization tool for food nutrients, which does not replace in any way medical or biological food and nutrient data sources and will merely supplement existing food nutrient sources for laypeople that are interested in this matter.'\r\n    },\r\n    text_contact_source1: {\r\n        de: 'Quellen:',\r\n        en: 'Sources:',\r\n    },\r\n    text_contact_source2: {\r\n        de: 'Nhrwert-Daten:',\r\n        en: 'Nutrient Data:',\r\n    },\r\n    text_contact_source3: {\r\n        de: 'Daten fr Tagesbedarf von Vitaminen/Mineralstoffen:',\r\n        en: 'Source for Dietary Requirement of Minerals and Vitamins',\r\n    },\r\n    text_contact_source4: {\r\n        de: 'Berechnung von Grundumsatz und PAL:',\r\n        en: 'Calculation of BMR and PAL:',\r\n    },\r\n    text_empty_fooddatapanel: {\r\n        de: 'Klicken Sie links auf den Plus-Button, um Lebensmittel zum Analysebereich hinzufgen. Es knnen beliebig viele Lebensmittel hinzugefgt werden. Klicken Sie den Stapel-Button, um ein komplexes Lebensmittel bzw. ein Men zusammenzustellen, dessen Gesamtwerte dann agezeigt werden.',\r\n        en: 'Click the plus button on the left to add food elements to the analysis panel. You can add as many food elements as you like. Click the stack button if you want to create complex meals to show their total nutrient data.'\r\n    },\r\n    text_foodcompareapp_1: {\r\n        de: 'Fr Androidgerte bieten wir eine Mobilversion von Food Compare an, welche dieselben Funktionen wie die Website beinhaltet. Zustzlich knnen Lebensmittel dort auch nach einem bestimmten Nhrstoff, Vitamin oder Mineralstoff sortiert werden. So lassen sich leicht Lebensmittel mit den hchsten Werten von einer Gruppe identifizieren.',\r\n        en: 'For Android devices we also provide a mobile app containing the same functionality as the website. Additionally, the mobile app also allows you to rank food by specific nutrients, vitamins or minerals to support users in identifying food elements that have the highest amount of a specific nutrient aspect.',\r\n    },\r\n    text_foodcompareapp_2: {\r\n        de: 'App im Playstore erhalten',\r\n        en: 'Get the App from the Playstore'\r\n    },\r\n    text_setUserdata_p1: {\r\n        de: 'Es werden aktuell Standardwerte fr einen durchschnittlichen Erwachsenen (mnnlich, 35 Jahre) angezeigt.',\r\n        en: 'You are currently seeing the reference data for an average adult (male, 35 years).'\r\n    },\r\n    text_setUserdata_p2: {\r\n        de: 'Geben Sie, bei Bedarf, in den Einstellungen Ihre eigenen Krperdaten fr ein genaueres Ergebnis ein.',\r\n        en: 'For more accurate data, if necessary, please enter your personal body data in the settings menu.'\r\n    },\r\n    text_setUserdata_p3: {\r\n        de: 'Die Referenzwerte beziehen sich auf die eingestellten Nutzerdaten.',\r\n        en: 'The reference data refer to your entered body data.'\r\n    },\r\n    tooltip_icon_charts: {\r\n        de: 'Diagramm-Modus',\r\n        en: 'Chart mode'\r\n    },\r\n    tooltip_icon_close: {\r\n        de: 'Tab schlieen',\r\n        en: 'Close tab'\r\n    },\r\n    tooltip_icon_newFoodItem: {\r\n        de: 'Lebensmittel hinzufgen',\r\n        en: 'Add food item'\r\n    },\r\n    tooltip_icon_newFoodItemStack: {\r\n        de: 'Kombinierte Liste an Lebensmitteln hinzufgen (aggregierte Daten)',\r\n        en: 'Add composite list of food items (aggregated data)'\r\n    },\r\n    tooltip_icon_removeAll: {\r\n        de: 'Alle Tabs schlieen',\r\n        en: 'Close all data tabs'\r\n    },\r\n    tooltip_icon_table: {\r\n        de: 'Tabellen-Modus',\r\n        en: 'Table mode'\r\n    }\r\n}","import ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {getReactSelectOptionsList} from \"./NameTypeService\";\r\n\r\nexport function getCategorySelectList(categories: Array<NameType>, language: string): Array<ReactSelectOption> {\r\n    return getReactSelectOptionsList(categories, language)\r\n}\r\n\r\n","import {ReactSelectFoodClassOption} from \"../../types/ReactSelectOption\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport getName from \"../LanguageService\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\n\r\nexport function getFoodClassSelectList(foodClasses: Array<FoodClass>, category: number, foodNames: Array<NameType>, language: string): Array<ReactSelectFoodClassOption> {\r\n    const filteredFoodClasses = getFoodClassesOfCategory(foodClasses, category)\r\n\r\n    if(!filteredFoodClasses || filteredFoodClasses.length === 0) {\r\n        return []\r\n    }\r\n\r\n    const reactSelectOptions: Array<ReactSelectFoodClassOption> = []\r\n    filteredFoodClasses.forEach(foodClass => {\r\n        const nameId = foodClass.nameKey\r\n        if(nameId > foodNames.length) {\r\n            console.error(`Illegal food name Id in food class having ID=${foodClass.id}`)\r\n            return\r\n        }\r\n        const nameType = foodNames[nameId-1]\r\n        const foodName = getName(nameType, language)\r\n        reactSelectOptions.push({\r\n            value: foodClass,\r\n            label: foodName\r\n        })\r\n    })\r\n\r\n    reactSelectOptions.sort((obj1, obj2) => obj1.label.localeCompare(obj2.label))\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nfunction getFoodClassesOfCategory(foodClasses: Array<FoodClass>, category: number): Array<FoodClass> {\r\n    return foodClasses.filter(foodClass => {\r\n        if(category === 0) {\r\n            return foodClass\r\n        } else if(foodClass.category === category) {\r\n            return foodClass\r\n        } else {\r\n            return null\r\n        }\r\n    })\r\n}","import FoodItem from \"../../types/nutrientdata/FoodItem\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {ReactSelectFoodItemOption} from \"../../types/ReactSelectOption\";\r\nimport getName from \"../LanguageService\";\r\n\r\nexport function getFoodItem(foodItemId: number, foodItems: Array<FoodItem>): FoodItem | null {\r\n    const index = foodItems.findIndex(foodItem => foodItem.id === foodItemId)\r\n    if(index >= 0) {\r\n        return foodItems[index]\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\nexport function getFoodItemsSelectList(foodItems: Array<FoodItem>, foodClass: number, foodNames: Array<NameType>, conditions: Array<NameType>, language: string): Array<ReactSelectFoodItemOption> {\r\n    const filteredFoodItems = getFoodItemsOfFoodclass(foodItems, foodClass)\r\n    const reactSelectOptions: Array<ReactSelectFoodItemOption> = []\r\n\r\n    if(filteredFoodItems && filteredFoodItems.length > 0) {\r\n        filteredFoodItems.forEach(foodItem => {\r\n            const nameId = foodItem.nameId!!\r\n            if(nameId > foodNames.length) {\r\n                console.error(`Illegal food name Id in food item having ID=${foodItem.id}`)\r\n                return\r\n            }\r\n            const nameType = foodNames[nameId-1]\r\n            let foodName = getName(nameType, language)\r\n            const condition = conditions.find(condition => condition.id === foodItem.conditionId)\r\n            const conditionName =condition ? getName(condition, language) : null\r\n\r\n            if(conditionName) {\r\n                foodName = `${foodName} (${conditionName})`\r\n            }\r\n\r\n            reactSelectOptions.push({\r\n                value: foodItem,\r\n                label: foodName\r\n            })\r\n        })\r\n    }\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\nfunction getFoodItemsOfFoodclass(foodItems: Array<FoodItem>, foodClassId: number): Array<FoodItem> {\r\n    return foodItems.filter(foodItem => {\r\n        if(foodItem.foodClass === foodClassId) {\r\n            return foodItem\r\n        } else {\r\n            return null\r\n        }\r\n    })\r\n}","import NameType from \"../../types/nutrientdata/NameType\";\r\nimport {ReactSelectPortionOption} from \"../../types/ReactSelectOption\";\r\nimport FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport getName from \"../LanguageService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {PORTION_KEY_100, PORTION_KEY_INDIVIDUAL} from \"../../config/Constants\";\r\n\r\n\r\nexport function getPortionReactSelectList(portionData: Array<PortionData>, portionTypes: Array<NameType>, language: string): Array<ReactSelectPortionOption> {\r\n    const reactSelectOptions: Array<ReactSelectPortionOption> = []\r\n    portionData.forEach(portionElement => {\r\n        const portionTypeIndex = portionTypes.findIndex(portionType => {\r\n             return portionType.id === portionElement.portionType\r\n        })\r\n\r\n        const portionType = portionTypes[portionTypeIndex]\r\n        const portionName = getName(portionType, language)\r\n        reactSelectOptions.push({\r\n            value: portionElement,\r\n            label: portionName\r\n        })\r\n    })\r\n\r\n    reactSelectOptions.push({\r\n        value: {amount: 100, portionType: PORTION_KEY_100},\r\n        label: applicationStrings.portion_100g[language]\r\n    })\r\n\r\n    reactSelectOptions.push({\r\n        value: {amount: 0, portionType: PORTION_KEY_INDIVIDUAL},\r\n        label: applicationStrings.portion_individual[language]\r\n    })\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getDefaultPortionData(foodItem: FoodItem, portionDataList: Array<ReactSelectPortionOption>): ReactSelectPortionOption {\r\n    let defaultPortionIndex = portionDataList.findIndex(portionData => {\r\n        return portionData.value.portionType === foodItem.defaultPortionId\r\n    })\r\n\r\n    if (defaultPortionIndex < 0 || defaultPortionIndex >= portionDataList.length) {\r\n        defaultPortionIndex = 0;\r\n    }\r\n\r\n    return portionDataList[defaultPortionIndex]\r\n}","import {createContext, useState} from \"react\";\r\nimport {LANGUAGE_DE, LANGUAGE_EN} from \"../config/Constants\";\r\n\r\nexport interface LanguageProviderProps {\r\n    language: string\r\n    userLanguageChange: (selectedLanguage: string) => void\r\n}\r\n\r\nexport const LanguageContext = createContext<LanguageProviderProps>({\r\n    language: 'en',\r\n    userLanguageChange: (selectedLanguage) => {return 'en'}\r\n});\r\n\r\nexport function LanguageProvider({ children }) {\r\n    const userLanguage = navigator.language;\r\n    const preferredLanguage = userLanguage === 'de' ? LANGUAGE_DE : LANGUAGE_EN\r\n\r\n    const [language, setLanguage] = useState(preferredLanguage);\r\n\r\n\r\n    const userLanguageChange = (selectedLanaguage: string): void => {\r\n        const newLanguage = selectedLanaguage ? selectedLanaguage : LANGUAGE_EN\r\n        setLanguage(newLanguage);\r\n    }\r\n\r\n    const provider: LanguageProviderProps = {\r\n        language,\r\n        userLanguageChange\r\n    };\r\n\r\n    return (\r\n        <LanguageContext.Provider value={provider}>\r\n            {children}\r\n        </LanguageContext.Provider>\r\n    );\r\n};\r\n\r\n\r\n\r\n","import {useEffect, useState} from \"react\";\r\nimport {smallFormsScreenSize} from \"../config/ApplicationSetting\";\r\n\r\nexport interface WindowDimension {\r\n    width: number\r\n    height: number\r\n}\r\n\r\nfunction getCurrentWindowDimension() {\r\n    return {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight\r\n    }\r\n}\r\n\r\nexport function useWindowDimension() {\r\n    const [windowDimension, setWindowDimension] = useState(getCurrentWindowDimension())\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", () => setWindowDimension(getCurrentWindowDimension))\r\n        return () => window.removeEventListener(\"resize\", () => setWindowDimension(getCurrentWindowDimension))\r\n    }, [])\r\n\r\n    return windowDimension\r\n}\r\n\r\n\r\nexport function isSmallScreen(windowDimension: WindowDimension) {\r\n    return windowDimension.width < smallFormsScreenSize.width || windowDimension.height < smallFormsScreenSize.height\r\n}","import FoodItem, {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\n\r\nexport function getSourceName(sourceId: number) {\r\n    switch (sourceId) {\r\n        case 0:\r\n            return \"SR Legacy\"\r\n        case 1:\r\n            return \"FNDDS\"\r\n        default:\r\n            return \"unknown\"\r\n    }\r\n}\r\n\r\nexport function getNutrientData(selectedFoodItem: SelectedFoodItem): NutrientData {\r\n    return getNutrientDataForFoodItem(selectedFoodItem.foodItem, selectedFoodItem.selectedSource,\r\n        selectedFoodItem.supplementData, selectedFoodItem.combineData)\r\n}\r\n\r\nexport function getNutrientDataForFoodItem(foodItem: FoodItem, sourceToUse?: number, supplementData?: boolean,\r\n                                           combineData?: boolean): NutrientData {\r\n    if (sourceToUse === null || sourceToUse === undefined || foodItem.nutrientDataList.length === 1) {\r\n        return foodItem.nutrientDataList[0]\r\n    } else {\r\n        const nutrientData = foodItem.nutrientDataList.find(nutrientDataObject => nutrientDataObject.source.id === sourceToUse)\r\n        if (nutrientData) {\r\n            if(supplementData || combineData) {\r\n                const complement = foodItem.nutrientDataList.find(nutrientDataObject => nutrientDataObject.source.id !== sourceToUse)\r\n                if(complement) {\r\n                    if(supplementData && !combineData) {\r\n                        return supplementNutrientData(nutrientData, complement)\r\n                    }\r\n                    if(combineData) {\r\n                        return combineNutrientData(nutrientData, complement)\r\n                    }\r\n                }\r\n            }\r\n            return nutrientData\r\n        } else {\r\n            return foodItem.nutrientDataList[0]\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function supplementNutrientData(selectedNutrientData: NutrientData, complementeNutrientData: NutrientData): NutrientData {\r\n    const supplementedBaseData = supplementCategory(selectedNutrientData.baseData, complementeNutrientData.baseData)\r\n    const supplementedVitaminData = supplementCategory(selectedNutrientData.vitaminData, complementeNutrientData.vitaminData)\r\n    const supplementedMineralData = supplementCategory(selectedNutrientData.mineralData, complementeNutrientData.mineralData)\r\n    const supplementedCarbsData = supplementCategory(selectedNutrientData.carbohydrateData, complementeNutrientData.carbohydrateData)\r\n    const supplementedProteinData = supplementCategory(selectedNutrientData.proteinData, complementeNutrientData.proteinData)\r\n\r\n    const supplementedOmegaData = supplementCategory(selectedNutrientData.lipidData.omegaData, complementeNutrientData.lipidData.omegaData)\r\n    let supplementedLipidData = supplementCategory(selectedNutrientData.lipidData, complementeNutrientData.lipidData)\r\n    supplementedLipidData.omegaData = supplementedOmegaData\r\n\r\n    return {\r\n        source: selectedNutrientData.source,\r\n        sourceItemId: selectedNutrientData.sourceItemId,\r\n        baseData: supplementedBaseData,\r\n        vitaminData: supplementedVitaminData,\r\n        mineralData: supplementedMineralData,\r\n        carbohydrateData: supplementedCarbsData,\r\n        proteinData: supplementedProteinData,\r\n        lipidData: supplementedLipidData\r\n    }\r\n}\r\n\r\n\r\nfunction supplementCategory(nutrientCategory1: any, nutrientCategory2: any): any {\r\n    if(!nutrientCategory2) {\r\n        return nutrientCategory1\r\n    }\r\n\r\n    const keysComplement = Object.keys(nutrientCategory2)\r\n    keysComplement.forEach(key => {\r\n        if(nutrientCategory1[key] === null) {\r\n            const objectHasChildren = nutrientCategory2[key] && Object.keys(nutrientCategory2[key]).length > 0\r\n            // Add value from source 2 to source 1 if it is not a sub-object (like Omega object on Lipids object):\r\n            if(nutrientCategory2[key] !== null && !objectHasChildren) {\r\n                nutrientCategory1[key] = nutrientCategory2[key]\r\n            }\r\n        }\r\n    })\r\n\r\n    return nutrientCategory1\r\n}\r\n\r\n\r\nexport function combineNutrientData(selectedNutrientData: NutrientData, complementeNutrientData: NutrientData): NutrientData {\r\n    const combinedBaseData = combineCategory(selectedNutrientData.baseData, complementeNutrientData.baseData)\r\n    const combinedVitaminData = combineCategory(selectedNutrientData.vitaminData, complementeNutrientData.vitaminData)\r\n    const combinedMineralData = combineCategory(selectedNutrientData.mineralData, complementeNutrientData.mineralData)\r\n    const combinedCarbsData = combineCategory(selectedNutrientData.carbohydrateData, complementeNutrientData.carbohydrateData)\r\n    const combinedProteinData = combineCategory(selectedNutrientData.proteinData, complementeNutrientData.proteinData)\r\n\r\n    const combinedOmegaData = combineCategory(selectedNutrientData.lipidData.omegaData, complementeNutrientData.lipidData.omegaData)\r\n    let combinedLipidData = combineCategory(selectedNutrientData.lipidData, complementeNutrientData.lipidData)\r\n    combinedLipidData.omegaData = combinedOmegaData\r\n\r\n    return {\r\n        source: selectedNutrientData.source,\r\n        sourceItemId: selectedNutrientData.sourceItemId,\r\n        baseData: combinedBaseData,\r\n        vitaminData: combinedVitaminData,\r\n        mineralData: combinedMineralData,\r\n        carbohydrateData: combinedCarbsData,\r\n        proteinData: combinedProteinData,\r\n        lipidData: combinedLipidData\r\n    }\r\n}\r\n\r\n\r\nfunction combineCategory(nutrientCategory1: any, nutrientCategory2: any): any {\r\n    if(!nutrientCategory1 && nutrientCategory2) {\r\n        return nutrientCategory2\r\n    } else if(nutrientCategory1 && !nutrientCategory2) {\r\n        return nutrientCategory1\r\n    } else if(!nutrientCategory1 && !nutrientCategory2) {\r\n        return null\r\n    }\r\n\r\n    const keys1: Array<string> = Object.keys(nutrientCategory1)\r\n    const keys2: Array<string> = Object.keys(nutrientCategory2)\r\n\r\n    // @ts-ignore\r\n    const allKeys = [...new Set<string>([...keys1, ...keys2])]\r\n    let finalObject = {}\r\n\r\n    allKeys.forEach(key => {\r\n        const value1 = nutrientCategory1[key] !== null\r\n            ? nutrientCategory1[key]\r\n            : null\r\n\r\n        const value2 = nutrientCategory2[key] !== null\r\n            ? nutrientCategory2[key]\r\n            : null\r\n\r\n        let finalValue\r\n\r\n        if(value1 !== null && value2 === null) {\r\n            finalValue = value1\r\n        } else if(value1 === null && value2 !== null) {\r\n            finalValue = value2\r\n        } else if(value1 === null && value2 === null) {\r\n            finalValue = null\r\n        }else {\r\n            finalValue = (value1 + value2) * 0.5\r\n        }\r\n\r\n        finalObject[key] = finalValue\r\n    })\r\n\r\n    return finalObject\r\n}\r\n","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport Select from 'react-select';\r\nimport ReactSelectOption, {\r\n    ReactSelectFoodClassOption,\r\n    ReactSelectFoodItemOption,\r\n    ReactSelectPortionOption\r\n} from \"../../types/ReactSelectOption\";\r\nimport {getCategorySelectList} from \"../../service/nutrientdata/CategoryService\";\r\nimport {getFoodClassSelectList} from \"../../service/nutrientdata/FoodClassService\";\r\nimport {getFoodItemsSelectList} from \"../../service/nutrientdata/FoodItemsService\";\r\nimport FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {getDefaultPortionData, getPortionReactSelectList} from \"../../service/nutrientdata/PortionDataService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {isSmallScreen, useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {SOURCE_FNDDS, SOURCE_SRLEGACY} from \"../../config/Constants\";\r\nimport {getSourceName} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {Form} from \"react-bootstrap\";\r\n\r\nexport interface FoodSelectorProps {\r\n    updateSelectedFoodItem: (selectedFoodItem: SelectedFoodItem) => void\r\n    smallVariant: boolean\r\n    noCategorySelect?: boolean\r\n    initialFoodClassToSet?: number\r\n    selectedFoodItem?: SelectedFoodItem | null\r\n}\r\n\r\n/**\r\n * Component to select a food element. The component can optionally show the category list and can be initialized\r\n * with an already existing selected food item (in case of component re-rendering).\r\n */\r\nexport default function FoodSelector(props: FoodSelectorProps): JSX.Element {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const initialCategory = applicationContext?.applicationData.foodSelector.selectedCategory\r\n        ? applicationContext.applicationData.foodSelector.selectedCategory\r\n        : null\r\n\r\n    const initialSupplementValue = applicationContext?.applicationData.foodSelector.sourceSupplement || false\r\n    const initialCombineValue = applicationContext?.applicationData.foodSelector.sourceCombine || false\r\n\r\n    const [selectedCategory, setSelectedCategory] = useState<ReactSelectOption | null>(initialCategory)\r\n    const [selectdFoodClass, setSelectedFoodClass] = useState<ReactSelectFoodClassOption | null>(null)\r\n    const [selectedFoodItem, setSelectedFoodItem] = useState<ReactSelectFoodItemOption | null>(null)\r\n    const [selectedPortion, setSelectedPortion] = useState<ReactSelectPortionOption | null>(null)\r\n    const [portionAmount, setPortionAmount] = useState<number>(0)\r\n    const [selectedSource, setSelectedSource] = useState<ReactSelectOption | null>(null)\r\n    const [supplementData, setSupplementData] = useState<boolean>(initialSupplementValue)\r\n    const [combineData, setCombineData] = useState<boolean>(initialCombineValue)\r\n    const [initialized, setInitialized] = useState<boolean>(false)\r\n\r\n    const [categoriesList, setCategoriesList] = useState<Array<ReactSelectOption>>([])\r\n    const [foodClassesList, setFoodClassesList] = useState<Array<ReactSelectFoodClassOption>>([])\r\n    const [foodItemsList, setFoodItemsList] = useState<Array<ReactSelectFoodItemOption>>([])\r\n    const [portionsList, setPortionsList] = useState<Array<ReactSelectPortionOption>>([])\r\n    const [sourcesList, setSourcesList] = useState<Array<ReactSelectOption>>([])\r\n\r\n    const windowSize = useWindowDimension()\r\n\r\n    useEffect(() => {\r\n            if (applicationContext) {\r\n                const currentSelectorSetting = applicationContext.applicationData.foodSelector\r\n                if (selectedCategory !== currentSelectorSetting.selectedCategory || supplementData !== currentSelectorSetting.sourceSupplement\r\n                    || combineData !== currentSelectorSetting.sourceCombine) {\r\n                    applicationContext.setFoodSelectorConfig(selectedCategory, supplementData, combineData)\r\n                }\r\n            }\r\n\r\n            const initialFoodClass = props.initialFoodClassToSet ? props.initialFoodClassToSet : 0\r\n\r\n            if (applicationContext && applicationContext.foodDataCorpus && categoriesList.length === 0) {\r\n                const foodDataCorpus = applicationContext.foodDataCorpus\r\n\r\n                if (foodDataCorpus.categories) {\r\n                    const categoryItems = getCategorySelectList(foodDataCorpus.categories, language)\r\n                    setCategoriesList(categoryItems)\r\n                }\r\n\r\n                if (foodDataCorpus.foodClasses) {\r\n                    const category = selectedCategory ? selectedCategory.value : 0\r\n                    const foodClasses = getFoodClassSelectList(foodDataCorpus.foodClasses, category, applicationContext.foodDataCorpus.foodNames, language)\r\n                    setFoodClassesList(foodClasses)\r\n                    const foodClass = foodClasses[initialFoodClass]\r\n                    setSelectedFoodClass(foodClass)\r\n\r\n                    if (foodDataCorpus.foodItems && foodClasses) {\r\n                        const foodItemsOfFoodClass = getFoodItemsSelectList(foodDataCorpus.foodItems, foodClasses[initialFoodClass].value.id, foodDataCorpus.foodNames,\r\n                            foodDataCorpus.conditions, language)\r\n\r\n                        setFoodItemsList(foodItemsOfFoodClass)\r\n                        setSelectedFoodItem(foodItemsOfFoodClass[0])\r\n                        const foodItem = foodItemsOfFoodClass[0].value\r\n\r\n                        if (foodItem && foodItem.portionData) {\r\n                            const portionDataList = getPortionReactSelectList(foodItem.portionData, foodDataCorpus.portionTypes, language)\r\n                            setPortionsList(portionDataList)\r\n\r\n                            updateSourcesList(foodItem)\r\n\r\n                            const defaultPortion = getDefaultPortionData(foodItem, portionDataList)\r\n                            setSelectedPortion(defaultPortion)\r\n                            setPortionAmount(defaultPortion.value.amount)\r\n\r\n                            if (!props.selectedFoodItem) {\r\n                                makeSelectedFoodItemObject(foodItem, foodClass.value, defaultPortion.value)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                // Update data for outer component whenever render is triggered\r\n                if(selectedFoodItem && selectdFoodClass && selectedPortion) {\r\n                    const newFoodItem = makeSelectedFoodItemObject(selectedFoodItem.value, selectdFoodClass.value, selectedPortion.value)\r\n                    if(newFoodItem) {\r\n                        props.updateSelectedFoodItem(newFoodItem)\r\n                    }\r\n                } else if(props.selectedFoodItem) {\r\n                    const {foodItem, foodClass, portion} = props.selectedFoodItem\r\n                    makeSelectedFoodItemObject(foodItem, foodClass, portion)\r\n                }\r\n            }\r\n\r\n        }, [selectedFoodItem,\r\n            selectedPortion,\r\n            selectdFoodClass,\r\n            selectedCategory,\r\n            selectedSource,\r\n            portionAmount,\r\n            supplementData,\r\n            combineData\r\n        ]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleCategoryChange = (category: ReactSelectOption) => {\r\n        setSelectedCategory(category)\r\n        updateFoodClasses(category)\r\n    }\r\n\r\n    const handleFoodClassChange = (foodClass: ReactSelectFoodClassOption) => {\r\n        setSelectedFoodClass(foodClass)\r\n        updateFoodItem(foodClass)\r\n    }\r\n\r\n    const handleFoodItemChange = (foodItem: ReactSelectFoodItemOption) => {\r\n        setSelectedFoodItem(foodItem)\r\n        updatePortionsList(foodItem.value)\r\n        updateSourcesList(foodItem.value)\r\n    }\r\n\r\n    const handlePortionChange = (portion: ReactSelectPortionOption) => {\r\n        setSelectedPortion(portion)\r\n        setPortionAmount(portion.value.amount)\r\n    }\r\n\r\n    const handleSourceChange = (source: ReactSelectOption) => {\r\n        setSelectedSource(source)\r\n    }\r\n\r\n    const handlePortionAmountChange = (e) => {\r\n        if (!e.target.value) {\r\n            setPortionAmount(0)\r\n            return\r\n        }\r\n\r\n        const amount = parseInt(e.target.value)\r\n\r\n        if (!isNaN(amount)) {\r\n            setPortionAmount(amount)\r\n        }\r\n    }\r\n\r\n    const updateFoodClasses = (category: ReactSelectOption) => {\r\n        const foodClasses = applicationContext.foodDataCorpus.foodClasses\r\n\r\n        if (foodClasses) {\r\n            const foodClassItems = getFoodClassSelectList(foodClasses, category.value, applicationContext.foodDataCorpus.foodNames, language)\r\n            setFoodClassesList(foodClassItems)\r\n            setSelectedFoodClass(foodClassItems[0])\r\n            updateFoodItem(foodClassItems[0])\r\n        }\r\n    }\r\n\r\n    const updateFoodItem = (foodClass: ReactSelectFoodClassOption) => {\r\n        const {foodItems, foodNames, conditions} = applicationContext.foodDataCorpus\r\n\r\n        if (foodItems) {\r\n            const foodClassItems = getFoodItemsSelectList(foodItems, foodClass.value.id, foodNames, conditions, language)\r\n            setFoodItemsList(foodClassItems)\r\n            setSelectedFoodItem(foodClassItems[0])\r\n\r\n            const foodItem = foodClassItems[0].value\r\n            if (foodItem) {\r\n                updatePortionsList(foodItem)\r\n                updateSourcesList(foodItem)\r\n            }\r\n        }\r\n    }\r\n\r\n    const updatePortionsList = (foodItem: FoodItem) => {\r\n        const portionDataList = getPortionReactSelectList(foodItem.portionData!!, applicationContext.foodDataCorpus.portionTypes, language)\r\n        setPortionsList(portionDataList)\r\n        const defaultPortion = getDefaultPortionData(foodItem, portionDataList)\r\n        setSelectedPortion(defaultPortion)\r\n        setPortionAmount(defaultPortion.value.amount)\r\n    }\r\n\r\n\r\n    const updateSourcesList = (foodItem: FoodItem) => {\r\n        const sourceNames = getSourceNames(foodItem)\r\n        setSourcesList(sourceNames)\r\n\r\n        if (sourceNames.length === 1) {\r\n            setSelectedSource(sourceNames[0])\r\n        } else {\r\n            const preferredSource = applicationContext.applicationData.preferredSource\r\n            const matchingSource = sourceNames.find(sourceObject => {\r\n                if (sourceObject.value === 0 && preferredSource === SOURCE_SRLEGACY) {\r\n                    return sourceObject\r\n                } else if (sourceObject.value === 1 && preferredSource === SOURCE_FNDDS) {\r\n                    return sourceObject\r\n                }\r\n            })\r\n            if (matchingSource) {\r\n                setSelectedSource(matchingSource)\r\n            } else {\r\n                setSelectedSource(sourceNames[0])\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const getSourceNames = (foodItem: FoodItem) => {\r\n        return foodItem.nutrientDataList.map(nutrientDataObject => {\r\n            const SourceName = getSourceName(nutrientDataObject.source.id)\r\n            return {label: SourceName, value: nutrientDataObject.source.id}\r\n        })\r\n    }\r\n\r\n\r\n    const makeSelectedFoodItemObject = (foodItem: FoodItem | undefined, foodClass: FoodClass | undefined, portion: PortionData | undefined): SelectedFoodItem | null => {\r\n        if (!foodItem || !foodClass || !portion) {\r\n            return null\r\n        }\r\n\r\n        if (portion.portionType === 0) {\r\n            portion.amount = portionAmount\r\n        }\r\n\r\n        const newFoodItem: SelectedFoodItem = {\r\n            foodItem: foodItem,\r\n            foodClass: foodClass,\r\n            portion: portion,\r\n            selectedSource: selectedSource ? selectedSource.value : foodItem.nutrientDataList[0].source.id,\r\n            supplementData: supplementData,\r\n            combineData: combineData\r\n        }\r\n\r\n        return newFoodItem\r\n    }\r\n\r\n    const setInitialFoodElement = () => {\r\n        if (!foodClassesList || foodClassesList.length === 0) {\r\n            return\r\n        }\r\n\r\n        if (!props.selectedFoodItem || !props.selectedFoodItem.foodClass) {\r\n            return\r\n        }\r\n\r\n        const predefinedFoodObject = props.selectedFoodItem\r\n\r\n        // @ts-ignore\r\n        const foodClassOption = foodClassesList.find(foodClass => foodClass.value.id === predefinedFoodObject.foodClass.id)\r\n        const {foodItems, foodNames, conditions, portionTypes} = applicationContext.foodDataCorpus\r\n\r\n        if (foodClassOption) {\r\n            setSelectedFoodClass(foodClassOption)\r\n            const foodClassItems = getFoodItemsSelectList(foodItems, foodClassOption.value.id, foodNames, conditions, language)\r\n\r\n            if (foodClassItems) {\r\n                setFoodItemsList(foodClassItems)\r\n                const foodItem = foodClassItems.find(foodItem => foodItem.value.id === predefinedFoodObject.foodItem.id)\r\n\r\n                if (foodItem && foodItem.value && foodItem.value.portionData) {\r\n                    setSelectedFoodItem(foodItem)\r\n\r\n                    const sourceNames = getSourceNames(foodItem.value)\r\n                    setSourcesList(sourceNames)\r\n                    const selected = sourceNames.find(sourceElement => sourceElement.value === props.selectedFoodItem?.selectedSource)\r\n                    if (selected) {\r\n                        setSelectedSource(selected)\r\n                    }\r\n\r\n                    const portionDataList = getPortionReactSelectList(foodItem.value.portionData, portionTypes, language)\r\n                    setPortionsList(portionDataList)\r\n\r\n                    const portionType = predefinedFoodObject.portion.portionType\r\n                    const portionObject = portionDataList.find(portion => portion.value.portionType === portionType)\r\n                    if (portionObject) {\r\n                        setSelectedPortion(portionObject)\r\n\r\n                        //@ts-ignore\r\n                        const amount = predefinedFoodObject.portion.amount\r\n                        setPortionAmount(amount)\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        setInitialized(true)\r\n    }\r\n\r\n    const onCheckSupplementCheckbox = () => {\r\n        setSupplementData(!supplementData)\r\n    }\r\n\r\n    const onCheckCombineCheckbox = () => {\r\n        setCombineData(!combineData)\r\n    }\r\n\r\n    if (props.selectedFoodItem && !initialized) {\r\n        setInitialFoodElement()\r\n    }\r\n\r\n    const renderSourceLine = () => {\r\n        const sourceSelectBox = (\r\n            <Select className={selectClass}\r\n                    options={sourcesList}\r\n                    isDisabled={sourcesList.length <= 1 || combineData === true}\r\n                    value={selectedSource ? selectedSource : sourcesList[0]}\r\n                    onChange={handleSourceChange}\r\n            />\r\n        )\r\n\r\n        const checkboxes = (\r\n            <div>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_source_supplement_tooltip[language]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_source_supplement[language]}\r\n                                checked={supplementData === true}\r\n                                disabled={sourcesList.length <= 1}\r\n                                onClick={onCheckSupplementCheckbox}>\r\n                    </Form.Check>\r\n                </label>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_source_combine_tooltip[language]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_source_combine[language]}\r\n                                checked={combineData === true}\r\n                                disabled={sourcesList.length <= 1}\r\n                                onClick={onCheckCombineCheckbox}>\r\n                    </Form.Check>\r\n                </label>\r\n            </div>\r\n        )\r\n\r\n        return <div>\r\n            <span className={'form-label'}>{applicationStrings.label_source[language]}:</span>\r\n            {props.smallVariant !== true ?\r\n                <div className={\"row\"}>\r\n                    <div className=\"col-4 column select-menu form-section\">\r\n                        {sourceSelectBox}\r\n                    </div>\r\n                    <div className={\"col-8\"}>\r\n                        {checkboxes}\r\n                    </div>\r\n                </div>\r\n                :\r\n                <div>\r\n                    <div>\r\n                        {sourceSelectBox}\r\n                    </div>\r\n                    <div style={{paddingLeft: \"24px\", paddingTop: \"8px\"}}>\r\n                        {checkboxes}\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    }\r\n\r\n\r\n    const amount_label = props.smallVariant\r\n        ? `${applicationStrings.label_amount_short[language]}:`\r\n        : `${applicationStrings.label_amount[language]}:`\r\n    const initialFoodClass = props.initialFoodClassToSet ? props.initialFoodClassToSet : 0\r\n\r\n    const selectClass = isSmallScreen(windowSize) ? \"form-control-sm\" : \"\"\r\n    const inputClass = isSmallScreen(windowSize) ? \"form-control form-control-sm input-sm\" : \"form-control input\"\r\n\r\n    return <div>\r\n        <div className=\"container\">\r\n            {props.noCategorySelect !== true &&\r\n            <div className=\"column select-menu form-section\">\r\n                <span className={'form-label'}>{applicationStrings.label_category[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={categoriesList}\r\n                        value={selectedCategory ? selectedCategory : categoriesList[0]}\r\n                        onChange={(value) => handleCategoryChange(value)}\r\n                />\r\n            </div>\r\n            }\r\n            <div className=\"column select-menu form-section\">\r\n                <span className={'form-label'}>{applicationStrings.label_foodclass[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={foodClassesList}\r\n                        value={selectdFoodClass ? selectdFoodClass : foodClassesList[initialFoodClass]}\r\n                        onChange={(value) => handleFoodClassChange(value)}\r\n                />\r\n            </div>\r\n            <div className=\"column select-menu form-section\">\r\n                <span className={'form-label'}>{applicationStrings.label_fooditem[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={foodItemsList}\r\n                        value={selectedFoodItem ? selectedFoodItem : foodItemsList[0]}\r\n                        onChange={handleFoodItemChange}\r\n                />\r\n            </div>\r\n            <div className=\"column select-menu form-section\">\r\n                <div className={\"row\"}>\r\n                    <div className={\"col-lg-8 col-xl-9\"}>\r\n                        <span\r\n                            className={'form-label'}>{applicationStrings.label_portion[language]}:</span>\r\n                        <Select className={selectClass}\r\n                                options={portionsList}\r\n                                value={selectedPortion ? selectedPortion : portionsList[0]}\r\n                                onChange={(value) => handlePortionChange(value)}/>\r\n                    </div>\r\n                    <div className={\"col-lg-4 col-xl-3\"}>\r\n                        <span\r\n                            className={'form-label'}>{amount_label}</span>\r\n                        <input className={inputClass}\r\n                               disabled={selectedPortion?.value.portionType !== 0}\r\n                               value={portionAmount}\r\n                               onChange={handlePortionAmountChange}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {renderSourceLine()}\r\n        </div>\r\n    </div>\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {FaTrash} from \"react-icons/all\";\r\n\r\nexport interface CompositeFoodListProps {\r\n    selectedFoodItems: Array<SelectedFoodItem>\r\n    deleteItem: (index: number) => void\r\n}\r\n\r\nexport function CompositeFoodList(props: CompositeFoodListProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const onDeleteItem = (index: number) => {\r\n        props.deleteItem(index)\r\n    }\r\n\r\n    const renderLine = (selectedFoodItem: SelectedFoodItem, index: number) => {\r\n        if(applicationContext) {\r\n            const name = getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, selectedFoodItem.foodItem.nameId!!, languageContext.language)\r\n\r\n            return <div className={\"row\"}\r\n                        key={`composite food list ${index}`}\r\n                        style={{borderBottom: \"1px solid #dddddd\", paddingTop: \"6px\"}}>\r\n                <div className={\"col-1\"}>\r\n                    <b>{index+1}.</b>\r\n                </div>\r\n                <div className={\"col-8\"}>\r\n                    {name}\r\n                    <br/>\r\n                    {selectedFoodItem.portion.amount} g\r\n                </div>\r\n                <div className={\"col-3\"}>\r\n                    <Button onClick={() => onDeleteItem(index)}>\r\n                        <FaTrash/>\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        return <div></div>\r\n    }\r\n\r\n    return <div className={\"container\"} style={{maxHeight: \"300px\", overflowY: \"auto\"}}>\r\n        {props.selectedFoodItems.map((selectedFoodItem, index) => renderLine(selectedFoodItem, index))}\r\n    </div>\r\n\r\n}","import SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodItem, {\r\n    BaseData,\r\n    CarbohydrateData,\r\n    LipidData,\r\n    MineralData,\r\n    NutrientData,\r\n    ProteinData,\r\n    VitaminData\r\n} from \"../../types/nutrientdata/FoodItem\";\r\nimport {getNutrientData} from \"../nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function combineFoodItems(compositeList: Array<SelectedFoodItem>, preferredSource): SelectedFoodItem {\r\n    let portionSize = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        portionSize += selectedFoodItem.portion.amount\r\n    })\r\n\r\n    const nutrientDataList = buildAggregatedNutrientDataList(compositeList, portionSize, preferredSource);\r\n    const id = new Date().getTime();\r\n\r\n    const aggreatedFoodItem: FoodItem = {\r\n        id: id,\r\n        nutrientDataList: nutrientDataList,\r\n        aggregated: true\r\n    }\r\n\r\n    let combinedFoodItem: SelectedFoodItem = {\r\n        id: id,\r\n        foodItem: aggreatedFoodItem,\r\n        portion: {\r\n            portionType: 999,\r\n            amount: portionSize\r\n        },\r\n        compositeSubElements: compositeList,\r\n        selectedSource: -1,\r\n        supplementData: true,\r\n        combineData: false\r\n    };\r\n\r\n    return combinedFoodItem;\r\n}\r\n\r\n\r\nfunction buildAggregatedNutrientDataList(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): Array<NutrientData> {\r\n    const baseData = buildBaseDataObject(compositeList, portionSize, preferredSource);\r\n    const vitaminData = buildVitaminDataObject(compositeList, portionSize, preferredSource);\r\n    const mineralData = buildMineralDataObject(compositeList, portionSize, preferredSource);\r\n    const carbohydrateData = buildCarbohydrateData(compositeList, portionSize, preferredSource);\r\n    const lipidData = buildLipidData(compositeList, portionSize, preferredSource);\r\n    const proteinData = buildProteinData(compositeList, portionSize, preferredSource);\r\n\r\n    let nutrientObject: NutrientData = {\r\n        sourceItemId: \"0\",\r\n        source: {id: 0, url: \"\", name: \"\"},\r\n        baseData: baseData,\r\n        vitaminData: vitaminData,\r\n        mineralData: mineralData,\r\n        carbohydrateData: carbohydrateData,\r\n        lipidData: lipidData,\r\n        proteinData: proteinData\r\n    }\r\n\r\n    nutrientObject = removeNutrientObjectsWithNullValues(nutrientObject, compositeList, preferredSource);\r\n\r\n    const nutrientDataList: Array<NutrientData> = [];\r\n    nutrientDataList.push(nutrientObject);\r\n\r\n    return nutrientDataList;\r\n}\r\n\r\n\r\n/**\r\n * Removes all nutrient data elements that do not exist in ALL of the food elements within the list.\r\n * @param nutrientObject\r\n * @param compositeList\r\n */\r\nfunction removeNutrientObjectsWithNullValues(nutrientObject: NutrientData, compositeList: Array<SelectedFoodItem>, preferredSource: string) {\r\n    if (!compositeList) {\r\n        return nutrientObject;\r\n    }\r\n\r\n    for (let i = 0; i < compositeList.length; i++) {\r\n        let selectedFoodItem = compositeList[i]\r\n        const nutrientData = getNutrientData(selectedFoodItem)\r\n        const threshold = 0.1;   // Defines the amount of base data which must exist to set a sub-value to null.\r\n\r\n        // Remove base data\r\n        if (nutrientData.baseData.carbohydrates >= threshold) {\r\n            if (nutrientData.baseData.dietaryFibers == null) {\r\n                nutrientObject.baseData.dietaryFibers = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Lipid data\r\n        if (nutrientData.baseData.lipids >= threshold) {\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.saturated == null) {\r\n                nutrientObject.lipidData.saturated = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.unsaturatedMono == null) {\r\n                nutrientObject.lipidData.unsaturatedMono = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.unsaturatedPoly == null) {\r\n                nutrientObject.lipidData.unsaturatedPoly = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.transFattyAcids == null) {\r\n                nutrientObject.lipidData.transFattyAcids = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.cholesterol == null) {\r\n                nutrientObject.lipidData.cholesterol = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData.omegaData &&\r\n                (nutrientData.lipidData && nutrientData.lipidData.unsaturatedPoly && nutrientData.lipidData.unsaturatedPoly > threshold)) {\r\n                nutrientObject.lipidData.omegaData = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Carbohydrate data\r\n        if (nutrientData.baseData.carbohydrates >= threshold) {\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.sugar == null) {\r\n                nutrientObject.carbohydrateData.sugar = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.glucose == null) {\r\n                nutrientObject.carbohydrateData.glucose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.fructose == null) {\r\n                nutrientObject.carbohydrateData.fructose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.galactose == null) {\r\n                nutrientObject.carbohydrateData.galactose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.sucrose == null) {\r\n                nutrientObject.carbohydrateData.sucrose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.lactose == null) {\r\n                nutrientObject.carbohydrateData.lactose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.maltose == null) {\r\n                nutrientObject.carbohydrateData.maltose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.starch == null) {\r\n                nutrientObject.carbohydrateData.starch = null;\r\n            }\r\n        }\r\n\r\n\r\n\t\t// Vitamins:\r\n\t\tif(nutrientData.vitaminData.a === null) {\r\n\t\t\tnutrientObject.vitaminData.a = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b1 === null) {\r\n\t\t\tnutrientObject.vitaminData.b1 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b2 === null) {\r\n\t\t\tnutrientObject.vitaminData.b2 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b3 === null) {\r\n\t\t\tnutrientObject.vitaminData.b3 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b5 === null) {\r\n\t\t\tnutrientObject.vitaminData.b5 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b6 === null) {\r\n\t\t\tnutrientObject.vitaminData.b6 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b7 === null) {\r\n\t\t\tnutrientObject.vitaminData.b7 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b9 === null) {\r\n\t\t\tnutrientObject.vitaminData.b9 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b12 === null) {\r\n\t\t\tnutrientObject.vitaminData.b12 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.c === null) {\r\n\t\t\tnutrientObject.vitaminData.c = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.d === null) {\r\n\t\t\tnutrientObject.vitaminData.d = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.e === null) {\r\n\t\t\tnutrientObject.vitaminData.e = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.k === null) {\r\n\t\t\tnutrientObject.vitaminData.k = null\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// Minerals:\r\n\t\tif(nutrientData.mineralData.calcium === null) {\r\n\t\t\tnutrientObject.mineralData.calcium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.copper === null) {\r\n\t\t\tnutrientObject.mineralData.copper = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.iron === null) {\r\n\t\t\tnutrientObject.mineralData.iron = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.magnesium === null) {\r\n\t\t\tnutrientObject.mineralData.magnesium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.manganese === null) {\r\n\t\t\tnutrientObject.mineralData.manganese = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.phosphorus === null) {\r\n\t\t\tnutrientObject.mineralData.phosphorus = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.potassium === null) {\r\n\t\t\tnutrientObject.mineralData.potassium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.selenium === null) {\r\n\t\t\tnutrientObject.mineralData.selenium = null\r\n\t\t}\r\n\r\n\t\tif(nutrientData.mineralData.sodium === null) {\r\n\t\t\tnutrientObject.mineralData.sodium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.zinc === null) {\r\n\t\t\tnutrientObject.mineralData.zinc = null\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// Proteins:\r\n\t\t\r\n\t\tif(nutrientData.proteinData.alanine === null) {\r\n\t\t\tnutrientObject.proteinData.alanine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.arginine === null) {\r\n\t\t\tnutrientObject.proteinData.arginine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.asparticAcid === null) {\r\n\t\t\tnutrientObject.proteinData.asparticAcid = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.cystine === null) {\r\n\t\t\tnutrientObject.proteinData.cystine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.glutamicAcid === null) {\r\n\t\t\tnutrientObject.proteinData.glutamicAcid = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.glycine === null) {\r\n\t\t\tnutrientObject.proteinData.glycine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.histidine === null) {\r\n\t\t\tnutrientObject.proteinData.histidine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.isoleucine === null) {\r\n\t\t\tnutrientObject.proteinData.isoleucine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.leucine === null) {\r\n\t\t\tnutrientObject.proteinData.leucine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.lysine === null) {\r\n\t\t\tnutrientObject.proteinData.lysine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.methionine === null) {\r\n\t\t\tnutrientObject.proteinData.methionine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.phenylalanine === null) {\r\n\t\t\tnutrientObject.proteinData.phenylalanine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.proline === null) {\r\n\t\t\tnutrientObject.proteinData.proline = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.serine === null) {\r\n\t\t\tnutrientObject.proteinData.serine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.threonine === null) {\r\n\t\t\tnutrientObject.proteinData.threonine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.tryptophan === null) {\r\n\t\t\tnutrientObject.proteinData.tryptophan = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.tyrosine === null) {\r\n\t\t\tnutrientObject.proteinData.tyrosine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.valine === null) {\r\n\t\t\tnutrientObject.proteinData.valine = null\r\n\t\t}\r\n\r\n    }\r\n\r\n    return nutrientObject;\r\n}\r\n\r\n\r\nfunction buildBaseDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): BaseData {\r\n    let energy = 0;\r\n    let carbohydrates = 0;\r\n    let lipids = 0;\r\n    let proteins = 0;\r\n    let water = 0;\r\n    let dietaryFibers = 0;\r\n    let alcohol = 0;\r\n    let ash = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const baseData = getNutrientData(selectedFoodItem).baseData;\r\n        const userSetPortion = selectedFoodItem.portion.amount;\r\n        const portionFactor = userSetPortion / 100;\r\n\r\n        energy += (baseData.energy ? baseData.energy : 0) * portionFactor;\r\n        carbohydrates += baseData.carbohydrates * portionFactor;\r\n        lipids += baseData.lipids * portionFactor;\r\n        proteins += baseData.proteins * portionFactor;\r\n        water += baseData.water * portionFactor;\r\n        dietaryFibers += (baseData.dietaryFibers ? baseData.dietaryFibers : 0) * portionFactor;\r\n        alcohol += (baseData.alcohol ? baseData.alcohol : 0) * portionFactor;\r\n        ash += (baseData.ash ? baseData.ash : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        energy: createFinalValue(energy, portionSize),\r\n        carbohydrates: createFinalValue(carbohydrates, portionSize),\r\n        lipids: createFinalValue(lipids, portionSize),\r\n        proteins: createFinalValue(proteins, portionSize),\r\n        water: createFinalValue(water, portionSize),\r\n        dietaryFibers: createFinalValue(dietaryFibers, portionSize),\r\n        alcohol: alcohol,\r\n        ash: ash\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction buildVitaminDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): VitaminData {\r\n    let a = 0\r\n    let b1 = 0\r\n    let b2 = 0\r\n    let b3 = 0\r\n    let b5 = 0\r\n    let b6 = 0\r\n    let b7 = 0\r\n    let b9 = 0\r\n    let b12 = 0\r\n    let c = 0\r\n    let d = 0\r\n    let e = 0\r\n    let k = 0\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const vitaminData = getNutrientData(selectedFoodItem).vitaminData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        a += (vitaminData.a ? vitaminData.a : 0) * portionFactor\r\n        b1 += (vitaminData.b1 ? vitaminData.b1 : 0) * portionFactor\r\n        b2 += (vitaminData.b2 ? vitaminData.b2 : 0) * portionFactor\r\n        b3 += (vitaminData.b3 ? vitaminData.b3 : 0) * portionFactor\r\n        b5 += (vitaminData.b5 ? vitaminData.b5 : 0) * portionFactor\r\n        b6 += (vitaminData.b6 ? vitaminData.b6 : 0) * portionFactor\r\n        b7 += (vitaminData.b7 ? vitaminData.b7 : 0) * portionFactor\r\n        b9 += (vitaminData.b9 ? vitaminData.b9 : 0) * portionFactor\r\n        b12 += (vitaminData.b12 ? vitaminData.b12 : 0) * portionFactor\r\n        c += (vitaminData.c ? vitaminData.c : 0) * portionFactor\r\n        d += (vitaminData.d ? vitaminData.d : 0) * portionFactor\r\n        e += (vitaminData.e ? vitaminData.e : 0) * portionFactor\r\n        k += (vitaminData.k ? vitaminData.k : 0) * portionFactor\r\n    })\r\n\r\n    return {\r\n        a: createFinalValue(a, portionSize),\r\n        b1: createFinalValue(b1, portionSize),\r\n        b2: createFinalValue(b2, portionSize),\r\n        b3: createFinalValue(b3, portionSize),\r\n        b5: createFinalValue(b5, portionSize),\r\n        b6: createFinalValue(b6, portionSize),\r\n        b7: createFinalValue(b7, portionSize),\r\n        b9: createFinalValue(b9, portionSize),\r\n        b12: createFinalValue(b12, portionSize),\r\n        c: createFinalValue(c, portionSize),\r\n        d: createFinalValue(d, portionSize),\r\n        e: createFinalValue(e, portionSize),\r\n        k: createFinalValue(k, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildMineralDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): MineralData {\r\n    let calcium = 0;\r\n    let iron = 0;\r\n    let magnesium = 0;\r\n    let phosphorus = 0;\r\n    let potassium = 0;\r\n    let sodium = 0;\r\n    let zinc = 0;\r\n    let copper = 0;\r\n    let manganese = 0;\r\n    let selenium = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const mineralData = getNutrientData(selectedFoodItem).mineralData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        calcium += (mineralData.calcium ? mineralData.calcium : 0) * portionFactor;\r\n        iron += (mineralData.iron ? mineralData.iron : 0) * portionFactor;\r\n        magnesium += (mineralData.magnesium ? mineralData.magnesium : 0)\r\n        phosphorus += (mineralData.phosphorus ? mineralData.phosphorus : 0)\r\n        potassium += (mineralData.potassium ? mineralData.potassium : 0)\r\n        sodium += (mineralData.sodium ? mineralData.sodium : 0)\r\n        zinc += (mineralData.zinc ? mineralData.zinc : 0)\r\n        copper += (mineralData.copper ? mineralData.copper : 0)\r\n        manganese += (mineralData.manganese ? mineralData.manganese : 0)\r\n        selenium += (mineralData.selenium ? mineralData.selenium : 0)\r\n    })\r\n\r\n    return {\r\n        calcium: createFinalValue(calcium, portionSize),\r\n        iron: createFinalValue(iron, portionSize),\r\n        magnesium: createFinalValue(magnesium, portionSize),\r\n        phosphorus: createFinalValue(phosphorus, portionSize),\r\n        potassium: createFinalValue(potassium, portionSize),\r\n        sodium: createFinalValue(sodium, portionSize),\r\n        zinc: createFinalValue(zinc, portionSize),\r\n        copper: createFinalValue(copper, portionSize),\r\n        manganese: createFinalValue(manganese, portionSize),\r\n        selenium: createFinalValue(selenium, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildCarbohydrateData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): CarbohydrateData {\r\n    let glucose = 0;\r\n    let fructose = 0;\r\n    let galactose = 0;\r\n    let sucrose = 0;\r\n    let maltose = 0;\r\n    let lactose = 0;\r\n    let starch = 0;\r\n    let sugar = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const carbohydrateData = getNutrientData(selectedFoodItem).carbohydrateData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        glucose += (carbohydrateData.glucose ? carbohydrateData.glucose : 0) * portionFactor;\r\n        fructose += (carbohydrateData.fructose ? carbohydrateData.fructose : 0) * portionFactor;\r\n        galactose += (carbohydrateData.galactose ? carbohydrateData.galactose : 0) * portionFactor;\r\n        sucrose += (carbohydrateData.sucrose ? carbohydrateData.sucrose : 0) * portionFactor;\r\n        maltose += (carbohydrateData.maltose ? carbohydrateData.maltose : 0) * portionFactor;\r\n        lactose += (carbohydrateData.lactose ? carbohydrateData.lactose : 0) * portionFactor;\r\n        starch += (carbohydrateData.starch ? carbohydrateData.starch : 0) * portionFactor;\r\n        sugar += (carbohydrateData.sugar ? carbohydrateData.sugar : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        glucose: createFinalValue(glucose, portionSize),\r\n        fructose: createFinalValue(fructose, portionSize),\r\n        galactose: createFinalValue(galactose, portionSize),\r\n        sucrose: createFinalValue(sucrose, portionSize),\r\n        maltose: createFinalValue(maltose, portionSize),\r\n        lactose: createFinalValue(lactose, portionSize),\r\n        starch: createFinalValue(starch, portionSize),\r\n        sugar: createFinalValue(sugar, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildProteinData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): ProteinData {\r\n    let tryptophan = 0;\r\n    let threonine = 0;\r\n    let isoleucine = 0;\r\n    let leucine = 0;\r\n    let lysine = 0;\r\n    let methionine = 0;\r\n    let cystine = 0;\r\n    let phenylalanine = 0;\r\n    let tyrosine = 0;\r\n    let valine = 0;\r\n    let arginine = 0;\r\n    let histidine = 0;\r\n    let alanine = 0;\r\n    let asparticAcid = 0;\r\n    let glutamicAcid = 0;\r\n    let glycine = 0;\r\n    let proline = 0;\r\n    let serine = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const proteinData = getNutrientData(selectedFoodItem).proteinData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        tryptophan += (proteinData.tryptophan ? proteinData.tryptophan : 0) * portionFactor;\r\n        threonine += (proteinData.threonine ? proteinData.threonine : 0) * portionFactor;\r\n        isoleucine += (proteinData.isoleucine ? proteinData.isoleucine : 0) * portionFactor;\r\n        leucine += (proteinData.leucine ? proteinData.leucine : 0) * portionFactor;\r\n        lysine += (proteinData.lysine ? proteinData.lysine : 0) * portionFactor;\r\n        methionine += (proteinData.methionine ? proteinData.methionine : 0) * portionFactor;\r\n        cystine += (proteinData.cystine ? proteinData.cystine : 0) * portionFactor;\r\n        phenylalanine += (proteinData.phenylalanine ? proteinData.phenylalanine : 0) * portionFactor;\r\n        tyrosine += (proteinData.tyrosine ? proteinData.tyrosine : 0) * portionFactor;\r\n        valine += (proteinData.valine ? proteinData.valine : 0) * portionFactor;\r\n        arginine += (proteinData.arginine ? proteinData.arginine : 0) * portionFactor;\r\n        histidine += (proteinData.histidine ? proteinData.histidine : 0) * portionFactor;\r\n        alanine += (proteinData.alanine ? proteinData.alanine : 0) * portionFactor;\r\n        asparticAcid += (proteinData.asparticAcid ? proteinData.asparticAcid : 0) * portionFactor;\r\n        glutamicAcid += (proteinData.glutamicAcid ? proteinData.glutamicAcid : 0) * portionFactor;\r\n        glycine += (proteinData.glycine ? proteinData.glycine : 0) * portionFactor;\r\n        proline += (proteinData.proline ? proteinData.proline : 0) * portionFactor;\r\n        serine += (proteinData.serine ? proteinData.serine : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        tryptophan: createFinalValue(tryptophan, portionSize),\r\n        threonine: createFinalValue(threonine, portionSize),\r\n        isoleucine: createFinalValue(isoleucine, portionSize),\r\n        leucine: createFinalValue(leucine, portionSize),\r\n        lysine: createFinalValue(lysine, portionSize),\r\n        methionine: createFinalValue(methionine, portionSize),\r\n        cystine: createFinalValue(cystine, portionSize),\r\n        phenylalanine: createFinalValue(phenylalanine, portionSize),\r\n        tyrosine: createFinalValue(tyrosine, portionSize),\r\n        valine: createFinalValue(valine, portionSize),\r\n        arginine: createFinalValue(arginine, portionSize),\r\n        histidine: createFinalValue(histidine, portionSize),\r\n        alanine: createFinalValue(alanine, portionSize),\r\n        asparticAcid: createFinalValue(asparticAcid, portionSize),\r\n        glutamicAcid: createFinalValue(glutamicAcid, portionSize),\r\n        glycine: createFinalValue(glycine, portionSize),\r\n        proline: createFinalValue(proline, portionSize),\r\n        serine: createFinalValue(serine, portionSize),\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction buildLipidData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): LipidData {\r\n    let unsaturatedMono = 0;\r\n    let unsaturatedPoly = 0;\r\n    let saturated = 0;\r\n    let omega3 = 0;\r\n    let omega6 = 0;\r\n    let omegaUncertain = 0;\r\n    let cholesterol = 0;\r\n    let transFattyAcids = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const lipidData = getNutrientData(selectedFoodItem).lipidData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        unsaturatedMono += (lipidData.unsaturatedMono ? lipidData.unsaturatedMono : 0) * portionFactor;\r\n        unsaturatedPoly += (lipidData.unsaturatedPoly ? lipidData.unsaturatedPoly : 0) * portionFactor;\r\n        saturated += (lipidData.saturated ? lipidData.saturated : 0) * portionFactor;\r\n        omega3 += (lipidData.omegaData?.omega3 ? lipidData.omegaData.omega3 : 0) * portionFactor;\r\n        omega6 += (lipidData.omegaData?.omega6 ? lipidData.omegaData.omega6 : 0) * portionFactor;\r\n        omegaUncertain += (lipidData.omegaData?.uncertain ? lipidData.omegaData.uncertain : 0) * portionFactor;\r\n        cholesterol += (lipidData.cholesterol ? lipidData.cholesterol : 0) * portionFactor;\r\n        transFattyAcids += (lipidData.transFattyAcids ? lipidData.transFattyAcids : 0) * portionFactor;\r\n    })\r\n\r\n    const omegaRatio = (omega3 + omega6) / (omega3 + omega6 + omegaUncertain)\r\n\r\n    return {\r\n        unsaturatedMono: createFinalValue(unsaturatedMono, portionSize),\r\n        unsaturatedPoly: createFinalValue(unsaturatedPoly, portionSize),\r\n        saturated: createFinalValue(saturated, portionSize),\r\n        omegaData: {\r\n            omega3: createFinalValue(omega3, portionSize),\r\n            omega6: createFinalValue(omega6, portionSize),\r\n            uncertain: createFinalValue(omegaUncertain, portionSize),\r\n            uncertainRatio: omegaRatio\r\n        },\r\n        cholesterol: createFinalValue(cholesterol, portionSize),\r\n        transFattyAcids: createFinalValue(transFattyAcids, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction createFinalValue(value, totalPortionAmount) {\r\n    return (value / totalPortionAmount) * 100;\r\n}","import React, {useContext, useState} from 'react'\r\n\r\nimport {Button, Modal} from 'react-bootstrap'\r\n\r\nimport {NotificationManager} from 'react-notifications'\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\nimport FoodSelector from \"./FoodSelector\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {CompositeFoodList} from \"./CompositeFoodList\";\r\nimport {maximalPortionSize} from \"../../config/ApplicationSetting\";\r\nimport combineFoodItems from \"../../service/calculation/FoodDataAggregationService\";\r\n\r\nexport interface FoodSelectorModalProps {\r\n    onHide: () => void,\r\n    selectedFoodItemCallback: (selectedFoodItem: SelectedFoodItem) => void\r\n    compositeSelector: boolean\r\n}\r\n\r\n\r\nconst FoodSelectorModal: React.FC<FoodSelectorModalProps> = (props: FoodSelectorModalProps) => {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const [selectedFoodItem, setSelectedFoodItem] = useState<SelectedFoodItem | null>(null)\r\n    const [compositeList, setCompositeList] = useState<Array<SelectedFoodItem>>([])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateSelectedFoodItem = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem(selectedFoodItem)\r\n    }\r\n\r\n    const addCompositeElement = () => {\r\n        if (selectedFoodItem !== null) {\r\n            if(selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n                NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n                return;\r\n            }\r\n\r\n            const newList: Array<SelectedFoodItem> = [...compositeList]\r\n            newList.push(selectedFoodItem)\r\n            setCompositeList(newList)\r\n        }\r\n    }\r\n\r\n    const deleteCompositeElement = (index: number) => {\r\n        const newList: Array<SelectedFoodItem> = [...compositeList]\r\n        newList.splice(index, 1)\r\n        setCompositeList(newList)\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (props.compositeSelector) {\r\n            onSubmitComposite()\r\n        } else {\r\n            onSubmitSingleItem()\r\n        }\r\n    }\r\n\r\n    const onSubmitSingleItem = () => {\r\n        const foodItemId = selectedFoodItem ? selectedFoodItem.foodItem.id : null\r\n        if (foodItemId) {\r\n            const existingItemInList = applicationContext?.applicationData.foodDataPanel.selectedFoodItems.find(foodItem => foodItem.id === foodItemId)\r\n\r\n            if (existingItemInList) {\r\n                NotificationManager.error(applicationStrings.message_error_existing_element[language])\r\n                return\r\n            }\r\n        }\r\n\r\n        if (!selectedFoodItem || !selectedFoodItem.foodItem || !selectedFoodItem.foodClass || !selectedFoodItem.portion) {\r\n            NotificationManager.error(applicationStrings.message_error_incomplete_form[language])\r\n        } else if (selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n            NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n        } else {\r\n            props.selectedFoodItemCallback(selectedFoodItem)\r\n            props.onHide()\r\n        }\r\n    }\r\n\r\n    const onSubmitComposite = () => {\r\n        const preferredSource = applicationContext.applicationData.preferredSource\r\n        let aggregatedSelectedFoodItem = combineFoodItems(compositeList, preferredSource)\r\n\r\n        if(!aggregatedSelectedFoodItem) {\r\n            console.error('Error while creating aggregated food item.')\r\n            return\r\n        }\r\n\r\n\t\taggregatedSelectedFoodItem = {...aggregatedSelectedFoodItem, aggregated: true}\r\n        props.selectedFoodItemCallback(aggregatedSelectedFoodItem)\r\n        props.onHide()\r\n    }\r\n\r\n    const onCancel = () => {\r\n        props.onHide()\r\n    }\r\n\r\n    const title = props.compositeSelector ? applicationStrings.label_foodselector_composite[language] : applicationStrings.label_foodselector[language]\r\n\r\n    return (\r\n        <Modal size={'lg'} show={true} onHide={props.onHide}>\r\n            <Modal.Header>\r\n                <b>{title}</b>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div>\r\n                    {!props.compositeSelector ?\r\n                        <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem} smallVariant={false}/>\r\n                        :\r\n                        <div className={\"container\"}>\r\n                            <div className={\"row\"}>\r\n                                <div className={\"col-6\"}>\r\n                                    <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                                  smallVariant={true}/>\r\n                                </div>\r\n                                <div className={\"col-6\"}>\r\n                                    <CompositeFoodList selectedFoodItems={compositeList}\r\n                                                       deleteItem={deleteCompositeElement}/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <div className={\"container-fluid\"}>\r\n                    {props.compositeSelector ?\r\n                        <Button className={\"form-button float-end\"}\r\n                                onClick={onSubmit}\r\n                                disabled={!compositeList || compositeList.length < 1}>\r\n                            {applicationStrings.button_show[language]}\r\n                        </Button>\r\n                        :\r\n                        <Button className={\"form-button float-end\"} onClick={onSubmit}>\r\n                            {applicationStrings.button_select[language]}\r\n                        </Button>\r\n                    }\r\n\r\n                    {props.compositeSelector &&\r\n                    <Button className={\"form-button float-end\"} onClick={addCompositeElement}>\r\n                        {applicationStrings.button_add[language]}\r\n                    </Button>\r\n                    }\r\n\r\n                    <Button className={\"btn-secondary form-button float-end\"} onClick={onCancel}>\r\n                        {applicationStrings.button_cancel[language]}\r\n                    </Button>\r\n                </div>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n\r\n}\r\n\r\nexport default FoodSelectorModal","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport {confirmable, createConfirmation} from \"react-confirm\";\r\nimport {Button, Modal} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../static/labels\";\r\n\r\ninterface ConfirmationDialogProps {\r\n    okLabel: string,\r\n    cancelLabel: string,\r\n    title: string,\r\n    confirmation: string,\r\n    show: boolean,\r\n    proceed: (procedd: boolean) => void, // called when ok button is clicked.\r\n    enableEscape: boolean\r\n};\r\n\r\nclass ConfirmationDialog extends React.Component<ConfirmationDialogProps> {\r\n\r\n    render() {\r\n        const {\r\n            okLabel,\r\n            cancelLabel,\r\n            title,\r\n            confirmation,\r\n            show,\r\n            proceed,\r\n            enableEscape = true\r\n        } = this.props;\r\n\r\n        return (\r\n            <div className=\"static-modal\">\r\n                <Modal\r\n                    show={show}\r\n                    onHide={() => proceed(false)}\r\n                    backdrop={enableEscape ? true : \"static\"}\r\n                    keyboard={enableEscape}\r\n                >\r\n                    <Modal.Header>\r\n                        <Modal.Title>{title}</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>{confirmation}</Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button onClick={() => proceed(false)}>{cancelLabel}</Button>\r\n                        <Button\r\n                            className=\"primary button-l\"\r\n                            onClick={() => proceed(true)}>\r\n                            {okLabel}\r\n                        </Button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function confirmAction(\r\n    confirmation,\r\n    okLabel,\r\n    cancelLabel,\r\n    options = {}\r\n) {\r\n    return createConfirmation(confirmable(ConfirmationDialog))({\r\n        confirmation,\r\n        okLabel,\r\n        cancelLabel,\r\n        ...options\r\n    });\r\n}\r\n","/**\r\n * Checks whether a value is a positive integer value.\r\n */\r\nexport function isPositiveIntegerValue(value) {\r\n    const number = Number(value);\r\n    return Number.isInteger(number) && number > 0;\r\n}\r\n\r\n/**\r\n * Checks whether a value is a positive integer value or 0.\r\n */\r\nexport function isPositiveIntegerValueOrZero(value) {\r\n    const number = Number(value);\r\n    return Number.isInteger(number) && number >= 0;\r\n}\r\n\r\n/**\r\n * Rounds a value between 0 and 100 automatically to a reasonable number of digits:\r\n *\r\n * - Generally the value is rounded to one digit.\r\n * - Between 1 and 10, the value is rounded to two digits.\r\n * - Between 0.1 and 1, the value is rounded to three digits.\r\n * - Between 0.01 and 0.1, the value is rounded to four digits.\r\n * - Otherwise it is rounded to five digits.\r\n *\r\n */\r\nexport function autoRound(value) {\r\n    let roundFactor = 0;   // Default round factor\r\n\r\n    if(value >= 100) {\r\n        roundFactor = 0;\r\n    } else if(value < 100 && value >= 10) {\r\n        roundFactor = 1;\r\n    } else if(value < 10 && value >= 1) {\r\n        roundFactor = 2;\r\n    } else if(value < 1 && value >= 0.1) {\r\n        roundFactor = 3;\r\n    } else if(value < 0.1 && value >= 0.01) {\r\n        roundFactor = 4;\r\n    } else {\r\n        roundFactor = 5;\r\n    }\r\n\r\n    return round(value, roundFactor);\r\n}\r\n\r\n/**\r\n * Simple round function to round a number to a specific number of digits.\r\n */\r\nexport function round(value, digits) {\r\n    const roundFactor = Math.pow(10, digits);\r\n    return (Math.round(value * roundFactor)) / roundFactor;\r\n}\r\n\r\nexport function roundToNextValue(chartMaxValue: number) {\r\n\r\n    const roundUp = (value: number, multiple: number) => {\r\n        const remainder = value % multiple\r\n        if (remainder === 0) {\r\n            return value\r\n        } else {\r\n            return value + multiple - remainder\r\n        }\r\n    }\r\n\r\n    let multiple\r\n    if (chartMaxValue < 0.2) {\r\n        multiple = 0.1\r\n    } else if (chartMaxValue < 0.5) {\r\n        multiple = 0.2\r\n    } else if (chartMaxValue < 1) {\r\n        multiple = 0.5\r\n    } else if (chartMaxValue < 2) {\r\n        multiple = 1\r\n    } else if (chartMaxValue < 5) {\r\n        multiple = 2\r\n    } else if (chartMaxValue < 10) {\r\n        multiple = 5\r\n    } else if (chartMaxValue < 20) {\r\n        multiple = 10\r\n    } else if (chartMaxValue < 50) {\r\n        multiple = 20\r\n    } else if (chartMaxValue < 100) {\r\n        multiple = 50\r\n    } else if (chartMaxValue < 200) {\r\n        multiple = 100\r\n    } else if (chartMaxValue < 500) {\r\n        multiple = 200\r\n    } else if (chartMaxValue < 1000) {\r\n        multiple = 500\r\n    } else if (chartMaxValue < 2000) {\r\n        multiple = 1000\r\n    } else if (chartMaxValue < 5000) {\r\n        multiple = 2000\r\n    } else if (chartMaxValue < 10000) {\r\n        multiple = 5000\r\n    } else if (chartMaxValue < 20000) {\r\n        multiple = 10000\r\n    } else if (chartMaxValue < 50000) {\r\n        multiple = 20000\r\n    } else if (chartMaxValue < 100000) {\r\n        multiple = 50000\r\n    } else if (chartMaxValue < 200000) {\r\n        multiple = 100000\r\n    } else {\r\n        multiple = 200000\r\n    }\r\n\r\n    // Add 1 % buffer to the maximum value\r\n    chartMaxValue = chartMaxValue * 1.01\r\n\r\n    return round(roundUp(chartMaxValue, multiple),2)\r\n}\r\n\r\n\r\n/**\r\n * Returns a number of fixed length with leading zeros.\r\n */\r\nexport function getNumberOfFixedLength(number: number, digits: number): string {\r\n\tlet numberString = `${number}`\r\n\twhile(numberString.length < digits) {\r\n\t\tnumberString = `0${numberString}`\r\n\t}\r\n\treturn numberString\r\n}\r\n\r\n\r\nexport function convertBooleanToDigit(value: boolean) {\r\n\treturn value === true ? 1 : 0\r\n}\r\n\r\nexport function convertStringToBoolean(value: string) {\r\n\treturn value === \"1\" ? true : false\r\n}\r\n","export const color_yellow = \"rgba(255, 255, 153, 1.0)\";   // Default for Lipids\r\nexport const color_green = \"rgba(132, 225, 132, 1.0)\";   // Default for Carbs\r\n\r\nexport const color_green_light = \"rgba(196, 236, 193, 1.0)\";   // Default for Sugar (as part of carbs)\r\nexport const color_red = \"rgba(255, 204, 204, 1.0)\";   // Default for proteins\r\nexport const color_blue = \"rgba(133, 193, 233, 1.0)\";   // Default for Water\r\nexport const color_purple = \"rgba(213, 205, 237, 1.0)\"; // Default color for a blue line\r\n\r\nexport const color_brown = \"rgba(202, 132, 0)\";\r\n\r\nexport const color_gray = \"rgba(235, 235, 235, 1.0)\"; // Default color for a blue line\r\nexport const color_line_blue = \"rgba(0, 107, 215, 1.0)\"; // Default color for a blue line\r\nexport const color_line_red = \"rgba(255, 102, 102, 1.0)\"; // Default color for a red line\r\n\r\nexport const color_chart_green_1 = \"rgba(39, 177, 96)\";\t\t// Dark green\r\nexport const color_chart_green_2 = \"rgba(137, 238, 137)\";\t// Normal green\r\nexport const color_chart_green_3 = \"rgba(214, 245, 214)\";\t\t// Light green\r\n\r\nexport const color_chart_yellow_1 = \"rgba(212, 172, 13)\";\t\t// Dark yellow\r\nexport const color_chart_yellow_2 = \"rgba(244, 208, 63)\";\t// Normal yellow\r\nexport const color_chart_yellow_3 = \"rgba(249, 231, 159)\";\t\t// Light yellow\r\n\r\nexport const color_chart_orange = \"rgba(230, 126, 34)\";\r\nexport const color_chart_misc = color_gray;\r\n\r\nexport const basedata_chart_height = 300;\r\nexport const basedata_piechart_width = 300;\r\nexport const basedata_barchart_width = 380;\r\n\r\nexport const default_chart_height = 380;\r\nexport const default_chart_width = 800;\r\n\r\nexport const direct_compare_chartheight = 300;\r\n\r\nexport const energy_chart_height = 413;\r\n\r\nexport const minimal_table_height = energy_chart_height;\r\n\r\nexport const max_portion = 5000;\r\n\r\nexport const color_water = color_blue;\r\nexport const color_lipids = color_yellow;\r\nexport const color_carbs = color_green;\r\nexport const color_carbs_sugar = color_green_light;\r\nexport const color_carbs_dietaryFibers = color_chart_green_1;\r\nexport const color_carbs_misc = color_gray;\r\n\r\nexport const color_proteins = color_red;\r\n\r\nexport const color_lipids_saturated = color_brown;\r\nexport const color_lipids_unsaturated_mono = color_chart_yellow_2;\r\nexport const color_lipids_unsaturated_poly = color_chart_yellow_3;\r\n\r\nexport const color_lipids_omega3 = color_chart_yellow_2;\r\nexport const color_lipids_omega6 = color_brown;\r\n\r\nexport const color_lipids_misc = color_gray;\r\n\r\nexport const color_ash = color_gray;\r\n\r\nexport const direct_compare_color1 = \"#ffe085\"\r\nexport const direct_compare_color2 = \"#d9ecff\"","/**\r\n * Returns a default-styled configuration for a bar chart.\r\n *\r\n * title: The charts title.\r\n * unit: The unit to use for the axis title and tooltip.\r\n * minYValue: Optional, a pre-defined maxYValue for the Y axis (e.g. 100)\r\n */\r\nimport {shortenName} from \"./nutrientdata/NameTypeService\";\r\n\r\nexport function getBarChartOptions(title: string, unit: string, maxYValue?: number | undefined) {\r\n    let yAxis: any = {\r\n        title: {\r\n            display: true,\r\n            text: unit\r\n        }\r\n    }\r\n\r\n    if(maxYValue) {\r\n        yAxis = {...yAxis, min: 0, max: maxYValue}\r\n    }\r\n\r\n    const scalesObject = {y: yAxis}\r\n\r\n    return getOptions(title, unit, scalesObject);\r\n}\r\n\r\n\r\nexport function getBarChartOptionsForRanking(title: string, unit: string) {\r\n    const scales = getScalesForRankingChart(unit);\r\n    return getOptions(title, unit, scales);\r\n}\r\n\r\n\r\nexport function getPieChartOptions(title: string, unit: string) {\r\n    return getOptions(title, unit);\r\n}\r\n\r\n\r\nfunction getOptions(title: string, unit: string, scalesObject?: any | undefined) {\r\n    const titleObj = title ? {display: true, text: title, fontSize: 18} : null;\r\n\r\n    let options: any = {\r\n        maintainAspectRatio: false,\r\n        responsive: true,\r\n        plugins: {\r\n            title: titleObj,\r\n            tooltip: getToolTips(unit),\r\n            legend: {\r\n                display: false\r\n            },\r\n        }\r\n    }\r\n\r\n    if (scalesObject !== undefined) {\r\n        options = {...options, scales: scalesObject}\r\n    }\r\n\r\n    return options;\r\n}\r\n\r\nfunction getToolTips(unit: string) {\r\n    return {\r\n        enabled: true,\r\n        maintainAspectRatio: true,\r\n        callbacks: {\r\n            label: tooltipItem => `${tooltipItem.label}: ${tooltipItem.formattedValue} ${unit}`\r\n        }\r\n    };\r\n}\r\n\r\n\r\nfunction getScalesForRankingChart(unit: string) {\r\n    let scaleLabel: any | null = null;\r\n\r\n    if (unit) {\r\n        scaleLabel = {\r\n            display: true,\r\n            labelString: unit\r\n        }\r\n    }\r\n\r\n    let axesObj = {};\r\n    if (scaleLabel) {\r\n        axesObj[\"scaleLabel\"] = scaleLabel;\r\n    }\r\n\r\n    const yAxes = [axesObj];\r\n\r\n    const scales = {\r\n        yAxes: yAxes,\r\n        xAxes: [{\r\n            ticks: {\r\n                autoSkip: false,\r\n                callback: function (value, index, values) {\r\n                    return shortenName(value, 24);\r\n                }\r\n            }\r\n        }]\r\n    };\r\n\r\n    return scales;\r\n}","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE} from \"../../config/Constants\";\r\nimport {Form} from 'react-bootstrap';\r\nimport {PieChartConfigurationProps} from \"../../types/livedata/ChartPropsData\";\r\n\r\nexport function PieChartConfigurationForm(props: PieChartConfigurationProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    return (\r\n        <div className=\"container form-main\">\r\n            <div className=\"row\">\r\n                <form className=\"form-inline form-group\">\r\n                    <Form.Label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_charttype[languageContext.language]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check inline={true}\r\n                                label={applicationStrings.label_charttype_pie[languageContext.language]}\r\n                                type=\"radio\"\r\n                                value={CHART_TYPE_PIE}\r\n                                checked={props.chartType === CHART_TYPE_PIE}\r\n                                onChange={props.handleRadioButtonClick}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={true}\r\n                                style={{paddingRight: \"48px\"}}\r\n                                label={applicationStrings.label_charttype_bar[languageContext.language]}\r\n                                type=\"radio\"\r\n                                value={CHART_TYPE_BAR}\r\n                                checked={props.chartType === CHART_TYPE_BAR}\r\n                                onChange={props.handleRadioButtonClick}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={true}\r\n                                label={applicationStrings.checkbox_chartoption_showLegend[languageContext.language]}\r\n                                defaultChecked={props.showLegend}\r\n                                disabled={props.chartType === CHART_TYPE_BAR}\r\n                                onClick={props.handleLegendCheckboxClick}>\r\n                    </Form.Check>\r\n                    {props.detailsCheckboxAvailable &&\r\n                    <Form.Check inline={true}\r\n                                label={applicationStrings.checkbox_chartoption_showDetails[languageContext.language]}\r\n                                defaultChecked={props.showDetails}\r\n                                onClick={props.handleDetailsCheckboxClick}>\r\n                    </Form.Check>\r\n                    }\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {ReactElement} from \"react\";\r\n\r\ninterface CustomLegendProps {\r\n    legendData: Array<any>\r\n}\r\n\r\nexport function CustomLegend(props: CustomLegendProps) {\r\n\r\n    const renderLegend = () => {\r\n        let legend: Array<ReactElement> = [];\r\n\r\n        for (let i = 0; i < props.legendData.length; i++) {\r\n            const element = props.legendData[i];\r\n            const indent = element.indent > 0 ? \"25px\" : \"0px\";\r\n            const verticalSpace = element.separateNextElement ? \"15px\" : \"0px\";\r\n            const id = `legendrow ${i}`;\r\n\r\n            legend.push(\r\n                <div key={id} className=\"row\" style={{marginLeft: indent, marginBottom: verticalSpace}}>\r\n                    <div style={{display: \"flex\"}}>\r\n                        <div className=\"legendItem\" style={{background: element.color}}></div>\r\n                        <p style={{marginTop: \"-3px\"}}>{element.item}</p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return legend;\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={\"form-main\"} style={{borderLeft: \"1px solid #aaaaaa\", paddingLeft: \"5px\"}}>\r\n            <div style={{paddingTop: \"4px\"}}>\r\n                {renderLegend()}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n\r\n}","import {WindowDimension} from \"../WindowDimension\";\r\nimport {basedata_piechart_width, default_chart_height} from \"../../config/ChartConfig\";\r\nimport {TAB_BASE_DATA} from \"../../config/Constants\";\r\n\r\nexport function calculateChartHeight(currentDimension: WindowDimension, directCompare?: boolean, dataPage?: string): number {\r\n    return directCompare === true\r\n        ? currentDimension.height / 3\r\n        : dataPage === TAB_BASE_DATA\r\n            ? basedata_piechart_width\r\n            : default_chart_height\r\n}\r\n\r\nexport function calculateChartContainerHeight(currentDimension: WindowDimension, directCompare?: boolean): number {\r\n    return directCompare === true\r\n        ? calculateChartHeight(currentDimension, directCompare) + 24\r\n        : calculateChartHeight(currentDimension, directCompare) + 10\r\n}\r\n","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {autoRound} from \"../../../service/calculation/MathService\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE, TAB_BASE_DATA} from \"../../../config/Constants\";\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BaseDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {default_chart_height, direct_compare_chartheight} from \"../../../config/ChartConfig\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function BaseDataChart(props: BaseDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.baseChartConfig\r\n            : initialChartConfigData.baseChartConfig\r\n\r\n    const showDetailsProp = chartConfig.showDetails\r\n        ? chartConfig.showDetails\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.baseChartConfig.showDetails\r\n            : initialChartConfigData.baseChartConfig.showDetails\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [showDetails, setShowDetails] = useState<boolean>(showDetailsProp)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse, TAB_BASE_DATA))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setShowDetails(showDetailsProp)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse, TAB_BASE_DATA))\r\n        updateChartConfig()\r\n    }, [chartType, showDetails, showLegend, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData\r\n            if (chartType !== currentConfig.baseChartConfig.chartType\r\n                || showDetails !== currentConfig.baseChartConfig.showDetails\r\n                || showLegend !== currentConfig.baseChartConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...currentConfig,\r\n                    baseChartConfig: {\r\n                        chartType: chartType,\r\n                        showDetails: showDetails,\r\n                        showLegend: showLegend\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const createTotalChartData = () => {\r\n        const nutrientData = getNutrientData(props.selectedFoodItem);\r\n\r\n        return {\r\n            labels: [applicationStrings.label_nutrient_water[lang],\r\n                applicationStrings.label_nutrient_carbohydrates_short[lang],\r\n                applicationStrings.label_nutrient_lipids[lang],\r\n                applicationStrings.label_nutrient_proteins[lang],\r\n                applicationStrings.label_nutrient_ash[lang]],\r\n            datasets: [{\r\n                label: applicationStrings.label_chart_totalComposition[lang],\r\n                data: [autoRound(nutrientData.baseData.water),\r\n                    autoRound(nutrientData.baseData.carbohydrates),\r\n                    autoRound(nutrientData.baseData.lipids),\r\n                    autoRound(nutrientData.baseData.proteins),\r\n                    autoRound(nutrientData.baseData.ash)\r\n                ],\r\n                backgroundColor: [\r\n                    ChartConfig.color_water,\r\n                    ChartConfig.color_carbs,\r\n                    ChartConfig.color_lipids,\r\n                    ChartConfig.color_proteins,\r\n                    ChartConfig.color_ash,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const createNutrientChartData = () => {\r\n        const nutrientData = getNutrientData(props.selectedFoodItem);\r\n        const totalValue = nutrientData.baseData.carbohydrates + nutrientData.baseData.lipids + nutrientData.baseData.proteins;\r\n\r\n        const sugar = nutrientData.carbohydrateData?.sugar ? nutrientData.carbohydrateData.sugar : 0\r\n        const dietaryFibers = nutrientData.baseData.dietaryFibers ? nutrientData.baseData.dietaryFibers : 0\r\n\r\n        let carbValue = showDetails ? (nutrientData.baseData.carbohydrates - sugar - dietaryFibers)\r\n            : nutrientData.baseData.carbohydrates;\r\n\r\n        if (carbValue < 0) {\r\n            carbValue = 0\r\n        }\r\n\r\n        const carbValuePerc = autoRound(carbValue / totalValue * 100)\r\n        const sugarValuePerc = autoRound(sugar / totalValue * 100)\r\n        const dietaryFibersPerc = autoRound(dietaryFibers / totalValue * 100)\r\n        const lipidValuePerc = autoRound(nutrientData.baseData.lipids / totalValue * 100)\r\n        const proteinsValuePerc = autoRound(nutrientData.baseData.proteins / totalValue * 100)\r\n\r\n        const labels = [applicationStrings.label_nutrient_lipids[lang],\r\n            applicationStrings.label_nutrient_proteins[lang],\r\n            applicationStrings.label_nutrient_carbohydrates_short[lang]]\r\n\r\n        const values = [lipidValuePerc, proteinsValuePerc, carbValuePerc];\r\n\r\n        const backgroundColors = [\r\n            ChartConfig.color_lipids,\r\n            ChartConfig.color_proteins,\r\n            ChartConfig.color_carbs\r\n        ];\r\n\r\n        if (showDetails) {\r\n            if (sugarValuePerc > 0) {\r\n                labels.push(applicationStrings.label_nutrient_sugar[lang]);\r\n                values.push(sugarValuePerc);\r\n                backgroundColors.push(ChartConfig.color_carbs_sugar);\r\n            }\r\n            if (dietaryFibersPerc > 0) {\r\n                labels.push(applicationStrings.label_nutrient_dietaryFibers_short[lang]);\r\n                values.push(dietaryFibersPerc);\r\n                backgroundColors.push(ChartConfig.color_carbs_dietaryFibers);\r\n            }\r\n        }\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_chart_nutrientComposition[lang],\r\n                data: values,\r\n                backgroundColor: backgroundColors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const getLegendData = () => {\r\n        const legendData: Array<any> = [\r\n            {\r\n                item: applicationStrings.label_nutrient_water[lang],\r\n                color: ChartConfig.color_water,\r\n                separateNextElement: true\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_lipids[lang],\r\n                color: ChartConfig.color_lipids\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_proteins[lang],\r\n                color: ChartConfig.color_proteins\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_carbohydrates_short[lang],\r\n                color: ChartConfig.color_carbs,\r\n            }\r\n        ];\r\n\r\n        if (showDetails) {\r\n            legendData.push(\r\n                {\r\n                    item: applicationStrings.label_nutrient_sugar[lang],\r\n                    color: ChartConfig.color_carbs_sugar,\r\n                    indent: 1,\r\n                },\r\n                {\r\n                    item: applicationStrings.label_nutrient_dietaryFibers[lang],\r\n                    color: ChartConfig.color_carbs_dietaryFibers,\r\n                    indent: 1,\r\n                    separateNextElement: true\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_ash[lang],\r\n            color: ChartConfig.color_ash\r\n        })\r\n\r\n        return legendData;\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        setChartType(event.target.value)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const handleLegendCheckboxClick = () => {\r\n        setShowLegend(!showLegend)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const handleDetailsCheckboxClick = () => {\r\n        setShowDetails(!showDetails)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const legendAllowed = showLegend && chartType === CHART_TYPE_PIE\r\n\r\n    const getOptions = (title) => {\r\n        return chartType === CHART_TYPE_BAR ? getBarChartOptions(title, \"%\") : getPieChartOptions(title, \"%\")\r\n    }\r\n\r\n\r\n    const renderSubChart = (title: string, chartData: any) => {\r\n        if (!chartData) {\r\n            return <div/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie\r\n                    data={chartData}\r\n                    key={'chart ' + chartHeight}\r\n                    height={chartHeight}\r\n                    width={ChartConfig.basedata_piechart_width}\r\n                    options={getOptions(title)}\r\n                    type={\"pie\"}/>\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar\r\n                    data={chartData}\r\n                    key={'chart ' + chartHeight}\r\n                    height={chartHeight}\r\n                    width={ChartConfig.basedata_barchart_width}\r\n                    options={getOptions(title)}\r\n                    type={\"bar\"}/>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const totalChartData = createTotalChartData();\r\n    const nutrientChartData = createNutrientChartData();\r\n\r\n    const totalChartDataTitle = applicationStrings.label_chart_totalComposition[lang]\r\n    const nutrientChartDataTitle = applicationStrings.label_chart_nutrientComposition[lang]\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n    const justifyContent = props.directCompareUse ? \"center\" : \"left\"\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"d-flex text-align-center\" style={{justifyContent: justifyContent}}>\r\n                <div className=\"d-inline-block\">\r\n                    <div className=\"row\" style={{height: containerHeight}} key={\"base chart container \" + containerHeight}>\r\n                        <div className=\"col-6\">\r\n                            <div>{renderSubChart(totalChartDataTitle, totalChartData)}</div>\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                            <div>{renderSubChart(nutrientChartDataTitle, nutrientChartData)}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {legendAllowed &&\r\n                <div className=\"d-inline-block float-right\">\r\n                    <CustomLegend legendData={getLegendData()}/>\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareUse &&\r\n                <div className=\"row chartFormLine\">\r\n                    <PieChartConfigurationForm chartType={chartType}\r\n                                               showLegend={showLegend}\r\n                                               showDetails={showDetails}\r\n                                               detailsCheckboxAvailable={true}\r\n                                               handleRadioButtonClick={handleRadioButtonClick}\r\n                                               handleLegendCheckboxClick={handleLegendCheckboxClick}\r\n                                               handleDetailsCheckboxClick={handleDetailsCheckboxClick}/>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n\r\n}","export const PAL_CATEGORY_1 = 1.2;\r\nexport const PAL_CATEGORY_2 = 1.4;\r\nexport const PAL_CATEGORY_3 = 1.6;\r\nexport const PAL_CATEGORY_4 = 1.8;\r\nexport const PAL_CATEGORY_5 = 2.1;\r\nexport const PAL_CATEGORY_6 = 2.4;\r\nexport const PAL_CATEGORY_7 = 2.8;","import * as Constants from '../../config/Constants';\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as EnergyConstants from '../../config/EnergyConstants'\r\nimport {SEX_MALE} from \"../../config/Constants\";\r\nimport {PalCategory} from \"../../types/livedata/PalCategory\";\r\n\r\n\r\n/**\r\n * Creates a list of PAL categories with name and value for the user settings form.\r\n */\r\nexport function getPalCategories(language: string): Array<PalCategory> {\r\n    const palCategories = [\r\n        {label: createPalCategoryName(language, 1), value: EnergyConstants.PAL_CATEGORY_1},\r\n        {label: createPalCategoryName(language, 2), value: EnergyConstants.PAL_CATEGORY_2},\r\n        {label: createPalCategoryName(language, 3), value: EnergyConstants.PAL_CATEGORY_3},\r\n        {label: createPalCategoryName(language, 4), value: EnergyConstants.PAL_CATEGORY_4},\r\n        {label: createPalCategoryName(language, 5), value: EnergyConstants.PAL_CATEGORY_5},\r\n        {label: createPalCategoryName(language, 6), value: EnergyConstants.PAL_CATEGORY_6},\r\n        {label: createPalCategoryName(language, 7), value: EnergyConstants.PAL_CATEGORY_7},\r\n    ];\r\n\r\n    return palCategories;\r\n}\r\n\r\n/**\r\n * Returns the PAL category number of a PAL value.\r\n *\r\n * value: The PAL value, e.g. 1.4 or 1.6.\r\n */\r\nexport function getPalCategory(value: number): number {\r\n    switch(value) {\r\n        case EnergyConstants.PAL_CATEGORY_1:\r\n            return 1\r\n        case EnergyConstants.PAL_CATEGORY_2:\r\n            return 2\r\n        case EnergyConstants.PAL_CATEGORY_3:\r\n            return 3\r\n        case EnergyConstants.PAL_CATEGORY_4:\r\n            return 4\r\n        case EnergyConstants.PAL_CATEGORY_5:\r\n            return 5\r\n        case EnergyConstants.PAL_CATEGORY_6:\r\n            return 6\r\n        case EnergyConstants.PAL_CATEGORY_7:\r\n            return 7\r\n        default:\r\n            return 1\r\n    }\r\n}\r\n\r\n\r\nexport function getPalValue(palCategory: number): number {\r\n\tswitch(palCategory) {\r\n        case 1:\r\n            return EnergyConstants.PAL_CATEGORY_1\r\n        case 2:\r\n            return EnergyConstants.PAL_CATEGORY_2\r\n        case 3:\r\n            return EnergyConstants.PAL_CATEGORY_3\r\n        case 4:\r\n            return EnergyConstants.PAL_CATEGORY_4\r\n        case 5:\r\n            return EnergyConstants.PAL_CATEGORY_5\r\n        case 6:\r\n            return EnergyConstants.PAL_CATEGORY_6\r\n        case 7:\r\n            return EnergyConstants.PAL_CATEGORY_7\r\n        default:\r\n            return EnergyConstants.PAL_CATEGORY_1\r\n    }\r\n}\r\n\r\n\r\nfunction createPalCategoryName(language, category): string {\r\n    const languageLabel = `palcat_name_${category}`;\r\n    const name = applicationStrings[languageLabel][language]\r\n\r\n    const energyLabel = `PAL_CATEGORY_${category}`;\r\n    const value = EnergyConstants[energyLabel];\r\n    return `${name} (${value})`;\r\n}\r\n\r\n\r\n/**\r\n * Calculates the Basal Metabolic Rate (BMR) of a person.\r\n */\r\nexport function calculateBMR(age: number, size: number, weight: number, sex: string): number {\r\n    if(sex === SEX_MALE) {\r\n        const bmr = 3.4 * weight + 15.3 * size - 6.8 * age - 961;\r\n        return Math.round(bmr);\r\n    } else {\r\n        const bmr = 2.4 * weight + 9.0 * size - 4.7 * age - 65;\r\n        return Math.round(bmr);\r\n    }\r\n}\r\n\r\n/**\r\n * Calculates the total energy consumption of a person in one day.\r\n *\r\n * bmr: The bmr value.\r\n * palValue: The pal value\r\n * leisureSports: Specifies whether leisure sports is performed or not (+0.3 PAL).\r\n */\r\nexport function calculateTotalEnergyConsumption(bmr: number, palValue: number, leisureSports: boolean): number {\r\n    if(leisureSports) {\r\n        palValue += 0.3;\r\n    }\r\n\r\n    return bmr * palValue;\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {Bar, Chart} from \"react-chartjs-2\";\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {calculateBMR, calculateTotalEnergyConsumption} from \"../../../service/calculation/EnergyService\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {default_chart_height} from \"../../../config/ChartConfig\";\r\nimport annotationPlugin from 'chartjs-plugin-annotation'\r\nimport {ChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function EnergyDataChart(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const nutrientData = getNutrientData(props.selectedFoodItem);\r\n    const energy100g = nutrientData.baseData.energy;\r\n\r\n    Chart.register(annotationPlugin)\r\n\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n    }, [chartHeight])\r\n\r\n    if (!applicationContext || !energy100g) {\r\n        return <div>No data.</div>\r\n    }\r\n\r\n    const createEnergyLevelChart = () => {\r\n        const averagePortion = props.selectedFoodItem.portion.amount\r\n        const energyPortion = Math.round(energy100g / 100 * averagePortion);\r\n\r\n        return {\r\n            labels: [\"100 g\", \"Portion\"],\r\n            datasets: [{\r\n                data: [energy100g,\r\n                    energyPortion\r\n                ],\r\n                backgroundColor: [\r\n                    ChartConfig.color_yellow,\r\n                    ChartConfig.color_red,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n\r\n        }\r\n    }\r\n\r\n\r\n    const renderUserDataInfoPage = () => {\r\n        return (\r\n            <div style={{paddingLeft: \"50px\", paddingTop: \"50px\"}}>\r\n                {applicationContext.userData.initialValues ?\r\n                    (<div>\r\n                        <p>{applicationStrings.text_setUserdata_p1[lang]}</p>\r\n                        <p>{applicationStrings.text_setUserdata_p2[lang]}</p>\r\n                    </div>)\r\n                    :\r\n                    <p>{applicationStrings.text_setUserdata_p3[lang]}</p>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const getOptions = () => {\r\n        const {age, size, weight, sex, palValue, leisureSports} = applicationContext.userData\r\n        const bmr = calculateBMR(age, size, weight, sex);\r\n        const totalEnergy = calculateTotalEnergyConsumption(bmr, palValue, leisureSports);\r\n\r\n        const annotation = {\r\n            annotations: {\r\n                line1: {\r\n                    type: 'line',\r\n                    mode: 'horizontal',\r\n                    scaleID: 'y-axis-0',\r\n                    yMin: bmr,\r\n                    yMax: bmr,\r\n                    borderColor: ChartConfig.color_line_red,\r\n                    borderWidth: 4,\r\n                    label: {\r\n                        enabled: true,\r\n                        content: applicationStrings.label_chart_bmr[lang]\r\n                    }\r\n                },\r\n                line2:\r\n                    {\r\n                        type: 'line',\r\n                        mode: 'horizontal',\r\n                        scaleID: 'y-axis-0',\r\n                        yMin: totalEnergy,\r\n                        yMax: totalEnergy,\r\n                        borderColor: ChartConfig.color_line_blue,\r\n                        borderWidth: 4,\r\n                        label: {\r\n                            enabled: true,\r\n                            content: applicationStrings.label_chart_energyExpenditure[lang]\r\n                        }\r\n                    },\r\n            }\r\n        }\r\n\r\n        let options: any = getBarChartOptions(applicationStrings.label_charttype_energy[languageContext.language], \"kCal\");\r\n        options = {\r\n            ...options, plugins: {\r\n                ...options.plugins,\r\n                annotation: annotation\r\n            }\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    const data = createEnergyLevelChart();\r\n    if (!data) {\r\n        return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n    }\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\" >\r\n            <div className=\"row \" style={{height: containerHeight}} key={\"energy container \" + containerHeight}>\r\n                <div className=\"col-6\">\r\n                    <div>\r\n                        <Bar\r\n                            data={data}\r\n                            key={'chart ' + chartHeight}\r\n                            height={chartHeight}\r\n                            options={getOptions()}\r\n                            type={\"bar\"}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {renderUserDataInfoPage()}\r\n                </div>\r\n            </div>\r\n            <div style={{height: \"64px\"}}></div>\r\n        </div>\r\n    )\r\n\r\n}","import * as Constants from '../../config/Constants';\r\nimport DietaryRequirement, {\r\n    RequirementAgeGroupData,\r\n    RequirementData\r\n} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport {SEX_MALE} from \"../../config/Constants\";\r\n\r\n/*\r\n * Determines the daily requirements of a vitamin or mineral for a specific user.\r\n *\r\n * dailyRequirementObject: A vitamin or mineral requirement object (e.g. for Vitamin C or Iron).\r\n * userData: The user data object containing the user data.\r\n */\r\nexport function determineDailyRequirement(dailyRequirementObject: RequirementData, userData: UserData): number {\r\n    let ageGroupRequirements: RequirementAgeGroupData\r\n\r\n    if (userData.age >= 65) {\r\n        ageGroupRequirements = dailyRequirementObject.senior;\r\n    } else if (userData.age >= 51) {\r\n        ageGroupRequirements = dailyRequirementObject.preSenior;\r\n    } else if (userData.age >= 26) {\r\n        ageGroupRequirements = dailyRequirementObject.midLifeAdult;\r\n    } else if (userData.age >= 19) {\r\n        ageGroupRequirements = dailyRequirementObject.youngAdult;\r\n    } else if (userData.age >= 15) {\r\n        ageGroupRequirements = dailyRequirementObject.youth;\r\n    } else {\r\n        ageGroupRequirements = dailyRequirementObject.youth;   // Default case (should not occur!)\r\n    }\r\n\r\n    let value: number\r\n    if (userData.sex === SEX_MALE) {\r\n        value = ageGroupRequirements.male;\r\n    } else {\r\n        if (userData.pregnant) {\r\n            value = ageGroupRequirements.femalePregnant ? ageGroupRequirements.femalePregnant : ageGroupRequirements.female;\r\n        } else if (userData.breastFeeding) {\r\n            value = ageGroupRequirements.femaleBreastFeeding ? ageGroupRequirements.femaleBreastFeeding : ageGroupRequirements.female;\r\n        } else {\r\n            value = ageGroupRequirements.female;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/*\r\n * Determines the ratio (percentage) of vitamins/minerals in food compared to the daily requirements of the user.\r\n * Example: The daily requirements of Vitamin C is 120 mg for the user. The food contains 24 mg C. The ratio is 0.2 (20 %).\r\n *\r\n * dailyRequirementObject: A vitamin or mineral requirement object (e.g. for Vitamin C or Iron).\r\n * userData: The user data object containing the user data.\r\n * portionSize: The portion size in gram (100 = default value, i.e., 100 gram).\r\n * amountInFood: The amount of the vitamin or mineral in the food (which is always 100 gram).\r\n */\r\nexport function determineFoodRequirementRatio(dailyRequirementObject: RequirementData, amountInFood: number, portionSize: number, userData: UserData): number {\r\n    const dailyRequirement = determineDailyRequirement(dailyRequirementObject, userData);\r\n    if (portionSize === 100) {\r\n        return Math.round(amountInFood / dailyRequirement * 1000) / 10;\r\n    } else {   // Calculate ration for a special amount (portion):\r\n        return Math.round(amountInFood / dailyRequirement * (portionSize * 10)) / 10;\r\n    }\r\n}\r\n\r\n\r\n/*\r\n * Determines the ratio (percentage) of proteins in food compared to the daily requirements of the user.\r\n * Example: The daily requirements of Lysine is 30 mg per kg. The user weights 80 kg. His dietary requirement\r\n * is thus 30 * 80 = 2400 mg per day. The food contains 240 mg C. The ratio is 0.1 (10 %).\r\n *\r\n * dailyRequirementObject: A protein requirement object for a specific protein (e.g. for Lycin).\r\n * userData: The user data object containing the user data.\r\n * portionSize: The portion size in gram (100 = default value, i.e., 100 gram).\r\n * amountInFood: The amount of the vitamin or mineral in the food (which is always 100 gram).\r\n */\r\nexport function determineProteinRequirementRatio(requirement: number, amountInFood: number, portionSize: number, userData: UserData) {\r\n    const dailyRequirement = (requirement * userData.weight) / 1000;\r\n\r\n    if (portionSize === 100) {\r\n        return Math.round(amountInFood / dailyRequirement * 1000) / 10;\r\n    } else {   // Calculate ration for a special amount (portion):\r\n        return Math.round(amountInFood / dailyRequirement * (portionSize * 10)) / 10;\r\n    }\r\n}\r\n\r\n\r\nexport function convertAbsoluteValueToDailyRequirement(dailyRequirements: DietaryRequirement, item: string, amount: number, userData: UserData) {\r\n    let dailyRequirementObject\r\n\r\n    if (item === Constants.DATA_VITAMINS_A) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.a;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B1) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b1;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B2) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b2;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B3) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b3;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B5) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b5;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B6) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b6;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B9) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b9;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B12) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b12;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_C) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.c;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_D) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.d;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_E) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.e;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_K) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.k;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_CALCIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.calcium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_COPPER) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.copper;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_IRON) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.iron;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_MAGNESIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.magnesium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_MANGANESE) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.manganese;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_PHOSPHORUS) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.phosphorus;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_POTASSIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.potassium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_SELENIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.selenium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_SODIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.sodium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_ZINC) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.zinc;\r\n    }\r\n\r\n    if (!dailyRequirementObject) {\r\n        console.error('No requirement data object generated.')\r\n        return 0\r\n    }\r\n\r\n    const dailyRequirement = determineDailyRequirement(dailyRequirementObject, userData);\r\n    return Math.round(amount / dailyRequirement * 1000) / 10;\r\n}","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {AMOUNT_PORTION, GRAM} from \"../../config/Constants\";\r\nimport {BarChartConfigurationProps} from \"../../types/livedata/ChartPropsData\";\r\n\r\nexport function BarChartConfigurationForm(props: BarChartConfigurationProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const label_portion = props.selectedFoodItem\r\n        ?`${applicationStrings.label_portion[lang]} (${props.selectedFoodItem.portion.amount} g)`\r\n        : applicationStrings.label_portion[lang]\r\n\r\n    return (\r\n        <div className=\"container-fluid form-main\">\r\n            <div className=\"row foodDataPageHeader\">\r\n                <form className=\"form-inline form-group\">\r\n                    <Form.Label className={\"form-elements\"}>\r\n                        <b>{applicationStrings.label_reference[lang]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                label={\"100g\"}\r\n                                value={GRAM}\r\n                                checked={(props.portionType === GRAM)}\r\n                                onChange={props.handleRadioButtonClick}\r\n                    />\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                style={{paddingRight: \"48px\"}}\r\n                                label={label_portion}\r\n                                value={AMOUNT_PORTION}\r\n                                checked={props.portionType === AMOUNT_PORTION}\r\n                                onChange={props.handleRadioButtonClick}\r\n                    />\r\n                    <Form.Check className=\"form-radiobutton\"\r\n                                inline={true}\r\n                                label={applicationStrings.checkbox_expand100g[lang]}\r\n                                checked={props.expand100}\r\n                                onChange={props.handleExpandCheckboxClick}>\r\n                    </Form.Check>\r\n                    {props.handleSynchronize !== undefined && props.synchronize !== undefined &&\r\n                    < Form.Check className=\"form-radiobutton\"\r\n                        inline={true}\r\n                        label={applicationStrings.checkbox_synchronize[lang]}\r\n                        checked={props.synchronize}\r\n                        onChange={props.handleSynchronize}>\r\n                        </Form.Check>\r\n                    }\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {CHART_MINERALS, CHART_VITAMINS, GRAM} from \"../../../config/Constants\";\r\nimport {determineFoodRequirementRatio} from \"../../../service/calculation/DietaryRequirementService\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\"\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../../charthelper/BarChartConfigurationForm\";\r\nimport {MineralVitaminChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function MineralVitaminChart(props: MineralVitaminChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfigVitamins = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.vitaminChartConfig\r\n            : initialChartConfigData.vitaminChartConfig\r\n\r\n    const chartConfigMinerals = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.mineralChartConfig\r\n            : initialChartConfigData.mineralChartConfig\r\n\r\n    const [portionType_vitamins, setPortionType_vitamins] = useState<string>(chartConfigVitamins.portionType)\r\n    const [expand100_vitamins, setExpand100_vitamins] = useState<boolean>(chartConfigVitamins.expand100)\r\n    const [chartType_minerals, setChartType_minerals] = useState<string>(chartConfigMinerals.portionType)\r\n    const [expand100_minerals, setExpand100_minerals] = useState<boolean>(chartConfigMinerals.expand100)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setPortionType_vitamins(chartConfigVitamins.portionType)\r\n            setExpand100_vitamins(chartConfigVitamins.expand100)\r\n            setChartType_minerals(chartConfigMinerals.portionType)\r\n            setExpand100_minerals(chartConfigMinerals.expand100)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [portionType_vitamins, chartType_minerals, expand100_vitamins, expand100_minerals, chartHeight, props])\r\n\r\n\r\n    if (!applicationContext || applicationContext.foodDataCorpus.dietaryRequirements === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const anyValueChanged = (): boolean => {\r\n        const config = props.selectedSubChart === CHART_VITAMINS\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.vitaminChartConfig\r\n            : applicationContext.applicationData.foodDataPanel.chartConfigData.mineralChartConfig\r\n\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            return portionType_vitamins !== config.portionType || expand100_vitamins !== config.expand100\r\n        } else {\r\n            return chartType_minerals !== config.portionType || expand100_minerals !== config.expand100\r\n        }\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (!props.directCompareConfig && anyValueChanged()) {\r\n            if (applicationContext) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    vitaminChartConfig: {\r\n                        portionType: portionType_vitamins,\r\n                        expand100: expand100_vitamins\r\n                    },\r\n                    mineralChartConfig: {\r\n                        portionType: chartType_minerals,\r\n                        expand100: expand100_minerals\r\n                    }\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const createVitaminChartData = () => {\r\n        const vitaminData = getNutrientData(props.selectedFoodItem).vitaminData;\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.vitaminRequirementData;\r\n\r\n        if (!vitaminData || !requirementData) {\r\n            return null\r\n        }\r\n\r\n        const amount = portionType_vitamins === GRAM ? 100 : props.selectedFoodItem.portion.amount\r\n\r\n        const labels: Array<string> = [];\r\n        const data: Array<number> = [];\r\n\r\n        if (vitaminData.a !== null) {\r\n            labels.push(\"A\");\r\n            data.push(determineFoodRequirementRatio(requirementData.a, vitaminData.a, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b1 !== null) {\r\n            labels.push(\"B1\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b1, vitaminData.b1, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b2 !== null) {\r\n            labels.push(\"B2\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b2, vitaminData.b2, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b3 !== null) {\r\n            labels.push(\"B3\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b3, vitaminData.b3, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b5 !== null) {\r\n            labels.push(\"B5\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b5, vitaminData.b5, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b6 !== null) {\r\n            labels.push(\"B6\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b6, vitaminData.b6, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b9 !== null) {\r\n            labels.push(\"B9\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b9, vitaminData.b9, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.b12 !== null) {\r\n            labels.push(\"B12\");\r\n            data.push(determineFoodRequirementRatio(requirementData.b12, vitaminData.b12, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.c !== null) {\r\n            labels.push(\"C\");\r\n            data.push(determineFoodRequirementRatio(requirementData.c, vitaminData.c, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.d !== null) {\r\n            labels.push(\"D\");\r\n            data.push(determineFoodRequirementRatio(requirementData.d, vitaminData.d, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.e !== null) {\r\n            labels.push(\"E\");\r\n            data.push(determineFoodRequirementRatio(requirementData.e, vitaminData.e, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (vitaminData.k !== null) {\r\n            labels.push(\"K\");\r\n            data.push(determineFoodRequirementRatio(requirementData.k, vitaminData.k, amount, applicationContext.userData));\r\n        }\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_chart_green_3\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_vitamins[lang],\r\n                data: data,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n\r\n        }\r\n    }\r\n\r\n    const createMineralChartData = () => {\r\n        const mineralData = getNutrientData(props.selectedFoodItem).mineralData;\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.mineralRequirementData;\r\n\r\n        if (!mineralData || !requirementData) {\r\n            return null\r\n        }\r\n\r\n        const amount = chartType_minerals === GRAM ? 100 : props.selectedFoodItem.portion.amount\r\n\r\n        const labels: Array<string> = [];\r\n        const data: Array<number> = [];\r\n\r\n        if (mineralData.calcium !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_calcium[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.calcium, mineralData.calcium, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.iron !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_iron[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.iron, mineralData.iron, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.magnesium !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_magnesium[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.magnesium, mineralData.magnesium, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.phosphorus !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_phosphorus[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.phosphorus, mineralData.phosphorus, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.potassium !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_potassimum[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.potassium, mineralData.potassium, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.sodium !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_sodium[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.sodium, mineralData.sodium, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.zinc !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_zinc[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.zinc, mineralData.zinc, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.copper !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_copper[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.copper, mineralData.copper, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.manganese !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_manganese[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.manganese, mineralData.manganese, amount, applicationContext.userData));\r\n        }\r\n\r\n        if (mineralData.selenium !== null) {\r\n            labels.push(applicationStrings.label_nutrient_min_selenium[lang]);\r\n            data.push(determineFoodRequirementRatio(requirementData.selenium, mineralData.selenium, amount, applicationContext.userData));\r\n        }\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_purple\r\n\r\n        const chartData = {\r\n            labels: labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_minerals[lang],\r\n                data: data,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n\r\n        }\r\n\r\n        return chartData;\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            setPortionType_vitamins(event.target.value)\r\n        } else if (props.selectedSubChart === CHART_MINERALS) {\r\n            setChartType_minerals(event.target.value)\r\n        }\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            setExpand100_vitamins(!expand100_vitamins)\r\n        } else if (props.selectedSubChart === CHART_MINERALS) {\r\n            setExpand100_minerals(!expand100_minerals)\r\n        }\r\n    }\r\n\r\n    const getOptions = (title, maxValue) => {\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals;\r\n        const overallMaxValue = props.directCompareConfig && props.directCompareConfig.maxValue\r\n            ? props.directCompareConfig.maxValue\r\n            : maxValue\r\n\r\n        let maxYValue\r\n        if (!props.directCompareConfig) {\r\n            if (expand100 && overallMaxValue < 100) {\r\n                maxYValue = 100\r\n            }\r\n        } else {\r\n\r\n            if (props.directCompareConfig.maxValue) {\r\n                maxYValue = props.directCompareConfig.maxValue\r\n            }\r\n            if (expand100 === true) {\r\n                if (maxYValue === undefined) {\r\n                    if (overallMaxValue < 100) {\r\n                        maxYValue = 100\r\n                    }\r\n                } else if (maxYValue < 100) {\r\n                    maxYValue = 100\r\n                }\r\n            }\r\n        }\r\n\r\n        return getBarChartOptions(title, \"%\", maxYValue);\r\n    }\r\n\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const portionType = props.selectedSubChart === CHART_VITAMINS ? portionType_vitamins : chartType_minerals;\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals;\r\n\r\n        const barChartProps = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps} />\r\n    }\r\n\r\n\r\n    const data = props.selectedSubChart === CHART_VITAMINS ? createVitaminChartData() : createMineralChartData();\r\n    if (!data) {\r\n        return <div/>\r\n    }\r\n\r\n    const maxValue = (data && data.datasets && data.datasets.length > 0) ? Math.max(...data.datasets[0].data) : 0;\r\n\r\n    const title = props.selectedSubChart === CHART_VITAMINS ? applicationStrings.label_charttype_vitamins[lang] :\r\n        applicationStrings.label_charttype_minerals[lang];\r\n\r\n    const options = getOptions(title, maxValue);\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"base chart container \" + containerHeight}>\r\n                <div className={\"col-12\"}>\r\n                    <Bar\r\n                        data={data}\r\n                        key={'chart ' + chartHeight}\r\n                        height={chartHeight}\r\n                        options={options}\r\n                        type={\"bar\"}\r\n                    />\r\n                </div>\r\n            </div>\r\n            {props.directCompareUse !== true &&\r\n            <div className=\"row chartFormLine\">\r\n                {renderChartConfigurationForm()}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\n\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {default_chart_height, direct_compare_chartheight} from \"../../../config/ChartConfig\"\r\nimport * as Constants from \"../../../config/Constants\"\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE, LIPIDS_DATA_BASE} from \"../../../config/Constants\"\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {autoRound} from \"../../../service/calculation/MathService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {OmegaData} from \"../../../types/nutrientdata/FoodItem\";\r\nimport {initialChartConfigData, minimalOmegaRatio} from \"../../../config/ApplicationSetting\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {LipidsDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {\r\n    calculateChartContainerHeight,\r\n    calculateChartHeight\r\n} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function LipidsDataChart(props: LipidsDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    let chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.lipidsChartConfig\r\n            : initialChartConfigData.lipidsChartConfig\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [subChart, setSubChart] = useState<string>(chartConfig.subChart  ? chartConfig.subChart : LIPIDS_DATA_BASE)\r\n\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setSubChart(chartConfig.subChart ? chartConfig.subChart : LIPIDS_DATA_BASE)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [chartType, showLegend, subChart, chartHeight, windowSize, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData.lipidsChartConfig\r\n            if (chartType !== currentConfig.chartType\r\n                || subChart !== currentConfig.subChart\r\n                || showLegend !== currentConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    lipidsChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: showLegend,\r\n                        subChart: subChart\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const lipidsData = getNutrientData(props.selectedFoodItem).lipidData;\r\n    const totalLipidsAmount = getNutrientData(props.selectedFoodItem).baseData.lipids;\r\n\r\n    const handleChartSelectionChange = (event: any) => {\r\n        if (props.directCompareConfig && props.directCompareConfig.handleSubchartChange) {\r\n            props.directCompareConfig.handleSubchartChange(event)\r\n        } else {\r\n            setSubChart(event.target.value)\r\n        }\r\n    }\r\n\r\n    const createTotalChartData = (totalAmount: number, saturated: number, unsaturatedMono: number, unsaturatedPoly: number): any => {\r\n        const valueSaturated = autoRound(lipidsData.saturated!! / totalAmount * 100);\r\n        const valueUnsaturatedMono = autoRound(lipidsData.unsaturatedMono!! / totalAmount * 100);\r\n        const valueUnsaturatedPoly = autoRound(lipidsData.unsaturatedPoly!! / totalAmount * 100);\r\n\r\n        let valueRemainder = totalAmount - (saturated + unsaturatedMono + unsaturatedPoly);\r\n        valueRemainder = autoRound(valueRemainder / totalAmount * 100);\r\n\r\n        if (valueRemainder < 0) {\r\n            console.error(\"Fatty acids sum is erroneous. Food-Obj: \", props.selectedFoodItem);\r\n            valueRemainder = 0;\r\n        }\r\n\r\n        return {\r\n            labels: [applicationStrings.label_nutrient_lipids_saturated[lang],\r\n                applicationStrings.label_nutrient_lipids_unsaturated_mono[lang],\r\n                applicationStrings.label_nutrient_lipids_unsaturated_poly[lang],\r\n                applicationStrings.label_nutrient_remainder[lang]],\r\n            datasets: [{\r\n                data: [valueSaturated,\r\n                    valueUnsaturatedMono,\r\n                    valueUnsaturatedPoly,\r\n                    valueRemainder],\r\n                backgroundColor: [\r\n                    ChartConfig.color_lipids_saturated,\r\n                    ChartConfig.color_lipids_unsaturated_mono,\r\n                    ChartConfig.color_lipids_unsaturated_poly,\r\n                    ChartConfig.color_lipids_misc,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const createOmegaChartData = (totalAmount: number, omegaData: OmegaData) => {\r\n        if (omegaData.omega3 === null || omegaData.omega6 === null || omegaData.uncertain === null) {\r\n            return null;\r\n        }\r\n\r\n        const valueOmega3 = autoRound(omegaData.omega3 / totalAmount * 100);\r\n        const valueOmega6 = autoRound(omegaData.omega6 / totalAmount * 100);\r\n        const valueUncertain = autoRound(omegaData.uncertain / totalAmount * 100);\r\n\r\n        return {\r\n            labels: [applicationStrings.label_nutrient_omega3[lang],\r\n                applicationStrings.label_nutrient_omega6[lang],\r\n                applicationStrings.label_unknown[lang]],\r\n            datasets: [{\r\n                data: [valueOmega3,\r\n                    valueOmega6,\r\n                    valueUncertain],\r\n                backgroundColor: [\r\n                    ChartConfig.color_lipids_omega3,\r\n                    ChartConfig.color_lipids_omega6,\r\n                    ChartConfig.color_lipids_misc,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n\r\n    }\r\n\r\n\r\n    const getLegendBaseChart = () => {\r\n        return [\r\n            {\r\n                item: applicationStrings.label_nutrient_lipids_saturated[lang],\r\n                color: ChartConfig.color_lipids_saturated,\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_lipids_unsaturated_mono[lang],\r\n                color: ChartConfig.color_lipids_unsaturated_mono\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_lipids_unsaturated_poly[lang],\r\n                color: ChartConfig.color_lipids_unsaturated_poly,\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_remainder[lang],\r\n                color: ChartConfig.color_lipids_misc\r\n            },\r\n        ];\r\n    }\r\n\r\n\r\n    const getLegendOmegaChart = () => {\r\n        return [\r\n            {\r\n                item: applicationStrings.label_nutrient_omega3[lang],\r\n                color: ChartConfig.color_lipids_omega3,\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_omega6[lang],\r\n                color: ChartConfig.color_lipids_omega6\r\n            },\r\n            {\r\n                item: applicationStrings.label_unknown[lang],\r\n                color: ChartConfig.color_lipids_misc,\r\n            },\r\n        ];\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const lipidData = getNutrientData(props.selectedFoodItem).lipidData;\r\n\r\n    let omegaDataAvailabe = false\r\n    if (lipidData.omegaData && lipidData.omegaData.uncertainRatio && lipidData.omegaData.uncertainRatio <= minimalOmegaRatio) {\r\n        omegaDataAvailabe = true\r\n    }\r\n\r\n    const chartColType = chartType === CHART_TYPE_PIE ? \"col-6\" : \"col-8\";\r\n\r\n    const getOptions = () => {\r\n        let title;\r\n\r\n        if (subChart === Constants.LIPIDS_DATA_BASE) {\r\n            title = applicationStrings.label_charttype_lipids_base_title[lang]\r\n        } else if (subChart === Constants.LIPIDS_DATA_OMEGA) {\r\n            title = applicationStrings.label_charttype_lipids_omega_title[lang];\r\n        }\r\n\r\n        if (chartType === CHART_TYPE_BAR) {\r\n            return getBarChartOptions(title, \"%\");\r\n        } else {\r\n            return getPieChartOptions(title, \"%\");\r\n        }\r\n    }\r\n\r\n    const renderChartSelector = () => {\r\n        return (\r\n            <Form>\r\n                <Form.Label>\r\n                    <b>{applicationStrings.label_datatype[languageContext.language]}:</b>\r\n                </Form.Label>\r\n                <Form.Check inline={false}\r\n                            label={applicationStrings.label_charttype_lipids_base[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.LIPIDS_DATA_BASE}\r\n                            checked={subChart === Constants.LIPIDS_DATA_BASE}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n                <Form.Check inline={false}\r\n                            label={applicationStrings.label_charttype_lipids_omega[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.LIPIDS_DATA_OMEGA}\r\n                            checked={subChart === Constants.LIPIDS_DATA_OMEGA}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n            </Form>\r\n        )\r\n    }\r\n\r\n    const renderChart = (lipidsType) => {\r\n        const {saturated, unsaturatedMono, unsaturatedPoly, omegaData} = lipidData\r\n\r\n        let data\r\n        if (lipidsType === Constants.LIPIDS_DATA_BASE) {\r\n            if (!saturated || !unsaturatedMono || !unsaturatedPoly) {\r\n                return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n            }\r\n            data = createTotalChartData(totalLipidsAmount, saturated, unsaturatedMono, unsaturatedPoly);\r\n        } else if (lipidsType === Constants.LIPIDS_DATA_OMEGA) {\r\n            if (omegaData) {\r\n                data = createOmegaChartData(totalLipidsAmount, omegaData)\r\n            }\r\n\r\n            if (!omegaData) {\r\n                return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n            }\r\n        }\r\n\r\n        if (!data) {\r\n            return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                     type=\"pie\"\r\n                />\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                     type=\"bar\"\r\n                />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    //const height = props.directCompareUse === true ? direct_compare_chartheight : default_chart_height\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"lipids container \" + containerHeight}>\r\n                <div className=\"col-3 text-align-center\">\r\n                    {renderChartSelector()}\r\n                </div>\r\n                <div className={chartColType}>\r\n                    {subChart === Constants.LIPIDS_DATA_BASE &&\r\n                    renderChart(Constants.LIPIDS_DATA_BASE)\r\n                    }\r\n                    {omegaDataAvailabe && subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    renderChart(Constants.LIPIDS_DATA_OMEGA)\r\n                    }\r\n                    {!omegaDataAvailabe && subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n                    }\r\n                </div>\r\n\r\n                {showLegend && chartType === CHART_TYPE_PIE &&\r\n                <div className=\"col-3\">\r\n                    {subChart === Constants.LIPIDS_DATA_BASE &&\r\n                    <CustomLegend legendData={getLegendBaseChart()}/>\r\n                    }\r\n                    {subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    <CustomLegend legendData={getLegendOmegaChart()}/>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n            <div className=\"row chartFormLine\">\r\n                {!props.directCompareConfig &&\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckbox}/>\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {AMOUNT_PORTION} from \"../../../config/Constants\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {determineProteinRequirementRatio} from \"../../../service/calculation/DietaryRequirementService\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\"\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../../charthelper/BarChartConfigurationForm\";\r\nimport {ProteinDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function ProteinDataChart(props: ProteinDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.proteinChartConfig\r\n            : initialChartConfigData.proteinChartConfig\r\n\r\n    const [portionType, setPortionType] = useState<string>(chartConfig.portionType)\r\n    const [expand100, setExpand100] = useState<boolean>(chartConfig.expand100)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setExpand100(chartConfig.expand100)\r\n            setPortionType(chartConfig.portionType)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [portionType, expand100, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentSetting = applicationContext.applicationData.foodDataPanel.chartConfigData.proteinChartConfig\r\n            if (expand100 !== currentSetting.expand100 || portionType !== currentSetting.portionType) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    proteinChartConfig: {\r\n                        portionType: portionType,\r\n                        expand100: expand100\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const createProteinChartData = () => {\r\n        const proteinData = getNutrientData(props.selectedFoodItem).proteinData;\r\n        if (!proteinData || !applicationContext) {\r\n            return null;\r\n        }\r\n\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.proteinRequirementData;\r\n        if (!requirementData) {\r\n            return null;\r\n        }\r\n\r\n        const userData = applicationContext.userData;\r\n        const amount = portionType === AMOUNT_PORTION ? props.selectedFoodItem.portion.amount : 100;\r\n\r\n        const labels: Array<string> = [];\r\n        const data: Array<number> = [];\r\n\r\n        if (proteinData.histidine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_histidine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.histidine, proteinData.histidine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.isoleucine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_isoleucine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.isoleucine, proteinData.isoleucine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.leucine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_leucine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.leucine, proteinData.leucine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.lysine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_lysine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.lysine, proteinData.lysine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.methionine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_methionine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.methionine, proteinData.methionine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.phenylalanine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_phenylalanine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.phenylalanine, proteinData.phenylalanine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.threonine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_threonine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.threonine, proteinData.threonine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.tryptophan !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_tryptophan[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.tryptophan, proteinData.tryptophan, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.valine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_valine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.valine, proteinData.valine, amount, userData)\r\n            )\r\n        }\r\n\r\n        if (proteinData.cystine !== null) {\r\n            labels.push(applicationStrings.label_nutrient_proteins_cystine[lang]);\r\n            data.push(determineProteinRequirementRatio(\r\n                requirementData.cystine, proteinData.cystine, amount, userData)\r\n            )\r\n        }\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_proteins\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_proteins[lang],\r\n                data: data,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        setPortionType(event.target.value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const getOptions = (title, maxValue) => {\r\n        const overallMaxValue = props.directCompareConfig && props.directCompareConfig.maxValue\r\n            ? props.directCompareConfig.maxValue\r\n            : maxValue\r\n\r\n        let maxYValue\r\n        if (!props.directCompareConfig) {\r\n            if (expand100 && overallMaxValue < 100) {\r\n                maxYValue = 100\r\n            }\r\n        } else {\r\n            if (props.directCompareConfig.maxValue) {\r\n                maxYValue = props.directCompareConfig.maxValue\r\n            }\r\n            if (expand100 === true && (maxYValue === undefined || maxYValue < 100)) {\r\n                maxYValue = 100\r\n            }\r\n        }\r\n\r\n        return getBarChartOptions(title, \"%\", maxYValue);\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const barChartProps = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps} />\r\n    }\r\n\r\n    const data = createProteinChartData();\r\n    if (!data) {\r\n        return <div/>\r\n    }\r\n\r\n    const maxValue = (data && data.datasets && data.datasets.length > 0) ? Math.max(...data.datasets[0].data) : 0;\r\n    const options = getOptions(applicationStrings.label_charttype_proteins[lang], maxValue);\r\n    const dataExists = data.datasets && data.datasets[0].data && data.datasets[0].data.length > 0\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"base chart container \" + containerHeight}>\r\n                <div className=\"col-12\">\r\n                    {dataExists &&\r\n                    <Bar\r\n                        data={data}\r\n                        key={'chart ' + chartHeight}\r\n                        height={chartHeight}\r\n                        options={options}\r\n                        type={\"bar\"}\r\n                    />\r\n                    }\r\n                    {!dataExists &&\r\n                    <p className=\"text-center\" style={{height: ChartConfig.default_chart_height}}>\r\n                        {applicationStrings.label_noData[lang]}\r\n                    </p>\r\n                    }\r\n                </div>\r\n            </div>\r\n            {props.directCompareUse !== true &&\r\n            <div className=\"row chartFormLine\">\r\n                {renderChartConfigurationForm()}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport * as Constants from \"../../../config/Constants\"\r\nimport {\r\n    CARBS_DATA_BASE,\r\n    CARBS_DATA_DETAIL,\r\n    CHART_TYPE_BAR,\r\n    CHART_TYPE_PIE,\r\n    LIPIDS_DATA_OMEGA\r\n} from \"../../../config/Constants\";\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {autoRound} from \"../../../service/calculation/MathService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {CarbDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {GeneralChartConfigDirectCompareWithSubCharts} from \"../../../types/livedata/ChartConfigData\";\r\nimport {default_chart_height, direct_compare_chartheight} from \"../../../config/ChartConfig\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function CarbsDataChart(props: CarbDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    let chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.carbsChartConfig\r\n            : initialChartConfigData.carbsChartConfig\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [subChart, setSubChart] = useState<string>(chartConfig.subChart ? chartConfig.subChart : CARBS_DATA_BASE)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setSubChart(chartConfig.subChart ? chartConfig.subChart : CARBS_DATA_BASE)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [chartType, showLegend, subChart, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData.carbsChartConfig\r\n            if (chartType !== currentConfig.chartType\r\n                || subChart !== currentConfig.subChart\r\n                || showLegend !== currentConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    carbsChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: showLegend,\r\n                        subChart: subChart\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const carbohydrateData = getNutrientData(props.selectedFoodItem).carbohydrateData;\r\n\r\n    const handleChartSelectionChange = (event: any) => {\r\n        if (applicationContext && props.directCompareConfig) {\r\n            const currentSettings = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n            const carbsChartConfig: GeneralChartConfigDirectCompareWithSubCharts = props.directCompareConfig.chartIndex === 1\r\n                ? {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    subChart1: event.target.value,\r\n                    subChart2: currentSettings.carbsChartConfig.subChart2\r\n                }\r\n                : {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    subChart1: currentSettings.carbsChartConfig.subChart1,\r\n                    subChart2: event.target.value\r\n                }\r\n\r\n            const newChartConfig = {\r\n                ...currentSettings,\r\n                carbsChartConfig: carbsChartConfig\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        } else {\r\n            setSubChart(event.target.value)\r\n        }\r\n    }\r\n\r\n    const createBasicChartData = () => {\r\n        const totalCarbsAmount = getNutrientData(props.selectedFoodItem).baseData.carbohydrates;\r\n        const dietaryFibers = getNutrientData(props.selectedFoodItem).baseData.dietaryFibers;\r\n        const sugar = carbohydrateData.sugar\r\n\r\n        if (!sugar || !dietaryFibers) {\r\n            return null\r\n        }\r\n\r\n        const valueSugar = autoRound(sugar / totalCarbsAmount * 100);\r\n        const valueDietaryFibers = autoRound(dietaryFibers / totalCarbsAmount * 100);\r\n\r\n        if (totalCarbsAmount === 0) {\r\n            return null;\r\n        }\r\n\r\n        let valueMisc = totalCarbsAmount - (sugar + dietaryFibers);\r\n        valueMisc = autoRound(valueMisc / totalCarbsAmount * 100);\r\n\r\n        if (valueMisc < 0) {\r\n            console.warn(\"Carbo hydrate value is erroneous. Food-Obj: \", props.selectedFoodItem);\r\n            valueMisc = 0;\r\n        }\r\n\r\n        return {\r\n            labels: [applicationStrings.label_nutrient_sugar[lang],\r\n                applicationStrings.label_nutrient_dietaryFibers[lang],\r\n                applicationStrings.label_nutrient_remainder[lang]\r\n            ],\r\n            datasets: [{\r\n                data: [valueSugar,\r\n                    valueDietaryFibers,\r\n                    valueMisc],\r\n                backgroundColor: [\r\n                    ChartConfig.color_chart_green_3,\r\n                    ChartConfig.color_chart_green_2,\r\n                    ChartConfig.color_chart_misc,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const createDetailChartData = () => {\r\n        const carbohydrateData = getNutrientData(props.selectedFoodItem).carbohydrateData;\r\n        const totalAmount = getNutrientData(props.selectedFoodItem).baseData.carbohydrates;\r\n\r\n        const valueGlucose = carbohydrateData.glucose !== null ? autoRound(carbohydrateData.glucose / totalAmount * 100) : null;\r\n        const valueFructose = carbohydrateData.fructose !== null ? autoRound(carbohydrateData.fructose / totalAmount * 100) : null;\r\n        const valueGalactose = carbohydrateData.galactose !== null ? autoRound(carbohydrateData.galactose / totalAmount * 100) : null;\r\n        const valueSucrose = carbohydrateData.sucrose !== null ? autoRound(carbohydrateData.sucrose / totalAmount * 100) : null;\r\n        const valueLactose = carbohydrateData.lactose !== null ? autoRound(carbohydrateData.lactose / totalAmount * 100) : null;\r\n        const valueMaltose = carbohydrateData.maltose !== null ? autoRound(carbohydrateData.maltose / totalAmount * 100) : null;\r\n        const valueStarch = carbohydrateData.starch !== null ? autoRound(carbohydrateData.starch / totalAmount * 100) : null;\r\n\r\n        if (!valueMaltose && !valueSucrose && !valueLactose && !valueGlucose && !valueFructose && !valueGalactose) {\r\n            return null\r\n        }\r\n\r\n        let valueMisc = 100\r\n        const labels: Array<String> = []\r\n        const values: Array<number> = []\r\n\r\n        if (valueGlucose) {\r\n            valueMisc -= valueGlucose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_glucose[lang])\r\n            values.push(valueGlucose)\r\n        }\r\n        if (valueFructose) {\r\n            valueMisc -= valueFructose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_fructose[lang])\r\n            values.push(valueFructose)\r\n        }\r\n        if (valueGalactose) {\r\n            valueMisc -= valueGalactose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_galactose[lang])\r\n            values.push(valueGalactose)\r\n        }\r\n        if (valueSucrose) {\r\n            valueMisc -= valueSucrose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_sucrose[lang])\r\n            values.push(valueSucrose)\r\n        }\r\n        if (valueLactose) {\r\n            valueMisc -= valueLactose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_lactose[lang])\r\n            values.push(valueLactose)\r\n        }\r\n        if (valueMaltose) {\r\n            valueMisc -= valueMaltose\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_maltose[lang])\r\n            values.push(valueMaltose)\r\n        }\r\n        if (valueStarch) {\r\n            valueMisc -= valueStarch\r\n            labels.push(applicationStrings.label_nutrient_carbohydrates_starch[lang])\r\n            values.push(valueStarch)\r\n        }\r\n\r\n        valueMisc = autoRound(valueMisc);\r\n        labels.push(applicationStrings.label_nutrient_remainder[lang])\r\n        values.push(valueMisc)\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                data: values,\r\n                backgroundColor: [\r\n                    ChartConfig.color_chart_green_1,\r\n                    ChartConfig.color_chart_green_2,\r\n                    ChartConfig.color_chart_green_3,\r\n                    ChartConfig.color_chart_yellow_1,\r\n                    ChartConfig.color_chart_yellow_2,\r\n                    ChartConfig.color_chart_yellow_3,\r\n                    ChartConfig.color_chart_orange,\r\n                    ChartConfig.color_chart_misc\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const getLegendBaseChart = (labels: Array<String>) => {\r\n        const legendData: Array<any> = []\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_sugar[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_sugar[lang],\r\n                color: ChartConfig.color_chart_green_3,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_dietaryFibers[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_dietaryFibers[lang],\r\n                color: ChartConfig.color_chart_green_2,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_remainder[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_remainder[lang],\r\n                color: ChartConfig.color_chart_misc,\r\n            })\r\n        }\r\n\r\n        return legendData;\r\n    }\r\n\r\n\r\n    const getLegendDetailsChart = (labels: Array<String>) => {\r\n        const legendData: Array<any> = []\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_glucose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_glucose[lang],\r\n                color: ChartConfig.color_chart_green_1,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_fructose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_fructose[lang],\r\n                color: ChartConfig.color_chart_green_2,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_galactose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_galactose[lang],\r\n                color: ChartConfig.color_chart_green_3,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_sucrose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_sucrose[lang],\r\n                color: ChartConfig.color_chart_yellow_1,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_lactose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_lactose[lang],\r\n                color: ChartConfig.color_chart_yellow_2,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_maltose[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_maltose[lang],\r\n                color: ChartConfig.color_chart_yellow_3,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_carbohydrates_starch[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_carbohydrates_starch[lang],\r\n                color: ChartConfig.color_chart_orange,\r\n            })\r\n        }\r\n\r\n        if (labels.includes(applicationStrings.label_nutrient_remainder[lang])) {\r\n            legendData.push({\r\n                item: applicationStrings.label_nutrient_remainder[lang],\r\n                color: ChartConfig.color_chart_misc,\r\n            })\r\n        }\r\n\r\n        return legendData;\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const getOptions = () => {\r\n        let title;\r\n\r\n        if (subChart === Constants.CARBS_DATA_BASE) {\r\n            title = applicationStrings.label_charttype_carbs_base[lang];\r\n        } else if (subChart === Constants.CARBS_DATA_DETAIL) {\r\n            title = applicationStrings.label_charttype_carbs_detail[lang];\r\n        }\r\n\r\n        if (chartType === CHART_TYPE_BAR) {\r\n            return getBarChartOptions(title, \"%\");\r\n        } else {\r\n            return getPieChartOptions(title, \"%\");\r\n        }\r\n    }\r\n\r\n\r\n    const renderChartSelector = () => {\r\n        return (\r\n            <Form>\r\n                <Form.Label>\r\n                    <b>{applicationStrings.label_datatype[lang]}:</b>\r\n                </Form.Label>\r\n                <Form.Check inline={false}\r\n                            label={applicationStrings.label_charttype_carbs_base[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.CARBS_DATA_BASE}\r\n                            checked={subChart === Constants.CARBS_DATA_BASE}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n                <Form.Check inline={false}\r\n                            label={applicationStrings.label_charttype_carbs_detail[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.CARBS_DATA_DETAIL}\r\n                            checked={subChart === Constants.CARBS_DATA_DETAIL}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n            </Form>\r\n        )\r\n    }\r\n\r\n\r\n    const renderChart = (data: any) => {\r\n        if (!data) {\r\n            return (\r\n                <div style={{height: ChartConfig.default_chart_height}}>\r\n                    {applicationStrings.label_noData[lang]}\r\n                </div>\r\n            )\r\n        }\r\n\r\n        const height = props.directCompareUse ? ChartConfig.direct_compare_chartheight : ChartConfig.default_chart_height\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                     type=\"pie\"\r\n                />\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                     type={\"bar\"}\r\n                />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const chartColType = chartType === CHART_TYPE_PIE ? \"col-6\" : \"col-8\";\r\n    const detailChartData = createDetailChartData()\r\n    const basicChartData = createBasicChartData()\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"carbs container \" + containerHeight}>\r\n                <div className=\"col-3\" style={{display: \"block\"}}>\r\n                    {renderChartSelector()}\r\n                </div>\r\n                <div className={chartColType}>\r\n                    {subChart === Constants.CARBS_DATA_BASE &&\r\n                    renderChart(basicChartData)\r\n                    }\r\n                    {detailChartData && subChart === Constants.CARBS_DATA_DETAIL &&\r\n                    renderChart(detailChartData)\r\n                    }\r\n                    {!detailChartData && subChart === Constants.CARBS_DATA_DETAIL &&\r\n                    <div style={{height: ChartConfig.default_chart_height}}>\r\n                        {applicationStrings.label_noData[lang]}\r\n                    </div>\r\n                    }\r\n                </div>\r\n\r\n                {showLegend && chartType === Constants.CHART_TYPE_PIE &&\r\n                <div className=\"col-3\">\r\n                    {subChart === Constants.CARBS_DATA_BASE && basicChartData &&\r\n                    <CustomLegend legendData={getLegendBaseChart(basicChartData.labels)}/>\r\n                    }\r\n                    {subChart === Constants.CARBS_DATA_DETAIL && detailChartData &&\r\n                    <CustomLegend legendData={getLegendDetailsChart(detailChartData.labels)}/>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareConfig &&\r\n            <div className=\"row chartFormLine\">\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckbox}/>\r\n\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n\r\n}","import BaseDataChart from \"./charts/BaseDataChart\";\r\nimport EnergyDataChart from \"./charts/EnergyDataChart\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport MineralVitaminChart from \"./charts/MineralVitaminChart\";\r\nimport LipidsDataChart from \"./charts/LipidsDataChart\";\r\nimport ProteinDataChart from \"./charts/ProteinDataChart\";\r\nimport CarbsDataChart from \"./charts/CarbsDataChart\";\r\nimport {ChartPanelProps} from \"../../types/livedata/ChartPropsData\";\r\n\r\nexport function ChartPanel(props: ChartPanelProps) {\r\n\r\n        let chart = <div>Nothing to show</div>;\r\n        if(props.selectedDataTab === TAB_BASE_DATA) {\r\n            chart = <BaseDataChart selectedFoodItem={props.selectedFoodItem} />\r\n        } else if(props.selectedDataTab === TAB_ENERGY_DATA) {\r\n            chart = <EnergyDataChart selectedFoodItem={props.selectedFoodItem} />\r\n        } else if(props.selectedDataTab === TAB_VITAMIN_DATA) {\r\n            chart = <MineralVitaminChart selectedFoodItem={props.selectedFoodItem} selectedSubChart={CHART_VITAMINS} />\r\n        } else if(props.selectedDataTab === TAB_MINERAL_DATA) {\r\n            chart = <MineralVitaminChart selectedFoodItem={props.selectedFoodItem} selectedSubChart={CHART_MINERALS} />\r\n        } else if(props.selectedDataTab === TAB_LIPIDS_DATA) {\r\n            chart = <LipidsDataChart selectedFoodItem={props.selectedFoodItem}  />\r\n        } else if(props.selectedDataTab === TAB_CARBS_DATA) {\r\n            chart = <CarbsDataChart selectedFoodItem={props.selectedFoodItem}  />\r\n        } else if(props.selectedDataTab === TAB_PROTEINS_DATA) {\r\n            chart = <ProteinDataChart selectedFoodItem={props.selectedFoodItem}  />\r\n        }\r\n\r\n        return(\r\n            <div style={{paddingTop: \"24px\"}}>\r\n                {chart}\r\n            </div>\r\n        )\r\n}","import FoodItem from \"../../types/nutrientdata/FoodItem\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {minimal_table_height} from \"../../config/ChartConfig\";\r\nimport 'react-bootstrap-table/dist/react-bootstrap-table-all.min.css';\r\nimport {defaultPanelHeight} from \"../../config/ApplicationSetting\";\r\n\r\ninterface FoodDataTableProps {\r\n    tableData: Array<FoodTableDataObject>\r\n}\r\n\r\nexport function FoodDataTable(props: FoodDataTableProps) {\r\n    const dataExists = props.tableData && props.tableData.length > 0;\r\n    const language = useContext(LanguageContext)\r\n\r\n    return(\r\n        <div style={{height: \"418px\", margin: \"25px\", overflowY: \"auto\" }}>\r\n            {dataExists &&\r\n            <BootstrapTable className=\"table-sm\" data={props.tableData} striped hover>\r\n                <TableHeaderColumn isKey dataField='label'>Element</TableHeaderColumn>\r\n                <TableHeaderColumn dataField='value_100g'>per 100 g</TableHeaderColumn>\r\n                <TableHeaderColumn dataField='value_portion'>per Portion</TableHeaderColumn>\r\n            </BootstrapTable>\r\n            }\r\n            {!dataExists &&\r\n            <div className=\"text-center\">{applicationStrings.label_noData[language.language]}</div>\r\n            }\r\n        </div>\r\n    );\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport SelectedFoodItem from \"../../../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {getNameFromFoodNameList} from \"../../../service/nutrientdata/NameTypeService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport getName from \"../../../service/LanguageService\";\r\nimport {defaultPanelHeight, mobileAppPath} from \"../../../config/ApplicationSetting\";\r\nimport {direct_compare_chartheight} from \"../../../config/ChartConfig\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {TAB_BASE_DATA} from \"../../../config/Constants\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData, getSourceName} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {Button} from \"react-bootstrap\";\r\n\r\ninterface InfoDataProps {\r\n    selectedFoodItem: SelectedFoodItem,\r\n    directCompare?: boolean\r\n}\r\n\r\ninterface RowElement {\r\n    key: string,\r\n    value: string\r\n}\r\n\r\nexport function InfoData(props: InfoDataProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const windowSize = useWindowDimension()\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, props.directCompare))\r\n\r\n    useEffect(() => {\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, props.directCompare))\r\n    }, [containerHeight])\r\n\r\n    const createRow = (key, value): RowElement => {\r\n        return {\r\n            key: key,\r\n            value: value\r\n        }\r\n    }\r\n\r\n    const getGeneralTableData = (): Array<RowElement> => {\r\n        if (!applicationContext) {\r\n            return []\r\n        }\r\n\r\n        const foodNameId = props.selectedFoodItem.foodItem.nameId\r\n        const foodName = foodNameId ? getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, foodNameId, lang) : ''\r\n\r\n        const foodClass = props.selectedFoodItem.foodClass;\r\n        const foodClassNameId = foodClass ? foodClass.nameKey : null\r\n\r\n        const sourceName = getSourceName(props.selectedFoodItem.selectedSource)\r\n        const sourceItemId = getNutrientData(props.selectedFoodItem).sourceItemId\r\n\r\n        const source = `United States Department of Agriculture (USDA)`;\r\n        const sourceLine2 = `${sourceName}, ID = ${sourceItemId}`;\r\n        const foodClassName = foodClassNameId ? getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, foodClassNameId, lang) : null;\r\n\r\n        const categoryId = foodClass ? foodClass.category : null\r\n        const category = categoryId ? applicationContext.foodDataCorpus.categories.find(category => category.id === categoryId) : null\r\n        const categoryName = category ? getName(category, lang) : null;\r\n\r\n        const conditionId = props.selectedFoodItem.foodItem.conditionId\r\n        const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === conditionId)\r\n        const conditionName = condition ? getName(condition, lang) : null;\r\n\r\n        const tableDataGeneral: Array<RowElement> = [];\r\n\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodName[lang]}:`, foodName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_preparation[lang]}:`, conditionName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodId[lang]}:`, props.selectedFoodItem.foodItem.id)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodClass[lang]}:`, foodClassName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_category[lang]}:`, categoryName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_source[lang]}:`, source)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(\"\", sourceLine2)\r\n        );\r\n\r\n        return tableDataGeneral;\r\n    }\r\n\r\n    const getTableDataPortion = () => {\r\n        const foodPortion = props.selectedFoodItem.portion;\r\n        const portionValue = `${foodPortion.amount} g`;\r\n\r\n        const portionObject = applicationContext?.foodDataCorpus.portionTypes.find(portion => portion.id === foodPortion.portionType)\r\n        if (portionObject) {\r\n            const portionName = foodPortion.portionType !== 0 ? getName(portionObject, lang) : applicationStrings.portion_individual[lang];\r\n            const tableDataPortion: Array<RowElement> = [];\r\n\r\n            tableDataPortion.push(\r\n                createRow(`${applicationStrings.label_info_portionType[lang]}:`, portionName)\r\n            );\r\n\r\n            tableDataPortion.push(\r\n                createRow(`${applicationStrings.label_portion[lang]}:`, portionValue)\r\n            );\r\n\r\n            return tableDataPortion\r\n        }\r\n\r\n\r\n        return [];\r\n    }\r\n\r\n\r\n    const getTableDataCombinedFood = () => {\r\n        // const individualList = props.foodItem.individualData;\r\n        // const tableData = [];\r\n        //\r\n        // for(let i=0; i < individualList.length; i++) {\r\n        //     tableData.push(\r\n        //         createRow(`${individualList[i].name}:`, `${individualList[i].portion} g`)\r\n        //     );\r\n        // }\r\n        //\r\n        // return tableData;\r\n    }\r\n\r\n\r\n    const renderSubTable = (data) => {\r\n        return (\r\n            <div>\r\n                <BootstrapTable bordered={false} data={data}>\r\n                    <TableHeaderColumn className=\"tableHeaderClass\" dataField='key' isKey width=\"200px\"/>\r\n                    <TableHeaderColumn className=\"tableHeaderClass\" dataField='value'/>\r\n                </BootstrapTable>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const onLinkClick = () => {\r\n        const sourceItemId = getNutrientData(props.selectedFoodItem).sourceItemId\r\n        const usdaLink = `https://fdc.nal.usda.gov/fdc-app.html#/food-details/${sourceItemId}/nutrients`\r\n\r\n        const link = window.open(usdaLink, '_blank')\r\n        if (link) {\r\n            link.focus()\r\n        } else {\r\n            window.location.href = usdaLink\r\n        }\r\n    }\r\n\r\n\r\n    let height = containerHeight\r\n    if(!props.directCompare) {\r\n        height += 86\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div style={{height: height, maxHeight: height, overflowY: \"auto\", padding: \"15px\"}}>\r\n                {props.selectedFoodItem.foodItem.foodClass !== 0 &&\r\n                <div>\r\n                    <div>\r\n                        {renderSubTable(getGeneralTableData())}\r\n                    </div>\r\n                    <div style={{paddingTop: \"30px\"}}>\r\n                        <h5>{applicationStrings.label_info_portion[lang]}</h5>\r\n                        {renderSubTable(getTableDataPortion())}\r\n                    </div>\r\n                </div>\r\n                }\r\n                {props.selectedFoodItem.foodItem.foodClass === 0 &&\r\n                <div>\r\n                    <h5>Individual</h5>\r\n                    {renderSubTable(getTableDataCombinedFood())}\r\n                </div>\r\n                }\r\n\r\n                <div style={{paddingTop: \"20px\", paddingBottom: \"12px\"}}>\r\n                    <Button variant={'link'} active={true} onClick={onLinkClick}>\r\n                        See the nutrient data at USDA\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n\r\n}","import {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {DISPLAYMODE_CHART, DISPLAYMODE_TABLE, TAB_INFO} from \"../../config/Constants\";\r\nimport {ChartPanel} from \"./ChartPanel\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {FoodDataTable} from \"./FoodDataTable\";\r\nimport {InfoData} from \"./charts/InfoData\";\r\n\r\ninterface FoodDataPageBodyProps {\r\n    tableData: Array<FoodTableDataObject>\r\n    displayMode: string\r\n    selectedDataTab: string\r\n    selectedFoodItem: SelectedFoodItem\r\n}\r\n\r\nexport default function FoodDataPageBody(props: FoodDataPageBodyProps) {\r\n\r\n    const renderDataPage = () => {\r\n        return (\r\n            <div>\r\n                {props.displayMode === DISPLAYMODE_TABLE &&\r\n                <div className=\"col\">\r\n                    <FoodDataTable tableData={props.tableData}/>\r\n                </div>\r\n                }\r\n                {props.displayMode === DISPLAYMODE_CHART &&\r\n                <div className=\"col\">\r\n                    <ChartPanel selectedFoodItem={props.selectedFoodItem} selectedDataTab={props.selectedDataTab}/>\r\n                </div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={\"form-main\"} style={{maxWidth: \"1200px\", minWidth: \"850px\"}}>\r\n            {props.selectedDataTab === TAB_INFO &&\r\n            <InfoData selectedFoodItem={props.selectedFoodItem}/>\r\n            }\r\n            {props.selectedDataTab !== TAB_INFO &&\r\n            renderDataPage()\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {ReactElement, useContext} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {HelpText} from \"../service/HelpService\";\r\n\r\ninterface HelpModalProps {\r\n    helpText: HelpText\r\n    closeHelpModal: () => void\r\n}\r\n\r\nexport function HelpModal(props: HelpModalProps): ReactElement {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if (!props.helpText) {\r\n        return (<div>No data available.</div>);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"modal\" style={{display: \"block\"}} role=\"dialog\">\r\n            <div className=\"modal-dialog\" role=\"document\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\">{props.helpText.title}</h5>\r\n                        <button type=\"button\"\r\n                                className=\"btn-close\"\r\n                                data-dismiss=\"modal\"\r\n                                aria-label=\"Close\"\r\n                                onClick={props.closeHelpModal}>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <span dangerouslySetInnerHTML={{__html: props.helpText.content}}/>\r\n                    </div>\r\n                    <div className=\"modal-footer\">\r\n                        <button type=\"button\"\r\n                                className=\"btn btn-primary\"\r\n                                onClick={props.closeHelpModal}>\r\n                            {applicationStrings.button_close[languageContext.language]}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import {getHelpText, HelpText} from \"../../service/HelpService\";\r\nimport {HelpModal} from \"../HelpModal\";\r\nimport {Button, ButtonGroup} from \"react-bootstrap\";\r\nimport {\r\n    TAB_BASE_DATA, TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA, TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA, TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\ninterface ChartMenuPanelProps {\r\n    dataPage: string\r\n    setDataPage: (id: string) => void\r\n    verticalArrangement: boolean\r\n}\r\n\r\nexport function ChartMenuPanel(props: ChartMenuPanelProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    const handlePageButtonClick = (value: string) => {\r\n        props.setDataPage(value)\r\n    }\r\n\r\n    const variant = \"link\"\r\n\r\n    const makeButtonLabel = (buttonText): JSX.Element => {\r\n        const className = props.verticalArrangement === true ? \"float-start\" : \"\"\r\n        return <span className={className}>{buttonText}</span>\r\n    }\r\n\r\n    return (\r\n        <div className={\"d-flex\"}>\r\n            <ButtonGroup vertical={props.verticalArrangement}>\r\n                <Button className=\"btn btn-link header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_BASE_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_BASE_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_overview[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn btn-link header-link header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_ENERGY_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_ENERGY_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_energy[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn btn-link header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_VITAMIN_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_VITAMIN_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_vit[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn btn-link page-head-button header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_MINERAL_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_MINERAL_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_min[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn btn-link page-head-button header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_LIPIDS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_LIPIDS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_lipids[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn btn-link page-head-button header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_CARBS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_CARBS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_carbohydrates[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn btn-link page-head-button header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_PROTEINS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_PROTEINS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_proteins[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn btn-link page-head-button header-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_INFO)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_INFO}>\r\n                    {makeButtonLabel(applicationStrings.label_info[languageContext.language])}\r\n                </Button>\r\n            </ButtonGroup>\r\n        </div>\r\n    );\r\n\r\n}","import {useContext, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {FaChartBar, FaQuestionCircle, FaThList, FaTimes} from \"react-icons/all\";\r\nimport {\r\n    DISPLAYMODE_CHART,\r\n    DISPLAYMODE_TABLE, PATH_FOODDATA_PANEL, SOURCE_SRLEGACY,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodDataPageBody from \"./FoodDataPageBody\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {HelpModal} from \"../HelpModal\";\r\nimport {getHelpText, HelpText} from \"../../service/HelpService\";\r\nimport getName from \"../../service/LanguageService\";\r\nimport {ChartMenuPanel} from \"./ChartMenuPanel\";\r\nimport {getSourceName} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {useHistory} from 'react-router-dom';\r\n\r\n\r\ninterface FoodDataPageHeaderProps {\r\n    displayMode: string\r\n    setDisplayMode: (id: string) => void\r\n    dataPage: string\r\n    setDataPage: (id: string) => void\r\n    selectedFoodItem: SelectedFoodItem\r\n    tableData: Array<FoodTableDataObject>\r\n}\r\n\r\nexport default function FoodDataPageHeader(props: FoodDataPageHeaderProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\tconst history = useHistory()\r\n\r\n    const [helpModalId, setHelpModalId] = useState<number>(0)\r\n\r\n    if (applicationContext === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleRadioButtonClick = (value: string) => {\r\n        props.setDisplayMode(value)\r\n    }\r\n\r\n    const closeTab = () => {\r\n        const id = (props.selectedFoodItem.foodItem.id)\r\n\t\tconst remainingItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length - 1\r\n\r\n        applicationContext.setFoodDataPanelData.removeItemFromFoodDataPanel(id)\r\n\r\n\t\tif(remainingItems === 0) {\r\n\t\t\thistory.push({pathName: PATH_FOODDATA_PANEL})\r\n\t\t}\t\t\r\n    }\r\n\r\n    const help = () => {\r\n        switch (props.dataPage) {\r\n            case TAB_BASE_DATA:\r\n                setHelpModalId(1)\r\n                return;\r\n            case TAB_ENERGY_DATA:\r\n                setHelpModalId(2)\r\n                return;\r\n            case TAB_VITAMIN_DATA:\r\n                setHelpModalId(3)\r\n                return;\r\n            case TAB_MINERAL_DATA:\r\n                setHelpModalId(4)\r\n                return;\r\n            case TAB_LIPIDS_DATA:\r\n                setHelpModalId(5)\r\n                return;\r\n            case TAB_INFO:\r\n                setHelpModalId(6)\r\n                return;\r\n            case TAB_CARBS_DATA:\r\n                setHelpModalId(7)\r\n                return;\r\n            case TAB_PROTEINS_DATA:\r\n                setHelpModalId(8)\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    const enabledDisplayButtonClasses = \"btn button-displaymode-enabled\"\r\n    const disabledDisplayButtonClasses = \"btn button-displaymode-disabled\"\r\n\r\n    const chartButtonClasses = props.displayMode === DISPLAYMODE_CHART ? enabledDisplayButtonClasses\r\n        : disabledDisplayButtonClasses;\r\n\r\n    const tablesButtonClasses = props.displayMode === DISPLAYMODE_TABLE ? enabledDisplayButtonClasses\r\n        : disabledDisplayButtonClasses;\r\n\r\n    const foodNamesList = applicationContext.foodDataCorpus.foodNames;\r\n\r\n\r\n    let foodName\r\n    if (props.selectedFoodItem.foodItem.nameId) {\r\n        foodName = getNameFromFoodNameList(foodNamesList, props.selectedFoodItem.foodItem.nameId, languageContext.language)\r\n    } else {\r\n        foodName = 'Individual'\r\n    }\r\n\r\n    let fullName\r\n    const portionSize = props.selectedFoodItem.portion.amount\r\n\r\n    if (!props.selectedFoodItem.foodItem.aggregated) {\r\n        const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === props.selectedFoodItem.foodItem.conditionId)\r\n        const conditionName = condition ? getName(condition, languageContext.language) : \"\"\r\n        fullName = `${foodName} (${conditionName}, ${portionSize} g)`\r\n    } else {\r\n        fullName = `${foodName} (${portionSize} g)`\r\n    }\r\n\r\n    const helpText: HelpText | null = helpModalId > 0 ? getHelpText(helpModalId, languageContext.language) : null\r\n    const sourceString = getSourceName(props.selectedFoodItem.selectedSource)\r\n\r\n    return (\r\n        <div style={{paddingBottom: \"6px\"}}>\r\n            {helpText !== null &&\r\n            <HelpModal helpText={helpText} closeHelpModal={() => setHelpModalId(0)}></HelpModal>\r\n            }\r\n            <div className={\"row d-flex flex-nowrap\"}>\r\n                <div className=\"col-md-2 col-sm-3\">\r\n                    <div className={\"card\"}>\r\n                        <div className=\"card-body\" style={{paddingRight: \"16px\"}}>\r\n                            <ChartMenuPanel dataPage={props.dataPage} verticalArrangement={true} setDataPage={props.setDataPage}/>\r\n                            <div className={\"d-flex card\"} style={{marginTop: \"24px\", backgroundColor: \"#eeeeee\"}}>\r\n                                <div className={\"text-center\"} style={{fontSize: \"0.8em\"}}>\r\n                                    {sourceString}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={\"col\"}>\r\n                    <div className=\"row d-flex flex-nowrap\" style={{marginTop: \"10px\"}}>\r\n                        <div className=\"col-md-8\" style={{paddingTop: \"6px\", paddingLeft: \"32px\"}}>\r\n                            <div style={{borderBottom: \"1px solid #BBBBBB\", paddingLeft: \"12px\"}}>\r\n                                <b>{fullName}</b>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-auto\">\r\n                            <div style={{width: \"200px\", padding: \"0px !important\", margin: \"0px !important\"}}>\r\n                                <div className=\"btn-group\" role=\"group\">\r\n                                    <Button className={chartButtonClasses}\r\n                                            onClick={() => handleRadioButtonClick(DISPLAYMODE_CHART)}\r\n                                            active={props.displayMode === DISPLAYMODE_CHART}\r\n                                            data-tip={applicationStrings.tooltip_icon_charts[languageContext.language]}>\r\n                                        <ReactTooltip/>\r\n                                        <FaChartBar/>\r\n                                    </Button>\r\n                                    <Button className={tablesButtonClasses}\r\n                                            onClick={() => handleRadioButtonClick(DISPLAYMODE_TABLE)}\r\n                                            active={props.displayMode === DISPLAYMODE_TABLE}\r\n                                            data-tip={applicationStrings.tooltip_icon_table[languageContext.language]}>\r\n                                        <FaThList/>\r\n                                    </Button>\r\n                                </div>\r\n\r\n                                <div className=\"btn-group\" role=\"group\" style={{paddingLeft: \"24px\"}}>\r\n                                    <Button className={\"btn-primary button-foodPanelHead\"}\r\n                                            onClick={help}\r\n                                            active={props.displayMode === DISPLAYMODE_CHART}>\r\n                                        <ReactTooltip/>\r\n                                        <FaQuestionCircle/>\r\n                                    </Button>\r\n                                    <Button className={\"button-closeTab\"}\r\n                                            onClick={closeTab}\r\n                                            data-tip={applicationStrings.tooltip_icon_close[languageContext.language]}>\r\n                                        <ReactTooltip/>\r\n                                        <FaTimes/>\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <FoodDataPageBody selectedFoodItem={props.selectedFoodItem}\r\n                                      tableData={props.tableData}\r\n                                      displayMode={props.displayMode}\r\n                                      selectedDataTab={props.dataPage}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import {LANGUAGE_EN} from \"../config/Constants\";\r\n\r\nexport interface HelpText {\r\n    title: string,\r\n    content: string\r\n}\r\n\r\nexport function getHelpText(helpModalId: number, languageId: string): HelpText | null {\r\n    const helpFile = require(\"../static/help/help.json\");\r\n\r\n    let helpEntry = 0;\r\n    const entry = helpFile.entries.find( (entry) => entry.id === helpModalId);\r\n\r\n    if(entry) {\r\n        const languageSection = languageId === LANGUAGE_EN ? entry.en : entry.de;\r\n        const title = languageSection.title;\r\n        const contentArray = languageSection.content;\r\n\r\n        let content = \"\";\r\n        for(let i=0; i < contentArray.length; i++) {\r\n            content += contentArray[i];\r\n            if(i < (contentArray.length-1)) {\r\n                content += \"<br />\"\r\n            }\r\n        }\r\n\r\n        return {\r\n            title: title,\r\n            content: content\r\n        };\r\n    }\r\n\r\n    return null\r\n}","import * as MathService from './calculation/MathService';\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {FoodTableDataObject} from \"../types/livedata/SelectedFoodItemData\";\r\nimport {getNutrientData} from \"./nutrientdata/NutrientDataRetriever\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\n\r\nexport function createBaseDataTable(selectedFoodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const {water, carbohydrates, lipids, proteins, dietaryFibers, ash} = getNutrientData(selectedFoodItem).baseData\r\n    const {sugar}  = getNutrientData(selectedFoodItem).carbohydrateData\r\n\r\n    if(water) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_water[language],\r\n            water,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(carbohydrates) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates[language],\r\n            carbohydrates,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(sugar) {\r\n        tableData.push(createTableObject(\r\n            `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_sugar[language]}`,\r\n            sugar,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(dietaryFibers) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_dietaryFibers[language],\r\n            dietaryFibers,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(lipids) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids[language],\r\n            lipids,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteins) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins[language],\r\n            proteins,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(ash) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_ash[language],\r\n            ash,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\n\r\nexport function createVitaminTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n    const nutrientData = getNutrientData(foodItem)\r\n    \r\n    if(nutrientData.vitaminData.a != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_a[language],\r\n            nutrientData.vitaminData.a,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b1 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b1[language],\r\n            nutrientData.vitaminData.b1,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b2 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b2[language],\r\n            nutrientData.vitaminData.b2,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b3 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b3[language],\r\n            nutrientData.vitaminData.b3,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b5 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b5[language],\r\n            nutrientData.vitaminData.b5,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b6 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b6[language],\r\n            nutrientData.vitaminData.b6,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b9 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b9[language],\r\n            nutrientData.vitaminData.b9,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.b12 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b12[language],\r\n            nutrientData.vitaminData.b12,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.c != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_c[language],\r\n            nutrientData.vitaminData.c,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.d != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_d[language],\r\n            nutrientData.vitaminData.d,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.e != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_e[language],\r\n            nutrientData.vitaminData.e,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(nutrientData.vitaminData.k != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_k[language],\r\n            nutrientData.vitaminData.k,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createMineralTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n\r\n    if(firstNutrientData.mineralData.calcium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_calcium[language],\r\n            firstNutrientData.mineralData.calcium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.iron != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_iron[language],\r\n            firstNutrientData.mineralData.iron,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.magnesium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_magnesium[language],\r\n            firstNutrientData.mineralData.magnesium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.phosphorus != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_phosphorus[language],\r\n            firstNutrientData.mineralData.phosphorus,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.potassium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_potassimum[language],\r\n            firstNutrientData.mineralData.potassium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.sodium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_sodium[language],\r\n            firstNutrientData.mineralData.sodium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.zinc != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_zinc[language],\r\n            firstNutrientData.mineralData.zinc,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.copper != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_copper[language],\r\n            firstNutrientData.mineralData.copper,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.manganese != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_manganese[language],\r\n            firstNutrientData.mineralData.manganese,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.mineralData.selenium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_selenium[language],\r\n            firstNutrientData.mineralData.selenium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createLipidsTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n\r\n    if(firstNutrientData.lipidData.saturated != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_saturated[language],\r\n            firstNutrientData.lipidData.saturated,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.lipidData.unsaturatedMono != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_unsaturated_mono[language],\r\n            firstNutrientData.lipidData.unsaturatedMono,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.lipidData.unsaturatedPoly != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_unsaturated_poly[language],\r\n            firstNutrientData.lipidData.unsaturatedPoly,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.lipidData.omegaData) {\r\n        if(firstNutrientData.lipidData.omegaData.omega3 != null) {\r\n            tableData.push(createTableObject(\r\n                `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_lipids_omega3[language]}`,\r\n                firstNutrientData.lipidData.omegaData.omega3,\r\n                portion, \"g\")\r\n            );\r\n        }\r\n\r\n        if(firstNutrientData.lipidData.omegaData.omega6 != null) {\r\n            tableData.push(createTableObject(\r\n                `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_lipids_omega6[language]}`,\r\n                firstNutrientData.lipidData.omegaData.omega6,\r\n                portion, \"g\")\r\n            );\r\n        }\r\n    }\r\n\r\n    if(firstNutrientData.lipidData.transFattyAcids != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_transfattyAcids[language],\r\n            firstNutrientData.lipidData.transFattyAcids,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.lipidData.cholesterol != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_cholesterol[language],\r\n            firstNutrientData.lipidData.cholesterol,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createEnergyTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n\r\n    const nutrientData = getNutrientData(foodItem)\r\n    const energy = nutrientData.baseData.energy !== null ? nutrientData.baseData.energy : 0;\r\n\r\n    tableData.push(createTableObject(\r\n        \"kcal\",\r\n        energy,\r\n        portion, \"\")\r\n    );\r\n\r\n    tableData.push(createTableObject(\r\n        \"kJ\",\r\n        MathService.round(4.186 * energy, 1),\r\n        portion, \"\")\r\n    );\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\n\r\nexport function createCarbsTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n\r\n    tableData.push(createTableObject(\r\n        applicationStrings.label_nutrient_carbohydrates[language],\r\n        firstNutrientData.baseData.carbohydrates,\r\n        portion, \"g\")\r\n    );\r\n\r\n    if(firstNutrientData.carbohydrateData.sugar != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_sugar[language],\r\n            firstNutrientData.carbohydrateData.sugar,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.baseData.dietaryFibers != null) {\r\n        tableData.push(createTableObject(\r\n            `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_dietaryFibers[language]}`,\r\n            firstNutrientData.baseData.dietaryFibers,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.glucose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_glucose[language],\r\n            firstNutrientData.carbohydrateData.glucose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.fructose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_fructose[language],\r\n            firstNutrientData.carbohydrateData.fructose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.galactose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_galactose[language],\r\n            firstNutrientData.carbohydrateData.galactose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.sucrose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_sucrose[language],\r\n            firstNutrientData.carbohydrateData.sucrose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.lactose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_lactose[language],\r\n            firstNutrientData.carbohydrateData.lactose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.maltose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_maltose[language],\r\n            firstNutrientData.carbohydrateData.maltose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(firstNutrientData.carbohydrateData.starch != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_starch[language],\r\n            firstNutrientData.carbohydrateData.starch,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\n\r\nexport function createProteinTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject>  = [];\r\n\r\n    const proteinData = getNutrientData(foodItem).proteinData;\r\n    if(!proteinData) {\r\n        return tableData;\r\n    }\r\n\r\n    if(proteinData.tryptophan != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_tryptophan[language],\r\n            proteinData.tryptophan,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.threonine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_threonine[language],\r\n            proteinData.threonine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.isoleucine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_isoleucine[language],\r\n            proteinData.isoleucine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.leucine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_leucine[language],\r\n            proteinData.leucine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.lysine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_lysine[language],\r\n            proteinData.lysine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.methionine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_methionine[language],\r\n            proteinData.methionine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.cystine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_cystine[language],\r\n            proteinData.cystine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.phenylalanine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_phenylalanine[language],\r\n            proteinData.phenylalanine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.tyrosine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_tyrosine[language],\r\n            proteinData.tyrosine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.valine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_valine[language],\r\n            proteinData.valine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.arginine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_arginine[language],\r\n            proteinData.arginine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.histidine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_histidine[language],\r\n            proteinData.histidine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.alanine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_alanine[language],\r\n            proteinData.alanine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.asparticAcid != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_asparticAcid[language],\r\n            proteinData.asparticAcid,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.glutamicAcid != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_glutamicAcid[language],\r\n            proteinData.glutamicAcid,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.glycine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_glysine[language],\r\n            proteinData.glycine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.proline != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_proline[language],\r\n            proteinData.proline,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if(proteinData.serine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_serine[language],\r\n            proteinData.serine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nfunction createTableObject(label: string, value_100g: number, portion: number, unit: String): FoodTableDataObject {\r\n    const valuePortion = calculatePortionData(value_100g, portion);\r\n    return {\r\n        label: label,\r\n        value_100g: `${MathService.autoRound(value_100g)} ${unit}`,\r\n        value_portion: `${MathService.autoRound(valuePortion)} ${unit}`\r\n    }\r\n}\r\n\r\n\r\nfunction calculatePortionData(value: number | null, portionSize: number) {\r\n    if(value === null || value === undefined) {\r\n        return \"n/a\";\r\n    } else if(value === 0) {\r\n        return 0;\r\n    }\r\n    return (value / 100) * portionSize;\r\n}","import SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport FoodDataPageHeader from \"./FoodDataPageHeader\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {\r\n    DISPLAYMODE_CHART, SOURCE_SRLEGACY,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {\r\n    createBaseDataTable,\r\n    createCarbsTable,\r\n    createEnergyTable,\r\n    createLipidsTable,\r\n    createMineralTable,\r\n    createProteinTable,\r\n    createVitaminTable\r\n} from \"../../service/TableService\";\r\n\r\ninterface FoodDataPageProps {\r\n    selectedFoodItem: SelectedFoodItem,\r\n\tdataPage?: string\r\n}\r\n\r\nexport default function FoodDataPage(props: FoodDataPageProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n\t\t\tconst selectedDataTab = props.dataPage ? props.dataPage : applicationContext \r\n\t\t\t\t\t\t\t\t? applicationContext.applicationData.foodDataPanel.selectedDataPage \r\n\t\t\t\t\t\t\t\t: TAB_BASE_DATA\r\n\r\n    const [displayMode, setDisplayMode] = useState<string>(DISPLAYMODE_CHART)\r\n    const [tableData, setTableData] = useState<Array<FoodTableDataObject>>([])\r\n\tconst [dataPage, setDataPage] = useState<string>(selectedDataTab)\r\n\r\n    const updatePage = () => {   // Central update method when any (radio) button was clicked\r\n        let tableDataList: Array<FoodTableDataObject> = [];\r\n        const {portion} = props.selectedFoodItem\r\n\r\n        const preferredSource = applicationContext ? applicationContext.applicationData.preferredSource : SOURCE_SRLEGACY\r\n\r\n        if (selectedDataTab === TAB_BASE_DATA) {\r\n            tableDataList = createBaseDataTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_ENERGY_DATA) {\r\n            tableDataList = createEnergyTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_VITAMIN_DATA) {\r\n            tableDataList = createVitaminTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_MINERAL_DATA) {\r\n            tableDataList = createMineralTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_LIPIDS_DATA) {\r\n            tableDataList = createLipidsTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_CARBS_DATA) {\r\n            tableDataList = createCarbsTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_PROTEINS_DATA) {\r\n            tableDataList = createProteinTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        }\r\n\r\n        setTableData(tableDataList)\r\n    }\r\n\r\n    useEffect(() => {\r\n        updatePage()\r\n    }, [displayMode, \r\n\t\tprops.selectedFoodItem, \r\n\t\tapplicationContext?.applicationData.preferredSource, \r\n\t\tapplicationContext?.applicationData.foodDataPanel.selectedDataPage,\r\n\t\tapplicationContext?.userData]\r\n\t)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onNewDataPage = (datapage: string) => {\r\n        applicationContext.setFoodDataPanelData.setSelectedDataPage(datapage)\r\n\t\tsetDataPage(datapage)\r\n        updatePage()\r\n    }\r\n\r\n    const onDisplayModeChange = (newMode: string) => {\r\n        setDisplayMode(newMode)\r\n        updatePage()\r\n    }\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('FoodDataPage: Render, tabledata = ', tableData)\r\n    }\r\n\r\n    return <div>\r\n        <FoodDataPageHeader displayMode={displayMode}\r\n                            setDisplayMode={onDisplayModeChange}\r\n                            dataPage={dataPage}\r\n                            setDataPage={onNewDataPage}\r\n                            selectedFoodItem={props.selectedFoodItem}\r\n                            tableData={tableData}\r\n        />\r\n    </div>\r\n\r\n}","import NameType from \"../types/nutrientdata/NameType\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {getNameFromFoodNameList} from \"./nutrientdata/NameTypeService\";\r\nimport FoodDataPage from \"../components/fooddatapanel/FoodDataPage\";\r\nimport React from \"react\";\r\nimport FoodClass from \"../types/nutrientdata/FoodClass\";\r\nimport FoodItem from \"../types/nutrientdata/FoodItem\";\r\nimport {PORTION_KEY_100} from \"../config/Constants\";\r\n\r\n/**\r\n * Enriches a selected food item by its JSX container to be displayed as a tab in the food data panel\r\n * @param selectedFoodItem The already initialized selected food item\r\n * @param foodNamesList The food names list\r\n * @param language The selected language\r\n */\r\nexport function makeFoodDataPanelComponent(selectedFoodItem: SelectedFoodItem, foodNamesList: Array<NameType>, \r\n\t\tlanguage: string, dataPage?: string): SelectedFoodItem | null {\r\n    let foodName\r\n    if(selectedFoodItem.foodItem.nameId) {\r\n        foodName = getNameFromFoodNameList(foodNamesList, selectedFoodItem.foodItem.nameId, language)\r\n    } else {\r\n        foodName = 'Individual'\r\n    }\r\n\r\n    if (foodName === null) {\r\n        console.error('No food name available.')\r\n        return null\r\n    }\r\n\r\n    selectedFoodItem.component = <FoodDataPage key={`page component ${selectedFoodItem.id}`} selectedFoodItem={selectedFoodItem} dataPage={dataPage}/>\r\n    selectedFoodItem.tab = foodName\r\n    selectedFoodItem.id = selectedFoodItem.foodItem.id\r\n\r\n    return selectedFoodItem\r\n}\r\n","import React, {useContext, useState} from 'react'\r\nimport {Button} from 'react-bootstrap'\r\n\r\nimport FoodSelectorModal from '../foodselector/FoodSelectorModal'\r\nimport {FaLayerGroup, FaPlusSquare, FaTrash} from \"react-icons/all\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {confirmAction} from \"../ConfirmationDialog\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {PATH_FOODDATA_PANEL} from '../../config/Constants';\r\nimport {makeFoodDataPanelComponent} from \"../../service/FoodDataPanelService\";\r\n\r\ninterface FoodAnalyzerContainerProps {\r\n    openSelectorModal?: boolean\r\n    onNewFoodItemSelected: () => void\r\n}\r\n\r\nexport default function FoodAnalyzerContainer(props: FoodAnalyzerContainerProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\tconst history = useHistory()\r\n\r\n    const [showFoodSelector, setShowFoodSelector] = useState<Boolean>(props.openSelectorModal && props.openSelectorModal === true ? true : false)\r\n    const [showFoodAggregatedFoodSelector, setShowAggregatedFoodSelector] = useState<Boolean>(false)\r\n\r\n    if(!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onHide = (): void => {\r\n        setShowFoodSelector(false)\r\n        setShowAggregatedFoodSelector(false)\r\n    }\r\n\r\n    const onSelectFoodItemSubmit = (selectedFoodItem: SelectedFoodItem): void => {\r\n        if (applicationContext === null) {\r\n            return\r\n        }\r\n\r\n        const selectedFoodItemWithComponent = makeFoodDataPanelComponent(\r\n            selectedFoodItem, applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n        if(selectedFoodItemWithComponent !== null) {\r\n            applicationContext.setFoodDataPanelData.addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n        }\r\n\r\n        if (applicationContext?.debug) {\r\n            console.log('FoodAnalyzerContainer: Set new selected item and execute callback. Selected item = ', selectedFoodItemWithComponent)\r\n        }\r\n\r\n        props.onNewFoodItemSelected()\r\n    }\r\n\r\n    const onCloseAllTabs = async () => {\r\n        if (await confirmAction(\r\n            applicationStrings.confirm_close_all_tabs[languageContext.language],\r\n            applicationStrings.button_yes[languageContext.language],\r\n            applicationStrings.button_no[languageContext.language],\r\n            {}\r\n        )) {\r\n            applicationContext?.setFoodDataPanelData.removeAllItemsFromFoodDataPanel()\r\n\t\t\thistory.push({pathName: PATH_FOODDATA_PANEL})\r\n        }\r\n    }\r\n\r\n    if (applicationContext?.debug) {\r\n        console.log('FoodAnalyzerContainer: Render')\r\n    }\r\n\r\n    const selectedFoodItems = applicationContext?.applicationData.foodDataPanel.selectedFoodItems\r\n    const deleteIconEnabled = selectedFoodItems && selectedFoodItems.length > 0\r\n\r\n    ReactTooltip.rebuild()\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                {showFoodSelector &&\r\n                <FoodSelectorModal onHide={onHide} selectedFoodItemCallback={onSelectFoodItemSubmit} compositeSelector={false}/>\r\n                }\r\n                { showFoodAggregatedFoodSelector &&\r\n                <FoodSelectorModal onHide={onHide} selectedFoodItemCallback={onSelectFoodItemSubmit} compositeSelector={true}/>\r\n                }\r\n                <div className={\"text-center\"} style={{paddingTop: \"16px\"}}>\r\n                    <Button onClick={() => setShowFoodSelector(!showFoodSelector)}\r\n                            className={\"btn\"}\r\n                            style={{marginRight: \"12px\"}}\r\n                            data-tip={applicationStrings.tooltip_icon_newFoodItem[languageContext.language]}>\r\n                        <FaPlusSquare/>\r\n                    </Button>\r\n                    <Button onClick={() => setShowAggregatedFoodSelector(!showFoodAggregatedFoodSelector)}\r\n                            className={\"btn\"}\r\n                            style={{marginRight: \"12px\"}}\r\n                            data-tip={applicationStrings.tooltip_icon_newFoodItemStack[languageContext.language]}>\r\n                        <FaLayerGroup/>\r\n                    </Button>\r\n                    <Button onClick={() => onCloseAllTabs()}\r\n                            disabled={deleteIconEnabled === false}\r\n                            data-tip={applicationStrings.tooltip_icon_removeAll[languageContext.language]}>\r\n                        <FaTrash/>\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport CloseableTabs from 'react-closeable-tabs';\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\ninterface TabContainerProps {\r\n    onTabChange: (id: number) => void\r\n    indexToSet: number\r\n}\r\n\r\n// Origin: Vinus Online\r\nexport default function TabContainer(props: TabContainerProps) {\r\n    const applicationData = useContext(ApplicationDataContextStore)\r\n\r\n    const style = {\r\n        buttonTab: {\r\n            border: \"border border-secondary\",\r\n            background: \"none\",\r\n            display: \"inline-flex\",\r\n            verticalAlign: \"middle\",\r\n            minHeight: \"30px\",\r\n            alignItems: \"center\",\r\n            cursor: \"pointer\",\r\n            marginTop: \"-12px\",\r\n            borderBottom: \"2px solid transparent\"\r\n        }\r\n    }\r\n\r\n    if(applicationData?.debug) {\r\n        console.log('TabContainer: Render, food panel data = ', applicationData.applicationData.foodDataPanel.selectedFoodItems)\r\n    }\r\n\r\n    if (!applicationData || !applicationData.applicationData.foodDataPanel.selectedFoodItems) {\r\n        return <div/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <CloseableTabs\r\n                data={applicationData.applicationData.foodDataPanel.selectedFoodItems}\r\n                tabPanelClass=\"tab-panel\"\r\n                tabContentClass=\"tab-content mainPanel\"\r\n                style={style}\r\n                onTabClick={(id) => props.onTabChange(id)}\r\n                activeIndex={applicationData.applicationData.foodDataPanel.selectedFoodItemIndex}\r\n            />\r\n        </div>\r\n    )\r\n}","import { AMOUNT_PORTION, CARBS_DATA_BASE, CARBS_DATA_DETAIL, CHART_TYPE_BAR, CHART_TYPE_PIE, GRAM, LIPIDS_DATA_BASE, LIPIDS_DATA_OMEGA, TAB_BASE_DATA, TAB_CARBS_DATA, TAB_LIPIDS_DATA, TAB_MINERAL_DATA, TAB_PROTEINS_DATA, TAB_VITAMIN_DATA } from \"../../config/Constants\"\r\nimport { ChartConfigData, DirectCompareChartConfigData, GeneralizedChartConfig } from \"../../types/livedata/ChartConfigData\"\r\nimport { convertBooleanToDigit, convertStringToBoolean } from \"../calculation/MathService\"\r\n\r\n/**\r\n * Converts/encodes a food data panel chart config sub-element into the corresponding URI query string.\r\n */\r\nexport function makeChartConfigUriString(chartConfigData: ChartConfigData | DirectCompareChartConfigData, selectedDataPage: string): string {\r\n\tlet chartObject: any\r\n\tswitch(selectedDataPage) {\r\n\t\tcase TAB_BASE_DATA:\r\n\t\t\tchartObject = chartConfigData.baseChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_LIPIDS_DATA:\r\n\t\t\tchartObject = chartConfigData.lipidsChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_CARBS_DATA:\r\n\t\t\tchartObject = chartConfigData.carbsChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_VITAMIN_DATA:\r\n\t\t\tchartObject = chartConfigData.vitaminChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_MINERAL_DATA:\r\n\t\t\tchartObject = chartConfigData.mineralChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_PROTEINS_DATA:\r\n\t\t\tchartObject = chartConfigData.proteinChartConfig\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tchartObject = {}\r\n\t}\r\n\t\r\n\tconst generalizedChartConfig = makeGeneralizedChartConfig(chartObject)\r\n\treturn convertGeneralizedChartConfigToString(generalizedChartConfig)\r\n}\r\n\r\n\r\n/**\r\n * Converts/decodes a URI query string to get the encoded chart config data of the currently selected data page\r\n * in the food data panel.\r\n * The resulting chart config will be added to the existing chart configuration data object passed to this method.\r\n */\r\nexport function getUpdatedChartConfig(chartConfigData: ChartConfigData, chartConfigUriString: string, selectedDataPage: string): ChartConfigData {\r\n\tconst chartConfigFromUri = convertGeneralizedChartConfigStringToObject(chartConfigUriString)\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart} = chartConfigFromUri\r\n\t\r\n\tif(selectedDataPage === TAB_BASE_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || showDetails === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, baseChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tshowDetails: showDetails\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_LIPIDS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, lipidsChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart: subChart\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_CARBS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, carbsChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart: subChart\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage === TAB_MINERAL_DATA || selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\tif(portionType === undefined || expand100 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\tconst barChartConfig = {\r\n\t\t\t\tportionType: portionType,\r\n\t\t\t\texpand100: expand100,\r\n\t\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_VITAMIN_DATA) {\r\n\t\t\treturn {...chartConfigData, vitaminChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_MINERAL_DATA) {\r\n\t\t\treturn {...chartConfigData, mineralChartConfig: barChartConfig}\r\n\t\t}\r\n\t\t\r\n\t\tif(selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\t\treturn {...chartConfigData, proteinChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\treturn chartConfigData\r\n}\r\n\r\n\r\nexport function getUpdatedDirectCompareChartConfig(chartConfigData: DirectCompareChartConfigData, \r\n\t\tchartConfigUriString: string, selectedDataPage: string): DirectCompareChartConfigData {\r\n\tconst chartConfigFromUri = convertGeneralizedChartConfigStringToObject(chartConfigUriString)\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart, subChart2, synchronize} = chartConfigFromUri\r\n\t\r\n\tif(selectedDataPage === TAB_BASE_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || showDetails === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, baseChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tshowDetails: showDetails\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_LIPIDS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined || subChart2 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, lipidsChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart1: subChart,\r\n\t\t\t\tsubChart2: subChart2\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_CARBS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined || subChart2 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, carbsChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart1: subChart,\r\n\t\t\t\tsubChart2: subChart2\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage === TAB_MINERAL_DATA || selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\tif(portionType === undefined || expand100 === undefined || synchronize === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\tconst barChartConfig = {\r\n\t\t\t\tportionType: portionType,\r\n\t\t\t\texpand100: expand100,\r\n\t\t\t\tsynchronize: synchronize\r\n\t\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_VITAMIN_DATA) {\r\n\t\t\treturn {...chartConfigData, vitaminChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_MINERAL_DATA) {\r\n\t\t\treturn {...chartConfigData, mineralChartConfig: barChartConfig}\r\n\t\t}\r\n\t\t\r\n\t\tif(selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\t\treturn {...chartConfigData, proteinChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\treturn chartConfigData\r\n}\r\n\r\n\r\n\r\nexport function makeGeneralizedChartConfig(chartObject: any): GeneralizedChartConfig {\r\n\tconst generalizedChartObject: GeneralizedChartConfig = {}\r\n\tif(chartObject.chartType) {\r\n\t\tgeneralizedChartObject.chartType = chartObject.chartType\r\n\t}\r\n\t\r\n\tif(chartObject.expand100) {\r\n\t\tgeneralizedChartObject.expand100 = chartObject.expand100\r\n\t}\r\n\t\r\n\tif(chartObject.showDetails) {\r\n\t\tgeneralizedChartObject.showDetails = chartObject.showDetails\r\n\t}\r\n\t\r\n\tif(chartObject.showLegend) {\r\n\t\tgeneralizedChartObject.showLegend = chartObject.showLegend\r\n\t}\r\n\t\r\n\tif(chartObject.portionType) {\r\n\t\tgeneralizedChartObject.portionType = chartObject.portionType\r\n\t}\r\n\r\n\tif(chartObject.subChart) {\r\n\t\tgeneralizedChartObject.subChart = chartObject.subChart\r\n\t}\r\n\t\r\n\tif(chartObject.subChart2) {\r\n\t\tgeneralizedChartObject.subChart2 = chartObject.subChart2\r\n\t}\r\n\t\r\n\tif(chartObject.synchronize) {\r\n\t\tgeneralizedChartObject.synchronize = chartObject.synchronize\r\n\t}\r\n\t\r\n\treturn generalizedChartObject\r\n}\r\n\r\n\r\nexport function convertGeneralizedChartConfigToString(chartObject: GeneralizedChartConfig) {\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart, subChart2, synchronize} = chartObject\r\n\t\r\n\tconst chartTypeKey = chartType === undefined || chartType === null ? 0 : chartType === CHART_TYPE_PIE ? 1 : 2\r\n\tconst portionTypeKey = portionType === undefined || portionType === null ? 0 : portionType === AMOUNT_PORTION ? 1 : 2\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\tconst expand100Key = expand100 ? convertBooleanToDigit(expand100) : 0\r\n\tconst showLegendKey = showLegend ? convertBooleanToDigit(showLegend) : 0\r\n\tconst showDetailsKey = showDetails ? convertBooleanToDigit(showDetails) : 0\r\n\t\r\n\tconst subChartKey = subChart ? getSubChartKey(subChart) : 0\r\n\tconst subChartKey2 = subChart2 ? getSubChartKey(subChart2) : 0\r\n\tconst synchronizeKey = synchronize ? convertBooleanToDigit(synchronize) : 0\r\n\t\r\n\treturn `${chartTypeKey}${portionTypeKey}${expand100Key}${showLegendKey}${showDetailsKey}${subChartKey}${subChartKey2}${synchronizeKey}`\r\n}\r\n\r\n\r\nexport function convertGeneralizedChartConfigStringToObject(uriString: string): GeneralizedChartConfig {\r\n\tif(!uriString) {\r\n\t\treturn {}\r\n\t}\r\n\t\r\n\tconst stringToParse = uriString.trim()\r\n\tif(stringToParse.length !== 8) {\r\n\t\treturn {}\r\n\t}\r\n\t\r\n\tconst chartTypeKey = stringToParse.substring(0, 1)\r\n\tconst portionTypeKey = stringToParse.substring(1, 2)\r\n\tconst expand100Key = stringToParse.substring(2, 3)\r\n\tconst showLegendKey = stringToParse.substring(3, 4)\r\n\tconst showDetailsKey = stringToParse.substring(4, 5)\r\n\tconst subChartKey = stringToParse.substring(5, 6)\r\n\tconst subChartKey2 = stringToParse.substring(6, 7)\r\n\tconst synchronizeKey = stringToParse.substring(7, 8)\r\n\t\r\n\tconst chartTypeNumber = parseInt(chartTypeKey)\r\n\tconst portionTypeNumber = parseInt(portionTypeKey)\r\n\tconst subChartNumber = parseInt(subChartKey)\r\n\tconst subChartNumber2 = parseInt(subChartKey2)\r\n\t\t\r\n\tconst chartType = chartTypeNumber === 0 || isNaN(chartTypeNumber) \r\n\t\t\t\t\t\t? undefined \r\n\t\t\t\t\t\t: chartTypeNumber === 1 ? CHART_TYPE_PIE : CHART_TYPE_BAR\r\n\t\t\t\t\t\t\r\n\tconst portionType = portionTypeNumber === 0 || isNaN(portionTypeNumber) \r\n\t\t\t\t\t\t? undefined \r\n\t\t\t\t\t\t: portionTypeNumber === 1 ? AMOUNT_PORTION : GRAM\r\n\t\r\n\tconst subChart = subChartNumber === 0 || isNaN(subChartNumber) ? undefined : getSubChartFromKey(subChartNumber)\r\n\tconst subChart2 = subChartNumber2 === 0 || isNaN(subChartNumber2) ? undefined : getSubChartFromKey(subChartNumber2)\r\n\t\r\n\treturn {\r\n\t\tchartType: chartType,\r\n\t\tportionType: portionType,\r\n\t\texpand100: convertStringToBoolean(expand100Key),\r\n\t\tshowLegend: convertStringToBoolean(showLegendKey),\r\n\t\tshowDetails: convertStringToBoolean(showDetailsKey),\r\n\t\tsubChart: subChart ? subChart : undefined,\r\n\t\tsubChart2: subChart2 ? subChart2 : undefined,\r\n\t\tsynchronize: convertStringToBoolean(synchronizeKey)\r\n\t}\r\n\t\r\n}\r\n\r\n\r\nexport function getSubChartKey(subChart: string): number {\r\n\tswitch(subChart) {\r\n\t\tcase CARBS_DATA_BASE:\r\n\t\t\treturn 1\r\n\t\tcase CARBS_DATA_DETAIL:\r\n\t\t\treturn 2\r\n\t\tcase LIPIDS_DATA_BASE:\r\n\t\t\treturn 3\r\n\t\tcase LIPIDS_DATA_OMEGA:\r\n\t\t\treturn 4\r\n\t\tdefault:\r\n\t\t\treturn 0\r\n\t}\r\n}\r\n\r\nexport function getSubChartFromKey(key: number): string | null {\r\n\tswitch(key) {\r\n\t\tcase 1:\r\n\t\t\treturn CARBS_DATA_BASE\r\n\t\tcase 2:\r\n\t\t\treturn CARBS_DATA_DETAIL\r\n\t\tcase 3:\r\n\t\t\treturn LIPIDS_DATA_BASE\r\n\t\tcase 4:\r\n\t\t\treturn LIPIDS_DATA_OMEGA\r\n\t\tdefault:\r\n\t\t\treturn null\r\n\t}\t\t\r\n}\r\n","import {PATH_FOODDATA_PANEL, PATH_FOODDATA_PANEL_ADD, SEX_FEMALE, SEX_MALE} from \"../../config/Constants\"\r\nimport { ChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport { FoodDataPanelUriBaseData, FoodItemUriData, SimpleFoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { PortionData } from \"../../types/nutrientdata/FoodItem\"\r\nimport { getPalCategory, getPalValue } from \"./../calculation/EnergyService\"\r\nimport { convertBooleanToDigit, convertStringToBoolean, getNumberOfFixedLength } from \"./../calculation/MathService\"\r\nimport { convertGeneralizedChartConfigStringToObject, getUpdatedChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\n\r\n\r\nexport function makeFoodDataPanelDefaultUri(foodItemData: FoodItemUriData,\r\n\t\tuserData: UserData, selectedDataPage: string, chartConfigData: ChartConfigData) {\r\n\tconst foodItemDataString = makeFoodItemDefaultUri(foodItemData)\r\n\tconst userDataString = convertUserDataObjectToString(userData)\r\n\tconst chartConfigString = makeChartConfigUriString(chartConfigData, selectedDataPage)\r\n\treturn `${foodItemDataString};${selectedDataPage};${userDataString};${chartConfigString}`\r\n}\r\n\r\nexport function makeFoodItemDefaultUri(foodItemData: FoodItemUriData) {\r\n\t\tconst portionString = convertPortionDataObjectToString(foodItemData.portionData)\t\r\n\t\tconst supplementValue = convertBooleanToDigit(foodItemData.supplementData)\r\n\t\tconst combineValue = convertBooleanToDigit(foodItemData.combineData)\r\n\t\t\r\n\t\treturn `${foodItemData.foodItemId};${foodItemData.source};${portionString};${supplementValue}${combineValue}`\r\n}\r\n\r\nexport function parseFoodDataPanelDefaultUri(uri: string, chartConfigData: ChartConfigData): SimpleFoodItemUriData | null {\r\n\tconst fragments = prepareUriForParsing(uri).split(\";\")\r\n\tif(fragments.length !== 7) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst selectedDataPage = fragments[4]\r\n\tconst userData = convertUserDataStringToObject(fragments[5])\r\n\tconst chartConfigString = fragments[6]\r\n\tconst foodItemUriData = getFoodItemUriData(fragments)\r\n\t\r\n\tif(!userData || !foodItemUriData) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst newChartConfigData = getUpdatedChartConfig(chartConfigData, chartConfigString, selectedDataPage)\r\n\t\r\n\treturn {\r\n\t\tselectedFoodItem: foodItemUriData,\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Retrieves the food item uri data from a fragments string. It will always extract those\r\n * data objects from the beginning of the array, no matter how long it is.\r\n */\r\nexport function getFoodItemUriData(fragments: Array<string>): FoodItemUriData | null {\r\n\tconst foodItemId = parseInt(fragments[0])\r\n\tconst source = parseInt(fragments[1])\r\n\tconst portionData = convertPortionDataStringToObject(fragments[2])\r\n\tconst booleanData = fragments[3]\r\n\t\r\n\tconst supplementData = convertStringToBoolean(booleanData.substring(0,1))\r\n\tconst combineData = convertStringToBoolean(booleanData.substring(1,2))\r\n\t\r\n\tif(!portionData || booleanData.length < 2) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\treturn {\r\n\t\tfoodItemId: foodItemId,\r\n\t\tsource: source,\r\n\t\tportionData: portionData,\r\n\t\tsupplementData: supplementData,\r\n\t\tcombineData: combineData\r\n\t}\r\n}\r\n\r\nexport function convertUserDataObjectToString(userData: UserData): string {\r\n\tconst weight = getNumberOfFixedLength(userData.weight, 3)\r\n\tconst age = getNumberOfFixedLength(userData.age, 3)\r\n\tconst size = getNumberOfFixedLength(userData.size, 3)\r\n\r\n\tconst palValue = getNumberOfFixedLength( getPalCategory(userData.palValue), 2)\r\n\tconst sex = userData.sex === SEX_MALE ? 1 : 0\r\n\t\r\n\tconst pregnant = convertBooleanToDigit(userData.pregnant)\r\n\tconst breastFeeding = convertBooleanToDigit(userData.breastFeeding)\r\n\tconst leisureSports = convertBooleanToDigit(userData.leisureSports)\r\n\t\t\r\n\treturn `${weight}${age}${size}${palValue}${sex}${pregnant}${breastFeeding}${leisureSports}`\r\n}\r\n\r\n\r\nexport function convertUserDataStringToObject(userDataString: string): UserData | null {\r\n\tif(userDataString.length < 15) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst weight = userDataString.substring(0,3)\r\n\tconst age = userDataString.substring(3,6)\r\n\tconst size = userDataString.substring(6,9)\r\n\tconst palValueInt = userDataString.substring(9,11)\r\n\tconst sex = userDataString.substring(11,12)\r\n\tconst pregnant = userDataString.substring(12,13)\r\n\tconst breastFeeding = userDataString.substring(13,14)\r\n\tconst leisureSports = userDataString.substring(14,15)\r\n\t\r\n\tconst palValue = getPalValue(parseInt(palValueInt))\r\n\t\r\n\treturn {\r\n\t\tweight: parseInt(weight),\r\n\t\tage: parseInt(age),\r\n\t\tsize: parseInt(size),\r\n\t\tpalValue: palValue,\r\n\t\tsex: sex === \"1\" ? SEX_MALE : SEX_FEMALE,\r\n\t\tpregnant: convertStringToBoolean(pregnant),\r\n\t\tbreastFeeding: convertStringToBoolean(breastFeeding),\r\n\t\tleisureSports: convertStringToBoolean(leisureSports),\r\n\t\tinitialValues: false\r\n\t}\r\n}\r\n\r\n\r\nexport function convertPortionDataObjectToString(portionData: PortionData): string {\r\n\treturn `${portionData.portionType}_${portionData.amount}`\r\n}\r\n\r\nexport function convertPortionDataStringToObject(portionDataString: string): PortionData | null {\r\n\tconst fragments = portionDataString.split(\"_\")\r\n\tif(fragments.length !== 2) {\r\n\t\treturn null\r\n\t}\r\n\treturn {\r\n\t\tportionType: parseInt(fragments[0]),\r\n\t\tamount: parseInt(fragments[1])\r\n\t}\r\n}\r\n\r\n\r\nexport function prepareUriForParsing(uri: string): string {\r\n\t// Some websites like youtube transform the semicolons in the URL to %3B, which later need to be translated back to semicolons\r\n\tlet preparedUri = uri.replace(/%3B/g, \";\")\r\n\r\n\t// Never call the add page from a URI, as we don't want the selector modal to automatically open here\r\n\tif(preparedUri.includes(PATH_FOODDATA_PANEL_ADD)) {\r\n\t\tpreparedUri = preparedUri.replace(PATH_FOODDATA_PANEL_ADD, PATH_FOODDATA_PANEL)\r\n\t}\r\n\r\n\treturn preparedUri\r\n}\r\n\r\n","import { ChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\"\r\nimport { AggregatedFoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { getUpdatedChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\nimport {\r\n\tconvertUserDataObjectToString,\r\n\tconvertUserDataStringToObject,\r\n\tprepareUriForParsing\r\n} from \"./FoodDataPanelUriService\"\r\n\r\n\r\ninterface Replacemet {\r\n\tkey: string\r\n\tshort: string\r\n}\r\n\r\nconst separator = \"++\"\r\n\r\nconst metaDataReplacement: Array<Replacemet> = [\r\n\t{key: \"nutrientDataList\", short: \"_mA\"},\r\n\t{key: \"foodItem\", short: \"_mB\"},\r\n\t{key: \"sourceItemId\", short: \"_mC\"},\r\n\t{key: \"source\", short: \"_mD\"},\r\n\t{key: \"url\", short: \"_mE\"},\r\n\t{key: \"name\", short: \"_mF\"},\r\n\t{key: \"id\", short: \"_mG\"},\r\n]\r\n\t\r\nconst nutrientCategoryReplacement: Array<Replacemet> = [\r\n\t{key: \"baseData\", short: \"_nA\"},\r\n\t{key: \"carbohydrateData\", short: \"_nB\"},\r\n\t{key: \"vitaminData\", short: \"_nC\"},\r\n\t{key: \"mineralData\", short: \"_nD\"},\r\n\t{key: \"lipidData\", short: \"_nE\"},\r\n\t{key: \"proteinData\", short: \"_nF\"},\r\n]\r\n\r\nconst baseDataReplacements: Array<Replacemet> = [\r\n\t{key: \"energy\", short: \"_bA\"},\r\n\t{key: \"water\", short: \"_bB\"},\r\n\t{key: \"carbohydrates\", short: \"_bC\"},\r\n\t{key: \"lipids\", short: \"_bD\"},\r\n\t{key: \"proteins\", short: \"_bE\"},\r\n\t{key: \"dietaryFibers\", short: \"_bF\"},\r\n\t{key: \"ash\", short: \"_bG\"},\r\n\t{key: \"alcohol\", short: \"_bH\"}\r\n]\r\n\r\nconst carbsDataReplacements: Array<Replacemet> = [\r\n\t{key: \"sugar\", short: \"_cA\"},\r\n\t{key: \"sucrose\", short: \"_cB\"},\r\n\t{key: \"glucose\", short: \"_cC\"},\r\n\t{key: \"lactose\", short: \"_cD\"},\r\n\t{key: \"fructose\", short: \"_cE\"},\r\n\t{key: \"galactose\", short: \"_cF\"},\r\n\t{key: \"maltose\", short: \"_cG\"},\r\n\t{key: \"starch\", short: \"_cH\"}\r\n]\r\n\r\nconst lipidsDataReplacements: Array<Replacemet> = [\r\n\t{key: \"saturated\", short: \"_lA\"},\r\n\t{key: \"unsaturatedMono\", short: \"_lB\"},\r\n\t{key: \"unsaturatedPoly\", short: \"_lC\"},\r\n\t{key: \"transFattyAcids\", short: \"_lD\"},\r\n\t{key: \"cholesterol\", short: \"_lE\"},\r\n\t{key: \"galactose\", short: \"_lF\"},\r\n\t{key: \"omegaData\", short: \"_lG\"},\r\n\t{key: \"omega3\", short: \"_lH\"},\r\n\t{key: \"omega6\", short: \"_li\"},\r\n\t{key: \"uncertain\", short: \"_lj\"},\r\n\t{key: \"uncertainRatio\", short: \"_li\"}\r\n]\r\n\r\nconst mineralDataReplacement: Array<Replacemet> = [\r\n\t{key: \"calcium\", short: \"_bA\"},\r\n\t{key: \"iron\", short: \"_bB\"},\r\n\t{key: \"magnesium\", short: \"_bC\"},\r\n\t{key: \"phosphorus\", short: \"_bD\"},\r\n\t{key: \"potassium\", short: \"_bE\"},\r\n\t{key: \"sodium\", short: \"_bF\"},\r\n\t{key: \"zinc\", short: \"_bG\"},\r\n\t{key: \"selenium\", short: \"_bH\"},\r\n\t{key: \"manganese\", short: \"_bI\"},\r\n\t{key: \"copper\", short: \"_bJ\"}\r\n]\r\n\r\nconst vitaminDataReplacement: Array<Replacemet> = [\r\n\t{key: \"a\", short: \"_vA\"},\r\n\t{key: \"b1\", short: \"_vB\"},\r\n\t{key: \"b2\", short: \"_vC\"},\r\n\t{key: \"b3\", short: \"_vD\"},\r\n\t{key: \"b5\", short: \"_vE\"},\r\n\t{key: \"b7\", short: \"_vF\"},\r\n\t{key: \"b9\", short: \"_vG\"},\r\n\t{key: \"b12\", short: \"_vH\"},\r\n\t{key: \"c\", short: \"_vI\"},\r\n\t{key: \"d\", short: \"_vJ\"},\r\n\t{key: \"e\", short: \"_vK\"},\r\n\t{key: \"k\", short: \"_vL\"}\r\n]\r\n\r\nconst proteinDataReplacement: Array<Replacemet> = [\r\n\t{key: \"tryptophan\", short: \"_bA\"},\r\n\t{key: \"threonine\", short: \"_bB\"},\r\n\t{key: \"isoleucine\", short: \"_bC\"},\r\n\t{key: \"leucine\", short: \"_bD\"},\r\n\t{key: \"lysine\", short: \"_bE\"},\r\n\t{key: \"methionine\", short: \"_bF\"},\r\n\t{key: \"cystine\", short: \"_bG\"},\r\n\t{key: \"phenylalanine\", short: \"_bH\"},\r\n\t{key: \"tyrosine\", short: \"_bI\"},\r\n\t{key: \"arginine\", short: \"_bJ\"},\r\n\t{key: \"histidine\", short: \"_bK\"},\r\n\t{key: \"alanine\", short: \"_bL\"},\r\n\t{key: \"asparticAcid\", short: \"_bM\"},\r\n\t{key: \"glycine\", short: \"_bN\"},\r\n\t{key: \"proline\", short: \"_bO\"},\r\n\t{key: \"serine\", short: \"_bP\"},\r\n]\r\n\r\nconst replacements: Array<Array<Replacemet>> = [\r\n\tmetaDataReplacement,\r\n\tnutrientCategoryReplacement,\r\n\tbaseDataReplacements,\r\n\tcarbsDataReplacements,\r\n\tlipidsDataReplacements,\r\n\tmineralDataReplacement,\r\n\tvitaminDataReplacement,\r\n\tproteinDataReplacement\r\n]\r\n\r\n\r\nexport function convertAggregatedDataJsonToUriString(uriData: AggregatedFoodItemUriData): string {\t\r\n\tconst objectToParse: SelectedFoodItem = {...uriData.selectedFoodItem, compositeSubElements: undefined, component: undefined, foodClass: undefined}\r\n\tlet selectedFoodItemString = JSON.stringify(objectToParse)\r\n\t\r\n\treplacements.forEach(replacementArray => {\r\n\t\treplacementArray.forEach(replacement => selectedFoodItemString = selectedFoodItemString.replace(`\"${replacement.key}\"`, replacement.short))\r\n\t})\r\n\t\r\n\tconst userDataString = convertUserDataObjectToString(uriData.userData)\r\n\tconst chartConfigString = makeChartConfigUriString(uriData.chartConfigData, uriData.selectedDataPage)\r\n\t\r\n\treturn `${uriData.selectedDataPage}${separator}${selectedFoodItemString}${separator}${userDataString}${separator}${chartConfigString}`\r\n}\r\n\r\nexport function convertAggregatedUriStringToObject(chartConfigData: ChartConfigData, uriString: string): AggregatedFoodItemUriData | null {\r\n\tconst fragments = uriString.split(separator)\r\n\tif(fragments.length !== 4) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\tconst selectedDataPage = fragments[0]\r\n\tlet selectedFoodItem: SelectedFoodItem = convertUriStringToSelectedFoodItem( fragments[1])\r\n\tselectedFoodItem = {...selectedFoodItem, aggregated: true}\r\n\t\r\n\tconst userData: UserData | null = convertUserDataStringToObject(fragments[2])\r\n\tconst newChartConfigData: ChartConfigData = getUpdatedChartConfig(chartConfigData, fragments[3], selectedDataPage)\r\n\t\r\n\tif(!userData) {\r\n\t\treturn null\r\n\t}\r\n\t\t\r\n\treturn {\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tselectedFoodItem: selectedFoodItem,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n}\r\n\r\n\r\nexport function convertUriStringToSelectedFoodItem(uriString: string): SelectedFoodItem {\r\n\tlet stringToParse = prepareUriForParsing(uriString).trim()\r\n\tstringToParse = stringToParse.replace(/%22/g, \"\\\"\")\r\n\tstringToParse = stringToParse.replace(/%20/g, \" \")\r\n\t\r\n\treplacements.forEach(replacementArray => {\r\n\t\treplacementArray.forEach(replacement => stringToParse = stringToParse.replace(replacement.short, `\"${replacement.key}\"`))\r\n\t})\r\n\t\r\n\treturn JSON.parse(stringToParse)\r\n}","import { UserData } from \"../types/livedata/UserData\";\r\n\r\nexport const USERDATA_ERROR_AGE = \"userdata error age\"\r\nexport const USERDATA_ERROR_WEIGHT = \"userdata error weight\"\r\nexport const USERDATA_ERROR_SIZE = \"userdata error size\"\r\nexport const USERDATA_OK = \"userdata ok\"\r\n\r\nexport function checkUserDataValidity(userData: UserData): string {\r\n\tconst {age, size, weight} = userData\r\n\r\n\tif (age != null && (age < 15 || age > 100)) {\r\n\t\treturn USERDATA_ERROR_AGE\r\n    } else if (size != null && (size < 80 || size > 225)) {\r\n\t\treturn USERDATA_ERROR_SIZE\r\n\t} else if (weight != null && (weight < 30 || weight > 250)) {\r\n\t\treturn USERDATA_ERROR_WEIGHT\r\n    }\r\n\r\n    return USERDATA_OK\r\n}","import FoodAnalyzerContainer from \"./FoodAnalyzerContainer\";\r\nimport {useContext, useEffect} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport TabContainer from \"./TabContainer\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {PATH_FOODDATA_PANEL, QUERYKEY_DATAPANEL_AGGREGATED, QUERYKEY_DATAPANEL_ITEM} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {makeFoodDataPanelComponent} from \"../../service/FoodDataPanelService\";\r\nimport {AggregatedFoodItemUriData, FoodItemUriData} from \"../../types/livedata/UriData\";\r\nimport {makeFoodDataPanelDefaultUri, parseFoodDataPanelDefaultUri} from \"../../service/uri/FoodDataPanelUriService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {\r\n\tconvertAggregatedDataJsonToUriString,\r\n\tconvertAggregatedUriStringToObject\r\n} from \"../../service/uri/FoodDataPanelAggregatedUriService\";\r\nimport {checkUserDataValidity, USERDATA_OK} from \"../../service/UserDataService\";\r\n\r\n\r\ninterface FoodDataPanelContainerProps {\r\n\topenSelectorModal: boolean\r\n}\r\n\r\nexport default function FoodDataPanelContainer(props: FoodDataPanelContainerProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\tconst history = useHistory()\r\n\r\n\tuseEffect(() => {\r\n        buildDataPanelPageFromURI()\r\n    }, [applicationContext?.applicationData.foodDataPanel.selectedFoodItemIndex, \r\n\t\tapplicationContext?.applicationData.foodDataPanel.selectedFoodItems,\r\n\t\tapplicationContext?.applicationData.foodDataPanel.selectedDataPage,\r\n\t\tapplicationContext?.applicationData.foodDataPanel.chartConfigData,\r\n\t\tapplicationContext?.userData])\r\n\r\n    const buildDataPanelPageFromURI = () => {\r\n\t\tif(!applicationContext) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tconst {selectedFoodItemIndex, selectedFoodItems} = applicationContext.applicationData.foodDataPanel\r\n\t\t\r\n\t\tif(selectedFoodItemIndex === null || !selectedFoodItems || selectedFoodItems.length === 0) {\t\t\t\r\n\t\t\tcreateDataFromUriQuery()\t\t\r\n\t\t} else {   // Set new URI Query\t\t\r\n\t\t\tupdateUriQuery(selectedFoodItemIndex)\r\n\t\t}\r\n    }\r\n\r\n    if (!applicationContext || !applicationContext.ready) {\r\n        return <div/>\r\n    }\r\n\r\n\tconst chartConfigData = applicationContext.applicationData.foodDataPanel.chartConfigData\r\n\r\n\tconst updateUriQuery = (selectedFoodItemIndex: number) => {\r\n\t\tconst selectedFoodItem = selectedFoodItems[selectedFoodItemIndex]\r\n\t\t\tconst userData = applicationContext.userData\r\n\t\t\tconst selectedDataPage = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n\t\t\t\r\n\t\t\t// New query for aggregated food item\r\n\t\t\tif(selectedFoodItem.aggregated) {\r\n\t\t\t\tconst uriDataObject: AggregatedFoodItemUriData = {\r\n\t\t\t\t\tselectedFoodItem: {...selectedFoodItem, component: undefined},\r\n\t\t\t\t\tselectedDataPage: selectedDataPage,\r\n\t\t\t\t\tuserData: userData,\r\n\t\t\t\t\tchartConfigData: chartConfigData\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tconst query = convertAggregatedDataJsonToUriString(uriDataObject)\r\n\t\t\t\r\n\t\t\t\thistory.push({\r\n\t\t\t\t\tpathName: PATH_FOODDATA_PANEL,\r\n\t\t\t\t\tsearch: `${QUERYKEY_DATAPANEL_AGGREGATED}=${query}`\r\n\t\t\t\t})\r\n\t\t\t} else {   // New query for a default food item\r\n\t\t\t\tconst {portion, selectedSource, supplementData, combineData} = selectedFoodItem\r\n\t\t\t\tconst foodItemData: FoodItemUriData = {\r\n\t\t\t\t\t\tfoodItemId: selectedFoodItem.foodItem.id,\r\n\t\t\t\t\t\tportionData: portion,\r\n\t\t\t\t\t\tsource: selectedSource,\r\n\t\t\t\t\t\tsupplementData: supplementData,\r\n\t\t\t\t\t\tcombineData: combineData\r\n\t\t\t\t}\r\n\t\t\t\tconst query = makeFoodDataPanelDefaultUri(foodItemData, userData, selectedDataPage, chartConfigData)\r\n\t\t\t\t\t\r\n\t\t\t\thistory.push({\r\n\t\t\t\t\tpathName: PATH_FOODDATA_PANEL,\r\n\t\t\t\t\tsearch: `${QUERYKEY_DATAPANEL_ITEM}=${query}`\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t}\r\n\t\r\n\tconst createDataFromUriQuery = () => {\r\n\t\t\tconst queryString = window.location.search.substring(1)\r\n\t\t\tconst equalOperator = queryString.indexOf(\"=\")\r\n            const key = queryString.substring(0, equalOperator)\r\n            const value = queryString.substring(equalOperator+1)\r\n\r\n\t\t\tconst {addItemToFoodDataPanel, setSelectedDataPage} = applicationContext.setFoodDataPanelData\r\n\r\n\t\t\t// Set data from an aggregated food item query\r\n            if(key === QUERYKEY_DATAPANEL_AGGREGATED && value.length > 1) {\r\n            \ttry {\t\t\t\t\r\n\t\t\t\t\tconst uriDataObject: AggregatedFoodItemUriData | null = convertAggregatedUriStringToObject(chartConfigData, value)\r\n\t\t\t\t\tif(!uriDataObject) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tapplicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(uriDataObject.chartConfigData)\r\n\t\t\t\t\tsetSelectedDataPage(uriDataObject.selectedDataPage)\r\n\t\t\t\t\tapplicationContext.setUserData(uriDataObject.userData)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItemWithComponent = makeFoodDataPanelComponent(uriDataObject.selectedFoodItem, \r\n\t\t\t\t\tapplicationContext.foodDataCorpus.foodNames, languageContext.language, uriDataObject.selectedDataPage)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\tif(selectedFoodItemWithComponent) {\r\n\t\t\t\t\t\taddItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tconsole.error(e)\r\n\t\t\t\t}\r\n            }\r\n\r\n\t\t\t// Set data from a simple food item (create data from query parameters)\r\n\t\t\tif(key === QUERYKEY_DATAPANEL_ITEM && value.length > 1) {\r\n\t\t\t\tconst uriDataObject = parseFoodDataPanelDefaultUri(value, chartConfigData)\r\n\t\t\t\tif(uriDataObject) {\r\n\t\t\t\t\tconst foodItem = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif(!foodItem) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tapplicationContext.setUserData(uriDataObject.userData)\t\r\n\t\t\t\t\tconst foodClass = applicationContext.foodDataCorpus.foodClasses.find(foodClass => foodClass.id === foodItem.foodClass)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tfoodItem: foodItem,\r\n\t\t\t\t\t\tfoodClass: foodClass,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetSelectedDataPage(uriDataObject.selectedDataPage)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItemWithComponent = makeFoodDataPanelComponent(selectedFoodItem, \r\n\t\t\t\t\t\tapplicationContext.foodDataCorpus.foodNames, languageContext.language, uriDataObject.selectedDataPage)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(selectedFoodItemWithComponent) {\r\n\t\t\t\t\t\taddItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tapplicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(uriDataObject.chartConfigData)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n\r\n\r\n    const selectedFoodItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems\r\n\r\n    const onTabChange = (foodId) => {\r\n\t\tbuildDataPanelPageFromURI()\r\n        for (let i = 0; i < selectedFoodItems.length; i++) {\r\n            if (selectedFoodItems[i].id === foodId) {\r\n                applicationContext.setFoodDataPanelData.setSelectedFoodTab(i)\r\n            }\r\n        }\r\n    }\r\n\r\n    const onNewFoodItemSelected = (): void => {\r\n\t\tbuildDataPanelPageFromURI()\r\n        const newTabIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length - 1\r\n        applicationContext.setFoodDataPanelData.setSelectedFoodTab(newTabIndex)\r\n    }\r\n\r\n    const selectedTabIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n    if (!(selectedTabIndex >= 0)) {\r\n        return <div/>\r\n    }\r\n\r\n    const selectedFoodItem = applicationContext.applicationData.foodDataPanel.selectedFoodItems[selectedTabIndex]\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('FoodDataPanelContainer: Render, selected food item = ', selectedFoodItem)\r\n    }\r\n\r\n\tconst queryString = window.location.search.substring(1)\r\n\tconst equalOperator = queryString.indexOf(\"=\")\r\n\tconst value = queryString.substring(equalOperator+1)\r\n\tconst openSelectorModal: boolean = props.openSelectorModal && value.length === 0\r\n\r\n    return <div>\r\n        {selectedFoodItem !== null &&\r\n        <div className=\"container-fluid\" style={{paddingTop: \"20px\"}}>\r\n            <div className=\"row\">\r\n                <div className={\"col-2\"}>\r\n                    <FoodAnalyzerContainer onNewFoodItemSelected={onNewFoodItemSelected} openSelectorModal={openSelectorModal}/>\r\n                </div>\r\n                <div className=\"col-10 media app\" style={{maxWidth: \"1100px\", marginTop: \"-10px\"}}>\r\n                    {selectedFoodItems && selectedFoodItems.length > 0 ?\r\n                        <div>\r\n                            <TabContainer indexToSet={selectedTabIndex} onTabChange={onTabChange}/>\r\n                        </div>\r\n                        :\r\n                        <div style={{padding: \"24px\"}}>\r\n                            <i>\r\n                                {applicationStrings.text_empty_fooddatapanel[languageContext.language]}\r\n                            </i>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n        }\r\n    </div>\r\n\r\n\r\n}","export default \"data:image/png;base64,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\"","import logo from '../static/image/logo.png'\r\nimport text from '../static/image/text.png'\r\nimport {Button} from \"react-bootstrap\";\r\nimport {\r\n    LANGUAGE_DE,\r\n    LANGUAGE_EN,\r\n    PATH_FOODDATA_PANEL,\r\n    PATH_HOME,\r\n    PATH_CONTACT,\r\n    PATH_USERSETTINGS,\r\n    PATH_MOBILE_APP,\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODCOMPARE,\r\n    SOURCE_SRLEGACY,\r\n    SOURCE_FNDDS,\r\n    PATH_FOODDATA_PANEL_ADD\r\n} from \"../config/Constants\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {Link} from 'react-router-dom';\r\nimport {useLocation} from 'react-router-dom';\r\n\r\n\r\nexport default function Header() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language, userLanguageChange} = useContext(LanguageContext)\r\n    const location = useLocation();\r\n\r\n    if (applicationContext === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleLanguageButtonClick = (event: any): void => {\r\n        userLanguageChange(event.target.value)\r\n        applicationContext.setFoodDataPanelData.updateAllFoodItemNames(applicationContext.foodDataCorpus.foodNames, event.target.value)\r\n    }\r\n\r\n    const handleSourceButtonClick = (event: any): void => {\r\n        applicationContext.setPreferredSource(event.target.value)\r\n    }\r\n\r\n    let activePath = location.pathname && location.pathname !== \"/\" ? location.pathname : PATH_HOME\r\n    if(activePath.endsWith(\"/\") && activePath.length > 1) {\r\n        activePath = activePath.substring(0, activePath.length-1)\r\n    }\r\n\r\n    if (applicationContext?.debug) {\r\n        console.log('Path:', activePath)\r\n    }\r\n\r\n    const renderMenus = () => {\r\n        return (\r\n            <div className=\"btn-group\" role=\"group\">\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_HOME}>\r\n                        <Button className=\"header-link\"\r\n                                value={PATH_HOME}\r\n                                variant={'link'}\r\n                                active={activePath === PATH_HOME || activePath === PATH_FOODCOMPARE}>\r\n                            {applicationStrings.menu_home[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_FOODDATA_PANEL}>\r\n                        <Button className=\"header-link\"\r\n                                value={PATH_FOODDATA_PANEL}\r\n                                variant={'link'}\r\n                                active={activePath === PATH_FOODDATA_PANEL || activePath === PATH_FOODDATA_PANEL_ADD}>\r\n                            {applicationStrings.menu_food_data_panel[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_DIRECT_COMPARE}>\r\n                        <Button className=\"header-link\"\r\n                                value={PATH_DIRECT_COMPARE}\r\n                                variant={'link'}\r\n                                active={activePath === PATH_DIRECT_COMPARE}>\r\n                            {applicationStrings.menu_direct_compare[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n                {/*<div className=\"header-menu\">*/}\r\n                {/*    <Button className=\"blink header-link\"*/}\r\n                {/*            value={MENU_RANKING}*/}\r\n                {/*            variant={'link'}*/}\r\n                {/*            active={props.selectedMenu === MENU_RANKING}*/}\r\n                {/*            onClick={props.changeMenu}>*/}\r\n                {/*        {applicationStrings.menu_ranking[language]}*/}\r\n                {/*    </Button>*/}\r\n                {/*</div>*/}\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_MOBILE_APP}>\r\n                        <Button className=\"header-link\"\r\n                                value={PATH_MOBILE_APP}\r\n                                variant={'link'}\r\n                                active={activePath === PATH_MOBILE_APP}>\r\n                            {applicationStrings.menu_mobile_app[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_USERSETTINGS}>\r\n                        <Button className=\"link header-link\"\r\n                                value={PATH_USERSETTINGS}\r\n                                variant={'link'}\r\n                                active={activePath === PATH_USERSETTINGS}>\r\n                            {applicationStrings.menu_settings[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"header-menu\">\r\n                    <Link to={PATH_CONTACT}>\r\n                        <Button className=\"link header-link\"\r\n                                variant={'link'}\r\n                                value={PATH_CONTACT}\r\n                                active={activePath === PATH_CONTACT}>\r\n                            {applicationStrings.menu_contact[language]}\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderLanguageButtons = () => {\r\n        return (\r\n            <div className=\"form-language text-right\">\r\n                <form className=\"form-group\">\r\n                    <label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_language[language]}</b>\r\n                    </label>\r\n                    <label className=\"form-elements\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               value={LANGUAGE_EN}\r\n                               checked={language === LANGUAGE_EN}\r\n                               onChange={handleLanguageButtonClick}\r\n                        />\r\n                        {applicationStrings.checkbox_english[language]}\r\n                    </label>\r\n                    <label className=\"form-elements-largespace\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               value={LANGUAGE_DE}\r\n                               checked={(language === LANGUAGE_DE)}\r\n                               onChange={handleLanguageButtonClick}\r\n                        />\r\n                        {applicationStrings.checkbox_german[language]}\r\n                    </label>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderSourceButtons = () => {\r\n        const preferredSource = applicationContext.applicationData.preferredSource\r\n\r\n        return (\r\n            <div className=\"form-language text-right\" style={{paddingLeft: \"25px\"}}>\r\n                <form className=\"form-group\">\r\n                    <label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_preferred_source[language]}</b>\r\n                    </label>\r\n                    <label className=\"form-elements\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               value={SOURCE_SRLEGACY}\r\n                               checked={preferredSource === SOURCE_SRLEGACY}\r\n                               onChange={handleSourceButtonClick}\r\n                        />\r\n                        SR Legacy\r\n                    </label>\r\n                    <label className=\"form-elements-largespace\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               value={SOURCE_FNDDS}\r\n                               checked={(preferredSource === SOURCE_FNDDS)}\r\n                               onChange={handleSourceButtonClick}\r\n                        />\r\n                        FNDDS (Survey)\r\n                    </label>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row header\">\r\n                <div className=\"col-1\"\r\n                     style={{paddingTop: \"8px\", minWidth: \"120px\", maxWidth: \"120px\"}}>\r\n                    <img src={logo}/>\r\n                </div>\r\n                <div className=\"col\">\r\n                    <div className=\"d-flex flex-row justify-content-between\" float-start>\r\n                        <div className=\"d-flex text-start\" style={{paddingTop: \"5px\"}}>\r\n                            <img src={text}/>\r\n                        </div>\r\n                        <div className=\"d-flex text-end\" style={{paddingTop: \"6px\"}}>\r\n                            {renderLanguageButtons()}\r\n                            {renderSourceButtons()}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\" style={{marginTop: \"3px\"}}>\r\n                        <div className=\"col-md-12 text-start\">\r\n                            {renderMenus()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","export default \"data:image/png;base64,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\"","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {SEX_FEMALE, SEX_MALE} from \"../config/Constants\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    initialUserDataAge,\r\n    initialUserDataBreastfeeding,\r\n    initialUserDataLeisureSports,\r\n    initialUserDataPregnant,\r\n    initialUserDataSex,\r\n    initialUserDataSize,\r\n    initialUserDataWeight\r\n} from \"../config/ApplicationSetting\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {NotificationManager} from 'react-notifications'\r\nimport 'react-notifications/lib/notifications.css';\r\nimport {Form, FormControl, FormGroup} from \"react-bootstrap\";\r\nimport Select from 'react-select';\r\nimport {getPalCategories, getPalCategory} from \"../service/calculation/EnergyService\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\nimport {isSmallScreen, useWindowDimension} from \"../service/WindowDimension\";\r\nimport { checkUserDataValidity, USERDATA_ERROR_AGE, USERDATA_ERROR_SIZE, USERDATA_ERROR_WEIGHT } from \"../service/UserDataService\";\r\n\r\nexport function UserSettings() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const [age, setAge] = useState<number>(initialUserDataAge)\r\n    const [size, setSize] = useState<number>(initialUserDataSize)\r\n    const [weight, setWeight] = useState<number>(initialUserDataWeight)\r\n    const [sex, setSex] = useState<string>(initialUserDataSex)\r\n    const [pregnant, setPregnant] = useState<boolean>(initialUserDataPregnant)\r\n    const [breastFeeding, setBreastFeeding] = useState<boolean>(initialUserDataBreastfeeding)\r\n    const [palValue, setPalValue] = useState<ReactSelectOption | null>(null)\r\n    const [leisureSport, setLeisureSport] = useState<boolean>(initialUserDataLeisureSports)\r\n\r\n    const windowSize = useWindowDimension()\r\n\r\n    useEffect(() => {\r\n        if(applicationContext) {\r\n            setAge(applicationContext.userData.age)\r\n            setSize(applicationContext.userData.size)\r\n            setWeight(applicationContext.userData.weight)\r\n            setSex(applicationContext.userData.sex)\r\n            setPregnant(applicationContext.userData.pregnant)\r\n            setBreastFeeding(applicationContext.userData.breastFeeding)\r\n            setLeisureSport(applicationContext.userData.leisureSports)\r\n        }\r\n    }, [])\r\n\r\n    const changeAge = (event: any) => {\r\n        setAge(event.target.value)\r\n    }\r\n\r\n    const changeSize = (event: any) => {\r\n        setSize(event.target.value)\r\n    }\r\n\r\n    const changeWeight = (event: any) => {\r\n        setWeight(event.target.value)\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value;\r\n        const sex = value === SEX_MALE ? SEX_MALE : SEX_FEMALE;\r\n        if (sex === SEX_MALE) {\r\n            setPregnant(false)\r\n            setBreastFeeding(false)\r\n        }\r\n        setSex(sex)\r\n    }\r\n\r\n    const changePregnant = (event: any) => {\r\n        setPregnant(!pregnant)\r\n    }\r\n\r\n    const changeBreastFeeding = (event: any) => {\r\n        setBreastFeeding(!breastFeeding)\r\n    }\r\n\r\n    const changeAdditionalPalPorts = (event: any) => {\r\n        setLeisureSport(!leisureSport)\r\n    }\r\n\r\n    const changePalValue = (value: ReactSelectOption) => {\r\n        setPalValue(value)\r\n    }\r\n\r\n    const submitUserData = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const userData: UserData = {\r\n            age: age,\r\n            size: size,\r\n            weight: weight,\r\n            sex: sex,\r\n            pregnant: pregnant,\r\n            breastFeeding: breastFeeding,\r\n            palValue: palValue ? palValue.value : applicationContext.userData.palValue,\r\n            leisureSports: leisureSport,\r\n            initialValues: false\r\n        }\r\n\r\n        const inputOk = checkInputValidity(userData)\r\n\r\n        if (inputOk) {\r\n            applicationContext.setUserData(userData)\r\n            NotificationManager.success(applicationStrings.message_userdata_success[lang])\r\n        }\r\n    }\r\n\r\n\r\n    const checkInputValidity = (userData: UserData) => {\r\n        const validationResult = checkUserDataValidity(userData)\r\n\r\n        if (validationResult === USERDATA_ERROR_AGE) {\r\n            showMessage(applicationStrings.message_userdata_error_age[lang]);\r\n            return false;\r\n        } else if (validationResult === USERDATA_ERROR_SIZE) {\r\n            showMessage(applicationStrings.message_userdata_error_size[lang]);\r\n            return false;\r\n        } else if (validationResult === USERDATA_ERROR_WEIGHT) {\r\n            showMessage(applicationStrings.message_userdata_error_weight[lang]);\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    const showMessage = (message: string) => {\r\n        NotificationManager.error(message)\r\n    }\r\n\r\n    const selectClass = isSmallScreen(windowSize) ? \"form-control-sm\" : \"\"\r\n    const inputClass =  isSmallScreen(windowSize) ? \"form-control form-control-sm input-sm\" : \"form-control input\"\r\n\r\n    const renderTextField = (label, value, callback) => {\r\n        return (\r\n            <div className=\"form-row\">\r\n                <Form.Label className=\"form-label\">{label}:</Form.Label>\r\n                <FormControl\r\n                    className={inputClass}\r\n                    type=\"text\"\r\n                    value={value}\r\n                    onChange={callback}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderSexRadioButtons = () => {\r\n        return (\r\n            <div className=\"form-row-indent\">\r\n                <Form.Label className=\"form-elements\">\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                label={applicationStrings.label_userSettings_sex_male[lang]}\r\n                                value={SEX_MALE}\r\n                                checked={(sex === SEX_MALE)}\r\n                                onChange={handleRadioButtonClick}\r\n                    />\r\n                </Form.Label>\r\n                <Form.Label className=\"form-elements-largespace\">\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                label={applicationStrings.label_userSettings_sex_female[lang]}\r\n                                value={SEX_FEMALE}\r\n                                checked={(sex !== SEX_MALE)}\r\n                                onChange={handleRadioButtonClick}\r\n                    />\r\n                </Form.Label>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderFemaleCheckboxes = () => {\r\n        return (\r\n            <div className=\"form\" style={{marginLeft: \"48px\", marginBottom: \"10px\"}}>\r\n                <div>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                checked={pregnant === true}\r\n                                disabled={sex === SEX_MALE}\r\n                                label={applicationStrings.label_userSettings_pregnant[lang]}\r\n                                onClick={changePregnant}>\r\n                    </Form.Check>\r\n                </div>\r\n                <div>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                checked={breastFeeding === true}\r\n                                disabled={sex === SEX_MALE}\r\n                                label={applicationStrings.label_userSettings_breastfeeding[lang]}\r\n                                onClick={changeBreastFeeding}>\r\n                    </Form.Check>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const renderPalList = (userData: UserData) => {\r\n        const palCategories = getPalCategories(lang);\r\n        if (!palCategories) {\r\n            return <div/>\r\n        }\r\n\r\n        if (!palValue) {   // Initialize pal value first time\r\n            let userDataPalValue = palCategories.find(palObject => palObject.value === userData.palValue)\r\n            if (!userDataPalValue) {\r\n                console.error('Error: Pal object could not be determined.')\r\n                userDataPalValue = palCategories[0]\r\n            }\r\n            setPalValue(userDataPalValue)\r\n        }\r\n\r\n        if (!palValue) {\r\n            return <div/>\r\n        }\r\n\r\n        const descriptionCode = `palcat_desc_${getPalCategory(palValue.value)}`\r\n        const description = applicationStrings[descriptionCode][lang];\r\n\r\n        return (\r\n            <div className=\"form-row\">\r\n                <div style={{width: \"450px\", paddingTop: \"30px\"}}>\r\n                    <label className=\"form-label\">{applicationStrings.label_userSettings_palValue[lang]}:</label>\r\n                    <Select className={selectClass}\r\n                            options={palCategories}\r\n                            value={palValue}\r\n                            onChange={(value) => changePalValue(value)}\r\n                    />\r\n                </div>\r\n                <p className=\"app\">\r\n                    {description}\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderActivityCheckboxes = () => {\r\n        return (\r\n            <div className=\"form-row-indent\" style={{marginTop: \"-15px\"}}>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_userSettings_leisureSports_tooltip[lang]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_userSettings_leisureSports[lang]}\r\n                                checked={leisureSport === true}\r\n                                onClick={changeAdditionalPalPorts}>\r\n                    </Form.Check>\r\n                </label>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderSubmitButton = () => {\r\n        return (\r\n            <div className=\"text-center\">\r\n                <button type=\"button\"\r\n                        className=\"btn btn-primary button-base\"\r\n                        onClick={() => submitUserData()}>\r\n                    {applicationStrings.button_submit[lang]}\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const value_age = (age != null) ? age : initialUserDataAge\r\n    const value_size = (size != null) ? size : initialUserDataSize\r\n    const value_weight = (weight != null) ? weight : initialUserDataWeight\r\n\r\n    return (\r\n        <div className=\"container\" style={{paddingTop: \"24px\"}}>\r\n            <div className=\"row userDataSettings\">\r\n                <div className=\"col-12\">\r\n                    <form>\r\n                        <FormGroup controlId=\"formBasicText\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-6\">\r\n                                    {renderTextField(applicationStrings.label_userSettings_age[lang], value_age, changeAge)}\r\n                                    {renderTextField(applicationStrings.label_userSettings_size[lang], value_size, changeSize)}\r\n                                    {renderTextField(applicationStrings.label_userSettings_weight[lang], value_weight, changeWeight)}\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <Form.Label className=\"form-label\" style={{paddingLeft: \"20px\"}}>\r\n                                        {applicationStrings.label_userSettings_sex[lang]}\r\n                                    </Form.Label>\r\n                                    {renderSexRadioButtons()}\r\n                                    {renderFemaleCheckboxes()}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                {renderPalList(applicationContext.userData)}\r\n                                {renderActivityCheckboxes()}\r\n                            </div>\r\n                        </FormGroup>\r\n                        {renderSubmitButton()}\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","export default __webpack_public_path__ + \"static/media/impressum-german.92ba80d6.png\";","export default __webpack_public_path__ + \"static/media/impressum-english.1bd33956.png\";","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {LANGUAGE_DE} from \"../config/Constants\";\r\n\r\nimport impressum_de from '../static/image/impressum-german.png';\r\nimport impressum_en from '../static/image/impressum-english.png';\r\nimport {buildDate, release} from \"../config/ApplicationSetting\";\r\n\r\nexport function Contact() {\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const renderDisclaimer = () => {\r\n        return(\r\n            <div>\r\n                <p>\r\n                    <b>{applicationStrings.text_contact_disclaimer1[lang]}</b>\r\n                </p>\r\n                <p>\r\n                    <i>\r\n                        {applicationStrings.text_contact_disclaimer2[lang]}\r\n                    </i>\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderSources = () => {\r\n        return (\r\n            <div style={{paddingTop: \"50px\"}}>\r\n                <h4>{applicationStrings.text_contact_source1[lang]}</h4>\r\n                <h5>{applicationStrings.text_contact_source2[lang]}</h5>\r\n                <p>U.S. Department of Agriculture, Agricultural Research Service.<br/>\r\n                FoodData Central, 2019. fdc.nal.usda.gov.</p>\r\n                <h5>{applicationStrings.text_contact_source3[lang]}</h5>\r\n                <p>Deutsche Gesellschaft fr Ernhrung e.V.</p>\r\n                <h5>{applicationStrings.text_contact_source4[lang]}</h5>\r\n                <p>Prakash S. Shetty, Christiani J. K. Henry, Alison E. Black and A. M. Prentice:<br/>\r\n                    \"Energy requirements of adults: an update on basal metabolic rates (BMRs) and physical activity levels (PALs).\",<br/>\r\n                    European journal of clinical nutrition (1996), Volume 50, Suppl 1, pp. 11-23\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const impressumPath = lang === LANGUAGE_DE ? impressum_de : impressum_en;\r\n\r\n    return(\r\n        <div className=\"container-fluid\"  style={{paddingLeft: \"50px\", paddingTop: \"20px\"}}>\r\n            <div className=\"row\">\r\n                <div className=\"col-6\" style={{paddingBottom: \"40px\", paddingRight: \"80px\"}}>\r\n                    <div>\r\n                        <h1>\r\n                            Food Compare\r\n                        </h1>\r\n                        <h6>\r\n                            Version {release}\r\n                        </h6>\r\n                        <h6>\r\n                            Build time: {buildDate}\r\n                        </h6>\r\n                    </div>\r\n                    <div style={{paddingTop: \"50px\"}}>\r\n                        {renderDisclaimer()}\r\n                        {renderSources()}\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    <div style={{height: '180px'}}>\r\n                        <img src={impressumPath} style={{height: '180px'}} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {Carousel} from 'react-responsive-carousel';\r\nimport {applicationStrings} from \"../static/labels\";\r\n\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport {Link} from 'react-router-dom';\r\nimport {PATH_FOODDATA_PANEL, PATH_FOODDATA_PANEL_ADD} from \"../config/Constants\";\r\n\r\nconst images = require.context('../static/image/carousel', true);\r\n\r\n\r\nexport function Home() {\r\n    const languageContext = useContext(LanguageContext)\r\n    const [displayedImage, setDisplayedImage] = useState<number>(0)\r\n\r\n    const imageChanged = (image) => {\r\n        setDisplayedImage(image)\r\n    }\r\n\r\n    const renderCarousel = () => {\r\n        let langKey = languageContext.language\r\n\r\n        const pic1 = images(`./Img-${langKey}-1.png`).default;\r\n        const pic2 = images(`./Img-${langKey}-2.png`).default;\r\n        const pic3 = images(`./Img-${langKey}-3.png`).default;\r\n        const pic4 = images(`./Img-${langKey}-4.png`).default;\r\n        const pic5 = images(`./Img-${langKey}-5.png`).default;\r\n        const pic6 = images(`./Img-${langKey}-6.png`).default;\r\n\r\n        const captionAttribute = `home_carousel_${displayedImage}`;\r\n        const imageCaption = applicationStrings[captionAttribute][languageContext.language];\r\n\r\n        return (\r\n            <div style={{paddingTop: \"20px\", paddingBottom: \"50px\"}}>\r\n                <Carousel showArrows={true}\r\n                          infiniteLoop={true} autoPlay={true}\r\n                          interval={6000}\r\n                          transitionTime={800}\r\n                          selectedItem={displayedImage}\r\n                          onChange={imageChanged}>\r\n                    <div>\r\n                        <img src={pic1}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic2}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic3}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic4}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic5}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic6}/>\r\n                    </div>\r\n                </Carousel>\r\n                <div style={{textAlign: \"center\", fontStyle: \"oblique\"}}>\r\n                    {imageCaption}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const renderStartButton = () => {\r\n        return (\r\n            <div className=\"text-center\">\r\n                <Link to={{pathname: PATH_FOODDATA_PANEL_ADD}}>\r\n                <button type=\"button\"\r\n                        className=\"btn btn-warning button-apply media app\"\r\n                        style={{minWidth: \"150px\"}}>\r\n\t\t\t\t\t<span className={\"media app\"} style={{fontWeight: \"bold\"}}>\r\n\t\t\t\t\t\t{applicationStrings.button_getstarted[languageContext.language]}\r\n\t\t\t\t\t</span>\r\n                </button>\r\n                </Link>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"media home app\" style={{margin: \"0 auto\"}}>\r\n            <div className={\"container-fluid\"}>\r\n                <div className=\"row\">\r\n                    <div className={\"col-5\"}>\r\n                        <p>{applicationStrings.home_text_1[languageContext.language]}</p>\r\n                        <div style={{paddingTop: \"20px\", paddingBottom: \"60px\"}}>\r\n                            {renderStartButton()}\r\n                        </div>\r\n                        <p>{applicationStrings.home_text_2[languageContext.language]}</p>\r\n                        <p>{applicationStrings.home_text_3[languageContext.language]}</p>\r\n                    </div>\r\n                    <div className={\"col-7\"} style={{paddingLeft: \"45px\"}}>\r\n                        {renderCarousel()}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","export default __webpack_public_path__ + \"static/media/app.efc3a150.png\";","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\n\r\nimport appPath from '../static/image/app.png';\r\nimport {mobileAppPath} from \"../config/ApplicationSetting\";\r\n\r\nexport function FoodCompareApp() {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    const linkToPlayStore = () => {\r\n        const link = window.open(mobileAppPath, '_blank')\r\n        if(link) {\r\n            link.focus()\r\n        } else {\r\n            window.location.href = mobileAppPath\r\n        }\r\n    }\r\n\r\n    return <div className={\"container media app\"} style={{paddingTop: \"24px\"}}>\r\n        <div className={\"row\"}>\r\n            <div className={\"col-6\"}>\r\n                {applicationStrings.text_foodcompareapp_1[languageContext.language]}\r\n                <div className=\"text-center\" style={{paddingTop: \"32px\"}}>\r\n                    <button type=\"button\"\r\n                            className=\"btn btn-warning btn-small button-apply media app\"\r\n                            onClick={linkToPlayStore}\r\n                            style={{minWidth: \"250px\"}}>\r\n\t\t\t\t\t<span className={\"media app\"} style={{fontWeight: \"bold\"}}>\r\n\t\t\t\t\t\t{applicationStrings.text_foodcompareapp_2[languageContext.language]}\r\n\t\t\t\t\t</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div className={\"col-6\"}>\r\n                <img src={appPath} className={\"media mobile-app-img\"}/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport FoodSelector from \"./FoodSelector\";\r\nimport {Button, Card, CardDeck} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\n\r\ninterface DirectCompareSelectorProps {\r\n    updateSelectedFoodItems: (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => void\r\n}\r\n\r\nconst STATUS_FIRST_TIME = \"first time\"\r\nconst STATUS_NOT_UPDATED = \"not updated\"\r\nconst STATUS_UPDATED = \"updated\"\r\n\r\nexport function DirectCompareSelector(props: DirectCompareSelectorProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const language = languageContext.language\r\n\r\n    const initialItem1 = applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        ? applicationContext.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        : null\r\n\r\n    const initialItem2 = applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        ? applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        : null\r\n\r\n    const [selectedFoodItem1, setSelectedFoodItem1] = useState<SelectedFoodItem | null>(initialItem1)\r\n    const [selectedFoodItem2, setSelectedFoodItem2] = useState<SelectedFoodItem | null>(initialItem2)\r\n    const [displayStatus, setDisplayStatus] = useState<string>(STATUS_FIRST_TIME)\r\n\r\n    useEffect(() => {\r\n        if(applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2) {\r\n            const {selectedFoodItem1, selectedFoodItem2} = applicationContext.applicationData.directCompareDataPanel\r\n            if(selectedFoodItem1 && selectedFoodItem2) {\r\n                console.log('drecksjude', selectedFoodItem1)\r\n                updateSelectedFoodItem1(selectedFoodItem1)\r\n                updateSelectedFoodItem2(selectedFoodItem2)\r\n            }\r\n        }\r\n\r\n    }, [applicationContext?.applicationData.directCompareDataPanel])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateSelectedFoodItem1 = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem1({...selectedFoodItem})\r\n        if (displayStatus !== STATUS_FIRST_TIME) {\r\n            setDisplayStatus(STATUS_UPDATED)\r\n        }\r\n    }\r\n\r\n    const updateSelectedFoodItem2 = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem2(selectedFoodItem)\r\n        if (displayStatus !== STATUS_FIRST_TIME) {\r\n            setDisplayStatus(STATUS_UPDATED)\r\n        }\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (selectedFoodItem1 && selectedFoodItem2) {\r\n            props.updateSelectedFoodItems(selectedFoodItem1, selectedFoodItem2)\r\n        }\r\n\r\n        setDisplayStatus(STATUS_NOT_UPDATED)\r\n    }\r\n\r\n\r\n    const renderFoodSelectorCard = (foodSelectorNumber: number) => {\r\n        const updateSelectedFoodItem = foodSelectorNumber === 1 ? updateSelectedFoodItem1 : updateSelectedFoodItem2\r\n        const styleClass = foodSelectorNumber === 1 ? {backgroundColor: direct_compare_color1} : {backgroundColor: direct_compare_color2}\r\n        const initialFoodClassToSet = foodSelectorNumber - 1\r\n\r\n        const selectedFoodItem = foodSelectorNumber === 1 ? selectedFoodItem1 : selectedFoodItem2\r\n\r\n        console.log('schei schei jude', selectedFoodItem)\r\n\r\n        return <div style={{paddingTop: \"32px\"}}>\r\n            <Card style={styleClass}>\r\n                <Card.Header>\r\n                    {applicationStrings.label_food[language]} {foodSelectorNumber}\r\n                </Card.Header>\r\n                <CardDeck>\r\n                    <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                  smallVariant={true}\r\n                                  noCategorySelect={true}\r\n                                  initialFoodClassToSet={initialFoodClassToSet}\r\n                                  selectedFoodItem={selectedFoodItem}\r\n                    />\r\n                </CardDeck>\r\n            </Card>\r\n        </div>\r\n    }\r\n\r\n    const buttonName = displayStatus === STATUS_FIRST_TIME ? applicationStrings.button_show[language] : applicationStrings.button_update[language]\r\n\r\n    return <div>\r\n        {renderFoodSelectorCard(1)}\r\n        {renderFoodSelectorCard(2)}\r\n        <div style={{paddingTop: \"20px\", paddingBottom: \"64px\"}}>\r\n            <Button className={\"form-button float-end\"}\r\n                    disabled={displayStatus === STATUS_NOT_UPDATED}\r\n                    onClick={onSubmit}>\r\n                {buttonName}\r\n            </Button>\r\n        </div>\r\n    </div>\r\n}","import {determineFoodRequirementRatio, determineProteinRequirementRatio} from \"./DietaryRequirementService\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\n\r\n/**\r\n * Determines the maximum vitamin or mineral or protein value of a food item (referring to the daily dietary requirements).\r\n */\r\nexport function getMaximumValue(dataSet: any, amount: number, requirementData: any, userData: UserData, proteins?: boolean) {\r\n    let maxValue = 0\r\n    for (let dataSetKey in dataSet) {\r\n        if (requirementData[dataSetKey]) {\r\n            const ratioValue = proteins === true\r\n                ? determineProteinRequirementRatio(requirementData[dataSetKey], dataSet[dataSetKey], amount, userData)\r\n                : determineFoodRequirementRatio(requirementData[dataSetKey], dataSet[dataSetKey], amount, userData)\r\n            if (ratioValue > maxValue) {\r\n                maxValue = ratioValue\r\n            }\r\n        }\r\n    }\r\n    return maxValue\r\n}\r\n\r\n/**\r\n * Given two data sets of vitamins, minerals or proteins, this method nullifies each value if it does not occur in\r\n * both data sets. This can be used as part of the synchronization process where two bar charts should contain the\r\n * exact same amount of columns.\r\n */\r\nexport function nullifyIncompleValues(dataSet1: any, dataSet2: any) {\r\n    for (let dataSetKey in dataSet1) {\r\n        const value = dataSet1[dataSetKey]\r\n        if(value === null && dataSet2[dataSetKey]) {\r\n            dataSet2[dataSetKey] = null\r\n        } else if(value !== null && (dataSet2[dataSetKey] === null || dataSet2[dataSetKey] === undefined)) {\r\n            dataSet1[dataSetKey] = null\r\n        }\r\n    }\r\n\r\n    for (let dataSetKey in dataSet2) {\r\n        const value = dataSet2[dataSetKey]\r\n        if(value === null && dataSet2[dataSetKey]) {\r\n            dataSet2[dataSetKey] = null\r\n        } else if(value !== null && (dataSet1[dataSetKey] === null || dataSet1[dataSetKey] === undefined)) {\r\n            dataSet2[dataSetKey] = null\r\n        }\r\n    }\r\n}","import MineralVitaminChart from \"../fooddatapanel/charts/MineralVitaminChart\";\r\nimport {CHART_VITAMINS} from \"../../config/Constants\";\r\nimport {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {BarChartConfigurationForm} from \"../charthelper/BarChartConfigurationForm\";\r\nimport {roundToNextValue} from \"../../service/calculation/MathService\";\r\nimport {getMaximumValue, nullifyIncompleValues} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport {DC_MineralVitaminChartProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport function DC_MineralVitaminChart(props: DC_MineralVitaminChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfigVitamins = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.vitaminChartConfig\r\n        : initialDirectCompareConfigData.vitaminChartConfig\r\n\r\n    const chartConfigMinerals = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.mineralChartConfig\r\n        : initialDirectCompareConfigData.mineralChartConfig\r\n\r\n    const [portionType_vitamins, setPortionType_vitamins] = useState<string>(chartConfigVitamins.portionType)\r\n    const [portionType_minerals, setPortionType_minerals] = useState<string>(chartConfigMinerals.portionType)\r\n    const [expand100_vitamins, setExpand100_vitamins] = useState<boolean>(chartConfigVitamins.expand100)\r\n    const [expand100_minerals, setExpand100_minerals] = useState<boolean>(chartConfigMinerals.expand100)\r\n    const [synchronizeVitamins, setSynchronizeVitamins] = useState<boolean>(chartConfigVitamins.synchronize)\r\n    const [synchronizeMinerals, setSynchronizeMinerals] = useState<boolean>(chartConfigMinerals.synchronize)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        updateChartConfig()\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [portionType_minerals,\r\n        portionType_vitamins,\r\n        synchronizeVitamins,\r\n        synchronizeMinerals,\r\n        expand100_vitamins,\r\n        expand100_minerals,\r\n        containerHeight,\r\n        windowSize.height]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            const newChartConfig = {\r\n                ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                vitaminChartConfig: {\r\n                    portionType: portionType_vitamins,\r\n                    expand100: expand100_vitamins,\r\n                    synchronize: synchronizeVitamins\r\n                },\r\n                mineralChartConfig: {\r\n                    portionType: portionType_minerals,\r\n                    expand100: expand100_minerals,\r\n                    synchronize: synchronizeMinerals\r\n                }\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        }\r\n    }\r\n\r\n    const requirementData = props.selectedSubChart === CHART_VITAMINS\r\n        ? applicationContext.foodDataCorpus.dietaryRequirements?.vitaminRequirementData\r\n        : applicationContext.foodDataCorpus.dietaryRequirements?.mineralRequirementData\r\n\r\n    if (!requirementData) {\r\n        return <div></div>\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        props.selectedSubChart === CHART_VITAMINS ? setPortionType_vitamins(event.target.value) : setPortionType_minerals(event.target.value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        props.selectedSubChart === CHART_VITAMINS ? setExpand100_vitamins(!expand100_vitamins) : setExpand100_minerals(!expand100_minerals)\r\n    }\r\n\r\n    const handleSynchronize = () => {\r\n        props.selectedSubChart === CHART_VITAMINS ? setSynchronizeVitamins(!synchronizeVitamins) : setSynchronizeMinerals(!synchronizeMinerals)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const portionType = props.selectedSubChart === CHART_VITAMINS ? portionType_vitamins : portionType_minerals\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals\r\n        const synchronize = props.selectedSubChart === CHART_VITAMINS ? synchronizeVitamins : synchronizeMinerals\r\n\r\n        const barChartProps = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox,\r\n            handleSynchronize: handleSynchronize\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps}/>\r\n    }\r\n\r\n    const nutrientData1 = getNutrientData(props.selectedFoodItem1)\r\n    const nutrientData2 = getNutrientData(props.selectedFoodItem2)\r\n\r\n    const dataSet1 = props.selectedSubChart === CHART_VITAMINS ? nutrientData1.vitaminData : nutrientData1.mineralData\r\n    const dataSet2 = props.selectedSubChart === CHART_VITAMINS ? nutrientData2.vitaminData : nutrientData2.mineralData\r\n\r\n    const maxValue1 = getMaximumValue(dataSet1, props.selectedFoodItem1.portion.amount, requirementData, applicationContext.userData)\r\n    const maxValue2 = getMaximumValue(dataSet2, props.selectedFoodItem2.portion.amount, requirementData, applicationContext.userData)\r\n    const maxValue = Math.max(maxValue1, maxValue2)\r\n\r\n    const synchronize = props.selectedSubChart === CHART_VITAMINS ? synchronizeVitamins : synchronizeMinerals\r\n\r\n    if (synchronize) {\r\n        nullifyIncompleValues(dataSet1, dataSet2)\r\n    }\r\n\r\n    const maxY = synchronize\r\n        ? roundToNextValue(maxValue) : undefined\r\n\r\n    const preconfigVitamins = {\r\n        maxValue: maxY,\r\n        portionType: portionType_vitamins,\r\n        expand100: expand100_vitamins,\r\n        synchronize: synchronizeVitamins\r\n    }\r\n\r\n    const preconfigMinerals = {\r\n        maxValue: maxY,\r\n        portionType: portionType_minerals,\r\n        expand100: expand100_minerals,\r\n        synchronize: synchronizeMinerals\r\n    }\r\n\r\n    const preconfig = props.selectedSubChart === CHART_VITAMINS ? preconfigVitamins : preconfigMinerals\r\n\r\n    const preconfigFoodItem1 = {...preconfig, barChartColor: direct_compare_color1}\r\n    const preconfigFoodItem2 = {...preconfig, barChartColor: direct_compare_color2}\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <MineralVitaminChart selectedSubChart={props.selectedSubChart}\r\n                                     selectedFoodItem={props.selectedFoodItem1}\r\n                                     directCompareUse={true} directCompareConfig={preconfigFoodItem1}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <MineralVitaminChart selectedSubChart={props.selectedSubChart}\r\n                                     selectedFoodItem={props.selectedFoodItem2}\r\n                                     directCompareUse={true} directCompareConfig={preconfigFoodItem2}/>\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {PieChartConfigurationForm} from \"../charthelper/PieChartConfigurationForm\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport BaseDataChart from \"../fooddatapanel/charts/BaseDataChart\";\r\nimport {\r\n    CARBS_DATA_BASE,\r\n    LIPIDS_DATA_BASE,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_LIPIDS_DATA\r\n} from \"../../config/Constants\";\r\nimport LipidsDataChart from \"../fooddatapanel/charts/LipidsDataChart\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {\r\n    PieChartConfigurationProps,\r\n    PieChartDirectCompareConfig,\r\n    PieChartDirectCompareProp\r\n} from \"../../types/livedata/ChartPropsData\";\r\nimport CarbsDataChart from \"../fooddatapanel/charts/CarbsDataChart\";\r\nimport {\r\n    GeneralChartConfigDirectCompareWithSubCharts,\r\n    GeneralChartConfigWithDetails\r\n} from \"../../types/livedata/ChartConfigData\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\n\r\n/**\r\n * Re-usable direct compare chart component for pie-chart data pages (Lipids, Carbs, Base Data)\r\n */\r\nexport function DC_PieChart(props: PieChartDirectCompareProp) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    let initialConfig\r\n    switch (props.dataPage) {\r\n        case TAB_BASE_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.baseChartConfig\r\n                ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.baseChartConfig\r\n                : initialDirectCompareConfigData.baseChartConfig\r\n            break\r\n        case TAB_LIPIDS_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n                ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n                : initialDirectCompareConfigData.lipidsChartConfig\r\n            break\r\n        case TAB_CARBS_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n                ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n                : initialDirectCompareConfigData.carbsChartConfig\r\n            break\r\n    }\r\n\r\n    const [chartType, setChartType] = useState<string>(initialConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(initialConfig.showLegend)\r\n    const [showDetails, setShowDetails] = useState<boolean>(initialConfig.showDetails)\r\n    const [subChart1, setSubChart1] = useState<string>(initialConfig.subChart1)\r\n    const [subChart2, setSubChart2] = useState<string>(initialConfig.subChart2)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        const currentConfig = applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n        if (!currentConfig) {\r\n            return\r\n        }\r\n\r\n        if (props.dataPage === TAB_LIPIDS_DATA || props.dataPage === TAB_CARBS_DATA) {\r\n            const configObject: GeneralChartConfigDirectCompareWithSubCharts = props.dataPage === TAB_LIPIDS_DATA\r\n                ? currentConfig.lipidsChartConfig\r\n                : currentConfig.carbsChartConfig\r\n\r\n            if (chartType !== configObject.chartType || showLegend !== configObject.showLegend\r\n                || subChart1 !== configObject.subChart1 || subChart2 !== configObject.subChart2) {\r\n                updateChartConfig()\r\n            }\r\n        } else if (props.dataPage === TAB_BASE_DATA) {\r\n            const configObject: GeneralChartConfigWithDetails = currentConfig.baseChartConfig\r\n            if (chartType !== configObject.chartType || showLegend !== configObject.showLegend || showDetails !== configObject?.showDetails) {\r\n                updateChartConfig()\r\n            }\r\n        }\r\n\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [chartType, showDetails, showLegend, subChart1, subChart2, containerHeight, windowSize.height])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            let newChartConfig\r\n\r\n            if (props.dataPage === TAB_BASE_DATA) {\r\n                const pieChartConfig: GeneralChartConfigWithDetails = {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    showDetails: showDetails\r\n                }\r\n\r\n                newChartConfig = {\r\n                    ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                    baseChartConfig: pieChartConfig\r\n                }\r\n            } else {\r\n                const pieChartConfig: GeneralChartConfigDirectCompareWithSubCharts = {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    subChart1: subChart1,\r\n                    subChart2: subChart2\r\n                }\r\n\r\n                if (props.dataPage === TAB_LIPIDS_DATA) {\r\n                    newChartConfig = {\r\n                        ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                        lipidsChartConfig: pieChartConfig\r\n                    }\r\n                } else if (props.dataPage === TAB_CARBS_DATA) {\r\n                    newChartConfig = {\r\n                        ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                        carbsChartConfig: pieChartConfig\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (newChartConfig) {\r\n                applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleShowLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const handleShowDetailsCheckbox = () => {\r\n        setShowDetails(!showDetails)\r\n    }\r\n\r\n    const handleSubchart1Change = (event: any): void => {\r\n        setSubChart1(event.target.value)\r\n    }\r\n\r\n    const handleSubchart2Change = (event: any): void => {\r\n        setSubChart2(event.target.value)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const chartProps = getConfigurationProps()\r\n        return <PieChartConfigurationForm key = {`Config ${props.dataPage}`} {...chartProps}/>\r\n    }\r\n\r\n    const getConfigurationProps = (): PieChartConfigurationProps => {\r\n        let chartProps: PieChartConfigurationProps = {\r\n            chartType: chartType,\r\n            showLegend: showLegend,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleLegendCheckboxClick: handleShowLegendCheckbox,\r\n        }\r\n\r\n        if (props.dataPage === TAB_BASE_DATA) {\r\n            chartProps = {\r\n                ...chartProps,\r\n                detailsCheckboxAvailable: true,\r\n                showDetails: showDetails,\r\n                handleDetailsCheckboxClick: handleShowDetailsCheckbox\r\n            }\r\n        }\r\n\r\n        return chartProps\r\n    }\r\n\r\n\r\n    const getChartComponent = (selectedFoodItem: SelectedFoodItem, index: number) => {\r\n        let preconfig: PieChartDirectCompareConfig = {\r\n            chartType: chartType,\r\n            showLegend: showLegend,\r\n            showDetails: showDetails,\r\n        }\r\n\r\n        if (props.dataPage === TAB_BASE_DATA) {\r\n            return <BaseDataChart key = {`${TAB_BASE_DATA} ${index}`} selectedFoodItem={selectedFoodItem} directCompareUse={true}\r\n                                  directCompareConfig={preconfig}/>\r\n        }\r\n\r\n        if (props.dataPage === TAB_LIPIDS_DATA) {\r\n            const selectedSubChart = applicationContext\r\n                ? index === 1\r\n                    ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart1\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart1\r\n                        : LIPIDS_DATA_BASE\r\n                    : applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart2\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart2\r\n                        : LIPIDS_DATA_BASE\r\n                : LIPIDS_DATA_BASE\r\n\r\n            preconfig = {\r\n                ...preconfig,\r\n                subChart: selectedSubChart,\r\n                handleSubchartChange: index === 1 ? handleSubchart1Change : handleSubchart2Change,\r\n                chartIndex: index\r\n            }\r\n\r\n            return <LipidsDataChart key = {`${TAB_LIPIDS_DATA} ${index}`} selectedFoodItem={selectedFoodItem} directCompareUse={true}\r\n                                    directCompareConfig={preconfig}/>\r\n        }\r\n\r\n        if (props.dataPage === TAB_CARBS_DATA) {\r\n            const selectedSubChart = applicationContext\r\n                ? index === 1\r\n                    ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart1\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart1\r\n                        : CARBS_DATA_BASE\r\n                    : applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart2\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart2\r\n                        : CARBS_DATA_BASE\r\n                : CARBS_DATA_BASE\r\n\r\n            preconfig = {\r\n                ...preconfig,\r\n                subChart: selectedSubChart,\r\n                chartIndex: index,\r\n                handleSubchartChange: index === 1 ? handleSubchart1Change : handleSubchart2Change\r\n            }\r\n\r\n            return <CarbsDataChart key = {`${TAB_CARBS_DATA} ${index}`} selectedFoodItem={selectedFoodItem} directCompareUse={true}\r\n                                   directCompareConfig={preconfig}/>\r\n        }\r\n    }\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}} key={\"directcompare container\" + containerHeight}>\r\n                <div className={\"vertical-label\"}>{props.selectedFoodItem1.resolvedName}</div>\r\n                {getChartComponent(props.selectedFoodItem1, 1)}\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}} key={\"directcompare container\" + containerHeight}>\r\n                <div className={\"vertical-label\"}>{props.selectedFoodItem2.resolvedName}</div>\r\n                {getChartComponent(props.selectedFoodItem2, 2)}\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../charthelper/BarChartConfigurationForm\";\r\nimport {getMaximumValue, nullifyIncompleValues} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {roundToNextValue} from \"../../service/calculation/MathService\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport ProteinDataChart from \"../fooddatapanel/charts/ProteinDataChart\";\r\nimport {\r\n    BarChartDirectCompareConfig,\r\n    DirectCompareDataPanelProps,\r\n    ProteinDataChartProps\r\n} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport function DC_ProteinDataChart(props: DirectCompareDataPanelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.proteinChartConfig\r\n        : initialDirectCompareConfigData.proteinChartConfig\r\n\r\n    const [portionType, setPortionType] = useState<string>(chartConfig.portionType)\r\n    const [expand100, setExpand100] = useState<boolean>(chartConfig.expand100)\r\n    const [synchronize, setSynchronize] = useState<boolean>(chartConfig.synchronize)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        updateChartConfig()\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [portionType, expand100, synchronize, containerHeight, windowSize.height])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            const newChartConfig = {\r\n                ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                proteinChartConfig: {\r\n                    portionType: portionType,\r\n                    expand100: expand100,\r\n                    synchronize: synchronize\r\n                }\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        }\r\n    }\r\n\r\n    const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.proteinRequirementData\r\n    if (!requirementData) {\r\n        return <div></div>\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        setPortionType(event.target.value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleSynchronize = () => {\r\n        setSynchronize(!synchronize)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const barChartProps = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox,\r\n            handleSynchronize: handleSynchronize\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps}/>\r\n    }\r\n\r\n    const dataSet1 = getNutrientData(props.selectedFoodItem1).proteinData\r\n    const dataSet2 = getNutrientData(props.selectedFoodItem2).proteinData\r\n\r\n    const maxValue1 = getMaximumValue(dataSet1, props.selectedFoodItem1.portion.amount, requirementData, applicationContext.userData, true)\r\n    const maxValue2 = getMaximumValue(dataSet2, props.selectedFoodItem2.portion.amount, requirementData, applicationContext.userData, true)\r\n    const maxValue = Math.max(maxValue1, maxValue2)\r\n\r\n    if (synchronize) {\r\n        nullifyIncompleValues(dataSet1, dataSet2)\r\n    }\r\n\r\n    const maxY = synchronize ? roundToNextValue(maxValue) : undefined\r\n\r\n    const preconfig: BarChartDirectCompareConfig = {\r\n        maxValue: maxY,\r\n        portionType: portionType,\r\n        expand100: expand100,\r\n        synchronize: synchronize,\r\n        barChartColor: ''\r\n    }\r\n\r\n    const preconfigFoodItem1 = {...preconfig, barChartColor: direct_compare_color1}\r\n    const preconfigFoodItem2 = {...preconfig, barChartColor: direct_compare_color2}\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <ProteinDataChart selectedFoodItem={props.selectedFoodItem1}\r\n                                  directCompareUse={true} directCompareConfig={preconfigFoodItem1}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <ProteinDataChart selectedFoodItem={props.selectedFoodItem2}\r\n                                  directCompareUse={true} directCompareConfig={preconfigFoodItem2}/>\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {Card} from \"react-bootstrap\";\r\nimport EnergyDataChart from \"../fooddatapanel/charts/EnergyDataChart\";\r\nimport {DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\n\r\nexport function DC_EnergyChart(props: DirectCompareDataPanelProps) {\r\n    const windowSize = useWindowDimension()\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [containerHeight, windowSize.height])\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <div className={\"vertical-label\"}>{props.selectedFoodItem1.resolvedName}</div>\r\n                <EnergyDataChart selectedFoodItem={props.selectedFoodItem1} directCompareUse={true}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <div className={\"vertical-label\"}>{props.selectedFoodItem2.resolvedName}</div>\r\n                <EnergyDataChart selectedFoodItem={props.selectedFoodItem2} directCompareUse={true}/>\r\n            </div>\r\n        </Card>\r\n    </div>\r\n\r\n}","import {ChartMenuPanel} from \"../fooddatapanel/ChartMenuPanel\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    TAB_BASE_DATA, TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA, TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {useContext, useState} from \"react\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {DC_MineralVitaminChart} from \"./DC_MineralVitaminChart\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport {DC_PieChart} from \"./DC_PieChart\";\r\nimport {DC_ProteinDataChart} from \"./DC_ProteinDataChart\";\r\nimport {DC_EnergyChart} from \"./DC_EnergyChart\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {InfoData} from \"../fooddatapanel/charts/InfoData\";\r\n\r\nexport function DirectCompareDataPanel(props: DirectCompareDataPanelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    const initialPage = applicationContext?.applicationData.directCompareDataPanel.selectedDataPage\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedDataPage\r\n        : TAB_BASE_DATA\r\n\r\n    const [selectedDataTab, setSelectedDataTab] = useState<string>(initialPage)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const setDataPage = (datapage: string) => {\r\n        applicationContext.setDirectCompareData.setSelectedDirectCompareDataPage(datapage)\r\n        setSelectedDataTab(datapage)\r\n    }\r\n\r\n    const foodNames = applicationContext.foodDataCorpus.foodNames\r\n\r\n    const nameId1 = props.selectedFoodItem1.foodItem.nameId ? props.selectedFoodItem1.foodItem.nameId : null\r\n    const nameId2 = props.selectedFoodItem2.foodItem.nameId ? props.selectedFoodItem2.foodItem.nameId : null\r\n\r\n    const name1 = nameId1 ? getNameFromFoodNameList(foodNames, nameId1, languageContext.language) : \"\"\r\n    const name2 = nameId2 ? getNameFromFoodNameList(foodNames, nameId2, languageContext.language) : \"\"\r\n\r\n    const selectedFoodItem1: SelectedFoodItem = {...props.selectedFoodItem1, resolvedName: name1}\r\n    const selectedFoodItem2: SelectedFoodItem = {...props.selectedFoodItem2, resolvedName: name2}\r\n\r\n    const renderCharts = () => {\r\n        switch (selectedDataTab) {\r\n            case TAB_BASE_DATA:\r\n                return <DC_PieChart key={TAB_BASE_DATA}\r\n                                    selectedFoodItem1={selectedFoodItem1}\r\n                                    selectedFoodItem2={selectedFoodItem2}\r\n                                    dataPage={TAB_BASE_DATA}\r\n                />\r\n            case TAB_ENERGY_DATA:\r\n                return <DC_EnergyChart selectedFoodItem1={selectedFoodItem1}\r\n                                       selectedFoodItem2={selectedFoodItem2}\r\n                />\r\n\r\n            case TAB_VITAMIN_DATA:\r\n                return <DC_MineralVitaminChart key={TAB_VITAMIN_DATA}\r\n                                               selectedFoodItem1={selectedFoodItem1}\r\n                                               selectedFoodItem2={selectedFoodItem2}\r\n                                               selectedSubChart={CHART_VITAMINS}\r\n                />\r\n            case TAB_MINERAL_DATA:\r\n                return <DC_MineralVitaminChart key={TAB_MINERAL_DATA}\r\n                                               selectedFoodItem1={selectedFoodItem1}\r\n                                               selectedFoodItem2={selectedFoodItem2}\r\n                                               selectedSubChart={CHART_MINERALS}\r\n                />\r\n            case TAB_LIPIDS_DATA:\r\n                return <DC_PieChart key={TAB_LIPIDS_DATA}\r\n                                    selectedFoodItem1={selectedFoodItem1}\r\n                                    selectedFoodItem2={selectedFoodItem2}\r\n                                    dataPage={TAB_LIPIDS_DATA}\r\n                />\r\n            case TAB_CARBS_DATA:\r\n                return <DC_PieChart key={TAB_CARBS_DATA}\r\n                                    selectedFoodItem1={selectedFoodItem1}\r\n                                    selectedFoodItem2={selectedFoodItem2}\r\n                                    dataPage={TAB_CARBS_DATA}\r\n                />\r\n            case TAB_PROTEINS_DATA:\r\n                return <DC_ProteinDataChart selectedFoodItem1={selectedFoodItem1}\r\n                                            selectedFoodItem2={selectedFoodItem2}\r\n                />\r\n            case TAB_INFO:\r\n                return <div>\r\n                    <Card>\r\n                        <InfoData selectedFoodItem={props.selectedFoodItem1} directCompare={true}/>\r\n                    </Card>\r\n                    <Card>\r\n                        <InfoData selectedFoodItem={props.selectedFoodItem2} directCompare={true}/>\r\n                    </Card>\r\n                </div>\r\n\r\n        }\r\n\r\n        return <div/>\r\n    }\r\n\r\n    return <div>\r\n        <Card.Header>\r\n            <ChartMenuPanel dataPage={selectedDataTab} verticalArrangement={false} setDataPage={setDataPage}/>\r\n        </Card.Header>\r\n        {renderCharts()}\r\n    </div>\r\n\r\n}","import { DirectCompareChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\"\r\nimport { DirectCompareUriData, FoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { getUpdatedDirectCompareChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\nimport {\r\n\tconvertUserDataObjectToString,\r\n\tconvertUserDataStringToObject,\r\n\tgetFoodItemUriData,\r\n\tmakeFoodItemDefaultUri,\r\n\tprepareUriForParsing\r\n} from \"./FoodDataPanelUriService\"\r\n\r\nexport function makeDirectCompareDataUri(selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem, \r\n\t\tuserData: UserData, selectedDataPage: string, chartConfigData: DirectCompareChartConfigData): string {\r\n\tconst foodItemUriData1 = makeFoodItemUriData(selectedFoodItem1)\r\n\tconst foodItemUriData2 = makeFoodItemUriData(selectedFoodItem2)\r\n\t\r\n\tconst foodItem1DataUri = makeFoodItemDefaultUri(foodItemUriData1)\r\n\tconst foodItem2DataUri = makeFoodItemDefaultUri(foodItemUriData2)\r\n\t\r\n\tconst userDataUri = convertUserDataObjectToString(userData)\r\n\tconst chartConfigUri = makeChartConfigUriString(chartConfigData, selectedDataPage)\r\n\t\r\n\treturn `${foodItem1DataUri};${foodItem2DataUri};${selectedDataPage};${userDataUri};${chartConfigUri}`\r\n}\r\n\r\n\r\nfunction makeFoodItemUriData(selectedFoodItem: SelectedFoodItem): FoodItemUriData {\r\n\treturn {\r\n\t\tfoodItemId: selectedFoodItem.foodItem.id,\r\n\t\tportionData: selectedFoodItem.portion,\r\n\t\tsource: selectedFoodItem.selectedSource,\r\n\t\tcombineData: selectedFoodItem.combineData,\r\n\t\tsupplementData: selectedFoodItem.supplementData\r\n\t}\r\n}\r\n\r\n\r\nexport function parseDirectComparetUri(uri: string, chartConfigData: DirectCompareChartConfigData): DirectCompareUriData | null {\r\n\tconst fragments = prepareUriForParsing(uri).split(\";\")\r\n\tif(fragments.length !== 11) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst selectedDataPage = fragments[8]\r\n\tconst userData = convertUserDataStringToObject(fragments[9])\r\n\tconst chartConfigString = fragments[10]\r\n\t\r\n\tconst foodItemUriData1 = getFoodItemUriData(fragments)\r\n\tconst remainingFragments = fragments.slice(4)\r\n\tconst foodItemUriData2 = getFoodItemUriData(remainingFragments)\r\n\t\r\n\tif(!userData || !foodItemUriData1 || !foodItemUriData2) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst newChartConfigData = getUpdatedDirectCompareChartConfig(chartConfigData, chartConfigString, selectedDataPage)\r\n\t\r\n\treturn {\r\n\t\tselectedFoodItem1: foodItemUriData1,\r\n\t\tselectedFoodItem2: foodItemUriData2,\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n\t\r\n}","import {DirectCompareSelector} from \"../foodselector/DirectCompareSelector\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport ApplicationDataContextProvider, {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {DirectCompareDataPanel} from \"./DirectCompareDataPanel\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {PATH_DIRECT_COMPARE, QUERYKEY_DATAPANEL_AGGREGATED, QUERYKEY_DATAPANEL_ITEM, TAB_LIST} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {NotificationManager} from 'react-notifications'\r\nimport { AggregatedFoodItemUriData } from \"../../types/livedata/UriData\";\r\nimport { makeDirectCompareDataUri, parseDirectComparetUri } from \"../../service/uri/DirectCompareUriService\";\r\nimport { checkUserDataValidity, USERDATA_OK } from \"../../service/UserDataService\";\r\n\r\nexport default function DirectCompareContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const initialFoodItem1 = applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        : null\r\n\r\n    const initialFoodItem2 = applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        : null\r\n\r\n    const [selectedFoodItem1, setSelectedFoodItem1] = useState<SelectedFoodItem | null>(initialFoodItem1)\r\n    const [selectedFoodItem2, setSelectedFoodItem2] = useState<SelectedFoodItem | null>(initialFoodItem2)\r\n\r\n\tuseEffect(() => {\r\n        buildDataObjectsFromURI()\r\n    }, [applicationContext?.applicationData.directCompareDataPanel])\r\n\r\n\t\r\n    if (applicationContext === null || !applicationContext.ready) {\r\n        return <div/>\r\n    }\r\n\r\n\tconst buildDataObjectsFromURI = () => {\r\n\t\tif(!applicationContext) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tif(!selectedFoodItem1 || !selectedFoodItem2) {\t\t\t\r\n\t\t\tcreateDataFromUriQuery()\t\t\r\n\t\t} else {   // Set new URI Query\t\t\r\n\t\t\tupdateUriQuery()\r\n\t\t}\r\n    }\r\n\r\n\tconst chartConfigData = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n\tconst updateUriQuery = () => {\r\n\t\tconst userData = applicationContext.userData\r\n\t\tconst selectedDataPage = applicationContext.applicationData.directCompareDataPanel.selectedDataPage\r\n\r\n\t\tif(selectedFoodItem1 && selectedFoodItem2) {\r\n\t\t\tconst query = makeDirectCompareDataUri(selectedFoodItem1, selectedFoodItem2, userData, selectedDataPage, \r\n\t\t\t\tchartConfigData)\r\n\t\t\t\t\r\n\t\t\thistory.push({\r\n\t\t\t\tpathName: PATH_DIRECT_COMPARE,\r\n\t\t\t\tsearch: `${QUERYKEY_DATAPANEL_ITEM}=${query}`\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst createDataFromUriQuery = () => {\r\n\t\t\tconst queryString = window.location.search.substring(1)\r\n\t\t\tconst equalOperator = queryString.indexOf(\"=\")\r\n            const key = queryString.substring(0, equalOperator)\r\n            const value = queryString.substring(equalOperator+1)\r\n\r\n\t\t\t// Set data from a simple food item (create data from query parameters)\r\n\t\t\tif(key === QUERYKEY_DATAPANEL_ITEM && value.length > 1) {\r\n\t\t\t\tconst uriDataObject = parseDirectComparetUri(value, chartConfigData)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tif(uriDataObject) {\r\n\t\t\t\t\tconst foodItem1 = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem1.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tconst foodItem2 = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem2.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif(!foodItem1 || !foodItem2) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tapplicationContext.setUserData(uriDataObject.userData)\t\r\n\t\t\t\t\tapplicationContext.setDirectCompareData.updateDirectCompareChartConfig(uriDataObject.chartConfigData)\r\n\t\t\t\t\tapplicationContext.setDirectCompareData.setSelectedDirectCompareDataPage(uriDataObject.selectedDataPage)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst foodClass1 = applicationContext.foodDataCorpus.foodClasses.find(\r\n\t\t\t\t\t\tfoodClass => foodClass.id === foodItem1.foodClass)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tconst foodClass2 = applicationContext.foodDataCorpus.foodClasses.find(\r\n\t\t\t\t\t\tfoodClass => foodClass.id === foodItem2.foodClass)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem1: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1000,\r\n\t\t\t\t\t\tfoodItem: foodItem1,\r\n\t\t\t\t\t\tfoodClass: foodClass1,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem1.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem1.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem1.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem1.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem2: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1001,\r\n\t\t\t\t\t\tfoodItem: foodItem2,\r\n\t\t\t\t\t\tfoodClass: foodClass2,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem2.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem2.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem2.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem2.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tupdateSelectedFoodItems(selectedFoodItem1, selectedFoodItem2)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n    const updateSelectedFoodItems = (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => {\r\n        setSelectedFoodItem1(selectedFoodItem1)\r\n        setSelectedFoodItem2(selectedFoodItem2)\r\n        applicationContext.setDirectCompareData.setSelectedDirectCompareItems(selectedFoodItem1, selectedFoodItem2)\r\n    }\r\n\r\n    return (\r\n        <div className={\"container-fluid\"}>\r\n            <div className={\"row\"}>\r\n                <div className={\"col-4\"}>\r\n                    <DirectCompareSelector updateSelectedFoodItems={updateSelectedFoodItems}/>\r\n                </div>\r\n                <div className={\"col-8\"} style={{padding: \"32px\"}}>\r\n                    {selectedFoodItem1 !== null && selectedFoodItem2 !== null ?\r\n                    <DirectCompareDataPanel selectedFoodItem1={selectedFoodItem1}\r\n                                            selectedFoodItem2={selectedFoodItem2}/>\r\n                        : <div className={\"app\"}><i>{applicationStrings.direct_compare_text[languageContext.language]}</i></div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import './App.css';\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"bootstrap/dist/js/bootstrap.min.js\";\r\nimport {NotificationContainer} from 'react-notifications'\r\nimport ApplicationDataContextProvider from \"./contexts/ApplicationDataContext\";\r\nimport FoodDataPanelContainer from \"./components/fooddatapanel/FoodDataPanelContainer\";\r\nimport React, {useEffect} from \"react\";\r\nimport Header from \"./components/Header\";\r\nimport {\r\n    PATH_CONTACT,\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODCOMPARE,\r\n    PATH_FOODDATA_PANEL, PATH_FOODDATA_PANEL_ADD,\r\n    PATH_HOME,\r\n    PATH_MOBILE_APP,\r\n    PATH_USERSETTINGS\r\n} from \"./config/Constants\";\r\nimport {LanguageProvider} from \"./contexts/LangContext\";\r\nimport {UserSettings} from \"./components/UserSettings\";\r\nimport {Contact} from \"./components/Contact\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport GA4React, {useGA4React} from \"ga-4-react\";\r\nimport {ANALYTICS_MESS_ID} from \"./config/GoogleTools\";\r\nimport {render} from \"react-dom\";\r\nimport {Home} from \"./components/Home\";\r\nimport {FoodCompareApp} from \"./components/FoodCompareApp\";\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\r\nimport Switch from \"react-bootstrap/Switch\";\r\nimport DirectCompareContainer from \"./components/directcompare/DirectCompareContainer\";\r\n\r\nconst ga4react = new GA4React(ANALYTICS_MESS_ID);\r\n\r\nfunction App(): JSX.Element {\r\n    useEffect(() => {\r\n        ReactTooltip.rebuild()\r\n    })\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <NotificationContainer/>\r\n            <ReactTooltip/>\r\n            <LanguageProvider>\r\n                <ApplicationDataContextProvider>\r\n                    <Router>\r\n                        <Header/>\r\n                        <Switch>\r\n                            <Route path={PATH_FOODCOMPARE} component={Home}/>\r\n                            <Route path={PATH_HOME} component={Home}/>\r\n                            <Route path={PATH_FOODDATA_PANEL_ADD}\r\n                                   render={(props) => (<FoodDataPanelContainer {...props} openSelectorModal={true}/>)\r\n                                   }\r\n                            />\r\n                            <Route path={PATH_FOODDATA_PANEL} component={FoodDataPanelContainer}/>\r\n                            <Route path={PATH_DIRECT_COMPARE} component={DirectCompareContainer}/>\r\n                            <Route path={PATH_MOBILE_APP} component={FoodCompareApp}/>\r\n                            <Route path={PATH_USERSETTINGS} component={UserSettings}/>\r\n                            <Route path={PATH_CONTACT} component={Contact}/>\r\n                            <Route exact path={\"/\"} component={Home}/>\r\n                        </Switch>\r\n                    </Router>\r\n                </ApplicationDataContextProvider>\r\n            </LanguageProvider>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n(async () => {\r\n    try {   // NOTE: uBlock Origin may cause a crash here\r\n        await ga4react.initialize();\r\n    } catch (e) {\r\n        console.error(e)\r\n    }\r\n    render(\r\n        <React.StrictMode>\r\n            <App/>\r\n        </React.StrictMode>,\r\n        document.getElementById(\"root\")\r\n    );\r\n})();\r\n\r\nexport default App;\r\n","export const ANALYTICS_MESS_ID = 'G-DXHX3Y13KZ'\r\n\r\nexport const ADSENSE_TRACKING_ID = 'ca-pub-2335013571820161'\r\n\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport {hydrate, render} from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nif (rootElement && rootElement.hasChildNodes()) {\r\n    hydrate(<App />, rootElement);\r\n} else {\r\n    render(<React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>, rootElement);\r\n}\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n\r\n\r\n"],"sourceRoot":""}