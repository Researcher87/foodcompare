{"version":3,"sources":["static/image/carousel sync /^/.*$","static/image/carousel/Img-de-1.png","static/image/carousel/Img-de-2.png","static/image/carousel/Img-de-3.png","static/image/carousel/Img-de-4.png","static/image/carousel/Img-de-5.png","static/image/carousel/Img-de-6.png","static/image/carousel/Img-de-7.png","static/image/carousel/Img-en-1.png","static/image/carousel/Img-en-2.png","static/image/carousel/Img-en-3.png","static/image/carousel/Img-en-4.png","static/image/carousel/Img-en-5.png","static/image/carousel/Img-en-6.png","static/image/carousel/Img-en-7.png","service/NutrientDataImportService.ts","config/Constants.ts","config/ApplicationSetting.ts","service/LanguageService.ts","service/nutrientdata/NameTypeService.ts","service/uri/BaseUriService.ts","contexts/ApplicationDataContext.tsx","contexts/LangContext.tsx","config/ApplicationKeys.ts","static/image/logo.png","static/image/text.png","static/labels.ts","service/WindowDimension.ts","components/Header.tsx","service/GA_EventService.ts","config/GA_Events.ts","components/Home.tsx","service/nutrientdata/CategoryService.ts","service/nutrientdata/FoodItemsService.ts","service/nutrientdata/FoodClassService.ts","service/nutrientdata/PortionDataService.ts","service/nutrientdata/NutrientDataRetriever.ts","config/UI_Config.ts","components/foodselector/FoodSelector.tsx","components/foodselector/CompositeFoodList.tsx","service/calculation/FoodDataAggregationService.ts","components/HelpModal.tsx","service/HelpService.ts","components/foodselector/FoodSelectorModal.tsx","components/ConfirmationDialog.tsx","config/ChartConfig.ts","service/ChartConfigurationService.ts","components/charthelper/PieChartConfigurationForm.tsx","components/charthelper/CustomLegend.tsx","service/nutrientdata/ChartSizeCalculation.tsx","service/calculation/MathService.ts","service/chartdata/BaseChartDataService.ts","components/fooddatapanel/charts/BaseDataChart.tsx","config/EnergyConstants.ts","service/calculation/EnergyService.ts","components/fooddatapanel/charts/EnergyDataChart.tsx","components/charthelper/BarChartConfigurationForm.tsx","service/calculation/DietaryRequirementService.ts","components/fooddatapanel/charts/MineralVitaminChart.tsx","service/chartdata/VitaminsMineralsDataService.ts","service/calculation/CarotenoidCalculationService.ts","service/chartdata/LipidsChartDataService.ts","components/fooddatapanel/charts/LipidsDataChart.tsx","components/fooddatapanel/charts/ProteinDataChart.tsx","service/chartdata/ProteinChartDataService.ts","service/chartdata/CarbsChartDataService.ts","components/fooddatapanel/charts/CarbsDataChart.tsx","components/fooddatapanel/ChartPanel.tsx","components/fooddatapanel/FoodDataTable.tsx","components/fooddatapanel/charts/InfoData.tsx","components/fooddatapanel/FoodDataPageBody.tsx","components/fooddatapanel/ChartMenuPanel.tsx","components/fooddatapanel/FoodDataPageHeader.tsx","service/TableService.ts","components/fooddatapanel/FoodDataPage.tsx","service/FoodDataPanelService.tsx","components/fooddatapanel/FoodAnalyzerContainer.tsx","components/fooddatapanel/TabContainer.tsx","service/uri/ChartConfigConverter.ts","service/uri/FoodDataPanelUriService.ts","service/uri/FoodDataPanelAggregatedUriService.ts","service/UserDataService.ts","components/fooddatapanel/FoodDataPanelContainer.tsx","components/foodselector/DirectCompareSelector.tsx","service/calculation/NutrientCalculationService.ts","components/directcompare/VerticalLabel.tsx","components/directcompare/DcMineralVitaminChart.tsx","components/directcompare/DcPieChart.tsx","components/directcompare/DcProteinDataChart.tsx","components/directcompare/DcEnergyChart.tsx","components/directcompare/DirectCompareDataPanel.tsx","service/uri/DirectCompareUriService.ts","components/directcompare/DirectCompareContainer.tsx","components/UserSettings.tsx","config/ErrorMessageCodes.ts","service/MailService.ts","components/contact/ContactForm.tsx","components/contact/Sources.tsx","components/contact/Versions.tsx","static/image/impressum-german.png","static/image/impressum-english.png","components/contact/Impressum.tsx","components/contact/ContactContainer.tsx","components/ranking/RankingSelector.tsx","service/uri/RankingPanelUriService.ts","service/RankingService.ts","components/ranking/RankingChart.tsx","components/ranking/RankingContainer.tsx","components/WebPageContainer.tsx","components/MobileDeviceCheck.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","loadFoodDataCorpus","categories","nutrientdata","conditions","portionTypes","sources","foodNames","foodClasses","foodItems","dietaryRequirements","AMOUNT_PORTION","GRAM","CHART_TYPE_PIE","CHART_TYPE_BAR","CHART_VITAMINS","CHART_MINERALS","CATEGORY_BEVERAGE","DATA_ASH","DATA_ENERGY","DATA_WATER","DATA_CARBS","DATA_LIPIDS","DATA_PROTEINS","DATA_MINERAL_CALCIUM","DATA_MINERAL_IRON","DATA_MINERAL_MAGNESIUM","DATA_MINERAL_PHOSPHORUS","DATA_MINERAL_POTASSIUM","DATA_MINERAL_SODIUM","DATA_MINERAL_ZINC","DATA_MINERAL_SELENIUM","DATA_MINERAL_MANGANESE","DATA_MINERAL_COPPER","DATA_VITAMINS_A","DATA_VITAMINS_B1","DATA_VITAMINS_B2","DATA_VITAMINS_B3","DATA_VITAMINS_B5","DATA_VITAMINS_B6","DATA_VITAMINS_B9","DATA_VITAMINS_B12","DATA_VITAMINS_C","DATA_VITAMINS_D","DATA_VITAMINS_E","DATA_VITAMINS_K","DATA_LIPIDS_SATURATED","DATA_LIPIDS_MONO_UNSATURATED","DATA_LIPIDS_POLY_UNSATURATED","DATA_LIPIDS_TRANSFATTY_ACIDS","DATA_CARBS_DIETARY_FIBERS","DATA_CARBS_SUGAR","DATA_CARBS_GLUCOSE","DATA_CARBS_FRUCTOSE","DATA_CARBS_GALACTOSE","DATA_CARBS_SUCROSE","DATA_CARBS_LACTOSE","DATA_CARBS_MALTOSE","DATA_CARBS_STARCH","DATA_PROTEIN_TRYPTOPHAN","DATA_PROTEIN_THREONINE","DATA_PROTEIN_ISOLEUCINE","DATA_PROTEIN_LEUCINE","DATA_PROTEIN_LYSINE","DATA_PROTEIN_METHIONINE","DATA_PROTEIN_CYSTINE","DATA_PROTEIN_PHENYLALANINE","DATA_PROTEIN_TYROSINE","DATA_PROTEIN_VALINE","DATA_PROTEIN_ARGININE","DATA_PROTEIN_HISTIDINE","DATA_PROTEIN_ALANINE","DATA_PROTEIN_ASPARTIC_ACID","DATA_PROTEIN_GLUTAMIC_ACID","DATA_PROTEIN_GLYCINE","DATA_PROTEIN_PROLINE","DATA_PROTEIN_SERINE","DISPLAYMODE_TABLE","DISPLAYMODE_CHART","CARBS_DATA_BASE","CARBS_DATA_DETAIL","LIPIDS_DATA_BASE","LIPIDS_DATA_OMEGA","PATH_DIRECT_COMPARE","PATH_FOODCOMPARE","PATH_FOODDATA_PANEL","PATH_HOME","PATH_CONTACT","PATH_USERSETTINGS","PATH_RANKING","PORTION_KEY_INDIVIDUAL","PORTION_KEY_100","LANGUAGE_DE","LANGUAGE_EN","SEX_MALE","SEX_FEMALE","SOURCE_SRLEGACY","SOURCE_FNDDS","TAB_BASE_DATA","TAB_ENERGY_DATA","TAB_VITAMIN_DATA","TAB_MINERAL_DATA","TAB_LIPIDS_DATA","TAB_CARBS_DATA","TAB_PROTEINS_DATA","TAB_INFO","QUERYKEY_DATAPANEL_ADD","QUERYKEY_DATAPANEL_ADD_COMPOSITE","QUERYKEY_DATAPANEL_ITEM","QUERYKEY_DATAPANEL_RANKING","QUERYKEY_DATAPANEL_AGGREGATED","release","buildDate","maxMessageCharacters","maxElementsInRankingChart","initialFoodClassId","initialComparisonFoodClassId","minimalOmegaRatio","smallFormsScreenSize","width","height","initialUserDataAge","initialUserDataSize","initialUserDataWeight","initialUserDataSex","initialUserDataPregnant","initialUserDataBreastfeeding","initialUserDataLeisureSports","initialChartConfigData","baseChartConfig","chartType","showLegend","showDetails","vitaminChartConfig","portionType","expand100","mineralChartConfig","lipidsChartConfig","hideRemainders","subChart","carbsChartConfig","proteinChartConfig","initialDirectCompareConfigData","synchronize","subChart1","subChart2","getName","nameType","language","verbose","arguments","length","undefined","name","germanName","englishName","includes","index","indexOf","substring","trim","removeAuxiliaryInformationFromFoodName","getNameFromFoodNameList","foodNameList","find","shortenName","maxLength","indexOfBrace","parseFoodCompareUri","queryString","window","location","search","equalOperator","key","value","ApplicationDataContextStore","createContext","ApplicationDataContextProvider","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","args","Array","_key","call","apply","concat","setDebugState","debug","setState","prevState","applicationData","_objectSpread","setSelectedFoodDataPanelTab","selectedTab","foodDataPanel","selectedFoodItemIndex","setSelectedDisplayMode","displayMode","setSelectedFoodDataPanelPage","selectedPage","selectedDataPage","addItemToFoodDataPanel","foodItem","newItems","assign","state","selectedFoodItems","push","removeItemFromFoodDataPanel","foodItemId","filter","selectedFoodItem","newIndex","currentIndex","removeAllItemsFromFoodDataPanel","updateAllFoodItemNames","newLanguage","newFoodItems","foodName","nameId","tab","updateFoodDataPanelChartConfig","chartConfig","chartConfigData","setSelectedDirectCompareItems","selectedFoodItem1","selectedFoodItem2","directCompareDataPanel","setSelectedDirectCompareDataPage","updateDirectCompareChartConfig","directCompareConfigChart","setUserData","userData","setPreferredSource","source","preferredSource","setFoodSelectorConfig","selectedCategory","sourceSupplement","sourceCombine","foodSelector","setDirectCompareFoodSelectorConfig1","foodSelector1","setDirectCompareFoodSelectorConfig2","foodSelector2","setRankingPanelData","rankingPanelData","foodDataCorpus","selectedFoodCategory","selectedGroup","selectedElement","use100gram","showDietaryRequirements","age","size","weight","sex","pregnant","breastFeeding","palValue","leisureSports","initialValues","isDebugMode","ready","useAsMobile","_createClass","uriData","NutrientDataImportService","this","_this2","setMobileUsage","usage","setFoodDataPanelData","setSelectedFoodTab","setSelectedDataPage","setDirectCompareData","setDirectCompareFoodSelector1","setDirectCompareFoodSelector2","_jsx","Provider","children","props","Component","LanguageContext","userLanguageChange","selectedLanguage","LanguageProvider","_ref","userLanguage","navigator","preferredLanguage","_useState","useState","_useState2","_slicedToArray","setLanguage","provider","selectedLanaguage","ANALYTICS_MESS_ID","RECAPTCHA_KEY","SERVICE_ID","TEMPLATE_ID","USER_ID","applicationStrings","button_add","de","en","button_cancel","button_change_to_chart_mode","button_close","button_getstarted_1","button_getstarted_2","button_getstarted_3","button_getstarted_4","button_no","button_select","button_show","button_send","button_submit","button_update","button_yes","checkbox_chartoption_hideRemainders","checkbox_chartoption_showLegend","checkbox_chartoption_showLegend_m","checkbox_chartoption_showDetails","checkbox_chartoption_showDetails_m","checkbox_english","checkbox_english_m","checkbox_expand100g","checkbox_german","checkbox_german_m","checkbox_synchronize","confirm_close_all_tabs","device_detection_hint","direct_compare_text","home_carousel_0","home_carousel_1","home_carousel_2","home_carousel_3","home_carousel_4","home_carousel_5","home_carousel_6","home_text_1","home_text_2","home_text_3","home_foodcompare_overview","input_compositelist_title","label_amount","label_amount_short","label_category","label_charttype","label_charttype_pie","label_charttype_bar","label_charttype_carbs_base","label_charttype_carbs_detail","label_charttype_energy","label_charttype_lipids_base","label_charttype_lipids_base_title","label_charttype_lipids_omega","label_charttype_lipids_omega_title","label_charttype_minerals","label_charttype_proteins","label_charttype_vitamins","label_chart_bmr","label_chart_energyExpenditure","label_chart_proteins","label_chart_nutrientComposition","label_chart_totalComposition","label_chart_view","label_datatype","label_food","label_foodclass","label_fooditem","label_foodselector","label_foodselector_composite","label_group","label_getStarted","label_info","label_info_composite","label_info_category","label_info_foodClass","label_info_foodId","label_info_foodName","label_info_portion","label_info_portionType","label_info_preparation","label_info_source","label_language","label_mail_name","label_mail_address","label_mail_message","label_mail_characters_left","label_mail_too_long","label_mail_error_name","label_mail_error_mailaddress","label_mail_error_nocontent","label_mail_error_content_too_long","label_mail_error_verification","label_noData","label_nutrient_alcohol","label_nutrient_ash","label_nutrient_carbohydrates","label_nutrient_carbohydrates_short","label_nutrient_carbohydrates_fructose","label_nutrient_carbohydrates_galactose","label_nutrient_carbohydrates_glucose","label_nutrient_carbohydrates_lactose","label_nutrient_carbohydrates_maltose","label_nutrient_carbohydrates_starch","label_nutrient_carbohydrates_sucrose","label_nutrient_dietaryFibers","label_nutrient_dietaryFibers_short","label_nutrient_energy","label_nutrient_lipids","label_nutrient_lipids_long","label_nutrient_lipids_saturated","label_nutrient_lipids_saturated_short","label_nutrient_lipids_unsaturated","label_nutrient_lipids_unsaturated_mono","label_nutrient_lipids_unsaturated_mono_short","label_nutrient_lipids_unsaturated_poly","label_nutrient_lipids_unsaturated_poly_short","label_nutrient_lipids_transfattyAcids","label_nutrient_lipids_omega3","label_nutrient_lipids_omega6","label_nutrient_lipids_cholesterol","label_nutrient_min","label_nutrient_min_calcium","label_nutrient_min_copper","label_nutrient_min_iron","label_nutrient_min_magnesium","label_nutrient_min_manganese","label_nutrient_min_phosphorus","label_nutrient_min_potassimum","label_nutrient_min_selenium","label_nutrient_min_sodium","label_nutrient_min_zinc","label_nutrient_omega3","label_nutrient_omega6","label_nutrient_proteins","label_nutrient_proteins_alanine","label_nutrient_proteins_arginine","label_nutrient_proteins_asparticAcid","label_nutrient_proteins_cystine","label_nutrient_proteins_glysine","label_nutrient_proteins_glutamicAcid","label_nutrient_proteins_histidine","label_nutrient_proteins_isoleucine","label_nutrient_proteins_leucine","label_nutrient_proteins_lysine","label_nutrient_proteins_methionine","label_nutrient_proteins_phenylalanine","label_nutrient_proteins_proline","label_nutrient_proteins_serine","label_nutrient_proteins_threonine","label_nutrient_proteins_tryptophan","label_nutrient_proteins_tyrosine","label_nutrient_proteins_valine","label_nutrient_remainder","label_nutrient_sugar","label_nutrient_vit","label_nutrient_vit_a","label_nutrient_vit_b1","label_nutrient_vit_b2","label_nutrient_vit_b3","label_nutrient_vit_b5","label_nutrient_vit_b6","label_nutrient_vit_b9","label_nutrient_vit_b12","label_nutrient_vit_c","label_nutrient_vit_d","label_nutrient_vit_e","label_nutrient_vit_k","label_nutrient_vit_carotenoid","label_nutrient_vit_carotenoid_alpha","label_nutrient_vit_carotenoid_beta","label_nutrient_vit_scientific_a","label_nutrient_vit_scientific_b1","label_nutrient_vit_scientific_b2","label_nutrient_vit_scientific_b3","label_nutrient_vit_scientific_b5","label_nutrient_vit_scientific_b9","label_nutrient_vit_scientific_b12","label_nutrient_vit_scientific_c","label_nutrient_vit_scientific_d","label_nutrient_vit_scientific_e","label_nutrient_vit_scientific_k","label_nutrient_water","label_overview","label_per_100g","label_per_portion","label_portion","label_portion_selected","label_portion_common","label_prefix_hereof","label_reference","label_preferred_source","label_ranking_dietaryRequirements","label_source","label_source_supplement","label_source_supplement_tooltip","label_source_combine","label_source_combine_tooltip","label_title","label_unknown","label_usda_reference","label_userSettings_age","label_userSettings_breastfeeding","label_userSettings_intro","label_userSettings_leisureSports","label_userSettings_leisureSports_tooltip","label_userSettings_palValue","label_userSettings_pregnant","label_userSettings_sex","label_userSettings_sex_male","label_userSettings_sex_female","label_userSettings_size","label_userSettings_weight","label_value","menu_food_data_panel","menu_food_data_panel_m","menu_direct_compare","menu_direct_compare_m","menu_home","menu_ranking","menu_ranking_m","menu_settings","menu_settings_m","menu_contact","menu_contact_sources","menu_contact_versions","menu_contact_impressum","message_email_success","message_email_error","message_error_existing_element","message_error_incomplete_form","message_error_invalid_portion","message_userdata_success","message_userdata_error_title","message_userdata_error_age","message_userdata_error_size","message_userdata_error_weight","palcat_name_1","palcat_desc_1","palcat_name_2","palcat_desc_2","palcat_name_3","palcat_desc_3","palcat_name_4","palcat_desc_4","palcat_name_5","palcat_desc_5","palcat_name_6","palcat_desc_6","palcat_name_7","palcat_desc_7","portion_100g","portion_individual","text_contact_disclaimer1","text_contact_disclaimer2","text_contact_disclaimer3","text_contact_form","text_contact_source1","text_contact_source2","text_contact_source3","text_contact_source4","text_empty_fooddatapanel","text_empty_fooddatapanel_mobileInfo","text_ranking","text_setUserdata_p1","text_setUserdata_p2","text_setUserdata_p3","tooltip_icon_charts","tooltip_icon_close","tooltip_icon_newFoodItem","tooltip_icon_newFoodItemStack","tooltip_icon_removeAll","tooltip_icon_table","tooltip_source","getCurrentWindowDimension","innerWidth","innerHeight","useWindowDimension","windowDimension","setWindowDimension","useEffect","addEventListener","removeEventListener","isSmallScreen","Header","applicationContext","useContext","_useContext","useLocation","handleLanguageButtonClick","event","target","activePath","pathname","endsWith","console","log","renderMenus","menuNameAnalyze","menuNameDirectCompare","menuNameRanking","menuNameSettings","buttonContainerClass","_jsxs","className","Link","to","Button","variant","active","language_en","language_de","formElementsClass","renderLanguageButtons","type","defaultChecked","onClick","style","marginRight","paddingTop","paddingLeft","minWidth","maxWidth","src","logo","alt","text","marginTop","callEvent","debugMode","action","category","label","ReactGA","GA_CATEGORY_HOME","GA_CATEGORY_FOOD_ANALYZER","GA_CATEGORY_DIRECT_COMPARE","GA_CATEGORY_RANKING","GA_CATEGORY_USER_SETTINGS","GA_CATEGORY_CONTACT","GA_CATEGORY_DATAPANEL","GA_ACTION_SELECT_FOOD_ITEM","GA_ACTION_SELECTION_DIRECT_COMPARE","GA_ACTION_SELECTION_RANKING_CAT","GA_ACTION_SELECTION_RANKING_ELEMENT","GA_ACTION_RANKING_CONFIG","GA_ACTION_HOME_CLICK_START_BUTTON","GA_ACTION_USER_SETTINGS","GA_ACTION_CONTACT_SUBMENU","GA_ACTION_DATAPANEL_SWITCH_PAGE","GA_ACTION_DATAPANEL_BASEDATA_CONFIG","GA_ACTION_DATAPANEL_VITAMINS_CONFIG","GA_ACTION_DATAPANEL_MINERALS_CONFIG","GA_ACTION_DATAPANEL_PROTEINS_CONFIG","GA_ACTION_DATAPANEL_LIPIDS_CONFIG","GA_ACTION_DATAPANEL_CARBS_CONFIG","GA_ACTION_DATAPANEL_GENERAL_ACTION","require","Home","buttonBgColor","buttonTextColor","onStartButtonClick","renderStartButtons","backgroundColor","color","renderHomeText","textElements","textElement","renderTextElement","FaAngleDoubleRight","margin","homeText1","paddingBottom","homeText2","marginBottom","homeText3","getCategorySelectList","nameTypeList","sort","names","forEach","reactSelectOptions","getReactSelectOptionsList","getFoodItemsSelectList","foodClass","filteredFoodItems","getFoodItemsOfFoodclass","_foodName","getFoodItemName","condition","conditionId","conditionName","foodClassId","foodClassLabelSeparator","getFoodClassSelectList","filteredFoodClasses","getFoodClassesOfCategory","nameKey","foodItemNames","element","join","obj1","obj2","localeCompare","getPortionReactSelectList","portionData","portionElement","portionTypeIndex","findIndex","portionName","amount","getDefaultPortionData","portionDataList","defaultPortionIndex","defaultPortionId","getSourceName","sourceId","getNutrientData","getNutrientDataForFoodItem","selectedSource","supplementData","combineData","sourceToUse","nutrientDataList","nutrientData","nutrientDataObject","complement","selectedNutrientData","complementeNutrientData","supplementedBaseData","supplementCategory","baseData","supplementedVitaminData","vitaminData","supplementedMineralData","mineralData","supplementedCarbsData","carbohydrateData","supplementedProteinData","proteinData","supplementedOmegaData","lipidData","omegaData","supplementedLipidData","sourceItemId","supplementNutrientData","combinedBaseData","combineCategory","combinedVitaminData","combinedMineralData","combinedCarbsData","combinedProteinData","combinedOmegaData","combinedLipidData","combineNutrientData","nutrientCategory1","nutrientCategory2","objectHasChildren","keys1","keys2","allKeys","_toConsumableArray","Set","finalObject","finalValue","value1","value2","fontsize","selectHeight","customSelectStyles","control","base","minHeight","fontSize","valueContainer","provided","padding","dropdownIndicator","styles","clearIndicator","getCustomSelectStyle","correspondingSelectElementStyle","COLOR_SELECTOR_CATEGORY","COLOR_SELECTOR_FOODCLASS","COLOR_SELECTOR_FOODITEM","FoodSelector","initialCategory","foodSelectorConfig","directCompareSelectorConfig1","directCompareSelectorConfig2","initialSupplementValue","directCompareSelectorNumber","initialCombineValue","setSelectedCategory","_useState3","_useState4","selectdFoodClass","setSelectedFoodClass","_useState5","_useState6","setSelectedFoodItem","_useState7","_useState8","selectedPortion","setSelectedPortion","_useState9","_useState10","portionAmount","setPortionAmount","_useState11","_useState12","title","setTitle","_useState13","_useState14","setSelectedSource","_useState15","_useState16","setSupplementData","_useState17","_useState18","setCombineData","_useState19","_useState20","initialized","setInitialized","_useState21","_useState22","categoriesList","setCategoriesList","_useState23","_useState24","foodClassesList","setFoodClassesList","_useState25","_useState26","foodClassesTypeaheadList","setFoodClassesTypeaheadList","_useState27","_useState28","foodItemsList","setFoodItemsList","_useState29","_useState30","portionsList","setPortionsList","_useState31","_useState32","sourcesList","setSourcesList","windowSize","getInitialFoodClassNumber","foodClassOptions","initialFoodClassToSet","defaultFoodClass","foodClassOption","categoryItems","initialFoodClass","foodItemsOfFoodClass","updateSourcesList","defaultPortion","makeSelectedFoodItemObject","newFoodItem","updateSelectedFoodItem","updateFoodSelectorConfig","_props$selectedFoodIt","portion","handleSourceChange","updateFoodClasses","foodClassItems","updateFoodItem","_applicationContext$f","updatePortionsList","sourceNames","getSourceNames","matchingSource","sourceObject","onCheckSupplementCheckbox","onCheckCombineCheckbox","predefinedFoodObject","_applicationContext$f2","selected","sourceElement","_props$selectedFoodIt2","portionObject","setInitialFoodElement","amount_label","compositeSelector","selectClass","inputClass","formClass","stylesCategory","directCompareSelector","stylesFoodClass","stylesFoodItem","onChange","updateCompositeTitle","Select","options","onInputChange","resultList","dictionary","toLowerCase","entry","startsWith","formatOptionLabel","option","pos","disabled","parseInt","isNaN","sourceSelectBox","isDisabled","checkboxes","ReactTooltip","Form","Check","inline","checked","renderSourceLine","CompositeFoodList","languageContext","renderLine","borderBottom","deleteItem","onDeleteItem","FaTrash","maxHeight","overflowY","combineFoodItems","compositeList","portionSize","energy","carbohydrates","lipids","proteins","water","dietaryFibers","alcohol","ash","portionFactor","createFinalValue","buildBaseDataObject","a","b1","b2","b3","b5","b6","b7","b9","b12","c","d","k","carotenoidData","buildCarotenoidDataObject","buildVitaminDataObject","calcium","iron","magnesium","phosphorus","potassium","sodium","zinc","copper","manganese","selenium","buildMineralDataObject","glucose","fructose","galactose","sucrose","maltose","lactose","starch","sugar","buildCarbohydrateData","unsaturatedMono","unsaturatedPoly","saturated","omega3","omega6","omegaUncertain","cholesterol","transFattyAcids","_lipidData$omegaData","_lipidData$omegaData2","_lipidData$omegaData3","uncertain","omegaRatio","uncertainRatio","buildLipidData","tryptophan","threonine","isoleucine","leucine","lysine","methionine","cystine","phenylalanine","tyrosine","valine","arginine","histidine","alanine","asparticAcid","glutamicAcid","glycine","proline","serine","buildProteinData","nutrientObject","url","i","threshold","removeNutrientObjectsWithNullValues","buildAggregatedNutrientDataList","Date","getTime","aggregated","compositeSubElements","alpha","beta","cryptoxanthin","lycopene","lutein","caroteneAlpha","caroteneBeta","totalPortionAmount","HelpModal","helpText","display","role","closeHelpModal","dangerouslySetInnerHTML","__html","content","getHelpText","helpModalId","languageId","entries","languageSection","contentArray","FoodSelectorModal","compositeTitle","setCompositeTitle","setCompositeList","showHelpModal","setShowHelpModal","onSubmit","onSubmitComposite","onSubmitSingleItem","NotificationManager","error","selectedFoodItemCallback","onHide","aggregatedSelectedFoodItem","titleToShow","currentSelectorSetting","Modal","show","Body","newList","splice","Footer","FaQuestionCircle","ConfirmationDialog","_React$Component","_this$props","okLabel","cancelLabel","confirmation","proceed","_this$props$enableEsc","enableEscape","backdrop","keyboard","fullscreen","Title","React","confirmAction","small","createConfirmation","confirmable","color_yellow","color_green","color_red","color_purple","color_gray","color_line_blue","color_line_red","color_chart_green_2","color_chart_green_3","color_chart_yellow_4","color_chart_yellow_green_1","color_chart_yellow_green_2","color_chart_misc","default_chart_height","default_chart_height_m","basedata_piechart_width","basedata_piechart_width_m","basedata_barchart_width","datapanel_container_min_width_m","color_water","color_lipids","color_carbs","color_carbs_sugar","color_carbs_dietaryFibers","color_carbs_mono_glucose","color_carbs_mono_fructose","color_carbs_mono_galactose","color_carbs_di_sucrose","color_carbs_di_lactose","color_carbs_di_maltose","color_carbs_starch","color_alcohol","color_proteins","color_lipids_saturated","color_lipids_unsaturated_mono","color_lipids_unsaturated_poly","color_lipids_omega3","color_lipids_omega6","color_lipids_misc","color_ash","direct_compare_color1","direct_compare_color2","getBarChartOptions","unit","maxYValue","yAxis","min","max","getOptions","y","getBarChartOptionsForRanking","scales","scaleLabel","labelString","axesObj","yAxes","xAxes","ticks","autoSkip","callback","values","getScalesForRankingChart","getPieChartOptions","scalesObject","maintainAspectRatio","responsive","plugins","tooltip","getToolTips","legend","enabled","callbacks","tooltipItem","formattedValue","PieChartConfigurationForm","legendLabel","detailsLabel","Label","handleRadioButtonClick","handleLegendCheckboxClick","detailsCheckboxAvailable","handleDetailsCheckboxClick","CustomLegend","borderLeft","legendData","indent","verticalSpace","separateNextElement","marginLeft","background","item","renderLegend","calculateChartHeight","currentDimension","directCompare","dataPage","calculateChartContainerHeight","autoRound","round","digits","roundFactor","Math","pow","roundToNextValue","number","ordinaryValue","numberOfDigits","ceil","log10","standardValue","nextNumberFive","getNumberOfFixedLength","numberString","convertBooleanToDigit","convertStringToBoolean","getBaseChartLegendData","lang","ChartConfig","BaseDataChart","_props$selectedFoodIt3","directCompareConfig","showDetailsProp","setChartType","setShowLegend","setShowDetails","directCompareUse","chartHeight","setChartHeight","updateChartConfig","currentConfig","newChartConfig","legendAllowed","renderSubChart","chartData","Pie","data","Bar","totalChartData","chartDisplayData","alcoholValuePerc","labels","colors","getTotalChartData","datasets","borderWidth","borderColor","createTotalChartData","nutrientChartData","_nutrientData$carbohy","totalValue","carbValue","carbValuePerc","sugarValuePerc","dietaryFibersPerc","lipidValuePerc","proteinsValuePerc","getNutrientChartData","createNutrientChartData","totalChartDataTitle","nutrientChartDataTitle","containerHeight","justifyContent","eventValue","PAL_CATEGORY_1","PAL_CATEGORY_2","PAL_CATEGORY_3","PAL_CATEGORY_4","PAL_CATEGORY_5","PAL_CATEGORY_6","PAL_CATEGORY_7","getPalCategory","EnergyConstants","createPalCategoryName","languageLabel","energyLabel","EnergyDataChart","energy100g","averagePortion","energyPortion","createEnergyLevelChart","_applicationContext$u","bmr","calculateBMR","totalEnergy","calculateTotalEnergyConsumption","annotation1","drawTime","mode","scaleID","yMin","yMax","annotation2","annotation","annotations","line1","line2","showInfotext","renderUserDataInfoPage","BarChartConfigurationForm","handleExpandCheckboxClick","handleSynchronize","determineDailyRequirement","dailyRequirementObject","ageGroupRequirements","senior","preSenior","midLifeAdult","youngAdult","youth","male","femalePregnant","female","femaleBreastFeeding","determineFoodRequirementRatio","amountInFood","dailyRequirement","determineProteinRequirementRatio","requirement","convertAbsoluteValueToDailyRequirement","dailyRequirements","Constants","vitaminRequirementData","mineralRequirementData","MineralVitaminChart","chartConfigVitamins","chartConfigMinerals","portionType_vitamins","setPortionType_vitamins","expand100_vitamins","setExpand100_vitamins","portionType_minerals","setPortionType_minerals","expand100_minerals","setExpand100_minerals","setShowBookModal","setSelectedColumnLabel","config","selectedSubChart","anyValueChanged","handleExpandCheckbox","precalculatedData","requirementData","amountA","factorOtherCarotenoids","calculateVitaminAEquivalent","getVitaminChartData","chartColor","barChartColor","createVitaminChartData","getMineralsChartData","createMineralChartData","maxValue","overallMaxValue","barChartOptions","context","scientificName","vitamin","labelName","getScientificVitaminName","clickedColumnIndex","columnLabel","barChartProps","renderChartConfigurationForm","getLipidsOmegaChartLegend","LipidsDataChart","initialExpand100","initialHideRemainders","setShowHideRemainders","setExpand100","setSubChart","totalLipidsAmount","handleChartSelectionChange","eventLabel","handleSubchartChange","handleExpand100Change","handleHideRemaindersCheckbox","totalAmount","lipidsData","valueSaturated","valueUnsaturatedMono","valueUnsaturatedPoly","valueRemainder","getTotalLipidsChartData","createOmegaChartData","valueOmega3","valueOmega6","valueUncertain","getOmegaChartData","omegaDataAvailabe","chartColType","renderChart","lipidsType","ProteinDataChart","setPortionType","currentSetting","proteinRequirementData","getProteinChartData","createProteinChartData","dataExists","getCarbsBaseLegend","getCarbsDetailsLegend","CarbsDataChart","currentSettings","chartIndex","detailChartData","_getNutrientData","valueGlucose","valueFructose","valueGalactose","valueSucrose","valueLactose","valueMaltose","valueStarch","valueDietaryFibers","valueMisc","getCarbDetailsChartData","createDetailChartData","basicChartData","totalCarbsAmount","valueSugar","getCarbBaseChartData","createBasicChartData","ChartPanel","selectedDataTab","chart","FoodDataTable","tableData","formatDataCell","cell","row","firstLineStype","indentStyle","split","labelPortion","BootstrapTable","trClassName","striped","hover","TableHeaderColumn","isKey","dataField","dataFormat","InfoData","setContainerHeight","createRow","renderSubTable","bordered","isCompositeFoodElement","foodNameId","foodClassNameId","sourceName","sourceLine2","foodClassName","categoryId","categoryName","tableDataGeneral","getGeneralTableData","foodPortion","portionValue","tableDataPortion","getTableDataPortion","usdaLink","link","open","focus","href","_loop","makeTableDataCombinedFood","FoodDataPageBody","_applicationContext$a","ChartMenuPanel","handlePageButtonClick","verticalArrangement","setDataPage","makeButtonLabel","buttonText","classNameSpan","rowClass","ButtonGroup","vertical","FoodDataPageHeader","history","useHistory","setHelpModalId","fullName","setDisplayMode","enabledDisplayButtonClasses","disabledDisplayButtonClasses","chartButtonClasses","tablesButtonClasses","foodNamesList","sourceString","sourceToolTip","paddingRight","FaChartBar","FaThList","remainingItems","pathName","FaTimes","createBaseDataTable","_selectedFoodItem$foo","_getNutrientData$base","createTableObject","carbObject","makeCarbsTableObject","value_100g","valuePortion","calculatePortionData","value_portion","valueVolume100gram","MathService","createTableObjectAlcohol","appendTableDataObject","object","appendedObject","extension","FoodDataPage","setTableData","updatePage","tableDataList","createEnergyTable","totalCarotenoid","getTotalAmountOfCarotenoids","carotenoidTableObject","createVitaminTable","firstNutrientData","createMineralTable","createLipidsTable","_firstNutrientData$ba","createCarbsTable","createProteinTable","newMode","datapage","makeFoodDataPanelComponent","_selectedFoodItem$tit","component","FoodAnalyzerContainer","showFoodSelectorInitialState","openSelectorModal","showCompositeFoodSelectorInitialState","openCompositeSelectorModal","showFoodSelector","setShowFoodSelector","showFoodAggregatedFoodSelector","setShowAggregatedFoodSelector","rebuild","onSelectFoodItemSubmit","selectedFoodItemWithComponent","_selectedFoodItem$com","_selectedFoodItem$com2","foodClassNameKey","nameEntity","onNewFoodItemSelected","onCloseAllTabs","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","sent","stop","deleteIconEnabled","buttonClass","FaPlusSquare","FaLayerGroup","TabContainer","CloseableTabs","tabPanelClass","tabContentClass","buttonTab","border","verticalAlign","alignItems","cursor","onTabClick","onTabChange","activeIndex","makeChartConfigUriString","chartObject","generalizedChartConfig","generalizedChartObject","makeGeneralizedChartConfig","chartTypeKey","portionTypeKey","expand100Key","showLegendKey","showDetailsKey","subChartKey","getSubChartKey","subChartKey2","synchronizeKey","convertGeneralizedChartConfigToString","getUpdatedChartConfig","chartConfigUriString","chartConfigFromUri","convertGeneralizedChartConfigStringToObject","barChartConfig","uriString","stringToParse","chartTypeNumber","portionTypeNumber","subChartNumber","subChartNumber2","getSubChartFromKey","makeFoodItemDefaultUri","foodItemData","portionString","supplementValue","combineValue","getFoodItemUriData","fragments","portionDataString","convertPortionDataStringToObject","booleanData","convertUserDataObjectToString","convertUserDataStringToObject","userDataString","palValueInt","palCategory","getPalValue","prepareUriForParsing","uri","replace","separator","replacements","short","convertAggregatedUriStringToObject","replacementArray","replacement","JSON","parse","convertUriStringToSelectedFoodItem","newChartConfigData","USERDATA_ERROR_AGE","USERDATA_ERROR_WEIGHT","USERDATA_ERROR_SIZE","USERDATA_OK","checkUserDataValidity","FoodDataPanelContainer","buildDataPanelPageFromURI","updateUriQuery","createDataFromUriQuery","_applicationContext$a2","query","objectToParse","selectedFoodItemString","stringify","chartConfigString","convertAggregatedDataJsonToUriString","selectedDisplayMode","foodItemDataString","makeFoodDataPanelDefaultUri","_applicationContext$s","uriDataObject","foodItemUriData","parseFoodDataPanelDefaultUri","selectedTabIndex","newTabIndex","indexToSet","foodId","FaExclamationTriangle","STATUS_FIRST_TIME","STATUS_NOT_UPDATED","STATUS_UPDATED","DirectCompareSelector","supplementData1","setSupplementData1","combineData1","setCombineData1","supplementData2","setSupplementData2","combineData2","setCombineData2","initialItem1","initialItem2","setSelectedFoodItem1","setSelectedFoodItem2","displayStatus","setDisplayStatus","updateSelectedFoodItem1","updateSelectedFoodItem2","updateFoodSelectorConfig1","updateFoodSelectorConfig2","renderFoodSelectorCard","foodSelectorNumber","styleClass","Card","CardDeck","buttonName","updateSelectedFoodItems","currentSelectorSetting1","currentSelectorSetting2","getMaximumValue","dataSet","dataSetKey","ratioValue","getOverlappingValues","dataSet1","dataSet2","overlapping","nullifyNonOverlappingValues","overlappingAttributes","newDataset","VerticalLabel","_Fragment","resolvedName","DcMineralVitaminChart","synchronizeVitamins","setSynchronizeVitamins","synchronizeMinerals","setSynchronizeMinerals","nutrientData1","nutrientData2","portion1","portion2","maxValue1","maxValue2","maxY","preconfigVitamins","preconfigMinerals","preconfig","preconfigFoodItem1","preconfigFoodItem2","DcPieChart","initialConfig","setSubChart1","setSubChart2","configObject","pieChartConfig","getEventActionName","handleShowLegendCheckbox","handleShowDetailsCheckbox","handleSubchart1Change","handleSubchart2Change","getConfigurationProps","chartProps","getChartComponent","DcProteinDataChart","setSynchronize","DcEnergyChart","DirectCompareDataPanel","nameId1","nameId2","name1","name2","renderCharts","makeFoodItemUriData","parseDirectComparetUri","foodItemUriData1","foodItemUriData2","slice","getUpdatedDirectCompareChartConfig","DirectCompareContainer","initialFoodItem1","initialFoodItem2","buildDataObjectsFromURI","foodItem1DataUri","foodItem2DataUri","userDataUri","chartConfigUri","makeDirectCompareDataUri","foodItem1","foodItem2","foodClass1","foodClass2","_selectedFoodItem1$fo","_selectedFoodItem2$fo","foodClassNameKey1","nameEntity1","foodClassName1","foodClassNameKey2","nameEntity2","foodClassName2","UserSettings","setAge","setSize","setWeight","setSex","setPregnant","setBreastFeeding","setPalValue","leisureSport","setLeisureSport","changePregnant","changeBreastFeeding","changeAdditionalPalPorts","checkInputValidity","validationResult","showMessage","message","renderTextField","FormControl","value_age","value_size","value_weight","FaLightbulb","FormGroup","controlId","palCategories","userDataPalValue","palObject","descriptionCode","description","changePalValue","renderPalList","success","submitUserData","MAIL_INVALID_NAME","MAIL_NO_CONTENT","MAIL_CONTENT_TO_LONG","MAIL_INVALID_ADDRESS","mailRegex","checkMailValidity","mail","errors","address","match","checkLength","ContactForm","setName","mailAddress","setMailAdress","setMessage","characters","setCharacters","userVerified","setUserVerified","sendMail","reply_to","from_name","emailjs","send","then","result","info","charactersLeft","charactersMessage","preventDefault","mailData","validationErrors","errorMessage","rows","Recaptcha","sitekey","render","verifyCallback","response","Sources","Versions","Impressum","impressumPath","impressum_de","impressum_en","ContactContainer","selectedMenu","setSelectedMenu","buttonStyle","onChangeSubmenu","ToggleButtonGroup","defaultValue","ToggleButton","renderSubMenu","BASE_DATA_INDEX","VITAMIN_INDEX","MINERAL_INDEX","LIPIDS_INDEX","CARBS_INDEX","PROTEIN_INDEX","RankingSelector","initializeState","elementsList","setElementsList","newElements","buildElementsList","openChart","buildRankingPanelPageFromURI","foodCategories","groups","getRankingGroups","elements","getElementsOfRankingGroup","selectedFoodCategoryOption","foodCategory","selectedGroupOption","group","selectedElementOption","use100g","parseRankingPanelDataUri","_rankingPanelData$sel","_rankingPanelData$sel2","_rankingPanelData$sel3","showDailyRequirements","makeRankingPanelDataUri","handlePortionAmountChange","newRankingData","handleDietaryRequirementsCheckbox","rankingCategory","transformToDietaryRequirements","rankingList","containerClass","useHorizontalLayout","selectorClass","selectedOption","renderPortionForm","rankingGroup","getBaseCategoryValues","getVitaminCategoryValues","getMineralCategoryValues","getLipidCategoryValues","getCarbohydrateCategoryValues","getProteinCategoryValues","getOrderedFoodList","foodList","selectedValue","chartItems","carbsData","getValueOfFoodItem","_foodItem$portionData","getPortionValue","chartItem","RankingChart","createChartData","position","dataAvailable","containerStyle","overflowX","RankingContainer","setChartItems","setUnit","setSelectedValue","orderedChartItems","getUnit","renderHelpText","WebPageContainer","Chart","register","annotationPlugin","ArcElement","Router","Switch","Route","path","exact","MobileDeviceCheck","status","App","initialize","NotificationContainer","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","rootElement","document","getElementById","hasChildNodes","hydrate"],"mappings":"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","file":"static/js/main.2a12f947.chunk.js","sourcesContent":["var map = {\n\t\"./Img-de-1.png\": 177,\n\t\"./Img-de-2.png\": 178,\n\t\"./Img-de-3.png\": 179,\n\t\"./Img-de-4.png\": 180,\n\t\"./Img-de-5.png\": 181,\n\t\"./Img-de-6.png\": 182,\n\t\"./Img-de-7.png\": 183,\n\t\"./Img-en-1.png\": 184,\n\t\"./Img-en-2.png\": 185,\n\t\"./Img-en-3.png\": 186,\n\t\"./Img-en-4.png\": 187,\n\t\"./Img-en-5.png\": 188,\n\t\"./Img-en-6.png\": 189,\n\t\"./Img-en-7.png\": 190\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 176;","export default __webpack_public_path__ + \"static/media/Img-de-1.fe6e2bdd.png\";","export default __webpack_public_path__ + \"static/media/Img-de-2.21ae70e3.png\";","export default __webpack_public_path__ + \"static/media/Img-de-3.9e1d1685.png\";","export default __webpack_public_path__ + \"static/media/Img-de-4.bd08575b.png\";","export default __webpack_public_path__ + \"static/media/Img-de-5.0ca87bcd.png\";","export default __webpack_public_path__ + \"static/media/Img-de-6.e2bd37af.png\";","export default __webpack_public_path__ + \"static/media/Img-de-7.eba7128a.png\";","export default __webpack_public_path__ + \"static/media/Img-en-1.5e9bd479.png\";","export default __webpack_public_path__ + \"static/media/Img-en-2.fa2f1ec7.png\";","export default __webpack_public_path__ + \"static/media/Img-en-3.ef4052ad.png\";","export default __webpack_public_path__ + \"static/media/Img-en-4.ef10584a.png\";","export default __webpack_public_path__ + \"static/media/Img-en-5.7459e0f8.png\";","export default __webpack_public_path__ + \"static/media/Img-en-6.5767bb06.png\";","export default __webpack_public_path__ + \"static/media/Img-en-7.f0e051bb.png\";","import NameType from '../types/nutrientdata/NameType'\r\nimport Source from '../types/nutrientdata/Source'\r\nimport FoodItem from '../types/nutrientdata/FoodItem'\r\nimport DietaryRequirement from '../types/nutrientdata/DietaryRequirement'\r\n\r\nimport nutrientdata from \"../static/data/nutrientdata_foodcompare.json\";\r\nimport FoodDataCorpus from \"../types/nutrientdata/FoodDataCorpus\"\r\nimport FoodClass from \"../types/nutrientdata/FoodClass\";\r\n\r\nexport function loadFoodDataCorpus(): FoodDataCorpus {\r\n\tconst categories = loadCategories()\r\n\tconst conditions = loadConditions()\r\n\tconst portionTypes = loadPortionTypes()\r\n\tconst sources = loadSources()\r\n\tconst foodNames = loadFoodNames()\r\n\tconst foodClasses = loadFoodClasses()\r\n\tconst nutrientData = loadFoodItems()\r\n\tconst dietaryRequirements = loadDietaryRequirements()\r\n\r\n\treturn {\r\n\t\tcategories: categories,\r\n\t\tconditions: conditions,\r\n\t\tportionTypes: portionTypes,\r\n\t\tsources: sources,\r\n\t\tfoodNames: foodNames,\r\n\t\tfoodClasses: foodClasses,\r\n\t\tfoodItems: nutrientData,\r\n\t\tdietaryRequirements: dietaryRequirements\r\n\t}\r\n}\r\n\r\nexport function loadConditions(): Array<NameType> {\r\n\treturn nutrientdata.conditions;\r\n}\r\n\r\nexport function loadPortionTypes(): Array<NameType> {\r\n\treturn nutrientdata.portionTypes;\r\n}\r\n\r\nexport function loadFoodNames(): Array<NameType> {\r\n\treturn nutrientdata.foodNames;\r\n}\r\n\r\nexport function loadSources(): Array<Source> {\r\n\treturn nutrientdata.sources;\r\n}\r\n\r\nexport function loadCategories(): Array<NameType> {\r\n\treturn nutrientdata.categories;\r\n}\r\n\r\nexport function loadFoodClasses(): Array<FoodClass> {\r\n\treturn nutrientdata.foodClasses;\r\n}\r\n\r\nexport function loadFoodItems(): Array<FoodItem> {\r\n\treturn nutrientdata.foodItems;\r\n}\r\n\r\nexport function loadDietaryRequirements(): DietaryRequirement {\r\n\treturn nutrientdata.dietaryRequirements;\r\n}","export const AMOUNT_PORTION = \"amount portion\"\r\nexport const GRAM = \"100 gram\"\r\n\r\nexport const CHART_TYPE_PIE = \"pie chart\"\r\nexport const CHART_TYPE_BAR = \"bar chart\"\r\n\r\nexport const CHART_VITAMINS = \"chart vitamins\"\r\nexport const CHART_MINERALS = \"chart minerals\"\r\n\r\nexport const CATEGORY_BEVERAGE = 10\r\n\r\nexport const DATA_ASH = \"d_ash\";\r\nexport const DATA_ENERGY = \"d_energy\";\r\nexport const DATA_WATER = \"d_water\";\r\nexport const DATA_CARBS = \"d_carbs\";\r\nexport const DATA_LIPIDS = \"d_lipids\";\r\nexport const DATA_PROTEINS = \"d_proteins\";\r\n\r\nexport const DATA_MINERAL_CALCIUM = \"d_calcium\";\r\nexport const DATA_MINERAL_IRON = \"d_iron\";\r\nexport const DATA_MINERAL_MAGNESIUM = \"d_magnesium\";\r\nexport const DATA_MINERAL_PHOSPHORUS = \"d_phosphorous\";\r\nexport const DATA_MINERAL_POTASSIUM = \"d_potassium\";\r\nexport const DATA_MINERAL_SODIUM = \"d_sodium\";\r\nexport const DATA_MINERAL_ZINC = \"d_zinc\";\r\nexport const DATA_MINERAL_SELENIUM = \"d_selenium\";\r\nexport const DATA_MINERAL_MANGANESE = \"d_manganese\";\r\nexport const DATA_MINERAL_COPPER = \"d_copper\";\r\n\r\nexport const DATA_VITAMINS_A = \"d_a\";\r\nexport const DATA_VITAMINS_B1 = \"d_b1\";\r\nexport const DATA_VITAMINS_B2 = \"d_b2\";\r\nexport const DATA_VITAMINS_B3 = \"d_b3\";\r\nexport const DATA_VITAMINS_B5 = \"d_b5\";\r\nexport const DATA_VITAMINS_B6 = \"d_b6\";\r\nexport const DATA_VITAMINS_B9 = \"d_b9\";\r\nexport const DATA_VITAMINS_B12 = \"d_b12\";\r\nexport const DATA_VITAMINS_C = \"d_c\";\r\nexport const DATA_VITAMINS_D = \"d_d\";\r\nexport const DATA_VITAMINS_E = \"d_e\";\r\nexport const DATA_VITAMINS_K = \"d_k\";\r\n\r\nexport const DATA_LIPIDS_SATURATED = \"d_saturated\";\r\nexport const DATA_LIPIDS_MONO_UNSATURATED = \"d_mono_unsaturated\";\r\nexport const DATA_LIPIDS_POLY_UNSATURATED = \"d_poly_unsaturate\";\r\nexport const DATA_LIPIDS_TRANSFATTY_ACIDS = \"d_transfatty_acids\";\r\n\r\nexport const DATA_CARBS_DIETARY_FIBERS = \"d_dietary fibers\";\r\nexport const DATA_CARBS_SUGAR = \"d_sugar\";\r\nexport const DATA_CARBS_GLUCOSE = \"d_glucose\";\r\nexport const DATA_CARBS_FRUCTOSE = \"d_fructose\";\r\nexport const DATA_CARBS_GALACTOSE = \"d_galactose\";\r\nexport const DATA_CARBS_SUCROSE = \"d_sucrose\";\r\nexport const DATA_CARBS_LACTOSE = \"d_lactose\";\r\nexport const DATA_CARBS_MALTOSE = \"d_maltose\";\r\nexport const DATA_CARBS_STARCH = \"d_starch\";\r\n\r\nexport const DATA_PROTEIN_TRYPTOPHAN = \"tryptophan\";\r\nexport const DATA_PROTEIN_THREONINE = \"threonine\";\r\nexport const DATA_PROTEIN_ISOLEUCINE = \"isoleucine\";\r\nexport const DATA_PROTEIN_LEUCINE = \"leucine\";\r\nexport const DATA_PROTEIN_LYSINE = \"lysine\";\r\nexport const DATA_PROTEIN_METHIONINE = \"methionine\";\r\nexport const DATA_PROTEIN_CYSTINE = \"cystine\";\r\nexport const DATA_PROTEIN_PHENYLALANINE = \"phenylalanine\";\r\nexport const DATA_PROTEIN_TYROSINE = \"tyrosine\";\r\nexport const DATA_PROTEIN_VALINE = \"valine\";\r\nexport const DATA_PROTEIN_ARGININE = \"arginine\";\r\nexport const DATA_PROTEIN_HISTIDINE = \"histidine\";\r\nexport const DATA_PROTEIN_ALANINE = \"alanine\";\r\nexport const DATA_PROTEIN_ASPARTIC_ACID = \"asparticAcid\";\r\nexport const DATA_PROTEIN_GLUTAMIC_ACID= \"glutamicAcid\";\r\nexport const DATA_PROTEIN_GLYCINE = \"glycine\";\r\nexport const DATA_PROTEIN_PROLINE = \"proline\";\r\nexport const DATA_PROTEIN_SERINE = \"serine\";\r\n\r\nexport const DISPLAYMODE_TABLE = \"dtb\"\r\nexport const DISPLAYMODE_CHART = \"dct\"\r\n\r\nexport const CARBS_DATA_BASE = \"carbs data base chart\";\r\nexport const CARBS_DATA_DETAIL = \"carbs data detail chart\"\r\n\r\nexport const LIPIDS_DATA_BASE = \"lipids data base chart\";\r\nexport const LIPIDS_DATA_OMEGA = \"lipids data omega chart\"\r\n\r\nexport const PATH_DIRECT_COMPARE = \"/directcompare\";\r\nexport const PATH_FOODCOMPARE = \"/foodcompare\"\r\nexport const PATH_FOODDATA_PANEL = \"/datapanel\";\r\nexport const PATH_HOME = \"/home\";\r\nexport const PATH_CONTACT = \"/contact\";\r\nexport const PATH_USERSETTINGS = \"/usersettings\";\r\n\r\nexport const PATH_RANKING = \"/ranking\";\r\n\r\nexport const PORTION_KEY_INDIVIDUAL = 0\r\nexport const PORTION_KEY_100 = 1\r\n\r\nexport const LANGUAGE_DE = \"de\";\r\nexport const LANGUAGE_EN = \"en\";\r\n\r\nexport const SEX_MALE = \"sex male\"\r\nexport const SEX_FEMALE = \"sex female\"\r\n\r\nexport const SOURCE_SRLEGACY = \"srlegacy\"\r\nexport const SOURCE_FNDDS = \"fndds\"\r\n\r\nexport const TAB_BASE_DATA = \"basedata\"\r\nexport const TAB_ENERGY_DATA = \"energydata\"\r\nexport const TAB_VITAMIN_DATA = \"vitamindata\"\r\nexport const TAB_MINERAL_DATA = \"mineraldata\"\r\nexport const TAB_LIPIDS_DATA = \"lipidsdata\"\r\nexport const TAB_CARBS_DATA = \"carbsdata\"\r\nexport const TAB_PROTEINS_DATA = \"proteinsdata\"\r\nexport const TAB_INFO = \"infodata\"\r\n\r\nexport const QUERYKEY_DATAPANEL_ADD = \"add\"\r\nexport const QUERYKEY_DATAPANEL_ADD_COMPOSITE = \"composite\"\r\nexport const QUERYKEY_DATAPANEL_ITEM = \"item\"\r\nexport const QUERYKEY_DATAPANEL_RANKING = \"ranking\"\r\nexport const QUERYKEY_DATAPANEL_AGGREGATED = \"aggregated\"\r\n\r\nexport const TAB_LIST = [TAB_BASE_DATA, TAB_ENERGY_DATA, TAB_VITAMIN_DATA, TAB_MINERAL_DATA, TAB_LIPIDS_DATA, TAB_CARBS_DATA, TAB_PROTEINS_DATA, TAB_INFO]","import {AMOUNT_PORTION, CARBS_DATA_BASE, CHART_TYPE_PIE, LIPIDS_DATA_BASE, SEX_MALE} from \"./Constants\";\r\nimport {ChartConfigData, DirectCompareChartConfigData} from \"../types/livedata/ChartConfigData\";\r\nimport {WindowDimension} from \"../service/WindowDimension\";\r\n\r\nexport const release = \"1.6.1\"\r\nexport const buildDate = \"2023-04-01\"\r\n\r\nexport const maxMessageCharacters = 5000\r\nexport const maxElementsInRankingChart = 50\r\n\r\n// The food class to be initially displayed in the food selector\r\nexport const initialFoodClassId = 1\r\n\r\n// The food class to be initially displayed as the comparator in the direct comparison menu (second element)\r\nexport const initialComparisonFoodClassId = 7\r\n\r\nexport const minimalOmegaRatio = 0.3\r\nexport const maximalPortionSize = 5000\r\nexport const defaultPanelHeight = '468px'\r\n\r\nexport const smallFormsScreenSize: WindowDimension = {\r\n    width: 1200,\r\n    height: 800\r\n}\r\n\r\nexport const initialUserDataAge = 35\r\nexport const initialUserDataSize = 175\r\nexport const initialUserDataWeight = 75\r\nexport const initialUserDataSex = SEX_MALE\r\nexport const initialUserDataPregnant = false\r\nexport const initialUserDataBreastfeeding = false\r\nexport const initialUserDataPalValue = 1.6\r\nexport const initialUserDataLeisureSports = false\r\n\r\nexport const initialChartConfigData: ChartConfigData = {\r\n    baseChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        showDetails: false\r\n    },\r\n    vitaminChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    },\r\n    mineralChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    },\r\n    lipidsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        hideRemainders: false,\r\n        subChart: LIPIDS_DATA_BASE,\r\n        expand100: false\r\n    },\r\n    carbsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: true,\r\n        subChart: CARBS_DATA_BASE,\r\n        hideRemainders: false,\r\n        expand100: false\r\n    },\r\n    proteinChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false\r\n    }\r\n}\r\n\r\nexport const initialDirectCompareConfigData: DirectCompareChartConfigData = {\r\n    baseChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        showDetails: false\r\n    },\r\n    vitaminChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    },\r\n    mineralChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    },\r\n    lipidsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        hideRemainders: false,\r\n        expand100: false,\r\n        subChart1: LIPIDS_DATA_BASE,\r\n        subChart2: LIPIDS_DATA_BASE\r\n    },\r\n    carbsChartConfig: {\r\n        chartType: CHART_TYPE_PIE,\r\n        showLegend: false,\r\n        hideRemainders: false,\r\n        expand100: false,\r\n        subChart1: CARBS_DATA_BASE,\r\n        subChart2: CARBS_DATA_BASE\r\n    },\r\n    proteinChartConfig: {\r\n        portionType: AMOUNT_PORTION,\r\n        expand100: false,\r\n        synchronize: true\r\n    }\r\n}","import NameType from \"../types/nutrientdata/NameType\";\r\n\r\n/**\r\n * Retrieves the name of a name type object in the given language\r\n * @param nameType The name type object\r\n * @param language The given language\r\n * @param verbose Optionally set this value to true to obtain the full name (including auxiliary information set in brackets)\r\n */\r\nexport default function getName(nameType: NameType, language: string, verbose = false): string {\r\n    const name = language === 'de' ?  nameType.germanName : nameType.englishName\r\n    if(!verbose) {\r\n        return removeAuxiliaryInformationFromFoodName(name)\r\n    } else {\r\n        return name\r\n    }\r\n}\r\n\r\n/**\r\n * Strips of auxiliary information of the food item, which is set in brackets and may not be intended to display\r\n * @param name The full food name as set in the nutrient json file.\r\n */\r\nexport function removeAuxiliaryInformationFromFoodName(name: string): string {\r\n    if(name.includes(\"[\")) {\r\n        const index = name.indexOf(\"[\")\r\n        return name.substring(0, index).trim()\r\n    } else {\r\n        return name\r\n    }\r\n}\r\n\r\n","import NameType from \"../../types/nutrientdata/NameType\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport getName from \"../LanguageService\";\r\n\r\nexport function getReactSelectOptionsList(nameTypeList: Array<NameType>, language: string, sort?: boolean): Array<ReactSelectOption> {\r\n    const names: Array<string> = []\r\n\r\n    if(nameTypeList && nameTypeList.length > 0) {\r\n        nameTypeList.forEach(nameType => names.push(getName(nameType, language)))\r\n    }\r\n\r\n    if(sort) {\r\n        names.sort()\r\n    }\r\n\r\n    const reactSelectOptions: Array<ReactSelectOption> = []\r\n    names.forEach((name, index) => {\r\n        reactSelectOptions.push({\r\n            value: index,\r\n            label: name\r\n        })\r\n    })\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getNameFromFoodNameList(foodNameList: Array<NameType>, id: number, language: string, verbose = false): string | null {\r\n    const nameType = foodNameList.find(nameType => nameType.id === id)\r\n\r\n    if(nameType) {\r\n        return getName(nameType, language, verbose)\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\n/*\r\n * General method to shorten the name of long food name.\r\n * name: The food name, e.g. \"Linen oil (at least 60 % lineul acid)\"\r\n * maxLength: The maximum length of the food name.\r\n */\r\nexport function shortenName(name, maxLength) {\r\n    if(name.length <= maxLength) {\r\n        return name;\r\n    }\r\n\r\n    if(name.includes(\"(\")) {\r\n        const indexOfBrace = name.indexOf(\"(\");\r\n        if(indexOfBrace >= maxLength-6) {\r\n            return name.substring(0, indexOfBrace-1).trim() + \"...\";\r\n        }\r\n    }\r\n\r\n    return name.substring(0, maxLength-3).trim() + \"...\";\r\n}","export function parseFoodCompareUri(): string | null {\r\n    const queryString = window.location.search.substring(1)\r\n\r\n    const equalOperator = queryString.indexOf(\"=\")\r\n    if(equalOperator === -1) {\r\n        return null\r\n    }\r\n    const key = queryString.substring(0, equalOperator)\r\n    const value = queryString.substring(equalOperator + 1)\r\n\r\n    if(key === \"mode\") {\r\n        return value\r\n    }\r\n\r\n    return null\r\n}","import {Component, createContext, ReactElement} from \"react\";\r\nimport * as NutrientDataImportService from \"../service/NutrientDataImportService\";\r\nimport FoodDataCorpus from \"../types/nutrientdata/FoodDataCorpus\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationData, RankingPanelData} from \"../types/livedata/ApplicationData\";\r\nimport {DISPLAYMODE_CHART, PATH_FOODDATA_PANEL, SOURCE_SRLEGACY, TAB_BASE_DATA} from \"../config/Constants\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    initialChartConfigData,\r\n    initialDirectCompareConfigData,\r\n    initialUserDataAge,\r\n    initialUserDataBreastfeeding,\r\n    initialUserDataLeisureSports,\r\n    initialUserDataPalValue,\r\n    initialUserDataPregnant,\r\n    initialUserDataSex,\r\n    initialUserDataSize,\r\n    initialUserDataWeight\r\n} from \"../config/ApplicationSetting\";\r\nimport {getNameFromFoodNameList} from \"../service/nutrientdata/NameTypeService\";\r\nimport NameType from \"../types/nutrientdata/NameType\";\r\nimport {ChartConfigData, DirectCompareChartConfigData} from \"../types/livedata/ChartConfigData\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\nimport {parseFoodCompareUri} from \"../service/uri/BaseUriService\";\r\n\r\nexport interface ApplicationDataContext {\r\n    foodDataCorpus: FoodDataCorpus\r\n    applicationData: ApplicationData\r\n    userData: UserData\r\n    debug: boolean\r\n    ready: boolean\r\n    useAsMobile: Boolean | null\r\n}\r\n\r\nexport interface ApplicationContext extends ApplicationDataContext {\r\n    setUserData: (userData: UserData) => void\r\n    setPreferredSource: (string) => void\r\n    setMobileUsage: (boolean) => void\r\n    setFoodSelectorConfig: (selectedCategory: ReactSelectOption | null, sourceSupplement: boolean, sourceCombine: boolean) => void\r\n    setDirectCompareFoodSelector1: (sourceSupplement: boolean, sourceCombine: boolean) => void\r\n    setDirectCompareFoodSelector2: (sourceSupplement: boolean, sourceCombine: boolean) => void\r\n    setFoodDataPanelData: {\r\n        setSelectedFoodTab: (number) => void\r\n        setSelectedDataPage: (string) => void\r\n        setSelectedDisplayMode: (string) => void\r\n        addItemToFoodDataPanel: (selectedFoodItem: SelectedFoodItem) => void\r\n        removeItemFromFoodDataPanel: (number) => void\r\n        removeAllItemsFromFoodDataPanel: () => void\r\n        updateAllFoodItemNames: (foodNames: Array<NameType>, newLanguage: string) => void\r\n        updateFoodDataPanelChartConfig: (chartConfig: ChartConfigData) => void\r\n    }\r\n    setDirectCompareData: {\r\n        updateDirectCompareChartConfig: (chartConfig: DirectCompareChartConfigData) => void\r\n        setSelectedDirectCompareItems: (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => void\r\n        setSelectedDirectCompareDataPage: (selectedPage: string) => void\r\n    }\r\n    setRankingPanelData: (RankingPanelData) => void\r\n\r\n}\r\n\r\nexport const ApplicationDataContextStore = createContext<ApplicationContext | null>(null)\r\n\r\nexport default class ApplicationDataContextProvider extends Component<any, ApplicationDataContext> {\r\n    setDebugState = (debug: boolean) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                    debug: debug\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedFoodDataPanelTab = (selectedTab: number) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItemIndex: selectedTab}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedDisplayMode = (displayMode: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, displayMode: displayMode}\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedFoodDataPanelPage = (selectedPage: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedDataPage: selectedPage}\r\n            }\r\n        }))\r\n    }\r\n\r\n    addItemToFoodDataPanel = (foodItem: SelectedFoodItem) => {\r\n        const newItems = Object.assign(this.state.applicationData.foodDataPanel.selectedFoodItems)\r\n        newItems.push(foodItem)\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {...prevState.applicationData.foodDataPanel, selectedFoodItems: newItems}\r\n            }\r\n        }))\r\n    }\r\n\r\n    removeItemFromFoodDataPanel = (foodItemId: number) => {\r\n        const newItems = this.state.applicationData.foodDataPanel.selectedFoodItems.filter(\r\n            selectedFoodItem => selectedFoodItem.foodItem.id !== foodItemId\r\n        )\r\n\r\n        let newIndex = 0\r\n        let currentIndex = this.state.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n        if (newItems.length > 0) {\r\n            if (currentIndex < newItems.length) {\r\n                newIndex = currentIndex\r\n            } else {\r\n                newIndex = newItems.length - 1\r\n            }\r\n        }\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: newItems,\r\n                    selectedFoodItemIndex: newIndex\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    removeAllItemsFromFoodDataPanel = () => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: [],\r\n                    selectedFoodItemIndex: 0\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateAllFoodItemNames = (foodNames: Array<NameType>, newLanguage: string) => {\r\n        const selectedFoodItems = this.state.applicationData.foodDataPanel.selectedFoodItems\r\n        const newFoodItems = selectedFoodItems.map(selectedFoodItem => {\r\n            const foodName = selectedFoodItem.foodItem.nameId\r\n                ? getNameFromFoodNameList(foodNames, selectedFoodItem.foodItem.nameId, newLanguage)\r\n                : \"Individual\"\r\n            if (foodName) {\r\n                selectedFoodItem = {...selectedFoodItem, tab: foodName}\r\n            }\r\n            return selectedFoodItem\r\n        })\r\n\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    selectedFoodItems: newFoodItems,\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateFoodDataPanelChartConfig = (chartConfig: ChartConfigData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                foodDataPanel: {\r\n                    ...prevState.applicationData.foodDataPanel,\r\n                    chartConfigData: chartConfig\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n\r\n    setSelectedDirectCompareItems = (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...prevState.applicationData.directCompareDataPanel,\r\n                    selectedFoodItem1: selectedFoodItem1,\r\n                    selectedFoodItem2: selectedFoodItem2\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    setSelectedDirectCompareDataPage = (selectedPage: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...prevState.applicationData.directCompareDataPanel,\r\n                    selectedDataPage: selectedPage\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    updateDirectCompareChartConfig = (chartConfig: DirectCompareChartConfigData) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData,\r\n                directCompareDataPanel: {\r\n                    ...this.state.applicationData.directCompareDataPanel,\r\n                    directCompareConfigChart: chartConfig\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    setUserData = (userData: UserData) => {\r\n        this.setState(() => ({\r\n            userData: {\r\n                ...userData\r\n            }\r\n        }))\r\n    }\r\n\r\n    setPreferredSource = (source: string) => {\r\n        this.setState(prevState => ({\r\n            applicationData: {\r\n                ...prevState.applicationData, preferredSource: source\r\n            }\r\n        }))\r\n    }\r\n\r\n    setFoodSelectorConfig = (selectedCategory: ReactSelectOption | null, sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, foodSelector: {\r\n                        ...prevState.applicationData.foodSelector,\r\n                        selectedCategory: selectedCategory,\r\n                        sourceSupplement: sourceSupplement,\r\n                        sourceCombine: sourceCombine\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n    setDirectCompareFoodSelectorConfig1 = (sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, directCompareDataPanel: {\r\n                        ...prevState.applicationData.directCompareDataPanel,\r\n                        foodSelector1: {\r\n                            sourceSupplement: sourceSupplement,\r\n                            sourceCombine: sourceCombine\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n    setDirectCompareFoodSelectorConfig2 = (sourceSupplement: boolean, sourceCombine: boolean) => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, directCompareDataPanel: {\r\n                        ...prevState.applicationData.directCompareDataPanel,\r\n                        foodSelector2: {\r\n                            sourceSupplement: sourceSupplement,\r\n                            sourceCombine: sourceCombine\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        ))\r\n    }\r\n\r\n    setRankingPanelData = (rankingPanelData: RankingPanelData): void => {\r\n        this.setState(prevState => ({\r\n                applicationData: {\r\n                    ...prevState.applicationData, rankingPanelData: rankingPanelData\r\n                }\r\n            })\r\n        )\r\n    }\r\n\r\n    isDebugMode(): boolean {\r\n        const uriData: string | null = parseFoodCompareUri()\r\n        return uriData !== \"test\" && uriData !== \"debug\" ? false : true\r\n    }\r\n\r\n    state: ApplicationDataContext = {\r\n        foodDataCorpus: {\r\n            categories: [],\r\n            conditions: [],\r\n            portionTypes: [],\r\n            sources: [],\r\n            foodNames: [],\r\n            foodClasses: [],\r\n            foodItems: [],\r\n            dietaryRequirements: null,\r\n        },\r\n        applicationData: {\r\n            foodDataPanel: {\r\n                selectedFoodItems: [],\r\n                selectedDataPage: TAB_BASE_DATA,\r\n                displayMode: DISPLAYMODE_CHART,\r\n                selectedFoodItemIndex: 0,\r\n                chartConfigData: initialChartConfigData,\r\n            },\r\n            directCompareDataPanel: {\r\n                selectedFoodItem1: null,\r\n                selectedFoodItem2: null,\r\n                selectedDataPage: TAB_BASE_DATA,\r\n                directCompareConfigChart: initialDirectCompareConfigData,\r\n                foodSelector1: {\r\n                    sourceSupplement: true,\r\n                    sourceCombine: false\r\n                },\r\n                foodSelector2: {\r\n                    sourceSupplement: true,\r\n                    sourceCombine: false\r\n                }\r\n            },\r\n            rankingPanelData: {\r\n                selectedFoodCategory: null,\r\n                selectedGroup: null,\r\n                selectedElement: null,\r\n                use100gram: true,\r\n                showDietaryRequirements: false\r\n            },\r\n            foodSelector: {\r\n                selectedCategory: null,\r\n                sourceSupplement: true,\r\n                sourceCombine: false,\r\n            },\r\n            preferredSource: SOURCE_SRLEGACY,\r\n        },\r\n        userData: {\r\n            age: initialUserDataAge,\r\n            size: initialUserDataSize,\r\n            weight: initialUserDataWeight,\r\n            sex: initialUserDataSex,\r\n            pregnant: initialUserDataPregnant,\r\n            breastFeeding: initialUserDataBreastfeeding,\r\n            palValue: initialUserDataPalValue,\r\n            leisureSports: initialUserDataLeisureSports,\r\n            initialValues: true\r\n        },\r\n        debug: this.isDebugMode(),\r\n        ready: false,\r\n        useAsMobile: null\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        const foodDataCorpus = NutrientDataImportService.loadFoodDataCorpus()\r\n        this.setState({\r\n            foodDataCorpus: foodDataCorpus,\r\n            ready: true\r\n        })\r\n    }\r\n\r\n    render(): ReactElement {\r\n        const value = {\r\n            applicationData: this.state.applicationData,\r\n            foodDataCorpus: this.state.foodDataCorpus,\r\n            userData: this.state.userData,\r\n            debug: this.state.debug,\r\n            ready: this.state.ready,\r\n            useAsMobile: this.state.useAsMobile,\r\n            setUserData: this.setUserData,\r\n            setPreferredSource: this.setPreferredSource,\r\n            setMobileUsage: (usage: boolean) => {\r\n                this.setState({...this.state, useAsMobile: usage})\r\n            },\r\n            setFoodDataPanelData: {\r\n                setSelectedFoodTab: this.setSelectedFoodDataPanelTab,\r\n                setSelectedDataPage: this.setSelectedFoodDataPanelPage,\r\n                setSelectedDisplayMode: this.setSelectedDisplayMode,\r\n                addItemToFoodDataPanel: this.addItemToFoodDataPanel,\r\n                removeItemFromFoodDataPanel: this.removeItemFromFoodDataPanel,\r\n                removeAllItemsFromFoodDataPanel: this.removeAllItemsFromFoodDataPanel,\r\n                updateAllFoodItemNames: this.updateAllFoodItemNames,\r\n                updateFoodDataPanelChartConfig: this.updateFoodDataPanelChartConfig\r\n            },\r\n            setDirectCompareData: {\r\n                updateDirectCompareChartConfig: this.updateDirectCompareChartConfig,\r\n                setSelectedDirectCompareDataPage: this.setSelectedDirectCompareDataPage,\r\n                setSelectedDirectCompareItems: this.setSelectedDirectCompareItems\r\n            },\r\n            setFoodSelectorConfig: this.setFoodSelectorConfig,\r\n            setRankingPanelData: this.setRankingPanelData,\r\n            setDirectCompareFoodSelector1: this.setDirectCompareFoodSelectorConfig1,\r\n            setDirectCompareFoodSelector2: this.setDirectCompareFoodSelectorConfig2\r\n        }\r\n\r\n        return (\r\n            <ApplicationDataContextStore.Provider value={value}>\r\n                {this.props.children}\r\n            </ApplicationDataContextStore.Provider>\r\n        )\r\n    }\r\n\r\n}\r\n","import {createContext, useState} from \"react\";\r\nimport {LANGUAGE_DE, LANGUAGE_EN} from \"../config/Constants\";\r\n\r\nexport interface LanguageProviderProps {\r\n    language: string\r\n    userLanguageChange: (selectedLanguage: string) => void\r\n}\r\n\r\nexport const LanguageContext = createContext<LanguageProviderProps>({\r\n    language: 'en',\r\n    userLanguageChange: (selectedLanguage) => {return 'en'}\r\n});\r\n\r\nexport function LanguageProvider({ children }) {\r\n    const userLanguage = navigator.language;\r\n    const preferredLanguage = userLanguage === 'de' || userLanguage === 'de-DE' ? LANGUAGE_DE : LANGUAGE_EN\r\n    const [language, setLanguage] = useState(preferredLanguage);\r\n\r\n    const userLanguageChange = (selectedLanaguage: string): void => {\r\n        const newLanguage = selectedLanaguage ? selectedLanaguage : LANGUAGE_EN\r\n        setLanguage(newLanguage);\r\n    }\r\n\r\n    const provider: LanguageProviderProps = {\r\n        language,\r\n        userLanguageChange\r\n    };\r\n\r\n    return (\r\n        <LanguageContext.Provider value={provider}>\r\n            {children}\r\n        </LanguageContext.Provider>\r\n    );\r\n};\r\n\r\n\r\n\r\n","// Google:\r\nexport const ANALYTICS_MESS_ID = 'G-DXHX3Y13KZ'\r\nexport const ADSENSE_TRACKING_ID = 'ca-pub-2335013571820161'\r\nexport const RECAPTCHA_KEY = '6LdVyyMcAAAAACXul89K-Epl2dQu3XOvOo1bTIg3'\r\n\r\n// Emailjs:\r\nexport const SERVICE_ID = 'service_608vcxh'\r\nexport const TEMPLATE_ID = 'template_nledi86'\r\nexport const USER_ID = 'user_8TjzzLK0ZdfUQd7h7cieX'\r\n\r\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export const applicationStrings = {\r\n    button_add: {\r\n        de: 'Hinzufügen',\r\n        en: 'Add'\r\n    },\r\n    button_cancel: {\r\n        de: 'Abbrechen',\r\n        en: 'Cancel'\r\n    },\r\n    button_change_to_chart_mode: {\r\n        de: 'Daten als Diagramm anzeigen',\r\n        en: 'Display data as chart'\r\n    },\r\n    button_close: {\r\n        de: 'Schließen',\r\n        en: 'Close'\r\n    },\r\n    button_getstarted_1: {\r\n        de: 'Verschiedene Lebensmittel analysieren',\r\n        en: 'Analyze different food items'\r\n    },\r\n    button_getstarted_2: {\r\n        de: 'Komplexe Lebensmittel zusammenstellen',\r\n        en: 'Create a composite food list'\r\n    },\r\n    button_getstarted_3: {\r\n        de: 'Zwei Lebensmittel gegenüberstellen',\r\n        en: 'Compare two food items with each other'\r\n    },\r\n    button_getstarted_4: {\r\n        de: 'Lebensmittel nach Werten sortieren',\r\n        en: 'Rank food items by a nutrient value'\r\n    },\r\n    button_no: {\r\n        de: 'Nein',\r\n        en: 'No'\r\n    },\r\n    button_select: {\r\n        de: 'Auswählen',\r\n        en: 'Show'\r\n    },\r\n    button_show: {\r\n        de: 'Anzeigen',\r\n        en: 'Show'\r\n    },\r\n    button_send: {\r\n        de: \"Senden\",\r\n        en: \"Send\"\r\n    },\r\n    button_submit: {\r\n        de: 'Übernehmen',\r\n        en: 'Submit'\r\n    },\r\n    button_update: {\r\n        de: \"Aktualisieren\",\r\n        en: \"Update\"\r\n    },\r\n    button_yes: {\r\n        de: 'Ja',\r\n        en: 'Yes'\r\n    },\r\n    checkbox_chartoption_hideRemainders: {\r\n        de: 'Rest ausblenden',\r\n        en: 'Hide remainders'\r\n    },\r\n    checkbox_chartoption_showLegend: {\r\n        de: 'Legende anzeigen',\r\n        en: 'Show legend'\r\n    },\r\n    checkbox_chartoption_showLegend_m: {\r\n        de: 'Legende',\r\n        en: 'Legend'\r\n    },\r\n    checkbox_chartoption_showDetails: {\r\n        de: 'Details anzeigen',\r\n        en: 'Show details'\r\n    },\r\n    checkbox_chartoption_showDetails_m: {\r\n        de: 'Details',\r\n        en: 'Show'\r\n    },\r\n    checkbox_english: {\r\n        de: 'Englisch',\r\n        en: 'English'\r\n    },\r\n    checkbox_english_m: {\r\n        de: 'EN',\r\n        en: 'EN'\r\n    },\r\n    checkbox_expand100g: {\r\n        de: 'Auf 100 % erweitern',\r\n        en: 'Expand to 100 %'\r\n    },\r\n    checkbox_german: {\r\n        de: 'Deutsch',\r\n        en: 'German'\r\n    },\r\n    checkbox_german_m: {\r\n        de: 'DE',\r\n        en: 'DE'\r\n    },\r\n    checkbox_synchronize: {\r\n        de: 'Synchronisieren',\r\n        en: 'Synchronize'\r\n    },\r\n    confirm_close_all_tabs: {\r\n        de: 'Sollen wirklich alle Lebensmittel-Tabs geschlossen werden?',\r\n        en: 'Really close all food tabs?'\r\n    },\r\n    device_detection_hint: {\r\n        de: 'Auf Mobilgeräten und sehr kleinen Geräten stehen einige Funktionen von Food Compare aktuell nur eingeschränkt zur Verfügung. Wir bitten um Verständnis.',\r\n        en: 'Please understand that on mobile devices and very small screens some functionality of Food Compare is currently limited or unavailable.',\r\n    },\r\n    direct_compare_text: {\r\n        de: 'Wählen Sie zwei Lebensmittel aus den beiden Auswahlboxen, die miteinander verglichen werden sollen, und klicken Sie dann den Anzeigen-Button.',\r\n        en: 'Pick two food elements from the two selectors that should be compared with each other. Then click the Show button.'\r\n    },\r\n    home_carousel_0: {\r\n        de: 'Vitamine in Lebensmitteln im Vergleich zum Tagesbedarf',\r\n        en: 'Vitamins in food compared to daily requirements'\r\n    },\r\n    home_carousel_1: {\r\n        de: 'Mineralstoffe in Lebensmitteln im Vergleich zum Tagesbedarf',\r\n        en: 'Minerals in food compared to daily requirements'\r\n    },\r\n    home_carousel_2: {\r\n        de: 'Nährstoffzusammensetzung in einem Lebensmittel',\r\n        en: 'Food composition of nutrients'\r\n    },\r\n    home_carousel_3: {\r\n        de: 'Verteilung der Fettsäuren (gesättigt / ungesättigt)',\r\n        en: 'Distribution of fatty acids (saturated / unsaturated)'\r\n    },\r\n    home_carousel_4: {\r\n        de: 'In Nahrungsmitteln enthaltene Aminosäuren',\r\n        en: 'Amino acids conainted in foods'\r\n    },\r\n    home_carousel_5: {\r\n        de: 'Gegenüberstellung zweier Lebensmittel',\r\n        en: 'Comparing two food items'\r\n    },\r\n    home_carousel_6: {\r\n        de: 'Nach Nährstoffwert sortierte Lebensmittel',\r\n        en: 'Food items ranked by a specific nutrient value'\r\n    },\r\n    home_text_1: {\r\n        de: 'Food Compare ist ein Webprojekt zur grafischen Darstellung der Zusammensetzung von Lebensmitteln. Während klassische Quellen die enthaltenen Inhaltsstoffe meist nur in tabellarischer Form angeben, verwendet Food Compare Grafiken und Diagramme, um den Gehalt an Vitaminen und Mineralstoffen, Kohlenhydraten, Fettsäuren und Eiweißen (Proteinen) leichter und übersichtlich darzustellen.',\r\n        en: 'Food Compare is a web project to visually display information about food composition. While conventional resources commonly display nutrient data in tables, Food Compare provides charts and graphics to allow users a better understanding of the containing nutrients (carbohydrates, lipids, proteins) as well as vitamins and minerals.'\r\n    },\r\n    home_text_2: {\r\n        de: 'Das Hauptaugenmerk von Food Compare gilt jedoch nicht nur der Veranschaulichung einzelner Nahrungsmittel, sondern der Vergleichbarkeit von Nährstoffen, Vitaminen und Mineralen in Lebensmittels. Dazu können beliebig viele Tabs geöffnet und Lebensmittel damit leicht miteinander verglichen werden. So lassen sich bspw. auf einfache Weise der Vitamingehalt von einzelnen Obstsorten vergleichen, oder die Aufteilung von Kohlenhydraten, Fetten und Eiweißen zwischen Grundnahrungsmitteln. Dabei erlaubt die Anwendung auch das Zusammenstellen von komplexen Menüs, deren Gesamtgehalt an Nährstoffen, Vitaminen und Mineralstoffen dann berechnet wird.',\r\n        en: 'The primary focus of Food Compare is to visually compare the composition and contents of different food items, though. Food items can be opened in different tabs so that nutrients, vitamins or minerals can be easily compare. As an example, users can compare the containing vitamins between different fruits or the nutrient composition between staple foods. In addition, the application allows to aggregate foods to more complex menus and will then calculate the overall amount of nutrients, vitamins and minerals in that menu.'\r\n    },\r\n    home_text_3: {\r\n        de: 'Um die Nährstoffdiagramme zweier Lebensmittel auf einen Blick miteinander vergleichen zu können, gibt es seit der Version 1.2 nun auch einen zusätzlichen Bereich, in denen die Diagramme entsprechend nebeneinander angeordnet sind. Einige Datenseiten wie Vitamine und Mineralstoffe lassen sich dabei auch synchronisieren, so dass eine einheitliche Skalierung der Diagramme stattfindet und nur die Daten angezeigt werden, welche für beide Lebensmittel vorliegen.',\r\n        en: 'In order to compare nutrient charts of two food items at a glance, an additional page was added in version 1.2 where nutrient charts are placed next to each other. Some data pages like vitamins and minerals can also be synchronized, which means that the charts use a unique scaling and only display data that is available in both food elements.'\r\n    },\r\n    home_foodcompare_overview: {\r\n        de: 'Food Compare im Überblick',\r\n        en: 'Food Compare at a Glance'\r\n    },\r\n    input_compositelist_title: {\r\n        de: 'Individuelle Liste',\r\n        en: 'Individual list'\r\n    },\r\n    label_amount: {\r\n        de: 'Menge (g)',\r\n        en: 'Amount (g)'\r\n    },\r\n    label_amount_short: {\r\n        de: 'Gramm',\r\n        en: 'Gram'\r\n    },\r\n    label_category: {\r\n        de: 'Kategorie',\r\n        en: 'Category'\r\n    },\r\n    label_charttype: {\r\n        de: 'Diagrammart',\r\n        en: 'Chart type'\r\n    },\r\n    label_charttype_pie: {\r\n        de: 'Tortendiagramm',\r\n        en: 'Pie chart'\r\n    },\r\n    label_charttype_bar: {\r\n        de: 'Balkendiagramm',\r\n        en: 'Bar chart'\r\n    },\r\n    label_charttype_carbs_base: {\r\n        de: 'Allgemeine Werte',\r\n        en: 'Basic data'\r\n    },\r\n    label_charttype_carbs_detail: {\r\n        de: 'Detailwerte',\r\n        en: 'Detailed data'\r\n    },\r\n    label_charttype_energy: {\r\n        de: 'Grundumsatz und Gesamtumsatz (Energie)',\r\n        en: 'BMR and Energy Expenditure'\r\n    },\r\n    label_charttype_lipids_base: {\r\n        de: 'Allgemeine Werte',\r\n        en: 'Basic data'\r\n    },\r\n    label_charttype_lipids_base_title: {\r\n        de: 'Allgemeine Verteilung der Fettsäuren',\r\n        en: 'Basic distributions of fatty acids'\r\n    },\r\n    label_charttype_lipids_omega: {\r\n        de: 'Omega-Werte',\r\n        en: 'Omega data'\r\n    },\r\n    label_charttype_lipids_omega_title: {\r\n        de: 'Allgemeine Verteilung der Omega-3/6-Fettsäuren',\r\n        en: 'Basic distributions of Omega 3/6 acids'\r\n    },\r\n    label_charttype_minerals: {\r\n        de: 'Minerale (im Vgl. zum Tagesbedarf)',\r\n        en: 'Minerals (related to daily requirements)'\r\n    },\r\n    label_charttype_proteins: {\r\n        de: 'Proteine (im Vgl. zum Tagesbedarf)',\r\n        en: 'Proteins  (related to daily requirements)'\r\n    },\r\n    label_charttype_vitamins: {\r\n        de: 'Vitamine (im Vgl. zum Tagesbedarf)',\r\n        en: 'Vitamins (related to daily requirements)'\r\n    },\r\n    label_chart_bmr: {\r\n        de: 'Grundumsatz',\r\n        en: 'Basal Metabolic Rate (BMR)'\r\n    },\r\n    label_chart_energyExpenditure: {\r\n        de: 'Gesamtumsatz',\r\n        en: 'Energy Expenditure'\r\n    },\r\n    label_chart_proteins: {\r\n        de: 'Proteine',\r\n        en: 'Proteins'\r\n    },\r\n    label_chart_nutrientComposition: {\r\n        de: 'Nährstoffzusammensetzung',\r\n        en: 'Nutrient Composition'\r\n    },\r\n    label_chart_totalComposition: {\r\n        de: 'Gesamtzusammensetzung',\r\n        en: 'Total Composition'\r\n    },\r\n    label_chart_view: {\r\n        de: 'Zur Diagrammansicht wechseln',\r\n        en: 'Switch to chart view'\r\n    },\r\n    label_datatype: {\r\n        de: 'Datentyp',\r\n        en: 'Data type'\r\n    },\r\n    label_food: {\r\n        de: \"Lebensmittel\",\r\n        en: \"Food\"\r\n    },\r\n    label_foodclass: {\r\n        de: 'Lebensmittel',\r\n        en: 'Food class'\r\n    },\r\n    label_fooditem: {\r\n        de: 'Typ',\r\n        en: 'Food type'\r\n    },\r\n    label_foodselector: {\r\n        de: 'Lebensmittelauswahl',\r\n        en: 'Food Selector'\r\n    },\r\n    label_foodselector_composite: {\r\n        de: 'Zusammenstellung eines Lebensmittels',\r\n        en: 'Composite food generation'\r\n    },\r\n    label_group: {\r\n        de: 'Gruppe',\r\n        en: 'Group'\r\n    },\r\n    label_getStarted: {\r\n        de: \"Jetzt beginnen...\",\r\n        en: \"Get started...\"\r\n    },\r\n    label_info: {\r\n        de: 'Info',\r\n        en: 'Info'\r\n    },\r\n    label_info_composite: {\r\n        de: 'Enthaltene Lebensmittel',\r\n        en: 'Contained food items'\r\n    },\r\n    label_info_category: {\r\n        de: 'Kategorie',\r\n        en: 'Category'\r\n    },\r\n    label_info_foodClass: {\r\n        de: 'Lebensmittel-Klasse',\r\n        en: 'Food Class'\r\n    },\r\n    label_info_foodId: {\r\n        de: 'Lebensmittel ID',\r\n        en: 'Food Id'\r\n    },\r\n    label_info_foodName: {\r\n        de: 'Lebensmittel',\r\n        en: 'Food'\r\n    },\r\n    label_info_portion: {\r\n        de: 'Portionsdaten',\r\n        en: 'Portion data'\r\n    },\r\n    label_info_portionType: {\r\n        de: 'Portionstyp',\r\n        en: 'Portion type'\r\n    },\r\n    label_info_preparation: {\r\n        de: 'Zubereitungsart',\r\n        en: 'Preparation type'\r\n    },\r\n    label_info_source: {\r\n        de: 'Quelle',\r\n        en: 'Source'\r\n    },\r\n    label_language: {\r\n        de: 'Sprache:',\r\n        en: 'Language:'\r\n    },\r\n    label_mail_name: {\r\n        de: \"Name\",\r\n        en: \"Name\"\r\n    },\r\n    label_mail_address: {\r\n        de: \"Mail-Adresse\",\r\n        en: \"Mail address\"\r\n    },\r\n    label_mail_message: {\r\n        de: \"Ihre Nachricht\",\r\n        en: \"Your message\"\r\n    },\r\n    label_mail_characters_left: {\r\n        de: \"Noch /xx/ Zeichen verbleibend\",\r\n        en: \"/xx/ characters left\"\r\n    },\r\n    label_mail_too_long: {\r\n        de: \"Nachricht ist zu lang\",\r\n        en: \"Message too long\"\r\n    },\r\n    label_mail_error_name: {\r\n        de: \"Geben Sie bitte einen gültigen Namen ein.\",\r\n        en: \"Please enter a valid name.\"\r\n    },\r\n    label_mail_error_mailaddress: {\r\n        de: \"Geben Sie bitte eine gültige Mail-Adresse ein.\",\r\n        en: \"Please enter a valid mail address.\"\r\n    },\r\n    label_mail_error_nocontent: {\r\n        de: \"Geben Sie bitte eine Nachricht ein.\",\r\n        en: \"Please specify a message.\"\r\n    },\r\n    label_mail_error_content_too_long: {\r\n        de: \"Die eingegebene Nachricht ist zu lang.\",\r\n        en: \"The specified message is too long.\"\r\n    },\r\n    label_mail_error_verification: {\r\n        de: \"Bitte verifizieren, dass Sie kein Roboter sind.\",\r\n        en: \"Please verify that you are not a robot.\"\r\n    },\r\n    label_noData: {\r\n        de: 'Keine Daten vorhanden',\r\n        en: 'No data available'\r\n    },\r\n    label_nutrient_alcohol: {\r\n        de: 'Alkohol',\r\n        en: 'Alcohol'\r\n    },\r\n    label_nutrient_ash: {\r\n        de: 'Reststoffe',\r\n        en: 'Ash'\r\n    },\r\n    label_nutrient_carbohydrates: {\r\n        de: 'Kohlenhydrate',\r\n        en: 'Carbohydrates'\r\n    },\r\n    label_nutrient_carbohydrates_short: {\r\n        de: 'Kohlenhyd.',\r\n        en: 'Carbs'\r\n    },\r\n    label_nutrient_carbohydrates_fructose: {\r\n        de: 'Fruktose',\r\n        en: 'Fructose'\r\n    },\r\n    label_nutrient_carbohydrates_galactose: {\r\n        de: 'Galaktose',\r\n        en: 'Galactose'\r\n    },\r\n    label_nutrient_carbohydrates_glucose: {\r\n        de: 'Glukose (Traubenzucker)',\r\n        en: 'Glucose'\r\n    },\r\n    label_nutrient_carbohydrates_lactose: {\r\n        de: 'Laktose',\r\n        en: 'Lactose'\r\n    },\r\n    label_nutrient_carbohydrates_maltose: {\r\n        de: 'Maltose',\r\n        en: 'Maltose'\r\n    },\r\n    label_nutrient_carbohydrates_starch: {\r\n        de: 'Stärke',\r\n        en: 'Starch'\r\n    },\r\n    label_nutrient_carbohydrates_sucrose: {\r\n        de: 'Sukrose',\r\n        en: 'Sucrose'\r\n    },\r\n    label_nutrient_dietaryFibers: {\r\n        de: 'Ballaststoffe',\r\n        en: 'Dietary fibers'\r\n    },\r\n    label_nutrient_dietaryFibers_short: {\r\n        de: 'Ballastst.',\r\n        en: 'Dietary fib.'\r\n    },\r\n    label_nutrient_energy: {\r\n        de: 'Energie',\r\n        en: 'Energy'\r\n    },\r\n    label_nutrient_lipids: {\r\n        de: 'Fett',\r\n        en: 'Fats'\r\n    },\r\n    label_nutrient_lipids_long: {\r\n        de: 'Fettsäuren',\r\n        en: 'Fatty acids'\r\n    },\r\n    label_nutrient_lipids_saturated: {\r\n        de: 'Gesättigte Fettsäuren',\r\n        en: 'Saturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_saturated_short: {\r\n        de: 'Gesättigt',\r\n        en: 'Saturated'\r\n    },\r\n    label_nutrient_lipids_unsaturated: {\r\n        de: 'Ungesättigte Fettsäuren',\r\n        en: 'Unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_mono: {\r\n        de: 'Einfach ungesättigte Fettsäuren',\r\n        en: 'Mono-unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_mono_short: {\r\n        de: 'Einfach ungesättigt',\r\n        en: 'Mono-unsaturated'\r\n    },\r\n    label_nutrient_lipids_unsaturated_poly: {\r\n        de: 'Mehrfach ungesättigte Fettsäuren',\r\n        en: 'Poly-unsaturated fatty acids'\r\n    },\r\n    label_nutrient_lipids_unsaturated_poly_short: {\r\n        de: 'Mehrfach unges.',\r\n        en: 'Poly-unsaturated'\r\n    },\r\n    label_nutrient_lipids_transfattyAcids: {\r\n        de: 'Transfettsäuren',\r\n        en: 'Transfatty acids'\r\n    },\r\n    label_nutrient_lipids_omega3: {\r\n        de: 'Omega-3-Fettsäuren',\r\n        en: 'Omega-3 fatty acids'\r\n    },\r\n    label_nutrient_lipids_omega6: {\r\n        de: 'Omega-6-Fettsäuren',\r\n        en: 'Omega-6 fatty acids'\r\n    },\r\n    label_nutrient_lipids_cholesterol: {\r\n        de: 'Cholesterin',\r\n        en: 'Cholesterol'\r\n    },\r\n    label_nutrient_min: {\r\n        de: 'Mineralstoffe',\r\n        en: 'Minerals'\r\n    },\r\n    label_nutrient_min_calcium: {\r\n        de: 'Kalzium',\r\n        en: 'Calcium'\r\n    },\r\n    label_nutrient_min_copper: {\r\n        de: 'Kupfer',\r\n        en: 'Copper'\r\n    },\r\n    label_nutrient_min_iron: {\r\n        de: 'Eisen',\r\n        en: 'Iron'\r\n    },\r\n    label_nutrient_min_magnesium: {\r\n        de: 'Magnesium',\r\n        en: 'Magnesium'\r\n    },\r\n    label_nutrient_min_manganese: {\r\n        de: 'Mangan',\r\n        en: 'Manganese'\r\n    },\r\n    label_nutrient_min_phosphorus: {\r\n        de: 'Phosphor',\r\n        en: 'Phosphorus'\r\n    },\r\n    label_nutrient_min_potassimum: {\r\n        de: 'Kalium',\r\n        en: 'Potassimum'\r\n    },\r\n    label_nutrient_min_selenium: {\r\n        de: 'Selen',\r\n        en: 'Selenium'\r\n    },\r\n    label_nutrient_min_sodium: {\r\n        de: 'Natrium',\r\n        en: 'Sodium'\r\n    },\r\n    label_nutrient_min_zinc: {\r\n        de: 'Zink',\r\n        en: 'Zinc'\r\n    },\r\n    label_nutrient_omega3: {\r\n        de: 'Omega-3-Fettsäuren',\r\n        en: 'Omega-3 Fatty acids'\r\n    },\r\n    label_nutrient_omega6: {\r\n        de: 'Omega-6-Fettsäuren',\r\n        en: 'Omega-6 Fatty acids'\r\n    },\r\n    label_nutrient_proteins: {\r\n        de: 'Eiweiß',\r\n        en: 'Proteins'\r\n    },\r\n    label_nutrient_proteins_alanine: {\r\n        de: 'Alanin',\r\n        en: 'Alanine'\r\n    },\r\n    label_nutrient_proteins_arginine: {\r\n        de: 'Arginin',\r\n        en: 'Arginine'\r\n    },\r\n    label_nutrient_proteins_asparticAcid: {\r\n        de: 'Asparaginsäure',\r\n        en: 'Aspartic acid'\r\n    },\r\n    label_nutrient_proteins_cystine: {\r\n        de: 'Cystein',\r\n        en: 'Cysteine'\r\n    },\r\n    label_nutrient_proteins_glysine: {\r\n        de: 'Glysin',\r\n        en: 'Glysine'\r\n    },\r\n    label_nutrient_proteins_glutamicAcid: {\r\n        de: 'Glutamin',\r\n        en: 'Glutamic acid'\r\n    },\r\n    label_nutrient_proteins_histidine: {\r\n        de: 'Histidin',\r\n        en: 'Histidine'\r\n    },\r\n    label_nutrient_proteins_isoleucine: {\r\n        de: 'Isoleucine',\r\n        en: 'Isoleucine'\r\n    },\r\n    label_nutrient_proteins_leucine: {\r\n        de: 'Leucin',\r\n        en: 'Leucine'\r\n    },\r\n    label_nutrient_proteins_lysine: {\r\n        de: 'Lysin',\r\n        en: 'Lysine'\r\n    },\r\n    label_nutrient_proteins_methionine: {\r\n        de: 'Methionin',\r\n        en: 'Methionine'\r\n    },\r\n    label_nutrient_proteins_phenylalanine: {\r\n        de: 'Phenylalanin',\r\n        en: 'Phenylalanine'\r\n    },\r\n    label_nutrient_proteins_proline: {\r\n        de: 'Prolin',\r\n        en: 'Proline'\r\n    },\r\n    label_nutrient_proteins_serine: {\r\n        de: 'Serin',\r\n        en: 'Serine'\r\n    },\r\n    label_nutrient_proteins_threonine: {\r\n        de: 'Threonin',\r\n        en: 'Threonine'\r\n    },\r\n    label_nutrient_proteins_tryptophan: {\r\n        de: 'Tryptophan',\r\n        en: 'Tryptophan'\r\n    },\r\n    label_nutrient_proteins_tyrosine: {\r\n        de: 'Tyrosin',\r\n        en: 'Tyrosine'\r\n    },\r\n    label_nutrient_proteins_valine: {\r\n        de: 'Valin',\r\n        en: 'Valine'\r\n    },\r\n    label_nutrient_remainder: {\r\n        de: 'Rest',\r\n        en: 'Remainder'\r\n    },\r\n    label_nutrient_sugar: {\r\n        de: 'Zucker',\r\n        en: 'Sugar'\r\n    },\r\n    label_nutrient_vit: {\r\n        de: 'Vitamine',\r\n        en: 'Vitamins'\r\n    },\r\n    label_nutrient_vit_a: {\r\n        de: 'Vitamin A (Retinol / Retinal)',\r\n        en: 'Vitamin A (Retinol / Retinal)'\r\n    },\r\n    label_nutrient_vit_b1: {\r\n        de: 'Vitamin B1 (Thiamin)',\r\n        en: 'Vitamin B1 (Thiamine)'\r\n    },\r\n    label_nutrient_vit_b2: {\r\n        de: 'Vitamin B2 (Riboflavin)',\r\n        en: 'Vitamin B2 (Riboflavin)'\r\n    },\r\n    label_nutrient_vit_b3: {\r\n        de: 'Vitamin B3 (Niacin)',\r\n        en: 'Vitamin B3 (Niacin)'\r\n    },\r\n    label_nutrient_vit_b5: {\r\n        de: 'Vitamin B5 (Pantothensäure)',\r\n        en: 'Vitamin B5 (Pantothenic acid)'\r\n    },\r\n    label_nutrient_vit_b6: {\r\n        de: 'Vitamin B6',\r\n        en: 'Vitamin B6'\r\n    },\r\n    label_nutrient_vit_b9: {\r\n        de: 'Vitamin B9 (Folsäure)',\r\n        en: 'Vitamin B9 (Folate)'\r\n    },\r\n    label_nutrient_vit_b12: {\r\n        de: 'Vitamin B12',\r\n        en: 'Vitamin B12'\r\n    },\r\n    label_nutrient_vit_c: {\r\n        de: 'Vitamin C',\r\n        en: 'Vitamin C'\r\n    },\r\n    label_nutrient_vit_d: {\r\n        de: 'Vitamin D',\r\n        en: 'Vitamin D'\r\n    },\r\n    label_nutrient_vit_e: {\r\n        de: 'Vitamin E',\r\n        en: 'Vitamin E'\r\n    },\r\n    label_nutrient_vit_k: {\r\n        de: 'Vitamin K',\r\n        en: 'Vitamin K'\r\n    },\r\n    label_nutrient_vit_carotenoid: {\r\n        de: 'Provitamin A (Carotine)',\r\n        en: 'Carotene (total)'\r\n    },\r\n    label_nutrient_vit_carotenoid_alpha: {\r\n        de: 'Alpha-Carotin',\r\n        en: 'Alpha-Carotene'\r\n    },\r\n    label_nutrient_vit_carotenoid_beta: {\r\n        de: 'Beta-Carotin',\r\n        en: 'Beta-Carotene'\r\n    },\r\n    label_nutrient_vit_scientific_a: {\r\n        de: 'inkl. Provitamin A / Carotine',\r\n        en: 'incl. caraotene'\r\n    },\r\n    label_nutrient_vit_scientific_b1: {\r\n        de: 'Thiamine',\r\n        en: 'Thiamine'\r\n    },\r\n    label_nutrient_vit_scientific_b2: {\r\n        de: 'Riboflavin',\r\n        en: 'Riboflavin'\r\n    },\r\n    label_nutrient_vit_scientific_b3: {\r\n        de: 'Niacin',\r\n        en: 'Niacin'\r\n    },\r\n    label_nutrient_vit_scientific_b5: {\r\n        de: 'Pantothensäure',\r\n        en: 'Pantothenic acid'\r\n    },\r\n    label_nutrient_vit_scientific_b9: {\r\n        de: 'Folsäure',\r\n        en: 'Folate'\r\n    },\r\n    label_nutrient_vit_scientific_b12: {\r\n        de: 'Cobalamin',\r\n        en: 'Cobalamin '\r\n    },\r\n    label_nutrient_vit_scientific_c: {\r\n        de: 'Ascorbinsäure',\r\n        en: 'Ascorbic acid'\r\n    },\r\n    label_nutrient_vit_scientific_d: {\r\n        de: 'Vitamin D',\r\n        en: 'Vitamin D'\r\n    },\r\n    label_nutrient_vit_scientific_e: {\r\n        de: 'Tocopherol',\r\n        en: 'Tocopherol'\r\n    },\r\n    label_nutrient_vit_scientific_k: {\r\n        de: 'Vitamin K',\r\n        en: 'Vitamin K'\r\n    },\r\n    label_nutrient_water: {\r\n        de: 'Wasser',\r\n        en: 'Water'\r\n    },\r\n    label_overview: {\r\n        de: 'Übersicht',\r\n        en: 'Overview'\r\n    },\r\n    label_per_100g: {\r\n        de: 'je 100 g',\r\n        en: 'per 100 g'\r\n    },\r\n    label_per_portion: {\r\n        de: 'je Portion',\r\n        en: 'per portion'\r\n    },\r\n    label_portion: {\r\n        de: 'Portion',\r\n        en: 'Portion'\r\n    },\r\n    label_portion_selected: {\r\n        de: 'Ausgewählte Portion',\r\n        en: 'Selected portion'\r\n    },\r\n    label_portion_common: {\r\n        de: 'Typische Portion',\r\n        en: 'Typical portion'\r\n    },\r\n    label_prefix_hereof: {\r\n        de: 'davon',\r\n        en: 'hereof'\r\n    },\r\n    label_reference: {\r\n        de: 'Bezug',\r\n        en: 'Reference'\r\n    },\r\n    label_preferred_source: {\r\n        de: 'Bevorzugte Datenquelle',\r\n        en: 'Preferred data source'\r\n    },\r\n    label_ranking_dietaryRequirements: {\r\n        de: 'Zeige Tagesbedarf',\r\n        en: 'Show dietary requirements'\r\n    },\r\n    label_source: {\r\n        de: 'Datenquelle',\r\n        en: 'Data source'\r\n    },\r\n    label_source_supplement: {\r\n        de: \"Unvollständige Daten ergänzen\",\r\n        en: \"Supplement incomplete data\"\r\n    },\r\n    label_source_supplement_tooltip: {\r\n        de: \"Ergänzt fehlende Daten aus einer anderen Quelle, sofern diese die entsprechenden Daten enthält\",\r\n        en: \"Supplements missing data from another source in case that source contains the relevant data\"\r\n    },\r\n    label_source_combine: {\r\n        de: \"Datenquellen kombinieren\",\r\n        en: \"Combine data sources\"\r\n    },\r\n    label_source_combine_tooltip: {\r\n        de: \"Bildet den Daten-Mittelwert aus allen Datenquellen zu dem Lebensmittel\",\r\n        en: \"Create the average data out of all available data sources to this food\"\r\n    },\r\n    label_title: {\r\n        de: 'Titel',\r\n        en: 'Title'\r\n    },\r\n    label_unknown: {\r\n        de: 'Unbekannt',\r\n        en: 'Unknown'\r\n    },\r\n    label_usda_reference: {\r\n        de: 'Daten auf Food Data Central ansehen',\r\n        en: 'See the nutrient data at Food Data Central'\r\n    },\r\n    label_userSettings_age: {\r\n        de: 'Alter (Jahre)',\r\n        en: 'Age (years)'\r\n    },\r\n    label_userSettings_breastfeeding: {\r\n        de: 'stillend',\r\n        en: 'breast-feeding'\r\n    },\r\n    label_userSettings_intro: {\r\n        de: 'Die User-Einstellungen (Körpergröße, Gewicht, Geschlecht etc.) werden zur Berechnung bestimmter Werte verwendet, z.B. Grundumsatz oder Tagesbedarf an Vitaminen.',\r\n        en: 'User settings such as size, weight and sex are used for different nutrient calculations, e.g., basal metabolic rate or daily requirements of vitamins and the like.'\r\n    },\r\n    label_userSettings_leisureSports: {\r\n        de: 'Freizeitsport',\r\n        en: 'Leisure sports'\r\n    },\r\n    label_userSettings_leisureSports_tooltip: {\r\n        de: 'Angabe, ob Sie an dem betreffenden Tag zusätzlich zu Ihrer Tätigkeit nennenswert Sport ausgeübt haben, z.B. 30-45 min joggen oder 45-60 min Rad fahren (erhöht PAL-Wert um 0.3)',\r\n        en: 'Specifies whether you did some notable (leisure) sports or activity that day, like 30-45 minutes jogging or 45-60 minutes biking (increases PAL-value by 0.3)'\r\n    },\r\n    label_userSettings_palValue: {\r\n        de: 'PAL-Value',\r\n        en: 'Pal Value'\r\n    },\r\n    label_userSettings_pregnant: {\r\n        de: 'schwanger',\r\n        en: 'pregnant'\r\n    },\r\n    label_userSettings_sex: {\r\n        de: 'Geschlecht:',\r\n        en: 'Sex:'\r\n    },\r\n    label_userSettings_sex_male: {\r\n        de: 'männlich',\r\n        en: 'male'\r\n    },\r\n    label_userSettings_sex_female: {\r\n        de: 'weiblich',\r\n        en: 'female'\r\n    },\r\n    label_userSettings_size: {\r\n        de: 'Körpergröße (cm)',\r\n        en: 'Size (cm)'\r\n    },\r\n    label_userSettings_weight: {\r\n        de: 'Gewicht (kg)',\r\n        en: 'Weight (kg)'\r\n    },\r\n    label_value: {\r\n        de: 'Wert',\r\n        en: 'Value'\r\n    },\r\n    menu_food_data_panel: {\r\n        de: 'Lebensmittel analysieren',\r\n        en: 'Food analyzer'\r\n    },\r\n    menu_food_data_panel_m: {\r\n        de: 'Analyse',\r\n        en: 'Analyze'\r\n    },\r\n    menu_direct_compare: {\r\n        de: 'Direktvergleich',\r\n        en: 'Direct comparison'\r\n    },\r\n    menu_direct_compare_m: {\r\n        de: 'Vergleich',\r\n        en: 'Compare'\r\n    },\r\n    menu_home: {\r\n        de: 'Home',\r\n        en: 'Home'\r\n    },\r\n    menu_ranking: {\r\n        de: 'Ranking',\r\n        en: 'Food ranking'\r\n    },\r\n    menu_ranking_m: {\r\n        de: 'Ranking',\r\n        en: 'Ranking'\r\n    },\r\n    menu_settings: {\r\n        de: 'User Einstellungen',\r\n        en: 'User settings'\r\n    },\r\n    menu_settings_m: {\r\n        de: 'Optionen',\r\n        en: 'Settings'\r\n    },\r\n    menu_contact: {\r\n        de: 'Kontakt',\r\n        en: 'Contact'\r\n    },\r\n    menu_contact_sources: {\r\n        de: 'Quellen',\r\n        en: 'Sources'\r\n    },\r\n    menu_contact_versions: {\r\n        de: 'Versionen',\r\n        en: 'Versions'\r\n    },\r\n    menu_contact_impressum: {\r\n        de: 'Impressum',\r\n        en: 'Impressum'\r\n    },\r\n    message_email_success: {\r\n        de: 'Ihre Nachricht wurde versendet.',\r\n        en: 'Your message has been sent.'\r\n    },\r\n    message_email_error: {\r\n        de: 'Beim Versenden der Nachricht trat ein Fehler auf.',\r\n        en: 'Error while trying to send message.'\r\n    },\r\n    message_error_existing_element: {\r\n        de: 'Das ausgewählte Element befindet sich bereits im Datenbereich. Ein Lebensmittel darf nur einmal hinzugefügt werden.',\r\n        en: 'The selected food item already exists in your list. A food item can be added only once.'\r\n    },\r\n    message_error_incomplete_form: {\r\n        de: 'Das Formular ist unvollständig ausgefüllt.',\r\n        en: 'The form is incomplete.'\r\n    },\r\n    message_error_invalid_portion: {\r\n        de: 'Geben Sie bitte eine Portion zwischen 1 und 5000 Gramm an.',\r\n        en: 'Please specify a portion amount between 1 and 5000 gram.'\r\n    },\r\n    message_userdata_success: {\r\n        de: 'Änderungen wurden gespeichert.',\r\n        en: 'Saved changes.'\r\n    },\r\n    message_userdata_error_title: {\r\n        de: 'Fehlerhafte Eingabe',\r\n        en: 'Invalid input'\r\n    },\r\n    message_userdata_error_age: {\r\n        de: 'Geben Sie bitte ein Alter zwischen 15 und 100 Jahren ein.',\r\n        en: 'Please enter an age between 15 and 100 years.'\r\n    },\r\n    message_userdata_error_size: {\r\n        de: 'Geben Sie bitte eine Körpergröße zwischen 80 und 225 cm ein.',\r\n        en: 'Please enter a body height between 80 and 225 cm.'\r\n    },\r\n    message_userdata_error_weight: {\r\n        de: 'Geben Sie bitte ein Gewicht zwischen 30 und 250 kg ein.',\r\n        en: 'Please enter a body weight between 30 and 250 kg.'\r\n    },\r\n    palcat_name_1: {\r\n        de: 'Extrem niedrige Aktivität',\r\n        en: 'Extremely light activity.'\r\n    },\r\n    palcat_desc_1: {\r\n        de: 'Bspw. ans Bett gebundene Menschen.',\r\n        en: 'Such as bed-ridden people.'\r\n    },\r\n    palcat_name_2: {\r\n        de: 'Sehr nierdige Aktivität',\r\n        en: 'Very light activity'\r\n    },\r\n    palcat_desc_2: {\r\n        de: 'Bspw. sehr einfache Büroarbeit in permanent sitzender Haltung, Reisende in einem Flugzeug oder Zug (sitzend).',\r\n        en: 'Such as very light office work (permanently seated), passengers sitting in a train or airplane.'\r\n    },\r\n    palcat_name_3: {\r\n        de: 'Niedrige Aktivität',\r\n        en: 'Light activity'\r\n    },\r\n    palcat_desc_3: {\r\n        de: 'Überwiegend sitzende Tätigkeit, mit Phasen im stehenden Zustand (z.B. Berufsfahrer, Ärzte, Lehrer, Schüler) oder dem Ausführen zusätzlicher leichter Tätigkeiten (z.B. einfache Haushaltstätigkeiten).',\r\n        en: 'Mostly seated activity, with phases of standing activity (e.g., drivers, doctors, students, teachers...) or additional tasks like simple household chores.'\r\n    },\r\n    palcat_name_4: {\r\n        de: 'Mäßige Aktivität',\r\n        en: 'Mediocre Activity'\r\n    },\r\n    palcat_desc_4: {\r\n        de: 'Überwiegende Stehende Tätigkeit (z.B. Handwerker, Verkäufer, Kellner, Krankenschwester).',\r\n        en: 'Mostly standing activity (e.g. shop assistants, waiters, craftsmen, nurses).'\r\n    },\r\n    palcat_name_5: {\r\n        de: 'Hohe Aktivität',\r\n        en: 'High activity'\r\n    },\r\n    palcat_desc_5: {\r\n        de: 'Körperlich schwere Arbeit, z.B. Bauarbeiter, Möbelpacker, Sportlehrer.',\r\n        en: 'Hard work, such as construction workers, movers, gym teachers etc.'\r\n    },\r\n    palcat_name_6: {\r\n        de: 'Sehr hohe Aktivität',\r\n        en: 'Very high activity'\r\n    },\r\n    palcat_desc_6: {\r\n        de: 'Körperlich sehr schwere Arbeit, z.B. Bauarbeiter, Möbelpacker, Fitnesstrainer, Bergarbeiter.',\r\n        en: 'Very hard work, such as construction workers, movers, fitness trainers, miners etc.'\r\n    },\r\n    palcat_name_7: {\r\n        de: 'Extrem hohe Aktivität',\r\n        en: 'Extremely high activity'\r\n    },\r\n    palcat_desc_7: {\r\n        de: 'Bspw. (Hoch-) Leistungssportler.',\r\n        en: 'Such as professional athletes.'\r\n    },\r\n    portion_100g: {\r\n        de: '100 Gramm',\r\n        en: '100 Gram'\r\n    },\r\n    portion_individual: {\r\n        de: 'Individuell',\r\n        en: 'Individual'\r\n    },\r\n    text_contact_disclaimer1: {\r\n        de: 'Alle Rechte vorbehalten.',\r\n        en: 'All rights reserved.'\r\n    },\r\n    text_contact_disclaimer2: {\r\n        de: 'Food Compare basiert auf freien Datenquellen, die im Quellen-Tab näher beschrieben sind. Die Lebensmitteldaten stammen von Food Data Central, einem Teilprojekt des United States Department of Agriculture. Im Info-Tab des Daten-Panels existiert für jedes Lebensmittel ein Link zu den abgegriffenen Daten.',\r\n        en: 'Food Compare is based upon free data sources specified in the sources tab. Food data used in the project originates from Food Data Central as part of the United States Department of Agriculture. There is a direct link to the original source data of each food element in the info data page of the food data panel.'\r\n    },\r\n    text_contact_disclaimer3: {\r\n        de: 'Die für die Berechnung des Tagesbedarfs verwendeten Einstellungen entstammen der Deutschen Gesellschaft für Ernährung (DGE).',\r\n        en: 'For the computation of daily dietary requirements, data from the German Nutrition Society (DGE) is used.'\r\n    },\r\n    text_contact_form: {\r\n        de: 'Bitte benutzen Sie das Kontaktformular, wenn Sie Frage oder Feedback zu Food Compare haben.',\r\n        en: 'Please use the contact form below if you have questions of feedback about Food Compare.'\r\n    },\r\n    text_contact_source1: {\r\n        de: 'Quellen:',\r\n        en: 'Sources:',\r\n    },\r\n    text_contact_source2: {\r\n        de: 'Nährwert-Daten:',\r\n        en: 'Nutrient Data:',\r\n    },\r\n    text_contact_source3: {\r\n        de: 'Daten für Tagesbedarf von Vitaminen/Mineralstoffen:',\r\n        en: 'Source for Dietary Requirement of Minerals and Vitamins',\r\n    },\r\n    text_contact_source4: {\r\n        de: 'Berechnung von Grundumsatz und PAL:',\r\n        en: 'Calculation of BMR and PAL:',\r\n    },\r\n    text_empty_fooddatapanel: {\r\n        de: 'Klicken Sie links auf den Plus-Button, um Lebensmittel zum Analysebereich hinzufügen. Es können beliebig viele Lebensmittel hinzugefügt werden. Klicken Sie den Stapel-Button, um ein komplexes Lebensmittel bzw. ein Menü zusammenzustellen, dessen Gesamtwerte dann angezeigt werden.',\r\n        en: 'Click the plus button on the left to add food elements to the analysis panel. You can add as many food elements as you like. Click the stack button if you want to create complex meals to show their total nutrient data.'\r\n    },\r\n    text_empty_fooddatapanel_mobileInfo: {\r\n        de: 'Das Erstellen komplexer Lebensmittel wird auf Mobilgeräten aktuell nicht unterstützt.',\r\n        en: 'Presently, complex menus cannot be created on mobile devices.'\r\n    },\r\n    text_ranking: {\r\n        de: \"Sie können in diesem Bereich Nahrungsmittel nach einem bestimmten Nährstoff, Vitamin oder Mineralstoff sortiert anzeigen lassen. Wählen Sie dazu eine Kategorie aus, eine Gruppe und eine bestimmte Nährstoffangabe (Wert).\",\r\n        en: \"In this section you may display food items sorted by a specific nutrient, vitamin or mineral. Please select a food category, nutrient group and value to display the corresponding ranking chart.\"\r\n    },\r\n    text_setUserdata_p1: {\r\n        de: 'Es werden aktuell Referenzwerte für einen durchschnittlichen Erwachsenen (männlich, 35 Jahre) angezeigt.',\r\n        en: 'You are currently seeing the reference data for an average adult (male, 35 years).'\r\n    },\r\n    text_setUserdata_p2: {\r\n        de: 'Geben Sie, bei Bedarf, in den Einstellungen Ihre eigenen Körperdaten für ein genaueres Ergebnis ein.',\r\n        en: 'For more accurate data, if necessary, please enter your personal body data in the settings menu.'\r\n    },\r\n    text_setUserdata_p3: {\r\n        de: 'Die Referenzwerte beziehen sich auf die eingestellten Nutzerdaten.',\r\n        en: 'The reference data refer to your entered body data.'\r\n    },\r\n    tooltip_icon_charts: {\r\n        de: 'Diagramm-Modus',\r\n        en: 'Chart mode'\r\n    },\r\n    tooltip_icon_close: {\r\n        de: 'Tab schließen',\r\n        en: 'Close tab'\r\n    },\r\n    tooltip_icon_newFoodItem: {\r\n        de: 'Lebensmittel hinzufügen',\r\n        en: 'Add food item'\r\n    },\r\n    tooltip_icon_newFoodItemStack: {\r\n        de: 'Kombinierte Liste an Lebensmitteln hinzufügen (aggregierte Daten)',\r\n        en: 'Add composite list of food items (aggregated data)'\r\n    },\r\n    tooltip_icon_removeAll: {\r\n        de: 'Alle Tabs schließen',\r\n        en: 'Close all data tabs'\r\n    },\r\n    tooltip_icon_table: {\r\n        de: 'Tabellen-Modus',\r\n        en: 'Table mode'\r\n    },\r\n    tooltip_source: {\r\n        de: 'Verwendete Quelle: ',\r\n        en: 'Used source: '\r\n    }\r\n}","import {useEffect, useState} from \"react\";\r\nimport {smallFormsScreenSize} from \"../config/ApplicationSetting\";\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\nexport interface WindowDimension {\r\n    width: number\r\n    height: number\r\n}\r\n\r\nfunction getCurrentWindowDimension() {\r\n    return {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight\r\n    }\r\n}\r\n\r\nexport function useWindowDimension() {\r\n    const [windowDimension, setWindowDimension] = useState(getCurrentWindowDimension())\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", () => setWindowDimension(getCurrentWindowDimension))\r\n        return () => window.removeEventListener(\"resize\", () => setWindowDimension(getCurrentWindowDimension))\r\n    }, [])\r\n\r\n    return windowDimension\r\n}\r\n\r\n\r\nexport function isSmallScreen(windowDimension: WindowDimension) {\r\n    return windowDimension.width < smallFormsScreenSize.width || windowDimension.height < smallFormsScreenSize.height\r\n}\r\n\r\nexport function isNarrowScreen(windowDimension: WindowDimension) {\r\n    return windowDimension.width < smallFormsScreenSize.width\r\n}\r\n\r\nexport function isMobileDevice() {\r\n    return true\r\n    // return isMobile\r\n}","import logo from '../static/image/logo.png'\r\nimport text from '../static/image/text.png'\r\nimport {Button} from \"react-bootstrap\";\r\nimport {\r\n    LANGUAGE_DE,\r\n    LANGUAGE_EN,\r\n    PATH_FOODDATA_PANEL,\r\n    PATH_HOME,\r\n    PATH_CONTACT,\r\n    PATH_USERSETTINGS,\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODCOMPARE,\r\n    SOURCE_SRLEGACY,\r\n    PATH_RANKING,\r\n    SOURCE_FNDDS\r\n} from \"../config/Constants\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {Link} from 'react-router-dom';\r\nimport {useLocation} from 'react-router-dom';\r\nimport {isMobileDevice} from \"../service/WindowDimension\";\r\n\r\n\r\nexport default function Header() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language, userLanguageChange} = useContext(LanguageContext)\r\n    const location = useLocation();\r\n\r\n    if (applicationContext === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleLanguageButtonClick = (event: any): void => {\r\n        userLanguageChange(event.target.value)\r\n        applicationContext.setFoodDataPanelData.updateAllFoodItemNames(applicationContext.foodDataCorpus.foodNames, event.target.value)\r\n    }\r\n\r\n    const handleSourceButtonClick = (event: any): void => {\r\n        applicationContext.setPreferredSource(event.target.value)\r\n    }\r\n\r\n    let activePath = location.pathname && location.pathname !== \"/\" ? location.pathname : PATH_HOME\r\n    if (activePath.endsWith(\"/\") && activePath.length > 1) {\r\n        activePath = activePath.substring(0, activePath.length - 1)\r\n    }\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('Path:', activePath)\r\n    }\r\n\r\n    const renderMenus = () => {\r\n        const menuNameAnalyze = isMobileDevice() ? applicationStrings.menu_food_data_panel_m[language] : applicationStrings.menu_food_data_panel[language]\r\n        const menuNameDirectCompare = isMobileDevice() ? applicationStrings.menu_direct_compare_m[language] : applicationStrings.menu_direct_compare[language]\r\n        const menuNameRanking = isMobileDevice() ? applicationStrings.menu_ranking_m[language] : applicationStrings.menu_ranking[language]\r\n        const menuNameSettings = isMobileDevice() ? applicationStrings.menu_settings_m[language] : applicationStrings.menu_settings[language]\r\n\r\n        const buttonContainerClass = isMobileDevice() ? \"link header-link-mobile\" : \"link header-link\"\r\n\r\n        return (\r\n            <div className={\"btn-group flex flex-wrap\" }>\r\n                <Link to={PATH_HOME}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_HOME}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_HOME || activePath === PATH_FOODCOMPARE}>\r\n                        {applicationStrings.menu_home[language]}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_FOODDATA_PANEL}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_FOODDATA_PANEL}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_FOODDATA_PANEL}>\r\n                        {menuNameAnalyze}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_DIRECT_COMPARE}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_DIRECT_COMPARE}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_DIRECT_COMPARE}>\r\n                        {menuNameDirectCompare}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_RANKING}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_RANKING}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_RANKING}>\r\n                        {menuNameRanking}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_USERSETTINGS}>\r\n                    <Button className={buttonContainerClass}\r\n                            value={PATH_USERSETTINGS}\r\n                            variant={'link'}\r\n                            active={activePath === PATH_USERSETTINGS}>\r\n                        {menuNameSettings}\r\n                    </Button>\r\n                </Link>\r\n                <Link to={PATH_CONTACT}>\r\n                    <Button className={buttonContainerClass}\r\n                            variant={'link'}\r\n                            value={PATH_CONTACT}\r\n                            active={activePath === PATH_CONTACT}>\r\n                        {applicationStrings.menu_contact[language]}\r\n                    </Button>\r\n                </Link>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const language_en = isMobileDevice() ? applicationStrings.checkbox_english_m[language] : applicationStrings.checkbox_english[language]\r\n    const language_de = isMobileDevice() ? applicationStrings.checkbox_german_m[language] : applicationStrings.checkbox_german[language]\r\n\r\n    const formElementsClass = isMobileDevice() ? \"form-elements-m\" : \"form-elements\"\r\n\r\n    const renderLanguageButtons = () => {\r\n        return (\r\n            <div className=\"form-small text-right\">\r\n                <form>\r\n                    <label className={formElementsClass}>\r\n                        <b>{applicationStrings.label_language[language]}</b>\r\n                    </label>\r\n                    <label className={formElementsClass}>\r\n                        <input className=\"form-radiobutton\"\r\n                               name={\"user language\"}\r\n                               type=\"radio\"\r\n                               value={LANGUAGE_EN}\r\n                               defaultChecked={language === LANGUAGE_EN}\r\n                               onClick={handleLanguageButtonClick}\r\n                        />\r\n                        {language_en}\r\n                    </label>\r\n                    <label style={{marginRight: \"25px\"}}>\r\n                        <input className=\"form-radiobutton\"\r\n                               name={\"user language\"}\r\n                               type=\"radio\"\r\n                               value={LANGUAGE_DE}\r\n                               defaultChecked={language === LANGUAGE_DE}\r\n                               onClick={handleLanguageButtonClick}\r\n                        />\r\n                        {language_de}\r\n                    </label>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderSourceButtons = () => {\r\n        const preferredSource = applicationContext.applicationData.preferredSource\r\n\r\n        return (\r\n            <div className=\"form-small text-right\" style={{paddingLeft: \"25px\"}}>\r\n                <form className=\"form-group\">\r\n                    <label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_preferred_source[language]}</b>\r\n                    </label>\r\n                    <label className=\"form-elements\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               value={SOURCE_SRLEGACY}\r\n                               checked={preferredSource === SOURCE_SRLEGACY}\r\n                               onChange={handleSourceButtonClick}\r\n                        />\r\n                        SR Legacy\r\n                    </label>\r\n                    <label className=\"form-elements-largespace\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               value={SOURCE_FNDDS}\r\n                               checked={(preferredSource === SOURCE_FNDDS)}\r\n                               onChange={handleSourceButtonClick}\r\n                        />\r\n                        FNDDS (Survey)\r\n                    </label>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const makeHeaderDesktop = () => {\r\n        return (\r\n            <div className=\"d-flex flex-row header\">\r\n                <div style={{paddingTop: \"8px\", paddingLeft: \"8px\", minWidth: \"90px\", maxWidth: \"90px\"}}>\r\n                    <img src={logo} alt={\"Food Compare Logo\"}/>\r\n                </div>\r\n                <div className={\"d-flex flex-column w-100\"}>\r\n                    <div className=\"d-flex flex-row align-items-center justify-content-between\">\r\n                        <div style={{paddingTop: \"5px\"}}>\r\n                            <img src={text} alt={\"Food Compare Logo Text\"}/>\r\n                        </div>\r\n                        <div className=\"d-flex flex-row justify-content-end\" style={{paddingTop: \"6px\"}}>\r\n                            {renderLanguageButtons()}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"d-flex flex-row\" style={{marginTop: \"3px\"}}>\r\n                        <div className=\"col-md-12 text-start\">\r\n                            {renderMenus()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const makeHeaderMobile = () => {\r\n        return (\r\n            <div className=\"d-flex flex-row header\">\r\n                <div style={{paddingTop: \"4px\", paddingLeft: \"4px\", minWidth: \"75px\", maxWidth: \"75px\"}}>\r\n                    <img src={logo} alt={\"Food Compare Logo\"}/>\r\n                </div>\r\n                <div className={\"d-flex flex-column w-100\"}>\r\n                    <div className=\"d-flex flex-row align-items-center justify-content-between\">\r\n                        <div style={{paddingTop: \"5px\"}}>\r\n                            <img src={text} style={{width: \"22vw\"}} alt={\"Food Compare Logo Text\"}/>\r\n                        </div>\r\n                        <div className=\"d-flex flex-row justify-content-end\" style={{paddingTop: \"6px\"}}>\r\n                            {renderLanguageButtons()}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"d-flex flex-row\" style={{marginTop: \"3px\"}}>\r\n                        <div className=\"col-md-12 text-start\">\r\n                            {renderMenus()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return isMobileDevice() ? makeHeaderMobile() : makeHeaderDesktop()\r\n}","import ReactGA from \"react-ga4\";\r\n\r\nexport function callEvent(debugMode, action: string, category: string, label?: string, value?: number) {\r\n    if(debugMode) {\r\n        console.log(`[Event Call] ${action} | ${category} | label=${label}, value=${value}`)\r\n    } else {\r\n        ReactGA.event({\r\n            action: action,\r\n            category: category,\r\n            label: label,\r\n            value: value\r\n        })\r\n    }\r\n}","export const GA_CATEGORY_HOME = \"Home Menu\"\r\nexport const GA_CATEGORY_HEADER = \"Header\"\r\nexport const GA_CATEGORY_FOOD_ANALYZER = \"Food Analyzer\"\r\nexport const GA_CATEGORY_DIRECT_COMPARE = \"Direct Compare\"\r\nexport const GA_CATEGORY_RANKING = \"Ranking\"\r\nexport const GA_CATEGORY_USER_SETTINGS = \"User Settings Menu\"\r\nexport const GA_CATEGORY_CONTACT = \"Contact\"\r\n\r\nexport const GA_CATEGORY_DATAPANEL = \"Data Panel\"\r\n\r\n/*\r\n * In the Food Selector, a food item has been selected and added to the Food Analyzer.\r\n *  label: The name of the food class (English)\r\n *  value: The Food Item ID of the selected food item\r\n */\r\nexport const GA_ACTION_SELECT_FOOD_ITEM = \"FA: Single item selection\"\r\n\r\n/*\r\n * In the Direct Compare menu, a new comparison is made, meaning that one or two new food items have been selected.\r\n *  label: The names of the food classes to be compared (English name), separated by semicolon.\r\n *  value: The food item ID of the first selection (the second food item is disregarded).\r\n */\r\nexport const GA_ACTION_SELECTION_DIRECT_COMPARE = \"DC: New selection\"\r\n\r\n/*\r\n * In the Ranking menu, a new category has been selected.\r\n *  label: The ID of the selected category (0 = all).\r\n */\r\nexport const GA_ACTION_SELECTION_RANKING_CAT = \"RA: New category selected\"\r\n\r\n/*\r\n * In the Ranking menu, a new element for comparison has been selected.\r\n *  label: The name of the selected element, such as Vitamin B1, iron (English).\r\n */\r\nexport const GA_ACTION_SELECTION_RANKING_ELEMENT = \"RA: New element selected\"\r\n\r\n/*\r\n * In the Ranking menu, the configuration for displaying data was changed (radio button / checkbox).\r\n *  label: The names of the the configuration parameter (portion, show Dietary Req.)\r\n */\r\nexport const GA_ACTION_RANKING_CONFIG = \"RA: Change configuration\"\r\n\r\n/*\r\n * In the Home menu, one of the start buttons has been clicked (access a specific feature).\r\n *  label: The name of the feature to be clicked\r\n */\r\nexport const GA_ACTION_HOME_CLICK_START_BUTTON = \"HO: Click start button\"\r\n\r\n/*\r\n * In the Home menu, one of the menu buttons in the header has been clicked.\r\n *  label: The path (menu name)\r\n */\r\nexport const GA_ACTION_HOME_ACCESS_MENU = \"Header: Access menu\"\r\n\r\n/*\r\n * In the Header, the language has been changed (a language radio button was clicked).\r\n *  label: The name of the language that was clicked (German, English).\r\n */\r\nexport const GA_ACTION_HEADER_CONFIG_LANGUAGE = \"Header: Switch language\"\r\n\r\n/*\r\n * In the Header, the primary data source has been changed.\r\n *  label: The name of the source that was clicked (SR Legacy, FNDDS).\r\n */\r\nexport const GA_ACTION_HEADER_CONFIG_DATASOURCE = \"Header: Switch prim. data source\"\r\n\r\n/*\r\n * In the User menu, new data has been submitted.\r\n */\r\nexport const GA_ACTION_USER_SETTINGS = \"SE: Submit new user data\"\r\n\r\n/*\r\n * In the Contact menu, a sub-menu has been accessed.\r\n *  label: The name of the sub menu (such as Contact, Versions etc.)\r\n */\r\nexport const GA_ACTION_CONTACT_SUBMENU = \"CO: Access sub-menu\"\r\n\r\n/*\r\n * In the Data Panel, the page has been switched (a data page link button was clicked, e.g. Vitamins).\r\n *  label: The name of the data page (such as Vitamins)\r\n *  value: 1 if it happened in the Food Analyzer, 2 if it happened in the Direct Compare menu\r\n */\r\nexport const GA_ACTION_DATAPANEL_SWITCH_PAGE = \"Panel: Switch page\"\r\n\r\n/*\r\n * On the Base Data Page, some configuration has been changed (checkbox / radio button click)\r\n *  label: The name of the checkbox or radio button\r\n *  value: 1 if it happened in the Food Analyzer, 2 if it happened in the Direct Compare menu\r\n */\r\nexport const GA_ACTION_DATAPANEL_BASEDATA_CONFIG = \"Panel: Base Data Page Config Change\"\r\n\r\n/*\r\n * On the Vitamins/Minerals/Proteins Page, some configuration has been changed (checkbox / radio button click)\r\n *  label: The name of the checkbox or radio button\r\n *  value: 1 if it happened in the Food Analyzer, 2 if it happened in the Direct Compare menu\r\n */\r\nexport const GA_ACTION_DATAPANEL_VITAMINS_CONFIG = \"Panel: Vitamins Page Config Change\"\r\nexport const GA_ACTION_DATAPANEL_MINERALS_CONFIG = \"Panel: Minerals Page Config Change\"\r\nexport const GA_ACTION_DATAPANEL_PROTEINS_CONFIG = \"Panel: Proteins Page Config Change\"\r\nexport const GA_ACTION_DATAPANEL_LIPIDS_CONFIG = \"Panel: Lipids Page Config Change\"\r\nexport const GA_ACTION_DATAPANEL_CARBS_CONFIG = \"Panel: Carbs Page Config Change\"\r\n\r\n/*\r\n * In the Food Analyzer data panel a button in the header has been clicked (help, table/chart mode, close)\r\n *  label: The button / action triggered\r\n *  value: When the link to Food Data Central data is clicked (external reference), value is the selected food item ID\r\n */\r\nexport const GA_ACTION_DATAPANEL_GENERAL_ACTION = \"Panel: General action\"\r\n","import {useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {Carousel} from 'react-responsive-carousel';\r\nimport {applicationStrings} from \"../static/labels\";\r\n\r\nimport homeText1 from \"../static/hometext1.json\";\r\nimport homeText2 from \"../static/hometext2.json\";\r\nimport homeText3 from \"../static/hometext3.json\";\r\n\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport {Link} from 'react-router-dom';\r\nimport {LANGUAGE_DE, PATH_DIRECT_COMPARE, PATH_FOODDATA_PANEL, PATH_RANKING} from \"../config/Constants\";\r\nimport {FaAngleDoubleRight} from \"react-icons/fa\";\r\nimport {isMobileDevice} from \"../service/WindowDimension\";\r\nimport {callEvent} from \"../service/GA_EventService\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {GA_ACTION_HOME_CLICK_START_BUTTON, GA_CATEGORY_HOME} from \"../config/GA_Events\";\r\n\r\nconst images = require.context('../static/image/carousel', true);\r\n\r\ninterface HomeTextElement {\r\n    type: string\r\n    de: string\r\n    en: string\r\n}\r\n\r\nexport function Home() {\r\n    const {language} = useContext(LanguageContext)\r\n    const [displayedImage, setDisplayedImage] = useState<number>(0)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const imageChanged = (image) => {\r\n        setDisplayedImage(image)\r\n    }\r\n\r\n    const renderCarousel = () => {\r\n        const pic1 = images(`./Img-${language}-1.png`).default;\r\n        const pic2 = images(`./Img-${language}-2.png`).default;\r\n        const pic3 = images(`./Img-${language}-3.png`).default;\r\n        const pic4 = images(`./Img-${language}-4.png`).default;\r\n        const pic5 = images(`./Img-${language}-5.png`).default;\r\n        const pic6 = images(`./Img-${language}-6.png`).default;\r\n        const pic7 = images(`./Img-${language}-7.png`).default;\r\n\r\n        const captionAttribute = `home_carousel_${displayedImage}`;\r\n        const imageCaption = applicationStrings[captionAttribute][language];\r\n\r\n        return (\r\n            <div style={{paddingBottom: \"40px\"}}>\r\n                <Carousel showArrows={true}\r\n                          infiniteLoop={true} autoPlay={true}\r\n                          interval={6000}\r\n                          transitionTime={800}\r\n                          selectedItem={displayedImage}\r\n                          showThumbs={false}\r\n                          showStatus={false}\r\n                          onChange={imageChanged}>\r\n                    <div>\r\n                        <img src={pic1} alt={\"Carousel 1\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic2} alt={\"Carousel 2\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic3} alt={\"Carousel 3\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic4} alt={\"Carousel 4\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic5} alt={\"Carousel 5\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic6} alt={\"Carousel 6\"}/>\r\n                    </div>\r\n                    <div>\r\n                        <img src={pic7} alt={\"Carousel 7\"}/>\r\n                    </div>\r\n                </Carousel>\r\n                <div style={{textAlign: \"center\", fontStyle: \"oblique\"}}>\r\n                    {imageCaption}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // const buttonColors = [\"#f9e79f\", \"#d5f5e3\", \"#fadbd8\", \"#aed6f1\"];\r\n    const buttonBgColor = \"#2952a3\"\r\n    const buttonTextColor = \"#FFFFFF\"\r\n\r\n    const onStartButtonClick = (id: number) => {\r\n        let label = \"\";\r\n        switch (id) {\r\n            case 1:\r\n                label = \"Food Analyzer (Default Mode)\"\r\n                break;\r\n            case 2:\r\n                label = \"Food Analyzer (Aggregated)\"\r\n                break;\r\n            case 3:\r\n                label = \"Direct Compare\"\r\n                break;\r\n            case 4:\r\n                label = \"Ranking\"\r\n                break;\r\n        }\r\n\r\n        callEvent(applicationContext?.debug, GA_ACTION_HOME_CLICK_START_BUTTON, GA_CATEGORY_HOME, label)\r\n    }\r\n\r\n    const renderStartButtons = () => {\r\n        const buttonClass = isMobileDevice() ? \"text-center d-flex flex-row\" : \"text-center\"\r\n\r\n        return (\r\n            <div style={{paddingTop: \"16px\"}}>\r\n                <b>{applicationStrings.label_getStarted[language]}</b>\r\n                <div className={buttonClass}>\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_FOODDATA_PANEL + \"?add=1\"} onClick={() => onStartButtonClick(1)}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: buttonBgColor, color: buttonTextColor}}>\r\n                                {applicationStrings.button_getstarted_1[language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                    {!isMobileDevice() &&\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_FOODDATA_PANEL + \"?composite=1\"} onClick={() => onStartButtonClick(2)}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: buttonBgColor, color: buttonTextColor}}>\r\n                                {applicationStrings.button_getstarted_2[language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                    }\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_DIRECT_COMPARE} onClick={() => onStartButtonClick(3)}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: buttonBgColor, color: buttonTextColor}}>\r\n                                {applicationStrings.button_getstarted_3[language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <Link to={PATH_RANKING} onClick={() => onStartButtonClick(4)}>\r\n                            <button type=\"button\"\r\n                                    className=\"btn btn-small\"\r\n                                    style={{width: \"75%\", backgroundColor: buttonBgColor, color: buttonTextColor}}>\r\n                                {applicationStrings.button_getstarted_4[language]}\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderHomeText = (textElements: HomeTextElement[]): any => {\r\n        return textElements.map((textElement, index) => renderTextElement(textElement, index))\r\n    }\r\n\r\n    const renderTextElement = (textElement: HomeTextElement, index: number): JSX.Element => {\r\n        const text = language === LANGUAGE_DE ? textElement.de : textElement.en\r\n\r\n        switch (textElement.type) {\r\n            case \"paragraph\":\r\n                return <p key={`homeitem ${index}`}>{text}</p>\r\n            case \"subheading\":\r\n                return (\r\n                    <div key={`homeitem ${index}`}>\r\n                        <br/>\r\n                        <h4>\r\n                            {text}\r\n                        </h4>\r\n                        <hr/>\r\n                    </div>\r\n                )\r\n            case \"paragraph-before-itemization\":\r\n                return <p key={`homeitem ${index}`}><b>{text}</b></p>\r\n            case \"fancy-item\":\r\n                return (\r\n                    <div key={`homeitem ${index}`}>\r\n                        {!isMobileDevice()\r\n                            ? <span style={{paddingLeft: \"10px\", paddingRight: \"10px\"}}>\r\n                                    <FaAngleDoubleRight/>\r\n                                </span>\r\n                            : <span>\r\n                                    <FaAngleDoubleRight/>\r\n                            </span>\r\n                        }\r\n                        {text}\r\n                    </div>\r\n                )\r\n            default:\r\n                return <p>{text}</p>\r\n        }\r\n    }\r\n\r\n\r\n    const renderMobile = () => {\r\n        return (\r\n            <div className=\"media home app\" style={{margin: \"0 auto\"}}>\r\n                <div>\r\n                    <div>\r\n                        {renderHomeText(homeText1)}\r\n                        <div style={{paddingTop: \"20px\", paddingBottom: \"30px\"}}>\r\n                            {renderStartButtons()}\r\n                        </div>\r\n                        {renderHomeText(homeText2)}\r\n                    </div>\r\n                    <hr/>\r\n                    <div style={{paddingTop: \"20px\"}}>\r\n                        <h3>{applicationStrings.home_foodcompare_overview[language]}</h3>\r\n                        <div className=\"card-header\"\r\n                             style={{paddingBottom: \"20px\", marginBottom: \"30px\"}}>\r\n                            {renderHomeText(homeText3)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderDesktop = () => {\r\n        return (\r\n            <div>\r\n                <div className=\"media home app\" style={{margin: \"0 auto\"}}>\r\n                    <div className={\"container-fluid\"}>\r\n                        <div className=\"row\">\r\n                            <div className={\"col-5\"}>\r\n                                {renderHomeText(homeText1)}\r\n                                <div style={{paddingTop: \"20px\", paddingBottom: \"60px\"}}>\r\n                                    {renderStartButtons()}\r\n                                </div>\r\n                                {renderHomeText(homeText2)}\r\n                            </div>\r\n                            <div className={\"col-7\"} style={{paddingLeft: \"45px\"}}>\r\n                                {renderCarousel()}\r\n                            </div>\r\n                        </div>\r\n                        <hr/>\r\n                        <div style={{paddingTop: \"30px\"}}>\r\n                            <h3>{applicationStrings.home_foodcompare_overview[language]}</h3>\r\n                            <div className=\"card-header\"\r\n                                 style={{maxWidth: \"1000px\", paddingBottom: \"20px\", marginBottom: \"50px\"}}>\r\n                                {renderHomeText(homeText3)}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    return <div>\r\n        {isMobileDevice()\r\n            ? <div>{renderMobile()}</div>\r\n            : <div>{renderDesktop()}</div>\r\n        }\r\n    </div>\r\n\r\n\r\n}","import ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {getReactSelectOptionsList} from \"./NameTypeService\";\r\n\r\nexport function getCategorySelectList(categories: Array<NameType>, language: string): Array<ReactSelectOption> {\r\n    return getReactSelectOptionsList(categories, language)\r\n}\r\n\r\n","import FoodItem from \"../../types/nutrientdata/FoodItem\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {ReactSelectFoodItemOption} from \"../../types/ReactSelectOption\";\r\nimport getName, {removeAuxiliaryInformationFromFoodName} from \"../LanguageService\";\r\n\r\n\r\n/**\r\n * Auxiliary method to get the food item from a given food list or null.\r\n * @param foodItemId Food Item Id\r\n * @param foodItems The list of food items\r\n */\r\nexport function getFoodItem(foodItemId: number, foodItems: Array<FoodItem>): FoodItem | null {\r\n    const index = foodItems.findIndex(foodItem => foodItem.id === foodItemId)\r\n    if(index >= 0) {\r\n        return foodItems[index]\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\n/**\r\n * Makes the select list (component) for food items.\r\n * @param foodItems The list of all food items.\r\n * @param foodClass The selected food class.\r\n * @param foodNames The list of all food names.\r\n * @param conditions The list of all conditions.\r\n * @param language The given language.\r\n */\r\nexport function getFoodItemsSelectList(foodItems: Array<FoodItem>, foodClass: number, foodNames: Array<NameType>,\r\n                                       conditions: Array<NameType>, language: string): Array<ReactSelectFoodItemOption> {\r\n    const filteredFoodItems = getFoodItemsOfFoodclass(foodItems, foodClass)\r\n    const reactSelectOptions: Array<ReactSelectFoodItemOption> = []\r\n\r\n    if(filteredFoodItems && filteredFoodItems.length > 0) {\r\n        filteredFoodItems.forEach(foodItem => {\r\n            let foodName = getFoodItemName(foodItem, foodNames, language)\r\n            const condition = conditions.find(condition => condition.id === foodItem.conditionId)\r\n            const conditionName = condition ? getName(condition, language) : null\r\n\r\n            if(conditionName) {\r\n                foodName = `${foodName} (${conditionName})`\r\n            }\r\n\r\n            reactSelectOptions.push({\r\n                value: foodItem,\r\n                label: foodName ?? ''\r\n            })\r\n        })\r\n    }\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n/**\r\n * Central method to retrieve the food name of an food item in a given language.\r\n * @param foodItem The food item object.\r\n * @param foodNames The list of food items.\r\n * @param language The given language.\r\n */\r\nexport function getFoodItemName(foodItem: FoodItem, foodNames: Array<NameType>, language: string, verbose = false): string | null {\r\n    const nameId = foodItem.nameId!!\r\n    if(nameId > foodNames.length) {\r\n        return null\r\n    }\r\n    const nameType = foodNames[nameId-1]\r\n    return getName(nameType, language, verbose)\r\n}\r\n\r\n\r\n/**\r\n * Returns all food items that belong to a food class.\r\n * @param foodItems The list of all food items.\r\n * @param foodClassId The ID of the selected food class.\r\n */\r\nexport function getFoodItemsOfFoodclass(foodItems: Array<FoodItem>, foodClassId: number): Array<FoodItem> {\r\n    return foodItems.filter(foodItem => {\r\n        if(foodItem.foodClass === foodClassId) {\r\n            return foodItem\r\n        } else {\r\n            return null\r\n        }\r\n    })\r\n}","import {ReactSelectFoodClassOption} from \"../../types/ReactSelectOption\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport getName from \"../LanguageService\";\r\nimport NameType from \"../../types/nutrientdata/NameType\";\r\nimport {getFoodItemName, getFoodItemsOfFoodclass} from \"./FoodItemsService\";\r\nimport FoodDataCorpus from \"../../types/nutrientdata/FoodDataCorpus\";\r\n\r\nexport const foodClassLabelSeparator = \"||\"\r\n\r\nexport function getFoodClassSelectList(foodDataCorpus: FoodDataCorpus, category: number,\r\n                                       foodNames: Array<NameType>, language: string): ReactSelectFoodClassOption[] {\r\n    const {foodClasses, foodItems} = foodDataCorpus\r\n    const filteredFoodClasses = getFoodClassesOfCategory(foodClasses, category)\r\n\r\n    if (!filteredFoodClasses || filteredFoodClasses.length === 0) {\r\n        return []\r\n    }\r\n\r\n    const reactSelectOptions: Array<ReactSelectFoodClassOption> = []\r\n    filteredFoodClasses.forEach(foodClass => {\r\n        const nameId = foodClass.nameKey\r\n        if (nameId > foodNames.length) {\r\n            return\r\n        }\r\n        const nameType = foodNames[nameId - 1]\r\n        const foodName = getName(nameType, language)\r\n\r\n        /*\r\n         * In order to find food items in the select menu, which do not match the food class name, the food class\r\n         * label will be extended by the food item names of their class. A special formatting function is used in\r\n         * the list to convert the name back to the original food class name.\r\n         *\r\n         * Syntax: <food class name> || <name of food items (deduplicated)>\r\n         */\r\n\r\n        const foodItemsOfFoodclass = getFoodItemsOfFoodclass(foodItems, foodClass.id)\r\n        const foodItemNames: string[] = foodItemsOfFoodclass.map(foodItem => getFoodItemName(foodItem, foodNames, language)).filter(name => name !== null) as string[]\r\n        const label = foodName + foodClassLabelSeparator + foodItemNames.filter((element, index) => {\r\n            return foodItemNames.indexOf(element) === index;\r\n        }).join()   // Remove duplicates and then add all remaining food item names to the food class label\r\n\r\n        reactSelectOptions.push({\r\n            value: foodClass,\r\n            label: label\r\n        })\r\n    })\r\n\r\n    reactSelectOptions.sort((obj1, obj2) => obj1.label.localeCompare(obj2.label))\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nfunction getFoodClassesOfCategory(foodClasses: Array<FoodClass>, category: number): Array<FoodClass> {\r\n    return foodClasses.filter(foodClass => {\r\n        if (category === 0) {\r\n            return foodClass\r\n        } else if (foodClass.category === category) {\r\n            return foodClass\r\n        } else {\r\n            return null\r\n        }\r\n    })\r\n}","import NameType from \"../../types/nutrientdata/NameType\";\r\nimport {ReactSelectPortionOption} from \"../../types/ReactSelectOption\";\r\nimport FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport getName from \"../LanguageService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {PORTION_KEY_100, PORTION_KEY_INDIVIDUAL} from \"../../config/Constants\";\r\n\r\n\r\nexport function getPortionReactSelectList(portionData: Array<PortionData>, portionTypes: Array<NameType>, language: string): Array<ReactSelectPortionOption> {\r\n    const reactSelectOptions: Array<ReactSelectPortionOption> = []\r\n    portionData.forEach(portionElement => {\r\n        const portionTypeIndex = portionTypes.findIndex(portionType => {\r\n             return portionType.id === portionElement.portionType\r\n        })\r\n\r\n        const portionType = portionTypes[portionTypeIndex]\r\n        const portionName = getName(portionType, language)\r\n        reactSelectOptions.push({\r\n            value: portionElement,\r\n            label: portionName\r\n        })\r\n    })\r\n\r\n    reactSelectOptions.push({\r\n        value: {amount: 100, portionType: PORTION_KEY_100},\r\n        label: applicationStrings.portion_100g[language]\r\n    })\r\n\r\n    reactSelectOptions.push({\r\n        value: {amount: 0, portionType: PORTION_KEY_INDIVIDUAL},\r\n        label: applicationStrings.portion_individual[language]\r\n    })\r\n\r\n    return reactSelectOptions\r\n}\r\n\r\n\r\nexport function getDefaultPortionData(foodItem: FoodItem, portionDataList: Array<ReactSelectPortionOption>): ReactSelectPortionOption {\r\n    let defaultPortionIndex = portionDataList.findIndex(portionData => {\r\n        return portionData.value.portionType === foodItem.defaultPortionId\r\n    })\r\n\r\n    if (defaultPortionIndex < 0 || defaultPortionIndex >= portionDataList.length) {\r\n        defaultPortionIndex = 0;\r\n    }\r\n\r\n    return portionDataList[defaultPortionIndex]\r\n}","import FoodItem, {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\n\r\nexport function getSourceName(sourceId: number) {\r\n    switch (sourceId) {\r\n        case 0:\r\n            return \"SR Legacy\"\r\n        case 1:\r\n            return \"FNDDS\"\r\n        default:\r\n            return \"unknown\"\r\n    }\r\n}\r\n\r\nexport function getNutrientData(selectedFoodItem: SelectedFoodItem): NutrientData {\r\n    return getNutrientDataForFoodItem(selectedFoodItem.foodItem, selectedFoodItem.selectedSource,\r\n        selectedFoodItem.supplementData, selectedFoodItem.combineData)\r\n}\r\n\r\nexport function getNutrientDataForFoodItem(foodItem: FoodItem, sourceToUse?: number, supplementData?: boolean,\r\n                                           combineData?: boolean): NutrientData {\r\n    if (sourceToUse === null || sourceToUse === undefined || foodItem.nutrientDataList.length === 1) {\r\n        return foodItem.nutrientDataList[0]\r\n    } else {\r\n        const nutrientData = foodItem.nutrientDataList.find(nutrientDataObject => nutrientDataObject.source.id === sourceToUse)\r\n        if (nutrientData) {\r\n            if(supplementData || combineData) {\r\n                const complement = foodItem.nutrientDataList.find(nutrientDataObject => nutrientDataObject.source.id !== sourceToUse)\r\n                if(complement) {\r\n                    if(supplementData && !combineData) {\r\n                        return supplementNutrientData(nutrientData, complement)\r\n                    }\r\n                    if(combineData) {\r\n                        return combineNutrientData(nutrientData, complement)\r\n                    }\r\n                }\r\n            }\r\n            return nutrientData\r\n        } else {\r\n            return foodItem.nutrientDataList[0]\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function supplementNutrientData(selectedNutrientData: NutrientData, complementeNutrientData: NutrientData): NutrientData {\r\n    const supplementedBaseData = supplementCategory(selectedNutrientData.baseData, complementeNutrientData.baseData)\r\n    const supplementedVitaminData = supplementCategory(selectedNutrientData.vitaminData, complementeNutrientData.vitaminData)\r\n    const supplementedMineralData = supplementCategory(selectedNutrientData.mineralData, complementeNutrientData.mineralData)\r\n    const supplementedCarbsData = supplementCategory(selectedNutrientData.carbohydrateData, complementeNutrientData.carbohydrateData)\r\n    const supplementedProteinData = supplementCategory(selectedNutrientData.proteinData, complementeNutrientData.proteinData)\r\n\r\n    const supplementedOmegaData = supplementCategory(selectedNutrientData.lipidData.omegaData, complementeNutrientData.lipidData.omegaData)\r\n    let supplementedLipidData = supplementCategory(selectedNutrientData.lipidData, complementeNutrientData.lipidData)\r\n    supplementedLipidData.omegaData = supplementedOmegaData\r\n\r\n    return {\r\n        source: selectedNutrientData.source,\r\n        sourceItemId: selectedNutrientData.sourceItemId,\r\n        baseData: supplementedBaseData,\r\n        vitaminData: supplementedVitaminData,\r\n        mineralData: supplementedMineralData,\r\n        carbohydrateData: supplementedCarbsData,\r\n        proteinData: supplementedProteinData,\r\n        lipidData: supplementedLipidData\r\n    }\r\n}\r\n\r\n\r\nfunction supplementCategory(nutrientCategory1: any, nutrientCategory2: any): any {\r\n    if(!nutrientCategory2) {\r\n        return nutrientCategory1\r\n    }\r\n\r\n    const keysComplement = Object.keys(nutrientCategory2)\r\n    keysComplement.forEach(key => {\r\n        if(nutrientCategory1[key] === null) {\r\n            const objectHasChildren = nutrientCategory2[key] && Object.keys(nutrientCategory2[key]).length > 0\r\n            // Add value from source 2 to source 1 if it is not a sub-object (like Omega object on Lipids object):\r\n            if(nutrientCategory2[key] !== null && !objectHasChildren) {\r\n                nutrientCategory1[key] = nutrientCategory2[key]\r\n            }\r\n        }\r\n    })\r\n\r\n    return nutrientCategory1\r\n}\r\n\r\n\r\nexport function combineNutrientData(selectedNutrientData: NutrientData, complementeNutrientData: NutrientData): NutrientData {\r\n    const combinedBaseData = combineCategory(selectedNutrientData.baseData, complementeNutrientData.baseData)\r\n    const combinedVitaminData = combineCategory(selectedNutrientData.vitaminData, complementeNutrientData.vitaminData)\r\n    const combinedMineralData = combineCategory(selectedNutrientData.mineralData, complementeNutrientData.mineralData)\r\n    const combinedCarbsData = combineCategory(selectedNutrientData.carbohydrateData, complementeNutrientData.carbohydrateData)\r\n    const combinedProteinData = combineCategory(selectedNutrientData.proteinData, complementeNutrientData.proteinData)\r\n\r\n    const combinedOmegaData = combineCategory(selectedNutrientData.lipidData.omegaData, complementeNutrientData.lipidData.omegaData)\r\n    let combinedLipidData = combineCategory(selectedNutrientData.lipidData, complementeNutrientData.lipidData)\r\n    combinedLipidData.omegaData = combinedOmegaData\r\n\r\n    return {\r\n        source: selectedNutrientData.source,\r\n        sourceItemId: selectedNutrientData.sourceItemId,\r\n        baseData: combinedBaseData,\r\n        vitaminData: combinedVitaminData,\r\n        mineralData: combinedMineralData,\r\n        carbohydrateData: combinedCarbsData,\r\n        proteinData: combinedProteinData,\r\n        lipidData: combinedLipidData\r\n    }\r\n}\r\n\r\n\r\nfunction combineCategory(nutrientCategory1: any, nutrientCategory2: any): any {\r\n    if(!nutrientCategory1 && nutrientCategory2) {\r\n        return nutrientCategory2\r\n    } else if(nutrientCategory1 && !nutrientCategory2) {\r\n        return nutrientCategory1\r\n    } else if(!nutrientCategory1 && !nutrientCategory2) {\r\n        return null\r\n    }\r\n\r\n    const keys1: Array<string> = Object.keys(nutrientCategory1)\r\n    const keys2: Array<string> = Object.keys(nutrientCategory2)\r\n\r\n    // @ts-ignore\r\n    const allKeys = [...new Set<string>([...keys1, ...keys2])]\r\n    let finalObject = {}\r\n\r\n    allKeys.forEach(key => {\r\n        const value1 = nutrientCategory1[key] !== null\r\n            ? nutrientCategory1[key]\r\n            : null\r\n\r\n        const value2 = nutrientCategory2[key] !== null\r\n            ? nutrientCategory2[key]\r\n            : null\r\n\r\n        let finalValue\r\n\r\n        if(value1 !== null && value2 === null) {\r\n            finalValue = value1\r\n        } else if(value1 === null && value2 !== null) {\r\n            finalValue = value2\r\n        } else if(value1 === null && value2 === null) {\r\n            finalValue = null\r\n        }else {\r\n            finalValue = (value1 + value2) * 0.5\r\n        }\r\n\r\n        finalObject[key] = finalValue\r\n    })\r\n\r\n    return finalObject\r\n}\r\n","const fontsize = \"calc(0.5rem + 0.3vw)\"\r\nconst selectHeight = \"calc(0.5rem + 0.3vw)*2.2\"\r\n\r\nexport const customSelectStyles = {\r\n    control: base => ({\r\n        ...base,\r\n        height: selectHeight,\r\n        minHeight: selectHeight,\r\n        fontSize: fontsize,\r\n    }),\r\n    valueContainer: (provided, state) => ({\r\n        ...provided,\r\n        height: selectHeight,\r\n        minHeight: selectHeight,\r\n        padding: '0 2px',\r\n        fontsize: fontsize\r\n    }),\r\n    dropdownIndicator: (styles) => ({\r\n        ...styles,\r\n        paddingTop: \"2px\",\r\n        paddingBottom: \"2px\",\r\n    }),\r\n    clearIndicator: (styles) => ({\r\n        ...styles,\r\n        height: selectHeight,\r\n        minHeight: selectHeight,\r\n        paddingTop: \"2px\",\r\n        paddingBottom: \"2px\",\r\n    }),\r\n};\r\n\r\n\r\nexport function getCustomSelectStyle(backgroundColor: string): any {\r\n    return {\r\n        ...customSelectStyles,\r\n        control: base => ({\r\n            ...base,\r\n            height: selectHeight,\r\n            minHeight: selectHeight,\r\n            fontSize: fontsize,\r\n            backgroundColor: backgroundColor\r\n        }),\r\n    }\r\n}\r\n\r\n\r\nexport const correspondingSelectElementStyle = {\r\n    height: selectHeight,\r\n    fontSize: fontsize\r\n}\r\n\r\nexport const COLOR_SELECTOR_CATEGORY = \" #fdebd0\"\r\nexport const COLOR_SELECTOR_FOODCLASS = \" #85c1e9\"\r\nexport const COLOR_SELECTOR_FOODITEM = \"#ebf5fb\"","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport Select from 'react-select';\r\nimport ReactSelectOption, {\r\n    ReactSelectFoodClassOption,\r\n    ReactSelectFoodItemOption,\r\n    ReactSelectPortionOption\r\n} from \"../../types/ReactSelectOption\";\r\nimport {getCategorySelectList} from \"../../service/nutrientdata/CategoryService\";\r\nimport {foodClassLabelSeparator, getFoodClassSelectList} from \"../../service/nutrientdata/FoodClassService\";\r\nimport {getFoodItemsSelectList} from \"../../service/nutrientdata/FoodItemsService\";\r\nimport FoodItem, {PortionData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {getDefaultPortionData, getPortionReactSelectList} from \"../../service/nutrientdata/PortionDataService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodClass from \"../../types/nutrientdata/FoodClass\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {isMobileDevice, isSmallScreen, useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {SOURCE_FNDDS, SOURCE_SRLEGACY} from \"../../config/Constants\";\r\nimport {getSourceName} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {\r\n    COLOR_SELECTOR_CATEGORY,\r\n    COLOR_SELECTOR_FOODCLASS, COLOR_SELECTOR_FOODITEM,\r\n    correspondingSelectElementStyle,\r\n    customSelectStyles,\r\n    getCustomSelectStyle\r\n} from \"../../config/UI_Config\";\r\n\r\nexport interface FoodSelectorProps {\r\n    updateSelectedFoodItem: (selectedFoodItem: SelectedFoodItem) => void\r\n    updateFoodSelectorConfig: (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => void\r\n    updateCompositeTitle?: (compositeTitle: string) => void\r\n    compositeSelector: boolean\r\n    directCompareSelector?: boolean\r\n    initialFoodClassToSet?: number\r\n    selectedFoodItem?: SelectedFoodItem | null\r\n    defaultFoodClass?: number\r\n    directCompareSelectorNumber?: number\r\n}\r\n\r\n/**\r\n * Component to select a food element. The component can optionally show the category list and can be initialized\r\n * with an already existing selected food item (in case of component re-rendering).\r\n */\r\nexport default function FoodSelector(props: FoodSelectorProps): JSX.Element {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const initialCategory = applicationContext?.applicationData.foodSelector.selectedCategory\r\n        ? applicationContext.applicationData.foodSelector.selectedCategory\r\n        : null\r\n\r\n    const foodSelectorConfig = applicationContext?.applicationData.foodSelector\r\n    const directCompareSelectorConfig1 = applicationContext?.applicationData.directCompareDataPanel.foodSelector1\r\n    const directCompareSelectorConfig2 = applicationContext?.applicationData.directCompareDataPanel.foodSelector2\r\n\r\n    const initialSupplementValue = props.directCompareSelectorNumber === undefined\r\n        ? foodSelectorConfig?.sourceSupplement || false\r\n        : props.directCompareSelectorNumber === 1\r\n            ? directCompareSelectorConfig1?.sourceSupplement || false\r\n            : directCompareSelectorConfig2?.sourceSupplement || false\r\n\r\n    const initialCombineValue = props.directCompareSelectorNumber === undefined\r\n        ? foodSelectorConfig?.sourceCombine || false\r\n        : props.directCompareSelectorNumber === 1\r\n            ? directCompareSelectorConfig1?.sourceCombine || false\r\n            : directCompareSelectorConfig2?.sourceCombine || false\r\n\r\n    const [selectedCategory, setSelectedCategory] = useState<ReactSelectOption | null>(initialCategory)\r\n    const [selectdFoodClass, setSelectedFoodClass] = useState<ReactSelectFoodClassOption | null>(null)\r\n    const [selectedFoodItem, setSelectedFoodItem] = useState<ReactSelectFoodItemOption | null>(null)\r\n    const [selectedPortion, setSelectedPortion] = useState<ReactSelectPortionOption | null>(null)\r\n    const [portionAmount, setPortionAmount] = useState<number>(0)\r\n    const [title, setTitle] = useState<string>(applicationStrings.input_compositelist_title[language])\r\n    const [selectedSource, setSelectedSource] = useState<ReactSelectOption | null>(null)\r\n    const [supplementData, setSupplementData] = useState<boolean>(initialSupplementValue)\r\n    const [combineData, setCombineData] = useState<boolean>(initialCombineValue)\r\n    const [initialized, setInitialized] = useState<boolean>(false)\r\n\r\n    const [categoriesList, setCategoriesList] = useState<Array<ReactSelectOption>>([])\r\n    const [foodClassesList, setFoodClassesList] = useState<Array<ReactSelectFoodClassOption>>([])\r\n    const [foodClassesTypeaheadList, setFoodClassesTypeaheadList] = useState<Array<ReactSelectFoodClassOption>>([])\r\n\r\n    const [foodItemsList, setFoodItemsList] = useState<Array<ReactSelectFoodItemOption>>([])\r\n    const [portionsList, setPortionsList] = useState<Array<ReactSelectPortionOption>>([])\r\n    const [sourcesList, setSourcesList] = useState<Array<ReactSelectOption>>([])\r\n\r\n    const windowSize = useWindowDimension()\r\n\r\n    const getInitialFoodClassNumber = (foodClassOptions: ReactSelectFoodClassOption[]): number => {\r\n        if (props.initialFoodClassToSet !== undefined && props.initialFoodClassToSet !== null) {\r\n            return props.initialFoodClassToSet\r\n        }\r\n\r\n        if (props.defaultFoodClass !== undefined) {\r\n            const index = foodClassOptions.findIndex(foodClassOption => foodClassOption.value.id === props.defaultFoodClass)\r\n            if (index !== -1) {\r\n                return index\r\n            }\r\n        }\r\n\r\n        return 0   // Use the first food class in the list if no other parameter indicates the food class to select\r\n    }\r\n\r\n    useEffect(() => {\r\n            if (applicationContext && applicationContext.foodDataCorpus && categoriesList.length === 0) {\r\n                const foodDataCorpus = applicationContext.foodDataCorpus\r\n\r\n                if (foodDataCorpus.categories) {\r\n                    const categoryItems = getCategorySelectList(foodDataCorpus.categories, language)\r\n                    setCategoriesList(categoryItems)\r\n                }\r\n\r\n                if (foodDataCorpus.foodClasses) {\r\n                    const category = selectedCategory ? selectedCategory.value : 0\r\n                    const foodClasses = getFoodClassSelectList(foodDataCorpus, category, applicationContext.foodDataCorpus.foodNames, language)\r\n                    setFoodClassesList(foodClasses)\r\n                    setFoodClassesTypeaheadList(foodClasses)  // Initially, the typeahead-list is identical with the food classes list\r\n\r\n                    const initialFoodClass = getInitialFoodClassNumber(foodClasses)\r\n                    const foodClass = foodClasses[initialFoodClass]\r\n                    setSelectedFoodClass(foodClass)\r\n\r\n                    if (foodDataCorpus.foodItems && foodClasses) {\r\n                        const foodItemsOfFoodClass = getFoodItemsSelectList(foodDataCorpus.foodItems, foodClasses[initialFoodClass].value.id, foodDataCorpus.foodNames,\r\n                            foodDataCorpus.conditions, language)\r\n\r\n                        setFoodItemsList(foodItemsOfFoodClass)\r\n                        setSelectedFoodItem(foodItemsOfFoodClass[0])\r\n                        const foodItem = foodItemsOfFoodClass[0].value\r\n\r\n                        if (foodItem && foodItem.portionData) {\r\n                            const portionDataList = getPortionReactSelectList(foodItem.portionData, foodDataCorpus.portionTypes, language)\r\n                            setPortionsList(portionDataList)\r\n\r\n                            updateSourcesList(foodItem)\r\n\r\n                            const defaultPortion = getDefaultPortionData(foodItem, portionDataList)\r\n                            setSelectedPortion(defaultPortion)\r\n                            setPortionAmount(defaultPortion.value.amount)\r\n\r\n                            if (!props.selectedFoodItem) {\r\n                                makeSelectedFoodItemObject(foodItem, foodClass.value, defaultPortion.value)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                // Update data for outer component whenever render is triggered\r\n                if (selectedFoodItem && selectdFoodClass && selectedPortion) {\r\n                    const newFoodItem = makeSelectedFoodItemObject(selectedFoodItem.value, selectdFoodClass.value, selectedPortion.value)\r\n                    if (newFoodItem) {\r\n                        props.updateSelectedFoodItem(newFoodItem)\r\n                        props.updateFoodSelectorConfig(selectedCategory, supplementData, combineData)\r\n                    }\r\n                } else if (props.selectedFoodItem) {\r\n                    const {foodItem, foodClass, portion} = props.selectedFoodItem\r\n                    makeSelectedFoodItemObject(foodItem, foodClass, portion)\r\n                }\r\n            }\r\n\r\n        }, [selectedFoodItem,\r\n            selectedPortion,\r\n            selectdFoodClass,\r\n            selectedCategory,\r\n            selectedSource,\r\n            portionAmount,\r\n            title,\r\n            supplementData,\r\n            combineData\r\n        ]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleCategoryChange = (category: ReactSelectOption) => {\r\n        setSelectedCategory(category)\r\n        updateFoodClasses(category)\r\n    }\r\n\r\n    const handleFoodClassChange = (foodClass: ReactSelectFoodClassOption) => {\r\n        setSelectedFoodClass(foodClass)\r\n        updateFoodItem(foodClass)\r\n    }\r\n\r\n    const handleFoodItemChange = (foodItem: ReactSelectFoodItemOption) => {\r\n        setSelectedFoodItem(foodItem)\r\n        updatePortionsList(foodItem.value)\r\n        updateSourcesList(foodItem.value)\r\n    }\r\n\r\n    const handlePortionChange = (portion: ReactSelectPortionOption) => {\r\n        setSelectedPortion(portion)\r\n        setPortionAmount(portion.value.amount)\r\n    }\r\n\r\n    const handleTitleChange = (event) => {\r\n        setTitle((event.target.value))\r\n        if(props.updateCompositeTitle !== undefined) {\r\n            props.updateCompositeTitle(event.target.value)\r\n        }\r\n    }\r\n\r\n    const handleSourceChange = (source: ReactSelectOption) => {\r\n        setSelectedSource(source)\r\n    }\r\n\r\n    const handlePortionAmountChange = (e) => {\r\n        if (!e.target.value) {\r\n            setPortionAmount(0)\r\n            return\r\n        }\r\n\r\n        const amount = parseInt(e.target.value)\r\n\r\n        if (!isNaN(amount)) {\r\n            setPortionAmount(amount)\r\n        }\r\n    }\r\n\r\n    const updateFoodClasses = (category: ReactSelectOption) => {\r\n        const foodDataCorpus = applicationContext.foodDataCorpus\r\n\r\n        if (foodDataCorpus) {\r\n            const foodClassItems = getFoodClassSelectList(foodDataCorpus, category.value, applicationContext.foodDataCorpus.foodNames, language)\r\n            setFoodClassesList(foodClassItems)\r\n            setFoodClassesTypeaheadList(foodClassItems)\r\n            setSelectedFoodClass(foodClassItems[0])\r\n            updateFoodItem(foodClassItems[0])\r\n        }\r\n    }\r\n\r\n    const updateFoodItem = (foodClass: ReactSelectFoodClassOption) => {\r\n        const {foodItems, foodNames, conditions} = applicationContext.foodDataCorpus\r\n\r\n        if (foodItems) {\r\n            const foodClassItems = getFoodItemsSelectList(foodItems, foodClass.value.id, foodNames, conditions, language)\r\n            setFoodItemsList(foodClassItems)\r\n            setSelectedFoodItem(foodClassItems[0])\r\n\r\n            const foodItem = foodClassItems[0].value\r\n            if (foodItem) {\r\n                updatePortionsList(foodItem)\r\n                updateSourcesList(foodItem)\r\n            }\r\n        }\r\n    }\r\n\r\n    const updatePortionsList = (foodItem: FoodItem) => {\r\n        const portionDataList = getPortionReactSelectList(foodItem.portionData!!, applicationContext.foodDataCorpus.portionTypes, language)\r\n        setPortionsList(portionDataList)\r\n        const defaultPortion = getDefaultPortionData(foodItem, portionDataList)\r\n        setSelectedPortion(defaultPortion)\r\n        setPortionAmount(defaultPortion.value.amount)\r\n    }\r\n\r\n\r\n    const updateSourcesList = (foodItem: FoodItem) => {\r\n        const sourceNames = getSourceNames(foodItem)\r\n        setSourcesList(sourceNames)\r\n\r\n        if (sourceNames.length === 1) {\r\n            setSelectedSource(sourceNames[0])\r\n        } else {\r\n            const preferredSource = applicationContext.applicationData.preferredSource\r\n            const matchingSource = sourceNames.find(sourceObject => {\r\n                if (sourceObject.value === 0 && preferredSource === SOURCE_SRLEGACY) {\r\n                    return sourceObject\r\n                } else if (sourceObject.value === 1 && preferredSource === SOURCE_FNDDS) {\r\n                    return sourceObject\r\n                } else {\r\n                    return null\r\n                }\r\n            })\r\n            if (matchingSource) {\r\n                setSelectedSource(matchingSource)\r\n            } else {\r\n                setSelectedSource(sourceNames[0])\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const getSourceNames = (foodItem: FoodItem) => {\r\n        return foodItem.nutrientDataList.map(nutrientDataObject => {\r\n            const SourceName = getSourceName(nutrientDataObject.source.id)\r\n            return {label: SourceName, value: nutrientDataObject.source.id}\r\n        })\r\n    }\r\n\r\n\r\n    const makeSelectedFoodItemObject = (foodItem: FoodItem | undefined, foodClass: FoodClass | undefined, portion: PortionData | undefined): SelectedFoodItem | null => {\r\n        if (!foodItem || !foodClass || !portion) {\r\n            return null\r\n        }\r\n\r\n        if (portion.portionType === 0) {\r\n            portion.amount = portionAmount\r\n        }\r\n\r\n        return {\r\n            foodItem: foodItem,\r\n            foodClass: foodClass,\r\n            portion: {...portion},\r\n            selectedSource: selectedSource ? selectedSource.value : foodItem.nutrientDataList[0].source.id,\r\n            supplementData: supplementData,\r\n            combineData: combineData\r\n        }\r\n    }\r\n\r\n    const setInitialFoodElement = () => {\r\n        if (!foodClassesList || foodClassesList.length === 0) {\r\n            return\r\n        }\r\n\r\n        if (!props.selectedFoodItem || !props.selectedFoodItem.foodClass) {\r\n            return\r\n        }\r\n\r\n        const predefinedFoodObject = props.selectedFoodItem\r\n\r\n        // @ts-ignore\r\n        const foodClassOption = foodClassesList.find(foodClass => foodClass.value.id === predefinedFoodObject.foodClass.id)\r\n        const {foodItems, foodNames, conditions, portionTypes} = applicationContext.foodDataCorpus\r\n\r\n        if (foodClassOption) {\r\n            setSelectedFoodClass(foodClassOption)\r\n            const foodClassItems = getFoodItemsSelectList(foodItems, foodClassOption.value.id, foodNames, conditions, language)\r\n\r\n            if (foodClassItems) {\r\n                setFoodItemsList(foodClassItems)\r\n                const foodItem = foodClassItems.find(foodItem => foodItem.value.id === predefinedFoodObject.foodItem.id)\r\n\r\n                if (foodItem && foodItem.value && foodItem.value.portionData) {\r\n                    setSelectedFoodItem(foodItem)\r\n\r\n                    const sourceNames = getSourceNames(foodItem.value)\r\n                    setSourcesList(sourceNames)\r\n                    const selected = sourceNames.find(sourceElement => sourceElement.value === props.selectedFoodItem?.selectedSource)\r\n                    if (selected) {\r\n                        setSelectedSource(selected)\r\n                    }\r\n\r\n                    const portionDataList = getPortionReactSelectList(foodItem.value.portionData, portionTypes, language)\r\n                    setPortionsList(portionDataList)\r\n\r\n                    const portionType = predefinedFoodObject.portion.portionType\r\n                    const portionObject = portionDataList.find(portion => portion.value.portionType === portionType)\r\n                    if (portionObject) {\r\n                        setSelectedPortion(portionObject)\r\n\r\n                        //@ts-ignore\r\n                        const amount = predefinedFoodObject.portion.amount\r\n                        setPortionAmount(amount)\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        setInitialized(true)\r\n    }\r\n\r\n    const onCheckSupplementCheckbox = () => {\r\n        setSupplementData(!supplementData)\r\n    }\r\n\r\n    const onCheckCombineCheckbox = () => {\r\n        setCombineData(!combineData)\r\n    }\r\n\r\n    /**\r\n     * Manually creates a sorted typeahead list which will favor food classes starting with the search term\r\n     * against food classes not starting (but including) the search term. Also, the food class is favored\r\n     * against the food items of it, which may also include the search term (like \"Cheese\" is shown if \"Gouda\"\r\n     * is entered).\r\n     * @param value The value entered in the select input field\r\n     * @param action The event action\r\n     */\r\n    const handleFoodClassInputChange = (value, { action }) => {\r\n        if (action === 'input-change') {\r\n            if(value.trim().length === 0) {\r\n                setFoodClassesTypeaheadList(foodClassesList)\r\n                return\r\n            }\r\n\r\n            let resultList: ReactSelectFoodClassOption[] = []\r\n            let dictionary: string[] = []\r\n\r\n            value = value.toLowerCase().trim()\r\n\r\n            // Find add all food class elements to the typeahead list that start with the search term\r\n            foodClassesList.forEach(entry => {\r\n                let label = entry.label.toLowerCase()\r\n                if(label.includes(foodClassLabelSeparator)) {\r\n                    label = label.substring(0, label.indexOf(foodClassLabelSeparator)).trim()\r\n                }\r\n                if(label.startsWith(value)) {\r\n                    resultList.push(entry)\r\n                    dictionary.push(entry.label)\r\n                }\r\n            })\r\n\r\n            // Now add all food class elements to the typeahead list that match the search term (yet do not start with it)\r\n            foodClassesList.forEach(entry => {\r\n                let label = entry.label.toLowerCase()\r\n                if(label.includes(foodClassLabelSeparator)) {\r\n                    label = label.substring(0, label.indexOf(foodClassLabelSeparator)).trim()\r\n                }\r\n                if(label.includes(value) && !label.startsWith(value)) {\r\n                    resultList.push(entry)\r\n                    dictionary.push(entry.label)\r\n                }\r\n            })\r\n\r\n            // Finally add all labels (class or items) that contain the search term\r\n            foodClassesList.forEach(entry => {\r\n                const label = entry.label.toLowerCase()\r\n                if(label.includes(value) && !dictionary.includes(entry.label)) {\r\n                    resultList.push(entry)\r\n                }\r\n            })\r\n\r\n            setFoodClassesTypeaheadList(resultList)\r\n        }\r\n    }\r\n\r\n    if (props.selectedFoodItem && !initialized) {\r\n        setInitialFoodElement()\r\n    }\r\n\r\n    const renderSourceLine = () => {\r\n        const sourceSelectBox = (\r\n            <Select className={selectClass}\r\n                    options={sourcesList}\r\n                    isDisabled={sourcesList.length <= 1 || combineData}\r\n                    value={selectedSource ? selectedSource : sourcesList[0]}\r\n                    onChange={handleSourceChange}\r\n                    styles={customSelectStyles}\r\n            />\r\n        )\r\n\r\n        const x = props.directCompareSelector ? \"a\" : \"b\"\r\n\r\n        const checkboxes = (\r\n            <div>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_source_supplement_tooltip[language]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_source_supplement[language]}\r\n                                checked={supplementData}\r\n                                disabled={sourcesList.length <= 1}\r\n                                onClick={onCheckSupplementCheckbox}>\r\n                    </Form.Check>\r\n                </label>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_source_combine_tooltip[language]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check className=\"form-radiobutton\"\r\n                                style={{minHeight: \"1rem\"}}\r\n                                label={applicationStrings.label_source_combine[language]}\r\n                                checked={combineData}\r\n                                disabled={sourcesList.length <= 1}\r\n                                onClick={onCheckCombineCheckbox}>\r\n                    </Form.Check>\r\n                </label>\r\n            </div>\r\n        )\r\n\r\n        if(props.directCompareSelector && !isMobileDevice()) {  // Direct Compare Selector uses column layout for Checkboxes/Source box\r\n            return <div>\r\n                <span className={'form-label'}>{applicationStrings.label_source[language]}:</span>\r\n                <div className={\"d-flex row\"}>\r\n                    <div className=\"col-4 column select-menu form-section\">\r\n                        {sourceSelectBox}\r\n                    </div>\r\n                    <div className={\"col-8\"}>\r\n                        {checkboxes}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        } else {\r\n            return <div>\r\n                <span className={'form-label'}>{applicationStrings.label_source[language]}:</span>\r\n                <div className=\"select-menu form-section\">\r\n                    {sourceSelectBox}\r\n                </div>\r\n                <div>\r\n                    {checkboxes}\r\n                </div>\r\n            </div>\r\n        }\r\n    }\r\n\r\n\r\n    const amount_label = props.compositeSelector\r\n        ? `${applicationStrings.label_amount_short[language]}:`\r\n        : `${applicationStrings.label_amount[language]}:`\r\n    const initialFoodClass = getInitialFoodClassNumber(foodClassesList)\r\n\r\n    const selectClass = isSmallScreen(windowSize) ? \"form-control-sm\" : \"\"\r\n    const inputClass = isSmallScreen(windowSize) ? \"form-control form-control-sm\" : \"form-control\"\r\n\r\n    const formClass = props.compositeSelector ? \"form-section-small\" : \"form-section\"\r\n\r\n    // Remove hidden food class information in the label, which is only used to facilitate user search (e.g. find 'Cheese' for term 'Gouda')\r\n    const foodclassFormatter = (option) => {\r\n        const label = option.label\r\n\r\n        if(label.includes(\"||\")) {\r\n            const pos = label.indexOf(\"||\")\r\n            return label.substring(0, pos)\r\n        }\r\n        return label\r\n    }\r\n\r\n    const stylesCategory = !props.directCompareSelector ? getCustomSelectStyle(COLOR_SELECTOR_CATEGORY) : customSelectStyles\r\n    const stylesFoodClass = !props.directCompareSelector ? getCustomSelectStyle(COLOR_SELECTOR_FOODCLASS) : customSelectStyles\r\n    const stylesFoodItem = !props.directCompareSelector ? getCustomSelectStyle(COLOR_SELECTOR_FOODITEM) : customSelectStyles\r\n\r\n    return <div>\r\n        <div className=\"container\">\r\n            {props.compositeSelector === true &&\r\n            <div>\r\n                <span className={'form-label'}>{applicationStrings.label_title[language]}:</span>\r\n                <input className={inputClass}\r\n                       value={title}\r\n                       style={correspondingSelectElementStyle}\r\n                       onChange={handleTitleChange}\r\n                />\r\n            </div>\r\n            }\r\n            {props.directCompareSelector !== true &&\r\n            <div className={formClass}>\r\n                <span className={'form-label'}>{applicationStrings.label_category[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={categoriesList}\r\n                        value={selectedCategory ? selectedCategory : categoriesList[0]}\r\n                        onChange={(value) => handleCategoryChange(value)}\r\n                        styles={stylesCategory}\r\n                />\r\n            </div>\r\n            }\r\n            <div className={formClass}>\r\n                <span className={'form-label'}>{applicationStrings.label_foodclass[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={foodClassesTypeaheadList}\r\n                        onInputChange={handleFoodClassInputChange}\r\n                        formatOptionLabel={foodclassFormatter}\r\n                        value={selectdFoodClass ? selectdFoodClass : foodClassesList[initialFoodClass]}\r\n                        onChange={(value) => handleFoodClassChange(value)}\r\n                        styles={stylesFoodClass}\r\n                />\r\n            </div>\r\n            <div className={formClass}>\r\n                <span className={'form-label'}>{applicationStrings.label_fooditem[language]}:</span>\r\n                <Select className={selectClass}\r\n                        options={foodItemsList}\r\n                        value={selectedFoodItem ? selectedFoodItem : foodItemsList[0]}\r\n                        onChange={handleFoodItemChange}\r\n                        styles={stylesFoodItem}\r\n                />\r\n            </div>\r\n            <div className={formClass}>\r\n                <div className={\"row\"}>\r\n                    <div className={\"col-8\"}>\r\n                        <span\r\n                            className={'form-label'}>{applicationStrings.label_portion[language]}:</span>\r\n                        <Select className={selectClass}\r\n                                options={portionsList}\r\n                                styles={customSelectStyles}\r\n                                value={selectedPortion ? selectedPortion : portionsList[0]}\r\n                                onChange={(value) => handlePortionChange(value)}/>\r\n                    </div>\r\n                    <div className={\"col-4\"}>\r\n                        <span\r\n                            className={'form-label'}>{amount_label}</span>\r\n                        <input className={inputClass}\r\n                               disabled={selectedPortion?.value.portionType !== 0}\r\n                               value={portionAmount}\r\n                               style={correspondingSelectElementStyle}\r\n                               onChange={handlePortionAmountChange}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {renderSourceLine()}\r\n        </div>\r\n    </div>\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {FaTrash} from \"react-icons/fa\";\r\n\r\nexport interface CompositeFoodListProps {\r\n    selectedFoodItems: Array<SelectedFoodItem>\r\n    deleteItem: (index: number) => void\r\n}\r\n\r\nexport function CompositeFoodList(props: CompositeFoodListProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const onDeleteItem = (index: number) => {\r\n        props.deleteItem(index)\r\n    }\r\n\r\n    const renderLine = (selectedFoodItem: SelectedFoodItem, index: number) => {\r\n        if(applicationContext) {\r\n            const name = getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, selectedFoodItem.foodItem.nameId!!, languageContext.language)\r\n\r\n            return <div className={\"row\"}\r\n                        key={`composite food list ${index}`}\r\n                        style={{borderBottom: \"1px solid #dddddd\", paddingTop: \"6px\"}}>\r\n                <div className={\"col-1\"}>\r\n                    <b>{index+1}.</b>\r\n                </div>\r\n                <div className={\"col-8\"}>\r\n                    {name}\r\n                    <br/>\r\n                    {selectedFoodItem.portion.amount} g\r\n                </div>\r\n                <div className={\"col-3\"}>\r\n                    <Button onClick={() => onDeleteItem(index)}>\r\n                        <FaTrash/>\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        return <div></div>\r\n    }\r\n\r\n    return <div className={\"container\"} style={{maxHeight: \"300px\", overflowY: \"auto\"}}>\r\n        {props.selectedFoodItems.map((selectedFoodItem, index) => renderLine(selectedFoodItem, index))}\r\n    </div>\r\n\r\n}","import SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodItem, {\r\n    BaseData,\r\n    CarbohydrateData, CarotenoidData,\r\n    LipidData,\r\n    MineralData,\r\n    NutrientData,\r\n    ProteinData,\r\n    VitaminData\r\n} from \"../../types/nutrientdata/FoodItem\";\r\nimport {getNutrientData} from \"../nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function combineFoodItems(compositeList: Array<SelectedFoodItem>, preferredSource): SelectedFoodItem {\r\n    let portionSize = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        portionSize += selectedFoodItem.portion.amount\r\n    })\r\n\r\n    const nutrientDataList = buildAggregatedNutrientDataList(compositeList, portionSize, preferredSource);\r\n    const id = new Date().getTime();\r\n\r\n    const aggreatedFoodItem: FoodItem = {\r\n        id: id,\r\n        nutrientDataList: nutrientDataList,\r\n        aggregated: true\r\n    }\r\n\r\n    let combinedFoodItem: SelectedFoodItem = {\r\n        id: id,\r\n        foodItem: aggreatedFoodItem,\r\n        portion: {\r\n            portionType: 999,\r\n            amount: portionSize\r\n        },\r\n        compositeSubElements: compositeList,\r\n        selectedSource: -1,\r\n        supplementData: true,\r\n        combineData: false\r\n    };\r\n\r\n    return combinedFoodItem;\r\n}\r\n\r\n\r\nfunction buildAggregatedNutrientDataList(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): Array<NutrientData> {\r\n    const baseData = buildBaseDataObject(compositeList, portionSize, preferredSource);\r\n    const vitaminData = buildVitaminDataObject(compositeList, portionSize, preferredSource);\r\n    const mineralData = buildMineralDataObject(compositeList, portionSize, preferredSource);\r\n    const carbohydrateData = buildCarbohydrateData(compositeList, portionSize, preferredSource);\r\n    const lipidData = buildLipidData(compositeList, portionSize, preferredSource);\r\n    const proteinData = buildProteinData(compositeList, portionSize, preferredSource);\r\n\r\n    let nutrientObject: NutrientData = {\r\n        sourceItemId: \"0\",\r\n        source: {id: 0, url: \"\", name: \"\"},\r\n        baseData: baseData,\r\n        vitaminData: vitaminData,\r\n        mineralData: mineralData,\r\n        carbohydrateData: carbohydrateData,\r\n        lipidData: lipidData,\r\n        proteinData: proteinData\r\n    }\r\n\r\n    nutrientObject = removeNutrientObjectsWithNullValues(nutrientObject, compositeList, preferredSource);\r\n\r\n    const nutrientDataList: Array<NutrientData> = [];\r\n    nutrientDataList.push(nutrientObject);\r\n\r\n    return nutrientDataList;\r\n}\r\n\r\n\r\n/**\r\n * Removes all nutrient data elements that do not exist in ALL of the food elements within the list.\r\n * @param nutrientObject\r\n * @param compositeList\r\n */\r\nfunction removeNutrientObjectsWithNullValues(nutrientObject: NutrientData, compositeList: Array<SelectedFoodItem>, preferredSource: string) {\r\n    if (!compositeList) {\r\n        return nutrientObject;\r\n    }\r\n\r\n    for (let i = 0; i < compositeList.length; i++) {\r\n        let selectedFoodItem = compositeList[i]\r\n        const nutrientData = getNutrientData(selectedFoodItem)\r\n        const threshold = 0.1;   // Defines the amount of base data which must exist to set a sub-value to null.\r\n\r\n        // Remove base data\r\n        if (nutrientData.baseData.carbohydrates >= threshold) {\r\n            if (nutrientData.baseData.dietaryFibers == null) {\r\n                nutrientObject.baseData.dietaryFibers = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Lipid data\r\n        if (nutrientData.baseData.lipids >= threshold) {\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.saturated == null) {\r\n                nutrientObject.lipidData.saturated = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.unsaturatedMono == null) {\r\n                nutrientObject.lipidData.unsaturatedMono = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.unsaturatedPoly == null) {\r\n                nutrientObject.lipidData.unsaturatedPoly = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.transFattyAcids == null) {\r\n                nutrientObject.lipidData.transFattyAcids = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData || nutrientData.lipidData.cholesterol == null) {\r\n                nutrientObject.lipidData.cholesterol = null;\r\n            }\r\n\r\n            if (!nutrientData.lipidData.omegaData &&\r\n                (nutrientData.lipidData && nutrientData.lipidData.unsaturatedPoly && nutrientData.lipidData.unsaturatedPoly > threshold)) {\r\n                nutrientObject.lipidData.omegaData = null;\r\n            }\r\n        }\r\n\r\n\r\n        // Carbohydrate data\r\n        if (nutrientData.baseData.carbohydrates >= threshold) {\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.sugar == null) {\r\n                nutrientObject.carbohydrateData.sugar = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.glucose == null) {\r\n                nutrientObject.carbohydrateData.glucose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.fructose == null) {\r\n                nutrientObject.carbohydrateData.fructose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.galactose == null) {\r\n                nutrientObject.carbohydrateData.galactose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.sucrose == null) {\r\n                nutrientObject.carbohydrateData.sucrose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.lactose == null) {\r\n                nutrientObject.carbohydrateData.lactose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.maltose == null) {\r\n                nutrientObject.carbohydrateData.maltose = null;\r\n            }\r\n\r\n            if (!nutrientData.carbohydrateData || nutrientData.carbohydrateData.starch == null) {\r\n                nutrientObject.carbohydrateData.starch = null;\r\n            }\r\n        }\r\n\r\n\r\n\t\t// Vitamins:\r\n\t\tif(nutrientData.vitaminData.a === null) {\r\n\t\t\tnutrientObject.vitaminData.a = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b1 === null) {\r\n\t\t\tnutrientObject.vitaminData.b1 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b2 === null) {\r\n\t\t\tnutrientObject.vitaminData.b2 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b3 === null) {\r\n\t\t\tnutrientObject.vitaminData.b3 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b5 === null) {\r\n\t\t\tnutrientObject.vitaminData.b5 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b6 === null) {\r\n\t\t\tnutrientObject.vitaminData.b6 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b7 === null) {\r\n\t\t\tnutrientObject.vitaminData.b7 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b9 === null) {\r\n\t\t\tnutrientObject.vitaminData.b9 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.b12 === null) {\r\n\t\t\tnutrientObject.vitaminData.b12 = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.c === null) {\r\n\t\t\tnutrientObject.vitaminData.c = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.d === null) {\r\n\t\t\tnutrientObject.vitaminData.d = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.e === null) {\r\n\t\t\tnutrientObject.vitaminData.e = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.vitaminData.k === null) {\r\n\t\t\tnutrientObject.vitaminData.k = null\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// Minerals:\r\n\t\tif(nutrientData.mineralData.calcium === null) {\r\n\t\t\tnutrientObject.mineralData.calcium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.copper === null) {\r\n\t\t\tnutrientObject.mineralData.copper = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.iron === null) {\r\n\t\t\tnutrientObject.mineralData.iron = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.magnesium === null) {\r\n\t\t\tnutrientObject.mineralData.magnesium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.manganese === null) {\r\n\t\t\tnutrientObject.mineralData.manganese = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.phosphorus === null) {\r\n\t\t\tnutrientObject.mineralData.phosphorus = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.potassium === null) {\r\n\t\t\tnutrientObject.mineralData.potassium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.selenium === null) {\r\n\t\t\tnutrientObject.mineralData.selenium = null\r\n\t\t}\r\n\r\n\t\tif(nutrientData.mineralData.sodium === null) {\r\n\t\t\tnutrientObject.mineralData.sodium = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.mineralData.zinc === null) {\r\n\t\t\tnutrientObject.mineralData.zinc = null\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// Proteins:\r\n\t\t\r\n\t\tif(nutrientData.proteinData.alanine === null) {\r\n\t\t\tnutrientObject.proteinData.alanine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.arginine === null) {\r\n\t\t\tnutrientObject.proteinData.arginine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.asparticAcid === null) {\r\n\t\t\tnutrientObject.proteinData.asparticAcid = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.cystine === null) {\r\n\t\t\tnutrientObject.proteinData.cystine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.glutamicAcid === null) {\r\n\t\t\tnutrientObject.proteinData.glutamicAcid = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.glycine === null) {\r\n\t\t\tnutrientObject.proteinData.glycine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.histidine === null) {\r\n\t\t\tnutrientObject.proteinData.histidine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.isoleucine === null) {\r\n\t\t\tnutrientObject.proteinData.isoleucine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.leucine === null) {\r\n\t\t\tnutrientObject.proteinData.leucine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.lysine === null) {\r\n\t\t\tnutrientObject.proteinData.lysine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.methionine === null) {\r\n\t\t\tnutrientObject.proteinData.methionine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.phenylalanine === null) {\r\n\t\t\tnutrientObject.proteinData.phenylalanine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.proline === null) {\r\n\t\t\tnutrientObject.proteinData.proline = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.serine === null) {\r\n\t\t\tnutrientObject.proteinData.serine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.threonine === null) {\r\n\t\t\tnutrientObject.proteinData.threonine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.tryptophan === null) {\r\n\t\t\tnutrientObject.proteinData.tryptophan = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.tyrosine === null) {\r\n\t\t\tnutrientObject.proteinData.tyrosine = null\r\n\t\t}\r\n\t\t\r\n\t\tif(nutrientData.proteinData.valine === null) {\r\n\t\t\tnutrientObject.proteinData.valine = null\r\n\t\t}\r\n\r\n    }\r\n\r\n    return nutrientObject;\r\n}\r\n\r\n\r\nfunction buildBaseDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): BaseData {\r\n    let energy = 0;\r\n    let carbohydrates = 0;\r\n    let lipids = 0;\r\n    let proteins = 0;\r\n    let water = 0;\r\n    let dietaryFibers = 0;\r\n    let alcohol = 0;\r\n    let ash = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const baseData = getNutrientData(selectedFoodItem).baseData;\r\n        const userSetPortion = selectedFoodItem.portion.amount;\r\n        const portionFactor = userSetPortion / 100;\r\n\r\n        energy += (baseData.energy ? baseData.energy : 0) * portionFactor;\r\n        carbohydrates += baseData.carbohydrates * portionFactor;\r\n        lipids += baseData.lipids * portionFactor;\r\n        proteins += baseData.proteins * portionFactor;\r\n        water += baseData.water * portionFactor;\r\n        dietaryFibers += (baseData.dietaryFibers ? baseData.dietaryFibers : 0) * portionFactor;\r\n        alcohol += (baseData.alcohol ? baseData.alcohol : 0) * portionFactor;\r\n        ash += (baseData.ash ? baseData.ash : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        energy: createFinalValue(energy, portionSize),\r\n        carbohydrates: createFinalValue(carbohydrates, portionSize),\r\n        lipids: createFinalValue(lipids, portionSize),\r\n        proteins: createFinalValue(proteins, portionSize),\r\n        water: createFinalValue(water, portionSize),\r\n        dietaryFibers: createFinalValue(dietaryFibers, portionSize),\r\n        alcohol: alcohol,\r\n        ash: ash\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction buildVitaminDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): VitaminData {\r\n    let a = 0\r\n    let b1 = 0\r\n    let b2 = 0\r\n    let b3 = 0\r\n    let b5 = 0\r\n    let b6 = 0\r\n    let b7 = 0\r\n    let b9 = 0\r\n    let b12 = 0\r\n    let c = 0\r\n    let d = 0\r\n    let e = 0\r\n    let k = 0\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const vitaminData = getNutrientData(selectedFoodItem).vitaminData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        a += (vitaminData.a ? vitaminData.a : 0) * portionFactor\r\n        b1 += (vitaminData.b1 ? vitaminData.b1 : 0) * portionFactor\r\n        b2 += (vitaminData.b2 ? vitaminData.b2 : 0) * portionFactor\r\n        b3 += (vitaminData.b3 ? vitaminData.b3 : 0) * portionFactor\r\n        b5 += (vitaminData.b5 ? vitaminData.b5 : 0) * portionFactor\r\n        b6 += (vitaminData.b6 ? vitaminData.b6 : 0) * portionFactor\r\n        b7 += (vitaminData.b7 ? vitaminData.b7 : 0) * portionFactor\r\n        b9 += (vitaminData.b9 ? vitaminData.b9 : 0) * portionFactor\r\n        b12 += (vitaminData.b12 ? vitaminData.b12 : 0) * portionFactor\r\n        c += (vitaminData.c ? vitaminData.c : 0) * portionFactor\r\n        d += (vitaminData.d ? vitaminData.d : 0) * portionFactor\r\n        e += (vitaminData.e ? vitaminData.e : 0) * portionFactor\r\n        k += (vitaminData.k ? vitaminData.k : 0) * portionFactor\r\n    })\r\n\r\n    return {\r\n        a: createFinalValue(a, portionSize),\r\n        b1: createFinalValue(b1, portionSize),\r\n        b2: createFinalValue(b2, portionSize),\r\n        b3: createFinalValue(b3, portionSize),\r\n        b5: createFinalValue(b5, portionSize),\r\n        b6: createFinalValue(b6, portionSize),\r\n        b7: createFinalValue(b7, portionSize),\r\n        b9: createFinalValue(b9, portionSize),\r\n        b12: createFinalValue(b12, portionSize),\r\n        c: createFinalValue(c, portionSize),\r\n        d: createFinalValue(d, portionSize),\r\n        e: createFinalValue(e, portionSize),\r\n        k: createFinalValue(k, portionSize),\r\n        carotenoidData: buildCarotenoidDataObject(compositeList, portionSize, preferredSource)\r\n    }\r\n}\r\n\r\n\r\nfunction buildCarotenoidDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): CarotenoidData {\r\n    let alpha = 0\r\n    let beta = 0\r\n    let cryptoxanthin = 0\r\n    let lycopene = 0\r\n    let lutein = 0\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const carotenoidData = getNutrientData(selectedFoodItem).vitaminData.carotenoidData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        if(carotenoidData !== null) {\r\n            alpha += (carotenoidData.caroteneAlpha ? carotenoidData.caroteneAlpha : 0) * portionFactor\r\n            beta += (carotenoidData.caroteneBeta ? carotenoidData.caroteneBeta : 0) * portionFactor\r\n            cryptoxanthin += (carotenoidData.cryptoxanthin ? carotenoidData.cryptoxanthin : 0) * portionFactor\r\n            lycopene += (carotenoidData.lycopene ? carotenoidData.lycopene : 0) * portionFactor\r\n            lutein += (carotenoidData.lutein ? carotenoidData.lutein : 0) * portionFactor\r\n        }\r\n    })\r\n\r\n    return {\r\n        caroteneAlpha: createFinalValue(alpha, portionSize),\r\n        caroteneBeta: createFinalValue(beta, portionSize),\r\n        cryptoxanthin: createFinalValue(cryptoxanthin, portionSize),\r\n        lycopene: createFinalValue(lycopene, portionSize),\r\n        lutein: createFinalValue(lutein, portionSize)\r\n    }\r\n}\r\n\r\n\r\nfunction buildMineralDataObject(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): MineralData {\r\n    let calcium = 0;\r\n    let iron = 0;\r\n    let magnesium = 0;\r\n    let phosphorus = 0;\r\n    let potassium = 0;\r\n    let sodium = 0;\r\n    let zinc = 0;\r\n    let copper = 0;\r\n    let manganese = 0;\r\n    let selenium = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const mineralData = getNutrientData(selectedFoodItem).mineralData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        calcium += (mineralData.calcium ? mineralData.calcium : 0) * portionFactor;\r\n        iron += (mineralData.iron ? mineralData.iron : 0) * portionFactor;\r\n        magnesium += (mineralData.magnesium ? mineralData.magnesium : 0)\r\n        phosphorus += (mineralData.phosphorus ? mineralData.phosphorus : 0)\r\n        potassium += (mineralData.potassium ? mineralData.potassium : 0)\r\n        sodium += (mineralData.sodium ? mineralData.sodium : 0)\r\n        zinc += (mineralData.zinc ? mineralData.zinc : 0)\r\n        copper += (mineralData.copper ? mineralData.copper : 0)\r\n        manganese += (mineralData.manganese ? mineralData.manganese : 0)\r\n        selenium += (mineralData.selenium ? mineralData.selenium : 0)\r\n    })\r\n\r\n    return {\r\n        calcium: createFinalValue(calcium, portionSize),\r\n        iron: createFinalValue(iron, portionSize),\r\n        magnesium: createFinalValue(magnesium, portionSize),\r\n        phosphorus: createFinalValue(phosphorus, portionSize),\r\n        potassium: createFinalValue(potassium, portionSize),\r\n        sodium: createFinalValue(sodium, portionSize),\r\n        zinc: createFinalValue(zinc, portionSize),\r\n        copper: createFinalValue(copper, portionSize),\r\n        manganese: createFinalValue(manganese, portionSize),\r\n        selenium: createFinalValue(selenium, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildCarbohydrateData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): CarbohydrateData {\r\n    let glucose = 0;\r\n    let fructose = 0;\r\n    let galactose = 0;\r\n    let sucrose = 0;\r\n    let maltose = 0;\r\n    let lactose = 0;\r\n    let starch = 0;\r\n    let sugar = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const carbohydrateData = getNutrientData(selectedFoodItem).carbohydrateData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        glucose += (carbohydrateData.glucose ? carbohydrateData.glucose : 0) * portionFactor;\r\n        fructose += (carbohydrateData.fructose ? carbohydrateData.fructose : 0) * portionFactor;\r\n        galactose += (carbohydrateData.galactose ? carbohydrateData.galactose : 0) * portionFactor;\r\n        sucrose += (carbohydrateData.sucrose ? carbohydrateData.sucrose : 0) * portionFactor;\r\n        maltose += (carbohydrateData.maltose ? carbohydrateData.maltose : 0) * portionFactor;\r\n        lactose += (carbohydrateData.lactose ? carbohydrateData.lactose : 0) * portionFactor;\r\n        starch += (carbohydrateData.starch ? carbohydrateData.starch : 0) * portionFactor;\r\n        sugar += (carbohydrateData.sugar ? carbohydrateData.sugar : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        glucose: createFinalValue(glucose, portionSize),\r\n        fructose: createFinalValue(fructose, portionSize),\r\n        galactose: createFinalValue(galactose, portionSize),\r\n        sucrose: createFinalValue(sucrose, portionSize),\r\n        maltose: createFinalValue(maltose, portionSize),\r\n        lactose: createFinalValue(lactose, portionSize),\r\n        starch: createFinalValue(starch, portionSize),\r\n        sugar: createFinalValue(sugar, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction buildProteinData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): ProteinData {\r\n    let tryptophan = 0;\r\n    let threonine = 0;\r\n    let isoleucine = 0;\r\n    let leucine = 0;\r\n    let lysine = 0;\r\n    let methionine = 0;\r\n    let cystine = 0;\r\n    let phenylalanine = 0;\r\n    let tyrosine = 0;\r\n    let valine = 0;\r\n    let arginine = 0;\r\n    let histidine = 0;\r\n    let alanine = 0;\r\n    let asparticAcid = 0;\r\n    let glutamicAcid = 0;\r\n    let glycine = 0;\r\n    let proline = 0;\r\n    let serine = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const proteinData = getNutrientData(selectedFoodItem).proteinData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        tryptophan += (proteinData.tryptophan ? proteinData.tryptophan : 0) * portionFactor;\r\n        threonine += (proteinData.threonine ? proteinData.threonine : 0) * portionFactor;\r\n        isoleucine += (proteinData.isoleucine ? proteinData.isoleucine : 0) * portionFactor;\r\n        leucine += (proteinData.leucine ? proteinData.leucine : 0) * portionFactor;\r\n        lysine += (proteinData.lysine ? proteinData.lysine : 0) * portionFactor;\r\n        methionine += (proteinData.methionine ? proteinData.methionine : 0) * portionFactor;\r\n        cystine += (proteinData.cystine ? proteinData.cystine : 0) * portionFactor;\r\n        phenylalanine += (proteinData.phenylalanine ? proteinData.phenylalanine : 0) * portionFactor;\r\n        tyrosine += (proteinData.tyrosine ? proteinData.tyrosine : 0) * portionFactor;\r\n        valine += (proteinData.valine ? proteinData.valine : 0) * portionFactor;\r\n        arginine += (proteinData.arginine ? proteinData.arginine : 0) * portionFactor;\r\n        histidine += (proteinData.histidine ? proteinData.histidine : 0) * portionFactor;\r\n        alanine += (proteinData.alanine ? proteinData.alanine : 0) * portionFactor;\r\n        asparticAcid += (proteinData.asparticAcid ? proteinData.asparticAcid : 0) * portionFactor;\r\n        glutamicAcid += (proteinData.glutamicAcid ? proteinData.glutamicAcid : 0) * portionFactor;\r\n        glycine += (proteinData.glycine ? proteinData.glycine : 0) * portionFactor;\r\n        proline += (proteinData.proline ? proteinData.proline : 0) * portionFactor;\r\n        serine += (proteinData.serine ? proteinData.serine : 0) * portionFactor;\r\n    })\r\n\r\n    return {\r\n        tryptophan: createFinalValue(tryptophan, portionSize),\r\n        threonine: createFinalValue(threonine, portionSize),\r\n        isoleucine: createFinalValue(isoleucine, portionSize),\r\n        leucine: createFinalValue(leucine, portionSize),\r\n        lysine: createFinalValue(lysine, portionSize),\r\n        methionine: createFinalValue(methionine, portionSize),\r\n        cystine: createFinalValue(cystine, portionSize),\r\n        phenylalanine: createFinalValue(phenylalanine, portionSize),\r\n        tyrosine: createFinalValue(tyrosine, portionSize),\r\n        valine: createFinalValue(valine, portionSize),\r\n        arginine: createFinalValue(arginine, portionSize),\r\n        histidine: createFinalValue(histidine, portionSize),\r\n        alanine: createFinalValue(alanine, portionSize),\r\n        asparticAcid: createFinalValue(asparticAcid, portionSize),\r\n        glutamicAcid: createFinalValue(glutamicAcid, portionSize),\r\n        glycine: createFinalValue(glycine, portionSize),\r\n        proline: createFinalValue(proline, portionSize),\r\n        serine: createFinalValue(serine, portionSize),\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction buildLipidData(compositeList: Array<SelectedFoodItem>, portionSize: number, preferredSource: string): LipidData {\r\n    let unsaturatedMono = 0;\r\n    let unsaturatedPoly = 0;\r\n    let saturated = 0;\r\n    let omega3 = 0;\r\n    let omega6 = 0;\r\n    let omegaUncertain = 0;\r\n    let cholesterol = 0;\r\n    let transFattyAcids = 0;\r\n\r\n    compositeList.forEach(selectedFoodItem => {\r\n        const lipidData = getNutrientData(selectedFoodItem).lipidData\r\n        const userSetPortion = selectedFoodItem.portion.amount\r\n        const portionFactor = userSetPortion / 100\r\n\r\n        unsaturatedMono += (lipidData.unsaturatedMono ? lipidData.unsaturatedMono : 0) * portionFactor;\r\n        unsaturatedPoly += (lipidData.unsaturatedPoly ? lipidData.unsaturatedPoly : 0) * portionFactor;\r\n        saturated += (lipidData.saturated ? lipidData.saturated : 0) * portionFactor;\r\n        omega3 += (lipidData.omegaData?.omega3 ? lipidData.omegaData.omega3 : 0) * portionFactor;\r\n        omega6 += (lipidData.omegaData?.omega6 ? lipidData.omegaData.omega6 : 0) * portionFactor;\r\n        omegaUncertain += (lipidData.omegaData?.uncertain ? lipidData.omegaData.uncertain : 0) * portionFactor;\r\n        cholesterol += (lipidData.cholesterol ? lipidData.cholesterol : 0) * portionFactor;\r\n        transFattyAcids += (lipidData.transFattyAcids ? lipidData.transFattyAcids : 0) * portionFactor;\r\n    })\r\n\r\n    const omegaRatio = (omega3 + omega6) / (omega3 + omega6 + omegaUncertain)\r\n\r\n    return {\r\n        unsaturatedMono: createFinalValue(unsaturatedMono, portionSize),\r\n        unsaturatedPoly: createFinalValue(unsaturatedPoly, portionSize),\r\n        saturated: createFinalValue(saturated, portionSize),\r\n        omegaData: {\r\n            omega3: createFinalValue(omega3, portionSize),\r\n            omega6: createFinalValue(omega6, portionSize),\r\n            uncertain: createFinalValue(omegaUncertain, portionSize),\r\n            uncertainRatio: omegaRatio\r\n        },\r\n        cholesterol: createFinalValue(cholesterol, portionSize),\r\n        transFattyAcids: createFinalValue(transFattyAcids, portionSize),\r\n    }\r\n}\r\n\r\n\r\nfunction createFinalValue(value, totalPortionAmount) {\r\n    return (value / totalPortionAmount) * 100;\r\n}","import {ReactElement, useContext} from \"react\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {HelpText} from \"../service/HelpService\";\r\n\r\ninterface HelpModalProps {\r\n    helpText: HelpText\r\n    closeHelpModal: () => void\r\n}\r\n\r\nexport function HelpModal(props: HelpModalProps): ReactElement {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if (!props.helpText) {\r\n        return (<div>No data available.</div>);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"modal\" style={{display: \"block\"}} role=\"dialog\">\r\n            <div className=\"modal-dialog\" role=\"document\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\">{props.helpText.title}</h5>\r\n                        <button type=\"button\"\r\n                                className=\"btn-close\"\r\n                                data-dismiss=\"modal\"\r\n                                aria-label=\"Close\"\r\n                                onClick={props.closeHelpModal}>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <span dangerouslySetInnerHTML={{__html: props.helpText.content}}/>\r\n                    </div>\r\n                    <div className=\"modal-footer\">\r\n                        <button type=\"button\"\r\n                                className=\"btn btn-primary\"\r\n                                onClick={props.closeHelpModal}>\r\n                            {applicationStrings.button_close[languageContext.language]}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import {LANGUAGE_EN} from \"../config/Constants\";\r\n\r\nexport interface HelpText {\r\n    title: string,\r\n    content: string\r\n}\r\n\r\nexport function getHelpText(helpModalId: number, languageId: string): HelpText | null {\r\n    const helpFile = require(\"../static/help/help.json\");\r\n    const entry = helpFile.entries.find( (entry) => entry.id === helpModalId);\r\n\r\n    if(entry) {\r\n        const languageSection = languageId === LANGUAGE_EN ? entry.en : entry.de;\r\n        const title = languageSection.title;\r\n        const contentArray = languageSection.content;\r\n\r\n        let content = \"\";\r\n        for(let i=0; i < contentArray.length; i++) {\r\n            content += contentArray[i];\r\n            if(i < (contentArray.length-1)) {\r\n                content += \"<br />\"\r\n            }\r\n        }\r\n\r\n        return {\r\n            title: title,\r\n            content: content\r\n        };\r\n    }\r\n\r\n    return null\r\n}","import React, {useContext, useState} from 'react'\r\n\r\nimport {Button, Modal} from 'react-bootstrap'\r\n\r\nimport {NotificationManager} from 'react-notifications'\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\nimport FoodSelector from \"./FoodSelector\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {CompositeFoodList} from \"./CompositeFoodList\";\r\nimport {initialFoodClassId, maximalPortionSize} from \"../../config/ApplicationSetting\";\r\nimport combineFoodItems from \"../../service/calculation/FoodDataAggregationService\";\r\nimport {FaQuestionCircle} from \"react-icons/fa\";\r\nimport {HelpModal} from \"../HelpModal\";\r\nimport {getHelpText} from \"../../service/HelpService\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\n\r\nexport interface FoodSelectorModalProps {\r\n    onHide: () => void,\r\n    selectedFoodItemCallback: (selectedFoodItem: SelectedFoodItem) => void\r\n    compositeSelector: boolean\r\n}\r\n\r\n\r\nconst FoodSelectorModal: React.FC<FoodSelectorModalProps> = (props: FoodSelectorModalProps) => {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const [selectedFoodItem, setSelectedFoodItem] = useState<SelectedFoodItem | null>(null)\r\n    const [compositeTitle, setCompositeTitle] = useState<string | null>(null)\r\n    const [compositeList, setCompositeList] = useState<Array<SelectedFoodItem>>([])\r\n    const [showHelpModal, setShowHelpModal] = useState<boolean>(false)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateSelectedFoodItem = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem(selectedFoodItem)\r\n    }\r\n\r\n    const updateCompositeTitle = (title: string): void => {\r\n        setCompositeTitle(title)\r\n    }\r\n\r\n    const addCompositeElement = () => {\r\n        if (selectedFoodItem !== null) {\r\n            if (selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n                NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n                return;\r\n            }\r\n\r\n            const newList: Array<SelectedFoodItem> = [...compositeList]\r\n            newList.push(selectedFoodItem)\r\n            setCompositeList(newList)\r\n        }\r\n    }\r\n\r\n    const deleteCompositeElement = (index: number) => {\r\n        const newList: Array<SelectedFoodItem> = [...compositeList]\r\n        newList.splice(index, 1)\r\n        setCompositeList(newList)\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (props.compositeSelector) {\r\n            onSubmitComposite()\r\n        } else {\r\n            onSubmitSingleItem()\r\n        }\r\n    }\r\n\r\n    const onSubmitSingleItem = () => {\r\n        const foodItemId = selectedFoodItem ? selectedFoodItem.foodItem.id : null\r\n        if (foodItemId) {\r\n            const existingItemInList = applicationContext?.applicationData.foodDataPanel.selectedFoodItems.find(foodItem => foodItem.id === foodItemId)\r\n\r\n            if (existingItemInList) {\r\n                NotificationManager.error(applicationStrings.message_error_existing_element[language])\r\n                return\r\n            }\r\n        }\r\n\r\n        if (!selectedFoodItem || !selectedFoodItem.foodItem || !selectedFoodItem.foodClass || !selectedFoodItem.portion) {\r\n            NotificationManager.error(applicationStrings.message_error_incomplete_form[language])\r\n        } else if (selectedFoodItem.portion.amount < 1 || selectedFoodItem.portion.amount > maximalPortionSize) {\r\n            NotificationManager.error(applicationStrings.message_error_invalid_portion[language])\r\n        } else {\r\n            props.selectedFoodItemCallback(selectedFoodItem)\r\n            props.onHide()\r\n        }\r\n    }\r\n\r\n    const onSubmitComposite = () => {\r\n        const preferredSource = applicationContext.applicationData.preferredSource\r\n        let aggregatedSelectedFoodItem = combineFoodItems(compositeList, preferredSource)\r\n\r\n        if (compositeTitle !== null && compositeTitle.trim().length > 0) {\r\n            const titleToShow = compositeTitle.length < 24 ? compositeTitle.trim() : compositeTitle.substring(0, 21).trim() + \"...\"\r\n            aggregatedSelectedFoodItem.title = titleToShow\r\n        } else {\r\n            aggregatedSelectedFoodItem.title = applicationStrings.input_compositelist_title[language]\r\n        }\r\n\r\n        if (!aggregatedSelectedFoodItem) {\r\n            return\r\n        }\r\n\r\n        aggregatedSelectedFoodItem = {...aggregatedSelectedFoodItem, aggregated: true}\r\n        props.selectedFoodItemCallback(aggregatedSelectedFoodItem)\r\n        props.onHide()\r\n    }\r\n\r\n    const updateFoodSelectorConfig = (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => {\r\n        if (applicationContext) {\r\n            const currentSelectorSetting = applicationContext.applicationData.foodSelector\r\n            if (selectedCategory !== currentSelectorSetting.selectedCategory || supplementData !== currentSelectorSetting.sourceSupplement\r\n                || combineData !== currentSelectorSetting.sourceCombine) {\r\n                applicationContext.setFoodSelectorConfig(selectedCategory, supplementData, combineData)\r\n            }\r\n        }\r\n    }\r\n\r\n    const onCancel = () => {\r\n        props.onHide()\r\n    }\r\n\r\n    const onOpenHelpModal = () => {\r\n        setShowHelpModal(true)\r\n    }\r\n\r\n    const title = props.compositeSelector ? applicationStrings.label_foodselector_composite[language] : applicationStrings.label_foodselector[language]\r\n    const helpText = props.compositeSelector ? getHelpText(10, language) : getHelpText(9, language)\r\n\r\n    return (\r\n        <Modal size={'lg'} show={true} onHide={props.onHide}>\r\n            <Modal.Header>\r\n                <b>{title}</b>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                {showHelpModal && helpText !== null &&\r\n                <HelpModal helpText={helpText} closeHelpModal={() => setShowHelpModal(false)}/>\r\n                }\r\n                <div>\r\n                    {!props.compositeSelector ?\r\n                        <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                      defaultFoodClass={initialFoodClassId}\r\n                                      compositeSelector={false}\r\n                                      updateFoodSelectorConfig={updateFoodSelectorConfig}\r\n                        />\r\n                        :\r\n                        <div className={\"container\"}>\r\n                            <div className={\"row\"}>\r\n                                <div className={\"col-6\"}>\r\n                                    <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                                  updateFoodSelectorConfig={updateFoodSelectorConfig}\r\n                                                  defaultFoodClass={initialFoodClassId}\r\n                                                  updateCompositeTitle={updateCompositeTitle}\r\n                                                  compositeSelector={true}\r\n                                    />\r\n                                </div>\r\n                                <div className={\"col-6\"}>\r\n                                    <CompositeFoodList selectedFoodItems={compositeList}\r\n                                                       deleteItem={deleteCompositeElement}/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer className={\"justify-content-between\"}>\r\n                <div>\r\n                    <Button className={\"btn btn-secondary\"} onClick={onOpenHelpModal}>\r\n                        <FaQuestionCircle/>\r\n                    </Button>\r\n                </div>\r\n                <div className={\"d-flex d-row justify-content-end\"}>\r\n                    <Button className={\"btn-secondary form-button\"} onClick={onCancel}>\r\n                        {applicationStrings.button_cancel[language]}\r\n                    </Button>\r\n                    {props.compositeSelector ?\r\n                        <Button className={\"form-button\"}\r\n                                onClick={onSubmit}\r\n                                disabled={!compositeList || compositeList.length < 1}>\r\n                            {applicationStrings.button_show[language]}\r\n                        </Button>\r\n                        :\r\n                        <Button className={\"form-button\"} onClick={onSubmit}>\r\n                            {applicationStrings.button_select[language]}\r\n                        </Button>\r\n                    }\r\n\r\n                    {props.compositeSelector &&\r\n                    <Button className={\"form-button\"} onClick={addCompositeElement}>\r\n                        {applicationStrings.button_add[language]}\r\n                    </Button>\r\n                    }\r\n                </div>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n\r\n}\r\n\r\nexport default FoodSelectorModal","import React from \"react\";\r\n\r\nimport {confirmable, createConfirmation} from \"react-confirm\";\r\nimport {Button, Modal} from \"react-bootstrap\";\r\n\r\ninterface ConfirmationDialogProps {\r\n    okLabel: string,\r\n    cancelLabel: string,\r\n    title: string,\r\n    confirmation: string,\r\n    show: boolean,\r\n    proceed: (procedd: boolean) => void, // called when ok button is clicked.\r\n    enableEscape: boolean,\r\n    small?: boolean\r\n}\r\n\r\nclass ConfirmationDialog extends React.Component<ConfirmationDialogProps> {\r\n\r\n    render() {\r\n        const {\r\n            okLabel,\r\n            cancelLabel,\r\n            title,\r\n            confirmation,\r\n            show,\r\n            proceed,\r\n            enableEscape = true,\r\n        } = this.props;\r\n\r\n        return (\r\n            <Modal\r\n                show={show}\r\n                onHide={() => proceed(false)}\r\n                backdrop={enableEscape ? true : \"static\"}\r\n                keyboard={enableEscape}\r\n                fullscreen={true}>\r\n                <Modal.Header>\r\n                    <Modal.Title>{title}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>{confirmation}</Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button style={{minWidth: \"80px\"}}\r\n                            onClick={() => proceed(false)}>\r\n                        {cancelLabel}\r\n                    </Button>\r\n                    <Button\r\n                        style={{minWidth: \"80px\"}}\r\n                        className=\"primary button-l\"\r\n                        onClick={() => proceed(true)}>\r\n                        {okLabel}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function confirmAction(\r\n    confirmation,\r\n    okLabel,\r\n    cancelLabel,\r\n    options = {},\r\n    small?\r\n) {\r\n    return createConfirmation(confirmable(ConfirmationDialog))({\r\n        confirmation,\r\n        okLabel,\r\n        cancelLabel,\r\n        ...options,\r\n        small\r\n    });\r\n}\r\n","export const color_yellow = \"rgba(255, 255, 153, 1.0)\";   // Default for Lipids\r\nexport const color_green = \"rgba(132, 225, 132, 1.0)\";   // Default for Carbs\r\n\r\nexport const color_green_light = \"rgba(196, 236, 193, 1.0)\";   // Default for Sugar (as part of carbs)\r\nexport const color_red = \"rgba(255, 204, 204, 1.0)\";   // Default for proteins\r\nexport const color_blue = \"rgba(133, 193, 233, 1.0)\";   // Default for Water\r\nexport const color_purple = \"rgba(213, 205, 237, 1.0)\"; // Default color for a blue line\r\n\r\nexport const color_chart_brown = \"rgba(188, 170, 164)\";\t\t// brown\r\n\r\nexport const color_gray = \"rgba(235, 235, 235, 1.0)\"; // Default color for a blue line\r\nexport const color_line_blue = \"rgba(0, 107, 215, 1.0)\"; // Default color for a blue line\r\nexport const color_line_red = \"rgba(255, 102, 102, 1.0)\"; // Default color for a red line\r\n\r\nexport const color_chart_green_1 = \"rgba(39, 177, 96)\";\t\t// Dark green\r\nexport const color_chart_green_2 = \"rgba(137, 238, 137)\";\t// Normal green\r\nexport const color_chart_green_3 = \"rgba(214, 245, 214)\";\t\t// Light green\r\n\r\nexport const color_chart_yellow_1 = \"rgba(212, 172, 13)\";\t\t// Dark yellow\r\nexport const color_chart_yellow_2 = \"rgba(244, 208, 63)\";\t// Normal yellow\r\nexport const color_chart_yellow_3 = \"rgba(249, 231, 159)\";\t\t// Light yellow\r\nexport const color_chart_yellow_4 = \"rgba(255, 202, 40)\";\r\n\r\nexport const color_chart_yellow_green_1 =\"rgba(174, 213, 129)\"\r\nexport const color_chart_yellow_green_2 =\"rgba(76, 175, 80)\"\r\nexport const color_chart_yellow_green_3 =\"rgba(124, 179, 66)\"\r\n\r\nexport const color_chart_orange = \"rgba(230, 126, 34)\";\r\nexport const color_x = \"rgba(51, 204, 204)\"\r\n\r\nexport const color_chart_misc = color_gray;\r\n\r\n// Chart sizes:\r\n\r\nexport const default_chart_height = 380;\r\nexport const default_chart_height_m = 190;\r\n\r\nexport const basedata_piechart_width = 300;\r\nexport const basedata_piechart_width_m = 200;\r\n\r\nexport const basedata_barchart_width = 380;\r\nexport const basedata_barchart_width_m = 253;\r\n\r\n// Food data panel container size:\r\n\r\nexport const datapanel_container_min_width = 850\r\nexport const datapanel_container_min_width_m = 500\r\n\r\nexport const max_portion = 5000;\r\n\r\nexport const color_water = color_blue;\r\nexport const color_lipids = color_yellow;\r\nexport const color_carbs = color_green;\r\nexport const color_carbs_sugar = color_green_light;\r\nexport const color_carbs_dietaryFibers = color_chart_brown;\r\n\r\nexport const color_carbs_mono_glucose = color_chart_yellow_green_1\r\nexport const color_carbs_mono_fructose = color_chart_yellow_green_2\r\nexport const color_carbs_mono_galactose = color_chart_yellow_green_3\r\n\r\nexport const color_carbs_di_sucrose = color_chart_yellow_4\r\nexport const color_carbs_di_lactose = color_chart_yellow_3\r\nexport const color_carbs_di_maltose = color_chart_yellow_1\r\n\r\nexport const color_carbs_starch = color_chart_orange\r\n\r\nexport const color_alcohol = color_x;\r\n\r\nexport const color_proteins = color_red;\r\n\r\nexport const color_lipids_saturated = color_chart_yellow_4;\r\nexport const color_lipids_unsaturated_mono = color_chart_yellow_green_1;\r\nexport const color_lipids_unsaturated_poly = color_chart_yellow_green_2;\r\n\r\nexport const color_lipids_omega3 = color_chart_green_1;\r\nexport const color_lipids_omega6 = color_chart_yellow_2;\r\n\r\nexport const color_lipids_misc = color_gray;\r\n\r\nexport const color_ash = color_gray;\r\n\r\nexport const direct_compare_color1 = \"#ffe085\"\r\nexport const direct_compare_color2 = \"#d9ecff\"","/**\r\n * Returns a default-styled configuration for a bar chart.\r\n *\r\n * title: The charts title.\r\n * unit: The unit to use for the axis title and tooltip.\r\n * minYValue: Optional, a pre-defined maxYValue for the Y axis (e.g. 100)\r\n */\r\nimport {shortenName} from \"./nutrientdata/NameTypeService\";\r\n\r\nexport function getBarChartOptions(title: string, unit: string, maxYValue?: number | undefined) {\r\n    let yAxis: any = {\r\n        title: {\r\n            display: true,\r\n            text: unit\r\n        }\r\n    }\r\n\r\n    if(maxYValue) {\r\n        yAxis = {...yAxis, min: 0, max: maxYValue}\r\n    }\r\n\r\n    const scalesObject = {y: yAxis}\r\n    return getOptions(title, unit, scalesObject);\r\n}\r\n\r\n\r\nexport function getBarChartOptionsForRanking(title: string, unit: string) {\r\n    const scales = getScalesForRankingChart(unit);\r\n    const fullTitle = `${title} (${unit})`\r\n    return getOptions(fullTitle, unit, scales);\r\n}\r\n\r\n\r\nexport function getPieChartOptions(title: string, unit: string) {\r\n    return getOptions(title, unit);\r\n}\r\n\r\n\r\nfunction getOptions(title: string, unit: string, scalesObject?: any | undefined) {\r\n    const titleObj = title ? {display: true, text: title, fontSize: 18} : null;\r\n\r\n    let options: any = {\r\n        maintainAspectRatio: false,\r\n        responsive: true,\r\n        plugins: {\r\n            title: titleObj,\r\n            tooltip: getToolTips(unit),\r\n            legend: {\r\n                display: false\r\n            },\r\n        }\r\n    }\r\n\r\n    if (scalesObject !== undefined) {\r\n        options = {...options, scales: scalesObject}\r\n    }\r\n\r\n    return options;\r\n}\r\n\r\nfunction getToolTips(unit: string) {\r\n    return {\r\n        enabled: true,\r\n        maintainAspectRatio: true,\r\n        callbacks: {\r\n            label: tooltipItem => `${tooltipItem.label}: ${tooltipItem.formattedValue} ${unit}`\r\n        }\r\n    };\r\n}\r\n\r\n\r\nfunction getScalesForRankingChart(unit: string) {\r\n    let scaleLabel: any | null = null;\r\n\r\n    if (unit) {\r\n        scaleLabel = {\r\n            display: false,\r\n            labelString: unit\r\n        }\r\n    }\r\n\r\n    let axesObj = {};\r\n    if (scaleLabel) {\r\n        axesObj[\"scaleLabel\"] = scaleLabel;\r\n    }\r\n\r\n    const yAxes = [axesObj];\r\n\r\n    const scales = {\r\n        yAxes: yAxes,\r\n        xAxes: [{\r\n            ticks: {\r\n                autoSkip: false,\r\n                callback: function (value, index, values) {\r\n                    return shortenName(value, 24);\r\n                }\r\n            }\r\n        }]\r\n    };\r\n\r\n    return scales;\r\n}","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE} from \"../../config/Constants\";\r\nimport {Form} from 'react-bootstrap';\r\nimport {PieChartConfigurationProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\nexport function PieChartConfigurationForm(props: PieChartConfigurationProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    const legendLabel = isMobileDevice()\r\n        ? applicationStrings.checkbox_chartoption_showLegend_m[languageContext.language]\r\n        : applicationStrings.checkbox_chartoption_showLegend[languageContext.language]\r\n\r\n    const detailsLabel = isMobileDevice()\r\n        ? applicationStrings.checkbox_chartoption_showDetails_m[languageContext.language]\r\n        : applicationStrings.checkbox_chartoption_showDetails[languageContext.language]\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <form className=\"form-inline form-group\">\r\n                    <Form.Label className=\"form-elements\">\r\n                        <b>{applicationStrings.label_charttype[languageContext.language]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_charttype_pie[languageContext.language]}\r\n                                type=\"radio\"\r\n                                value={CHART_TYPE_PIE}\r\n                                checked={props.chartType === CHART_TYPE_PIE}\r\n                                onChange={props.handleRadioButtonClick}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton form-horizontal-separation\"\r\n                                label={applicationStrings.label_charttype_bar[languageContext.language]}\r\n                                type=\"radio\"\r\n                                value={CHART_TYPE_BAR}\r\n                                checked={props.chartType === CHART_TYPE_BAR}\r\n                                onChange={props.handleRadioButtonClick}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton\"\r\n                                label={legendLabel}\r\n                                defaultChecked={props.showLegend}\r\n                                disabled={props.chartType === CHART_TYPE_BAR}\r\n                                onClick={props.handleLegendCheckboxClick}>\r\n                    </Form.Check>\r\n                    {props.detailsCheckboxAvailable &&\r\n                    <Form.Check inline={true}\r\n                                className=\"form-radiobutton\"\r\n                                label={detailsLabel}\r\n                                defaultChecked={props.showDetails}\r\n                                onClick={props.handleDetailsCheckboxClick}>\r\n                    </Form.Check>\r\n                    }\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {ReactElement} from \"react\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\ninterface CustomLegendProps {\r\n    legendData: Array<any>\r\n}\r\n\r\nexport function CustomLegend(props: CustomLegendProps) {\r\n\r\n    const renderLegend = () => {\r\n        let legend: Array<ReactElement> = [];\r\n        const mobile = isMobileDevice()\r\n\r\n        for (let i = 0; i < props.legendData.length; i++) {\r\n            const element = props.legendData[i];\r\n            const indent = element.indent > 0 ? \"25px\" : \"0px\";\r\n            const verticalSpace = element.separateNextElement && !mobile ? \"15px\" : \"0px\";\r\n            const id = `legendrow ${i}`;\r\n\r\n            const legendItemLabelClass = mobile ? \"legendItemLabel-mobile\" : \"legendItemLabel\"\r\n            const legendClassName = isMobileDevice() ? \"align-items-baseline\" : \"align-items-middle\"\r\n\r\n            legend.push(\r\n                <div key={id} className=\"row\" style={{marginLeft: indent, marginBottom: verticalSpace}}>\r\n                    <div style={{display: \"flex\"}} className={legendClassName}>\r\n                        <div className=\"legendItem\" style={{background: element.color}}></div>\r\n                        <p className={legendItemLabelClass}>{element.item}</p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return legend;\r\n    }\r\n\r\n\r\n    return (\r\n        <div style={{borderLeft: \"1px solid #aaaaaa\", paddingLeft: \"5px\"}}>\r\n            <div style={{paddingTop: \"4px\"}}>\r\n                {renderLegend()}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n\r\n}","import {isMobileDevice, WindowDimension} from \"../WindowDimension\";\r\nimport {\r\n    basedata_piechart_width,\r\n    basedata_piechart_width_m, datapanel_container_min_width, datapanel_container_min_width_m,\r\n    default_chart_height,\r\n    default_chart_height_m\r\n} from \"../../config/ChartConfig\";\r\nimport {TAB_BASE_DATA} from \"../../config/Constants\";\r\n\r\nexport function calculateChartHeight(currentDimension: WindowDimension, directCompare?: boolean, dataPage?: string): number {\r\n    const mobile = isMobileDevice()\r\n\r\n    // Mobile devices don't need to be regarded in direct compare menu, as the functionality is disabled\r\n    if(directCompare) {\r\n        return currentDimension.height / 3\r\n    } else {\r\n        return dataPage === TAB_BASE_DATA\r\n            ? mobile\r\n                ? basedata_piechart_width_m\r\n                : basedata_piechart_width\r\n            : mobile\r\n                ? default_chart_height_m\r\n                : default_chart_height\r\n    }\r\n}\r\n\r\nexport function calculateChartContainerHeight(currentDimension: WindowDimension, directCompare?: boolean): number {\r\n    return directCompare === true\r\n        ? calculateChartHeight(currentDimension, directCompare) + 24\r\n        : calculateChartHeight(currentDimension, directCompare) + 10\r\n}\r\n\r\nexport function calculateMinimalDataPanelWidth() {\r\n    return isMobileDevice() ? datapanel_container_min_width_m : datapanel_container_min_width\r\n}\r\n","/**\r\n * Checks whether a value is a positive integer value.\r\n */\r\nexport function isPositiveIntegerValue(value) {\r\n    const number = Number(value);\r\n    return Number.isInteger(number) && number > 0;\r\n}\r\n\r\n/**\r\n * Checks whether a value is a positive integer value or 0.\r\n */\r\nexport function isPositiveIntegerValueOrZero(value) {\r\n    const number = Number(value);\r\n    return Number.isInteger(number) && number >= 0;\r\n}\r\n\r\n/**\r\n * Rounds a value between 0 and 100 automatically to a reasonable number of digits:\r\n *\r\n * - Generally the value is rounded to one digit.\r\n * - Between 1 and 10, the value is rounded to two digits.\r\n * - Between 0.1 and 1, the value is rounded to three digits.\r\n * - Between 0.01 and 0.1, the value is rounded to four digits.\r\n * - Otherwise it is rounded to five digits.\r\n *\r\n */\r\nexport function autoRound(value) {\r\n    let roundFactor = 0;   // Default round factor\r\n\r\n    if(value >= 100) {\r\n        roundFactor = 0;\r\n    } else if(value < 100 && value >= 10) {\r\n        roundFactor = 1;\r\n    } else if(value < 10 && value >= 1) {\r\n        roundFactor = 2;\r\n    } else if(value < 1 && value >= 0.1) {\r\n        roundFactor = 3;\r\n    } else if(value < 0.1 && value >= 0.01) {\r\n        roundFactor = 4;\r\n    } else {\r\n        roundFactor = 5;\r\n    }\r\n\r\n    return round(value, roundFactor);\r\n}\r\n\r\n/**\r\n * Simple round function to round a number to a specific number of digits.\r\n */\r\nexport function round(value, digits) {\r\n    const roundFactor = Math.pow(10, digits);\r\n    return (Math.round(value * roundFactor)) / roundFactor;\r\n}\r\n\r\n/**\r\n * Rounds any given value to the next sensible round or half-round value. Between a range of 10 and 100, everything\r\n * below 30 will be rounded to the next odden number, everthing above 30 to the next 5-round number.\r\n * @param value The value to round\r\n *\r\n * Examples:\r\n * 22.5 -> 24\r\n * 61.3 -> 65\r\n *\r\n * 0.00232 -> 0.024\r\n * 1226 -> 1400\r\n */\r\nexport function roundToNextValue(value: number): number {\r\n    const multiplier = 10000000000\r\n    const nextEvenNumber = (number) => 2 * Math.ceil(number / 2)\r\n    const nextNumberFive = (number) => 5 * Math.ceil(number / 5)\r\n\r\n    // Multiply vylue with a high value to prevent logarithmiting illegal values below 1\r\n    const ordinaryValue = value * multiplier\r\n    const numberOfDigits = Math.ceil(Math.log10(ordinaryValue))\r\n    const standardValue = (ordinaryValue / Math.pow(10, numberOfDigits)) * 100\r\n\r\n    const nextRoundValue = standardValue < 30 ? nextEvenNumber(standardValue) : nextNumberFive(standardValue)\r\n    return nextRoundValue / Math.pow(10, 12-numberOfDigits)\r\n}\r\n\r\n/**\r\n * Returns a number of fixed length with leading zeros.\r\n */\r\nexport function getNumberOfFixedLength(number: number, digits: number): string {\r\n\tlet numberString = `${number}`\r\n\twhile(numberString.length < digits) {\r\n\t\tnumberString = `0${numberString}`\r\n\t}\r\n\treturn numberString\r\n}\r\n\r\n\r\nexport function convertBooleanToDigit(value: boolean) {\r\n\treturn value === true ? 1 : 0\r\n}\r\n\r\nexport function convertStringToBoolean(value: string) {\r\n\treturn value === \"1\" ? true : false\r\n}\r\n","import {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {autoRound} from \"../calculation/MathService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as ChartConfig from \"../../config/ChartConfig\";\r\nimport {ChartDisplayData, LegendData} from \"../../types/livedata/ChartDisplayData\";\r\nimport {CATEGORY_BEVERAGE} from \"../../config/Constants\";\r\n\r\nexport function getTotalChartData(nutrientData: NutrientData, language: string, category: number | undefined): ChartDisplayData {\r\n    const alcoholValuePerc = nutrientData.baseData.alcohol !== null\r\n        ? autoRound(nutrientData.baseData.alcohol)\r\n        : null\r\n\r\n    const data = [autoRound(nutrientData.baseData.water),\r\n        autoRound(nutrientData.baseData.carbohydrates),\r\n        autoRound(nutrientData.baseData.lipids),\r\n        autoRound(nutrientData.baseData.proteins),\r\n        autoRound(nutrientData.baseData.ash)\r\n    ]\r\n\r\n    const labels: string[] = [applicationStrings.label_nutrient_water[language],\r\n        applicationStrings.label_nutrient_carbohydrates_short[language],\r\n        applicationStrings.label_nutrient_lipids[language],\r\n        applicationStrings.label_nutrient_proteins[language],\r\n        applicationStrings.label_nutrient_ash[language]]\r\n\r\n    const colors = [\r\n        ChartConfig.color_water,\r\n        ChartConfig.color_carbs,\r\n        ChartConfig.color_lipids,\r\n        ChartConfig.color_proteins,\r\n        ChartConfig.color_ash,\r\n    ]\r\n\r\n    if(alcoholValuePerc !== null && (category === CATEGORY_BEVERAGE || category === undefined)) {\r\n        data.push(alcoholValuePerc)\r\n        labels.push(applicationStrings.label_nutrient_alcohol[language])\r\n        colors.push(ChartConfig.color_alcohol)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: data,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getNutrientChartData(nutrientData: NutrientData, language: string, showDetails: boolean,\r\n                                     category: number | undefined): ChartDisplayData {\r\n    const totalValue = nutrientData.baseData.carbohydrates + nutrientData.baseData.lipids + nutrientData.baseData.proteins;\r\n\r\n    const sugar = nutrientData.carbohydrateData?.sugar ? nutrientData.carbohydrateData.sugar : 0\r\n    const dietaryFibers = nutrientData.baseData.dietaryFibers ? nutrientData.baseData.dietaryFibers : 0\r\n\r\n    let carbValue = showDetails ? (nutrientData.baseData.carbohydrates - sugar - dietaryFibers)\r\n        : nutrientData.baseData.carbohydrates;\r\n\r\n    if (carbValue < 0) {\r\n        carbValue = 0\r\n    }\r\n\r\n    const carbValuePerc = autoRound(carbValue / totalValue * 100)\r\n    const sugarValuePerc = autoRound(sugar / totalValue * 100)\r\n    const dietaryFibersPerc = autoRound(dietaryFibers / totalValue * 100)\r\n    const lipidValuePerc = autoRound(nutrientData.baseData.lipids / totalValue * 100)\r\n    const proteinsValuePerc = autoRound(nutrientData.baseData.proteins / totalValue * 100)\r\n    const alcoholValuePerc = nutrientData.baseData.alcohol !== null\r\n        ? autoRound(nutrientData.baseData.alcohol / totalValue * 100)\r\n        : null\r\n\r\n    const labels = [applicationStrings.label_nutrient_lipids[language],\r\n        applicationStrings.label_nutrient_proteins[language],\r\n        applicationStrings.label_nutrient_carbohydrates_short[language]]\r\n\r\n    const values = [lipidValuePerc, proteinsValuePerc, carbValuePerc];\r\n\r\n    const colors = [\r\n        ChartConfig.color_lipids,\r\n        ChartConfig.color_proteins,\r\n        ChartConfig.color_carbs\r\n    ];\r\n\r\n    if (alcoholValuePerc !== null && (category === CATEGORY_BEVERAGE || category === undefined)) {\r\n        labels.push(applicationStrings.label_nutrient_alcohol[language])\r\n        values.push(alcoholValuePerc)\r\n        colors.push(ChartConfig.color_alcohol)\r\n    }\r\n\r\n    if (showDetails) {\r\n        if (sugarValuePerc > 0) {\r\n            labels.push(applicationStrings.label_nutrient_sugar[language]);\r\n            values.push(sugarValuePerc);\r\n            colors.push(ChartConfig.color_carbs_sugar);\r\n        }\r\n        if (dietaryFibersPerc > 0) {\r\n            labels.push(applicationStrings.label_nutrient_dietaryFibers_short[language]);\r\n            values.push(dietaryFibersPerc);\r\n            colors.push(ChartConfig.color_carbs_dietaryFibers);\r\n        }\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values,\r\n        colors: colors\r\n    }\r\n}\r\n\r\nexport function getBaseChartLegendData(lang: string, showDetails: boolean, category: number | undefined): LegendData[] {\r\n    const legendData: LegendData[] = [\r\n        {\r\n            item: applicationStrings.label_nutrient_water[lang],\r\n            color: ChartConfig.color_water,\r\n            separateNextElement: true\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids[lang],\r\n            color: ChartConfig.color_lipids\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_proteins[lang],\r\n            color: ChartConfig.color_proteins\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_carbohydrates_short[lang],\r\n            color: ChartConfig.color_carbs,\r\n        }\r\n    ];\r\n\r\n    if(category === CATEGORY_BEVERAGE || category === undefined) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_alcohol[lang],\r\n            color: ChartConfig.color_alcohol,\r\n        })\r\n    }\r\n\r\n    if (showDetails) {\r\n        legendData.push(\r\n            {\r\n                item: applicationStrings.label_nutrient_sugar[lang],\r\n                color: ChartConfig.color_carbs_sugar,\r\n                indent: 1,\r\n            },\r\n            {\r\n                item: applicationStrings.label_nutrient_dietaryFibers[lang],\r\n                color: ChartConfig.color_carbs_dietaryFibers,\r\n                indent: 1,\r\n                separateNextElement: true\r\n            }\r\n        );\r\n\r\n    }\r\n\r\n    legendData.push({\r\n        item: applicationStrings.label_nutrient_ash[lang],\r\n        color: ChartConfig.color_ash\r\n    })\r\n\r\n    return legendData;\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE, TAB_BASE_DATA} from \"../../../config/Constants\";\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BaseDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {ChartDisplayData} from \"../../../types/livedata/ChartDisplayData\";\r\nimport {getBaseChartLegendData, getNutrientChartData, getTotalChartData} from \"../../../service/chartdata/BaseChartDataService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {GA_ACTION_DATAPANEL_BASEDATA_CONFIG, GA_CATEGORY_DATAPANEL} from \"../../../config/GA_Events\";\r\n\r\nexport default function BaseDataChart(props: BaseDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.baseChartConfig\r\n            : initialChartConfigData.baseChartConfig\r\n\r\n    const showDetailsProp = chartConfig.showDetails !== undefined\r\n        ? chartConfig.showDetails\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.baseChartConfig.showDetails\r\n            : initialChartConfigData.baseChartConfig.showDetails\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [showDetails, setShowDetails] = useState<boolean>(showDetailsProp)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse, TAB_BASE_DATA))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setShowDetails(showDetailsProp)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse, TAB_BASE_DATA))\r\n        updateChartConfig()\r\n    }, [chartType, showDetails, showLegend, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData\r\n            if (chartType !== currentConfig.baseChartConfig.chartType\r\n                || showDetails !== currentConfig.baseChartConfig.showDetails\r\n                || showLegend !== currentConfig.baseChartConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...currentConfig,\r\n                    baseChartConfig: {\r\n                        chartType: chartType,\r\n                        showDetails: showDetails,\r\n                        showLegend: showLegend\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const createTotalChartData = () => {\r\n        const category = props.selectedFoodItem.foodClass?.category\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const chartDisplayData: ChartDisplayData = getTotalChartData(nutrientData, lang, category)\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_chart_totalComposition[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n    const createNutrientChartData = () => {\r\n        const category = props.selectedFoodItem.foodClass?.category\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const chartDisplayData: ChartDisplayData = getNutrientChartData(nutrientData, lang, showDetails, category)\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_chart_nutrientComposition[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_BASEDATA_CONFIG, GA_CATEGORY_DATAPANEL, value, eventValue)\r\n        setChartType(value)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const handleLegendCheckboxClick = () => {\r\n        setShowLegend(!showLegend)\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        const label = \"legend: \" + !showLegend\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_BASEDATA_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const handleDetailsCheckboxClick = () => {\r\n        setShowDetails(!showDetails)\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        const label = \"details: \" + !showDetails\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_BASEDATA_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        updateChartConfig()\r\n    }\r\n\r\n    const legendAllowed = showLegend && chartType === CHART_TYPE_PIE\r\n\r\n    const getOptions = (title) => {\r\n        return chartType === CHART_TYPE_BAR ? getBarChartOptions(title, \"%\") : getPieChartOptions(title, \"%\")\r\n    }\r\n\r\n\r\n    const renderSubChart = (title: string, chartData: any) => {\r\n        if (!chartData) {\r\n            return <div/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie\r\n                    data={chartData}\r\n                    key={'chart ' + chartHeight}\r\n                    height={chartHeight}\r\n                    width={ChartConfig.basedata_piechart_width}\r\n                    options={getOptions(title)}/>\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar\r\n                    data={chartData}\r\n                    key={'chart ' + chartHeight}\r\n                    height={chartHeight}\r\n                    width={ChartConfig.basedata_barchart_width}\r\n                    options={getOptions(title)}/>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const totalChartData = createTotalChartData();\r\n    const nutrientChartData = createNutrientChartData();\r\n\r\n    const totalChartDataTitle = applicationStrings.label_chart_totalComposition[lang]\r\n    const nutrientChartDataTitle = applicationStrings.label_chart_nutrientComposition[lang]\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n    const justifyContent = props.directCompareUse ? \"center\" : \"left\"\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"d-flex text-align-center\" style={{justifyContent: justifyContent}}>\r\n                <div className=\"d-inline-block\">\r\n                    <div className=\"row\" style={{height: containerHeight}}\r\n                         key={\"base chart container \" + containerHeight}>\r\n                        <div className=\"col-6\">\r\n                            <div>{renderSubChart(totalChartDataTitle, totalChartData)}</div>\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                            <div>{renderSubChart(nutrientChartDataTitle, nutrientChartData)}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {legendAllowed &&\r\n                <div className=\"d-inline-block float-right\">\r\n                    <CustomLegend legendData={getBaseChartLegendData(lang, showDetails, props.selectedFoodItem.foodClass?.category)}/>\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareUse &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           showDetails={showDetails}\r\n                                           detailsCheckboxAvailable={true}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckboxClick}\r\n                                           handleDetailsCheckboxClick={handleDetailsCheckboxClick}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","export const PAL_CATEGORY_1 = 1.2;\r\nexport const PAL_CATEGORY_2 = 1.4;\r\nexport const PAL_CATEGORY_3 = 1.6;\r\nexport const PAL_CATEGORY_4 = 1.8;\r\nexport const PAL_CATEGORY_5 = 2.1;\r\nexport const PAL_CATEGORY_6 = 2.4;\r\nexport const PAL_CATEGORY_7 = 2.8;","import {SEX_MALE} from '../../config/Constants';\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as EnergyConstants from '../../config/EnergyConstants'\r\nimport {PalCategory} from \"../../types/livedata/PalCategory\";\r\n\r\n\r\n/**\r\n * Creates a list of PAL categories with name and value for the user settings form.\r\n */\r\nexport function getPalCategories(language: string): Array<PalCategory> {\r\n    const palCategories = [\r\n        {label: createPalCategoryName(language, 1), value: EnergyConstants.PAL_CATEGORY_1},\r\n        {label: createPalCategoryName(language, 2), value: EnergyConstants.PAL_CATEGORY_2},\r\n        {label: createPalCategoryName(language, 3), value: EnergyConstants.PAL_CATEGORY_3},\r\n        {label: createPalCategoryName(language, 4), value: EnergyConstants.PAL_CATEGORY_4},\r\n        {label: createPalCategoryName(language, 5), value: EnergyConstants.PAL_CATEGORY_5},\r\n        {label: createPalCategoryName(language, 6), value: EnergyConstants.PAL_CATEGORY_6},\r\n        {label: createPalCategoryName(language, 7), value: EnergyConstants.PAL_CATEGORY_7},\r\n    ];\r\n\r\n    return palCategories;\r\n}\r\n\r\n/**\r\n * Returns the PAL category number of a PAL value.\r\n *\r\n * value: The PAL value, e.g. 1.4 or 1.6.\r\n */\r\nexport function getPalCategory(value: number): number {\r\n    switch(value) {\r\n        case EnergyConstants.PAL_CATEGORY_1:\r\n            return 1\r\n        case EnergyConstants.PAL_CATEGORY_2:\r\n            return 2\r\n        case EnergyConstants.PAL_CATEGORY_3:\r\n            return 3\r\n        case EnergyConstants.PAL_CATEGORY_4:\r\n            return 4\r\n        case EnergyConstants.PAL_CATEGORY_5:\r\n            return 5\r\n        case EnergyConstants.PAL_CATEGORY_6:\r\n            return 6\r\n        case EnergyConstants.PAL_CATEGORY_7:\r\n            return 7\r\n        default:\r\n            return 1\r\n    }\r\n}\r\n\r\n\r\nexport function getPalValue(palCategory: number): number {\r\n\tswitch(palCategory) {\r\n        case 1:\r\n            return EnergyConstants.PAL_CATEGORY_1\r\n        case 2:\r\n            return EnergyConstants.PAL_CATEGORY_2\r\n        case 3:\r\n            return EnergyConstants.PAL_CATEGORY_3\r\n        case 4:\r\n            return EnergyConstants.PAL_CATEGORY_4\r\n        case 5:\r\n            return EnergyConstants.PAL_CATEGORY_5\r\n        case 6:\r\n            return EnergyConstants.PAL_CATEGORY_6\r\n        case 7:\r\n            return EnergyConstants.PAL_CATEGORY_7\r\n        default:\r\n            return EnergyConstants.PAL_CATEGORY_1\r\n    }\r\n}\r\n\r\n\r\nfunction createPalCategoryName(language, category): string {\r\n    const languageLabel = `palcat_name_${category}`;\r\n    const name = applicationStrings[languageLabel][language]\r\n\r\n    const energyLabel = `PAL_CATEGORY_${category}`;\r\n    const value = EnergyConstants[energyLabel];\r\n    return `${name} (${value})`;\r\n}\r\n\r\n\r\n/**\r\n * Calculates the Basal Metabolic Rate (BMR) of a person.\r\n */\r\nexport function calculateBMR(age: number, size: number, weight: number, sex: string): number {\r\n    if(sex === SEX_MALE) {\r\n        const bmr = 3.4 * weight + 15.3 * size - 6.8 * age - 961;\r\n        return Math.round(bmr);\r\n    } else {\r\n        const bmr = 2.4 * weight + 9.0 * size - 4.7 * age - 65;\r\n        return Math.round(bmr);\r\n    }\r\n}\r\n\r\n/**\r\n * Calculates the total energy consumption of a person in one day.\r\n *\r\n * bmr: The bmr value.\r\n * palValue: The pal value\r\n * leisureSports: Specifies whether leisure sports is performed or not (+0.3 PAL).\r\n */\r\nexport function calculateTotalEnergyConsumption(bmr: number, palValue: number, leisureSports: boolean): number {\r\n    if(leisureSports) {\r\n        palValue += 0.3;\r\n    }\r\n\r\n    return bmr * palValue;\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {Bar, Chart} from \"react-chartjs-2\";\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {calculateBMR, calculateTotalEnergyConsumption} from \"../../../service/calculation/EnergyService\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {default_chart_height} from \"../../../config/ChartConfig\";\r\nimport annotationPlugin from 'chartjs-plugin-annotation'\r\nimport {ChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {isMobileDevice, useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\n\r\nexport default function EnergyDataChart(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const nutrientData = getNutrientData(props.selectedFoodItem);\r\n    const energy100g = nutrientData.baseData.energy;\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n    }, [chartHeight])\r\n\r\n    if (!applicationContext || !energy100g) {\r\n        return <div>No data.</div>\r\n    }\r\n\r\n    const createEnergyLevelChart = () => {\r\n        const averagePortion = props.selectedFoodItem.portion.amount\r\n        const energyPortion = Math.round(energy100g / 100 * averagePortion);\r\n\r\n        return {\r\n            labels: [\"100 g\", \"Portion\"],\r\n            datasets: [{\r\n                data: [energy100g,\r\n                    energyPortion\r\n                ],\r\n                backgroundColor: [\r\n                    ChartConfig.color_yellow,\r\n                    ChartConfig.color_red,\r\n                ],\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n\r\n        }\r\n    }\r\n\r\n\r\n    const renderUserDataInfoPage = () => {\r\n        const showInfotext = !(isMobileDevice() && props.directCompareUse)\r\n\r\n        return (\r\n            <div style={{paddingLeft: \"50px\", paddingTop: \"20px\"}}>\r\n                {!isMobileDevice()\r\n                    ? <h5><b>{`${energy100g}`} kcal / 100 g</b></h5>\r\n                    : <h6><b>{`${energy100g}`} kcal / 100 g</b></h6>\r\n                }\r\n\r\n                {showInfotext &&\r\n                <div style={{paddingTop: \"30px\"}}>\r\n                    {applicationContext.userData.initialValues ?\r\n                        (<div>\r\n                            <p>{applicationStrings.text_setUserdata_p1[lang]}</p>\r\n                            <p>{applicationStrings.text_setUserdata_p2[lang]}</p>\r\n                        </div>)\r\n                        :\r\n                        <p>{applicationStrings.text_setUserdata_p3[lang]}</p>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const getOptions = () => {\r\n        const {age, size, weight, sex, palValue, leisureSports} = applicationContext.userData\r\n        const bmr = calculateBMR(age, size, weight, sex);\r\n        const totalEnergy = calculateTotalEnergyConsumption(bmr, palValue, leisureSports);\r\n\r\n        if (props.directCompareUse) {\r\n\r\n        }\r\n\r\n        const annotation1 = {\r\n            drawTime: 'afterDatasetsDraw',\r\n            type: 'line',\r\n            mode: 'horizontal',\r\n            scaleID: 'y-axis-0',\r\n            yMin: bmr,\r\n            yMax: bmr,\r\n            borderColor: ChartConfig.color_line_red,\r\n            borderWidth: 4,\r\n            label: {\r\n                enabled: true,\r\n                content: applicationStrings.label_chart_bmr[lang]\r\n            },\r\n        }\r\n\r\n        const annotation2 =\r\n            {\r\n                drawTime: 'afterDatasetsDraw',\r\n                type: 'line',\r\n                mode: 'horizontal',\r\n                scaleID: 'y-axis-0',\r\n                yMin: totalEnergy,\r\n                yMax: totalEnergy,\r\n                borderColor: ChartConfig.color_line_blue,\r\n                borderWidth: 4,\r\n                label: {\r\n                    enabled: true,\r\n                    content: applicationStrings.label_chart_energyExpenditure[lang]\r\n                }\r\n            }\r\n\r\n        const annotation = {\r\n            annotations: {\r\n                line1: annotation1,\r\n                line2: !(props.directCompareUse && isMobileDevice()) ? annotation2 : undefined,\r\n            }\r\n        }\r\n\r\n        let options: any = getBarChartOptions(applicationStrings.label_charttype_energy[languageContext.language], \"kCal\");\r\n        options = {\r\n            ...options, plugins: {\r\n                ...options.plugins,\r\n                annotation: annotation\r\n            }\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    const data = createEnergyLevelChart();\r\n    if (!data) {\r\n        return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n    }\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row \" style={{height: containerHeight}} key={\"energy container \" + containerHeight}>\r\n                <div className=\"col-6\">\r\n                    <div>\r\n                        <Bar\r\n                            data={data}\r\n                            key={'chart ' + chartHeight}\r\n                            height={chartHeight}\r\n                            options={getOptions()}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {renderUserDataInfoPage()}\r\n                </div>\r\n            </div>\r\n            <div style={{height: \"64px\"}}></div>\r\n        </div>\r\n    )\r\n\r\n}","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {AMOUNT_PORTION, GRAM} from \"../../config/Constants\";\r\nimport {BarChartConfigurationProps} from \"../../types/livedata/ChartPropsData\";\r\n\r\nexport function BarChartConfigurationForm(props: BarChartConfigurationProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const label_portion = props.selectedFoodItem\r\n        ?`${applicationStrings.label_portion[lang]} (${props.selectedFoodItem.portion.amount} g)`\r\n        : applicationStrings.label_portion_selected[lang]\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <form className=\"form-inline form-group\">\r\n                    <Form.Label className={\"form-elements\"}>\r\n                        <b>{applicationStrings.label_reference[lang]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check className=\"form-radiobutton mr-4\"\r\n                                type=\"radio\"\r\n                                inline={true}\r\n                                label={\"100g\"}\r\n                                value={GRAM}\r\n                                checked={(props.portionType === GRAM)}\r\n                                onChange={props.handleRadioButtonClick}\r\n                    />\r\n                    <Form.Check className=\"form-radiobutton form-horizontal-separation\"\r\n                                type=\"radio\"\r\n                                inline={true}\r\n                                label={label_portion}\r\n                                value={AMOUNT_PORTION}\r\n                                checked={props.portionType === AMOUNT_PORTION}\r\n                                onChange={props.handleRadioButtonClick}\r\n                    />\r\n                    <Form.Check className=\"form-radiobutton\"\r\n                                inline={true}\r\n                                label={applicationStrings.checkbox_expand100g[lang]}\r\n                                checked={props.expand100}\r\n                                onChange={props.handleExpandCheckboxClick}>\r\n                    </Form.Check>\r\n                    {props.handleSynchronize !== undefined && props.synchronize !== undefined &&\r\n                    < Form.Check className=\"form-radiobutton\"\r\n                        inline={true}\r\n                        label={applicationStrings.checkbox_synchronize[lang]}\r\n                        checked={props.synchronize}\r\n                        onChange={props.handleSynchronize}>\r\n                        </Form.Check>\r\n                    }\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import * as Constants from '../../config/Constants';\r\nimport DietaryRequirement, {\r\n    RequirementAgeGroupData,\r\n    RequirementData\r\n} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport {SEX_MALE} from \"../../config/Constants\";\r\n\r\n/*\r\n * Determines the daily requirements of a vitamin or mineral for a specific user.\r\n *\r\n * dailyRequirementObject: A vitamin or mineral requirement object (e.g. for Vitamin C or Iron).\r\n * userData: The user data object containing the user data.\r\n */\r\nexport function determineDailyRequirement(dailyRequirementObject: RequirementData, userData: UserData): number {\r\n    let ageGroupRequirements: RequirementAgeGroupData\r\n\r\n    if (userData.age >= 65) {\r\n        ageGroupRequirements = dailyRequirementObject.senior;\r\n    } else if (userData.age >= 51) {\r\n        ageGroupRequirements = dailyRequirementObject.preSenior;\r\n    } else if (userData.age >= 26) {\r\n        ageGroupRequirements = dailyRequirementObject.midLifeAdult;\r\n    } else if (userData.age >= 19) {\r\n        ageGroupRequirements = dailyRequirementObject.youngAdult;\r\n    } else if (userData.age >= 15) {\r\n        ageGroupRequirements = dailyRequirementObject.youth;\r\n    } else {\r\n        ageGroupRequirements = dailyRequirementObject.youth;   // Default case (should not occur!)\r\n    }\r\n\r\n    let value: number\r\n    if (userData.sex === SEX_MALE) {\r\n        value = ageGroupRequirements.male;\r\n    } else {\r\n        if (userData.pregnant) {\r\n            value = ageGroupRequirements.femalePregnant ? ageGroupRequirements.femalePregnant : ageGroupRequirements.female;\r\n        } else if (userData.breastFeeding) {\r\n            value = ageGroupRequirements.femaleBreastFeeding ? ageGroupRequirements.femaleBreastFeeding : ageGroupRequirements.female;\r\n        } else {\r\n            value = ageGroupRequirements.female;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/*\r\n * Determines the ratio (percentage) of vitamins/minerals in food compared to the daily requirements of the user.\r\n * Example: The daily requirements of Vitamin C is 120 mg for the user. The food contains 24 mg C. The ratio is 0.2 (20 %).\r\n *\r\n * dailyRequirementObject: A vitamin or mineral requirement object (e.g. for Vitamin C or Iron).\r\n * userData: The user data object containing the user data.\r\n * portionSize: The portion size in gram (100 = default value, i.e., 100 gram).\r\n * amountInFood: The amount of the vitamin or mineral in the food (which is always 100 gram).\r\n */\r\nexport function determineFoodRequirementRatio(dailyRequirementObject: RequirementData, amountInFood: number, portionSize: number, userData: UserData): number {\r\n    const dailyRequirement = determineDailyRequirement(dailyRequirementObject, userData);\r\n    if (portionSize === 100) {\r\n        return Math.round(amountInFood / dailyRequirement * 1000) / 10;\r\n    } else {   // Calculate ration for a special amount (portion):\r\n        return Math.round(amountInFood / dailyRequirement * (portionSize * 10)) / 10;\r\n    }\r\n}\r\n\r\n\r\n/*\r\n * Determines the ratio (percentage) of proteins in food compared to the daily requirements of the user.\r\n * Example: The daily requirements of Lysine is 30 mg per kg. The user weights 80 kg. His dietary requirement\r\n * is thus 30 * 80 = 2400 mg per day. The food contains 240 mg C. The ratio is 0.1 (10 %).\r\n *\r\n * dailyRequirementObject: A protein requirement object for a specific protein (e.g. for Lycin).\r\n * userData: The user data object containing the user data.\r\n * portionSize: The portion size in gram (100 = default value, i.e., 100 gram).\r\n * amountInFood: The amount of the vitamin or mineral in the food (which is always 100 gram).\r\n */\r\nexport function determineProteinRequirementRatio(requirement: number, amountInFood: number, portionSize: number, userData: UserData) {\r\n    const dailyRequirement = (requirement * userData.weight) / 1000;\r\n\r\n    if (portionSize === 100) {\r\n        return Math.round(amountInFood / dailyRequirement * 1000) / 10;\r\n    } else {   // Calculate ration for a special amount (portion):\r\n        return Math.round(amountInFood / dailyRequirement * (portionSize * 10)) / 10;\r\n    }\r\n}\r\n\r\n\r\nexport function convertAbsoluteValueToDailyRequirement(dailyRequirements: DietaryRequirement, item: string, amount: number, userData: UserData) {\r\n    let dailyRequirementObject\r\n\r\n    if (item === Constants.DATA_VITAMINS_A) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.a;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B1) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b1;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B2) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b2;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B3) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b3;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B5) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b5;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B6) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b6;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B9) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b9;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_B12) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.b12;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_C) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.c;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_D) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.d;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_E) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.e;\r\n    }\r\n\r\n    if (item === Constants.DATA_VITAMINS_K) {\r\n        dailyRequirementObject = dailyRequirements.vitaminRequirementData.k;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_CALCIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.calcium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_COPPER) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.copper;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_IRON) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.iron;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_MAGNESIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.magnesium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_MANGANESE) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.manganese;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_PHOSPHORUS) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.phosphorus;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_POTASSIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.potassium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_SELENIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.selenium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_SODIUM) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.sodium;\r\n    }\r\n\r\n    if (item === Constants.DATA_MINERAL_ZINC) {\r\n        dailyRequirementObject = dailyRequirements.mineralRequirementData.zinc;\r\n    }\r\n\r\n    if (!dailyRequirementObject) {\r\n        return 0\r\n    }\r\n\r\n    const dailyRequirement = determineDailyRequirement(dailyRequirementObject, userData);\r\n    return Math.round(amount / dailyRequirement * 1000) / 10;\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {CHART_MINERALS, CHART_VITAMINS, GRAM} from \"../../../config/Constants\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\"\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../../charthelper/BarChartConfigurationForm\";\r\nimport {MineralVitaminChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {getMineralsChartData, getVitaminChartData} from \"../../../service/chartdata/VitaminsMineralsDataService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_MINERALS_CONFIG,\r\n    GA_ACTION_DATAPANEL_VITAMINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../../config/GA_Events\";\r\n\r\n\r\nexport default function MineralVitaminChart(props: MineralVitaminChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfigVitamins = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.vitaminChartConfig\r\n            : initialChartConfigData.vitaminChartConfig\r\n\r\n    const chartConfigMinerals = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.mineralChartConfig\r\n            : initialChartConfigData.mineralChartConfig\r\n\r\n    const [portionType_vitamins, setPortionType_vitamins] = useState<string>(chartConfigVitamins.portionType)\r\n    const [expand100_vitamins, setExpand100_vitamins] = useState<boolean>(chartConfigVitamins.expand100)\r\n    const [portionType_minerals, setPortionType_minerals] = useState<string>(chartConfigMinerals.portionType)\r\n    const [expand100_minerals, setExpand100_minerals] = useState<boolean>(chartConfigMinerals.expand100)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n    const [showBookModal, setShowBookModal] = useState<boolean>(false)\r\n    const [selectedColumnLabel, setSelectedColumnLabel] = useState<string | undefined>(undefined)\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setPortionType_vitamins(chartConfigVitamins.portionType)\r\n            setExpand100_vitamins(chartConfigVitamins.expand100)\r\n            setPortionType_minerals(chartConfigMinerals.portionType)\r\n            setExpand100_minerals(chartConfigMinerals.expand100)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [portionType_vitamins, portionType_minerals, expand100_vitamins, expand100_minerals, chartHeight, props])\r\n\r\n\r\n    if (!applicationContext || applicationContext.foodDataCorpus.dietaryRequirements === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const anyValueChanged = (): boolean => {\r\n        const config = props.selectedSubChart === CHART_VITAMINS\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.vitaminChartConfig\r\n            : applicationContext.applicationData.foodDataPanel.chartConfigData.mineralChartConfig\r\n\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            return portionType_vitamins !== config.portionType || expand100_vitamins !== config.expand100\r\n        } else {\r\n            return portionType_minerals !== config.portionType || expand100_minerals !== config.expand100\r\n        }\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (!props.directCompareConfig && anyValueChanged()) {\r\n            if (applicationContext) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    vitaminChartConfig: {\r\n                        portionType: portionType_vitamins,\r\n                        expand100: expand100_vitamins\r\n                    },\r\n                    mineralChartConfig: {\r\n                        portionType: portionType_minerals,\r\n                        expand100: expand100_minerals\r\n                    }\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const createVitaminChartData = () => {\r\n        const vitaminData = props.precalculatedData !== undefined ? props.precalculatedData : getNutrientData(props.selectedFoodItem).vitaminData;\r\n\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.vitaminRequirementData;\r\n        const userData = applicationContext.userData\r\n        const portionAmount = portionType_vitamins === GRAM ? 100 : props.selectedFoodItem.portion.amount\r\n\r\n        if (!vitaminData || !requirementData) {\r\n            return null\r\n        }\r\n\r\n        const chartDisplayData = getVitaminChartData(vitaminData, requirementData, userData, portionAmount)\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_chart_green_3\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_vitamins[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n    const createMineralChartData = () => {\r\n        const mineralData = props.precalculatedData !== undefined ? props.precalculatedData : getNutrientData(props.selectedFoodItem).mineralData;\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.mineralRequirementData;\r\n        const userData = applicationContext.userData\r\n        const portionAmount = portionType_minerals === GRAM ? 100 : props.selectedFoodItem.portion.amount\r\n\r\n        if (!mineralData || !requirementData) {\r\n            return null\r\n        }\r\n\r\n        const chartDisplayData = getMineralsChartData(mineralData, requirementData, userData, portionAmount, lang)\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_purple\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_minerals[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value=event.target.value\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_VITAMINS_CONFIG, GA_CATEGORY_DATAPANEL, value, 1)\r\n            setPortionType_vitamins(value)\r\n        } else if (props.selectedSubChart === CHART_MINERALS) {\r\n            callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_MINERALS_CONFIG, GA_CATEGORY_DATAPANEL, value, 1)\r\n            setPortionType_minerals(value)\r\n        }\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        const label = props.selectedSubChart === CHART_VITAMINS\r\n            ? \"expand100: \" + !expand100_vitamins\r\n            : \"expand100: \" + !expand100_minerals\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_VITAMINS_CONFIG, GA_CATEGORY_DATAPANEL, label, 1)\r\n            setExpand100_vitamins(!expand100_vitamins)\r\n        } else if (props.selectedSubChart === CHART_MINERALS) {\r\n            callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_MINERALS_CONFIG, GA_CATEGORY_DATAPANEL, label, 1)\r\n            setExpand100_minerals(!expand100_minerals)\r\n        }\r\n    }\r\n\r\n    const openVitaminMineralBook = (selectedColumn: string) => {\r\n        setSelectedColumnLabel(selectedColumn)\r\n        setShowBookModal(true)\r\n    }\r\n\r\n    const getOptions = (title, maxValue, data) => {\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals;\r\n        const overallMaxValue = props.directCompareConfig && props.directCompareConfig.maxValue\r\n            ? props.directCompareConfig.maxValue\r\n            : maxValue\r\n\r\n        let maxYValue\r\n        if (!props.directCompareConfig) {\r\n            if (expand100 && overallMaxValue < 100) {\r\n                maxYValue = 100\r\n            }\r\n        } else {\r\n            if (props.directCompareConfig.maxValue) {\r\n                maxYValue = props.directCompareConfig.maxValue\r\n            }\r\n            if (expand100) {\r\n                if (maxYValue === undefined) {\r\n                    if (overallMaxValue < 100) {\r\n                        maxYValue = 100\r\n                    }\r\n                } else if (maxYValue < 100) {\r\n                    maxYValue = 100\r\n                }\r\n            }\r\n        }\r\n\r\n        const getScientificVitaminName = (vitamin: string): string | null => {\r\n            const labelName = \"label_nutrient_vit_scientific_\" + vitamin.toLowerCase()\r\n            if(applicationStrings[labelName]) {\r\n                return applicationStrings[labelName][lang]\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n\r\n        let barChartOptions = getBarChartOptions(title, \"%\", maxYValue);\r\n\r\n        const handleChartClick = (c, i) => {\r\n            if(i && i[0]) {\r\n                const clickedColumnIndex = i[0].index;\r\n                const columnLabel = data.labels[clickedColumnIndex]\r\n                openVitaminMineralBook(columnLabel)\r\n            }\r\n        }\r\n\r\n        if (props.selectedSubChart === CHART_VITAMINS) {\r\n            barChartOptions = {\r\n                ...barChartOptions, plugins: {\r\n                    ...barChartOptions.plugins, tooltip: {\r\n                        ...barChartOptions.plugins.tooltip, callbacks: {\r\n                            ...barChartOptions.plugins.tooltip.callbacks,\r\n                            title: function (context) {\r\n                                if (context && context.length > 0) {\r\n                                    const scientificName = getScientificVitaminName(context[0].label)\r\n                                    let title = `Vitamin ${context[0].label}`\r\n                                    if(scientificName) {\r\n                                        title = `${title}  (${scientificName})`\r\n                                    }\r\n                                    return title\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                onClick: handleChartClick\r\n            }\r\n        }\r\n\r\n        return barChartOptions\r\n    }\r\n\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const portionType = props.selectedSubChart === CHART_VITAMINS ? portionType_vitamins : portionType_minerals;\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals;\r\n\r\n        const barChartProps = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps} />\r\n    }\r\n\r\n\r\n    const data = props.selectedSubChart === CHART_VITAMINS ? createVitaminChartData() : createMineralChartData();\r\n    if (!data) {\r\n        return <div/>\r\n    }\r\n\r\n    const maxValue = (data && data.datasets && data.datasets.length > 0) ? Math.max(...data.datasets[0].data) : 0;\r\n\r\n    const title = props.selectedSubChart === CHART_VITAMINS ? applicationStrings.label_charttype_vitamins[lang] :\r\n        applicationStrings.label_charttype_minerals[lang];\r\n\r\n    const options = getOptions(title, maxValue, data);\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"base chart container \" + containerHeight}>\r\n                <div className={\"col-12\"}>\r\n                    <Bar\r\n                        data={data}\r\n                        key={'chart ' + chartHeight}\r\n                        height={chartHeight}\r\n                        options={options}\r\n                    />\r\n                </div>\r\n            </div>\r\n            {props.directCompareUse !== true &&\r\n            <div className=\"chart-control-button-bar\">\r\n                {renderChartConfigurationForm()}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {determineFoodRequirementRatio} from \"../calculation/DietaryRequirementService\";\r\nimport {MineralData, VitaminData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {MineralRequirementData, VitaminRequirementData} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport {ChartDisplayData} from \"../../types/livedata/ChartDisplayData\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {calculateVitaminAEquivalent} from \"../calculation/CarotenoidCalculationService\";\r\n\r\nexport function getVitaminChartData(vitaminData: VitaminData, requirementData: VitaminRequirementData, userData: UserData,\r\n                                    portionAmount: number): ChartDisplayData {\r\n    const labels: Array<string> = [];\r\n    const values: Array<number> = [];\r\n\r\n    if (vitaminData.a !== null) {\r\n        const amountA = vitaminData.a + calculateVitaminAEquivalent(vitaminData.carotenoidData)\r\n        labels.push(\"A\");\r\n        values.push(determineFoodRequirementRatio(requirementData.a, amountA, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b1 !== null) {\r\n        labels.push(\"B1\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b1, vitaminData.b1, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b2 !== null) {\r\n        labels.push(\"B2\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b2, vitaminData.b2, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b3 !== null) {\r\n        labels.push(\"B3\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b3, vitaminData.b3, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b5 !== null) {\r\n        labels.push(\"B5\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b5, vitaminData.b5, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b6 !== null) {\r\n        labels.push(\"B6\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b6, vitaminData.b6, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b9 !== null) {\r\n        labels.push(\"B9\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b9, vitaminData.b9, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.b12 !== null) {\r\n        labels.push(\"B12\");\r\n        values.push(determineFoodRequirementRatio(requirementData.b12, vitaminData.b12, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.c !== null) {\r\n        labels.push(\"C\");\r\n        values.push(determineFoodRequirementRatio(requirementData.c, vitaminData.c, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.d !== null) {\r\n        labels.push(\"D\");\r\n        values.push(determineFoodRequirementRatio(requirementData.d, vitaminData.d, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.e !== null) {\r\n        labels.push(\"E\");\r\n        values.push(determineFoodRequirementRatio(requirementData.e, vitaminData.e, portionAmount, userData));\r\n    }\r\n\r\n    if (vitaminData.k !== null) {\r\n        labels.push(\"K\");\r\n        values.push(determineFoodRequirementRatio(requirementData.k, vitaminData.k, portionAmount, userData));\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values\r\n    }\r\n}\r\n\r\n\r\nexport function getMineralsChartData(mineralData: MineralData, requirementData: MineralRequirementData, userData: UserData,\r\n                                     portionAmount: number, language: string): ChartDisplayData {\r\n    const labels: Array<string> = [];\r\n    const values: Array<number> = [];\r\n\r\n    if (mineralData.calcium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_calcium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.calcium, mineralData.calcium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.iron !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_iron[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.iron, mineralData.iron, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.magnesium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_magnesium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.magnesium, mineralData.magnesium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.phosphorus !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_phosphorus[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.phosphorus, mineralData.phosphorus, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.potassium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_potassimum[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.potassium, mineralData.potassium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.sodium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_sodium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.sodium, mineralData.sodium, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.zinc !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_zinc[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.zinc, mineralData.zinc, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.copper !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_copper[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.copper, mineralData.copper, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.manganese !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_manganese[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.manganese, mineralData.manganese, portionAmount, userData));\r\n    }\r\n\r\n    if (mineralData.selenium !== null) {\r\n        labels.push(applicationStrings.label_nutrient_min_selenium[language]);\r\n        values.push(determineFoodRequirementRatio(requirementData.selenium, mineralData.selenium, portionAmount, userData));\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values\r\n    }\r\n}","import {CarotenoidData} from \"../../types/nutrientdata/FoodItem\";\r\n\r\nexport function getTotalAmountOfCarotenoids(carotenoidData: CarotenoidData): number | null {\r\n    if(carotenoidData === null) {\r\n        return null\r\n    }\r\n\r\n    let amount = 0;\r\n\r\n    if(carotenoidData.caroteneAlpha) {\r\n        amount += carotenoidData.caroteneAlpha\r\n    }\r\n    if(carotenoidData.caroteneBeta) {\r\n        amount += carotenoidData.caroteneBeta\r\n    }\r\n    if(carotenoidData.cryptoxanthin) {\r\n        amount += carotenoidData.cryptoxanthin\r\n    }\r\n    if(carotenoidData.lutein) {\r\n        amount += carotenoidData.lutein\r\n    }\r\n    if(carotenoidData.lycopene) {\r\n        amount += carotenoidData.lycopene\r\n    }\r\n\r\n    return amount\r\n}\r\n\r\n/**\r\n * Calculates the total vitamin A equivalent out of the different carotenoid values\r\n * @param carotenoidData\r\n */\r\nexport function calculateVitaminAEquivalent(carotenoidData: CarotenoidData | null): number {\r\n    if(carotenoidData === null) {\r\n        return 0\r\n    }\r\n\r\n    let amount = 0;\r\n\r\n    const factorBetaCarotene = 0.1667\r\n    const factorOtherCarotenoids = 0.0833\r\n\r\n    if(carotenoidData.caroteneAlpha) {\r\n        amount += (carotenoidData.caroteneAlpha * factorOtherCarotenoids)\r\n    }\r\n    if(carotenoidData.caroteneBeta) {\r\n        amount += (carotenoidData.caroteneBeta * factorBetaCarotene)\r\n    }\r\n    if(carotenoidData.cryptoxanthin) {\r\n        amount += (carotenoidData.cryptoxanthin * factorOtherCarotenoids)\r\n    }\r\n    if(carotenoidData.lutein) {\r\n        amount += (carotenoidData.lutein * factorOtherCarotenoids)\r\n    }\r\n    if(carotenoidData.lycopene) {\r\n        amount += (carotenoidData.lycopene * factorOtherCarotenoids)\r\n    }\r\n\r\n    return amount\r\n}","import {LipidData, OmegaData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {autoRound} from \"../calculation/MathService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as ChartConfig from \"../../config/ChartConfig\";\r\nimport {ChartDisplayData, LegendData} from \"../../types/livedata/ChartDisplayData\";\r\n\r\nexport function getTotalLipidsChartData(lipidsData: LipidData, hideRemainders: boolean, portionAmount: number,\r\n                                           language: string): ChartDisplayData {\r\n    const {saturated, unsaturatedMono, unsaturatedPoly} = lipidsData\r\n\r\n    const valueSaturated = autoRound(saturated!! / portionAmount * 100);\r\n    const valueUnsaturatedMono = autoRound(unsaturatedMono!! / portionAmount * 100);\r\n    const valueUnsaturatedPoly = autoRound(unsaturatedPoly!! / portionAmount * 100);\r\n\r\n    let valueRemainder = portionAmount - (saturated!! + unsaturatedMono!! + unsaturatedPoly!!);\r\n    valueRemainder = autoRound(valueRemainder / portionAmount * 100);\r\n\r\n    if (valueRemainder < 0) {\r\n        valueRemainder = 0\r\n    }\r\n\r\n    const labels: string[] = [applicationStrings.label_nutrient_lipids_saturated_short[language],\r\n        applicationStrings.label_nutrient_lipids_unsaturated_mono_short[language],\r\n        applicationStrings.label_nutrient_lipids_unsaturated_poly_short[language]]\r\n\r\n    const colors: string[] = [\r\n        ChartConfig.color_lipids_saturated,\r\n        ChartConfig.color_lipids_unsaturated_mono,\r\n        ChartConfig.color_lipids_unsaturated_poly]\r\n\r\n    const values: number[] = [valueSaturated,\r\n        valueUnsaturatedMono,\r\n        valueUnsaturatedPoly]\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_nutrient_remainder[language])\r\n        colors.push(ChartConfig.color_lipids_misc)\r\n        values.push(valueRemainder)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getOmegaChartData(omegaData: OmegaData, hideRemainders: boolean, totalAmount: number, lang: string): ChartDisplayData | null {\r\n    if (omegaData === null || omegaData.omega3 === null || omegaData.omega6 === null || omegaData.uncertain === null) {\r\n        return null;\r\n    }\r\n\r\n    const valueOmega3 = autoRound(omegaData.omega3 / totalAmount * 100);\r\n    const valueOmega6 = autoRound(omegaData.omega6 / totalAmount * 100);\r\n    const valueUncertain = autoRound(omegaData.uncertain / totalAmount * 100);\r\n\r\n    const labels: string[] = [applicationStrings.label_nutrient_omega3[lang],\r\n        applicationStrings.label_nutrient_omega6[lang]]\r\n\r\n    const values: number[] = [valueOmega3,\r\n        valueOmega6]\r\n\r\n    const colors: string[] = [\r\n        ChartConfig.color_lipids_omega3,\r\n        ChartConfig.color_lipids_omega6\r\n    ]\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_unknown[lang])\r\n        colors.push(ChartConfig.color_lipids_misc)\r\n        values.push(valueUncertain)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getLipidsBaseChartLegend(language: string): LegendData[] {\r\n    return [\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids_saturated[language],\r\n            color: ChartConfig.color_lipids_saturated,\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids_unsaturated_mono[language],\r\n            color: ChartConfig.color_lipids_unsaturated_mono\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_lipids_unsaturated_poly[language],\r\n            color: ChartConfig.color_lipids_unsaturated_poly,\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_remainder[language],\r\n            color: ChartConfig.color_lipids_misc\r\n        },\r\n    ];\r\n}\r\n\r\nexport function getLipidsOmegaChartLegend(language: string): LegendData[] {\r\n    return [\r\n        {\r\n            item: applicationStrings.label_nutrient_omega3[language],\r\n            color: ChartConfig.color_lipids_omega3,\r\n        },\r\n        {\r\n            item: applicationStrings.label_nutrient_omega6[language],\r\n            color: ChartConfig.color_lipids_omega6\r\n        },\r\n        {\r\n            item: applicationStrings.label_unknown[language],\r\n            color: ChartConfig.color_lipids_misc,\r\n        },\r\n    ];\r\n}","import {useContext, useEffect, useState} from \"react\";\r\n\r\nimport {default_chart_height} from \"../../../config/ChartConfig\"\r\nimport * as Constants from \"../../../config/Constants\"\r\nimport {CHART_TYPE_BAR, CHART_TYPE_PIE, LIPIDS_DATA_BASE} from \"../../../config/Constants\"\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {OmegaData} from \"../../../types/nutrientdata/FoodItem\";\r\nimport {initialChartConfigData, minimalOmegaRatio} from \"../../../config/ApplicationSetting\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {LipidsDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {\r\n    getLipidsBaseChartLegend,\r\n    getLipidsOmegaChartLegend,\r\n    getOmegaChartData,\r\n    getTotalLipidsChartData\r\n} from \"../../../service/chartdata/LipidsChartDataService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_BASEDATA_CONFIG,\r\n    GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_ACTION_DATAPANEL_PROTEINS_CONFIG,\r\n    GA_ACTION_DATAPANEL_VITAMINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../../config/GA_Events\";\r\n\r\nexport default function LipidsDataChart(props: LipidsDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.lipidsChartConfig\r\n            : initialChartConfigData.lipidsChartConfig\r\n\r\n    const initialExpand100 =  props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.expand100\r\n        : chartConfig.expand100\r\n\r\n    const initialHideRemainders =  props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.hideRemainders\r\n        : chartConfig.hideRemainders\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [hideRemainders, setShowHideRemainders] = useState<boolean>(initialHideRemainders ? initialHideRemainders : false)\r\n    const [expand100, setExpand100] = useState<boolean>(initialExpand100 ? initialExpand100 : false)\r\n    const [subChart, setSubChart] = useState<string>(chartConfig.subChart ? chartConfig.subChart : LIPIDS_DATA_BASE)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setSubChart(chartConfig.subChart ? chartConfig.subChart : LIPIDS_DATA_BASE)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [chartType, showLegend, hideRemainders, expand100, subChart, chartHeight, windowSize, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData.lipidsChartConfig\r\n            if (chartType !== currentConfig.chartType\r\n                || hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100\r\n                || subChart !== currentConfig.subChart\r\n                || showLegend !== currentConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    lipidsChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: showLegend,\r\n                        subChart: subChart,\r\n                        hideRemainders: hideRemainders,\r\n                        expand100: expand100\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        } else if(applicationContext) {\r\n            const currentConfig = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n            if (hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100) {\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.expand100 = expand100\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.hideRemainders = hideRemainders\r\n            }\r\n        }\r\n    }\r\n\r\n    const totalLipidsAmount = getNutrientData(props.selectedFoodItem).baseData.lipids;\r\n\r\n    const handleChartSelectionChange = (event: any) => {\r\n        const value = event.target.value\r\n        const eventLabel = props.directCompareUse ? 2 : 1\r\n        if (props.directCompareConfig && props.directCompareConfig.handleSubchartChange) {\r\n            props.directCompareConfig.handleSubchartChange(event)\r\n        } else {\r\n            setSubChart(value)\r\n        }\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, value, eventLabel)\r\n    }\r\n\r\n    const handleExpand100Change = () => {\r\n        const label = \"expand100: \" + !expand100\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleHideRemaindersCheckbox = () => {\r\n        const label = \"hideRemainders: \" + !hideRemainders\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setShowHideRemainders(!hideRemainders)\r\n    }\r\n\r\n    const createTotalChartData = (totalAmount: number): any => {\r\n        const chartDisplayData  = getTotalLipidsChartData(lipidData, hideRemainders, totalAmount, lang)\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const createOmegaChartData = (totalAmount: number, omegaData: OmegaData) => {\r\n        const chartDisplayData = getOmegaChartData(omegaData, hideRemainders, totalAmount, lang)\r\n        if(!chartDisplayData) {\r\n            return null\r\n        }\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, value, eventValue)\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        const label = \"legend: \" + !showLegend\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const lipidData = getNutrientData(props.selectedFoodItem).lipidData;\r\n\r\n    let omegaDataAvailabe = false\r\n    if (lipidData.omegaData && lipidData.omegaData.uncertainRatio && lipidData.omegaData.uncertainRatio <= minimalOmegaRatio) {\r\n        omegaDataAvailabe = true\r\n    }\r\n\r\n    const chartColType = chartType === CHART_TYPE_PIE ? \"col-6\" : \"col-8\";\r\n\r\n    const getOptions = () => {\r\n        let title;\r\n\r\n        if (subChart === Constants.LIPIDS_DATA_BASE) {\r\n            title = applicationStrings.label_charttype_lipids_base_title[lang]\r\n        } else if (subChart === Constants.LIPIDS_DATA_OMEGA) {\r\n            title = applicationStrings.label_charttype_lipids_omega_title[lang];\r\n        }\r\n\r\n        if (chartType === CHART_TYPE_BAR) {\r\n            return expand100 ? getBarChartOptions(title, \"%\", 100) : getBarChartOptions(title, \"%\");\r\n        } else {\r\n            return getPieChartOptions(title, \"%\");\r\n        }\r\n    }\r\n\r\n    const renderChartSelector = () => {\r\n        return (\r\n            <div>\r\n                <Form>\r\n                    <Form.Label>\r\n                        <b>{applicationStrings.label_datatype[languageContext.language]}:</b>\r\n                    </Form.Label>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_charttype_lipids_base[lang]}\r\n                                type=\"radio\"\r\n                                value={Constants.LIPIDS_DATA_BASE}\r\n                                checked={subChart === Constants.LIPIDS_DATA_BASE}\r\n                                onChange={handleChartSelectionChange}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_charttype_lipids_omega[lang]}\r\n                                type=\"radio\"\r\n                                value={Constants.LIPIDS_DATA_OMEGA}\r\n                                checked={subChart === Constants.LIPIDS_DATA_OMEGA}\r\n                                onChange={handleChartSelectionChange}>\r\n                    </Form.Check>\r\n                </Form>\r\n                <hr/>\r\n                <Form>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_expand100g[lang]}\r\n                                type=\"checkbox\"\r\n                                disabled={chartType === Constants.CHART_TYPE_PIE}\r\n                                checked={expand100}\r\n                                onChange={handleExpand100Change}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_chartoption_hideRemainders[lang]}\r\n                                type=\"checkbox\"\r\n                                disabled={subChart === Constants.LIPIDS_DATA_OMEGA}\r\n                                checked={hideRemainders}\r\n                                onChange={handleHideRemaindersCheckbox}>\r\n                    </Form.Check>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderChart = (lipidsType) => {\r\n        const {saturated, unsaturatedMono, unsaturatedPoly, omegaData} = lipidData\r\n\r\n        let data\r\n        if (lipidsType === Constants.LIPIDS_DATA_BASE) {\r\n            if (!saturated || !unsaturatedMono || !unsaturatedPoly) {\r\n                return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n            }\r\n            data = createTotalChartData(totalLipidsAmount);\r\n        } else if (lipidsType === Constants.LIPIDS_DATA_OMEGA) {\r\n            if (omegaData) {\r\n                data = createOmegaChartData(totalLipidsAmount, omegaData)\r\n            }\r\n\r\n            if (!omegaData) {\r\n                return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n            }\r\n        }\r\n\r\n        if (!data) {\r\n            return <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    //const height = props.directCompareUse === true ? direct_compare_chartheight : default_chart_height\r\n    const containerHeight = calculateChartContainerHeight(windowSize, props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"lipids container \" + containerHeight}>\r\n                <div className=\"col-3 text-align-center\">\r\n                    {renderChartSelector()}\r\n                </div>\r\n                <div className={chartColType}>\r\n                    {subChart === Constants.LIPIDS_DATA_BASE &&\r\n                    renderChart(Constants.LIPIDS_DATA_BASE)\r\n                    }\r\n                    {omegaDataAvailabe && subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    renderChart(Constants.LIPIDS_DATA_OMEGA)\r\n                    }\r\n                    {!omegaDataAvailabe && subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    <div style={{height: default_chart_height}}>{applicationStrings.label_noData[lang]}</div>\r\n                    }\r\n                </div>\r\n\r\n                {showLegend && chartType === CHART_TYPE_PIE &&\r\n                <div className=\"col-3\">\r\n                    {subChart === Constants.LIPIDS_DATA_BASE &&\r\n                    <CustomLegend legendData={getLipidsBaseChartLegend(lang)}/>\r\n                    }\r\n                    {subChart === Constants.LIPIDS_DATA_OMEGA &&\r\n                    <CustomLegend legendData={getLipidsOmegaChartLegend(lang)}/>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareConfig &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                <PieChartConfigurationForm key={\"Config Lipids Chart\"}\r\n                                           chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckbox}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {AMOUNT_PORTION} from \"../../../config/Constants\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport {getBarChartOptions} from \"../../../service/ChartConfigurationService\"\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../../charthelper/BarChartConfigurationForm\";\r\nimport {ProteinDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {getProteinChartData} from \"../../../service/chartdata/ProteinChartDataService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_PROTEINS_CONFIG,\r\n    GA_ACTION_DATAPANEL_VITAMINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../../config/GA_Events\";\r\n\r\nexport default function ProteinDataChart(props: ProteinDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.proteinChartConfig\r\n            : initialChartConfigData.proteinChartConfig\r\n\r\n    const [portionType, setPortionType] = useState<string>(chartConfig.portionType)\r\n    const [expand100, setExpand100] = useState<boolean>(chartConfig.expand100)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setExpand100(chartConfig.expand100)\r\n            setPortionType(chartConfig.portionType)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [portionType, expand100, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentSetting = applicationContext.applicationData.foodDataPanel.chartConfigData.proteinChartConfig\r\n            if (expand100 !== currentSetting.expand100 || portionType !== currentSetting.portionType) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    proteinChartConfig: {\r\n                        portionType: portionType,\r\n                        expand100: expand100\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const createProteinChartData = () => {\r\n        const proteinData = getNutrientData(props.selectedFoodItem).proteinData;\r\n        if (!proteinData || !applicationContext) {\r\n            return null;\r\n        }\r\n\r\n        const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.proteinRequirementData;\r\n        if (!requirementData) {\r\n            return null;\r\n        }\r\n\r\n        const userData = applicationContext.userData;\r\n        const portionAmount = portionType === AMOUNT_PORTION ? props.selectedFoodItem.portion.amount : 100;\r\n        const chartDisplayData = getProteinChartData(proteinData, requirementData, userData, portionAmount, lang)\r\n\r\n        const chartColor = props.directCompareConfig && props.directCompareConfig.barChartColor\r\n            ? props.directCompareConfig.barChartColor\r\n            : ChartConfig.color_proteins\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                label: applicationStrings.label_charttype_proteins[lang],\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartColor,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value=event.target.value\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_PROTEINS_CONFIG, GA_CATEGORY_DATAPANEL, value, 1)\r\n        setPortionType(value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        const label = \"expand100: \" + !expand100\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_PROTEINS_CONFIG, GA_CATEGORY_DATAPANEL, label, 1)\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const getOptions = (title, maxValue) => {\r\n        const overallMaxValue = props.directCompareConfig && props.directCompareConfig.maxValue\r\n            ? props.directCompareConfig.maxValue\r\n            : maxValue\r\n\r\n        let maxYValue\r\n        if (!props.directCompareConfig) {\r\n            if (expand100 && overallMaxValue < 100) {\r\n                maxYValue = 100\r\n            }\r\n        } else {\r\n            if (props.directCompareConfig.maxValue) {\r\n                maxYValue = props.directCompareConfig.maxValue\r\n            }\r\n            if (expand100) {\r\n                if (maxYValue === undefined) {\r\n                    if (overallMaxValue < 100) {\r\n                        maxYValue = 100\r\n                    }\r\n                } else if (maxYValue < 100) {\r\n                    maxYValue = 100\r\n                }\r\n            }\r\n        }\r\n\r\n        return getBarChartOptions(title, \"%\", maxYValue);\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const barChartProps = {\r\n            selectedFoodItem: props.selectedFoodItem,\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps} />\r\n    }\r\n\r\n    const data = createProteinChartData();\r\n    if (!data) {\r\n        return <div/>\r\n    }\r\n\r\n    const maxValue = (data && data.datasets && data.datasets.length > 0) ? Math.max(...data.datasets[0].data) : 0;\r\n    const options = getOptions(applicationStrings.label_charttype_proteins[lang], maxValue);\r\n    const dataExists = data.datasets && data.datasets[0].data && data.datasets[0].data.length > 0\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"base chart container \" + containerHeight}>\r\n                <div className=\"col-12\">\r\n                    {dataExists &&\r\n                    <Bar\r\n                        data={data}\r\n                        key={'chart ' + chartHeight}\r\n                        height={chartHeight}\r\n                        options={options}\r\n                    />\r\n                    }\r\n                    {!dataExists &&\r\n                    <p className=\"text-center\" style={{height: ChartConfig.default_chart_height}}>\r\n                        {applicationStrings.label_noData[lang]}\r\n                    </p>\r\n                    }\r\n                </div>\r\n            </div>\r\n            {props.directCompareUse !== true &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                {renderChartConfigurationForm()}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {UserData} from \"../../types/livedata/UserData\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {determineProteinRequirementRatio} from \"../calculation/DietaryRequirementService\";\r\nimport {ProteinData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {ProteinRequirementData} from \"../../types/nutrientdata/DietaryRequirement\";\r\nimport {ChartDisplayData} from \"../../types/livedata/ChartDisplayData\";\r\n\r\nexport function getProteinChartData(proteinData: ProteinData, requirementData: ProteinRequirementData,\r\n                                    userData: UserData, portionAmount: number, lang: string): ChartDisplayData {\r\n    const labels: Array<string> = [];\r\n    const values: Array<number> = [];\r\n\r\n    if (proteinData.histidine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_histidine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.histidine, proteinData.histidine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.isoleucine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_isoleucine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.isoleucine, proteinData.isoleucine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.leucine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_leucine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.leucine, proteinData.leucine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.lysine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_lysine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.lysine, proteinData.lysine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.methionine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_methionine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.methionine, proteinData.methionine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.phenylalanine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_phenylalanine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.phenylalanine, proteinData.phenylalanine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.threonine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_threonine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.threonine, proteinData.threonine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.tryptophan !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_tryptophan[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.tryptophan, proteinData.tryptophan, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.valine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_valine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.valine, proteinData.valine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    if (proteinData.cystine !== null) {\r\n        labels.push(applicationStrings.label_nutrient_proteins_cystine[lang]);\r\n        values.push(determineProteinRequirementRatio(\r\n            requirementData.cystine, proteinData.cystine, portionAmount, userData)\r\n        )\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: values\r\n    }\r\n}","import {autoRound} from \"../calculation/MathService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport * as ChartConfig from \"../../config/ChartConfig\";\r\nimport {NutrientData} from \"../../types/nutrientdata/FoodItem\";\r\nimport {ChartDisplayData, LegendData} from \"../../types/livedata/ChartDisplayData\";\r\n\r\nexport function getCarbBaseChartData(nutrientData: NutrientData, hideRemainders: boolean, totalAmount: number,\r\n                                     language: string): ChartDisplayData | null {\r\n    const totalCarbsAmount = nutrientData.baseData.carbohydrates;\r\n    const dietaryFibers = nutrientData.baseData.dietaryFibers;\r\n    const sugar = nutrientData.carbohydrateData.sugar\r\n\r\n    if (!sugar || !dietaryFibers) {\r\n        return null\r\n    }\r\n\r\n    const valueSugar = autoRound(sugar / totalCarbsAmount * 100);\r\n    const valueDietaryFibers = autoRound(dietaryFibers / totalCarbsAmount * 100);\r\n\r\n    if (totalCarbsAmount === 0) {\r\n        return null;\r\n    }\r\n\r\n    let valueMisc = totalCarbsAmount - (sugar + dietaryFibers);\r\n    valueMisc = autoRound(valueMisc / totalCarbsAmount * 100);\r\n\r\n    if (valueMisc < 0) {\r\n        valueMisc = 0;\r\n    }\r\n\r\n    const labels = [applicationStrings.label_nutrient_sugar[language],\r\n        applicationStrings.label_nutrient_dietaryFibers[language],\r\n    ]\r\n\r\n    const data = [valueSugar,\r\n        valueDietaryFibers]\r\n\r\n    const colors = [\r\n        ChartConfig.color_chart_green_3,\r\n        ChartConfig.color_chart_green_2,\r\n    ]\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_nutrient_remainder[language])\r\n        colors.push(ChartConfig.color_chart_misc)\r\n        data.push(valueMisc)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: data,\r\n        colors: colors\r\n    }\r\n}\r\n\r\nexport function getCarbDetailsChartData(nutrientData: NutrientData, hideRemainders: boolean, totalAmount: number,\r\n                                        language: string): ChartDisplayData | null {\r\n    const {carbohydrateData, baseData} = nutrientData\r\n\r\n    const valueGlucose = carbohydrateData.glucose !== null ? autoRound(carbohydrateData.glucose / totalAmount * 100) : null;\r\n    const valueFructose = carbohydrateData.fructose !== null ? autoRound(carbohydrateData.fructose / totalAmount * 100) : null;\r\n    const valueGalactose = carbohydrateData.galactose !== null ? autoRound(carbohydrateData.galactose / totalAmount * 100) : null;\r\n    const valueSucrose = carbohydrateData.sucrose !== null ? autoRound(carbohydrateData.sucrose / totalAmount * 100) : null;\r\n    const valueLactose = carbohydrateData.lactose !== null ? autoRound(carbohydrateData.lactose / totalAmount * 100) : null;\r\n    const valueMaltose = carbohydrateData.maltose !== null ? autoRound(carbohydrateData.maltose / totalAmount * 100) : null;\r\n    const valueStarch = carbohydrateData.starch !== null ? autoRound(carbohydrateData.starch / totalAmount * 100) : null;\r\n\r\n    const valueDietaryFibers = baseData.dietaryFibers !== null ? autoRound(baseData.dietaryFibers / totalAmount * 100) : null;\r\n\r\n    if (!valueMaltose && !valueSucrose && !valueLactose && !valueGlucose && !valueFructose && !valueGalactose) {\r\n        return null\r\n    }\r\n\r\n    let valueMisc = 100\r\n    const labels: string[] = []\r\n    const data: number[] = []\r\n    const colors: string[] = []\r\n\r\n    if (valueGlucose) {\r\n        valueMisc -= valueGlucose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_glucose[language])\r\n        data.push(valueGlucose)\r\n        colors.push(ChartConfig.color_carbs_mono_glucose)\r\n    }\r\n    if (valueFructose) {\r\n        valueMisc -= valueFructose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_fructose[language])\r\n        data.push(valueFructose)\r\n        colors.push(ChartConfig.color_carbs_mono_fructose)\r\n    }\r\n    if (valueGalactose) {\r\n        valueMisc -= valueGalactose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_galactose[language])\r\n        data.push(valueGalactose)\r\n        colors.push(ChartConfig.color_carbs_mono_galactose)\r\n    }\r\n    if (valueSucrose) {\r\n        valueMisc -= valueSucrose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_sucrose[language])\r\n        data.push(valueSucrose)\r\n        colors.push(ChartConfig.color_carbs_di_sucrose)\r\n    }\r\n    if (valueLactose) {\r\n        valueMisc -= valueLactose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_lactose[language])\r\n        data.push(valueLactose)\r\n        colors.push(ChartConfig.color_carbs_di_lactose)\r\n    }\r\n    if (valueMaltose) {\r\n        valueMisc -= valueMaltose\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_maltose[language])\r\n        data.push(valueMaltose)\r\n        colors.push(ChartConfig.color_carbs_di_maltose)\r\n    }\r\n    if (valueStarch) {\r\n        valueMisc -= valueStarch\r\n        labels.push(applicationStrings.label_nutrient_carbohydrates_starch[language])\r\n        data.push(valueStarch)\r\n        colors.push(ChartConfig.color_carbs_starch)\r\n    }\r\n\r\n    if (valueDietaryFibers) {\r\n        valueMisc -= valueDietaryFibers\r\n        labels.push(applicationStrings.label_nutrient_dietaryFibers[language])\r\n        data.push(valueDietaryFibers)\r\n        colors.push(ChartConfig.color_carbs_dietaryFibers)\r\n    }\r\n\r\n    valueMisc = autoRound(valueMisc);\r\n    if (valueMisc < 0) {\r\n        valueMisc = 0;\r\n    }\r\n\r\n    if(!hideRemainders) {\r\n        labels.push(applicationStrings.label_nutrient_remainder[language])\r\n        data.push(valueMisc)\r\n        colors.push(ChartConfig.color_chart_misc)\r\n    }\r\n\r\n    return {\r\n        labels: labels,\r\n        values: data,\r\n        colors: colors\r\n    }\r\n}\r\n\r\n\r\nexport function getCarbsBaseLegend(labels: string[], language: string): LegendData[] {\r\n    const legendData: Array<any> = []\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_sugar[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_sugar[language],\r\n            color: ChartConfig.color_chart_green_3,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_dietaryFibers[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_dietaryFibers[language],\r\n            color: ChartConfig.color_chart_green_2,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_remainder[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_remainder[language],\r\n            color: ChartConfig.color_chart_misc,\r\n        })\r\n    }\r\n\r\n    return legendData;\r\n}\r\n\r\n\r\nexport function getCarbsDetailsLegend(labels: string[], language: string): LegendData[] {\r\n    const legendData: Array<any> = []\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_glucose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_glucose[language],\r\n            color: ChartConfig.color_carbs_mono_glucose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_fructose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_fructose[language],\r\n            color: ChartConfig.color_carbs_mono_fructose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_galactose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_galactose[language],\r\n            color: ChartConfig.color_carbs_mono_galactose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_sucrose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_sucrose[language],\r\n            color: ChartConfig.color_carbs_di_sucrose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_lactose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_lactose[language],\r\n            color: ChartConfig.color_carbs_di_lactose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_maltose[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_maltose[language],\r\n            color: ChartConfig.color_carbs_di_maltose,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_carbohydrates_starch[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_carbohydrates_starch[language],\r\n            color: ChartConfig.color_carbs_starch,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_dietaryFibers[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_dietaryFibers[language],\r\n            color: ChartConfig.color_carbs_dietaryFibers,\r\n        })\r\n    }\r\n\r\n    if (labels.includes(applicationStrings.label_nutrient_remainder[language])) {\r\n        legendData.push({\r\n            item: applicationStrings.label_nutrient_remainder[language],\r\n            color: ChartConfig.color_chart_misc,\r\n        })\r\n    }\r\n\r\n    return legendData;\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport * as ChartConfig from \"../../../config/ChartConfig\"\r\nimport * as Constants from \"../../../config/Constants\"\r\nimport {CARBS_DATA_BASE, CHART_TYPE_BAR, CHART_TYPE_PIE} from \"../../../config/Constants\"\r\nimport {Bar, Pie} from \"react-chartjs-2\";\r\nimport {getBarChartOptions, getPieChartOptions} from \"../../../service/ChartConfigurationService\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport {CustomLegend} from \"../../charthelper/CustomLegend\";\r\nimport {PieChartConfigurationForm} from \"../../charthelper/PieChartConfigurationForm\";\r\nimport {initialChartConfigData} from \"../../../config/ApplicationSetting\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {CarbDataChartProps} from \"../../../types/livedata/ChartPropsData\";\r\nimport {GeneralChartConfigDirectCompareWithSubCharts} from \"../../../types/livedata/ChartConfigData\";\r\nimport {useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight, calculateChartHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {\r\n    getCarbBaseChartData,\r\n    getCarbDetailsChartData,\r\n    getCarbsBaseLegend,\r\n    getCarbsDetailsLegend\r\n} from \"../../../service/chartdata/CarbsChartDataService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_CARBS_CONFIG,\r\n    GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_ACTION_DATAPANEL_PROTEINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../../config/GA_Events\";\r\n\r\nexport default function CarbsDataChart(props: CarbDataChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n    const windowSize = useWindowDimension()\r\n\r\n    let chartConfig = props.directCompareConfig\r\n        ? props.directCompareConfig\r\n        : applicationContext\r\n            ? applicationContext.applicationData.foodDataPanel.chartConfigData.carbsChartConfig\r\n            : initialChartConfigData.carbsChartConfig\r\n\r\n    const initialExpand100 =  props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.expand100\r\n        : chartConfig.expand100\r\n\r\n    const initialHideRemainders =  props.directCompareConfig\r\n        ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.hideRemainders\r\n        : chartConfig.hideRemainders\r\n\r\n    const [chartType, setChartType] = useState<string>(chartConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(chartConfig.showLegend)\r\n    const [hideRemainders, setShowHideRemainders] = useState<boolean>(initialHideRemainders ? initialHideRemainders : false)\r\n    const [expand100, setExpand100] = useState<boolean>(initialExpand100 ? initialExpand100 : false)\r\n    const [subChart, setSubChart] = useState<string>(chartConfig.subChart ? chartConfig.subChart : CARBS_DATA_BASE)\r\n    const [chartHeight, setChartHeight] = useState<number>(calculateChartHeight(windowSize, props.directCompareUse))\r\n\r\n    useEffect(() => {\r\n        if (props.directCompareConfig) {\r\n            setChartType(chartConfig.chartType)\r\n            setShowLegend(chartConfig.showLegend)\r\n            setSubChart(chartConfig.subChart ? chartConfig.subChart : CARBS_DATA_BASE)\r\n        }\r\n\r\n        setChartHeight(calculateChartHeight(windowSize, props.directCompareUse))\r\n        updateChartConfig()\r\n    }, [chartType, showLegend, hideRemainders, expand100, subChart, chartHeight, props])\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext && !props.directCompareConfig) {\r\n            const currentConfig = applicationContext.applicationData.foodDataPanel.chartConfigData.carbsChartConfig\r\n            if (chartType !== currentConfig.chartType\r\n                || subChart !== currentConfig.subChart\r\n                || hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100\r\n                || showLegend !== currentConfig.showLegend) {\r\n                const newChartConfig = {\r\n                    ...applicationContext.applicationData.foodDataPanel.chartConfigData,\r\n                    carbsChartConfig: {\r\n                        chartType: chartType,\r\n                        showLegend: showLegend,\r\n                        hideRemainders: hideRemainders,\r\n                        expand100: expand100,\r\n                        subChart: subChart\r\n                    }\r\n                }\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(newChartConfig)\r\n            }\r\n        } else if(applicationContext) {\r\n            const currentConfig = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n            if (hideRemainders !== currentConfig.hideRemainders\r\n                || expand100 !== currentConfig.expand100) {\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.expand100 = expand100\r\n                applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.hideRemainders = hideRemainders\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleExpand100Change = () => {\r\n        const label = \"expand100: \" + !expand100\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_CARBS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleHideRemaindersCheckbox = () => {\r\n        const label = \"hideRemainders: \" + !hideRemainders\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_CARBS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setShowHideRemainders(!hideRemainders)\r\n    }\r\n\r\n    const carbohydrateData = getNutrientData(props.selectedFoodItem).carbohydrateData;\r\n\r\n    const handleChartSelectionChange = (event: any) => {\r\n        const value = event.target.value\r\n\r\n        if (applicationContext && props.directCompareConfig) {\r\n            const currentSettings = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n            const carbsChartConfig: GeneralChartConfigDirectCompareWithSubCharts = props.directCompareConfig.chartIndex === 1\r\n                ? {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    hideRemainders: true,\r\n                    expand100: true,\r\n                    subChart1: event.target.value,\r\n                    subChart2: currentSettings.carbsChartConfig.subChart2\r\n                }\r\n                : {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    hideRemainders: true,\r\n                    expand100: true,\r\n                    subChart1: currentSettings.carbsChartConfig.subChart1,\r\n                    subChart2: event.target.value\r\n                }\r\n\r\n            const newChartConfig = {\r\n                ...currentSettings,\r\n                carbsChartConfig: carbsChartConfig\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        } else {\r\n            setSubChart(value)\r\n        }\r\n\r\n        const eventLabel = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_LIPIDS_CONFIG, GA_CATEGORY_DATAPANEL, value, eventLabel)\r\n    }\r\n\r\n    const createBasicChartData = () => {\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const totalAmount = getNutrientData(props.selectedFoodItem).baseData.carbohydrates;\r\n        const chartDisplayData = getCarbBaseChartData(nutrientData, hideRemainders, totalAmount, lang)\r\n\r\n        if(!chartDisplayData) {\r\n            return\r\n        }\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        }\r\n    }\r\n\r\n\r\n    const createDetailChartData = () => {\r\n        const {carbohydrateData, baseData} = getNutrientData(props.selectedFoodItem)\r\n        const nutrientData = getNutrientData(props.selectedFoodItem)\r\n        const totalAmount = getNutrientData(props.selectedFoodItem).baseData.carbohydrates;\r\n        const chartDisplayData = getCarbDetailsChartData(nutrientData, hideRemainders, totalAmount, lang)\r\n\r\n        if(!chartDisplayData) {\r\n            return\r\n        }\r\n\r\n        return {\r\n            labels: chartDisplayData.labels,\r\n            datasets: [{\r\n                data: chartDisplayData.values,\r\n                backgroundColor: chartDisplayData.colors,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_CARBS_CONFIG, GA_CATEGORY_DATAPANEL, value, eventValue)\r\n        setChartType(event.target.value)\r\n    }\r\n\r\n    const handleLegendCheckbox = () => {\r\n        setShowLegend(!showLegend)\r\n        const eventValue = props.directCompareUse ? 2 : 1\r\n        const label = \"legend: \" + !showLegend\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_CARBS_CONFIG, GA_CATEGORY_DATAPANEL, label, eventValue)\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const getOptions = () => {\r\n        let title;\r\n\r\n        if (subChart === Constants.CARBS_DATA_BASE) {\r\n            title = applicationStrings.label_charttype_carbs_base[lang];\r\n        } else if (subChart === Constants.CARBS_DATA_DETAIL) {\r\n            title = applicationStrings.label_charttype_carbs_detail[lang];\r\n        }\r\n\r\n        if (chartType === CHART_TYPE_BAR) {\r\n            return expand100 ? getBarChartOptions(title, \"%\", 100) : getBarChartOptions(title, \"%\");\r\n        } else {\r\n            return getPieChartOptions(title, \"%\");\r\n        }\r\n    }\r\n\r\n\r\n    const renderChartSelector = () => {\r\n        return (\r\n            <Form>\r\n                <Form.Label>\r\n                    <b>{applicationStrings.label_datatype[lang]}:</b>\r\n                </Form.Label>\r\n                <Form.Check inline={false}\r\n                            className={\"form-radiobutton\"}\r\n                            label={applicationStrings.label_charttype_carbs_base[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.CARBS_DATA_BASE}\r\n                            checked={subChart === Constants.CARBS_DATA_BASE}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n                <Form.Check inline={false}\r\n                            className={\"form-radiobutton\"}\r\n                            label={applicationStrings.label_charttype_carbs_detail[lang]}\r\n                            type=\"radio\"\r\n                            value={Constants.CARBS_DATA_DETAIL}\r\n                            checked={subChart === Constants.CARBS_DATA_DETAIL}\r\n                            onChange={handleChartSelectionChange}>\r\n                </Form.Check>\r\n                <hr/>\r\n                <Form>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_expand100g[lang]}\r\n                                type=\"checkbox\"\r\n                                disabled={chartType === Constants.CHART_TYPE_PIE}\r\n                                checked={expand100}\r\n                                onChange={handleExpand100Change}>\r\n                    </Form.Check>\r\n                    <Form.Check inline={false}\r\n                                className=\"form-radiobutton\"\r\n                                label={applicationStrings.checkbox_chartoption_hideRemainders[lang]}\r\n                                type=\"checkbox\"\r\n                                disabled={subChart === Constants.CARBS_DATA_DETAIL}\r\n                                checked={hideRemainders}\r\n                                onChange={handleHideRemaindersCheckbox}>\r\n                    </Form.Check>\r\n                </Form>\r\n            </Form>\r\n        )\r\n    }\r\n\r\n\r\n    const renderChart = (data: any) => {\r\n        if (!data) {\r\n            return (\r\n                <div style={{height: ChartConfig.default_chart_height}}>\r\n                    {applicationStrings.label_noData[lang]}\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {chartType === CHART_TYPE_PIE &&\r\n                <Pie data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n                {chartType === CHART_TYPE_BAR &&\r\n                <Bar data={data}\r\n                     key={'chart ' + chartHeight}\r\n                     height={chartHeight}\r\n                     options={getOptions()}\r\n                />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const chartColType = chartType === CHART_TYPE_PIE ? \"col-6\" : \"col-8\";\r\n    const detailChartData = createDetailChartData()\r\n    const basicChartData = createBasicChartData()\r\n\r\n    const containerHeight = calculateChartContainerHeight(windowSize,  props.directCompareUse)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\" style={{height: containerHeight}} key={\"carbs container \" + containerHeight}>\r\n                <div className=\"col-3\" style={{display: \"block\"}}>\r\n                    {renderChartSelector()}\r\n                </div>\r\n                <div className={chartColType}>\r\n                    {subChart === Constants.CARBS_DATA_BASE &&\r\n                    renderChart(basicChartData)\r\n                    }\r\n                    {detailChartData && subChart === Constants.CARBS_DATA_DETAIL &&\r\n                    renderChart(detailChartData)\r\n                    }\r\n                    {!detailChartData && subChart === Constants.CARBS_DATA_DETAIL &&\r\n                    <div style={{height: ChartConfig.default_chart_height}}>\r\n                        {applicationStrings.label_noData[lang]}\r\n                    </div>\r\n                    }\r\n                </div>\r\n\r\n                {showLegend && chartType === Constants.CHART_TYPE_PIE &&\r\n                <div className=\"col-3\">\r\n                    {subChart === Constants.CARBS_DATA_BASE && basicChartData &&\r\n                    <CustomLegend legendData={getCarbsBaseLegend(basicChartData.labels, lang)}/>\r\n                    }\r\n                    {subChart === Constants.CARBS_DATA_DETAIL && detailChartData &&\r\n                    <CustomLegend legendData={getCarbsDetailsLegend(detailChartData.labels, lang)}/>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n            {!props.directCompareConfig &&\r\n            <div className=\"row chart-control-button-bar\">\r\n                <PieChartConfigurationForm chartType={chartType}\r\n                                           showLegend={showLegend}\r\n                                           handleRadioButtonClick={handleRadioButtonClick}\r\n                                           handleLegendCheckboxClick={handleLegendCheckbox}/>\r\n\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n\r\n}","import BaseDataChart from \"./charts/BaseDataChart\";\r\nimport EnergyDataChart from \"./charts/EnergyDataChart\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport MineralVitaminChart from \"./charts/MineralVitaminChart\";\r\nimport LipidsDataChart from \"./charts/LipidsDataChart\";\r\nimport ProteinDataChart from \"./charts/ProteinDataChart\";\r\nimport CarbsDataChart from \"./charts/CarbsDataChart\";\r\nimport {ChartProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\nexport function ChartPanel(props: ChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const selectedDataTab = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n\r\n    let chart = <div>Nothing to show</div>;\r\n    if (selectedDataTab === TAB_BASE_DATA) {\r\n        chart = <BaseDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_ENERGY_DATA) {\r\n        chart = <EnergyDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_VITAMIN_DATA) {\r\n        chart = <MineralVitaminChart selectedFoodItem={props.selectedFoodItem} selectedSubChart={CHART_VITAMINS}/>\r\n    } else if (selectedDataTab === TAB_MINERAL_DATA) {\r\n        chart = <MineralVitaminChart selectedFoodItem={props.selectedFoodItem} selectedSubChart={CHART_MINERALS}/>\r\n    } else if (selectedDataTab === TAB_LIPIDS_DATA) {\r\n        chart = <LipidsDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_CARBS_DATA) {\r\n        chart = <CarbsDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    } else if (selectedDataTab === TAB_PROTEINS_DATA) {\r\n        chart = <ProteinDataChart selectedFoodItem={props.selectedFoodItem}/>\r\n    }\r\n\r\n    return (\r\n        <div style={{paddingTop: \"24px\"}}>\r\n            {chart}\r\n        </div>\r\n    )\r\n}","import {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport 'react-bootstrap-table/dist/react-bootstrap-table-all.min.css';\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {DISPLAYMODE_CHART} from \"../../config/Constants\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\ninterface FoodDataTableProps {\r\n    tableData: Array<FoodTableDataObject>\r\n    portionSize: number\r\n}\r\n\r\nexport function FoodDataTable(props: FoodDataTableProps) {\r\n    const dataExists = props.tableData && props.tableData.length > 0;\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const language = useContext(LanguageContext)\r\n\r\n    const changeToChartMode = () => {\r\n        applicationContext?.setFoodDataPanelData.setSelectedDisplayMode(DISPLAYMODE_CHART)\r\n    }\r\n\r\n    const formatDataCell = (cell, row) => {\r\n        if (!cell.includes(\"&&\")) {\r\n            return cell\r\n        }\r\n\r\n        const firstLineStype = {paddingBottom: \"6px\", display: 'block'}\r\n        const indentStyle = {paddingLeft: \"8px\"}\r\n\r\n        return <div>{cell.split(\"&&\").map((element, index) => (<div>\r\n                {index > 0 ?\r\n                    <span key={`cellindex-${index}`} style={indentStyle}>\r\n                    {element}\r\n                </span>\r\n                    :\r\n                    <span key={`cellindex-${index}`} style={firstLineStype}>\r\n                    {element}\r\n                </span>\r\n                }\r\n            </div>)\r\n        )}</div>\r\n    }\r\n\r\n    const labelPortion = `${applicationStrings.label_per_portion[language.language]} (${props.portionSize} g)`\r\n    const tableClass = isMobileDevice() ? \"table-style-m\" : \"table-style\"\r\n\r\n    return (\r\n        <div style={{height: \"418px\", margin: \"25px\", overflowY: \"auto\"}}>\r\n            <div>\r\n                {dataExists &&\r\n                <BootstrapTable trClassName={tableClass} data={props.tableData} striped hover>\r\n                    <TableHeaderColumn isKey dataField='label' dataFormat={formatDataCell}>Element</TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='value_100g'\r\n                                       dataFormat={formatDataCell}>{applicationStrings.label_per_100g[language.language]}\r\n                    </TableHeaderColumn>\r\n                    <TableHeaderColumn dataField='value_portion'\r\n                                       dataFormat={formatDataCell}>{labelPortion}\r\n                    </TableHeaderColumn>\r\n                </BootstrapTable>\r\n                }\r\n                {!dataExists &&\r\n                <div className=\"text-center\">{applicationStrings.label_noData[language.language]}</div>\r\n                }\r\n            </div>\r\n            <div style={{paddingTop: \"25px\"}}>\r\n                <button className={\"btn btn-link\"} onClick={changeToChartMode}>\r\n                    {applicationStrings.label_chart_view[language.language]}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {LanguageContext} from \"../../../contexts/LangContext\";\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport SelectedFoodItem from \"../../../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationDataContextStore} from \"../../../contexts/ApplicationDataContext\";\r\nimport {getNameFromFoodNameList} from \"../../../service/nutrientdata/NameTypeService\";\r\nimport {applicationStrings} from \"../../../static/labels\";\r\nimport getName from \"../../../service/LanguageService\";\r\nimport {calculateChartContainerHeight} from \"../../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {isMobileDevice, useWindowDimension} from \"../../../service/WindowDimension\";\r\nimport {getNutrientData, getSourceName} from \"../../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {getFoodItem, getFoodItemName} from \"../../../service/nutrientdata/FoodItemsService\";\r\nimport {callEvent} from \"../../../service/GA_EventService\";\r\nimport {GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL} from \"../../../config/GA_Events\";\r\n\r\ninterface InfoDataProps {\r\n    selectedFoodItem: SelectedFoodItem,\r\n    directCompare?: boolean\r\n}\r\n\r\ninterface RowElement {\r\n    key: string,\r\n    value: string\r\n}\r\n\r\nexport function InfoData(props: InfoDataProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const windowSize = useWindowDimension()\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, props.directCompare))\r\n\r\n    useEffect(() => {\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, props.directCompare))\r\n    }, [containerHeight])\r\n\r\n    const createRow = (key: string, value: any): RowElement => {\r\n        return {\r\n            key: key,\r\n            value: value\r\n        }\r\n    }\r\n\r\n    const getGeneralTableData = (): Array<RowElement> => {\r\n        if (!applicationContext) {\r\n            return []\r\n        }\r\n\r\n        const foodNameId = props.selectedFoodItem.foodItem.nameId\r\n        const foodName = foodNameId ? getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, foodNameId, lang, true) : ''\r\n\r\n        const foodClass = props.selectedFoodItem.foodClass;\r\n        const foodClassNameId = foodClass ? foodClass.nameKey : null\r\n\r\n        const sourceName = getSourceName(props.selectedFoodItem.selectedSource)\r\n        const sourceItemId = getNutrientData(props.selectedFoodItem).sourceItemId\r\n\r\n        const source = `United States Department of Agriculture (USDA)`;\r\n        const sourceLine2 = `${sourceName}, ID = ${sourceItemId}`;\r\n        const foodClassName = foodClassNameId ? getNameFromFoodNameList(applicationContext.foodDataCorpus.foodNames, foodClassNameId, lang) : null;\r\n\r\n        const categoryId = foodClass ? foodClass.category : null\r\n        const category = categoryId ? applicationContext.foodDataCorpus.categories.find(category => category.id === categoryId) : null\r\n        const categoryName = category ? getName(category, lang) : null;\r\n\r\n        const conditionId = props.selectedFoodItem.foodItem.conditionId\r\n        const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === conditionId)\r\n        const conditionName = condition ? getName(condition, lang) : null;\r\n\r\n        const tableDataGeneral: Array<RowElement> = [];\r\n\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodName[lang]}:`, foodName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_preparation[lang]}:`, conditionName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodId[lang]}:`, props.selectedFoodItem.foodItem.id)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_foodClass[lang]}:`, foodClassName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_category[lang]}:`, categoryName)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(`${applicationStrings.label_info_source[lang]}:`, source)\r\n        );\r\n        tableDataGeneral.push(\r\n            createRow(\"\", sourceLine2)\r\n        );\r\n\r\n        return tableDataGeneral;\r\n    }\r\n\r\n    const getTableDataPortion = () => {\r\n        const foodPortion = props.selectedFoodItem.portion;\r\n        const portionValue = `${foodPortion.amount} g`;\r\n\r\n        const portionObject = applicationContext?.foodDataCorpus.portionTypes.find(portion => portion.id === foodPortion.portionType)\r\n        if (portionObject) {\r\n            const portionName = foodPortion.portionType !== 0 ? getName(portionObject, lang) : applicationStrings.portion_individual[lang];\r\n            const tableDataPortion: Array<RowElement> = [];\r\n\r\n            tableDataPortion.push(\r\n                createRow(`${applicationStrings.label_info_portionType[lang]}:`, portionName)\r\n            );\r\n\r\n            tableDataPortion.push(\r\n                createRow(`${applicationStrings.label_portion[lang]}:`, portionValue)\r\n            );\r\n\r\n            return tableDataPortion\r\n        }\r\n\r\n\r\n        return [];\r\n    }\r\n\r\n\r\n    const makeTableDataCombinedFood = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const compositeList = props.selectedFoodItem?.compositeSubElements ?? []\r\n        const tableData: Array<RowElement> = []\r\n        const {foodNames} = applicationContext.foodDataCorpus\r\n\r\n        for (let i = 0; i < compositeList.length; i++) {\r\n            const foodItem = compositeList[i].foodItem\r\n            let name = getFoodItemName(foodItem, foodNames, lang)\r\n            const portion = compositeList[i].portion.amount\r\n            const conditionId = compositeList[i].foodItem.conditionId\r\n\r\n            if (conditionId !== 100) {\r\n                const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === conditionId)\r\n                const conditionName = condition ? getName(condition, lang) : null;\r\n                name += ` (${conditionName})`\r\n            }\r\n            tableData.push(\r\n                createRow(`${name}:`, `${portion} g`)\r\n            )\r\n        }\r\n\r\n        return tableData;\r\n    }\r\n\r\n    const tableClass = isMobileDevice() ? \"table-style-m\" : \"table-style\"\r\n\r\n    const renderSubTable = (data) => {\r\n        return (\r\n            <div>\r\n                <BootstrapTable trClassName={tableClass} bordered={false} data={data}>\r\n                    <TableHeaderColumn className=\"table-header-no-top-border\" dataField='key' isKey width=\"200px\"/>\r\n                    <TableHeaderColumn className=\"table-header-no-top-border\" dataField='value'/>\r\n                </BootstrapTable>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const onLinkClick = () => {\r\n        const sourceItemId = getNutrientData(props.selectedFoodItem).sourceItemId\r\n        const usdaLink = `https://fdc.nal.usda.gov/fdc-app.html#/food-details/${sourceItemId}/nutrients`\r\n\r\n        console.log('SEL', props.selectedFoodItem)\r\n\r\n        const label = \"Open ext. FoodDataCentral Link\"\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL, label, props.selectedFoodItem.foodItem.id)\r\n\r\n        const link = window.open(usdaLink, '_blank')\r\n        if (link) {\r\n            link.focus()\r\n        } else {\r\n            window.location.href = usdaLink\r\n        }\r\n    }\r\n\r\n\r\n    let height = containerHeight\r\n    if (!props.directCompare) {\r\n        height += 86\r\n    }\r\n\r\n    const isCompositeFoodElement = props.selectedFoodItem.aggregated === true\r\n\r\n    return (\r\n        <div>\r\n            <div style={{height: height, maxHeight: height, overflowY: \"auto\", padding: \"15px\"}}>\r\n                {!isCompositeFoodElement &&\r\n                <div>\r\n                    <div>\r\n                        <div>\r\n                            {renderSubTable(getGeneralTableData())}\r\n                        </div>\r\n                        <div style={{paddingTop: \"30px\"}}>\r\n                            <h5>{applicationStrings.label_info_portion[lang]}</h5>\r\n                            {renderSubTable(getTableDataPortion())}\r\n                        </div>\r\n                    </div>\r\n                    <div style={{paddingTop: \"20px\", paddingBottom: \"12px\"}}>\r\n                        <Button variant={'link'} active={true} onClick={onLinkClick}>\r\n                            {applicationStrings.label_usda_reference[lang]}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n                }\r\n                {isCompositeFoodElement &&\r\n                <div>\r\n                    <h5>{applicationStrings.label_info_composite[lang]}</h5>\r\n                    {renderSubTable(makeTableDataCombinedFood())}\r\n                </div>\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {DISPLAYMODE_CHART, DISPLAYMODE_TABLE, TAB_INFO} from \"../../config/Constants\";\r\nimport {ChartPanel} from \"./ChartPanel\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {FoodDataTable} from \"./FoodDataTable\";\r\nimport {InfoData} from \"./charts/InfoData\";\r\nimport {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {calculateMinimalDataPanelWidth} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\n\r\ninterface FoodDataPageBodyProps {\r\n    tableData: Array<FoodTableDataObject>\r\n    selectedFoodItem: SelectedFoodItem\r\n}\r\n\r\nexport default function FoodDataPageBody(props: FoodDataPageBodyProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    if(!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const {displayMode, selectedDataPage}  = applicationContext.applicationData.foodDataPanel\r\n\r\n    const renderDataPage = () => {\r\n        return (\r\n            <div>\r\n                {displayMode === DISPLAYMODE_TABLE &&\r\n                <div className=\"col\">\r\n                    <FoodDataTable tableData={props.tableData} portionSize={props.selectedFoodItem.portion.amount}/>\r\n                </div>\r\n                }\r\n                {displayMode === DISPLAYMODE_CHART &&\r\n                <div className=\"col\">\r\n                    <ChartPanel selectedFoodItem={props.selectedFoodItem} />\r\n                </div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{maxWidth: \"1200px\", minWidth: calculateMinimalDataPanelWidth()}}>\r\n            {selectedDataPage === TAB_INFO &&\r\n                 <InfoData selectedFoodItem={props.selectedFoodItem}/>\r\n            }\r\n            {selectedDataPage !== TAB_INFO &&\r\n                renderDataPage()\r\n            }\r\n        </div>\r\n    )\r\n\r\n}","import {Button, ButtonGroup} from \"react-bootstrap\";\r\nimport {\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {GA_ACTION_DATAPANEL_SWITCH_PAGE, GA_CATEGORY_DATAPANEL} from \"../../config/GA_Events\";\r\n\r\ninterface ChartMenuPanelProps {\r\n    dataPage: string\r\n    setDataPage: (id: string) => void\r\n    verticalArrangement: boolean\r\n}\r\n\r\nexport function ChartMenuPanel(props: ChartMenuPanelProps) {\r\n    const languageContext = useContext(LanguageContext)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const handlePageButtonClick = (value: string) => {\r\n        const eventValue = props.verticalArrangement ? 1 : 2\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_SWITCH_PAGE, GA_CATEGORY_DATAPANEL, value, eventValue)\r\n        props.setDataPage(value)\r\n    }\r\n\r\n    const variant = \"link\"\r\n\r\n    const makeButtonLabel = (buttonText): JSX.Element => {\r\n        const classNameSpan = props.verticalArrangement ? \"float-start\" : \"\"\r\n        return <span className={classNameSpan}>{buttonText}</span>\r\n    }\r\n\r\n    const rowClass = props.verticalArrangement ? \"d-flex\" : \"d-flex flex-row flex-wrap\"\r\n\r\n    return (\r\n        <div>\r\n            <ButtonGroup className={rowClass} vertical={props.verticalArrangement}>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_BASE_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_BASE_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_overview[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_ENERGY_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_ENERGY_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_energy[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_VITAMIN_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_VITAMIN_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_vit[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_MINERAL_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_MINERAL_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_min[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_LIPIDS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_LIPIDS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_lipids[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_CARBS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_CARBS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_carbohydrates[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_PROTEINS_DATA)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_PROTEINS_DATA}>\r\n                    {makeButtonLabel(applicationStrings.label_nutrient_proteins[languageContext.language])}\r\n                </Button>\r\n                <Button className=\"btn sidebar-link\"\r\n                        onClick={() => handlePageButtonClick(TAB_INFO)}\r\n                        variant={variant}\r\n                        active={props.dataPage === TAB_INFO}>\r\n                    {makeButtonLabel(applicationStrings.label_info[languageContext.language])}\r\n                </Button>\r\n            </ButtonGroup>\r\n        </div>\r\n    );\r\n\r\n}","import {useContext, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {FaBookOpen, FaChartBar, FaQuestionCircle, FaThList, FaTimes} from \"react-icons/fa\";\r\nimport {\r\n    DISPLAYMODE_CHART,\r\n    DISPLAYMODE_TABLE,\r\n    PATH_FOODDATA_PANEL,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {getNameFromFoodNameList, shortenName} from \"../../service/nutrientdata/NameTypeService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport FoodDataPageBody from \"./FoodDataPageBody\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {HelpModal} from \"../HelpModal\";\r\nimport {getHelpText, HelpText} from \"../../service/HelpService\";\r\nimport getName from \"../../service/LanguageService\";\r\nimport {ChartMenuPanel} from \"./ChartMenuPanel\";\r\nimport {getSourceName} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL} from \"../../config/GA_Events\";\r\n\r\ninterface FoodDataPageHeaderProps {\r\n    setDisplayMode: (id: string) => void\r\n    setDataPage: (id: string) => void\r\n    selectedFoodItem: SelectedFoodItem\r\n    tableData: Array<FoodTableDataObject>\r\n}\r\n\r\nexport default function FoodDataPageHeader(props: FoodDataPageHeaderProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const [helpModalId, setHelpModalId] = useState<number>(0)\r\n    const [showBookModal, setShowBookModal] = useState<boolean>(false)\r\n\r\n    if (applicationContext === null) {\r\n        return <div/>\r\n    }\r\n\r\n    const displayMode = applicationContext.applicationData.foodDataPanel.displayMode\r\n    const dataPage = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n\r\n    const handleRadioButtonClick = (value: string) => {\r\n        const displaymode = value === DISPLAYMODE_TABLE ? \"table\" : \"chart\"\r\n        const label = `Switch display mode to ${displaymode}`\r\n        callEvent(applicationContext.debug, GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL, label)\r\n        props.setDisplayMode(value)\r\n    }\r\n\r\n    const closeTab = () => {\r\n        const id = (props.selectedFoodItem.foodItem.id)\r\n        const remainingItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length - 1\r\n        callEvent(applicationContext.debug, GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL, \"Close food item tab\")\r\n\r\n        applicationContext.setFoodDataPanelData.removeItemFromFoodDataPanel(id)\r\n\r\n        if (remainingItems === 0) {\r\n            history.push({pathName: PATH_FOODDATA_PANEL})\r\n        }\r\n    }\r\n\r\n    const help = () => {\r\n        const label = `Open help page: ${dataPage}`\r\n        callEvent(applicationContext.debug, GA_ACTION_DATAPANEL_GENERAL_ACTION, GA_CATEGORY_DATAPANEL, label)\r\n        switch (dataPage) {\r\n            case TAB_BASE_DATA:\r\n                setHelpModalId(1)\r\n                return;\r\n            case TAB_ENERGY_DATA:\r\n                setHelpModalId(2)\r\n                return;\r\n            case TAB_VITAMIN_DATA:\r\n                setHelpModalId(3)\r\n                return;\r\n            case TAB_MINERAL_DATA:\r\n                setHelpModalId(4)\r\n                return;\r\n            case TAB_LIPIDS_DATA:\r\n                setHelpModalId(5)\r\n                return;\r\n            case TAB_INFO:\r\n                setHelpModalId(6)\r\n                return;\r\n            case TAB_CARBS_DATA:\r\n                setHelpModalId(7)\r\n                return;\r\n            case TAB_PROTEINS_DATA:\r\n                setHelpModalId(8)\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    const openVitaminMineralBook = () => {\r\n        setShowBookModal(true)\r\n    }\r\n\r\n    const enabledDisplayButtonClasses = \"btn button-displaymode-enabled\"\r\n    const disabledDisplayButtonClasses = \"btn button-displaymode-disabled\"\r\n\r\n    const chartButtonClasses = displayMode === DISPLAYMODE_CHART ? enabledDisplayButtonClasses\r\n        : disabledDisplayButtonClasses;\r\n\r\n    const tablesButtonClasses = displayMode === DISPLAYMODE_TABLE ? enabledDisplayButtonClasses\r\n        : disabledDisplayButtonClasses;\r\n\r\n    const foodNamesList = applicationContext.foodDataCorpus.foodNames;\r\n\r\n\r\n    let foodName\r\n    if (props.selectedFoodItem.foodItem.nameId) {\r\n        foodName = getNameFromFoodNameList(foodNamesList, props.selectedFoodItem.foodItem.nameId, languageContext.language)\r\n    } else {\r\n        foodName = props.selectedFoodItem.title !== undefined ? props.selectedFoodItem.title : 'Individual'\r\n    }\r\n\r\n    let fullName\r\n    const portionSize = props.selectedFoodItem.portion.amount\r\n\r\n    if (!props.selectedFoodItem.foodItem.aggregated) {\r\n        const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === props.selectedFoodItem.foodItem.conditionId)\r\n        const conditionName = condition ? getName(condition, languageContext.language) : \"\"\r\n        if (isMobileDevice()) {\r\n            foodName = shortenName(foodName, 16)\r\n        }\r\n        fullName = `${foodName} (${conditionName}, ${portionSize} g)`\r\n    } else {\r\n        fullName = `${foodName} (${portionSize} g)`\r\n    }\r\n\r\n    const helpText: HelpText | null = helpModalId > 0 ? getHelpText(helpModalId, languageContext.language) : null\r\n    const sourceString = getSourceName(props.selectedFoodItem.selectedSource)\r\n    const selectedDataPage = applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n    const sourceToolTip = `${applicationStrings.tooltip_source[languageContext.language]} ${sourceString}`\r\n    const headerLabel = isMobileDevice() ? \"header-label-m\" : \"header-label\";\r\n\r\n    return (\r\n        <div style={{paddingBottom: \"6px\"}}>\r\n            {helpText !== null &&\r\n            <HelpModal helpText={helpText} closeHelpModal={() => setHelpModalId(0)}/>\r\n            }\r\n            <div className={\"d-flex flex-nowrap\"}>\r\n                <div className=\"col-2\">\r\n                    <div className={\"card\"}>\r\n                        <div className=\"card-body\" style={{paddingRight: \"16px\"}}>\r\n                            <ChartMenuPanel verticalArrangement={true} setDataPage={props.setDataPage}\r\n                                            dataPage={selectedDataPage}/>\r\n                            <div className={\"d-flex card\"} style={{marginTop: \"24px\", backgroundColor: \"#eeeeee\"}}>\r\n                                <div className={\"text-center\"} style={{fontSize: \"0.8em\"}} data-tip={sourceToolTip}>\r\n                                    {sourceString}\r\n                                    <ReactTooltip/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={\"col-10\"}>\r\n                    <div className=\"d-flex flex-row justify-content-between\" style={{marginTop: \"10px\"}}>\r\n                        <div style={{paddingTop: \"6px\", paddingLeft: \"32px\"}}>\r\n                            <div className={headerLabel}>\r\n                                <b>{fullName}</b>\r\n                            </div>\r\n                        </div>\r\n                        <div style={{paddingRight: \"24px\"}}>\r\n                            <div style={{padding: \"0px !important\", margin: \"0px !important\"}}>\r\n                                <div className=\"btn-group\" role=\"group\">\r\n                                    <Button className={chartButtonClasses}\r\n                                            onClick={() => handleRadioButtonClick(DISPLAYMODE_CHART)}\r\n                                            active={displayMode === DISPLAYMODE_CHART}\r\n                                            data-tip={applicationStrings.tooltip_icon_charts[languageContext.language]}>\r\n                                        <ReactTooltip/>\r\n                                        <FaChartBar/>\r\n                                    </Button>\r\n                                    <Button className={tablesButtonClasses}\r\n                                            onClick={() => handleRadioButtonClick(DISPLAYMODE_TABLE)}\r\n                                            active={displayMode === DISPLAYMODE_TABLE}\r\n                                            data-tip={applicationStrings.tooltip_icon_table[languageContext.language]}>\r\n                                        <FaThList/>\r\n                                    </Button>\r\n                                </div>\r\n                                <div className=\"btn-group\" role=\"group\" style={{paddingLeft: \"20px\"}}>\r\n                                    <Button className={\"btn-primary button-foodPanelHead\"}\r\n                                            onClick={help}\r\n                                            active={displayMode === DISPLAYMODE_CHART}>\r\n                                        <ReactTooltip/>\r\n                                        <FaQuestionCircle/>\r\n                                    </Button>\r\n                                    <Button className={\"button-closeTab\"}\r\n                                            onClick={closeTab}\r\n                                            data-for=\"closeButtonTooltip\"\r\n                                            data-tip={applicationStrings.tooltip_icon_close[languageContext.language]}>\r\n                                        <ReactTooltip id=\"closeButtonTooltip\"/>\r\n                                        <FaTimes/>\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <FoodDataPageBody selectedFoodItem={props.selectedFoodItem}\r\n                                      tableData={props.tableData}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import * as MathService from './calculation/MathService';\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {FoodTableDataObject} from \"../types/livedata/SelectedFoodItemData\";\r\nimport {getNutrientData} from \"./nutrientdata/NutrientDataRetriever\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {getTotalAmountOfCarotenoids} from \"./calculation/CarotenoidCalculationService\";\r\nimport {CATEGORY_BEVERAGE} from \"../config/Constants\";\r\n\r\nexport function createBaseDataTable(selectedFoodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const {\r\n        water,\r\n        carbohydrates,\r\n        lipids,\r\n        proteins,\r\n        dietaryFibers,\r\n        ash,\r\n        alcohol\r\n    } = getNutrientData(selectedFoodItem).baseData\r\n    const {sugar} = getNutrientData(selectedFoodItem).carbohydrateData\r\n\r\n    if (water !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_water[language],\r\n            water,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (carbohydrates  !== null) {\r\n        const carbObject = makeCarbsTableObject(carbohydrates, sugar, dietaryFibers, portion, language)\r\n        tableData.push(carbObject)\r\n    }\r\n\r\n    if (lipids !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids[language],\r\n            lipids,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteins !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins[language],\r\n            proteins,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    // We display alcohol content only if the food class is beverage or unknown\r\n    if (alcohol !== null && (selectedFoodItem.foodClass?.category === CATEGORY_BEVERAGE || selectedFoodItem.foodClass === null)) {\r\n        tableData.push(createTableObjectAlcohol(\r\n            applicationStrings.label_nutrient_alcohol[language],\r\n            alcohol,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (ash !== null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_ash[language],\r\n            ash,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createVitaminTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const nutrientData = getNutrientData(foodItem)\r\n\r\n    if (nutrientData.vitaminData.a != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_a[language],\r\n            nutrientData.vitaminData.a,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    const {carotenoidData} = nutrientData.vitaminData\r\n\r\n    if (carotenoidData != null) {\r\n        const totalCarotenoid = getTotalAmountOfCarotenoids(carotenoidData)\r\n\r\n        if (totalCarotenoid !== null) {\r\n            let carotenoidTableObject = createTableObject(\r\n                applicationStrings.label_nutrient_vit_carotenoid[language],\r\n                totalCarotenoid,\r\n                portion, \"mg\")\r\n\r\n            if (carotenoidData.caroteneAlpha !== null) {\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_carotenoid_alpha[language]}`\r\n                carotenoidTableObject = appendTableDataObject(carotenoidTableObject, language, label, carotenoidData.caroteneAlpha, portion, \"g\")\r\n            }\r\n\r\n            if (carotenoidData.caroteneBeta !== null) {\r\n                const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_vit_carotenoid_beta[language]}`\r\n                carotenoidTableObject = appendTableDataObject(carotenoidTableObject, language, label, carotenoidData.caroteneBeta, portion, \"g\")\r\n            }\r\n\r\n            tableData.push(carotenoidTableObject)\r\n        }\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b1 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b1[language],\r\n            nutrientData.vitaminData.b1,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b2 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b2[language],\r\n            nutrientData.vitaminData.b2,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b3 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b3[language],\r\n            nutrientData.vitaminData.b3,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b5 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b5[language],\r\n            nutrientData.vitaminData.b5,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b6 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b6[language],\r\n            nutrientData.vitaminData.b6,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b9 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b9[language],\r\n            nutrientData.vitaminData.b9,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.b12 != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_b12[language],\r\n            nutrientData.vitaminData.b12,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.c != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_c[language],\r\n            nutrientData.vitaminData.c,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.d != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_d[language],\r\n            nutrientData.vitaminData.d,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.e != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_e[language],\r\n            nutrientData.vitaminData.e,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (nutrientData.vitaminData.k != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_vit_k[language],\r\n            nutrientData.vitaminData.k,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createMineralTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n\r\n    if (firstNutrientData.mineralData.calcium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_calcium[language],\r\n            firstNutrientData.mineralData.calcium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.iron != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_iron[language],\r\n            firstNutrientData.mineralData.iron,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.magnesium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_magnesium[language],\r\n            firstNutrientData.mineralData.magnesium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.phosphorus != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_phosphorus[language],\r\n            firstNutrientData.mineralData.phosphorus,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.potassium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_potassimum[language],\r\n            firstNutrientData.mineralData.potassium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.sodium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_sodium[language],\r\n            firstNutrientData.mineralData.sodium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.zinc != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_zinc[language],\r\n            firstNutrientData.mineralData.zinc,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.copper != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_copper[language],\r\n            firstNutrientData.mineralData.copper,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.manganese != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_manganese[language],\r\n            firstNutrientData.mineralData.manganese,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.mineralData.selenium != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_min_selenium[language],\r\n            firstNutrientData.mineralData.selenium,\r\n            portion, \"mg\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createLipidsTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n\r\n    if (firstNutrientData.lipidData.saturated != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_saturated[language],\r\n            firstNutrientData.lipidData.saturated,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.unsaturatedMono != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_unsaturated_mono[language],\r\n            firstNutrientData.lipidData.unsaturatedMono,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.unsaturatedPoly != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_unsaturated_poly[language],\r\n            firstNutrientData.lipidData.unsaturatedPoly,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.omegaData) {\r\n        if (firstNutrientData.lipidData.omegaData.omega3 != null) {\r\n            tableData.push(createTableObject(\r\n                `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_lipids_omega3[language]}`,\r\n                firstNutrientData.lipidData.omegaData.omega3,\r\n                portion, \"g\")\r\n            );\r\n        }\r\n\r\n        if (firstNutrientData.lipidData.omegaData.omega6 != null) {\r\n            tableData.push(createTableObject(\r\n                `${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_lipids_omega6[language]}`,\r\n                firstNutrientData.lipidData.omegaData.omega6,\r\n                portion, \"g\")\r\n            );\r\n        }\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.transFattyAcids != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_transfattyAcids[language],\r\n            firstNutrientData.lipidData.transFattyAcids,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.lipidData.cholesterol != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_lipids_cholesterol[language],\r\n            firstNutrientData.lipidData.cholesterol,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createEnergyTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const nutrientData = getNutrientData(foodItem)\r\n    const energy = nutrientData.baseData.energy !== null ? nutrientData.baseData.energy : 0;\r\n\r\n    tableData.push(createTableObject(\r\n        \"kcal\",\r\n        energy,\r\n        portion, \"\")\r\n    );\r\n\r\n    tableData.push(createTableObject(\r\n        \"kJ\",\r\n        MathService.round(4.186 * energy, 1),\r\n        portion, \"\")\r\n    );\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createCarbsTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const firstNutrientData = getNutrientData(foodItem);\r\n    const {carbohydrates, dietaryFibers} = firstNutrientData.baseData\r\n    const {sugar} = firstNutrientData.carbohydrateData\r\n\r\n    if (carbohydrates) {\r\n        const carbObject = makeCarbsTableObject(carbohydrates, sugar, dietaryFibers, portion, language)\r\n        tableData.push(carbObject)\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.glucose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_glucose[language],\r\n            firstNutrientData.carbohydrateData.glucose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.fructose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_fructose[language],\r\n            firstNutrientData.carbohydrateData.fructose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.galactose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_galactose[language],\r\n            firstNutrientData.carbohydrateData.galactose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.sucrose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_sucrose[language],\r\n            firstNutrientData.carbohydrateData.sucrose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.lactose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_lactose[language],\r\n            firstNutrientData.carbohydrateData.lactose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.maltose != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_maltose[language],\r\n            firstNutrientData.carbohydrateData.maltose,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (firstNutrientData.carbohydrateData.starch != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_carbohydrates_starch[language],\r\n            firstNutrientData.carbohydrateData.starch,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nexport function createProteinTable(foodItem: SelectedFoodItem, portion: number, language: string, preferredSource: string): Array<FoodTableDataObject> {\r\n    let tableData: Array<FoodTableDataObject> = [];\r\n\r\n    const proteinData = getNutrientData(foodItem).proteinData;\r\n    if (!proteinData) {\r\n        return tableData;\r\n    }\r\n\r\n    if (proteinData.tryptophan != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_tryptophan[language],\r\n            proteinData.tryptophan,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.threonine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_threonine[language],\r\n            proteinData.threonine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.isoleucine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_isoleucine[language],\r\n            proteinData.isoleucine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.leucine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_leucine[language],\r\n            proteinData.leucine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.lysine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_lysine[language],\r\n            proteinData.lysine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.methionine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_methionine[language],\r\n            proteinData.methionine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.cystine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_cystine[language],\r\n            proteinData.cystine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.phenylalanine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_phenylalanine[language],\r\n            proteinData.phenylalanine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.tyrosine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_tyrosine[language],\r\n            proteinData.tyrosine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.valine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_valine[language],\r\n            proteinData.valine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.arginine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_arginine[language],\r\n            proteinData.arginine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.histidine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_histidine[language],\r\n            proteinData.histidine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.alanine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_alanine[language],\r\n            proteinData.alanine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.asparticAcid != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_asparticAcid[language],\r\n            proteinData.asparticAcid,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.glutamicAcid != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_glutamicAcid[language],\r\n            proteinData.glutamicAcid,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.glycine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_glysine[language],\r\n            proteinData.glycine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.proline != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_proline[language],\r\n            proteinData.proline,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    if (proteinData.serine != null) {\r\n        tableData.push(createTableObject(\r\n            applicationStrings.label_nutrient_proteins_serine[language],\r\n            proteinData.serine,\r\n            portion, \"g\")\r\n        );\r\n    }\r\n\r\n    return tableData;\r\n}\r\n\r\n\r\nfunction createTableObject(label: string, value_100g: number, portion: number, unit: String): FoodTableDataObject {\r\n    const valuePortion = calculatePortionData(value_100g, portion);\r\n    return {\r\n        label: label,\r\n        value_100g: `${MathService.autoRound(value_100g)} ${unit}`,\r\n        value_portion: `${MathService.autoRound(valuePortion)} ${unit}`\r\n    }\r\n}\r\n\r\nfunction createTableObjectAlcohol(label: string, value_100g: number, portion: number, unit: String): FoodTableDataObject {\r\n    const valuePortion = calculatePortionData(value_100g, portion);\r\n    if (valuePortion === null) {\r\n        return {\r\n            label: label,\r\n            value_100g: \"n/a\",\r\n            value_portion: \"n/a\",\r\n        }\r\n    }\r\n\r\n    const valueVolumePortion = valuePortion * 1.267\r\n    const valueVolume100gram = value_100g * 1.267\r\n\r\n    return {\r\n        label: label,\r\n        value_100g: `${MathService.autoRound(value_100g)} ${unit}   ( = ${MathService.autoRound(valueVolume100gram)} Vol % )`,\r\n        value_portion: `${MathService.autoRound(valuePortion)} ${unit}   ( = ${MathService.autoRound(valueVolume100gram)} Vol % )`\r\n    }\r\n}\r\n\r\n\r\nfunction calculatePortionData(value: number | null, portionSize: number): number | null {\r\n    if (value === null || value === undefined) {\r\n        return null;\r\n    } else if (value === 0) {\r\n        return 0;\r\n    }\r\n    return (value / 100) * portionSize;\r\n}\r\n\r\n\r\nfunction makeCarbsTableObject(carbohydrates: number, sugar: number | null, dietaryFibers: number | null,\r\n                              portion: number, language: string): FoodTableDataObject {\r\n    let carbObject = createTableObject(\r\n        applicationStrings.label_nutrient_carbohydrates[language],\r\n        carbohydrates,\r\n        portion, \"g\")\r\n\r\n    if (sugar !== null) {\r\n        const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_sugar[language]}`\r\n        carbObject = appendTableDataObject(carbObject, language, label, sugar, portion, \"g\")\r\n    }\r\n\r\n    if (dietaryFibers !== null) {\r\n        const label = ` ... ${applicationStrings.label_prefix_hereof[language]} ${applicationStrings.label_nutrient_dietaryFibers[language]}`\r\n        carbObject = appendTableDataObject(carbObject, language, label, dietaryFibers, portion, \"g\")\r\n    }\r\n\r\n    return carbObject\r\n}\r\n\r\n\r\nfunction appendTableDataObject(object: FoodTableDataObject, language: string, label: string, value: number, portion: number, unit: string): FoodTableDataObject {\r\n    const appendedObject = {...object}\r\n\r\n    const extension = createTableObject(label, value, portion, unit)\r\n\r\n    appendedObject.label = appendedObject.label + '&&' + extension.label\r\n    appendedObject.value_100g = appendedObject.value_100g + '&&' + extension.value_100g\r\n    appendedObject.value_portion = appendedObject.value_portion + '&&' + extension.value_portion\r\n\r\n    return appendedObject\r\n}","import SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport FoodDataPageHeader from \"./FoodDataPageHeader\";\r\nimport {FoodTableDataObject} from \"../../types/livedata/SelectedFoodItemData\";\r\nimport {\r\n    SOURCE_SRLEGACY,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {\r\n    createBaseDataTable,\r\n    createCarbsTable,\r\n    createEnergyTable,\r\n    createLipidsTable,\r\n    createMineralTable,\r\n    createProteinTable,\r\n    createVitaminTable\r\n} from \"../../service/TableService\";\r\n\r\ninterface FoodDataPageProps {\r\n    selectedFoodItem: SelectedFoodItem,\r\n    dataPage?: string\r\n}\r\n\r\nexport default function FoodDataPage(props: FoodDataPageProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const selectedDataTab = applicationContext\r\n        ? applicationContext.applicationData.foodDataPanel.selectedDataPage\r\n        : TAB_BASE_DATA\r\n\r\n    const [tableData, setTableData] = useState<Array<FoodTableDataObject>>([])\r\n\r\n    const updatePage = () => {   // Central update method when any (radio) button was clicked\r\n        let tableDataList: Array<FoodTableDataObject> = [];\r\n        const {portion} = props.selectedFoodItem\r\n\r\n        const preferredSource = applicationContext ? applicationContext.applicationData.preferredSource : SOURCE_SRLEGACY\r\n\r\n        if (selectedDataTab === TAB_BASE_DATA) {\r\n            tableDataList = createBaseDataTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_ENERGY_DATA) {\r\n            tableDataList = createEnergyTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_VITAMIN_DATA) {\r\n            tableDataList = createVitaminTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_MINERAL_DATA) {\r\n            tableDataList = createMineralTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_LIPIDS_DATA) {\r\n            tableDataList = createLipidsTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_CARBS_DATA) {\r\n            tableDataList = createCarbsTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        } else if (selectedDataTab === TAB_PROTEINS_DATA) {\r\n            tableDataList = createProteinTable(props.selectedFoodItem, portion.amount, language, preferredSource);\r\n        }\r\n\r\n        setTableData(tableDataList)\r\n    }\r\n\r\n    useEffect(() => {\r\n            updatePage()\r\n        }, [props.selectedFoodItem,\r\n            applicationContext?.applicationData.preferredSource,\r\n            applicationContext?.applicationData.foodDataPanel.selectedDataPage,\r\n            applicationContext?.applicationData.foodDataPanel.displayMode,\r\n            applicationContext?.userData]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onNewDataPage = (datapage: string) => {\r\n        applicationContext.setFoodDataPanelData.setSelectedDataPage(datapage)\r\n        updatePage()\r\n    }\r\n\r\n    const onDisplayModeChange = (newMode: string) => {\r\n        applicationContext.setFoodDataPanelData.setSelectedDisplayMode(newMode)\r\n        updatePage()\r\n    }\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('FoodDataPage: Render, tabledata = ', tableData)\r\n    }\r\n\r\n    return <div>\r\n        <FoodDataPageHeader setDisplayMode={onDisplayModeChange}\r\n                            setDataPage={onNewDataPage}\r\n                            selectedFoodItem={props.selectedFoodItem}\r\n                            tableData={tableData}\r\n        />\r\n    </div>\r\n\r\n}","import NameType from \"../types/nutrientdata/NameType\";\r\nimport SelectedFoodItem from \"../types/livedata/SelectedFoodItem\";\r\nimport {getNameFromFoodNameList} from \"./nutrientdata/NameTypeService\";\r\nimport FoodDataPage from \"../components/fooddatapanel/FoodDataPage\";\r\nimport React from \"react\";\r\n\r\n/**\r\n * Enriches a selected food item by its JSX container to be displayed as a tab in the food data panel\r\n * @param selectedFoodItem The already initialized selected food item\r\n * @param foodNamesList The food names list\r\n * @param language The selected language\r\n */\r\nexport function makeFoodDataPanelComponent(selectedFoodItem: SelectedFoodItem, foodNamesList: Array<NameType>, \r\n\t\tlanguage: string): SelectedFoodItem | null {\r\n    let foodName\r\n    if(selectedFoodItem.foodItem.nameId) {\r\n        foodName = getNameFromFoodNameList(foodNamesList, selectedFoodItem.foodItem.nameId, language)\r\n    } else {\r\n        foodName = selectedFoodItem.title ?? 'Unknown'\r\n    }\r\n\r\n    if (foodName === null) {\r\n        return null\r\n    }\r\n\r\n    selectedFoodItem.component = <FoodDataPage key={`page component ${selectedFoodItem.id}`} selectedFoodItem={selectedFoodItem}/>\r\n    selectedFoodItem.tab = foodName\r\n    selectedFoodItem.id = selectedFoodItem.foodItem.id\r\n\r\n    return selectedFoodItem\r\n}\r\n","import React, {useContext, useEffect, useState} from 'react'\r\nimport {Button} from 'react-bootstrap'\r\n\r\nimport FoodSelectorModal from '../foodselector/FoodSelectorModal'\r\nimport {FaLayerGroup, FaPlusSquare, FaTrash} from \"react-icons/fa\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {confirmAction} from \"../ConfirmationDialog\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {PATH_FOODDATA_PANEL} from '../../config/Constants';\r\nimport {makeFoodDataPanelComponent} from \"../../service/FoodDataPanelService\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport ReactGA from \"react-ga4\";\r\nimport {GA_ACTION_SELECT_FOOD_ITEM, GA_CATEGORY_FOOD_ANALYZER} from \"../../config/GA_Events\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\n\r\ninterface FoodAnalyzerContainerProps {\r\n    openSelectorModal?: boolean\r\n    openCompositeSelectorModal?: boolean\r\n    onNewFoodItemSelected: () => void\r\n}\r\n\r\nexport default function FoodAnalyzerContainer(props: FoodAnalyzerContainerProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const showFoodSelectorInitialState = props.openSelectorModal === true\r\n    const showCompositeFoodSelectorInitialState = props.openCompositeSelectorModal === true\r\n\r\n    const [showFoodSelector, setShowFoodSelector] = useState<Boolean>(showFoodSelectorInitialState)\r\n    const [showFoodAggregatedFoodSelector, setShowAggregatedFoodSelector] = useState<Boolean>(showCompositeFoodSelectorInitialState)\r\n\r\n    useEffect(() => {\r\n        ReactTooltip.rebuild()\r\n    })\r\n\r\n    ReactTooltip.rebuild()\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const onHide = (): void => {\r\n        setShowFoodSelector(false)\r\n        setShowAggregatedFoodSelector(false)\r\n    }\r\n\r\n    const onSelectFoodItemSubmit = (selectedFoodItem: SelectedFoodItem): void => {\r\n        if (applicationContext === null) {\r\n            return\r\n        }\r\n\r\n        const selectedFoodItemWithComponent = makeFoodDataPanelComponent(\r\n            selectedFoodItem, applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n        if (selectedFoodItemWithComponent !== null) {\r\n            applicationContext.setFoodDataPanelData.addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n        }\r\n\r\n        if (applicationContext?.debug) {\r\n            console.log('FoodAnalyzerContainer: Set new selected item and execute callback. Selected item = ', selectedFoodItemWithComponent)\r\n        }\r\n\r\n        const foodClassNameKey = selectedFoodItem.foodClass?.nameKey\r\n        const nameEntity = applicationContext.foodDataCorpus.foodNames.find(entry => entry.id === foodClassNameKey)\r\n        const foodClassName = nameEntity ? nameEntity.englishName : ''\r\n        const debugMode = applicationContext.debug\r\n\r\n        if (selectedFoodItem.foodItem.aggregated) {\r\n            callEvent(\r\n                debugMode,\r\n                GA_ACTION_SELECT_FOOD_ITEM,\r\n                GA_CATEGORY_FOOD_ANALYZER,\r\n                \"Aggregated Data\",\r\n                selectedFoodItem.compositeSubElements?.length ?? 0\r\n            )\r\n        } else {\r\n            callEvent(\r\n                debugMode,\r\n                GA_ACTION_SELECT_FOOD_ITEM,\r\n                GA_CATEGORY_FOOD_ANALYZER,\r\n                foodClassName,\r\n                selectedFoodItem.foodItem.id\r\n            )\r\n        }\r\n\r\n        props.onNewFoodItemSelected()\r\n    }\r\n\r\n    const onCloseAllTabs = async () => {\r\n        if (await confirmAction(\r\n            applicationStrings.confirm_close_all_tabs[languageContext.language],\r\n            applicationStrings.button_yes[languageContext.language],\r\n            applicationStrings.button_no[languageContext.language],\r\n            {}\r\n        )) {\r\n            history.push(PATH_FOODDATA_PANEL)\r\n            applicationContext?.setFoodDataPanelData.removeAllItemsFromFoodDataPanel()\r\n        }\r\n    }\r\n\r\n    if (applicationContext?.debug) {\r\n        console.log('FoodAnalyzerContainer: Render')\r\n    }\r\n\r\n    const selectedFoodItems = applicationContext?.applicationData.foodDataPanel.selectedFoodItems\r\n    const deleteIconEnabled = selectedFoodItems && selectedFoodItems.length > 0\r\n    ReactTooltip.rebuild()\r\n\r\n    const buttonClass = isMobileDevice() ? \"btn mb-4\" : \"btn mb-4 foodanalyzer-button\"\r\n\r\n    return (\r\n        <div className={\"foodanalyzer-buttonbar\"}>\r\n            <div>\r\n                {showFoodSelector &&\r\n                <FoodSelectorModal onHide={onHide} selectedFoodItemCallback={onSelectFoodItemSubmit}\r\n                                   compositeSelector={false}/>\r\n                }\r\n                {showFoodAggregatedFoodSelector &&\r\n                <FoodSelectorModal onHide={onHide} selectedFoodItemCallback={onSelectFoodItemSubmit}\r\n                                   compositeSelector={true}/>\r\n                }\r\n                <div className={\"d-flex flex-column align-items-center\"}>\r\n                    <Button onClick={() => setShowFoodSelector(!showFoodSelector)}\r\n                            className={buttonClass}\r\n                            data-tip={applicationStrings.tooltip_icon_newFoodItem[languageContext.language]}>\r\n                        <FaPlusSquare/>\r\n                    </Button>\r\n                    <Button onClick={() => setShowAggregatedFoodSelector(!showFoodAggregatedFoodSelector)}\r\n                            className={buttonClass}\r\n                            disabled={isMobileDevice()}\r\n                            data-tip={applicationStrings.tooltip_icon_newFoodItemStack[languageContext.language]}>\r\n                        <FaLayerGroup/>\r\n                    </Button>\r\n                    <Button onClick={() => onCloseAllTabs()}\r\n                            disabled={deleteIconEnabled === false}\r\n                            className={buttonClass}\r\n                            data-tip={applicationStrings.tooltip_icon_removeAll[languageContext.language]}>\r\n                        <FaTrash/>\r\n                    </Button>\r\n                </div>\r\n                <ReactTooltip/>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport CloseableTabs from 'react-closeable-tabs';\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\ninterface TabContainerProps {\r\n    onTabChange: (id: number) => void\r\n    indexToSet: number\r\n}\r\n\r\n// Origin: Vinus Online\r\nexport default function TabContainer(props: TabContainerProps) {\r\n    const applicationData = useContext(ApplicationDataContextStore)\r\n\r\n    const style = {\r\n        buttonTab: {\r\n            border: \"border border-secondary\",\r\n            background: \"none\",\r\n            display: \"inline-flex\",\r\n            verticalAlign: \"middle\",\r\n            minHeight: \"30px\",\r\n            alignItems: \"center\",\r\n            cursor: \"pointer\",\r\n            marginTop: \"-12px\",\r\n            borderBottom: \"2px solid transparent\"\r\n        }\r\n    }\r\n\r\n    if(applicationData?.debug) {\r\n        console.log('TabContainer: Render, food panel data = ', applicationData.applicationData.foodDataPanel.selectedFoodItems)\r\n    }\r\n\r\n    if (!applicationData || !applicationData.applicationData.foodDataPanel.selectedFoodItems) {\r\n        return <div/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <CloseableTabs\r\n                data={applicationData.applicationData.foodDataPanel.selectedFoodItems}\r\n                tabPanelClass=\"tab-panel\"\r\n                tabContentClass=\"tab-content mainPanel\"\r\n                style={style}\r\n                onTabClick={(id) => props.onTabChange(id)}\r\n                activeIndex={applicationData.applicationData.foodDataPanel.selectedFoodItemIndex}\r\n            />\r\n        </div>\r\n    )\r\n}","import { AMOUNT_PORTION, CARBS_DATA_BASE, CARBS_DATA_DETAIL, CHART_TYPE_BAR, CHART_TYPE_PIE, GRAM, LIPIDS_DATA_BASE, LIPIDS_DATA_OMEGA, TAB_BASE_DATA, TAB_CARBS_DATA, TAB_LIPIDS_DATA, TAB_MINERAL_DATA, TAB_PROTEINS_DATA, TAB_VITAMIN_DATA } from \"../../config/Constants\"\r\nimport { ChartConfigData, DirectCompareChartConfigData, GeneralizedChartConfig } from \"../../types/livedata/ChartConfigData\"\r\nimport { convertBooleanToDigit, convertStringToBoolean } from \"../calculation/MathService\"\r\n\r\n/**\r\n * Converts/encodes a food data panel chart config sub-element into the corresponding URI query string.\r\n */\r\nexport function makeChartConfigUriString(chartConfigData: ChartConfigData | DirectCompareChartConfigData, selectedDataPage: string): string {\r\n\tlet chartObject: any\r\n\tswitch(selectedDataPage) {\r\n\t\tcase TAB_BASE_DATA:\r\n\t\t\tchartObject = chartConfigData.baseChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_LIPIDS_DATA:\r\n\t\t\tchartObject = chartConfigData.lipidsChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_CARBS_DATA:\r\n\t\t\tchartObject = chartConfigData.carbsChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_VITAMIN_DATA:\r\n\t\t\tchartObject = chartConfigData.vitaminChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_MINERAL_DATA:\r\n\t\t\tchartObject = chartConfigData.mineralChartConfig\r\n\t\t\tbreak\r\n\t\tcase TAB_PROTEINS_DATA:\r\n\t\t\tchartObject = chartConfigData.proteinChartConfig\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tchartObject = {}\r\n\t}\r\n\t\r\n\tconst generalizedChartConfig = makeGeneralizedChartConfig(chartObject)\r\n\treturn convertGeneralizedChartConfigToString(generalizedChartConfig)\r\n}\r\n\r\n\r\n/**\r\n * Converts/decodes a URI query string to get the encoded chart config data of the currently selected data page\r\n * in the food data panel.\r\n * The resulting chart config will be added to the existing chart configuration data object passed to this method.\r\n */\r\nexport function getUpdatedChartConfig(chartConfigData: ChartConfigData, chartConfigUriString: string, selectedDataPage: string): ChartConfigData {\r\n\tconst chartConfigFromUri = convertGeneralizedChartConfigStringToObject(chartConfigUriString)\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart} = chartConfigFromUri\r\n\t\r\n\tif(selectedDataPage === TAB_BASE_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || showDetails === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, baseChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tshowDetails: showDetails\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_LIPIDS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, lipidsChartConfig: {\r\n\t\t\t\t...chartConfigData.lipidsChartConfig,\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart: subChart\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_CARBS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, carbsChartConfig: {\r\n\t\t\t\t...chartConfigData.carbsChartConfig,\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart: subChart\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage === TAB_MINERAL_DATA || selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\tif(portionType === undefined || expand100 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\tconst barChartConfig = {\r\n\t\t\t\tportionType: portionType,\r\n\t\t\t\texpand100: expand100,\r\n\t\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_VITAMIN_DATA) {\r\n\t\t\treturn {...chartConfigData, vitaminChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_MINERAL_DATA) {\r\n\t\t\treturn {...chartConfigData, mineralChartConfig: barChartConfig}\r\n\t\t}\r\n\t\t\r\n\t\tif(selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\t\treturn {...chartConfigData, proteinChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\treturn chartConfigData\r\n}\r\n\r\n\r\nexport function getUpdatedDirectCompareChartConfig(chartConfigData: DirectCompareChartConfigData, \r\n\t\tchartConfigUriString: string, selectedDataPage: string): DirectCompareChartConfigData {\r\n\tconst chartConfigFromUri = convertGeneralizedChartConfigStringToObject(chartConfigUriString)\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart, subChart2, synchronize} = chartConfigFromUri\r\n\t\r\n\tif(selectedDataPage === TAB_BASE_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || showDetails === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, baseChartConfig: {\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tshowDetails: showDetails\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_LIPIDS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined || subChart2 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, lipidsChartConfig: {\r\n\t\t\t\t...chartConfigData.lipidsChartConfig,\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart1: subChart,\r\n\t\t\t\tsubChart2: subChart2,\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_CARBS_DATA) {\r\n\t\tif(!chartType || showLegend === undefined || subChart === undefined || subChart2 === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\treturn {...chartConfigData, carbsChartConfig: {\r\n\t\t\t\t...chartConfigData.carbsChartConfig,\r\n\t\t\t\tchartType: chartType,\r\n\t\t\t\tshowLegend: showLegend,\r\n\t\t\t\tsubChart1: subChart,\r\n\t\t\t\tsubChart2: subChart2,\r\n\t\t\t\thideRemainders: false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(selectedDataPage === TAB_VITAMIN_DATA || selectedDataPage === TAB_MINERAL_DATA || selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\tif(portionType === undefined || expand100 === undefined || synchronize === undefined) {\r\n\t\t\treturn chartConfigData\r\n\t\t}\r\n\r\n\t\tconst barChartConfig = {\r\n\t\t\t\tportionType: portionType,\r\n\t\t\t\texpand100: expand100,\r\n\t\t\t\tsynchronize: synchronize\r\n\t\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_VITAMIN_DATA) {\r\n\t\t\treturn {...chartConfigData, vitaminChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t\tif(selectedDataPage === TAB_MINERAL_DATA) {\r\n\t\t\treturn {...chartConfigData, mineralChartConfig: barChartConfig}\r\n\t\t}\r\n\t\t\r\n\t\tif(selectedDataPage === TAB_PROTEINS_DATA) {\r\n\t\t\treturn {...chartConfigData, proteinChartConfig: barChartConfig}\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\treturn chartConfigData\r\n}\r\n\r\n\r\n\r\nexport function makeGeneralizedChartConfig(chartObject: any): GeneralizedChartConfig {\r\n\tconst generalizedChartObject: GeneralizedChartConfig = {}\r\n\tif(chartObject.chartType) {\r\n\t\tgeneralizedChartObject.chartType = chartObject.chartType\r\n\t}\r\n\t\r\n\tif(chartObject.expand100) {\r\n\t\tgeneralizedChartObject.expand100 = chartObject.expand100\r\n\t}\r\n\t\r\n\tif(chartObject.showDetails) {\r\n\t\tgeneralizedChartObject.showDetails = chartObject.showDetails\r\n\t}\r\n\t\r\n\tif(chartObject.showLegend) {\r\n\t\tgeneralizedChartObject.showLegend = chartObject.showLegend\r\n\t}\r\n\t\r\n\tif(chartObject.portionType) {\r\n\t\tgeneralizedChartObject.portionType = chartObject.portionType\r\n\t}\r\n\r\n\tif(chartObject.subChart) {\r\n\t\tgeneralizedChartObject.subChart = chartObject.subChart\r\n\t}\r\n\t\r\n\tif(chartObject.subChart2) {\r\n\t\tgeneralizedChartObject.subChart2 = chartObject.subChart2\r\n\t}\r\n\t\r\n\tif(chartObject.synchronize) {\r\n\t\tgeneralizedChartObject.synchronize = chartObject.synchronize\r\n\t}\r\n\t\r\n\treturn generalizedChartObject\r\n}\r\n\r\n\r\nexport function convertGeneralizedChartConfigToString(chartObject: GeneralizedChartConfig) {\r\n\tconst {chartType, expand100, showDetails, showLegend, portionType, subChart, subChart2, synchronize} = chartObject\r\n\t\r\n\tconst chartTypeKey = chartType === undefined || chartType === null ? 0 : chartType === CHART_TYPE_PIE ? 1 : 2\r\n\tconst portionTypeKey = portionType === undefined || portionType === null ? 0 : portionType === AMOUNT_PORTION ? 1 : 2\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\tconst expand100Key = expand100 ? convertBooleanToDigit(expand100) : 0\r\n\tconst showLegendKey = showLegend ? convertBooleanToDigit(showLegend) : 0\r\n\tconst showDetailsKey = showDetails ? convertBooleanToDigit(showDetails) : 0\r\n\t\r\n\tconst subChartKey = subChart ? getSubChartKey(subChart) : 0\r\n\tconst subChartKey2 = subChart2 ? getSubChartKey(subChart2) : 0\r\n\tconst synchronizeKey = synchronize ? convertBooleanToDigit(synchronize) : 0\r\n\t\r\n\treturn `${chartTypeKey}${portionTypeKey}${expand100Key}${showLegendKey}${showDetailsKey}${subChartKey}${subChartKey2}${synchronizeKey}`\r\n}\r\n\r\n\r\nexport function convertGeneralizedChartConfigStringToObject(uriString: string): GeneralizedChartConfig {\r\n\tif(!uriString) {\r\n\t\treturn {}\r\n\t}\r\n\t\r\n\tconst stringToParse = uriString.trim()\r\n\tif(stringToParse.length !== 8) {\r\n\t\treturn {}\r\n\t}\r\n\t\r\n\tconst chartTypeKey = stringToParse.substring(0, 1)\r\n\tconst portionTypeKey = stringToParse.substring(1, 2)\r\n\tconst expand100Key = stringToParse.substring(2, 3)\r\n\tconst showLegendKey = stringToParse.substring(3, 4)\r\n\tconst showDetailsKey = stringToParse.substring(4, 5)\r\n\tconst subChartKey = stringToParse.substring(5, 6)\r\n\tconst subChartKey2 = stringToParse.substring(6, 7)\r\n\tconst synchronizeKey = stringToParse.substring(7, 8)\r\n\t\r\n\tconst chartTypeNumber = parseInt(chartTypeKey)\r\n\tconst portionTypeNumber = parseInt(portionTypeKey)\r\n\tconst subChartNumber = parseInt(subChartKey)\r\n\tconst subChartNumber2 = parseInt(subChartKey2)\r\n\t\t\r\n\tconst chartType = chartTypeNumber === 0 || isNaN(chartTypeNumber) \r\n\t\t\t\t\t\t? undefined \r\n\t\t\t\t\t\t: chartTypeNumber === 1 ? CHART_TYPE_PIE : CHART_TYPE_BAR\r\n\t\t\t\t\t\t\r\n\tconst portionType = portionTypeNumber === 0 || isNaN(portionTypeNumber) \r\n\t\t\t\t\t\t? undefined \r\n\t\t\t\t\t\t: portionTypeNumber === 1 ? AMOUNT_PORTION : GRAM\r\n\t\r\n\tconst subChart = subChartNumber === 0 || isNaN(subChartNumber) ? undefined : getSubChartFromKey(subChartNumber)\r\n\tconst subChart2 = subChartNumber2 === 0 || isNaN(subChartNumber2) ? undefined : getSubChartFromKey(subChartNumber2)\r\n\t\r\n\treturn {\r\n\t\tchartType: chartType,\r\n\t\tportionType: portionType,\r\n\t\texpand100: convertStringToBoolean(expand100Key),\r\n\t\tshowLegend: convertStringToBoolean(showLegendKey),\r\n\t\tshowDetails: convertStringToBoolean(showDetailsKey),\r\n\t\tsubChart: subChart ? subChart : undefined,\r\n\t\tsubChart2: subChart2 ? subChart2 : undefined,\r\n\t\tsynchronize: convertStringToBoolean(synchronizeKey)\r\n\t}\r\n\t\r\n}\r\n\r\n\r\nexport function getSubChartKey(subChart: string): number {\r\n\tswitch(subChart) {\r\n\t\tcase CARBS_DATA_BASE:\r\n\t\t\treturn 1\r\n\t\tcase CARBS_DATA_DETAIL:\r\n\t\t\treturn 2\r\n\t\tcase LIPIDS_DATA_BASE:\r\n\t\t\treturn 3\r\n\t\tcase LIPIDS_DATA_OMEGA:\r\n\t\t\treturn 4\r\n\t\tdefault:\r\n\t\t\treturn 0\r\n\t}\r\n}\r\n\r\nexport function getSubChartFromKey(key: number): string | null {\r\n\tswitch(key) {\r\n\t\tcase 1:\r\n\t\t\treturn CARBS_DATA_BASE\r\n\t\tcase 2:\r\n\t\t\treturn CARBS_DATA_DETAIL\r\n\t\tcase 3:\r\n\t\t\treturn LIPIDS_DATA_BASE\r\n\t\tcase 4:\r\n\t\t\treturn LIPIDS_DATA_OMEGA\r\n\t\tdefault:\r\n\t\t\treturn null\r\n\t}\t\t\r\n}\r\n","import {SEX_FEMALE, SEX_MALE} from \"../../config/Constants\"\r\nimport {ChartConfigData} from \"../../types/livedata/ChartConfigData\"\r\nimport {FoodItemUriData, SimpleFoodItemUriData} from \"../../types/livedata/UriData\"\r\nimport {UserData} from \"../../types/livedata/UserData\"\r\nimport {PortionData} from \"../../types/nutrientdata/FoodItem\"\r\nimport {getPalCategory, getPalValue} from \"../calculation/EnergyService\"\r\nimport {convertBooleanToDigit, convertStringToBoolean, getNumberOfFixedLength} from \"../calculation/MathService\"\r\nimport {getUpdatedChartConfig, makeChartConfigUriString} from \"./ChartConfigConverter\"\r\n\r\n\r\nexport function makeFoodDataPanelDefaultUri(foodItemData: FoodItemUriData,\r\n\t\tuserData: UserData, selectedDataPage: string, selectedDisplayMode: string, chartConfigData: ChartConfigData) {\r\n\tconst foodItemDataString = makeFoodItemDefaultUri(foodItemData)\r\n\tconst userDataString = convertUserDataObjectToString(userData)\r\n\tconst chartConfigString = makeChartConfigUriString(chartConfigData, selectedDataPage)\r\n\treturn `${foodItemDataString};${selectedDataPage};${selectedDisplayMode};${userDataString};${chartConfigString}`\r\n}\r\n\r\nexport function makeFoodItemDefaultUri(foodItemData: FoodItemUriData) {\r\n\t\tconst portionString = convertPortionDataObjectToString(foodItemData.portionData)\t\r\n\t\tconst supplementValue = convertBooleanToDigit(foodItemData.supplementData)\r\n\t\tconst combineValue = convertBooleanToDigit(foodItemData.combineData)\r\n\t\t\r\n\t\treturn `${foodItemData.foodItemId};${foodItemData.source};${portionString};${supplementValue}${combineValue}`\r\n}\r\n\r\nexport function parseFoodDataPanelDefaultUri(uri: string, chartConfigData: ChartConfigData): SimpleFoodItemUriData | null {\r\n\tconst fragments = prepareUriForParsing(uri).split(\";\")\r\n\tif(fragments.length !== 8) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst selectedDataPage = fragments[4]\r\n\tconst displayMode = fragments[5]\r\n\tconst userData = convertUserDataStringToObject(fragments[6])\r\n\tconst chartConfigString = fragments[7]\r\n\tconst foodItemUriData = getFoodItemUriData(fragments)\r\n\t\r\n\tif(!userData || !foodItemUriData) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst newChartConfigData = getUpdatedChartConfig(chartConfigData, chartConfigString, selectedDataPage)\r\n\t\r\n\treturn {\r\n\t\tselectedFoodItem: foodItemUriData,\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tdisplayMode: displayMode,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Retrieves the food item uri data from a fragments string. It will always extract those\r\n * data objects from the beginning of the array, no matter how long it is.\r\n */\r\nexport function getFoodItemUriData(fragments: Array<string>): FoodItemUriData | null {\r\n\tconst foodItemId = parseInt(fragments[0])\r\n\tconst source = parseInt(fragments[1])\r\n\tconst portionData = convertPortionDataStringToObject(fragments[2])\r\n\tconst booleanData = fragments[3]\r\n\t\r\n\tconst supplementData = convertStringToBoolean(booleanData.substring(0,1))\r\n\tconst combineData = convertStringToBoolean(booleanData.substring(1,2))\r\n\t\r\n\tif(!portionData || booleanData.length < 2) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\treturn {\r\n\t\tfoodItemId: foodItemId,\r\n\t\tsource: source,\r\n\t\tportionData: portionData,\r\n\t\tsupplementData: supplementData,\r\n\t\tcombineData: combineData\r\n\t}\r\n}\r\n\r\nexport function convertUserDataObjectToString(userData: UserData): string {\r\n\tconst weight = getNumberOfFixedLength(userData.weight, 3)\r\n\tconst age = getNumberOfFixedLength(userData.age, 3)\r\n\tconst size = getNumberOfFixedLength(userData.size, 3)\r\n\r\n\tconst palValue = getNumberOfFixedLength( getPalCategory(userData.palValue), 2)\r\n\tconst sex = userData.sex === SEX_MALE ? 1 : 0\r\n\t\r\n\tconst pregnant = convertBooleanToDigit(userData.pregnant)\r\n\tconst breastFeeding = convertBooleanToDigit(userData.breastFeeding)\r\n\tconst leisureSports = convertBooleanToDigit(userData.leisureSports)\r\n\t\t\r\n\treturn `${weight}${age}${size}${palValue}${sex}${pregnant}${breastFeeding}${leisureSports}`\r\n}\r\n\r\n\r\nexport function convertUserDataStringToObject(userDataString: string): UserData | null {\r\n\tif(userDataString.length < 15) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst weight = userDataString.substring(0,3)\r\n\tconst age = userDataString.substring(3,6)\r\n\tconst size = userDataString.substring(6,9)\r\n\tconst palValueInt = userDataString.substring(9,11)\r\n\tconst sex = userDataString.substring(11,12)\r\n\tconst pregnant = userDataString.substring(12,13)\r\n\tconst breastFeeding = userDataString.substring(13,14)\r\n\tconst leisureSports = userDataString.substring(14,15)\r\n\t\r\n\tconst palValue = getPalValue(parseInt(palValueInt))\r\n\t\r\n\treturn {\r\n\t\tweight: parseInt(weight),\r\n\t\tage: parseInt(age),\r\n\t\tsize: parseInt(size),\r\n\t\tpalValue: palValue,\r\n\t\tsex: sex === \"1\" ? SEX_MALE : SEX_FEMALE,\r\n\t\tpregnant: convertStringToBoolean(pregnant),\r\n\t\tbreastFeeding: convertStringToBoolean(breastFeeding),\r\n\t\tleisureSports: convertStringToBoolean(leisureSports),\r\n\t\tinitialValues: false\r\n\t}\r\n}\r\n\r\n\r\nexport function convertPortionDataObjectToString(portionData: PortionData): string {\r\n\treturn `${portionData.portionType}_${portionData.amount}`\r\n}\r\n\r\nexport function convertPortionDataStringToObject(portionDataString: string): PortionData | null {\r\n\tconst fragments = portionDataString.split(\"_\")\r\n\tif(fragments.length !== 2) {\r\n\t\treturn null\r\n\t}\r\n\treturn {\r\n\t\tportionType: parseInt(fragments[0]),\r\n\t\tamount: parseInt(fragments[1])\r\n\t}\r\n}\r\n\r\n\r\nexport function prepareUriForParsing(uri: string): string {\r\n\t// Some websites like youtube transform the semicolons in the URL to %3B, which later need to be translated back to semicolons\r\n\treturn uri.replace(/%3B/g, \";\")\r\n}\r\n\r\n","import { ChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\"\r\nimport { AggregatedFoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { getUpdatedChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\nimport {\r\n\tconvertUserDataObjectToString,\r\n\tconvertUserDataStringToObject,\r\n\tprepareUriForParsing\r\n} from \"./FoodDataPanelUriService\"\r\n\r\n\r\ninterface Replacemet {\r\n\tkey: string\r\n\tshort: string\r\n}\r\n\r\nconst separator = \"++\"\r\n\r\nconst metaDataReplacement: Array<Replacemet> = [\r\n\t{key: \"nutrientDataList\", short: \"_mA\"},\r\n\t{key: \"foodItem\", short: \"_mB\"},\r\n\t{key: \"sourceItemId\", short: \"_mC\"},\r\n\t{key: \"source\", short: \"_mD\"},\r\n\t{key: \"url\", short: \"_mE\"},\r\n\t{key: \"name\", short: \"_mF\"},\r\n\t{key: \"id\", short: \"_mG\"},\r\n]\r\n\t\r\nconst nutrientCategoryReplacement: Array<Replacemet> = [\r\n\t{key: \"baseData\", short: \"_nA\"},\r\n\t{key: \"carbohydrateData\", short: \"_nB\"},\r\n\t{key: \"vitaminData\", short: \"_nC\"},\r\n\t{key: \"mineralData\", short: \"_nD\"},\r\n\t{key: \"lipidData\", short: \"_nE\"},\r\n\t{key: \"proteinData\", short: \"_nF\"},\r\n]\r\n\r\nconst baseDataReplacements: Array<Replacemet> = [\r\n\t{key: \"energy\", short: \"_bA\"},\r\n\t{key: \"water\", short: \"_bB\"},\r\n\t{key: \"carbohydrates\", short: \"_bC\"},\r\n\t{key: \"lipids\", short: \"_bD\"},\r\n\t{key: \"proteins\", short: \"_bE\"},\r\n\t{key: \"dietaryFibers\", short: \"_bF\"},\r\n\t{key: \"ash\", short: \"_bG\"},\r\n\t{key: \"alcohol\", short: \"_bH\"}\r\n]\r\n\r\nconst carbsDataReplacements: Array<Replacemet> = [\r\n\t{key: \"sugar\", short: \"_cA\"},\r\n\t{key: \"sucrose\", short: \"_cB\"},\r\n\t{key: \"glucose\", short: \"_cC\"},\r\n\t{key: \"lactose\", short: \"_cD\"},\r\n\t{key: \"fructose\", short: \"_cE\"},\r\n\t{key: \"galactose\", short: \"_cF\"},\r\n\t{key: \"maltose\", short: \"_cG\"},\r\n\t{key: \"starch\", short: \"_cH\"}\r\n]\r\n\r\nconst lipidsDataReplacements: Array<Replacemet> = [\r\n\t{key: \"saturated\", short: \"_lA\"},\r\n\t{key: \"unsaturatedMono\", short: \"_lB\"},\r\n\t{key: \"unsaturatedPoly\", short: \"_lC\"},\r\n\t{key: \"transFattyAcids\", short: \"_lD\"},\r\n\t{key: \"cholesterol\", short: \"_lE\"},\r\n\t{key: \"galactose\", short: \"_lF\"},\r\n\t{key: \"omegaData\", short: \"_lG\"},\r\n\t{key: \"omega3\", short: \"_lH\"},\r\n\t{key: \"omega6\", short: \"_li\"},\r\n\t{key: \"uncertain\", short: \"_lj\"},\r\n\t{key: \"uncertainRatio\", short: \"_li\"}\r\n]\r\n\r\nconst mineralDataReplacement: Array<Replacemet> = [\r\n\t{key: \"calcium\", short: \"_bA\"},\r\n\t{key: \"iron\", short: \"_bB\"},\r\n\t{key: \"magnesium\", short: \"_bC\"},\r\n\t{key: \"phosphorus\", short: \"_bD\"},\r\n\t{key: \"potassium\", short: \"_bE\"},\r\n\t{key: \"sodium\", short: \"_bF\"},\r\n\t{key: \"zinc\", short: \"_bG\"},\r\n\t{key: \"selenium\", short: \"_bH\"},\r\n\t{key: \"manganese\", short: \"_bI\"},\r\n\t{key: \"copper\", short: \"_bJ\"}\r\n]\r\n\r\nconst vitaminDataReplacement: Array<Replacemet> = [\r\n\t{key: \"a\", short: \"_vA\"},\r\n\t{key: \"b1\", short: \"_vB\"},\r\n\t{key: \"b2\", short: \"_vC\"},\r\n\t{key: \"b3\", short: \"_vD\"},\r\n\t{key: \"b5\", short: \"_vE\"},\r\n\t{key: \"b7\", short: \"_vF\"},\r\n\t{key: \"b9\", short: \"_vG\"},\r\n\t{key: \"b12\", short: \"_vH\"},\r\n\t{key: \"c\", short: \"_vI\"},\r\n\t{key: \"d\", short: \"_vJ\"},\r\n\t{key: \"e\", short: \"_vK\"},\r\n\t{key: \"k\", short: \"_vL\"}\r\n]\r\n\r\nconst carotenoidDataReplacement: Array<Replacemet> = [\r\n\t{key: \"caroteneAlpha\", short: \"_xA\"},\r\n\t{key: \"caroteneBeta\", short: \"_xB\"},\r\n\t{key: \"cryptoxanthin\", short: \"_xC\"},\r\n\t{key: \"lycopene\", short: \"_xD\"},\r\n\t{key: \"lutein\", short: \"_xE\"},\r\n]\r\n\r\nconst proteinDataReplacement: Array<Replacemet> = [\r\n\t{key: \"tryptophan\", short: \"_bA\"},\r\n\t{key: \"threonine\", short: \"_bB\"},\r\n\t{key: \"isoleucine\", short: \"_bC\"},\r\n\t{key: \"leucine\", short: \"_bD\"},\r\n\t{key: \"lysine\", short: \"_bE\"},\r\n\t{key: \"methionine\", short: \"_bF\"},\r\n\t{key: \"cystine\", short: \"_bG\"},\r\n\t{key: \"phenylalanine\", short: \"_bH\"},\r\n\t{key: \"tyrosine\", short: \"_bI\"},\r\n\t{key: \"arginine\", short: \"_bJ\"},\r\n\t{key: \"histidine\", short: \"_bK\"},\r\n\t{key: \"alanine\", short: \"_bL\"},\r\n\t{key: \"asparticAcid\", short: \"_bM\"},\r\n\t{key: \"glycine\", short: \"_bN\"},\r\n\t{key: \"proline\", short: \"_bO\"},\r\n\t{key: \"serine\", short: \"_bP\"},\r\n]\r\n\r\nconst replacements: Array<Array<Replacemet>> = [\r\n\tmetaDataReplacement,\r\n\tnutrientCategoryReplacement,\r\n\tbaseDataReplacements,\r\n\tcarbsDataReplacements,\r\n\tlipidsDataReplacements,\r\n\tmineralDataReplacement,\r\n\tvitaminDataReplacement,\r\n\tcarotenoidDataReplacement,\r\n\tproteinDataReplacement\r\n]\r\n\r\n\r\nexport function convertAggregatedDataJsonToUriString(uriData: AggregatedFoodItemUriData): string {\t\r\n\tconst objectToParse: SelectedFoodItem = {...uriData.selectedFoodItem, compositeSubElements: undefined, component: undefined, foodClass: undefined}\r\n\tlet selectedFoodItemString = JSON.stringify(objectToParse)\r\n\t\r\n\treplacements.forEach(replacementArray => {\r\n\t\treplacementArray.forEach(replacement => selectedFoodItemString = selectedFoodItemString.replace(`\"${replacement.key}\"`, replacement.short))\r\n\t})\r\n\t\r\n\tconst userDataString = convertUserDataObjectToString(uriData.userData)\r\n\tconst chartConfigString = makeChartConfigUriString(uriData.chartConfigData, uriData.selectedDataPage)\r\n\t\r\n\treturn `${uriData.selectedDataPage}${separator}${selectedFoodItemString}${separator}${userDataString}${separator}${chartConfigString}`\r\n}\r\n\r\nexport function convertAggregatedUriStringToObject(chartConfigData: ChartConfigData, uriString: string): AggregatedFoodItemUriData | null {\r\n\tconst fragments = uriString.split(separator)\r\n\tif(fragments.length !== 4) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\tconst selectedDataPage = fragments[0]\r\n\tlet selectedFoodItem: SelectedFoodItem = convertUriStringToSelectedFoodItem( fragments[1])\r\n\tselectedFoodItem = {...selectedFoodItem, aggregated: true}\r\n\t\r\n\tconst userData: UserData | null = convertUserDataStringToObject(fragments[2])\r\n\tconst newChartConfigData: ChartConfigData = getUpdatedChartConfig(chartConfigData, fragments[3], selectedDataPage)\r\n\t\r\n\tif(!userData) {\r\n\t\treturn null\r\n\t}\r\n\t\t\r\n\treturn {\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tselectedFoodItem: selectedFoodItem,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n}\r\n\r\n\r\nexport function convertUriStringToSelectedFoodItem(uriString: string): SelectedFoodItem {\r\n\tlet stringToParse = prepareUriForParsing(uriString).trim()\r\n\tstringToParse = stringToParse.replace(/%22/g, \"\\\"\")\r\n\tstringToParse = stringToParse.replace(/%20/g, \" \")\r\n\t\r\n\treplacements.forEach(replacementArray => {\r\n\t\treplacementArray.forEach(replacement => stringToParse = stringToParse.replace(replacement.short, `\"${replacement.key}\"`))\r\n\t})\r\n\t\r\n\treturn JSON.parse(stringToParse)\r\n}","import { UserData } from \"../types/livedata/UserData\";\r\n\r\nexport const USERDATA_ERROR_AGE = \"userdata error age\"\r\nexport const USERDATA_ERROR_WEIGHT = \"userdata error weight\"\r\nexport const USERDATA_ERROR_SIZE = \"userdata error size\"\r\nexport const USERDATA_OK = \"userdata ok\"\r\n\r\nexport function checkUserDataValidity(userData: UserData): string {\r\n\tconst {age, size, weight} = userData\r\n\r\n\tif (age != null && (age < 15 || age > 100 || isNaN(age))) {\r\n\t\treturn USERDATA_ERROR_AGE\r\n    } else if (size != null && (size < 80 || size > 225 || isNaN(size))) {\r\n\t\treturn USERDATA_ERROR_SIZE\r\n\t} else if (weight != null && (weight < 30 || weight > 250 || isNaN(weight))) {\r\n\t\treturn USERDATA_ERROR_WEIGHT\r\n    }\r\n\r\n    return USERDATA_OK\r\n}","import FoodAnalyzerContainer from \"./FoodAnalyzerContainer\";\r\nimport {useContext, useEffect} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport TabContainer from \"./TabContainer\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {\r\n    PATH_FOODDATA_PANEL,\r\n    QUERYKEY_DATAPANEL_ADD, QUERYKEY_DATAPANEL_ADD_COMPOSITE,\r\n    QUERYKEY_DATAPANEL_AGGREGATED,\r\n    QUERYKEY_DATAPANEL_ITEM\r\n} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {makeFoodDataPanelComponent} from \"../../service/FoodDataPanelService\";\r\nimport {AggregatedFoodItemUriData, FoodItemUriData} from \"../../types/livedata/UriData\";\r\nimport {makeFoodDataPanelDefaultUri, parseFoodDataPanelDefaultUri} from \"../../service/uri/FoodDataPanelUriService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {\r\n    convertAggregatedDataJsonToUriString,\r\n    convertAggregatedUriStringToObject\r\n} from \"../../service/uri/FoodDataPanelAggregatedUriService\";\r\nimport {checkUserDataValidity, USERDATA_OK} from \"../../service/UserDataService\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\nimport {FaExclamationTriangle} from \"react-icons/fa\";\r\n\r\nexport default function FoodDataPanelContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const queryString = window.location.search.substring(1)\r\n    const equalOperator = queryString.indexOf(\"=\")\r\n    const key = queryString.substring(0, equalOperator)\r\n    const value = queryString.substring(equalOperator + 1)\r\n\r\n    const openSelectorModal = key === QUERYKEY_DATAPANEL_ADD && value === \"1\"\r\n    const openCompositeSelectorModal = key === QUERYKEY_DATAPANEL_ADD_COMPOSITE && value === \"1\"\r\n\r\n    useEffect(() => {\r\n        buildDataPanelPageFromURI()\r\n    }, [applicationContext?.applicationData.foodDataPanel.selectedFoodItemIndex,\r\n        applicationContext?.applicationData.foodDataPanel.selectedFoodItems,\r\n        applicationContext?.applicationData.foodDataPanel.selectedDataPage,\r\n        applicationContext?.applicationData.foodDataPanel.displayMode,\r\n        applicationContext?.applicationData.foodDataPanel.chartConfigData,\r\n        applicationContext?.userData])\r\n\r\n    const buildDataPanelPageFromURI = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const {selectedFoodItemIndex, selectedFoodItems} = applicationContext.applicationData.foodDataPanel\r\n\r\n        if (selectedFoodItemIndex === null || !selectedFoodItems || selectedFoodItems.length === 0) {\r\n            createDataFromUriQuery()\r\n        } else {   // Set new URI Query\r\n            updateUriQuery(selectedFoodItemIndex)\r\n        }\r\n    }\r\n\r\n    if (!applicationContext || !applicationContext.ready) {\r\n        return <div/>\r\n    }\r\n\r\n    const chartConfigData = applicationContext.applicationData.foodDataPanel.chartConfigData\r\n\r\n    const updateUriQuery = (selectedFoodItemIndex: number) => {\r\n        const selectedFoodItem = selectedFoodItems[selectedFoodItemIndex]\r\n        const userData = applicationContext.userData\r\n        const {selectedDataPage, displayMode, chartConfigData} = applicationContext.applicationData.foodDataPanel\r\n\r\n        // New query for aggregated food item\r\n        if (selectedFoodItem.aggregated) {\r\n            const uriDataObject: AggregatedFoodItemUriData = {\r\n                selectedFoodItem: {...selectedFoodItem, component: undefined},\r\n                selectedDataPage: selectedDataPage,\r\n                userData: userData,\r\n                chartConfigData: chartConfigData\r\n            }\r\n\r\n            const query = convertAggregatedDataJsonToUriString(uriDataObject)\r\n\r\n            history.push({\r\n                pathName: PATH_FOODDATA_PANEL,\r\n                search: `${QUERYKEY_DATAPANEL_AGGREGATED}=${query}`\r\n            })\r\n        } else {   // New query for a default food item\r\n            const {portion, selectedSource, supplementData, combineData} = selectedFoodItem\r\n            const foodItemData: FoodItemUriData = {\r\n                foodItemId: selectedFoodItem.foodItem.id,\r\n                portionData: portion,\r\n                source: selectedSource,\r\n                supplementData: supplementData,\r\n                combineData: combineData\r\n            }\r\n            const query = makeFoodDataPanelDefaultUri(foodItemData, userData, selectedDataPage, displayMode, chartConfigData)\r\n\r\n            history.push({\r\n                pathName: PATH_FOODDATA_PANEL,\r\n                search: `${QUERYKEY_DATAPANEL_ITEM}=${query}`\r\n            })\r\n        }\r\n    }\r\n\r\n    const createDataFromUriQuery = () => {\r\n        const {\r\n            addItemToFoodDataPanel,\r\n            setSelectedDataPage,\r\n            setSelectedDisplayMode\r\n        } = applicationContext.setFoodDataPanelData\r\n\r\n        // Set data from an aggregated food item query\r\n        if (key === QUERYKEY_DATAPANEL_AGGREGATED && value.length > 1) {\r\n            try {\r\n                const uriDataObject: AggregatedFoodItemUriData | null = convertAggregatedUriStringToObject(chartConfigData, value)\r\n                if (!uriDataObject) {\r\n                    return\r\n                }\r\n\r\n                if (checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n                    return\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(uriDataObject.chartConfigData)\r\n                setSelectedDataPage(uriDataObject.selectedDataPage)\r\n                applicationContext.setUserData(uriDataObject.userData)\r\n\r\n                const selectedFoodItemWithComponent = makeFoodDataPanelComponent(uriDataObject.selectedFoodItem,\r\n                    applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n                if (selectedFoodItemWithComponent) {\r\n                    selectedFoodItemWithComponent.aggregated = true\r\n                    addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n                }\r\n            } catch (e) {\r\n                if(applicationContext.debug) {\r\n                    console.log(e)\r\n                }\r\n            }\r\n        }\r\n\r\n        // Set data from a simple food item (create data from query parameters)\r\n        if (key === QUERYKEY_DATAPANEL_ITEM && value.length > 1) {\r\n            const uriDataObject = parseFoodDataPanelDefaultUri(value, chartConfigData)\r\n            if (uriDataObject) {\r\n                const foodItem = applicationContext.foodDataCorpus.foodItems.find(\r\n                    foodItem => foodItem.id === uriDataObject.selectedFoodItem.foodItemId\r\n                )\r\n\r\n                if (!foodItem) {\r\n                    return\r\n                }\r\n\r\n                if (checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n                    return\r\n                }\r\n\r\n                applicationContext.setUserData(uriDataObject.userData)\r\n                const foodClass = applicationContext.foodDataCorpus.foodClasses.find(foodClass => foodClass.id === foodItem.foodClass)\r\n\r\n                const selectedFoodItem: SelectedFoodItem = {\r\n                    id: 1,\r\n                    foodItem: foodItem,\r\n                    foodClass: foodClass,\r\n                    portion: uriDataObject.selectedFoodItem.portionData,\r\n                    selectedSource: uriDataObject.selectedFoodItem.source,\r\n                    combineData: uriDataObject.selectedFoodItem.combineData,\r\n                    supplementData: uriDataObject.selectedFoodItem.supplementData\r\n                }\r\n\r\n                setSelectedDataPage(uriDataObject.selectedDataPage)\r\n                setSelectedDisplayMode(uriDataObject.displayMode)\r\n\r\n                const selectedFoodItemWithComponent = makeFoodDataPanelComponent(selectedFoodItem,\r\n                    applicationContext.foodDataCorpus.foodNames, languageContext.language)\r\n\r\n                if (selectedFoodItemWithComponent) {\r\n                    addItemToFoodDataPanel(selectedFoodItemWithComponent)\r\n                }\r\n\r\n                applicationContext.setFoodDataPanelData.updateFoodDataPanelChartConfig(uriDataObject.chartConfigData)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    const selectedFoodItems = applicationContext.applicationData.foodDataPanel.selectedFoodItems\r\n\r\n    const onTabChange = (foodId) => {\r\n        buildDataPanelPageFromURI()\r\n        for (let i = 0; i < selectedFoodItems.length; i++) {\r\n            if (selectedFoodItems[i].id === foodId) {\r\n                applicationContext.setFoodDataPanelData.setSelectedFoodTab(i)\r\n            }\r\n        }\r\n    }\r\n\r\n    const onNewFoodItemSelected = (): void => {\r\n        buildDataPanelPageFromURI()\r\n        const newTabIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItems.length - 1\r\n        applicationContext.setFoodDataPanelData.setSelectedFoodTab(newTabIndex)\r\n    }\r\n\r\n    const selectedTabIndex = applicationContext.applicationData.foodDataPanel.selectedFoodItemIndex\r\n\r\n    if (!(selectedTabIndex >= 0)) {\r\n        return <div/>\r\n    }\r\n\r\n    const selectedFoodItem = applicationContext.applicationData.foodDataPanel.selectedFoodItems[selectedTabIndex]\r\n\r\n    if (applicationContext.debug) {\r\n        console.log('FoodDataPanelContainer: Render, selected food item = ', selectedFoodItem)\r\n    }\r\n\r\n    return <div>\r\n        {selectedFoodItem !== null &&\r\n        <div className=\"container-fluid container-scroll\" style={{paddingTop: \"4vh\"}}>\r\n            <div className=\"d-flex flex-row\">\r\n                <div className={\"\"}>\r\n                    <FoodAnalyzerContainer onNewFoodItemSelected={onNewFoodItemSelected}\r\n                                           openSelectorModal={openSelectorModal}\r\n                                           openCompositeSelectorModal={openCompositeSelectorModal}\r\n                    />\r\n                </div>\r\n                <div className=\"col media app\" style={{maxWidth: \"1100px\", marginTop: \"-10px\"}}>\r\n                    {selectedFoodItems && selectedFoodItems.length > 0 ?\r\n                        <div>\r\n                            <TabContainer indexToSet={selectedTabIndex} onTabChange={onTabChange}/>\r\n                        </div>\r\n                        :\r\n                        <div className={\"form-text\"} style={{padding: \"24px\"}}>\r\n                            <p>\r\n                                <i>\r\n                                    {applicationStrings.text_empty_fooddatapanel[languageContext.language]}\r\n                                </i>\r\n                            </p>\r\n                            {isMobileDevice() &&\r\n                             <p><FaExclamationTriangle/> {applicationStrings.text_empty_fooddatapanel_mobileInfo[languageContext.language]}</p>\r\n                            }\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n        }\r\n    </div>\r\n\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport FoodSelector from \"./FoodSelector\";\r\nimport {Button, Card, CardDeck} from \"react-bootstrap\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {initialComparisonFoodClassId, initialFoodClassId} from \"../../config/ApplicationSetting\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\n\r\ninterface DirectCompareSelectorProps {\r\n    updateSelectedFoodItems: (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => void\r\n}\r\n\r\nconst STATUS_FIRST_TIME = \"first time\"\r\nconst STATUS_NOT_UPDATED = \"not updated\"\r\nconst STATUS_UPDATED = \"updated\"\r\n\r\nexport function DirectCompareSelector(props: DirectCompareSelectorProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const language = languageContext.language\r\n\r\n    // Checkbox states (needed to update global configuration)\r\n    const [supplementData1, setSupplementData1] = useState<boolean>(true)\r\n    const [combineData1, setCombineData1] = useState<boolean>(false)\r\n\r\n    const [supplementData2, setSupplementData2] = useState<boolean>(true)\r\n    const [combineData2, setCombineData2] = useState<boolean>(false)\r\n\r\n    const initialItem1 = applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem1 !== null\r\n        ? applicationContext.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        : null\r\n\r\n    const initialItem2 = applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2 !== null\r\n        ? applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        : null\r\n\r\n    const [selectedFoodItem1, setSelectedFoodItem1] = useState<SelectedFoodItem | null>(initialItem1)\r\n    const [selectedFoodItem2, setSelectedFoodItem2] = useState<SelectedFoodItem | null>(initialItem2)\r\n    const [displayStatus, setDisplayStatus] = useState<string>(STATUS_FIRST_TIME)\r\n\r\n    useEffect(() => {\r\n        if(applicationContext && applicationContext.applicationData.directCompareDataPanel.selectedFoodItem2) {\r\n            const {selectedFoodItem1, selectedFoodItem2} = applicationContext.applicationData.directCompareDataPanel\r\n            if(selectedFoodItem1 && selectedFoodItem2) {\r\n                updateSelectedFoodItem1(selectedFoodItem1)\r\n                updateSelectedFoodItem2(selectedFoodItem2)\r\n            }\r\n        }\r\n\r\n    }, [applicationContext?.applicationData.directCompareDataPanel, supplementData1, combineData1, supplementData2, combineData2 ])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateSelectedFoodItem1 = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem1({...selectedFoodItem})\r\n        if (displayStatus !== STATUS_FIRST_TIME) {\r\n            setDisplayStatus(STATUS_UPDATED)\r\n        }\r\n    }\r\n\r\n    const updateSelectedFoodItem2 = (selectedFoodItem: SelectedFoodItem): void => {\r\n        setSelectedFoodItem2(selectedFoodItem)\r\n        if (displayStatus !== STATUS_FIRST_TIME) {\r\n            setDisplayStatus(STATUS_UPDATED)\r\n        }\r\n    }\r\n\r\n    const updateFoodSelectorConfig1 = (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => {\r\n        setSupplementData1(supplementData)\r\n        setCombineData1(combineData)\r\n    }\r\n\r\n    const updateFoodSelectorConfig2 = (selectedCategory: ReactSelectOption | null, supplementData: boolean, combineData: boolean) => {\r\n        setSupplementData2(supplementData)\r\n        setCombineData2(combineData)\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (selectedFoodItem1 && selectedFoodItem2) {\r\n            props.updateSelectedFoodItems(selectedFoodItem1, selectedFoodItem2)\r\n\r\n            if (applicationContext) {\r\n                const currentSelectorSetting1 = applicationContext.applicationData.directCompareDataPanel.foodSelector1\r\n                if (supplementData1 !== currentSelectorSetting1.sourceSupplement\r\n                    || combineData1 !== currentSelectorSetting1.sourceCombine) {\r\n                    applicationContext.setDirectCompareFoodSelector1(supplementData1, combineData1)\r\n                }\r\n\r\n                const currentSelectorSetting2 = applicationContext.applicationData.directCompareDataPanel.foodSelector2\r\n                if (supplementData2 !== currentSelectorSetting2.sourceSupplement\r\n                    || combineData2 !== currentSelectorSetting2.sourceCombine) {\r\n                    applicationContext.setDirectCompareFoodSelector2(supplementData2, combineData2)\r\n                }\r\n            }\r\n        }\r\n\r\n        setDisplayStatus(STATUS_NOT_UPDATED)\r\n    }\r\n\r\n\r\n    const renderFoodSelectorCard = (foodSelectorNumber: number) => {\r\n        const updateSelectedFoodItem = foodSelectorNumber === 1 ? updateSelectedFoodItem1 : updateSelectedFoodItem2\r\n        const styleClass = foodSelectorNumber === 1 ? {backgroundColor: direct_compare_color1} : {backgroundColor: direct_compare_color2}\r\n        const initialFoodClassToSet = foodSelectorNumber === 1 ? initialFoodClassId : initialComparisonFoodClassId\r\n\r\n        const selectedFoodItem = foodSelectorNumber === 1 ? selectedFoodItem1 : selectedFoodItem2\r\n        const updateFoodSelectorConfig = foodSelectorNumber === 1 ? updateFoodSelectorConfig1 : updateFoodSelectorConfig2\r\n\r\n        return <div style={{paddingTop: \"32px\"}}>\r\n            <Card style={styleClass}>\r\n                <Card.Header>\r\n                    {applicationStrings.label_food[language]} {foodSelectorNumber}\r\n                </Card.Header>\r\n                <CardDeck>\r\n                    <FoodSelector updateSelectedFoodItem={updateSelectedFoodItem}\r\n                                  updateFoodSelectorConfig={updateFoodSelectorConfig}\r\n                                  compositeSelector={false}\r\n                                  directCompareSelector={true}\r\n                                  selectedFoodItem={selectedFoodItem}\r\n                                  defaultFoodClass={initialFoodClassToSet}\r\n                                  directCompareSelectorNumber={foodSelectorNumber}\r\n                    />\r\n                </CardDeck>\r\n            </Card>\r\n        </div>\r\n    }\r\n\r\n    const buttonName = displayStatus === STATUS_FIRST_TIME ? applicationStrings.button_show[language] : applicationStrings.button_update[language]\r\n\r\n    return <div>\r\n        {renderFoodSelectorCard(1)}\r\n        {renderFoodSelectorCard(2)}\r\n        <div style={{paddingTop: \"20px\", paddingBottom: \"64px\"}}>\r\n            <Button className={\"form-button float-end\"}\r\n                    disabled={displayStatus === STATUS_NOT_UPDATED}\r\n                    onClick={onSubmit}>\r\n                {buttonName}\r\n            </Button>\r\n        </div>\r\n    </div>\r\n}","import {determineFoodRequirementRatio, determineProteinRequirementRatio} from \"./DietaryRequirementService\";\r\nimport {UserData} from \"../../types/livedata/UserData\";\r\nimport {MineralData, VitaminData} from \"../../types/nutrientdata/FoodItem\";\r\n\r\n/**\r\n * Determines the maximum vitamin or mineral or protein value of a food item (referring to the daily dietary requirements).\r\n */\r\nexport function getMaximumValue(dataSet: any, amount: number, requirementData: any, userData: UserData, proteins?: boolean) {\r\n    let maxValue = 0\r\n    for (let dataSetKey in dataSet) {\r\n        if (requirementData[dataSetKey]) {\r\n            const ratioValue = proteins === true\r\n                ? determineProteinRequirementRatio(requirementData[dataSetKey], dataSet[dataSetKey], amount, userData)\r\n                : determineFoodRequirementRatio(requirementData[dataSetKey], dataSet[dataSetKey], amount, userData)\r\n            if (ratioValue > maxValue) {\r\n                maxValue = ratioValue\r\n            }\r\n        }\r\n    }\r\n    return maxValue\r\n}\r\n\r\n\r\n/**\r\n * Given two data sets of values, this method determines the attributes that has values for both objects. It\r\n * can be used to remove all data attributes (columns) where at least one of the two data sets does not provide\r\n * a value.\r\n * @param dataSet1\r\n * @param dataSet2\r\n */\r\nexport function getOverlappingValues(dataSet1: any, dataSet2: any): string[] {\r\n    const overlapping: string[] = []\r\n    for (const dataSetKey in dataSet1) {\r\n        const value = dataSet1[dataSetKey]\r\n        if((value !== null && value !== undefined) && (dataSet2[dataSetKey] !== null && dataSet2[dataSetKey] !== undefined)) {\r\n            overlapping.push(dataSetKey)\r\n        }\r\n    }\r\n\r\n    return overlapping\r\n}\r\n\r\n\r\nexport function nullifyNonOverlappingValues(dataSet: any, overlappingAttributes: string[]): any {\r\n    const newDataset: any = {}\r\n    for (const dataSetKey in dataSet) {\r\n        if(!overlappingAttributes.includes(dataSetKey)) {\r\n            newDataset[dataSetKey] = null\r\n        } else {\r\n            newDataset[dataSetKey] = dataSet[dataSetKey]\r\n        }\r\n    }\r\n\r\n    return newDataset\r\n}","import {useContext} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport getName from \"../../service/LanguageService\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\n\r\nexport interface VerticalLabelProps {\r\n    selectedFoodItem: SelectedFoodItem\r\n}\r\n\r\nexport function VerticalLabel(props: VerticalLabelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if(applicationContext === null) {\r\n        return null\r\n    }\r\n\r\n    const condition = applicationContext.foodDataCorpus.conditions.find(condition => condition.id === props.selectedFoodItem.foodItem.conditionId)\r\n    const conditionName = condition ? getName(condition, languageContext.language) : \"\"\r\n\r\n    return (\r\n        <>\r\n            <div className={\"vertical-label-small\"}>{conditionName}</div>\r\n            <div className={\"vertical-label\"}>{props.selectedFoodItem.resolvedName}</div>\r\n        </>\r\n    )\r\n}","import MineralVitaminChart from \"../fooddatapanel/charts/MineralVitaminChart\";\r\nimport {AMOUNT_PORTION, CHART_VITAMINS} from \"../../config/Constants\";\r\nimport {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {BarChartConfigurationForm} from \"../charthelper/BarChartConfigurationForm\";\r\nimport {roundToNextValue} from \"../../service/calculation/MathService\";\r\nimport {\r\n    getMaximumValue,\r\n    getOverlappingValues,\r\n    nullifyNonOverlappingValues\r\n} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport {DC_MineralVitaminChartProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_MINERALS_CONFIG,\r\n    GA_ACTION_DATAPANEL_VITAMINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../config/GA_Events\";\r\n\r\nexport function DcMineralVitaminChart(props: DC_MineralVitaminChartProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfigVitamins = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.vitaminChartConfig\r\n        : initialDirectCompareConfigData.vitaminChartConfig\r\n\r\n    const chartConfigMinerals = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.mineralChartConfig\r\n        : initialDirectCompareConfigData.mineralChartConfig\r\n\r\n    const [portionType_vitamins, setPortionType_vitamins] = useState<string>(chartConfigVitamins.portionType)\r\n    const [portionType_minerals, setPortionType_minerals] = useState<string>(chartConfigMinerals.portionType)\r\n    const [expand100_vitamins, setExpand100_vitamins] = useState<boolean>(chartConfigVitamins.expand100)\r\n    const [expand100_minerals, setExpand100_minerals] = useState<boolean>(chartConfigMinerals.expand100)\r\n    const [synchronizeVitamins, setSynchronizeVitamins] = useState<boolean>(chartConfigVitamins.synchronize)\r\n    const [synchronizeMinerals, setSynchronizeMinerals] = useState<boolean>(chartConfigMinerals.synchronize)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        updateChartConfig()\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [portionType_minerals,\r\n        portionType_vitamins,\r\n        synchronizeVitamins,\r\n        synchronizeMinerals,\r\n        expand100_vitamins,\r\n        expand100_minerals,\r\n        containerHeight,\r\n        windowSize]\r\n    )\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            const newChartConfig = {\r\n                ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                vitaminChartConfig: {\r\n                    portionType: portionType_vitamins,\r\n                    expand100: expand100_vitamins,\r\n                    synchronize: synchronizeVitamins\r\n                },\r\n                mineralChartConfig: {\r\n                    portionType: portionType_minerals,\r\n                    expand100: expand100_minerals,\r\n                    synchronize: synchronizeMinerals\r\n                }\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        }\r\n    }\r\n\r\n    const requirementData = props.selectedSubChart === CHART_VITAMINS\r\n        ? applicationContext.foodDataCorpus.dietaryRequirements?.vitaminRequirementData\r\n        : applicationContext.foodDataCorpus.dietaryRequirements?.mineralRequirementData\r\n\r\n    if (!requirementData) {\r\n        return <div></div>\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value = event.target.value\r\n        const action = props.selectedSubChart === CHART_VITAMINS\r\n            ? GA_ACTION_DATAPANEL_VITAMINS_CONFIG\r\n            : GA_ACTION_DATAPANEL_MINERALS_CONFIG\r\n        callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, value, 2)\r\n        props.selectedSubChart === CHART_VITAMINS ? setPortionType_vitamins(event.target.value) : setPortionType_minerals(value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        const action = props.selectedSubChart === CHART_VITAMINS\r\n            ? GA_ACTION_DATAPANEL_VITAMINS_CONFIG\r\n            : GA_ACTION_DATAPANEL_MINERALS_CONFIG\r\n        const label = props.selectedSubChart === CHART_VITAMINS\r\n            ? \"expand100: \" + !expand100_vitamins\r\n            : \"expand100: \" + !expand100_minerals\r\n        callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, label, 2)\r\n        props.selectedSubChart === CHART_VITAMINS ? setExpand100_vitamins(!expand100_vitamins) : setExpand100_minerals(!expand100_minerals)\r\n    }\r\n\r\n    const handleSynchronize = () => {\r\n        const action = props.selectedSubChart === CHART_VITAMINS\r\n            ? GA_ACTION_DATAPANEL_VITAMINS_CONFIG\r\n            : GA_ACTION_DATAPANEL_MINERALS_CONFIG\r\n        const label = props.selectedSubChart === CHART_VITAMINS\r\n            ? \"synchronize: \" + !synchronizeVitamins\r\n            : \"synchronize: \" + !synchronizeMinerals\r\n        callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, label, 2)\r\n        props.selectedSubChart === CHART_VITAMINS ? setSynchronizeVitamins(!synchronizeVitamins) : setSynchronizeMinerals(!synchronizeMinerals)\r\n    }\r\n\r\n    const portionType = props.selectedSubChart === CHART_VITAMINS ? portionType_vitamins : portionType_minerals\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const expand100 = props.selectedSubChart === CHART_VITAMINS ? expand100_vitamins : expand100_minerals\r\n        const synchronize = props.selectedSubChart === CHART_VITAMINS ? synchronizeVitamins : synchronizeMinerals\r\n\r\n        const barChartProps = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox,\r\n            handleSynchronize: handleSynchronize\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps}/>\r\n    }\r\n\r\n    const nutrientData1 = getNutrientData(props.selectedFoodItem1)\r\n    const nutrientData2 = getNutrientData(props.selectedFoodItem2)\r\n\r\n    let dataSet1 = props.selectedSubChart === CHART_VITAMINS ? nutrientData1.vitaminData : nutrientData1.mineralData\r\n    let dataSet2 = props.selectedSubChart === CHART_VITAMINS ? nutrientData2.vitaminData : nutrientData2.mineralData\r\n\r\n    const synchronize = props.selectedSubChart === CHART_VITAMINS ? synchronizeVitamins : synchronizeMinerals\r\n\r\n    if (synchronize) {\r\n        const overlappingAttributes = getOverlappingValues(dataSet1, dataSet2)\r\n        dataSet1 = nullifyNonOverlappingValues(dataSet1, overlappingAttributes)\r\n        dataSet2 = nullifyNonOverlappingValues(dataSet2, overlappingAttributes)\r\n    }\r\n\r\n    const portion1 = portionType === AMOUNT_PORTION ? props.selectedFoodItem1.portion.amount : 100\r\n    const portion2 = portionType === AMOUNT_PORTION ? props.selectedFoodItem2.portion.amount : 100\r\n\r\n    const maxValue1 = getMaximumValue(dataSet1, portion1, requirementData, applicationContext.userData)\r\n    const maxValue2 = getMaximumValue(dataSet2, portion2, requirementData, applicationContext.userData)\r\n    const maxValue = Math.max(maxValue1, maxValue2)\r\n\r\n    const maxY = synchronize\r\n        ? roundToNextValue(maxValue) : undefined\r\n\r\n    const preconfigVitamins = {\r\n        maxValue: maxY,\r\n        portionType: portionType_vitamins,\r\n        expand100: expand100_vitamins,\r\n        synchronize: synchronizeVitamins\r\n    }\r\n\r\n    const preconfigMinerals = {\r\n        maxValue: maxY,\r\n        portionType: portionType_minerals,\r\n        expand100: expand100_minerals,\r\n        synchronize: synchronizeMinerals\r\n    }\r\n\r\n    const preconfig = props.selectedSubChart === CHART_VITAMINS ? preconfigVitamins : preconfigMinerals\r\n\r\n    const preconfigFoodItem1 = {...preconfig, barChartColor: direct_compare_color1}\r\n    const preconfigFoodItem2 = {...preconfig, barChartColor: direct_compare_color2}\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}></VerticalLabel>\r\n                <MineralVitaminChart selectedSubChart={props.selectedSubChart}\r\n                                     selectedFoodItem={props.selectedFoodItem1}\r\n                                     precalculatedData={dataSet1}\r\n                                     directCompareUse={true} directCompareConfig={preconfigFoodItem1}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}></VerticalLabel>\r\n                <MineralVitaminChart selectedSubChart={props.selectedSubChart}\r\n                                     selectedFoodItem={props.selectedFoodItem2}\r\n                                     precalculatedData={dataSet2}\r\n                                     directCompareUse={true} directCompareConfig={preconfigFoodItem2}/>\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {PieChartConfigurationForm} from \"../charthelper/PieChartConfigurationForm\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport BaseDataChart from \"../fooddatapanel/charts/BaseDataChart\";\r\nimport {\r\n    CARBS_DATA_BASE,\r\n    LIPIDS_DATA_BASE,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_LIPIDS_DATA\r\n} from \"../../config/Constants\";\r\nimport LipidsDataChart from \"../fooddatapanel/charts/LipidsDataChart\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {\r\n    PieChartConfigurationProps,\r\n    PieChartDirectCompareConfig,\r\n    PieChartDirectCompareProp\r\n} from \"../../types/livedata/ChartPropsData\";\r\nimport CarbsDataChart from \"../fooddatapanel/charts/CarbsDataChart\";\r\nimport {\r\n    GeneralChartConfigDirectCompareWithSubCharts,\r\n    GeneralChartConfigWithDetails\r\n} from \"../../types/livedata/ChartConfigData\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_BASEDATA_CONFIG,\r\n    GA_ACTION_DATAPANEL_CARBS_CONFIG,\r\n    GA_ACTION_DATAPANEL_LIPIDS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../config/GA_Events\";\r\n\r\n/**\r\n * Re-usable direct compare chart component for pie-chart data pages (Lipids, Carbs, Base Data)\r\n */\r\nexport function DcPieChart(props: PieChartDirectCompareProp) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    let initialConfig\r\n    switch (props.dataPage) {\r\n        case TAB_BASE_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.baseChartConfig\r\n                ? applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart.baseChartConfig\r\n                : initialDirectCompareConfigData.baseChartConfig\r\n            break\r\n        case TAB_LIPIDS_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n                ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig\r\n                : initialDirectCompareConfigData.lipidsChartConfig\r\n            break\r\n        case TAB_CARBS_DATA:\r\n            initialConfig = applicationContext && applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n                ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig\r\n                : initialDirectCompareConfigData.carbsChartConfig\r\n            break\r\n    }\r\n\r\n    const [chartType, setChartType] = useState<string>(initialConfig.chartType)\r\n    const [showLegend, setShowLegend] = useState<boolean>(initialConfig.showLegend)\r\n    const [showDetails, setShowDetails] = useState<boolean>(initialConfig.showDetails)\r\n    const [subChart1, setSubChart1] = useState<string>(initialConfig.subChart1)\r\n    const [subChart2, setSubChart2] = useState<string>(initialConfig.subChart2)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        const currentConfig = applicationContext?.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n        if (!currentConfig) {\r\n            return\r\n        }\r\n\r\n        if (props.dataPage === TAB_LIPIDS_DATA || props.dataPage === TAB_CARBS_DATA) {\r\n            const configObject: GeneralChartConfigDirectCompareWithSubCharts = props.dataPage === TAB_LIPIDS_DATA\r\n                ? currentConfig.lipidsChartConfig\r\n                : currentConfig.carbsChartConfig\r\n\r\n            if (chartType !== configObject.chartType || showLegend !== configObject.showLegend\r\n                 || subChart1 !== configObject.subChart1 || subChart2 !== configObject.subChart2) {\r\n                updateChartConfig()\r\n            }\r\n        } else if (props.dataPage === TAB_BASE_DATA) {\r\n            const configObject: GeneralChartConfigWithDetails = currentConfig.baseChartConfig\r\n            if (chartType !== configObject.chartType || showLegend !== configObject.showLegend || showDetails !== configObject?.showDetails) {\r\n                updateChartConfig()\r\n            }\r\n        }\r\n\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [chartType, showDetails, showLegend, subChart1, subChart2, containerHeight, windowSize.height])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            let newChartConfig\r\n\r\n            if (props.dataPage === TAB_BASE_DATA) {\r\n                const pieChartConfig: GeneralChartConfigWithDetails = {\r\n                    chartType: chartType,\r\n                    showLegend: showLegend,\r\n                    showDetails: showDetails\r\n                }\r\n\r\n                newChartConfig = {\r\n                    ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                    baseChartConfig: pieChartConfig\r\n                }\r\n            } else {\r\n                if (props.dataPage === TAB_LIPIDS_DATA) {\r\n                    newChartConfig = {\r\n                        ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                        lipidsChartConfig: {\r\n                            ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig,\r\n                            chartType: chartType,\r\n                            showLegend: showLegend,\r\n                            subChart1: subChart1,\r\n                            subChart2: subChart2\r\n                        }\r\n                    }\r\n                } else if (props.dataPage === TAB_CARBS_DATA) {\r\n                    newChartConfig = {\r\n                        ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                        carbsChartConfig: {\r\n                            ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig,\r\n                            chartType: chartType,\r\n                            showLegend: showLegend,\r\n                            subChart1: subChart1,\r\n                            subChart2: subChart2\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (newChartConfig) {\r\n                applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n            }\r\n        }\r\n    }\r\n\r\n    const getEventActionName = (): string | null => {\r\n        if(props.dataPage === TAB_BASE_DATA) {\r\n            return GA_ACTION_DATAPANEL_BASEDATA_CONFIG\r\n        } else if(props.dataPage === TAB_LIPIDS_DATA) {\r\n            return GA_ACTION_DATAPANEL_LIPIDS_CONFIG\r\n        } else if(props.dataPage === TAB_CARBS_DATA) {\r\n            return GA_ACTION_DATAPANEL_CARBS_CONFIG\r\n        }\r\n        return null\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value = event.target.value\r\n        const action = getEventActionName()\r\n        if(action !== null) {\r\n            callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, value, 2)\r\n        }\r\n        setChartType(value)\r\n    }\r\n\r\n    const handleShowLegendCheckbox = () => {\r\n        const label = \"legend: \" + !showLegend\r\n        const action = getEventActionName()\r\n        if(action !== null) {\r\n            callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, label, 2)\r\n        }\r\n        setShowLegend(!showLegend)\r\n    }\r\n\r\n    const handleShowDetailsCheckbox = () => {\r\n        const label = \"details: \" + !showLegend\r\n        const action = getEventActionName()\r\n        if(action !== null) {\r\n            callEvent(applicationContext?.debug, action, GA_CATEGORY_DATAPANEL, label, 2)\r\n        }\r\n        setShowDetails(!showDetails)\r\n    }\r\n\r\n    const handleSubchart1Change = (event: any): void => {\r\n        setSubChart1(event.target.value)\r\n    }\r\n\r\n    const handleSubchart2Change = (event: any): void => {\r\n        setSubChart2(event.target.value)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const chartProps = getConfigurationProps()\r\n        return <PieChartConfigurationForm key={`Config DirectCompare ${props.dataPage}`} {...chartProps}/>\r\n    }\r\n\r\n    const getConfigurationProps = (): PieChartConfigurationProps => {\r\n        let chartProps: PieChartConfigurationProps = {\r\n            chartType: chartType,\r\n            showLegend: showLegend,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleLegendCheckboxClick: handleShowLegendCheckbox,\r\n        }\r\n\r\n        if (props.dataPage === TAB_BASE_DATA) {\r\n            chartProps = {\r\n                ...chartProps,\r\n                detailsCheckboxAvailable: true,\r\n                showDetails: showDetails,\r\n                handleDetailsCheckboxClick: handleShowDetailsCheckbox\r\n            }\r\n        }\r\n\r\n        return chartProps\r\n    }\r\n\r\n\r\n    const getChartComponent = (selectedFoodItem: SelectedFoodItem, index: number) => {\r\n        let preconfig: PieChartDirectCompareConfig = {\r\n            chartType: chartType,\r\n            showLegend: showLegend,\r\n            showDetails: showDetails,\r\n        }\r\n\r\n        if (props.dataPage === TAB_BASE_DATA) {\r\n            return <BaseDataChart key={`${TAB_BASE_DATA} ${index}`} selectedFoodItem={selectedFoodItem}\r\n                                  directCompareUse={true}\r\n                                  directCompareConfig={preconfig}/>\r\n        }\r\n\r\n        if (props.dataPage === TAB_LIPIDS_DATA) {\r\n            const selectedSubChart = applicationContext\r\n                ? index === 1\r\n                    ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart1\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart1\r\n                        : LIPIDS_DATA_BASE\r\n                    : applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart2\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.lipidsChartConfig.subChart2\r\n                        : LIPIDS_DATA_BASE\r\n                : LIPIDS_DATA_BASE\r\n\r\n            preconfig = {\r\n                ...preconfig,\r\n                subChart: selectedSubChart,\r\n                handleSubchartChange: index === 1 ? handleSubchart1Change : handleSubchart2Change,\r\n                chartIndex: index\r\n            }\r\n\r\n            return <LipidsDataChart key={`${TAB_LIPIDS_DATA} ${index}`} selectedFoodItem={selectedFoodItem}\r\n                                    directCompareUse={true}\r\n                                    directCompareConfig={preconfig}/>\r\n        }\r\n\r\n        if (props.dataPage === TAB_CARBS_DATA) {\r\n            const selectedSubChart = applicationContext\r\n                ? index === 1\r\n                    ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart1\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart1\r\n                        : CARBS_DATA_BASE\r\n                    : applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart2\r\n                        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.carbsChartConfig.subChart2\r\n                        : CARBS_DATA_BASE\r\n                : CARBS_DATA_BASE\r\n\r\n            preconfig = {\r\n                ...preconfig,\r\n                subChart: selectedSubChart,\r\n                chartIndex: index,\r\n                handleSubchartChange: index === 1 ? handleSubchart1Change : handleSubchart2Change\r\n            }\r\n\r\n            return <CarbsDataChart key={`${TAB_CARBS_DATA} ${index}`} selectedFoodItem={selectedFoodItem}\r\n                                   directCompareUse={true}\r\n                                   directCompareConfig={preconfig}/>\r\n        }\r\n    }\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}\r\n                 key={\"directcompare container\" + containerHeight}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}></VerticalLabel>\r\n                {getChartComponent(props.selectedFoodItem1, 1)}\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}\r\n                 key={\"directcompare container\" + containerHeight}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}></VerticalLabel>\r\n                {getChartComponent(props.selectedFoodItem2, 2)}\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {initialDirectCompareConfigData} from \"../../config/ApplicationSetting\";\r\nimport {BarChartConfigurationForm} from \"../charthelper/BarChartConfigurationForm\";\r\nimport {roundToNextValue} from \"../../service/calculation/MathService\";\r\nimport {direct_compare_color1, direct_compare_color2} from \"../../config/ChartConfig\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport ProteinDataChart from \"../fooddatapanel/charts/ProteinDataChart\";\r\nimport {BarChartDirectCompareConfig, DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {getNutrientData} from \"../../service/nutrientdata/NutrientDataRetriever\";\r\nimport {\r\n    getMaximumValue,\r\n    getOverlappingValues,\r\n    nullifyNonOverlappingValues\r\n} from \"../../service/calculation/NutrientCalculationService\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\nimport {\r\n    GA_ACTION_DATAPANEL_PROTEINS_CONFIG,\r\n    GA_CATEGORY_DATAPANEL\r\n} from \"../../config/GA_Events\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\n\r\nexport function DcProteinDataChart(props: DirectCompareDataPanelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const windowSize = useWindowDimension()\r\n\r\n    const chartConfig = applicationContext\r\n        ? applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart.proteinChartConfig\r\n        : initialDirectCompareConfigData.proteinChartConfig\r\n\r\n    const [portionType, setPortionType] = useState<string>(chartConfig.portionType)\r\n    const [expand100, setExpand100] = useState<boolean>(chartConfig.expand100)\r\n    const [synchronize, setSynchronize] = useState<boolean>(chartConfig.synchronize)\r\n\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        updateChartConfig()\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [portionType, expand100, synchronize, containerHeight, windowSize.height])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const updateChartConfig = () => {\r\n        if (applicationContext) {\r\n            const newChartConfig = {\r\n                ...applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart,\r\n                proteinChartConfig: {\r\n                    portionType: portionType,\r\n                    expand100: expand100,\r\n                    synchronize: synchronize\r\n                }\r\n            }\r\n            applicationContext.setDirectCompareData.updateDirectCompareChartConfig(newChartConfig)\r\n        }\r\n    }\r\n\r\n    const requirementData = applicationContext.foodDataCorpus.dietaryRequirements?.proteinRequirementData\r\n    if (!requirementData) {\r\n        return <div/>\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any): void => {\r\n        const value = event.target.value\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_PROTEINS_CONFIG, GA_CATEGORY_DATAPANEL, value, 2)\r\n        setPortionType(value)\r\n    }\r\n\r\n    const handleExpandCheckbox = () => {\r\n        const label = \"expand100: \" + !expand100\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_PROTEINS_CONFIG, GA_CATEGORY_DATAPANEL, label, 2)\r\n        setExpand100(!expand100)\r\n    }\r\n\r\n    const handleSynchronize = () => {\r\n        const label = \"synchronize: \" + !synchronize\r\n        callEvent(applicationContext?.debug, GA_ACTION_DATAPANEL_PROTEINS_CONFIG, GA_CATEGORY_DATAPANEL, label, 2)\r\n        setSynchronize(!synchronize)\r\n    }\r\n\r\n    const renderChartConfigurationForm = () => {\r\n        const barChartProps = {\r\n            portionType: portionType,\r\n            expand100: expand100,\r\n            synchronize: synchronize,\r\n            handleRadioButtonClick: handleRadioButtonClick,\r\n            handleExpandCheckboxClick: handleExpandCheckbox,\r\n            handleSynchronize: handleSynchronize\r\n        }\r\n\r\n        return <BarChartConfigurationForm {...barChartProps}/>\r\n    }\r\n\r\n    let dataSet1 = getNutrientData(props.selectedFoodItem1).proteinData\r\n    let dataSet2 = getNutrientData(props.selectedFoodItem2).proteinData\r\n\r\n    if (synchronize) {\r\n        const overlappingAttributes = getOverlappingValues(dataSet1, dataSet2)\r\n        dataSet1 = nullifyNonOverlappingValues(dataSet1, overlappingAttributes)\r\n        dataSet2 = nullifyNonOverlappingValues(dataSet2, overlappingAttributes)\r\n    }\r\n\r\n    const maxValue1 = getMaximumValue(dataSet1, props.selectedFoodItem1.portion.amount, requirementData, applicationContext.userData, true)\r\n    const maxValue2 = getMaximumValue(dataSet2, props.selectedFoodItem2.portion.amount, requirementData, applicationContext.userData, true)\r\n    const maxValue = Math.max(maxValue1, maxValue2)\r\n    const maxY = synchronize ? roundToNextValue(maxValue) : undefined\r\n\r\n    const preconfig: BarChartDirectCompareConfig = {\r\n        maxValue: maxY,\r\n        portionType: portionType,\r\n        expand100: expand100,\r\n        synchronize: synchronize,\r\n        barChartColor: ''\r\n    }\r\n\r\n    const preconfigFoodItem1 = {...preconfig, barChartColor: direct_compare_color1}\r\n    const preconfigFoodItem2 = {...preconfig, barChartColor: direct_compare_color2}\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}></VerticalLabel>\r\n                <ProteinDataChart selectedFoodItem={props.selectedFoodItem1}\r\n                                  precalculatedData={dataSet1}\r\n                                  directCompareUse={true} directCompareConfig={preconfigFoodItem1}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}></VerticalLabel>\r\n                <ProteinDataChart selectedFoodItem={props.selectedFoodItem2}\r\n                                  precalculatedData={dataSet2}\r\n                                  directCompareUse={true} directCompareConfig={preconfigFoodItem2}/>\r\n            </div>\r\n        </Card>\r\n        <Card.Footer>\r\n            {renderChartConfigurationForm()}\r\n        </Card.Footer>\r\n    </div>\r\n\r\n}","import {Card} from \"react-bootstrap\";\r\nimport EnergyDataChart from \"../fooddatapanel/charts/EnergyDataChart\";\r\nimport {DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {useWindowDimension} from \"../../service/WindowDimension\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {calculateChartContainerHeight} from \"../../service/nutrientdata/ChartSizeCalculation\";\r\nimport {VerticalLabel} from \"./VerticalLabel\";\r\n\r\nexport function DcEnergyChart(props: DirectCompareDataPanelProps) {\r\n    const windowSize = useWindowDimension()\r\n    const [containerHeight, setContainerHeight] = useState<number>(calculateChartContainerHeight(windowSize, true))\r\n\r\n    useEffect(() => {\r\n        setContainerHeight(calculateChartContainerHeight(windowSize, true))\r\n    }, [containerHeight, windowSize])\r\n\r\n    return <div className={\"direct-compare-panel\"}>\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem1}></VerticalLabel>\r\n                <EnergyDataChart selectedFoodItem={props.selectedFoodItem1} directCompareUse={true}/>\r\n            </div>\r\n        </Card>\r\n\r\n        <Card>\r\n            <div className={\"d-flex\"} style={{maxHeight: containerHeight}}>\r\n                <VerticalLabel selectedFoodItem={props.selectedFoodItem2}></VerticalLabel>\r\n                <EnergyDataChart selectedFoodItem={props.selectedFoodItem2} directCompareUse={true}/>\r\n            </div>\r\n        </Card>\r\n    </div>\r\n\r\n}","import {ChartMenuPanel} from \"../fooddatapanel/ChartMenuPanel\";\r\nimport {\r\n    CHART_MINERALS,\r\n    CHART_VITAMINS,\r\n    TAB_BASE_DATA,\r\n    TAB_CARBS_DATA,\r\n    TAB_ENERGY_DATA,\r\n    TAB_INFO,\r\n    TAB_LIPIDS_DATA,\r\n    TAB_MINERAL_DATA,\r\n    TAB_PROTEINS_DATA,\r\n    TAB_VITAMIN_DATA\r\n} from \"../../config/Constants\";\r\nimport {useContext} from \"react\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport {DcMineralVitaminChart} from \"./DcMineralVitaminChart\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {Card} from \"react-bootstrap\";\r\nimport {DcPieChart} from \"./DcPieChart\";\r\nimport {DcProteinDataChart} from \"./DcProteinDataChart\";\r\nimport {DcEnergyChart} from \"./DcEnergyChart\";\r\nimport {getNameFromFoodNameList} from \"../../service/nutrientdata/NameTypeService\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {DirectCompareDataPanelProps} from \"../../types/livedata/ChartPropsData\";\r\nimport {InfoData} from \"../fooddatapanel/charts/InfoData\";\r\n\r\nexport function DirectCompareDataPanel(props: DirectCompareDataPanelProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const setDataPage = (datapage: string) => {\r\n        applicationContext.setDirectCompareData.setSelectedDirectCompareDataPage(datapage)\r\n    }\r\n\r\n    const foodNames = applicationContext.foodDataCorpus.foodNames\r\n\r\n    const nameId1 = props.selectedFoodItem1.foodItem.nameId ? props.selectedFoodItem1.foodItem.nameId : null\r\n    const nameId2 = props.selectedFoodItem2.foodItem.nameId ? props.selectedFoodItem2.foodItem.nameId : null\r\n\r\n    const name1 = nameId1 ? getNameFromFoodNameList(foodNames, nameId1, languageContext.language) : \"\"\r\n    const name2 = nameId2 ? getNameFromFoodNameList(foodNames, nameId2, languageContext.language) : \"\"\r\n\r\n    const selectedFoodItem1: SelectedFoodItem = {...props.selectedFoodItem1, resolvedName: name1}\r\n    const selectedFoodItem2: SelectedFoodItem = {...props.selectedFoodItem2, resolvedName: name2}\r\n\r\n    const selectedDataPage = applicationContext.applicationData.directCompareDataPanel.selectedDataPage\r\n\r\n    const renderCharts = () => {\r\n        switch (selectedDataPage) {\r\n            case TAB_BASE_DATA:\r\n                return <DcPieChart key={TAB_BASE_DATA}\r\n                                   selectedFoodItem1={selectedFoodItem1}\r\n                                   selectedFoodItem2={selectedFoodItem2}\r\n                                   dataPage={TAB_BASE_DATA}\r\n                />\r\n            case TAB_ENERGY_DATA:\r\n                return <DcEnergyChart selectedFoodItem1={selectedFoodItem1}\r\n                                      selectedFoodItem2={selectedFoodItem2}\r\n                />\r\n\r\n            case TAB_VITAMIN_DATA:\r\n                return <DcMineralVitaminChart key={TAB_VITAMIN_DATA}\r\n                                              selectedFoodItem1={selectedFoodItem1}\r\n                                              selectedFoodItem2={selectedFoodItem2}\r\n                                              selectedSubChart={CHART_VITAMINS}\r\n                />\r\n            case TAB_MINERAL_DATA:\r\n                return <DcMineralVitaminChart key={TAB_MINERAL_DATA}\r\n                                              selectedFoodItem1={selectedFoodItem1}\r\n                                              selectedFoodItem2={selectedFoodItem2}\r\n                                              selectedSubChart={CHART_MINERALS}\r\n                />\r\n            case TAB_LIPIDS_DATA:\r\n                return <DcPieChart key={TAB_LIPIDS_DATA}\r\n                                   selectedFoodItem1={selectedFoodItem1}\r\n                                   selectedFoodItem2={selectedFoodItem2}\r\n                                   dataPage={TAB_LIPIDS_DATA}\r\n                />\r\n            case TAB_CARBS_DATA:\r\n                return <DcPieChart key={TAB_CARBS_DATA}\r\n                                   selectedFoodItem1={selectedFoodItem1}\r\n                                   selectedFoodItem2={selectedFoodItem2}\r\n                                   dataPage={TAB_CARBS_DATA}\r\n                />\r\n            case TAB_PROTEINS_DATA:\r\n                return <DcProteinDataChart selectedFoodItem1={selectedFoodItem1}\r\n                                           selectedFoodItem2={selectedFoodItem2}\r\n                />\r\n            case TAB_INFO:\r\n                return <div>\r\n                    <Card>\r\n                        <InfoData selectedFoodItem={props.selectedFoodItem1} directCompare={true}/>\r\n                    </Card>\r\n                    <Card>\r\n                        <InfoData selectedFoodItem={props.selectedFoodItem2} directCompare={true}/>\r\n                    </Card>\r\n                </div>\r\n\r\n        }\r\n\r\n        return <div/>\r\n    }\r\n\r\n    return <div>\r\n        <Card.Header>\r\n            <ChartMenuPanel dataPage={selectedDataPage} verticalArrangement={false} setDataPage={setDataPage}/>\r\n        </Card.Header>\r\n        {renderCharts()}\r\n    </div>\r\n\r\n}","import { DirectCompareChartConfigData } from \"../../types/livedata/ChartConfigData\"\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\"\r\nimport { DirectCompareUriData, FoodItemUriData } from \"../../types/livedata/UriData\"\r\nimport { UserData } from \"../../types/livedata/UserData\"\r\nimport { getUpdatedDirectCompareChartConfig, makeChartConfigUriString } from \"./ChartConfigConverter\"\r\nimport {\r\n\tconvertUserDataObjectToString,\r\n\tconvertUserDataStringToObject,\r\n\tgetFoodItemUriData,\r\n\tmakeFoodItemDefaultUri,\r\n\tprepareUriForParsing\r\n} from \"./FoodDataPanelUriService\"\r\n\r\nexport function makeDirectCompareDataUri(selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem, \r\n\t\tuserData: UserData, selectedDataPage: string, chartConfigData: DirectCompareChartConfigData): string {\r\n\tconst foodItemUriData1 = makeFoodItemUriData(selectedFoodItem1)\r\n\tconst foodItemUriData2 = makeFoodItemUriData(selectedFoodItem2)\r\n\t\r\n\tconst foodItem1DataUri = makeFoodItemDefaultUri(foodItemUriData1)\r\n\tconst foodItem2DataUri = makeFoodItemDefaultUri(foodItemUriData2)\r\n\t\r\n\tconst userDataUri = convertUserDataObjectToString(userData)\r\n\tconst chartConfigUri = makeChartConfigUriString(chartConfigData, selectedDataPage)\r\n\t\r\n\treturn `${foodItem1DataUri};${foodItem2DataUri};${selectedDataPage};${userDataUri};${chartConfigUri}`\r\n}\r\n\r\n\r\nfunction makeFoodItemUriData(selectedFoodItem: SelectedFoodItem): FoodItemUriData {\r\n\treturn {\r\n\t\tfoodItemId: selectedFoodItem.foodItem.id,\r\n\t\tportionData: selectedFoodItem.portion,\r\n\t\tsource: selectedFoodItem.selectedSource,\r\n\t\tcombineData: selectedFoodItem.combineData,\r\n\t\tsupplementData: selectedFoodItem.supplementData\r\n\t}\r\n}\r\n\r\n\r\nexport function parseDirectComparetUri(uri: string, chartConfigData: DirectCompareChartConfigData): DirectCompareUriData | null {\r\n\tconst fragments = prepareUriForParsing(uri).split(\";\")\r\n\tif(fragments.length !== 11) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst selectedDataPage = fragments[8]\r\n\tconst userData = convertUserDataStringToObject(fragments[9])\r\n\tconst chartConfigString = fragments[10]\r\n\t\r\n\tconst foodItemUriData1 = getFoodItemUriData(fragments)\r\n\tconst remainingFragments = fragments.slice(4)\r\n\tconst foodItemUriData2 = getFoodItemUriData(remainingFragments)\r\n\t\r\n\tif(!userData || !foodItemUriData1 || !foodItemUriData2) {\r\n\t\treturn null\r\n\t}\r\n\t\r\n\tconst newChartConfigData = getUpdatedDirectCompareChartConfig(chartConfigData, chartConfigString, selectedDataPage)\r\n\t\r\n\treturn {\r\n\t\tselectedFoodItem1: foodItemUriData1,\r\n\t\tselectedFoodItem2: foodItemUriData2,\r\n\t\tselectedDataPage: selectedDataPage,\r\n\t\tuserData: userData,\r\n\t\tchartConfigData: newChartConfigData\r\n\t}\r\n\t\r\n}","import {DirectCompareSelector} from \"../foodselector/DirectCompareSelector\";\r\nimport SelectedFoodItem from \"../../types/livedata/SelectedFoodItem\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {DirectCompareDataPanel} from \"./DirectCompareDataPanel\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {PATH_DIRECT_COMPARE, QUERYKEY_DATAPANEL_ITEM} from \"../../config/Constants\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {makeDirectCompareDataUri, parseDirectComparetUri} from \"../../service/uri/DirectCompareUriService\";\r\nimport {checkUserDataValidity, USERDATA_OK} from \"../../service/UserDataService\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {\r\n\tGA_ACTION_SELECTION_DIRECT_COMPARE, GA_CATEGORY_DIRECT_COMPARE,\r\n} from \"../../config/GA_Events\";\r\n\r\nexport default function DirectCompareContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const initialFoodItem1 = applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem1\r\n        : null\r\n\r\n    const initialFoodItem2 = applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        ? applicationContext?.applicationData.directCompareDataPanel.selectedFoodItem2\r\n        : null\r\n\r\n    const [selectedFoodItem1, setSelectedFoodItem1] = useState<SelectedFoodItem | null>(initialFoodItem1)\r\n    const [selectedFoodItem2, setSelectedFoodItem2] = useState<SelectedFoodItem | null>(initialFoodItem2)\r\n\r\n\tuseEffect(() => {\r\n        buildDataObjectsFromURI()\r\n    }, [applicationContext?.applicationData.directCompareDataPanel])\r\n\r\n\t\r\n    if (applicationContext === null || !applicationContext.ready) {\r\n        return <div/>\r\n    }\r\n\r\n\tconst buildDataObjectsFromURI = () => {\r\n\t\tif(!applicationContext) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tif(!selectedFoodItem1 || !selectedFoodItem2) {\t\t\t\r\n\t\t\tcreateDataFromUriQuery()\t\t\r\n\t\t} else {   // Set new URI Query\t\t\r\n\t\t\tupdateUriQuery()\r\n\t\t}\r\n    }\r\n\r\n\tconst chartConfigData = applicationContext.applicationData.directCompareDataPanel.directCompareConfigChart\r\n\r\n\tconst updateUriQuery = () => {\r\n\t\tconst userData = applicationContext.userData\r\n\t\tconst selectedDataPage = applicationContext.applicationData.directCompareDataPanel.selectedDataPage\r\n\r\n\t\tif(selectedFoodItem1 && selectedFoodItem2) {\r\n\t\t\tconst query = makeDirectCompareDataUri(selectedFoodItem1, selectedFoodItem2, userData, selectedDataPage, \r\n\t\t\t\tchartConfigData)\r\n\t\t\t\t\r\n\t\t\thistory.push({\r\n\t\t\t\tpathName: PATH_DIRECT_COMPARE,\r\n\t\t\t\tsearch: `${QUERYKEY_DATAPANEL_ITEM}=${query}`\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst createDataFromUriQuery = () => {\r\n\t\t\tconst queryString = window.location.search.substring(1)\r\n\t\t\tconst equalOperator = queryString.indexOf(\"=\")\r\n            const key = queryString.substring(0, equalOperator)\r\n            const value = queryString.substring(equalOperator+1)\r\n\r\n\t\t\t// Set data from a simple food item (create data from query parameters)\r\n\t\t\tif(key === QUERYKEY_DATAPANEL_ITEM && value.length > 1) {\r\n\t\t\t\tconst uriDataObject = parseDirectComparetUri(value, chartConfigData)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tif(uriDataObject) {\r\n\t\t\t\t\tconst foodItem1 = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem1.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tconst foodItem2 = applicationContext.foodDataCorpus.foodItems.find(\r\n\t\t\t\t\t\tfoodItem => foodItem.id === uriDataObject.selectedFoodItem2.foodItemId\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif(!foodItem1 || !foodItem2) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(checkUserDataValidity(uriDataObject.userData) !== USERDATA_OK) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tapplicationContext.setUserData(uriDataObject.userData)\t\r\n\t\t\t\t\tapplicationContext.setDirectCompareData.updateDirectCompareChartConfig(uriDataObject.chartConfigData)\r\n\t\t\t\t\tapplicationContext.setDirectCompareData.setSelectedDirectCompareDataPage(uriDataObject.selectedDataPage)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst foodClass1 = applicationContext.foodDataCorpus.foodClasses.find(\r\n\t\t\t\t\t\tfoodClass => foodClass.id === foodItem1.foodClass)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tconst foodClass2 = applicationContext.foodDataCorpus.foodClasses.find(\r\n\t\t\t\t\t\tfoodClass => foodClass.id === foodItem2.foodClass)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem1: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1000,\r\n\t\t\t\t\t\tfoodItem: foodItem1,\r\n\t\t\t\t\t\tfoodClass: foodClass1,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem1.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem1.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem1.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem1.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst selectedFoodItem2: SelectedFoodItem = {\r\n\t\t\t\t\t\tid: 1001,\r\n\t\t\t\t\t\tfoodItem: foodItem2,\r\n\t\t\t\t\t\tfoodClass: foodClass2,\r\n\t\t\t\t\t\tportion: uriDataObject.selectedFoodItem2.portionData,\r\n\t\t\t\t\t\tselectedSource: uriDataObject.selectedFoodItem2.source,\r\n\t\t\t\t\t\tcombineData: uriDataObject.selectedFoodItem2.combineData,\r\n\t\t\t\t\t\tsupplementData: uriDataObject.selectedFoodItem2.supplementData\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tupdateSelectedFoodItems(selectedFoodItem1, selectedFoodItem2)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n    const updateSelectedFoodItems = (selectedFoodItem1: SelectedFoodItem, selectedFoodItem2: SelectedFoodItem) => {\r\n    \tconst foodClassNameKey1 = selectedFoodItem1.foodClass?.nameKey\r\n\t\tconst nameEntity1 = applicationContext.foodDataCorpus.foodNames.find(entry => entry.id === foodClassNameKey1)\r\n\t\tconst foodClassName1 = nameEntity1 ? nameEntity1.englishName : ''\r\n\t\tconst foodClassNameKey2 = selectedFoodItem2.foodClass?.nameKey\r\n\t\tconst nameEntity2 = applicationContext.foodDataCorpus.foodNames.find(entry => entry.id === foodClassNameKey2)\r\n\t\tconst foodClassName2 = nameEntity2 ? nameEntity2.englishName : ''\r\n\t\tconst label = `${foodClassName1}; ${foodClassName2}`\r\n\t\tconst debugMode = applicationContext.debug\r\n\t\tcallEvent(debugMode, GA_ACTION_SELECTION_DIRECT_COMPARE, GA_CATEGORY_DIRECT_COMPARE, label, selectedFoodItem1.foodItem.id)\r\n\r\n\t\tsetSelectedFoodItem1(selectedFoodItem1)\r\n        setSelectedFoodItem2(selectedFoodItem2)\r\n        applicationContext.setDirectCompareData.setSelectedDirectCompareItems(selectedFoodItem1, selectedFoodItem2)\r\n    }\r\n\r\n    return (\r\n        <div className={\"container-fluid\"}>\r\n            <div className={\"row\"}>\r\n                <div className={\"col-4\"}>\r\n                    <DirectCompareSelector updateSelectedFoodItems={updateSelectedFoodItems}/>\r\n                </div>\r\n                <div className={\"col-8\"} style={{padding: \"32px\"}}>\r\n                    {selectedFoodItem1 !== null && selectedFoodItem2 !== null ?\r\n                    <DirectCompareDataPanel selectedFoodItem1={selectedFoodItem1}\r\n                                            selectedFoodItem2={selectedFoodItem2}/>\r\n                        : <div className={\"form-text\"}><i>{applicationStrings.direct_compare_text[languageContext.language]}</i></div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {SEX_FEMALE, SEX_MALE} from \"../config/Constants\";\r\nimport {UserData} from \"../types/livedata/UserData\";\r\nimport {\r\n    initialUserDataAge,\r\n    initialUserDataBreastfeeding,\r\n    initialUserDataLeisureSports,\r\n    initialUserDataPregnant,\r\n    initialUserDataSex,\r\n    initialUserDataSize,\r\n    initialUserDataWeight\r\n} from \"../config/ApplicationSetting\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {NotificationManager} from 'react-notifications'\r\nimport 'react-notifications/lib/notifications.css';\r\nimport {Form, FormControl, FormGroup} from \"react-bootstrap\";\r\nimport Select from 'react-select';\r\nimport {getPalCategories, getPalCategory} from \"../service/calculation/EnergyService\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport ReactSelectOption from \"../types/ReactSelectOption\";\r\nimport {isMobileDevice, isSmallScreen, useWindowDimension} from \"../service/WindowDimension\";\r\nimport {\r\n    checkUserDataValidity,\r\n    USERDATA_ERROR_AGE,\r\n    USERDATA_ERROR_SIZE,\r\n    USERDATA_ERROR_WEIGHT\r\n} from \"../service/UserDataService\";\r\nimport {customSelectStyles} from \"../config/UI_Config\";\r\nimport {FaLightbulb} from \"react-icons/fa\";\r\nimport {callEvent} from \"../service/GA_EventService\";\r\nimport {GA_ACTION_USER_SETTINGS, GA_CATEGORY_USER_SETTINGS} from \"../config/GA_Events\";\r\n\r\nexport function UserSettings() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const languageContext = useContext(LanguageContext)\r\n    const lang = languageContext.language\r\n\r\n    const [age, setAge] = useState<number>(initialUserDataAge)\r\n    const [size, setSize] = useState<number>(initialUserDataSize)\r\n    const [weight, setWeight] = useState<number>(initialUserDataWeight)\r\n    const [sex, setSex] = useState<string>(initialUserDataSex)\r\n    const [pregnant, setPregnant] = useState<boolean>(initialUserDataPregnant)\r\n    const [breastFeeding, setBreastFeeding] = useState<boolean>(initialUserDataBreastfeeding)\r\n    const [palValue, setPalValue] = useState<ReactSelectOption | null>(null)\r\n    const [leisureSport, setLeisureSport] = useState<boolean>(initialUserDataLeisureSports)\r\n\r\n    const windowSize = useWindowDimension()\r\n\r\n    useEffect(() => {\r\n        if (applicationContext) {\r\n            setAge(applicationContext.userData.age)\r\n            setSize(applicationContext.userData.size)\r\n            setWeight(applicationContext.userData.weight)\r\n            setSex(applicationContext.userData.sex)\r\n            setPregnant(applicationContext.userData.pregnant)\r\n            setBreastFeeding(applicationContext.userData.breastFeeding)\r\n            setLeisureSport(applicationContext.userData.leisureSports)\r\n        }\r\n    }, [applicationContext])\r\n\r\n    const changeAge = (event: any) => {\r\n        setAge(event.target.value)\r\n    }\r\n\r\n    const changeSize = (event: any) => {\r\n        setSize(event.target.value)\r\n    }\r\n\r\n    const changeWeight = (event: any) => {\r\n        setWeight(event.target.value)\r\n    }\r\n\r\n    const handleRadioButtonClick = (event: any) => {\r\n        const value = event.target.value;\r\n        const sex = value === SEX_MALE ? SEX_MALE : SEX_FEMALE;\r\n        if (sex === SEX_MALE) {\r\n            setPregnant(false)\r\n            setBreastFeeding(false)\r\n        }\r\n        setSex(sex)\r\n    }\r\n\r\n    const changePregnant = (event: any) => {\r\n        setPregnant(!pregnant)\r\n    }\r\n\r\n    const changeBreastFeeding = (event: any) => {\r\n        setBreastFeeding(!breastFeeding)\r\n    }\r\n\r\n    const changeAdditionalPalPorts = (event: any) => {\r\n        setLeisureSport(!leisureSport)\r\n    }\r\n\r\n    const changePalValue = (value: ReactSelectOption) => {\r\n        setPalValue(value)\r\n    }\r\n\r\n    const submitUserData = () => {\r\n        if (!applicationContext) {\r\n            return\r\n        }\r\n\r\n        const userData: UserData = {\r\n            age: age,\r\n            size: size,\r\n            weight: weight,\r\n            sex: sex,\r\n            pregnant: pregnant,\r\n            breastFeeding: breastFeeding,\r\n            palValue: palValue ? palValue.value : applicationContext.userData.palValue,\r\n            leisureSports: leisureSport,\r\n            initialValues: false\r\n        }\r\n\r\n        const inputOk = checkInputValidity(userData)\r\n\r\n        if (inputOk) {\r\n            callEvent(applicationContext.debug, GA_ACTION_USER_SETTINGS, GA_CATEGORY_USER_SETTINGS)\r\n            applicationContext.setUserData(userData)\r\n            NotificationManager.success(applicationStrings.message_userdata_success[lang])\r\n        }\r\n    }\r\n\r\n\r\n    const checkInputValidity = (userData: UserData) => {\r\n        const validationResult = checkUserDataValidity(userData)\r\n\r\n        if (validationResult === USERDATA_ERROR_AGE) {\r\n            showMessage(applicationStrings.message_userdata_error_age[lang]);\r\n            return false;\r\n        } else if (validationResult === USERDATA_ERROR_SIZE) {\r\n            showMessage(applicationStrings.message_userdata_error_size[lang]);\r\n            return false;\r\n        } else if (validationResult === USERDATA_ERROR_WEIGHT) {\r\n            showMessage(applicationStrings.message_userdata_error_weight[lang]);\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    const showMessage = (message: string) => {\r\n        NotificationManager.error(message)\r\n    }\r\n\r\n    const inputClass = isSmallScreen(windowSize) ? \"form-control form-control-sm input-sm\" : \"form-control input\"\r\n\r\n    const renderTextField = (label, value, callback) => {\r\n        const classRow = isMobileDevice() ? \"form-row-m\" : \"form-row\"\r\n\r\n        return (\r\n            <div className={classRow}>\r\n                <Form.Label className=\"form-label\">{label}:</Form.Label>\r\n                <FormControl\r\n                    className={inputClass}\r\n                    type=\"text\"\r\n                    value={value}\r\n                    onChange={callback}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderSexRadioButtons = () => {\r\n        const classRow = isMobileDevice() ? \"form-row-indent-m\" : \"form-row-indent\"\r\n\r\n        return (\r\n            <div className={classRow}>\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                label={applicationStrings.label_userSettings_sex_male[lang]}\r\n                                value={SEX_MALE}\r\n                                checked={(sex === SEX_MALE)}\r\n                                onChange={handleRadioButtonClick}\r\n                    />\r\n                    <Form.Check type=\"radio\"\r\n                                inline={true}\r\n                                label={applicationStrings.label_userSettings_sex_female[lang]}\r\n                                value={SEX_FEMALE}\r\n                                checked={(sex !== SEX_MALE)}\r\n                                onChange={handleRadioButtonClick}\r\n                    />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderFemaleCheckboxes = () => {\r\n        return (\r\n            <div className=\"form\" style={{marginLeft: \"100px\"}}>\r\n                <div>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                checked={pregnant === true}\r\n                                disabled={sex === SEX_MALE}\r\n                                label={applicationStrings.label_userSettings_pregnant[lang]}\r\n                                onClick={changePregnant}>\r\n                    </Form.Check>\r\n                </div>\r\n                <div>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                disabled={sex === SEX_MALE}\r\n                                label={applicationStrings.label_userSettings_breastfeeding[lang]}\r\n                                onClick={changeBreastFeeding}>\r\n                    </Form.Check>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    const renderPalList = (userData: UserData) => {\r\n        const palCategories = getPalCategories(lang);\r\n        if (!palCategories) {\r\n            return <div/>\r\n        }\r\n\r\n        if (!palValue) {   // Initialize pal value first time\r\n            let userDataPalValue = palCategories.find(palObject => palObject.value === userData.palValue)\r\n            if (!userDataPalValue) {\r\n                userDataPalValue = palCategories[0]\r\n            }\r\n            setPalValue(userDataPalValue)\r\n        }\r\n\r\n        if (!palValue) {\r\n            return <div/>\r\n        }\r\n\r\n        const descriptionCode = `palcat_desc_${getPalCategory(palValue.value)}`\r\n        const description = applicationStrings[descriptionCode][lang];\r\n\r\n        return (\r\n            <div className=\"form-row\">\r\n                <div className={\"usersettings-pal\"}>\r\n                    <label className=\"form-label\">{applicationStrings.label_userSettings_palValue[lang]}:</label>\r\n                    <Select className=\"form-control-sm\"\r\n                            options={palCategories}\r\n                            value={palValue}\r\n                            styles={customSelectStyles}\r\n                            onChange={(value) => changePalValue(value)}\r\n                    />\r\n                </div>\r\n                <p className=\"usersettings-pal-text\">\r\n                    {description}\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const renderActivityCheckboxes = () => {\r\n        return (\r\n            <div className=\"form-row-indent\" style={{marginTop: \"-15px\"}}>\r\n                <label className=\"form-elements\"\r\n                       data-tip={applicationStrings.label_userSettings_leisureSports_tooltip[lang]}>\r\n                    <ReactTooltip/>\r\n                    <Form.Check inline className=\"form-radiobutton\"\r\n                                label={applicationStrings.label_userSettings_leisureSports[lang]}\r\n                                checked={leisureSport}\r\n                                onChange={changeAdditionalPalPorts}>\r\n                    </Form.Check>\r\n                </label>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderSubmitButton = () => {\r\n        return (\r\n            <div className=\"text-center\">\r\n                <button type=\"button\"\r\n                        className=\"btn btn-primary\"\r\n                        style={{marginBottom: \"5vh\"}}\r\n                        onClick={() => submitUserData()}>\r\n                    {applicationStrings.button_submit[lang]}\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const value_age = (age != null) ? age : initialUserDataAge\r\n    const value_size = (size != null) ? size : initialUserDataSize\r\n    const value_weight = (weight != null) ? weight : initialUserDataWeight\r\n\r\n    return (\r\n        <div>\r\n            <div className={\"m-3\"}>\r\n               <FaLightbulb/> {applicationStrings.label_userSettings_intro[lang]}\r\n            </div>\r\n            <div className=\"container\" style={{paddingTop: \"24px\"}}>\r\n                <div className=\"row userDataSettings\">\r\n                    <div className=\"col-12\">\r\n                        <form>\r\n                            <FormGroup controlId=\"formBasicText\">\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-6\">\r\n                                        {renderTextField(applicationStrings.label_userSettings_age[lang], value_age, changeAge)}\r\n                                        {renderTextField(applicationStrings.label_userSettings_size[lang], value_size, changeSize)}\r\n                                        {renderTextField(applicationStrings.label_userSettings_weight[lang], value_weight, changeWeight)}\r\n                                    </div>\r\n                                    <div className=\"col-6\">\r\n                                        <Form.Label className=\"form-label\" style={{paddingLeft: \"20px\"}}>\r\n                                            {applicationStrings.label_userSettings_sex[lang]}\r\n                                        </Form.Label>\r\n                                        {renderSexRadioButtons()}\r\n                                        {renderFemaleCheckboxes()}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    {renderPalList(applicationContext.userData)}\r\n                                    {renderActivityCheckboxes()}\r\n                                </div>\r\n                            </FormGroup>\r\n                            {renderSubmitButton()}\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","export const MAIL_INVALID_NAME = \"mail invalid name\"\r\nexport const MAIL_NO_CONTENT = \"no content\"\r\nexport const MAIL_CONTENT_TO_LONG = \"content too long\"\r\nexport const MAIL_INVALID_ADDRESS = \"invalid address\"","import {MailData} from \"../types/livedata/MailData\";\r\nimport {\r\n    MAIL_INVALID_ADDRESS,\r\n    MAIL_CONTENT_TO_LONG,\r\n    MAIL_INVALID_NAME,\r\n    MAIL_NO_CONTENT\r\n} from \"../config/ErrorMessageCodes\";\r\nimport {maxMessageCharacters} from \"../config/ApplicationSetting\";\r\n\r\n\r\nconst mailRegex = '(?:[a-z0-9!#$%&\\'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&\\'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\\\])'\r\n\r\nexport function checkMailValidity(mail: MailData): string[] {\r\n    const errors: string[] = []\r\n\r\n    if (!checkName(mail.name)) {\r\n        errors.push(MAIL_INVALID_NAME)\r\n    }\r\n\r\n    if (!checkMailAddress(mail.address)) {\r\n        errors.push(MAIL_INVALID_ADDRESS)\r\n    }\r\n\r\n    if (!checkContent(mail.message)) {\r\n        errors.push(MAIL_NO_CONTENT)\r\n    }\r\n\r\n    if (!checkLength(mail.message)) {\r\n        errors.push(MAIL_CONTENT_TO_LONG)\r\n    }\r\n\r\n    return errors\r\n}\r\n\r\nfunction checkName(name: string): boolean {\r\n    return name.length >= 2 && name.length <= 50\r\n}\r\n\r\nfunction checkContent(content: string): boolean {\r\n    return content.length >= 20\r\n}\r\n\r\nfunction checkLength(content: string): boolean {\r\n    return content.length <= maxMessageCharacters\r\n}\r\n\r\nfunction checkMailAddress(mailAddress: string): boolean {\r\n    return mailAddress.match(mailRegex) !== null\r\n}\r\n","import React, {useContext, useState} from \"react\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {maxMessageCharacters} from \"../../config/ApplicationSetting\";\r\nimport {MailData} from \"../../types/livedata/MailData\";\r\nimport {checkMailValidity} from \"../../service/MailService\";\r\nimport {NotificationManager} from 'react-notifications'\r\nimport Recaptcha from 'react-recaptcha'\r\n\r\nimport {\r\n    MAIL_CONTENT_TO_LONG,\r\n    MAIL_INVALID_ADDRESS,\r\n    MAIL_INVALID_NAME,\r\n    MAIL_NO_CONTENT\r\n} from \"../../config/ErrorMessageCodes\";\r\nimport {RECAPTCHA_KEY, SERVICE_ID, TEMPLATE_ID, USER_ID} from \"../../config/ApplicationKeys\";\r\nimport emailjs from \"emailjs-com\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\nexport function ContactForm() {\r\n    const language = useContext(LanguageContext).language\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [mailAddress, setMailAdress] = useState(\"\")\r\n    const [message, setMessage] = useState(\"\")\r\n    const [characters, setCharacters] = useState(0)\r\n\r\n    const [userVerified, setUserVerified] = useState(false)\r\n\r\n    const updateName = (event) => {\r\n        setName(event.target.value)\r\n    }\r\n\r\n    const updateMailAddress = (event) => {\r\n        setMailAdress(event.target.value)\r\n    }\r\n\r\n    const updateMessage = (event) => {\r\n        setMessage(event.target.value)\r\n        setCharacters(event.target.value.length)\r\n    }\r\n\r\n    const verifyCallBack = (response) => {\r\n        if(response) {\r\n            setUserVerified(true)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n\r\n        if(!userVerified) {\r\n            NotificationManager.error(applicationStrings.label_mail_error_verification[language])\r\n            return\r\n        }\r\n\r\n        const mailData: MailData = {\r\n            name: name.trim(),\r\n            address: mailAddress.trim(),\r\n            message: message.trim()\r\n        }\r\n\r\n        const validationErrors = checkMailValidity(mailData)\r\n        if(validationErrors.length > 0) {\r\n            const firstError = validationErrors[0]\r\n            let errorMessage = ''\r\n            switch(firstError) {\r\n                case MAIL_INVALID_NAME:\r\n                    errorMessage = applicationStrings.label_mail_error_name[language]\r\n                    break\r\n                case MAIL_INVALID_ADDRESS:\r\n                    errorMessage = applicationStrings.label_mail_error_mailaddress[language]\r\n                    break\r\n                case MAIL_NO_CONTENT:\r\n                    errorMessage = applicationStrings.label_mail_error_nocontent[language]\r\n                    break\r\n                case MAIL_CONTENT_TO_LONG:\r\n                    errorMessage = applicationStrings.label_mail_error_content_too_long[language]\r\n                    break\r\n            }\r\n\r\n            NotificationManager.error(errorMessage)\r\n            return\r\n        }\r\n\r\n        sendMail(mailData, language)\r\n    }\r\n\r\n    const sendMail = (mail: MailData, language: string) => {\r\n        const options = {\r\n            reply_to: mail.address,\r\n            from_name: mail.name,\r\n            message: mail.message,\r\n        }\r\n\r\n        emailjs.send(SERVICE_ID, TEMPLATE_ID, options, USER_ID)\r\n            .then((result) => {\r\n                NotificationManager.info(applicationStrings.message_email_success[language])\r\n                setName(\"\")\r\n                setMessage(\"\")\r\n                setMailAdress(\"\")\r\n                setCharacters(0)\r\n            }, (error) => {\r\n                if(applicationContext?.debug) {\r\n                    console.log(error.text);\r\n                }\r\n                NotificationManager.info(applicationStrings.message_email_error[language])\r\n            });\r\n    }\r\n\r\n    const charactersLeft = maxMessageCharacters - characters\r\n    const charactersMessage = maxMessageCharacters >= 0\r\n        ? applicationStrings.label_mail_characters_left[language].replace(\"/xx/\", charactersLeft)\r\n        : applicationStrings.label_mail_too_long[language]\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className={\"container\"} style={{paddingBottom: \"30px\"}}>\r\n                <p>{applicationStrings.text_contact_form[language]}</p>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_name[language]}</span>\r\n                    <input className={\"form-control input\"}\r\n                           value={name}\r\n                           onChange={updateName}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_address[language]}</span>\r\n                    <input className={\"form-control input\"}\r\n                           value={mailAddress}\r\n                           onChange={updateMailAddress}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <span className={'form-label'}>{applicationStrings.label_mail_message[language]}</span>\r\n                    <textarea className={\"form-control input\"}\r\n                              rows={8}\r\n                              value={message}\r\n                              onChange={updateMessage}\r\n                    />\r\n                </div>\r\n                <div><p style={{fontSize: \"0.8em\"}}>{charactersMessage}</p></div>\r\n\r\n                <div style={{paddingTop: \"12px\", paddingBottom: \"36px\"}}>\r\n                    <Recaptcha\r\n                        sitekey={RECAPTCHA_KEY}\r\n                        render=\"explicit\"\r\n                        verifyCallback={verifyCallBack}\r\n                    />\r\n                </div>\r\n\r\n                <button className={\"btn btn-primary\"} type=\"submit\">{applicationStrings.button_send[language]}</button>\r\n            </div>\r\n        </form>\r\n    );\r\n};","import {applicationStrings} from \"../../static/labels\";\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\nexport function Sources() {\r\n    const language = useContext(LanguageContext).language\r\n\r\n    return (\r\n        <div className={\"container\"}>\r\n            <h4><b>{applicationStrings.text_contact_source1[language]}</b></h4>\r\n            <h5>{applicationStrings.text_contact_source2[language]}</h5>\r\n            <p>U.S. Department of Agriculture, Agricultural Research Service.<br/>\r\n                FoodData Central, 2021.</p>\r\n            <p>\r\n                Website: <a href={\"https://fdc.nal.usda.gov/\"}>Food Data Central</a>\r\n            </p>\r\n            <h5>{applicationStrings.text_contact_source3[language]}</h5>\r\n            <p>Deutsche Gesellschaft für Ernährung e.V.</p>\r\n            <p>\r\n                Website: <a href={\"https://www.dge.de/\"}>DGE</a>\r\n            </p>\r\n            <h5>{applicationStrings.text_contact_source4[language]}</h5>\r\n            <p>Prakash S. Shetty, Christiani J. K. Henry, Alison E. Black and A. M. Prentice:<br/>\r\n                \"Energy requirements of adults: an update on basal metabolic rates (BMRs) and physical activity\r\n                levels (PALs).\",<br/>\r\n                European journal of clinical nutrition (1996), Volume 50, Suppl 1, pp. 11-23\r\n            </p>\r\n        </div>\r\n    );\r\n\r\n}","import {buildDate, release} from \"../../config/ApplicationSetting\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\nexport function Versions() {\r\n    return <div className={\"container\"}>\r\n        {isMobileDevice() ?\r\n            <h3>\r\n                Food Compare\r\n            </h3>\r\n            :\r\n            <h1>\r\n                Food Compare\r\n            </h1>\r\n        }\r\n\r\n        <h6>\r\n            Version {release}\r\n        </h6>\r\n        <h6>\r\n            Build time: {buildDate}\r\n        </h6>\r\n\r\n        <p style={{paddingTop: \"24px\"}}>\r\n            <b>New features in Version {release}</b>\r\n            <ul>\r\n                <li>The layout of several menus has been revised</li>\r\n                <li>Food Compare fits better on mobile devices now, though some functionality remains limited</li>\r\n                <li>New food items have been added</li>\r\n            </ul>\r\n        </p>\r\n\r\n    </div>\r\n}","export default __webpack_public_path__ + \"static/media/impressum-german.92ba80d6.png\";","export default __webpack_public_path__ + \"static/media/impressum-english.1bd33956.png\";","import {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\n\r\nimport impressum_de from '../../static/image/impressum-german.png';\r\nimport impressum_en from '../../static/image/impressum-english.png';\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {LANGUAGE_DE} from \"../../config/Constants\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\nexport function Impressum() {\r\n    const lang = useContext(LanguageContext).language\r\n\r\n    const impressumPath = lang === LANGUAGE_DE ? impressum_de : impressum_en;\r\n    const columnClass = isMobileDevice() ? \"col-10\" : \"col-6\"\r\n\r\n    return (\r\n        <div className={\"container\"} style={{paddingBottom: \"30px\"}}>\r\n            <div className={columnClass}>\r\n                <p>\r\n                    <b>{applicationStrings.text_contact_disclaimer1[lang]}</b>\r\n                </p>\r\n                <p>\r\n                    <i>\r\n                        {applicationStrings.text_contact_disclaimer2[lang]}\r\n                    </i>\r\n                </p>\r\n                <p>\r\n                    <i>\r\n                        {applicationStrings.text_contact_disclaimer3[lang]}\r\n                    </i>\r\n                </p>\r\n            </div>\r\n            <div style={{paddingTop: \"20px\"}}>\r\n                <div style={{height: '180px'}}>\r\n                    <img src={impressumPath} alt={\"Impressumtext\"} style={{height: '180px'}}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useState} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {ToggleButton, ToggleButtonGroup} from \"react-bootstrap\";\r\nimport {ContactForm} from \"./ContactForm\";\r\nimport {Sources} from \"./Sources\";\r\nimport {Versions} from \"./Versions\";\r\nimport {Impressum} from \"./Impressum\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_CONTACT_SUBMENU,\r\n    GA_CATEGORY_CONTACT\r\n} from \"../../config/GA_Events\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\n\r\nexport function ContactContainer() {\r\n    const languageContext = useContext(LanguageContext)\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    const menu_contact = 1\r\n    const menu_sources = 2\r\n    const menu_versions = 3\r\n    const menu_impressum = 4\r\n\r\n\r\n    const [selectedMenu, setSelectedMenu] = useState(menu_contact)\r\n    const buttonStyle = {width: \"175px\"}\r\n\r\n    const renderSubMenu = () => {\r\n        switch (selectedMenu) {\r\n            case menu_contact:\r\n                return <ContactForm/>\r\n            case menu_sources:\r\n                return <Sources/>\r\n            case menu_versions:\r\n                return <Versions/>\r\n            case menu_impressum:\r\n                return <Impressum/>\r\n            default:\r\n                return <div/>\r\n        }\r\n    }\r\n\r\n    const onChangeSubmenu = (selectedMenu) => {\r\n        let label = \"\"\r\n        switch(selectedMenu) {\r\n            case menu_contact:\r\n                label = \"Contact\"\r\n                break\r\n            case menu_sources:\r\n                label = \"Sources\"\r\n                break\r\n            case menu_versions:\r\n                label = \"Versions\"\r\n                break\r\n            case menu_impressum:\r\n                label = \"Impressum\"\r\n                break\r\n        }\r\n\r\n        callEvent(applicationContext?.debug, GA_ACTION_CONTACT_SUBMENU, GA_CATEGORY_CONTACT, label)\r\n\r\n        setSelectedMenu(menu_contact)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={\"text-center\"} style={{paddingTop: \"25px\", paddingBottom: \"50px\"}}>\r\n                <ToggleButtonGroup className={\"contact\"}\r\n                                   type={\"radio\"}\r\n                                   name={\"contact menus\"}\r\n                                   defaultValue={menu_contact}>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_contact}\r\n                                  checked={selectedMenu === menu_contact}\r\n                                  onChange={() => onChangeSubmenu(menu_contact)}>\r\n                        {applicationStrings.menu_contact[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_sources}\r\n                                  checked={selectedMenu === menu_sources}\r\n                                  onChange={() => onChangeSubmenu(menu_sources)}>\r\n                        {applicationStrings.menu_contact_sources[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_versions}\r\n                                  checked={selectedMenu === menu_versions}\r\n                                  onChange={() => onChangeSubmenu(menu_versions)}>\r\n                        {applicationStrings.menu_contact_versions[languageContext.language]}\r\n                    </ToggleButton>\r\n                    <ToggleButton style={buttonStyle}\r\n                                  value={menu_impressum}\r\n                                  checked={selectedMenu === menu_impressum}\r\n                                  onChange={() => onChangeSubmenu(menu_impressum)}>\r\n                        {applicationStrings.menu_contact_impressum[languageContext.language]}\r\n                    </ToggleButton>\r\n                </ToggleButtonGroup>\r\n            </div>\r\n            <div>\r\n                {renderSubMenu()}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import {useContext, useEffect, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {getCategorySelectList} from \"../../service/nutrientdata/CategoryService\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {getElementsOfRankingGroup, getRankingGroups} from \"../../service/RankingService\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {Form} from \"react-bootstrap\";\r\nimport Select from 'react-select';\r\nimport {PATH_RANKING, QUERYKEY_DATAPANEL_RANKING} from \"../../config/Constants\";\r\nimport {makeRankingPanelDataUri, parseRankingPanelDataUri} from \"../../service/uri/RankingPanelUriService\";\r\nimport {RankingPanelData} from \"../../types/livedata/ApplicationData\";\r\nimport {customSelectStyles} from \"../../config/UI_Config\";\r\nimport {callEvent} from \"../../service/GA_EventService\";\r\nimport {\r\n    GA_ACTION_RANKING_CONFIG,\r\n    GA_ACTION_SELECTION_RANKING_CAT, GA_ACTION_SELECTION_RANKING_ELEMENT,\r\n    GA_CATEGORY_RANKING\r\n} from \"../../config/GA_Events\";\r\n\r\ninterface RankingSelectorProps {\r\n    openChart: (selectedCategory, selectedValue, use100gram, transformToDietaryRequirements) => void,\r\n    useHorizontalLayout: boolean\r\n}\r\n\r\nexport const BASE_DATA_INDEX = 0\r\nexport const VITAMIN_INDEX = 1\r\nexport const MINERAL_INDEX = 2\r\nexport const LIPIDS_INDEX = 3\r\nexport const CARBS_INDEX = 4\r\nexport const PROTEIN_INDEX = 5\r\n\r\nexport function RankingSelector(props: RankingSelectorProps) {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n    const history = useHistory()\r\n\r\n    const rankingPanelData = applicationContext?.applicationData.rankingPanelData\r\n\r\n    const initializeState = rankingPanelData && rankingPanelData.selectedFoodCategory\r\n                                && rankingPanelData.selectedGroup && rankingPanelData.selectedElement ? true : false\r\n\r\n    const [elementsList, setElementsList] = useState<any>()\r\n    const [initialized, setInitialized] = useState<boolean>(initializeState)\r\n\r\n    useEffect(() => {\r\n        if (applicationContext) {\r\n            const newElements = buildElementsList(applicationContext.applicationData.rankingPanelData.selectedGroup)\r\n            setElementsList(newElements)\r\n        }\r\n    }, [applicationContext?.applicationData.rankingPanelData.selectedGroup])\r\n\r\n    useEffect(() => {\r\n        if (selectedFoodCategory && selectedGroup && selectedElement && initialized) {\r\n            updateUriQuery()\r\n            openChart()\r\n        } else if (!initialized) {\r\n            buildRankingPanelPageFromURI()\r\n        }\r\n    }, [applicationContext?.applicationData.rankingPanelData.selectedFoodCategory,\r\n        applicationContext?.applicationData.rankingPanelData.selectedElement,\r\n        applicationContext?.applicationData.rankingPanelData.use100gram,\r\n        applicationContext?.applicationData.rankingPanelData.showDietaryRequirements,\r\n        elementsList\r\n    ])\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const {\r\n        selectedFoodCategory,\r\n        selectedGroup,\r\n        selectedElement,\r\n        use100gram,\r\n        showDietaryRequirements\r\n    } = applicationContext.applicationData.rankingPanelData\r\n\r\n    const buildRankingPanelPageFromURI = () => {\r\n        const queryString = window.location.search.substring(1)\r\n        const equalOperator = queryString.indexOf(\"=\")\r\n        const key = queryString.substring(0, equalOperator)\r\n        const value = queryString.substring(equalOperator + 1)\r\n\r\n        if (key === QUERYKEY_DATAPANEL_RANKING && value.length > 1) {\r\n            const uriData: RankingPanelData | null = parseRankingPanelDataUri(value, applicationContext.foodDataCorpus, language)\r\n            if (!uriData) {\r\n                return\r\n            }\r\n\r\n            const {selectedFoodCategory, selectedGroup, selectedElement} = uriData\r\n            if (selectedFoodCategory === null || selectedGroup === null || selectedElement === null) {\r\n                return\r\n            } else {   // Set new URI Query\r\n                applicationContext.setRankingPanelData(uriData)\r\n                openChart()\r\n                setInitialized(true)\r\n            }\r\n        }\r\n    }\r\n\r\n    const updateUriQuery = () => {\r\n        const query = makeRankingPanelDataUri(applicationContext.applicationData.rankingPanelData)\r\n\r\n        history.push({\r\n            pathName: PATH_RANKING,\r\n            search: `${QUERYKEY_DATAPANEL_RANKING}=${query}`\r\n        })\r\n    }\r\n\r\n    const handleFoodCategoryChange = (selectedOption) => {\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            selectedFoodCategory: selectedOption\r\n        }\r\n\r\n        callEvent(applicationContext.debug, GA_ACTION_SELECTION_RANKING_CAT, GA_CATEGORY_RANKING, selectedOption.value)\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const handleGroupChange = (selectedOption) => {\r\n        setInitialized(true)\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            selectedGroup: selectedOption,\r\n            selectedElement: null\r\n        }\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n        props.openChart(null, null, false, false);\r\n    }\r\n\r\n    const handleValueChange = (selectedOption) => {\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            selectedElement: selectedOption\r\n        }\r\n\r\n        callEvent(applicationContext.debug, GA_ACTION_SELECTION_RANKING_ELEMENT, GA_CATEGORY_RANKING, selectedOption.value)\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const handlePortionAmountChange = () => {\r\n        const label = \"100 gram portion: \" + !use100gram\r\n        callEvent(applicationContext.debug, GA_ACTION_RANKING_CONFIG, GA_CATEGORY_RANKING, label)\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            use100gram: !use100gram\r\n        }\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const handleDietaryRequirementsCheckbox = () => {\r\n        const label = \"use dietary req.: \" + !showDietaryRequirements\r\n        callEvent(applicationContext.debug, GA_ACTION_RANKING_CONFIG, GA_CATEGORY_RANKING, label)\r\n        const newRankingData = {\r\n            ...applicationContext.applicationData.rankingPanelData,\r\n            showDietaryRequirements: !showDietaryRequirements\r\n        }\r\n        applicationContext.setRankingPanelData(newRankingData)\r\n    }\r\n\r\n    const getFoodCategoryList = () => {\r\n        return getCategorySelectList(applicationContext.foodDataCorpus.categories, language)\r\n    }\r\n\r\n    const getRankingGroupsList = () => {\r\n        return getRankingGroups(language);\r\n    }\r\n\r\n    const buildElementsList = (selectedGroup) => {\r\n        if (!selectedGroup) {\r\n            return;\r\n        }\r\n\r\n        return getElementsOfRankingGroup(selectedGroup.value, language)\r\n    }\r\n\r\n    const openChart = () => {\r\n        if (!selectedFoodCategory || !selectedGroup || !selectedElement) {\r\n            return\r\n        }\r\n\r\n        const rankingCategory = selectedGroup ? selectedGroup.value : null\r\n        const mineralOrVitaminCategory = (rankingCategory === VITAMIN_INDEX) || (rankingCategory === MINERAL_INDEX);\r\n        const transformToDietaryRequirements = mineralOrVitaminCategory ? showDietaryRequirements : false;\r\n\r\n        props.openChart(selectedFoodCategory, selectedElement, use100gram, transformToDietaryRequirements);\r\n    }\r\n\r\n    const renderPortionForm = () => {\r\n        const rankingCategory = selectedGroup ? selectedGroup.value : null;\r\n\r\n        return (\r\n            <div className=\"column select-menu\" style={{paddingLeft: \"20px\", paddingTop: \"10px\"}}>\r\n                <form className=\"form-inline form-group\">\r\n                    <label className=\"form-elements form-label\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               checked={(use100gram)}\r\n                               onChange={handlePortionAmountChange}\r\n                        />\r\n                        100 g\r\n                    </label>\r\n                    <label className=\"form-elements-largespace form-label\">\r\n                        <input className=\"form-radiobutton\"\r\n                               type=\"radio\"\r\n                               checked={!use100gram}\r\n                               onChange={handlePortionAmountChange}\r\n                        />\r\n                        {applicationStrings.label_portion_common[language]}\r\n                    </label>\r\n                    {(rankingCategory === VITAMIN_INDEX || rankingCategory === MINERAL_INDEX) &&\r\n                    <Form.Label className=\"form-elements\">\r\n                        <Form.Check className=\"form-radiobutton\"\r\n                                    inline={true}\r\n                                    label={applicationStrings.label_ranking_dietaryRequirements[language]}\r\n                                    defaultChecked={showDietaryRequirements}\r\n                                    onClick={handleDietaryRequirementsCheckbox}>\r\n                        </Form.Check>\r\n                    </Form.Label>\r\n                    }\r\n                </form>\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n    const rankingList = getRankingGroupsList()\r\n\r\n    const containerClass = props.useHorizontalLayout ? \"container row\" : \"container\"\r\n    const selectorClass = props.useHorizontalLayout ? \"col-4 select-menu form-section\" : \"column select-menu form-section\"\r\n\r\n    return (\r\n        <div className={containerClass}>\r\n            <div className={selectorClass}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_category[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={getFoodCategoryList()}\r\n                        value={selectedFoodCategory}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleFoodCategoryChange}\r\n                />\r\n            </div>\r\n            <div className={selectorClass}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_group[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={rankingList}\r\n                        value={selectedGroup}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleGroupChange}\r\n                />\r\n            </div>\r\n            <div className={selectorClass}>\r\n                <span className={\"form-label\"}>{applicationStrings.label_value[language]}:</span>\r\n                <Select className=\"form-control-sm\"\r\n                        options={elementsList}\r\n                        value={selectedElement}\r\n                        styles={customSelectStyles}\r\n                        onChange={handleValueChange}\r\n                />\r\n            </div>\r\n            {renderPortionForm()}\r\n        </div>\r\n    )\r\n\r\n\r\n}","import {RankingPanelData} from \"../../types/livedata/ApplicationData\";\r\nimport {prepareUriForParsing} from \"./FoodDataPanelUriService\";\r\nimport {getCategorySelectList} from \"../nutrientdata/CategoryService\";\r\nimport FoodDataCorpus from \"../../types/nutrientdata/FoodDataCorpus\";\r\nimport {getElementsOfRankingGroup, getRankingGroups} from \"../RankingService\";\r\n\r\nexport function makeRankingPanelDataUri(rankingPanelData: RankingPanelData) {\r\n    const selectedCategory = rankingPanelData.selectedFoodCategory?.value\r\n    const selectedGroup = rankingPanelData.selectedGroup?.value\r\n    const selectedElement = rankingPanelData.selectedElement?.value\r\n\r\n    const use100gram = rankingPanelData.use100gram ? \"1\" : \"0\"\r\n    const showDailyRequirements = rankingPanelData.showDietaryRequirements ? \"1\" : \"0\"\r\n\r\n    return `${selectedCategory};${selectedGroup};${selectedElement};${use100gram}${showDailyRequirements}`\r\n}\r\n\r\nexport function parseRankingPanelDataUri(uri: string, foodDataCorpus: FoodDataCorpus, language: string): RankingPanelData | null {\r\n    const fragments = prepareUriForParsing(uri).split(\";\")\r\n    if(fragments.length !== 4) {\r\n        return null\r\n    }\r\n\r\n    if(fragments[3].length !== 2) {\r\n        return null\r\n    }\r\n\r\n    const selectedCategory = parseInt(fragments[0])\r\n    const selectedGroup = parseInt(fragments[1])\r\n    const selectedElement = fragments[2]\r\n\r\n    const foodCategories = getCategorySelectList(foodDataCorpus.categories, language)\r\n    const groups = getRankingGroups(language)\r\n    const elements = getElementsOfRankingGroup(selectedGroup, language)\r\n\r\n    const selectedFoodCategoryOption = foodCategories.find(foodCategory => foodCategory.value === selectedCategory)\r\n    const selectedGroupOption = groups.find(group => group.value === selectedGroup)\r\n    const selectedElementOption: any = elements ? elements.find(element => element.value === selectedElement) : null\r\n\r\n    const use100g = fragments[3].substring(0,1) === \"0\" ? false : true\r\n    const showDietaryRequirements = fragments[3].substring(1,2) === \"0\" ? false : true\r\n\r\n    if(selectedFoodCategoryOption && selectedGroupOption && selectedElementOption) {\r\n        return {\r\n            selectedFoodCategory: selectedFoodCategoryOption,\r\n            selectedGroup: selectedGroupOption,\r\n            selectedElement: selectedElementOption,\r\n            use100gram: use100g,\r\n            showDietaryRequirements: showDietaryRequirements\r\n        }\r\n    } else {\r\n        return null\r\n    }\r\n}","import * as Constants from \"../config/Constants\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {autoRound} from \"./calculation/MathService\";\r\nimport FoodItem from \"../types/nutrientdata/FoodItem\";\r\nimport FoodClass from \"../types/nutrientdata/FoodClass\";\r\nimport {getNameFromFoodNameList} from \"./nutrientdata/NameTypeService\";\r\nimport NameType from \"../types/nutrientdata/NameType\";\r\nimport {\r\n    BASE_DATA_INDEX,\r\n    CARBS_INDEX,\r\n    LIPIDS_INDEX,\r\n    MINERAL_INDEX,\r\n    PROTEIN_INDEX,\r\n    VITAMIN_INDEX\r\n} from \"../components/ranking/RankingSelector\";\r\nimport {getNutrientDataForFoodItem} from \"./nutrientdata/NutrientDataRetriever\";\r\nimport getName from \"./LanguageService\";\r\n\r\n\r\nexport interface ChartItem {\r\n    name: string\r\n    value: number\r\n}\r\n\r\n/**\r\n * Returns a list of all ranking categories.\r\n */\r\nexport function getRankingGroups(language: string) {\r\n    return [\r\n        {value: BASE_DATA_INDEX, label: applicationStrings.label_chart_nutrientComposition[language]},\r\n        {value: VITAMIN_INDEX, label: applicationStrings.label_nutrient_vit[language]},\r\n        {value: MINERAL_INDEX, label: applicationStrings.label_nutrient_min[language]},\r\n        {value: LIPIDS_INDEX, label: applicationStrings.label_nutrient_lipids_long[language]},\r\n        {value: CARBS_INDEX, label: applicationStrings.label_nutrient_carbohydrates[language]},\r\n        {value: PROTEIN_INDEX, label: applicationStrings.label_chart_proteins[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable vitamins.\r\n */\r\nexport function getBaseCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_ENERGY, label: applicationStrings.label_nutrient_energy[language]},\r\n        {value: Constants.DATA_WATER, label: applicationStrings.label_nutrient_water[language]},\r\n        {value: Constants.DATA_CARBS, label: applicationStrings.label_nutrient_carbohydrates[language]},\r\n        {value: Constants.DATA_LIPIDS, label: applicationStrings.label_nutrient_lipids_long[language]},\r\n        {value: Constants.DATA_PROTEINS, label: applicationStrings.label_nutrient_proteins[language]},\r\n        {value: Constants.DATA_ASH, label: applicationStrings.label_nutrient_ash[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable vitamin values.\r\n */\r\nexport function getVitaminCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_VITAMINS_A, label: applicationStrings.label_nutrient_vit_a[language]},\r\n        {value: Constants.DATA_VITAMINS_B1, label: applicationStrings.label_nutrient_vit_b1[language]},\r\n        {value: Constants.DATA_VITAMINS_B2, label: applicationStrings.label_nutrient_vit_b2[language]},\r\n        {value: Constants.DATA_VITAMINS_B3, label: applicationStrings.label_nutrient_vit_b3[language]},\r\n        {value: Constants.DATA_VITAMINS_B5, label: applicationStrings.label_nutrient_vit_b5[language]},\r\n        {value: Constants.DATA_VITAMINS_B6, label: applicationStrings.label_nutrient_vit_b6[language]},\r\n        {value: Constants.DATA_VITAMINS_B9, label: applicationStrings.label_nutrient_vit_b9[language]},\r\n        {value: Constants.DATA_VITAMINS_B12, label: applicationStrings.label_nutrient_vit_b12[language]},\r\n        {value: Constants.DATA_VITAMINS_C, label: applicationStrings.label_nutrient_vit_c[language]},\r\n        {value: Constants.DATA_VITAMINS_D, label: applicationStrings.label_nutrient_vit_d[language]},\r\n        {value: Constants.DATA_VITAMINS_E, label: applicationStrings.label_nutrient_vit_e[language]},\r\n        {value: Constants.DATA_VITAMINS_K, label: applicationStrings.label_nutrient_vit_k[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable mineral values.\r\n */\r\nexport function getMineralCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_MINERAL_CALCIUM, label: applicationStrings.label_nutrient_min_calcium[language]},\r\n        {value: Constants.DATA_MINERAL_IRON, label: applicationStrings.label_nutrient_min_iron[language]},\r\n        {value: Constants.DATA_MINERAL_MAGNESIUM, label: applicationStrings.label_nutrient_min_magnesium[language]},\r\n        {value: Constants.DATA_MINERAL_PHOSPHORUS, label: applicationStrings.label_nutrient_min_phosphorus[language]},\r\n        {value: Constants.DATA_MINERAL_POTASSIUM, label: applicationStrings.label_nutrient_min_potassimum[language]},\r\n        {value: Constants.DATA_MINERAL_SODIUM, label: applicationStrings.label_nutrient_min_sodium[language]},\r\n        {value: Constants.DATA_MINERAL_ZINC, label: applicationStrings.label_nutrient_min_zinc[language]},\r\n        {value: Constants.DATA_MINERAL_SELENIUM, label: applicationStrings.label_nutrient_min_selenium[language]},\r\n        {value: Constants.DATA_MINERAL_MANGANESE, label: applicationStrings.label_nutrient_min_manganese[language]},\r\n        {value: Constants.DATA_MINERAL_COPPER, label: applicationStrings.label_nutrient_min_copper[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable mineral values.\r\n */\r\nexport function getLipidCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_LIPIDS_SATURATED, label: applicationStrings.label_nutrient_lipids_saturated[language]},\r\n        {\r\n            value: Constants.DATA_LIPIDS_MONO_UNSATURATED,\r\n            label: applicationStrings.label_nutrient_lipids_unsaturated_mono[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_LIPIDS_POLY_UNSATURATED,\r\n            label: applicationStrings.label_nutrient_lipids_unsaturated_poly[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_LIPIDS_TRANSFATTY_ACIDS,\r\n            label: applicationStrings.label_nutrient_lipids_unsaturated[language]\r\n        },\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all selectable carbohydrate values.\r\n */\r\nexport function getCarbohydrateCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_CARBS_DIETARY_FIBERS, label: applicationStrings.label_nutrient_dietaryFibers[language]},\r\n        {value: Constants.DATA_CARBS_SUGAR, label: applicationStrings.label_nutrient_sugar[language]},\r\n        {value: Constants.DATA_CARBS_GLUCOSE, label: applicationStrings.label_nutrient_carbohydrates_glucose[language]},\r\n        {\r\n            value: Constants.DATA_CARBS_FRUCTOSE,\r\n            label: applicationStrings.label_nutrient_carbohydrates_fructose[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_CARBS_GALACTOSE,\r\n            label: applicationStrings.label_nutrient_carbohydrates_galactose[language]\r\n        },\r\n        {value: Constants.DATA_CARBS_SUCROSE, label: applicationStrings.label_nutrient_carbohydrates_sucrose[language]},\r\n        {value: Constants.DATA_CARBS_LACTOSE, label: applicationStrings.label_nutrient_carbohydrates_lactose[language]},\r\n        {value: Constants.DATA_CARBS_MALTOSE, label: applicationStrings.label_nutrient_carbohydrates_maltose[language]},\r\n        {value: Constants.DATA_CARBS_STARCH, label: applicationStrings.label_nutrient_carbohydrates_starch[language]},\r\n    ];\r\n}\r\n\r\n\r\n/**\r\n * Returns the list of all protein values.\r\n */\r\nexport function getProteinCategoryValues(language: string) {\r\n    return [\r\n        {value: Constants.DATA_PROTEIN_ALANINE, label: applicationStrings.label_nutrient_proteins_alanine[language]},\r\n        {value: Constants.DATA_PROTEIN_ARGININE, label: applicationStrings.label_nutrient_proteins_arginine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_ASPARTIC_ACID,\r\n            label: applicationStrings.label_nutrient_proteins_asparticAcid[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_CYSTINE, label: applicationStrings.label_nutrient_proteins_cystine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_GLUTAMIC_ACID,\r\n            label: applicationStrings.label_nutrient_proteins_glutamicAcid[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_GLYCINE, label: applicationStrings.label_nutrient_proteins_glysine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_HISTIDINE,\r\n            label: applicationStrings.label_nutrient_proteins_histidine[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_PROTEIN_ISOLEUCINE,\r\n            label: applicationStrings.label_nutrient_proteins_isoleucine[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_LEUCINE, label: applicationStrings.label_nutrient_proteins_leucine[language]},\r\n        {value: Constants.DATA_PROTEIN_LYSINE, label: applicationStrings.label_nutrient_proteins_lysine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_METHIONINE,\r\n            label: applicationStrings.label_nutrient_proteins_methionine[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_PROTEIN_PHENYLALANINE,\r\n            label: applicationStrings.label_nutrient_proteins_phenylalanine[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_PROLINE, label: applicationStrings.label_nutrient_proteins_proline[language]},\r\n        {value: Constants.DATA_PROTEIN_SERINE, label: applicationStrings.label_nutrient_proteins_serine[language]},\r\n        {\r\n            value: Constants.DATA_PROTEIN_THREONINE,\r\n            label: applicationStrings.label_nutrient_proteins_threonine[language]\r\n        },\r\n        {\r\n            value: Constants.DATA_PROTEIN_TRYPTOPHAN,\r\n            label: applicationStrings.label_nutrient_proteins_tryptophan[language]\r\n        },\r\n        {value: Constants.DATA_PROTEIN_TYROSINE, label: applicationStrings.label_nutrient_proteins_tyrosine[language]},\r\n        {value: Constants.DATA_PROTEIN_VALINE, label: applicationStrings.label_nutrient_proteins_valine[language]},\r\n    ];\r\n}\r\n\r\n\r\nexport function getElementsOfRankingGroup(rankingGroup: number, language: string) {\r\n    switch (rankingGroup) {\r\n        case BASE_DATA_INDEX:\r\n            return getBaseCategoryValues(language)\r\n        case VITAMIN_INDEX:\r\n            return getVitaminCategoryValues(language)\r\n        case MINERAL_INDEX:\r\n            return getMineralCategoryValues(language)\r\n        case LIPIDS_INDEX:\r\n            return getLipidCategoryValues(language)\r\n        case CARBS_INDEX:\r\n            return getCarbohydrateCategoryValues(language)\r\n        case PROTEIN_INDEX:\r\n            return getProteinCategoryValues(language)\r\n    }\r\n}\r\n\r\n\r\nexport function getOrderedFoodList(foodList: Array<FoodItem>, foodClassesList: Array<FoodClass>, selectedCategory: number,\r\n                                   selectedValue: any, use100gram: number, language: string, foodNamesList: Array<NameType>,\r\n                                   conditions: Array<NameType>) {\r\n    let chartItems: Array<ChartItem> = [];\r\n\r\n    for (let i = 0; i < foodList.length; i++) {\r\n        let foodItem: FoodItem = foodList[i];\r\n        const foodClassId = foodClassesList.find(foodClass => foodClass.id === foodItem.foodClass)\r\n        const category = foodClassId ? foodClassId.category : foodClassId\r\n\r\n        if (selectedCategory !== 0 && (category !== selectedCategory)) {\r\n            continue;  // Skip this food item, as it does not belong to the selected category\r\n        }\r\n\r\n        let value = getValueOfFoodItem(foodItem, selectedValue);\r\n        if (value === null || value === 0) {\r\n            continue;  // Skip all food items, which do not have the specified value\r\n        }\r\n\r\n        let portionAmount\r\n\r\n        if (!use100gram) {\r\n            const defaultPortion = foodItem.defaultPortionId\r\n            const portionObject = foodItem.portionData?.find(portionObject => portionObject.portionType === defaultPortion)\r\n            portionAmount = portionObject ? portionObject.amount : 100\r\n            value = getPortionValue(value, portionAmount);\r\n        } else {\r\n            value = autoRound(value)\r\n        }\r\n\r\n        let name = getNameFromFoodNameList(foodNamesList, foodItem.nameId!!, language)\r\n\r\n        if(foodItem.conditionId !== 100) {\r\n            const condition = conditions.find(condition => condition.id === foodItem.conditionId)\r\n            if(condition) {\r\n                const conditionName = getName(condition, language)\r\n                name = name + \", \" + conditionName\r\n            }\r\n        }\r\n\r\n        if(!use100gram) {\r\n            name = name + \" (\" + portionAmount + \"g )\"\r\n        }\r\n\r\n        const chartItem: ChartItem = {\r\n            name: name ? name : \"\",\r\n            value: value\r\n        };\r\n\r\n        chartItems.push(chartItem);\r\n    }\r\n\r\n\r\n    chartItems = chartItems.sort((obj1, obj2) => {\r\n        if (obj1.value > obj2.value) {\r\n            return -1;\r\n        } else if (obj1.value < obj2.value) {\r\n            return 1;\r\n        } else {\r\n            return 0;\r\n        }\r\n    });\r\n\r\n    return chartItems;\r\n}\r\n\r\n\r\nfunction getValueOfFoodItem(foodItem, selectedValue) {\r\n    let value\r\n\r\n    const nutrientData = getNutrientDataForFoodItem(foodItem, 0, true)\r\n\r\n    const baseData = nutrientData.baseData;\r\n    const vitaminData = nutrientData.vitaminData;\r\n    const mineralData = nutrientData.mineralData;\r\n    const lipidData = nutrientData.lipidData;\r\n    const carbsData = nutrientData.carbohydrateData;\r\n    const proteinData = nutrientData.proteinData;\r\n\r\n    if (proteinData === null) {\r\n        return 0;\r\n    }\r\n\r\n    // Base Data\r\n\r\n    if (selectedValue === Constants.DATA_ENERGY) {\r\n        value = baseData.water;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_WATER) {\r\n        value = baseData.water;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS) {\r\n        value = baseData.carbohydrates;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS) {\r\n        value = baseData.lipids;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEINS) {\r\n        value = baseData.proteins;\r\n    }\r\n\r\n\r\n    // Vitamins\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_A) {\r\n        value = vitaminData.a;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B1) {\r\n        value = vitaminData.b1;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B2) {\r\n        value = vitaminData.b2;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B3) {\r\n        value = vitaminData.b3;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B5) {\r\n        value = vitaminData.b5;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B6) {\r\n        value = vitaminData.b6;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B9) {\r\n        value = vitaminData.b9;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_B12) {\r\n        value = vitaminData.b12;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_C) {\r\n        value = vitaminData.c;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_D) {\r\n        value = vitaminData.d;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_E) {\r\n        value = vitaminData.e;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_VITAMINS_K) {\r\n        value = vitaminData.k;\r\n    }\r\n\r\n\r\n    // Minerals\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_CALCIUM) {\r\n        value = mineralData.calcium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_IRON) {\r\n        value = mineralData.iron;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_MAGNESIUM) {\r\n        value = mineralData.magnesium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_PHOSPHORUS) {\r\n        value = mineralData.phosphorus;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_POTASSIUM) {\r\n        value = mineralData.potassium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_SODIUM) {\r\n        value = mineralData.sodium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_ZINC) {\r\n        value = mineralData.zinc;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_SELENIUM) {\r\n        value = mineralData.selenium;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_COPPER) {\r\n        value = mineralData.copper;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_MINERAL_MANGANESE) {\r\n        value = mineralData.manganese;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_SATURATED) {\r\n        value = lipidData.saturated;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_MONO_UNSATURATED) {\r\n        value = lipidData.unsaturatedMono;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_POLY_UNSATURATED) {\r\n        value = lipidData.unsaturatedPoly;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_LIPIDS_TRANSFATTY_ACIDS) {\r\n        value = lipidData.transFattyAcids;\r\n    }\r\n\r\n\r\n    // Carbohydrates\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_DIETARY_FIBERS) {\r\n        value = baseData.dietaryFibers;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_SUGAR) {\r\n        value = carbsData.sugar;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_GLUCOSE) {\r\n        value = carbsData.glucose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_FRUCTOSE) {\r\n        value = carbsData.fructose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_GALACTOSE) {\r\n        value = carbsData.galactose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_SUCROSE) {\r\n        value = carbsData.sucrose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_LACTOSE) {\r\n        value = carbsData.lactose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_MALTOSE) {\r\n        value = carbsData.maltose;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_CARBS_STARCH) {\r\n        value = carbsData.starch;\r\n    }\r\n\r\n\r\n    // Proteins\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ALANINE) {\r\n        value = proteinData.alanine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ARGININE) {\r\n        value = proteinData.arginine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ASPARTIC_ACID) {\r\n        value = proteinData.asparticAcid;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_CYSTINE) {\r\n        value = proteinData.cystine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_GLUTAMIC_ACID) {\r\n        value = proteinData.glutamicAcid;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_GLYCINE) {\r\n        value = proteinData.glycine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_HISTIDINE) {\r\n        value = proteinData.histidine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_ISOLEUCINE) {\r\n        value = proteinData.isoleucine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_LEUCINE) {\r\n        value = proteinData.leucine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_LYSINE) {\r\n        value = proteinData.lysine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_METHIONINE) {\r\n        value = proteinData.methionine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_PHENYLALANINE) {\r\n        value = proteinData.phenylalanine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_PROLINE) {\r\n        value = proteinData.proline;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_SERINE) {\r\n        value = proteinData.serine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_THREONINE) {\r\n        value = proteinData.threonine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_TRYPTOPHAN) {\r\n        value = proteinData.tryptophan;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_TYROSINE) {\r\n        value = proteinData.tyrosine;\r\n    }\r\n\r\n    if (selectedValue === Constants.DATA_PROTEIN_VALINE) {\r\n        value = proteinData.valine;\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\nfunction getPortionValue(value, portionSize) {\r\n    const portionValue = value / 100 * portionSize;\r\n    return autoRound(portionValue);\r\n}","import {ChartItem} from \"../../service/RankingService\";\r\nimport {useContext} from \"react\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {color_green} from \"../../config/ChartConfig\";\r\nimport {getBarChartOptionsForRanking} from \"../../service/ChartConfigurationService\";\r\nimport {Bar} from \"react-chartjs-2\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\ninterface RankingChartProps {\r\n    chartItems: Array<ChartItem>\r\n    unit: string\r\n    selectedElement: string\r\n}\r\n\r\nexport function RankingChart(props: RankingChartProps) {\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const createChartData = () => {\r\n        const labels: Array<String> = [];\r\n        const data: Array<number> = [];\r\n\r\n        for (let i = 0; i < props.chartItems.length; i++) {\r\n            const chartItem = props.chartItems[i];\r\n\r\n            const name = chartItem.name\r\n            labels.push(name);\r\n            data.push(chartItem.value);\r\n        }\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: [{\r\n                data: data,\r\n                backgroundColor: color_green,\r\n                borderWidth: 2,\r\n                borderColor: '#555',\r\n            }]\r\n        };\r\n    }\r\n\r\n    const getOptions = () => {\r\n        let options = getBarChartOptionsForRanking(props.selectedElement, props.unit)\r\n        options = {\r\n            ...options, plugins: {\r\n                ...options.plugins, title: {\r\n                    ...options.plugins.title,\r\n                    position: \"left\"\r\n                }\r\n            }\r\n        }\r\n        return options\r\n    }\r\n\r\n\r\n    const chartData: any = createChartData();\r\n    const options = getOptions();\r\n    const dataAvailable = chartData.datasets.length > 0 && chartData.datasets[0].data.length > 0;\r\n\r\n    const width = isMobileDevice()\r\n        ? 40 * props.chartItems.length + 150\r\n        : 50 * props.chartItems.length + 150\r\n    const height = isMobileDevice() ? 200 : 500;\r\n    const maxWidth = isMobileDevice() ? \"90vw\": 1000;\r\n\r\n    let containerStyle: any = {\r\n        position: \"relative\",\r\n        width: `${width}px`\r\n    }\r\n\r\n    if(isMobileDevice()) {\r\n        containerStyle.height = `90vh`\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"smooth-scroll\" style={{overflowX: \"auto\", position: \"absolute\", maxWidth: maxWidth}}>\r\n                {dataAvailable &&\r\n                    <div style={containerStyle}>\r\n                        <Bar id=\"chart\"\r\n                             data={chartData}\r\n                             height={height}\r\n                             options={options}\r\n                        />\r\n                    </div>\r\n                }\r\n                {!dataAvailable &&\r\n                  <span>{applicationStrings.label_noData[language]}</span>\r\n                }\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n\r\n}","import {useContext, useState} from \"react\";\r\nimport {ApplicationDataContextStore} from \"../../contexts/ApplicationDataContext\";\r\nimport {LanguageContext} from \"../../contexts/LangContext\";\r\nimport {ChartItem, getOrderedFoodList} from \"../../service/RankingService\";\r\nimport {convertAbsoluteValueToDailyRequirement} from \"../../service/calculation/DietaryRequirementService\";\r\nimport * as Constants from \"./../../config/Constants\";\r\nimport {applicationStrings} from \"../../static/labels\";\r\nimport {RankingSelector} from \"./RankingSelector\";\r\nimport {RankingChart} from \"./RankingChart\";\r\nimport {maxElementsInRankingChart} from \"../../config/ApplicationSetting\";\r\nimport ReactSelectOption from \"../../types/ReactSelectOption\";\r\nimport {isMobileDevice} from \"../../service/WindowDimension\";\r\n\r\nexport function RankingContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const [chartItems, setChartItems] = useState<Array<ChartItem>>([])\r\n    const [unit, setUnit] = useState<string>(\"g\")\r\n    const [selectedValue, setSelectedValue] = useState<ReactSelectOption | null>(null)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    const openChart = (selectedCategory, selectedValue, use100gram, transformToDietaryRequirements) => {\r\n        if (!selectedValue) {\r\n            setChartItems([])\r\n            return\r\n        }\r\n\r\n        let category = 0;\r\n        if (selectedCategory) {\r\n            category = selectedCategory.value;\r\n        }\r\n\r\n        setSelectedValue(selectedValue)\r\n        const {foodItems, foodClasses, dietaryRequirements} = applicationContext.foodDataCorpus\r\n        const userData = applicationContext.userData\r\n\r\n        let orderedChartItems = getOrderedFoodList(foodItems, foodClasses, category,\r\n            selectedValue.value, use100gram, language, applicationContext?.foodDataCorpus.foodNames,\r\n            applicationContext?.foodDataCorpus.conditions);\r\n\r\n        if (transformToDietaryRequirements && dietaryRequirements) {\r\n            for (let i = 0; i < orderedChartItems.length; i++) {\r\n                orderedChartItems[i].value = convertAbsoluteValueToDailyRequirement(\r\n                    dietaryRequirements,\r\n                    selectedValue.value,\r\n                    orderedChartItems[i].value,\r\n                    userData\r\n                );\r\n            }\r\n        }\r\n\r\n        const unit = getUnit(selectedValue.value, transformToDietaryRequirements)\r\n\r\n        if (orderedChartItems.length > maxElementsInRankingChart) {\r\n            orderedChartItems = orderedChartItems.slice(0, maxElementsInRankingChart + 1)\r\n        }\r\n\r\n        setChartItems(orderedChartItems)\r\n        setUnit(unit)\r\n    }\r\n\r\n\r\n    const getUnit = (selectedValue, transformToDietaryRequirements) => {\r\n        if (selectedValue === Constants.DATA_ENERGY) {\r\n            return \"kCal\";\r\n        } else if (selectedValue === Constants.DATA_WATER\r\n            || selectedValue === Constants.DATA_LIPIDS\r\n            || selectedValue === Constants.DATA_CARBS\r\n            || selectedValue === Constants.DATA_CARBS_SUGAR\r\n            || selectedValue === Constants.DATA_PROTEINS\r\n            || selectedValue === Constants.DATA_CARBS_DIETARY_FIBERS\r\n            || selectedValue === Constants.DATA_LIPIDS_SATURATED\r\n            || selectedValue === Constants.DATA_LIPIDS_MONO_UNSATURATED\r\n            || selectedValue === Constants.DATA_LIPIDS_POLY_UNSATURATED\r\n            || selectedValue === Constants.DATA_LIPIDS_TRANSFATTY_ACIDS) {\r\n            return \"g\";\r\n        } else if (transformToDietaryRequirements) {\r\n            return \"%\";\r\n        } else {\r\n            return \"mg\";\r\n        }\r\n    }\r\n\r\n    const renderHelpText = () => {\r\n        const helpText = applicationStrings.text_ranking[language];\r\n\r\n        return (\r\n            <div className={\"container\"}>\r\n                <div className={\"row\"}>\r\n                    <div className=\"col-md-6 col-lg-5 infotextMenus\" style={{padding: \"24px\"}}>\r\n                        <i>{helpText}</i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderWebsite = () => {\r\n        return (\r\n            <div className=\"container-fluid\" style={{paddingTop: \"24px\"}}>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <RankingSelector openChart={openChart} useHorizontalLayout={false}/>\r\n                    </div>\r\n                    {chartItems && chartItems.length > 0 &&\r\n                    <div className=\"col-9\">\r\n                        <RankingChart chartItems={chartItems}\r\n                                      unit={unit}\r\n                                      selectedElement={selectedValue ? selectedValue.label : \"\"}/>\r\n                    </div>\r\n                    }\r\n                    {!chartItems &&\r\n                    renderHelpText()\r\n                    }\r\n                    {chartItems && chartItems.length === 0 &&\r\n                    applicationStrings.label_noData[language]\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderMobile = () => {\r\n        return (\r\n            <div className=\"container-fluid\" style={{paddingTop: \"24px\"}}>\r\n                <div>\r\n                    <RankingSelector openChart={openChart} useHorizontalLayout={isMobileDevice()}/>\r\n                </div>\r\n                <hr/>\r\n                {chartItems && chartItems.length > 0 &&\r\n                <div>\r\n                    <RankingChart chartItems={chartItems}\r\n                                  unit={unit}\r\n                                  selectedElement={selectedValue ? selectedValue.label : \"\"}/>\r\n                </div>\r\n                }\r\n                {!chartItems &&\r\n                renderHelpText()\r\n                }\r\n                {chartItems && chartItems.length === 0 &&\r\n                applicationStrings.label_noData[language]\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return isMobileDevice() ? renderMobile() : renderWebsite()\r\n\r\n}","import Header from \"./Header\";\r\nimport Switch from \"react-bootstrap/Switch\";\r\nimport {\r\n    PATH_CONTACT,\r\n    PATH_DIRECT_COMPARE,\r\n    PATH_FOODCOMPARE,\r\n    PATH_FOODDATA_PANEL,\r\n    PATH_HOME,\r\n    PATH_RANKING,\r\n    PATH_USERSETTINGS\r\n} from \"../config/Constants\";\r\nimport {Home} from \"./Home\";\r\nimport FoodDataPanelContainer from \"./fooddatapanel/FoodDataPanelContainer\";\r\nimport DirectCompareContainer from \"./directcompare/DirectCompareContainer\";\r\nimport {UserSettings} from \"./UserSettings\";\r\nimport {ContactContainer} from \"./contact/ContactContainer\";\r\nimport React, {useContext} from \"react\";\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom'\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {RankingContainer} from \"./ranking/RankingContainer\";\r\nimport {Chart, ArcElement} from 'chart.js'\r\nimport annotationPlugin from \"chartjs-plugin-annotation\";\r\n\r\nexport function WebPageContainer() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n\r\n    if (!applicationContext) {\r\n        return <div/>\r\n    }\r\n\r\n    // Registering requires some time and should only be performed when the real site is loaded.\r\n    Chart.register(annotationPlugin)\r\n    Chart.register(ArcElement);\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Router>\r\n                    <Header/>\r\n                    <Switch>\r\n                        <Route path={PATH_FOODCOMPARE} component={Home}/>\r\n                        <Route path={PATH_HOME} component={Home}/>\r\n                        <Route path={PATH_FOODDATA_PANEL} component={FoodDataPanelContainer}/>\r\n                        <Route path={PATH_DIRECT_COMPARE} component={DirectCompareContainer}/>\r\n                        <Route path={PATH_RANKING} component={RankingContainer}/>\r\n                        <Route path={PATH_USERSETTINGS} component={UserSettings}/>\r\n                        <Route path={PATH_CONTACT} component={ContactContainer}/>\r\n                        <Route exact path={\"/\"} component={Home}/>\r\n                    </Switch>\r\n                </Router>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","import React, {useContext} from \"react\";\r\nimport {applicationStrings} from \"../static/labels\";\r\nimport {LanguageContext} from \"../contexts/LangContext\";\r\nimport {ApplicationDataContextStore} from \"../contexts/ApplicationDataContext\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {isMobileDevice} from \"../service/WindowDimension\";\r\n\r\nexport default function MobileDeviceCheck() {\r\n    const applicationContext = useContext(ApplicationDataContextStore)\r\n    const {language} = useContext(LanguageContext)\r\n\r\n    const setMobileStatus = (status: boolean) => {\r\n        applicationContext?.setMobileUsage(status)\r\n    }\r\n\r\n    const showMobileInformationModal = () => {\r\n        return <div className={\"mobile-device-message\"}>\r\n            <div style={{margin: \"15px\"}}>\r\n                {applicationStrings.device_detection_hint[language]}\r\n            </div>\r\n            <div className={\"d-flex justify-content-center\"}>\r\n                <Button\r\n                    style={{minWidth: \"80px\"}}\r\n                    className=\"primary button-l\"\r\n                    onClick={() => setMobileStatus(false)}>\r\n                    OK\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    return <div>\r\n        {applicationContext?.useAsMobile === null && isMobileDevice() &&\r\n        < div>\r\n            {showMobileInformationModal()}\r\n        </div>\r\n        }\r\n    </div>\r\n\r\n}","import './App.scss';\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"bootstrap/dist/js/bootstrap.min.js\";\r\nimport {NotificationContainer} from 'react-notifications'\r\nimport ApplicationDataContextProvider from \"./contexts/ApplicationDataContext\";\r\nimport React, {useEffect} from \"react\";\r\n\r\nimport {LanguageProvider} from \"./contexts/LangContext\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport ReactGA from \"react-ga4\"\r\nimport {ANALYTICS_MESS_ID} from \"./config/ApplicationKeys\";\r\n\r\nimport {WebPageContainer} from \"./components/WebPageContainer\";\r\nimport {parseFoodCompareUri} from \"./service/uri/BaseUriService\";\r\nimport MobileDeviceCheck from \"./components/MobileDeviceCheck\";\r\n\r\n\r\nfunction initializeReactGA() {\r\n    (async () => {\r\n        try {   // NOTE: uBlock Origin may cause a crash here\r\n            ReactGA.initialize(ANALYTICS_MESS_ID)\r\n        } catch (e) {\r\n            console.log(\"GA4 React initialization error \", e)\r\n        }\r\n    })();\r\n}\r\n\r\nfunction App(): JSX.Element {\r\n    useEffect(() => {\r\n        ReactTooltip.rebuild()\r\n    })\r\n\r\n    const uriData: string | null = parseFoodCompareUri()\r\n    if(uriData !== \"test\" && uriData !== \"debug\") {\r\n        initializeReactGA()  // Initialize Google Analytics Tool if the app is not run in test/debug mode\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <NotificationContainer/>\r\n            <ReactTooltip/>\r\n            <LanguageProvider>\r\n                <ApplicationDataContextProvider>\r\n                    <MobileDeviceCheck/>\r\n                    <WebPageContainer/>\r\n                </ApplicationDataContextProvider>\r\n            </LanguageProvider>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport {hydrate, render} from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\n\r\nif (rootElement && rootElement.hasChildNodes()) {\r\n    hydrate(<App />, rootElement);\r\n} else {\r\n    render(\r\n        <App />, rootElement);\r\n}\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n\r\n\r\n"],"sourceRoot":""}